/*!
*  filename: ej.dashboarddesigner.min.js
*  version : 4.1.0.
*  Copyright Syncfusion Inc. 2001 - 2017. All rights reserved.
*  Use of this code is subject to the terms of our license.
*  A copy of the current license can be obtained at any time by e-mailing
*  licensing@syncfusion.com. Any infringement will be prosecuted under
*  applicable laws. 
*/
var InternalBrowseDialog=function(){function n(){this.id=null;this.category=[];this.selectedFile=null;this.targetInstance=null;this.targetMethod=null;this.targetType=null;this.browseDialog=null;this.filePath=null;this.fileContainer=null;this.backNodeReference=[];this.forwardNodeReference=[];this.footerTag=null;this.nameWaterMark="Dashboard Name";this.outerContainer=null;this.privacyContainer=null;this.ejBrowseScroller=null;this.ejBrowseWaitingPopup=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderSaveDashboardDialog();this.wireEvents()}return Object.defineProperty(n,"BrowseDialog",{get:function(){return(this.fileBrowse===null||this.fileBrowse===undefined)&&(this.fileBrowse=new ej.DashboardDesignerUtility.BrowseDialog),this.fileBrowse},enumerable:!0,configurable:!0}),n.prototype.renderBrowseDialog=function(){var u=this.browseDialog=ej.buildTag("div.e-userselect","",{},{id:this.id+"_browse_dialog"}),h=ej.buildTag("div","",{}),t=ej.buildTag("div","",{display:"table-row"},{id:this.id+"_browse_file_area"}),c=ej.buildTag("table","",{"margin-left":"10px","border-spacing":"0px"},{unselectable:"on"}),l=ej.buildTag("tr","",{height:"30px"}),a=ej.buildTag("td","",{width:"30px",height:"30px"}),v=ej.buildTag("span","",{"margin-top":"4px"},{"class":"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-reportdesigner-browse-backward e-dbrd-hand-cursor",id:this.id+"_browse_back_icon"}),f,e,o,s,ft,et;a.append(v);v.bind("click",$.proxy(this.backOperation,this));f=ej.buildTag("td","",{width:"30px",height:"30px"});e=ej.buildTag("span","",{"margin-top":"4px"},{"class":"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-reportdesigner-browse-forward e-dbrd-hand-cursor",id:this.id+"_browse_forward_icon"});f.append(e);e.bind("click",$.proxy(this.forwardOperation,this));o=ej.buildTag("td","",{width:"30px",height:"30px"});s=ej.buildTag("div","",{display:"block","margin-left":"-5px",cursor:"default","margin-top":"4px"},{"class":"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-reportdesigner-browse-reload e-dbrd-hand-cursor",id:this.id+"_browse_reload_icon"});o.append(s);s.bind("click",$.proxy(this.reloadCategory,this));var y=ej.buildTag("td","",{width:"300px"}),p=ej.buildTag("div.e-designer-border","",{border:"0.5px solid #cbcbcb",height:"25px",width:"652px","background-color":"white","margin-left":"-12px","margin-top":"1px",display:"inline-flex"},{}),w=ej.buildTag("div","",{"padding-right":"5px","padding-left":"7px","padding-top":"3px"},{id:this.id+"_folder_icon_div"}),b=ej.buildTag("span.e-headericon e-reportdesigner-dataset-openfolder","",{"font-size":"14px"},{id:this.id+"_folderIcon"}),ot=this.filePath=ej.buildTag("input.e-reportdesigner-browse-path","",{height:"20px",width:"618px"},{type:"text",id:this.id+"_browse_file_path",disabled:!0});w.append(b);p.append(w).append(ot);b.attr("disabled","true").css("opacity","0.3");y.append(p);l.append(a).append(f).append(o).append(y);var i=this.outerContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{"border-top":"0.5px solid #cbcbcb","padding-left":"10px",height:"355px","background-color":"white",width:"750px","margin-top":"0.5px"},{id:this.id+"_browse_outer_div"}),k=ej.buildTag("div.e-designer-emptyfile","",{display:"none",width:"100%",height:"100%","margin-left":"-10px"},{id:this.id+"_browse_fileEmpty_msg"}),st=ej.buildTag("div.e-designer-empty-folder","This category is empty",{display:"table-cell",width:"100%",height:"100%"}),d=ej.buildTag("div.e-file-area","",{}),ht=this.fileContainer=ej.buildTag("div","",{height:"355px",width:"750px"},{id:this.id+"_browse_file_container"});d.append(ht);k.append(st);i.append(d).append(k);var r=ej.buildTag("table","",{"border-spacing":"0px",width:"100%"},{}),g=ej.buildTag("tr","",{},{}),n=ej.buildTag("td","",{},{}),nt=ej.buildTag("tr","",{},{}),tt=ej.buildTag("tr","",{},{}),ct=ej.buildTag("div.e-designer-fontfamily","Name",{"font-size":"13px",overflow:"hidden",float:"left",padding:"6px 7px 6px 0px","white-space":"nowrap","text-overflow":"ellipsis"}),it=ej.buildTag("input.e-textbox e-designer-txt","",{height:"25px","margin-top":"1px","box-sizing":"border-box","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box"},{id:this.id+"_browse_save",type:"text",tabindex:1}),rt=ej.buildTag("button.e-dbrd-hand-cursor","Cancel",{float:"right","margin-left":"12px"},{id:this.id+"_browse_btn_cancel",tabindex:4}),ut=ej.buildTag("button.e-dbrd-hand-cursor","Open",{float:"right","margin-left":"5px"},{id:this.id+"_browse_btn_import",tabindex:3});g.append(n.clone().append(ct).css({"padding-bottom":"5px",width:"75px"}),n.clone().append(it).css("padding-bottom","5px").attr("colspan","3"));ft=ej.buildTag("div.e-designer-fontfamily","Description",{"font-size":"13px",overflow:"hidden",float:"left",padding:"6px 7px 6px 0px","white-space":"nowrap","text-overflow":"ellipsis"});et=ej.buildTag("input.e-textbox e-designer-txt","",{height:"25px","margin-top":"1px","box-sizing":"border-box","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box"},{id:this.id+"_browse_save_desc",type:"text",tabindex:2});nt.append(n.clone().append(ft).css({"padding-bottom":"5px",width:"75px"}),n.clone().append(et).css("padding-bottom","5px").attr("colspan","3"));tt.append(n.clone().attr("colspan","3"),n.clone().append(rt).append(ut));r.append(g);r.append(nt);r.append(tt);c.append(l);t.append(c).append(i);h.append(t);u.append(h);$(document.body).append(u);u.ejDialog({minWidth:760,minHeight:250,height:"auto",width:"auto",enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",beforeClose:$.proxy(this.hideWaitingPopup,this),close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.footerTag=$("#"+this.id+"_browse_dialog_foot");this.footerTag.append(r);rt.ejButton({cssClass:"e-designer-cancelbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeDialog,this)});ut.ejButton({cssClass:"e-designer-okbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.updateFileInfo,this)});t.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});i.ejScroller({height:"355px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});this.ejBrowseScroller=i.data("ejScroller");this.ejBrowseWaitingPopup=t.data("ejWaitingPopup");ej.DashboardUtil.txtWaterMark(it,this.nameWaterMark)},n.prototype.reloadCategory=function(n){this.resetBrowseDialog(!0);this.loadCategory(n)},n.prototype.iconDisable=function(n,t){t?n.attr("disabled","true").css("opacity","0.3"):n.removeAttr("disabled").css("opacity","1")},n.prototype.backOperation=function(){var n,t,i;$("#"+this.id+"_browse_back_icon").attr("disabled")!=="disabled"&&(this.fileContainer.empty(),n=null,this.backNodeReference.length>0&&(t=this.backNodeReference.pop(),n=this.nodeSearch(t.ParentId,this.category,ej.isNullOrUndefined(t.ParentId)&&!ej.isNullOrUndefined(t.Name)?!0:!1),n.Files.length>0?(this.showReportFile(!0),this.nodeCreation(n.Files,n.Id),this.browseType!==BrowseType.Open||ej.isNullOrUndefined(n.Type)||n.Type!==1||ej.DashboardUtil.buttonEnable($("#"+this.id+"_browse_btn_import"),!1),this.ejBrowseScroller!==null&&this.ejBrowseScroller.refresh()):this.showReportFile(!1),i=this.filePath.val().split("/"),i[i.length-1]===t.Name&&$("#"+this.id+"_file_"+t.Id).addClass("e-reportdesigner-report-selection"),this.forwardNodeReference.push(t),i.pop(),this.filePath.val(i.join("/")),this.backNodeReference.length===0&&(this.iconDisable($("#"+this.id+"_browse_back_icon"),!0),this.filePath.val("/")),this.iconDisable($("#"+this.id+"_browse_forward_icon"),!1),ej.isNullOrUndefined(this.selectedFile)||$("#"+this.id+"_browse_btn_import").text()===this.dashboardDesigner.locale.menuBar.saveMenu&&$("#"+this.id+"_browse_btn_import").text(this.dashboardDesigner.locale.menuBar.openMenu)))},n.prototype.nodeSearch=function(n,t,i){for(var r,e,u={Files:[],Id:null,Type:null},f=0;f<t.length;f++){if(r=t[f],ej.isNullOrUndefined(n)&&i)return u.Files=this.category,u.Type=r.Type,u;if(n===r.Id)return u.Files=r.Files,u.Id=r.Id,u.Type=r.Type,u;if(r.Files.length>0)if(e=this.nodeSearch(n,r.Files),e===null)continue;else return e}return null},n.prototype.forwardOperation=function(){var i,n,t,r;$("#"+this.id+"_browse_forward_icon").attr("disabled")!=="disabled"&&(this.fileContainer.empty(),i=null,n=null,this.forwardNodeReference.length>0&&(t=this.forwardNodeReference.pop(),n=this.nodeSearch(t.Id,this.category),n.Files.length>0?(this.showReportFile(!0),this.nodeCreation(n.Files,n.Id),this.browseType!==BrowseType.Open||ej.isNullOrUndefined(n.Type)||n.Type!==1||ej.DashboardUtil.buttonEnable($("#"+this.id+"_browse_btn_import"),!1),this.ejBrowseScroller!==null&&this.ejBrowseScroller.refresh()):this.showReportFile(!1),r=this.filePath.val(),this.filePath.val((r==="/"?"":r)+"/"+t.Name),this.forwardNodeReference.length>0&&(i=this.forwardNodeReference[this.forwardNodeReference.length-1].Id),$("#"+this.id+"_file_"+i).addClass("e-reportdesigner-report-selection"),this.backNodeReference.push(t),this.iconDisable($("#"+this.id+"_browse_back_icon"),!1),this.forwardNodeReference.length===0&&this.iconDisable($("#"+this.id+"_browse_forward_icon"),!0),$("#"+this.id+"_browse_btn_import").text()===this.dashboardDesigner.locale.menuBar.openMenu&&$("#"+this.id+"_browse_btn_import").text(this.dashboardDesigner.locale.menuBar.saveMenu)))},n.prototype.fileSelection=function(n,t){var i,r;this.forwardNodeReference=[];!ej.isNullOrUndefined(n)&&ej.isNullOrUndefined(n.isEmpty)?n.Type===2&&this.browseType===BrowseType.Open?(this.selectedFile=n,this.updateFileInfo()):n.Type===2&&this.browseType===BrowseType.Save?($("#"+this.id+"_browse_save").val(n.Name),this.updateWaterMark()):(this.iconDisable($("#"+this.id+"_browse_back_icon"),!1),this.iconDisable($("#"+this.id+"_browse_forward_icon"),!0),i=this.filePath.val(),this.filePath.val((i==="/"?"":i)+"/"+n.Name),this.fileContainer.empty(),this.showReportFile(!0),n.Files&&n.Files.length>0&&this.nodeCreation(n.Files,n.Id),r={Id:n.Id,Name:n.Name,ParentId:t,Type:n.Type},this.backNodeReference.push(r),this.ejBrowseScroller!==null&&this.ejBrowseScroller.refresh()):(this.iconDisable($("#"+this.id+"_browse_back_icon"),!1),this.iconDisable($("#"+this.id+"_browse_forward_icon"),!0),i=this.filePath.val(),this.filePath.val((i==="/"?"":i)+"/"+n.files.Name),this.fileContainer.empty(),this.showReportFile(!1),r={Id:n.files.Id,Name:n.files.Name,ParentId:n.files.parentId,Type:n.files.Type},this.backNodeReference.push(r))},n.prototype.showReportFile=function(n){n?(this.outerContainer.find(".e-file-area").css("display","block"),this.outerContainer.find(".e-designer-emptyfile").css("display","none")):(this.outerContainer.find(".e-file-area").css("display","none"),this.outerContainer.find(".e-designer-emptyfile").css("display","table"))},n.prototype.nodeCreation=function(n,t){var i,r,f,u;if(!ej.isNullOrUndefined(n))for(i=0;i<n.length;i++)r=ej.buildTag("div.e-reportdesigner-reportbrowse","",{margin:"12px 7.5px 0px 7.5px",padding:"7px",width:"74px",height:"74px","text-align":"center","line-height":"normal","vertical-align":"middle",float:"left",display:"table-cell"},{id:this.id+"_file_"+n[i].Id}),f=ej.buildTag("div.e-designer-tile","",{width:"74px","padding-top":"2px",display:"inline-block","font-size":"50px"},{id:this.id+"_file_icon_"+n[i].Id}),this.getIcon(f,n[i].Type),u=ej.buildTag("span",n[i].Name,{width:"74px","padding-top":"5px",display:"inline-block","text-align":"center","font-size":"11px",height:"20px"},{id:this.id+"_"+n[i].Id}),u.addClass(ej.DashboardUtil.textWidth(n[i].Name,"segoe ui 11px")>96?"e-title-tip e-designer-txt-overflow":""),r.append(f).append(u),this.fileContainer.append(r),r.bind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.loadDashboardsInCategory,this,n[i],t)),r.bind("click",$.proxy(this.selectedFiles,this,n[i])),u.hasClass("e-title-tip")&&u.attr("title",n[i].Name)},n.prototype.loadDashboardsInCategory=function(n,t){n.Type===2?($("#"+this.id+"_browse_save").val(n.Name),this.updateFileInfo()):ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/getcategories/",{action:ej.DashboardUtil.DesignerAction.categoryCatalog,data:JSON.stringify(n.Name)},{fnction:$.proxy(this.fileSelectionChange,this,n,t),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!0,!0)},n.prototype.fileSelectionChange=function(n,t,i){i&&i.Status?(n.Files=JSON.parse(i.Data)||[],this.fileSelection(n,t,i)):this.fileSelection({isEmpty:!0,files:n},t,i);$("#"+this.id+"_browse_btn_import").text()===this.dashboardDesigner.locale.menuBar.openMenu&&$("#"+this.id+"_browse_btn_import").text(this.dashboardDesigner.locale.menuBar.saveMenu)},n.prototype.getIcon=function(n,t){var r=0,i,u;for(t===1?(r=4,n.addClass("e-reportdesigner-browse-folder")):t===2&&(r=20,n.addClass("e-reportdesigner-browse-reportfile")),i=0;i<r;i++)u=ej.buildTag("span","",{},{"class":"path"+(i+1).toString()}),n.append(u)},n.prototype.selectedFiles=function(n,t){($("#"+this.id+"_browse_file_container > div").removeClass("e-reportdesigner-report-selection"),$("#"+t.currentTarget.id).addClass("e-reportdesigner-report-selection"),this.browseType!==BrowseType.Save||n.Type===1)&&(this.selectedFile=n,this.browseType===BrowseType.Open&&n.Type!==1||this.browseType===BrowseType.Save?($("#"+this.id+"_browse_btn_import").text(this.dashboardDesigner.locale.menuBar.openMenu),ej.DashboardUtil.buttonEnable($("#"+this.id+"_browse_btn_import"),!0)):this.browseType===BrowseType.Open&&n.Type===1&&ej.DashboardUtil.buttonEnable($("#"+this.id+"_browse_btn_import"),!1))},n.prototype.updateFileInfo=function(){var f,n,e,i,u,t,r;if($("#"+this.id+"_browse_btn_import").text()===this.dashboardDesigner.locale.menuBar.openMenu)ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/getcategories/",{action:ej.DashboardUtil.DesignerAction.categoryCatalog,data:JSON.stringify(this.selectedFile.Name)},{fnction:$.proxy(this.fileSelectionChange,this,this.selectedFile,null),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!1,!0);else{if(f=$("#"+this.id+"_browse_save").val(),!this.dashboardDesigner.nameValidation(f)){ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.getInvalidNameAlertTitle("dashboardName",!0),this.dashboardDesigner.getInvalidNameAlertTitle("dashboardName",!1),IconType.errors,AlertType.Alert,!1,"");return}if(this.dashboardDesigner.reportFileName=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name=this.dashboardDesigner.model.dashboardName=$("#"+this.id+"_browse_save").val(),this.dashboardDesigner.dashboardDescription=this.dashboardDesigner.dashboardDescription=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description=this.dashboardDesigner.model.dashboardDescription=$("#"+this.id+"_browse_save_desc").val(),ej.DashboardDesignerUtility.Serialization.notifyChange(),!ej.isNullOrUndefined(this.selectedFile)&&!ej.isNullOrUndefined(this.selectedFile.Name))if(this.browseType===BrowseType.Open)this.selectedFile.Name.length>0&&this.selectedFile.Type!==1&&(this.targetInstance!==null?(ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.selectedFile,this.filePath.val(),this.targetType]),this.closeDialog()):(this.closeDialog(),ej.DashboardUtil.invokeCallBack(this.callBackfn,{name:this.selectedFile.Name,category:this.filePath.val(),type:BrowseType.Open})));else if(this.browseType===BrowseType.Save&&(n=$("#"+this.id+"_browse_save").val(),e=$("#"+this.id+"_browse_save_desc").val(),n=n===this.nameWaterMark?"":n,n&&n.length>0))if(this.filePath.val()==="/"&&this.selectedFile.Type!==1)ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.saveAsDashboard,this.dashboardDesigner.locale.browseDialogMessages.selectCategory,IconType.information,AlertType.Confirm,!1,"");else if(this.selectedFile.Type===1){for(i=this.selectedFile.Files,u=!1,t=0;t<i.length;t++)if(i[t].Type===2&&i[t].Name===n){u=!0;r="A dashboard with the same name already exists in the category '"+this.filePath.val().replace("/","")+"'"+this.dashboardDesigner.locale.browseDialogMessages.doYouWantToReplace;ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.DashboardSaved,r,IconType.question,AlertType.Confirm,!1,"",{method:"updateSaveFile",instance:this,dataInfo:{selectedFile:this.selectedFile,fileName:n,id:i[t].Id,eventType:DashboardDesignerEvent.SaveAs}});break}u||(this.targetInstance!==null?(ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.selectedFile,n,e,!1,null,DashboardDesignerEvent.SaveAs]),this.closeDialog()):(this.closeDialog(),ej.DashboardUtil.invokeCallBack(this.callBackfn,{category:this.selectedFile.Name,name:n,categoryId:this.selectedFile.Id,isExist:!1,type:BrowseType.Save})))}else this.selectedFile.Type===2&&this.selectedFile.Name===n&&(r="'"+this.selectedFile.Name+this.dashboardDesigner.locale.browseDialogMessages.fileExistInCategory+" '"+this.filePath.val().replace("/","")+"'"+this.dashboardDesigner.locale.browseDialogMessages.doYouWantToReplace,ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.saveAsDashboard,r,IconType.warning,AlertType.Confirm,!1,"",{method:"updateSaveFile",instance:this,dataInfo:{selectedFile:this.selectedFile,fileName:n,id:this.selectedFile.Id,eventType:DashboardDesignerEvent.SaveAs}}))}},n.prototype.updateSaveFile=function(n,t){n&&(this.targetInstance!==null?ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[t.selectedFile,t.fileName,this.dashboardDesigner.dashboardDescription,!0,t.id,t.eventType]):(this.closeDialog(),ej.DashboardUtil.invokeCallBack(this.callBackfn,{category:t.selectedFile.Name,name:t.fileName,isExist:!0,type:BrowseType.Save})))},n.prototype.openDialog=function(n,t,i){var r,u;this.resetBrowseDialog(!1);this.callBackfn=t;this.browseDialog.data("ejDialog").open();this.browseType=n;this.browseDialog.data("ejDialog").setModel({title:n===BrowseType.Save?"Save As Dashboard":"Select Dashboard"});this.enableSave(n===BrowseType.Save);!ej.isNullOrUndefined(i)&&i.length>0&&n===BrowseType.Save&&(r=this.dashboardDesigner.element.find("#"+this.id+"_browse_save").data("ejAutocomplete"),r.option("value",ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name),u=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description,$("#"+this.id+"_browse_save_desc").val(u));this.selectCategory();this.loadCategory();this.updateWaterMark()},n.prototype.openBrowseDialog=function(n,t,i,r,u){var f,e;this.resetBrowseDialog(!1);this.targetInstance=n;this.targetMethod=t;this.targetType=r;this.browseType=i;this.browseDialog.data("ejDialog").setModel({title:i===BrowseType.Save?"Save As Dashboard":"Select Dashboard"});this.enableSave(i===BrowseType.Save);!ej.isNullOrUndefined(u)&&u.length>0&&i===BrowseType.Save&&(f=this.dashboardDesigner.element.find("#"+this.id+"_browse_save").data("ejAutocomplete"),f.option("value",ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name),e=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description,$("#"+this.id+"_browse_save_desc").val(e));this.selectCategory();this.loadCategory(ej.isNullOrUndefined(this.dashboardDesigner.serverCategory)?null:this.dashboardDesigner.serverCategory.category);this.updateWaterMark()},n.prototype.updateWaterMark=function(){var t=this.dashboardDesigner.element.find("#"+this.id+"_browse_save"),n=this.dashboardDesigner.element.find("#"+this.id+"_browse_save_desc");t.hasClass("e-designer-txtmark")&&n.removeClass("e-designer-txtmark");n.removeClass("e-designer-txtmark")},n.prototype.updateCategorySelection=function(n){var r,t,u,i;ej.isNullOrUndefined(n)||n===""||(r=this.fileContainer.find(".e-dbrd-select-category-drpdwn"),t=r.data("ejDropDownList"),ej.isNullOrUndefined(t)||(u=t.model.dataSource,i=$.map(u,function(t,i){return t.itemName===n?i:null}),ej.isNullOrUndefined(i)||t.option("selectedItemIndex",i)))},n.prototype.resetBrowseDialog=function(n){this.category=[];n||(this.targetInstance=null,this.targetMethod=null,this.targetType=null,this.callBackfn=null);this.backNodeReference=[];this.forwardNodeReference=[];this.iconDisable($("#"+this.id+"_browse_forward_icon"),!0);this.iconDisable($("#"+this.id+"_browse_back_icon"),!0);var t=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description,i=this.dashboardDesigner.element.find("#"+this.id+"_browse_save").data("ejAutocomplete");i.option("value",ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name);this.dashboardDesigner.element.find("#"+this.id+"_browse_save_desc").val(t);this.showReportFile(!0);$("#"+this.id+"_browse_btn_import").text()===this.dashboardDesigner.locale.menuBar.openMenu&&$("#"+this.id+"_browse_btn_import").text(this.dashboardDesigner.locale.menuBar.saveMenu);this.fileContainer.find(".e-browse-err").css("display","none");this.footerTag.find(".e-designer-categoryErrWrap").css("display","none")},n.prototype.hideWaitingPopup=function(){$("#"+this.id+"_browse_file_area").data("ejWaitingPopup")&&$("#"+this.id+"_browse_file_area").data("ejWaitingPopup").hide()},n.prototype.closeDialog=function(){var n=this.browseDialog.data("ejDialog");ej.isNullOrUndefined(n)||n.close()},n.prototype.loadCategory=function(n){this.browseDialog.data("ejDialog").isOpen()||this.browseDialog.data("ejDialog").open();this.getCategoryInfo(n)},n.prototype.getCategoryInfo=function(n){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/getcategories/",{action:ej.DashboardUtil.DesignerAction.categoryCatalog,data:""},{fnction:$.proxy(this.populateCategory,this,n),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)],errfnction:$.proxy(this.categoryLoadingErr,this)},!1,!0)},n.prototype.populateCategory=function(n,t){this.footerTag.find(".e-designer-categoryErrWrap").hide();t&&t.Status&&(!ej.isNullOrUndefined(t.Data)&&t.ApiStatus?(this.category=JSON.parse(t.Data),this.categoryDataUpdate(this.category),n=ej.isNullOrUndefined(n)?!ej.isNullOrUndefined(this.category)&&this.category.length>0?this.category[0].Name.toString():n:n,this.updateCategorySelection(n),this.ejBrowseScroller!==null&&this.ejBrowseScroller.refresh()):t.StatusCode==="2042"?(this.fileContainer.find(".e-dbrd-notvalidcategory").text(this.dashboardDesigner.locale.browseDialogMessages.createCategory),this.validateCategory()):this.populateCategoryErr(t.Message))},n.prototype.enableSave=function(n){n?($("#"+this.id+"_browse_save").css("display","block"),$("#"+this.id+"_browse_save_desc").css("display","block"),$("#"+this.id+"_browse_btn_import").text("Save")):($("#"+this.id+"_browse_save").css("display","none"),$("#"+this.id+"_browse_save_desc").css("display","none"),$("#"+this.id+"_browse_btn_import").text("Open"))},n.prototype.showLoadingIndicator=function(){this.browseDialog.data("ejDialog").isOpen()&&(ej.DashboardUtil.buttonEnable($("#"+this.id+"_browse_btn_cancel"),!1),ej.DashboardUtil.buttonEnable($("#"+this.id+"_browse_btn_import"),!1),this.browseType===BrowseType.Save&&($("#"+this.id+"_browse_save").attr("disabled","true").css("opacity","0.3"),$("#"+this.id+"_browse_save_desc").attr("disabled","true").css("opacity","0.3")),this.ejBrowseWaitingPopup.show())},n.prototype.hideLoadingIndicator=function(){this.ejBrowseWaitingPopup.hide();ej.DashboardUtil.buttonEnable($("#"+this.id+"_browse_btn_cancel"),!0);ej.DashboardUtil.buttonEnable($("#"+this.id+"_browse_btn_import"),!0);this.browseType===BrowseType.Save&&($("#"+this.id+"_browse_save").removeAttr("disabled").css("opacity","1"),$("#"+this.id+"_browse_save_desc").removeAttr("disabled").css("opacity","1"))},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects(this.browseDialog);this.browseDialog.length>0&&$("#"+this.id+"_browse_dialog").remove();this.unwireEvents()},n.prototype.renderSaveDashboardDialog=function(){var i,n,r,u;this.browseDialog=ej.buildTag("div.e-userselect e-browse-dlg","",{},{id:this.id+"_browse_dialog"});i=ej.buildTag("div","",{});n=ej.buildTag("div","",{display:"table-row"},{id:this.id+"_browse_file_area"});this.outerContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control e-outercontainer","",{},{id:this.id+"_browse_outer_div"});var f=ej.buildTag("div.e-designer-emptyfile","",{},{id:this.id+"_browse_fileEmpty_msg"}),s=ej.buildTag("div.e-designer-empty-folder",this.dashboardDesigner.locale.browseDialogMessages.categoryEmptyMsg,{}),e=ej.buildTag("div.e-file-area","",{});this.fileContainer=ej.buildTag("div.e-browse-dlg-filecontainer","",{},{id:this.id+"_browse_file_container"});e.append(this.fileContainer);f.append(s);this.outerContainer.append(e).append(f);var t=ej.buildTag("div.e-browse-dialog-content-table","",{},{}),h=this.getCategoryRow(),c=this.getNameRow(),l=this.getDescRow();t.append(h,c,l);t.append(this.getPrivacySettings());t.append(this.getPublicInfo());this.fileContainer.append(t);var o=ej.buildTag("div.e-designer-fontfamily e-designer-categoryErrWrap","",{}),a=ej.buildTag("div.e-designer-fontfamily e-designer-categoryErrMsg","",{}),v=ej.buildTag("a.e-designer-fontfamily e-designer-categoryRetryLink",this.dashboardDesigner.locale.browseDialogMessages.retryText,{});o.append(a,v);r=ej.buildTag("button.e-dbrd-hand-cursor e-browse-dlg-cancel-btn",this.dashboardDesigner.locale.browseDialogMessages.cancelBtnText,{},{id:this.id+"_browse_btn_cancel",tabindex:4});u=ej.buildTag("button.e-dbrd-hand-cursor e-browse-dlg-save-btn",this.dashboardDesigner.locale.browseDialogMessages.openBtnText,{},{id:this.id+"_browse_btn_import",tabindex:3});n.append(this.outerContainer);i.append(n);this.browseDialog.append(i);this.browseDialog.ejDialog({minWidth:700,minHeight:250,height:"auto",width:"auto",enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,containment:"#"+this.dashboardDesigner._id,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",beforeClose:$.proxy(this.hideWaitingPopup,this),close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.footerTag=this.dashboardDesigner.element.find("#"+this.id+"_browse_dialog_foot");this.footerTag.append(o,r,u);r.ejButton({cssClass:"e-designer-cancelbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeDialog,this)});u.ejButton({cssClass:"e-designer-okbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.saveDashboard,this)});n.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});this.ejBrowseWaitingPopup=n.data("ejWaitingPopup");this.fileContainer.find(".e-dbrd-browse-savenametxt").ejAutocomplete({dataSource:[],enableAutoFill:!0,showLoadingIcon:!0,showEmptyResultText:!1,width:548,height:30,focusIn:$.proxy(this.listOutDSNames,this),containment:this.dashboardDesigner._id,cssClass:"e-designer e-dbrd-control e-browse-dialog"});$("#"+this.id+"_browse_save_suggestion").addClass("e-dbrd-control");this.fileContainer.find(".e-dbrd-browse-savenametxt").parent().append('<div class="e-category-dashboards-loadicon"><\/div>');this.SetPublicSettings()},n.prototype.listOutDSNames=function(){this.fileContainer.find(".e-browse-dialog-nametext").removeClass("e-designer-error");this.footerTag.find(".e-designer-categoryErrWrap").css("display","none");var n=this.fileContainer.find(".e-dbrd-browse-savenametxt").data("ejAutocomplete");!ej.isNullOrUndefined(n)&&this.fileContainer.find(".e-dbrd-browse-savenametxt").is(":focus")&&n.open()},n.prototype.getCategoryRow=function(){var i=ej.buildTag("div.e-browse-content-row","",{},{}),r=ej.buildTag("div.e-browse-labelwrap e-browse-label-font","",{},{}),n=ej.buildTag("div.e-browse-contentwrap e-browse-contentwrap-div","",{},{}),h=ej.buildTag("div.e-browse-label",this.dashboardDesigner.locale.browseDialogMessages.categoryLabelText,{},{id:this.id+"_browseCategroyLabel"}),e;r.append(h);var t=ej.buildTag("div.e-browse-category-wrap","",{},{id:this.id+"_browseCategroyWrap"}),u=ej.buildTag("div.e-dbrd-select-category","",{},{id:this.id+"_browse_categoory_drpdwn_div"}),f=ej.buildTag("input.e-dbrd-select-category-drpdwn e-dbrd-control","",{},{id:this.id+"_browse_categoory_drpdwn"});u.append(f);t.append(u);e=ej.buildTag("div.e-dbrd-notvalidcategory e-browse-err",this.dashboardDesigner.locale.browseDialogMessages.selectCategory,{},{id:this.id+"_browse_name_errmsg"});t.append(e);n.append(t);var o=ej.buildTag("div.e-browse-category-addwrap","",{},{id:this.id+"_browseCategoryAddwrap"}),s=ej.buildTag("div.e-browse-category-add","",{},{id:this.id+"_browseCategoryAdd",title:"Create category"}),c=ej.buildTag("div.e-browse-category-plusicon","",{},{id:this.id+"_browseCategoryPlus"});return s.append(c),o.append(s),n.append(o),i.append(r,n),f.ejDropDownList({dataSource:[],fields:{id:"itemId",text:"itemName"},watermarkText:"Select Category",width:500,popupWidth:500,height:30,change:$.proxy(this.selectCategory,this),cssClass:"e-dbrd-control"}),i},n.prototype.getNameRow=function(){var n=ej.buildTag("div.e-browse-content-row","",{},{}),t=ej.buildTag("div.e-browse-labelwrap e-browse-label-font","",{},{}),r=ej.buildTag("div.e-designer-fontfamily e-browse-dialog-label",this.dashboardDesigner.locale.browseDialogMessages.nameLabelText,{});t.append(r);var i=ej.buildTag("div.e-browse-contentwrap e-browse-contentwrap-div","",{},{}),u=ej.buildTag("input.e-textbox e-designer-txt e-dbrd-browse-savenametxt e-browse-dialog-nametext","",{},{id:this.id+"_browse_save",type:"text"}),f=ej.buildTag("div.e-dbrd-notvalidname e-browse-err",this.dashboardDesigner.locale.browseDialogMessages.dashboardNameEmptyErr,{},{id:this.id+"_browse_name_errmsg"});return i.append(u,f),n.append(t,i),n},n.prototype.getDescRow=function(){var t=ej.buildTag("div.e-browse-content-row","",{},{}),i=ej.buildTag("div.e-browse-labelwrap e-browse-label-font","",{},{}),u=ej.buildTag("div.e-designer-fontfamily e-browse-dialog-label",this.dashboardDesigner.locale.browseDialogMessages.descriptionLabelText,{}),n,r;return i.append(u),n=ej.buildTag("div.e-browse-contentwrap e-contentwrap-description","",{},{}),r=ej.buildTag("textarea.e-textarea e-designer-txt e-browse-dialog-text e-browse-dialog-textarea e-browse-dialog-desc","",{},{id:this.id+"_browse_save_desc",type:"textarea",spellcheck:"false"}),n.append(r),t.append(i,n),t},n.prototype.getPrivacySettings=function(){var i=ej.buildTag("div.e-browse-content-row","",{},{id:this.id+"_privacy_settings_div"}),r=ej.buildTag("div.e-browse-labelwrap e-browse-label-font","",{},{}),o=ej.buildTag("div.e-designer-fontfamily e-browse-dialog-label e-privacy-label",this.dashboardDesigner.locale.browseDialogMessages.privacySettings,{}),t=ej.buildTag("div.e-dbrd-control-header  ","",{},{}),s=ej.buildTag("span.e-dbrd-control-description","",{},{});t.ejButton({cssClass:"e-privacy-info-icon",height:"20px",width:"26px",click:$.proxy(this.getPrivacyInfo,this)});t.append(s);r.append(o,t);var n=ej.buildTag("div.e-browse-contentwrap e-privacy-settings-div","",{},{}),u=!1,f=!1,e=!1;return this.dashboardDesigner.model.serverSettings.isPublic&&this.dashboardDesigner.model.serverSettings.enableMarkAsPublic?u=!0:this.dashboardDesigner.model.serverSettings.isUnlisted?f=!0:e=!0,this.renderRadioItem("Private","privacy-settings-container",this.id+"_is_private_chk",e,n),this.renderRadioItem("Public","privacy-settings-container",this.id+"_is_public_chk",u,n),this.renderRadioItem("Unlisted","privacy-settings-container",this.id+"_is_unlisted_chk",f,n),i.append(r,n),i},n.prototype.getPrivacyInfo=function(){var i=ej.buildTag("div.e-privacy-settings-container","",{},{id:this.id+"_privacy_settings_container_wrapper"}),t,n;this.privacyContainer==null&&(this.privacyContainer=i.ejDialog({minWidth:440,minHeight:310,height:"310",width:"440",enableResize:!1,showOnInit:!1,enableModal:!1,showFooter:!1,cssClass:"e-privacy-settings-dialog e-designer-fontfamily",close:$.proxy(ej.DashboardUtil.closeDialog,this)}),t=ej.buildTag("div","",{},{id:this.id+"_privacy_settings_container","class":"e-privacy-settings-container-div"}),n=this.dashboardDesigner.locale.privacySettings,t.append(this.getPrivacyInfoRow("_private_row",n.privateText,n.privateMsgText,"e-dashboarddesigner-private-icon")),t.append(this.getPrivacyInfoRow("_public_row",n.publicText,n.publicMsgText,"e-dashboarddesigner-public-icon")),t.append(this.getPrivacyInfoRow("_unlisted_row",n.unlistedText,n.unlistedMsgText,"e-dashboarddesigner-unlisted-icon")),i.append(t));this.privacyContainer.data("ejDialog").isOpen()?this.privacyContainer.data("ejDialog").close():this.privacyContainer.data("ejDialog").open()},n.prototype.getPrivacyInfoRow=function(n,t,i,r){var u=ej.buildTag("div","",{},{id:this.id+n}),f=ej.buildTag("div.e-privacy-settings-icon-wrap","",{},{}),o=ej.buildTag("span","",{},{"class":r});f.append(o);var e=ej.buildTag("div.privacy-content-wrap","",{},{}),s=ej.buildTag("div.label-text",t,{}),h=ej.buildTag("div.text",i,{});return e.append(s,h),u.append(f,e),u},n.prototype.getPublicInfo=function(){var n=ej.buildTag("div.get-public-info","",{},{id:this.id+"_public_settings_div"}),i=ej.buildTag("div.e-browse-labelwrap e-browse-label-font","",{},{}),t=ej.buildTag("div.e-browse-contentwrap .e-browse-public-info","",{},{id:this.id+"_is_public_info","class":"e-mark-public-info"}),r=ej.buildTag("span","",{},{id:this.id+"_is_public_info_span","class":"e-mark-public-info-span"});return t.append(r),n.append(i,t),n},n.prototype.renderRadioItem=function(n,t,i,r,u){var o=$("<tr class='render-radio-button'/>"),f=$("<td unselectable='on'/>"),e,s;o.append(f);u.append(o);e=ej.buildTag("input","",{},{type:"radio",name:t,id:i});f.append(e);s=ej.buildTag("label.e-browse-dialog-label e-designer-fontfamily",n,{"margin-left":"6px"},{"for":i,id:i+"_label"});f.append(s);e.ejRadioButton({checked:r})},n.prototype.SetPublicSettings=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_is_public_chk");!ej.isNullOrUndefined(this.dashboardDesigner.model.serverSettings)&&this.dashboardDesigner.model.serverSettings.enableMarkAsPublic?(n.data("ejRadioButton").enable(),this.dashboardDesigner.element.find("#"+this.id+"_is_public_chk_label").css("opacity","1"),this.dashboardDesigner.element.find("#"+this.id+"_is_public_info").css("display","none")):(this.dashboardDesigner.element.find("#"+this.id+"_is_public_chk_label").css("opacity","0.3"),n.data("ejRadioButton").disable(),this.dashboardDesigner.element.find("#"+this.id+"_is_public_info_span").html(ej.isNullOrUndefined(this.dashboardDesigner.model.serverSettings)?"":this.dashboardDesigner.model.serverSettings.warningMessage),this.dashboardDesigner.element.find("#"+this.id+"_is_public_info").css("display","block"))},n.prototype.validateDashboardName=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_browse_save").val(),t=n.trim()===""?this.dashboardDesigner.locale.browseDialogMessages.dashboardNameEmptyErr:this.dashboardDesigner.locale.browseDialogMessages.dashboardNameErrorMsg;this.fileContainer.find(".e-dbrd-notvalidname").html(t);this.dashboardDesigner.nameValidation(n)&&n.trim()!==""?this.hideDSNameErr():this.showDSNameErr();this.validInputs()},n.prototype.showDSNameErr=function(){this.fileContainer.find(".e-dbrd-notvalidname").show();this.fileContainer.find(".e-browse-dialog-nametext").addClass("e-designer-error")},n.prototype.hideDSNameErr=function(){this.fileContainer.find(".e-dbrd-notvalidname").hide();this.fileContainer.find(".e-browse-dialog-nametext").removeClass("e-designer-error")},n.prototype.validateCategory=function(){var n=this.fileContainer.find("#"+this.id+"_browse_categoory_drpdwn").data("ejDropDownList");ej.isNullOrUndefined(n)||(!ej.isNullOrUndefined(n.model.selectedItemIndex)&&n.model.selectedItemIndex>=0?this.fileContainer.find(".e-dbrd-notvalidcategory").hide():this.fileContainer.find(".e-dbrd-notvalidcategory").show());this.validInputs()},n.prototype.validInputs=function(){var t=this.dashboardDesigner.element.find("#"+this.id+"_browse_save").val(),i=this.dashboardDesigner.nameValidation(t)&&t.trim()!=="",n=this.fileContainer.find("#"+this.id+"_browse_categoory_drpdwn").data("ejDropDownList"),r=!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(n.model.selectedItemIndex)&&n.model.selectedItemIndex>=0;return ej.DashboardUtil.buttonEnable(this.dashboardDesigner.element.find("#"+this.id+"_browse_btn_import"),i&&r),i&&r},n.prototype.categoryDataUpdate=function(n){var i,t,u,r;if(!ej.isNullOrUndefined(n)){for(i=[],t=0;t<n.length;t++)i.push({itemId:n[t].Id,itemName:n[t].Name,value:n[t]});this.fileContainer.find(".e-dbrd-notvalidcategory").text(this.dashboardDesigner.locale.browseDialogMessages.selectCategory);this.fileContainer.find(".e-dbrd-notvalidcategory").hide();u=this.fileContainer.find(".e-dbrd-select-category-drpdwn");r=u.data("ejDropDownList");ej.isNullOrUndefined(r)||r.option("dataSource",i)}},n.prototype.selectCategory=function(){var n=this.fileContainer.find("#"+this.id+"_browse_categoory_drpdwn").data("ejDropDownList"),t;!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(n.model.selectedItemIndex)&&n.model.selectedItemIndex>-1&&(t=n.model.dataSource[n.model.selectedItemIndex].value,this.getDashboardsInSelectedCategory(t));this.validInputs()},n.prototype.getDashboardsInSelectedCategory=function(n){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/getcategories/",{action:ej.DashboardUtil.DesignerAction.categoryCatalog,data:JSON.stringify(n.Name)},{fnction:$.proxy(this.updateDashboardsInfo,this,n),indicator:[$.proxy(this.showAutoCompleteLoader,this),$.proxy(this.hideAutoCompleteLoader,this)]})},n.prototype.updateDashboardsInfo=function(n,t){var i;this.footerTag.find(".e-designer-categoryErrWrap").hide();var r=n.Files=t&&t.Status?JSON.parse(t.Data)||[]:JSON.parse(t),u=[],f=this.fileContainer.find(".e-dbrd-browse-savenametxt").data("ejAutocomplete");if(!ej.isNullOrUndefined(f)){for(i=0;i<r.length;i++)u.push(r[i].Name);f.option("dataSource",u)}},n.prototype.showAutoCompleteLoader=function(){this.hideDSNameErr();this.fileContainer.find(".e-dbrd-browse-savenametxt").css("width","calc(100% - 25px");this.fileContainer.find(".e-category-dashboards-loadicon").css("display","block")},n.prototype.hideAutoCompleteLoader=function(){this.fileContainer.find(".e-dbrd-browse-savenametxt").css("width","100%");this.fileContainer.find(".e-category-dashboards-loadicon").css("display","none")},n.prototype.saveDashboardInfo=function(){this.saveCategoryInfo();this.dashboardDesigner.element.find("#"+this.id+"_browse_save").val()!==""&&(this.dashboardDesigner.reportFileName=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name=this.dashboardDesigner.model.dashboardName=this.dashboardDesigner.element.find("#"+this.id+"_browse_save").val());this.dashboardDesigner.element.find("#"+this.id+"_browse_save_desc").val()!==""&&(this.dashboardDesigner.dashboardDescription=this.dashboardDesigner.dashboardDescription=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description=this.dashboardDesigner.model.dashboardDescription=this.dashboardDesigner.element.find("#"+this.id+"_browse_save_desc").val())},n.prototype.saveCategoryInfo=function(){var n=this.fileContainer.find("#"+this.id+"_browse_categoory_drpdwn").data("ejDropDownList");!ej.isNullOrUndefined(n)&&this.validInputs()&&(this.selectedFile=n.model.dataSource[n.model.selectedItemIndex].value)},n.prototype.populateCategoryErr=function(n){this.browseDialog.data("ejDialog").isOpen()&&(this.footerTag.find(".e-designer-categoryErrMsg").text(n).attr("title",n),this.footerTag.find(".e-designer-categoryErrWrap").css("display","block"),ej.DashboardUtil.buttonEnable(this.dashboardDesigner.element.find("#"+this.id+"_browse_btn_import"),!1))},n.prototype.addCategory=function(){var n=new ej.DashboardDesignerUtility.CreateCategoryDialog(null);n.showDialog(!0)},n.prototype.saveDashboard=function(){var n,o,i,e,t,r;if((this.validateCategory(),this.validInputs())&&(this.saveCategoryInfo(),this.dashboardDesigner.element.find("#"+this.id+"_browse_save").val()!==""&&(ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name=this.dashboardDesigner.element.find("#"+this.id+"_browse_save").val()),this.dashboardDesigner.element.find("#"+this.id+"_browse_save_desc").val()!==""&&(ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description=this.dashboardDesigner.element.find("#"+this.id+"_browse_save_desc").val()),ej.DashboardDesignerUtility.Serialization.notifyChange(),!ej.isNullOrUndefined(this.selectedFile)&&!ej.isNullOrUndefined(this.selectedFile.Name)&&this.browseType===BrowseType.Save&&(n=this.dashboardDesigner.element.find("#"+this.id+"_browse_save").val(),o=this.dashboardDesigner.element.find("#"+this.id+"_browse_save_desc").val(),n=n===this.nameWaterMark?"":n,n&&n.length>0)))if(this.selectedFile.Type===1){for(i=this.selectedFile.Files,e=!1,t=0;t<i.length;t++)if(i[t].Type===2&&i[t].Name===n){e=!0;r="A dashboard with the same name already exists in the category"+this.dashboardDesigner.locale.browseDialogMessages.doYouWantToReplace;ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.DashboardSaved,r,IconType.question,AlertType.Confirm,!1,"",{method:"updateSaveFile",instance:this,dataInfo:{selectedFile:this.selectedFile,fileName:n,id:i[t].Id,eventType:DashboardDesignerEvent.SaveAs}});break}if(!e)if(this.targetInstance!==null){var u=this.dashboardDesigner.element.find("#"+this.id+"_is_public_chk").data("ejRadioButton"),s=this.dashboardDesigner.element.find("#"+this.id+"_is_private_chk").data("ejRadioButton"),f=this.dashboardDesigner.element.find("#"+this.id+"_is_unlisted_chk").data("ejRadioButton");(u||s||f)&&(ej.isNullOrUndefined(this.dashboardDesigner.model.serverSettings)&&(this.dashboardDesigner.model.serverSettings={}),u!=null&&u.model.checked?(this.dashboardDesigner.model.serverSettings.isPublic=u.model.checked,this.dashboardDesigner.model.serverSettings.isUnlisted=!1):f!=null&&f.model.checked?(this.dashboardDesigner.model.serverSettings.isUnlisted=f.model.checked,this.dashboardDesigner.model.serverSettings.isPublic=!1):(this.dashboardDesigner.model.serverSettings.isPublic=!1,this.dashboardDesigner.model.serverSettings.isUnlisted=!1));ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.selectedFile,n,o,!1,null,DashboardDesignerEvent.SaveAs])}else this.closeDialog(),ej.DashboardUtil.invokeCallBack(this.callBackfn,{category:this.selectedFile.Name,name:n,categoryId:this.selectedFile.Id,isExist:!1,type:BrowseType.Save})}else this.selectedFile.Type===2&&this.selectedFile.Name===n&&(r="'"+this.selectedFile.Name+this.dashboardDesigner.locale.browseDialogMessages.fileExistInCategory+" '"+this.filePath.val().replace("/","")+"'"+this.dashboardDesigner.locale.browseDialogMessages.doYouWantToReplace,ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.saveAsDashboard,r,IconType.warning,AlertType.Confirm,!1,"",{method:"updateSaveFile",instance:this,dataInfo:{selectedFile:this.selectedFile,fileName:n,id:this.selectedFile.Id,eventType:DashboardDesignerEvent.SaveAs}}))},n.prototype.retry=function(){var t=null,n=this.fileContainer.find("#"+this.id+"_browse_categoory_drpdwn").data("ejDropDownList");!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(n.model.selectedItemIndex)&&n.model.selectedItemIndex>-1&&(t=JSON.parse(n.getSelectedValue()).Name);this.getCategoryInfo(t)},n.prototype.categoryLoadingErr=function(){this.populateCategoryErr(this.dashboardDesigner.locale.browseDialogMessages.loadCategoryErr)},n.prototype.dashboardSaveErr=function(n){var t=this.browseDialog.data("ejDialog");!ej.isNullOrUndefined(t)&&t.isOpen()&&(this.dashboardDesigner.element.find(".e-browseDialog-footer .e-browse-err").text(this.dashboardDesigner.locale.errorMessage.errorOnSaveDashboard).attr("title",n.Message),this.dashboardDesigner.element.find(".e-browseDialog-footer .e-designer-categoryErrWrap").css("display","block"))},n.prototype.descriptionKeyEvent=function(n){n.keyCode===13&&n.stopPropagation()},n.prototype.wireEvents=function(){this.fileContainer.on("click",".e-browse-category-plusicon",$.proxy(this.addCategory,this));this.fileContainer.on("focusout",".e-dbrd-browse-savenametxt",$.proxy(this.validateDashboardName,this));this.footerTag.on("click",".e-designer-categoryErrWrap .e-designer-categoryRetryLink",$.proxy(this.retry,this));this.fileContainer.on("keypress",".e-browse-contentwrap.e-contentwrap-description",$.proxy(this.descriptionKeyEvent,this))},n.prototype.unwireEvents=function(){this.fileContainer.off("click",".e-browse-category-plusicon",$.proxy(this.addCategory,this));this.fileContainer.off("focusout",".e-dbrd-browse-savenametxt",$.proxy(this.validateDashboardName,this));this.footerTag.off("click",".e-designer-categoryErrWrap .e-designer-categoryRetryLink",$.proxy(this.retry,this));this.fileContainer.off("keypress",".e-browse-contentwrap.e-contentwrap-description",$.proxy(this.descriptionKeyEvent,this))},n}(),BrowseType,DashboardDesignerEvent,InternalDatasourceSaveDialog,InternalConditionalFormat,InternalContainerPropertyItem,InternalCredentialDialog,InternalCustomLegendSettings,InternalDataConfiguration,MeasureCondition,CategoryType,Visibility,AjaxRequest,ConfigurationPanel,InternalDataSet,PanelList,InternalDataSource,ExtractionModeDetails,ExtractionMode,DataSourceCategory,InternalDateRangePopup,DateFormatOption,InternalDesignPanel,InternalDimensionFilter,InternalDragDropHelper,InternalDriveFilePickerDialog,InternalEditorManager,InternalRangeExtractor,ExecCommand,InternalExpressionParsor,InternalFileDatasource,InternalFilterConfiguration,InternalFormatDialog,InternalDesignerHub,InternalImageManager,InternalItemPanel,ej,DashboardMode,GridUrlType,LinkEnableMode,ejDashboardDesigner,CopyType,ControlType,InternalKPIWindow,InternalBubbleMapReportItem,InternalCardReportItem,InternalChartProperties,InternalChartReportItem,InternalChoroplethMapReportItem,InternalLabelReportItem,FontWeight,FontStyle,TextDecoration,TextHorizontalAlignment,InternalListBoxReportItem,InternalRadialGaugeReportItem,InternalColorPalette,InternalComboBoxReportItem,InternalHeatMapReportItem,InternalMasterSlaveFilterSerializationHelper,InternalMeasureFilter,InternalMultiSelectionComboBox,InternalMySQLDataSource,InternalODATADataSource,InternalODBCDataSource,InternalOLEDBDataSource,InternalORACLEDataSource,InternalParameter,InternalPivotGridReportItem,InternalPropertyPanel,InternalPropertyGridItem,InternalPSQLDataSource,InternalQueryExpression,ExpAction,InternalEditConnection,InternalQueryFilter,QueryOperator,QueryDatatype,MeasureFilterCondition,DimensionFilterCondition,DateAndTimeFormat,InternalQueryJoiner,InternalQueryParameter,InternalRangeSliderReportItem,InternalRDLParser,InternalRefreshDialog,InternalReportAction,InternalSASSDataSource,ContainerSettings,ColorSets,CustomColorType,FieldContainerType,FieldType,ColorColumnType,DateTimeFormat,DateTimeFormatForFilter,TextAlignment,DataValueFormat,NegativeValueFormats,NumberFormat,RankType,FilterRange,NumberFilterOption,SortingOrder,TextFilterOption,OperatorType,FilterColumnAction,PreviewFeatureName,ActivityLogEvents,ActivityLogItemType,ActivityLogItemSubTypes,KpiInformation,KpiColumnInfo,IndicationType,DisplayType,KpiCalculationType,InitialDimensionFilterCondition,InitialMeasureFilterCondition,InitialDateFilterCondition,InitialDateFilterType,LinkVisibility,DateInstance,RelativeDateFormat,ImageType,CMeasureConditionType,CDimensionConditionType,Format,ColorFieldsInfo,ColorSetColorPickers,InternalSerializationHelper,InternalSharedDataSet,InternalSharedDataSource,InternalSortDialog,CustomSortType,CustomSortOrder,InternalDatePickerReportItems,InternalSQLDataSource,InternalSqlCeDataSource,InternalSqlEditor,SqlEditorUndoManager,InternalStoreParameter,InternalGridReportItem,InternalGridTemplate,InternalToolbar,InternalTreeMapReportItem,InternalTrendLineWindow,InternalUndoManager,CommandAction,InternalReportUtil,AlertType,IconType,ValueAliasPair,InternalImageReportItem,InternalWebDatasource,LegendAlignment,LabelIntersectAction,UrlLink,ColumnUrl,LinkType,UrlLinkType,DimensionConditionType,ConditionalFormatType,MeasureFormatType,ColorType,RangeSliderProperties,RangeSliderType,RangeSliderOrientation,ListBoxProperties,GaugeSettings,GaugeTypes,GaugeRangeSettings,GaugeDirection,ValuePointers,TargetPointers,TicksPosition,ValueLabelPosition,ScaleLabelPosition,RangeWidth,LabelType,PrimaryValueType,SparkLineSettings,SparkLineType,LegendPositions,ChartTypes,LabelOverFlowMode,DataLabel,CustomLegendType,ImageProperties,ImageMode,DataSource,ImgSource,LinkProperties,LinkSetting,WidgetType,InternalXMLDataSource,InternalEditColumnNames,__extends,CommandMode,ejQueryDesigner,Join,Operator,DataTypes,OAuthProvider,InternalOAuthLoginHelper,InternalTableSelector,InternalCreateCategoryDialog,InternalRangeFilterDialog,InternalRelativeDateFilter,InternalRelativeDates,InternalSalesForceDataSource,InternalLinkedAccounts,InternalWebDsTemplate,InternalDataSourceTypes,WebDataFormat,WebAuthenticationType,HTTPMethod,InternalColorCustomization,InternalColorCustomizationAdvanceSettings,InternalColorCustomizationCustomDialog,InternalColorPicker,InternalColorCustomizationInclusionSelection,InternalColorCustomizationBasicSettings;window.ej.createObject("ej.DashboardDesignerUtility.BrowseDialog",InternalBrowseDialog,window),function(n){n[n.Open="Open"]="Open";n[n.Save="Save"]="Save"}(BrowseType||(BrowseType={})),function(n){n[n.Open="Open"]="Open";n[n.Save="Save"]="Save";n[n.SaveAs="SaveAs"]="SaveAs";n[n.SaveConnection="SaveConnection"]="SaveConnection";n[n.SaveDataSource="SaveDataSource"]="SaveDataSource";n[n.CancelDataSource="CancelDataSource"]="CancelDataSource";n[n.ContinueToDashboard="ContinueToDashboard"]="ContinueToDashboard";n[n.RenderComplete="RenderComplete"]="RenderComplete";n[n.ConnectionModeDialogClose="ConnectionModeDialogClose"]="ConnectionModeDialogClose"}(DashboardDesignerEvent||(DashboardDesignerEvent={}));InternalDatasourceSaveDialog=function(){function n(n,t,i){this.dsInfo=n;this.designerInstance=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.designerInstance._id+"_save_datasource_dlg";this.callBackFn=i;this.dataSet=t;this.renderDialog()}return n.prototype.renderDialog=function(){var u;$("#"+this.id+"_dialog").length!==0&&this.dispose();var t=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{height:"auto"},{title:this.designerInstance.locale.saveDatasourceDialog.title,id:this.id+"_dialog"}),n=ej.buildTag("div","",{height:"100%",width:"100%"},{id:this.id+"_dialog_content"}),f="<table style='width:100%;height:100%;border-collapse:collapse;' cellspacing='0' cellpadding='0'><tr><td style='width:15%'><label class='e-designer-label' style='vertical-align:top;'>"+this.designerInstance.locale.saveDatasourceDialog.nameLabelText+" * <\/label><\/td><td style='width:75%'><input type=\"text\" style='width:95%;'  id='"+this.id+"_data_source_name' class='e-textbox'/><label style='display:none;' class='e-designer-tile-content e-reportdesigner-errorLog'>"+this.designerInstance.locale.saveDatasourceDialog.emptyDatasourceNameLabelText+"<\/label>    <\/td> <\/tr>       <tr style='height:50px'>      <td style='width:15%'><label class='e-designer-label' style='vertical-align:top;' >"+this.designerInstance.locale.saveDatasourceDialog.descriptionLabelText+"<\/label><\/td>    <td>       <textarea style='width:95%;resize:none;height:80px;' id='"+this.id+"_data_source_description' class='e-textarea e-ejinputtext e-designer-content-label e-designer-constr-textarea'><\/textarea><label class='e-designer-tile-content'>"+this.designerInstance.locale.saveDatasourceDialog.descriptionMaxLengthText+"<\/label>        <\/td>     <\/tr><\/table>",i=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_save_btn"}),r=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_cancel_btn"});n.html(f);t.append(n);this.designerInstance.element.append(t);this.dialog=t.ejDialog({enableModal:!0,width:600,maxWidth:600,maxHeight:300,enableResize:!1,showOnInit:!1,cssClass:"e-designer-dialog",height:300,showFooter:!0,close:$.proxy(this.dialogClosing,this)}).data("ejDialog");u=$("#"+this.id+"_dialog_foot");u.append(r,i);i.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.saveDatasourceDialog.saveButtonText,click:$.proxy(this.saveButtonClick,this)});r.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.saveDatasourceDialog.cancelButtonText,click:$.proxy(this.cancelButtonClick,this)});this.dsNameEle=n.find("#"+this.id+"_data_source_name");this.dsDescEle=n.find("#"+this.id+"_data_source_description");this.waitingPopup=$("#"+this.id+"_dialog_wrapper").ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"}).data("ejWaitingPopup");this.dsNameEle.val(this.dataSet.Name)},n.prototype.saveButtonClick=function(){var n=this.dsNameEle.val(),t=this.dsDescEle.val();this.dsNameEle.siblings(".e-reportdesigner-errorLog").hide();this.dsNameEle.removeClass("e-designer-error");n===""?(this.dsNameEle.siblings(".e-reportdesigner-errorLog").show(),this.dsNameEle.addClass("e-designer-error")):this.sendSaveRequest(n,t)},n.prototype.sendSaveRequest=function(n,t,i,r){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designerInstance.model.serviceUrl+"/savedatasource",{action:"",data:JSON.stringify({name:n,description:t,datasourceName:this.dataSet.Name,datasourceId:this.dataSet.Id,datasource:this.dsInfo,mode:this.designerInstance.model.mode||ej.dashboardDesigner.mode.design})},{indicator:[i||$.proxy(this.showWaitingPopup,this),r||$.proxy(this.hideWaitingPopup,this)],fnction:$.proxy(this.onSuccess,this)},!1,!0)},n.prototype.showWaitingPopup=function(){this.waitingPopup.show()},n.prototype.hideWaitingPopup=function(){this.waitingPopup.hide()},n.prototype.cancelButtonClick=function(){var t=this,n;this.dialog.close();n=this;setTimeout($.proxy(function(){t.dispose()},n),0)},n.prototype.dialogClosing=function(n){this.waitingPopup.hide();n.model.position={X:0,Y:0}},n.prototype.dispose=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_dialog"),!0);$("#"+this.id+"_dialog").remove()},n.prototype.onSuccess=function(n){n.ApiStatus?(this.dsInfo.PublishId=this.dataSet.PublishId=n.Data.PublishId,this.dsInfo.Name=this.dataSet.Name=this.dsNameEle.val(),this.dataSet.Query.DataSourceId=this.dataSet.Id,this.callBackFn&&(ej.isNullOrUndefined(this.designerInstance.model.mode)||this.designerInstance.model.mode!==ej.dashboardDesigner.mode.connection&&this.designerInstance.model.mode!==ej.dashboardDesigner.mode.datasource?(ej.DashboardUtil.invokeCallBack(this.callBackFn,n.Data.Schema),this.cancelButtonClick()):ej.DashboardUtil.invokeCallBack(this.callBackFn,n.Data.PublishId))):ej.DashboardUtil.getInstance().alertDialog(this.designerInstance.locale.saveDatasourceDialog.title,this.getErrorMessage(n.StatusCode,n.Message),ej.isNullOrUndefined(n.StatusCode)?IconType.errors:IconType.information,AlertType.Alert,!1,"")},n.prototype.getErrorMessage=function(n,t){var i=t;switch(n){case"2005":i=this.designerInstance.locale.saveDatasourceDialog.datasourceAlreadyExistsText;break;case"2021":i=this.designerInstance.locale.saveDatasourceDialog.noCreatePermissionText;break;case"2022":i=this.designerInstance.locale.saveDatasourceDialog.noEditPermissionText;break;case"0001":i=this.designerInstance.locale.saveDatasourceDialog.noSchedulePermissionText}return i},n.prototype.showDialog=function(){this.dialog.open()},n.prototype.trySavingDataSource=function(n,t){this.sendSaveRequest(this.dataSet.Name,"",n,t)},n}();window.ej.createObject("ej.DashboardDesignerUtility.DatasourceSaveDialog",InternalDatasourceSaveDialog,window);InternalConditionalFormat=function(){function n(){this.dashboardDesigner=null;this.columnFormatDialog=null;this.conditionalFormats=null;this.selectedRow=null;this.toolbarDiv=null;this.targetInstance=null;this.targetMethod=null;this.editIconDiv=null;this.deleteIconDiv=null;this.settingsDialog=null;this.isEdit=!1;this.conditionalInfo=null;this.rightTextBoxDiv=null;this.measureConditionValues=null;this.textDiv=null;this.colorPalette=null;this.divContainer=null;this.columnDetails=null;this.columngridObj=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderColumnFormatWindow()}return Object.defineProperty(n,"ConditionalFormat",{get:function(){return(this.conditionalFormat===null||this.conditionalFormat===undefined)&&(this.conditionalFormat=new ej.DashboardDesignerUtility.ConditionalFormat),this.conditionalFormat},enumerable:!0,configurable:!0}),n.prototype.renderColumnFormatWindow=function(){var r=this.columnFormatDialog=ej.buildTag("div.e-userselect","",{position:"absolute"},{id:this.id+"_col_conditional_format"}),u=ej.buildTag("div","",{}),f=this.toolbarDiv=ej.buildTag("div","",{height:"20px",padding:"5px 0px"}),i=ej.buildTag("div.e-dashboarddesigner-grid-toolbar","",{}),l=ej.buildTag("span.e-icon e-plus e-designer-format-addIcon","",{float:"right","margin-top":"3px","margin-right":"4px"},{id:this.id+"_col_conditional_format_add"}),n,e,t,o;i.append(l);n=this.editIconDiv=ej.buildTag("div.e-dashboarddesigner-grid-toolbar","",{"margin-left":"5px"});e=ej.buildTag("span.e-icon e-widgeticon e-reportdesigner-parameter-edit","",{float:"right","font-size":"14px",margin:"3px"},{id:this.id+"_col_conditional_format_edit"});n.append(e);t=this.deleteIconDiv=ej.buildTag("div.e-dashboarddesigner-grid-toolbar","",{"margin-left":"5px"});o=ej.buildTag("span.e-icon e-widgeticon e-reportdesigner-toolbar-delete","",{float:"right","font-size":"14px","margin-top":"2px","margin-right":"3px"},{id:this.id+"_col_conditional_format_delete"});t.append(o);f.append(t,n,i);i.bind("click",$.proxy(this.addConditionalColumn,this));n.bind("click",$.proxy(this.editConditionalColumn,this));t.bind("click",$.proxy(this.deleteConditionalColumn,this));var a=ej.buildTag("div","",{width:"378px",height:"100%",border:"1px solid #cecece","box-sizing":"border-box"},{id:this.id+"_col_conditional_format_rootgrid"}),s=ej.buildTag("div.e-designer-conditionalformat-grid","",{},{id:this.id+"_col_conditional_format_grid"}),h=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_col_conditional_format_cancel"}),c=ej.buildTag("div","",{height:"28px",padding:"10px 0px"});c.append(h);u.append(f).append(a.append(s)).append(c);r.append(u);r.ejDialog({title:"Grid Conditional Formatting",width:"400px",height:"300px",enableResize:!1,showOnInit:!0,enableModal:!0,cssClass:"e-designer-dialog e-designer-format e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});h.ejButton({text:"Close",showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.closeConditionalFormat,this)});this.getGridContainer(s);this.renderConditionalSettings()},n.prototype.getGridContainer=function(n){for(var r=[],t=[{fieldName:"BasedOn",Name:"Based On"},{fieldName:"Condition",Name:"Condition"}],u=376/t.length,i=0;i<t.length;i++)r.push({field:t[i].fieldName,headerText:t[i].Name,width:u,textAlign:ej.TextAlign.Left});n.ejGrid({columns:r,height:"265px",allowSelection:!0,allowResizing:!0,allowScrolling:!0,allowPaging:!1,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0},rowSelected:$.proxy(this.gridRowSelected,this),cssClass:"e-dbrd-designer-scroller e-dbrd-control"});this.columngridObj=n.data("ejGrid")},n.prototype.getGridDataSource=function(){for(var t=[],n=0;n<this.conditionalFormats.length;n++)t.push(this.getGridElement(this.conditionalFormats[n]));return t},n.prototype.getGridElement=function(n){var t=null;return n.TargetMeasureColumn.ColumnType===FieldType[FieldType.Measures]?n.ColorStyle===ColorType[ColorType.SingleColor]?t=this.getMeasureConditionText(n.MeasureConditionType,n.Value,n.EndValue):n.ColorStyle===ColorType[ColorType.GradientColor]&&(t=n.FormatType===ConditionalFormatType[ConditionalFormatType.Indication]?ConditionalFormatType[ConditionalFormatType.Indication]:"Graded Color Scale"):t=this.getDimensionConditionText(n.DimensionConditionType,n.Text,null),n.DisplayExpression=t,{BasedOn:n.ColumnName,Condition:t,conditionalInfo:n}},n.prototype.getConditionValue=function(n){var t=null;return typeof n=="string"?t=n.length>0?n:"''":typeof n=="number"&&(t=n),t},n.prototype.getMeasureConditionText=function(n,t,i){var r="Value";return n===MeasureConditionType[MeasureConditionType.Equals]?r=r+" = "+this.getConditionValue(t):n===MeasureConditionType[MeasureConditionType.NotEquals]?r=r+" != "+this.getConditionValue(t):n===MeasureConditionType[MeasureConditionType.GreaterThan]?r=r+" > "+this.getConditionValue(t):n===MeasureConditionType[MeasureConditionType.GreaterThanOrEqual]?r=r+" >= "+this.getConditionValue(t):n===MeasureConditionType[MeasureConditionType.LessThan]?r=r+" < "+this.getConditionValue(t):n===MeasureConditionType[MeasureConditionType.LessThanOrEqual]?r=r+" <= "+this.getConditionValue(t):n===MeasureConditionType[MeasureConditionType.Between]&&(r=r+" between "+t+" and "+i),r},n.prototype.getDimensionConditionText=function(n,t){var i="Value";return n===DimensionConditionType[DimensionConditionType.Equals]?i=i+" = "+this.getConditionValue(t):n===DimensionConditionType[DimensionConditionType.NotEquals]?i=i+" != "+this.getConditionValue(t):n===DimensionConditionType[DimensionConditionType.Contains]?i=i+" contains "+this.getConditionValue(t):n===DimensionConditionType[DimensionConditionType.NotContains]?i=i+" does not contain "+this.getConditionValue(t):n===DimensionConditionType[DimensionConditionType.StartsWith]?i=i+" starts with "+this.getConditionValue(t):n===DimensionConditionType[DimensionConditionType.EndsWith]&&(i=i+" ends with "+this.getConditionValue(t)),i},n.prototype.gridRowSelected=function(n){this.selectedRow=n.data;ej.isNullOrUndefined(n.target)?this.disableToolbarItems(!0):this.disableToolbarItems(!1)},n.prototype.addConditionalColumn=function(){this.openColumnSettings(null,!1)},n.prototype.updateGridData=function(n,t){var r=this.columngridObj.model.dataSource,u,f,i;if(t)for(u=this.columngridObj.model.selectedRowIndex,f=this.getGridElement(n),i=0;i<r.length;i++)i===u&&(r[i]=f);else r.push(this.getGridElement(n));this.selectedRow=null;this.columngridObj.dataSource(r,!0);this.disableToolbarItems(ej.isNullOrUndefined(this.selectedRow));this.columngridObj.refreshContent(!0)},n.prototype.editConditionalColumn=function(){this.editIconDiv.attr("disabled")!=="disabled"&&this.openColumnSettings(this.selectedRow.conditionalInfo,!0)},n.prototype.deleteConditionalColumn=function(){if(this.deleteIconDiv.attr("disabled")!=="disabled"){var n=this.columngridObj.model.selectedRowIndex;n>-1&&(this.columngridObj.model.dataSource.splice(n,1),this.columngridObj.refreshContent(!0),this.selectedRow=null);this.editIconDiv.attr("disabled")!=="disabled"&&this.disableToolbarItems(!0)}},n.prototype.disableToolbarItems=function(n){n?(this.editIconDiv.css({opacity:"0.5"}).attr("disabled","disabled"),this.deleteIconDiv.css({opacity:"0.5"}).attr("disabled","disabled")):(this.editIconDiv.css({opacity:"1"}).removeAttr("disabled"),this.deleteIconDiv.css({opacity:"1"}).removeAttr("disabled"))},n.prototype.openConditionalFormat=function(n,t,i){this.resetConditionalFormat();this.targetInstance=n;this.targetMethod=t;this.conditionalFormats=i;this.columnFormatDialog.data("ejDialog").open();this.columngridObj.setModel({dataSource:this.getGridDataSource()});this.columngridObj.model.dataSource.length===0?this.disableToolbarItems(!0):(this.disableToolbarItems(!1),this.columngridObj.setModel({selectedRowIndex:0}));this.columngridObj.refreshContent(!0)},n.prototype.resetConditionalFormat=function(){this.conditionalFormats=[];this.columngridObj.dataSource([],!0);this.columngridObj.refreshContent(!0);this.targetInstance=null;this.targetMethod=null;this.disableToolbarItems(!0)},n.prototype.getColumnConditionalInfo=function(){for(var t=[],i=this.columngridObj.model.dataSource,n=0;n<i.length;n++)t.push(i[n].conditionalInfo);return t},n.prototype.closeConditionalFormat=function(){var n=this.getColumnConditionalInfo();ej.isNullOrUndefined(this.targetInstance)||(ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[n]),this.columnFormatDialog.data("ejDialog").close())},n.prototype.renderConditionalSettings=function(){var t=this.settingsDialog=ej.buildTag("div.e-userselect","",{},{id:this.id+"_conditional_settings"}),n=this.divContainer=ej.buildTag("div","",{id:this.id+"_conditional_settings_div"}),f=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px","padding-top":"5px"},{id:this.id+"_conditional_settings_colInfo_table"}),e=ej.buildTag("tr","",{},{}),yt=ej.buildTag("td.e-designer-fontfamily","Based On",{width:"122px","font-size":"12px"},{}),o=ej.buildTag("td","",{width:"31px"},{}),s=this.columnDetails=ej.buildTag("input","",{},{type:"text",id:this.id+"_conditional_settings_colInfo"}),i,r,at,u,vt;o.append(s);e.append(yt).append(o);f.append(e);var h=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px"},{id:this.id+"_conditional_settings_colorSetting_table"}),c=ej.buildTag("tr","",{},{}),pt=ej.buildTag("td.e-designer-fontfamily","Color Settings",{width:"122px","font-size":"12px"},{}),l=ej.buildTag("td","",{width:"31px"},{}),a=ej.buildTag("input","",{},{type:"text",id:this.id+"_conditional_settings_colorSetting"});l.append(a);c.append(pt).append(l);h.append(c);var v=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_formattingType_table"}),y=ej.buildTag("tr","",{},{}),wt=ej.buildTag("td.e-designer-fontfamily","Formatting Type",{width:"122px","font-size":"12px"},{}),p=ej.buildTag("td","",{width:"31px"},{}),w=ej.buildTag("input","",{},{type:"text",id:this.id+"_conditional_settings_formattingType"});p.append(w);y.append(wt).append(p);v.append(y);var b=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_grdntFormattingType_table"}),k=ej.buildTag("tr","",{},{}),bt=ej.buildTag("td.e-designer-fontfamily","Formatting Type",{width:"122px","font-size":"12px"},{}),d=ej.buildTag("td","",{width:"31px"},{}),g=ej.buildTag("input","",{},{type:"text",id:this.id+"_conditional_settings_grdntFormattingType"});d.append(g);k.append(bt).append(d);b.append(k);n.append(f).append(h).append(v).append(b);this.renderMeasureConditionType(n);this.renderDimensionConditionType(n);this.renderColorPalette(n);var nt=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_caseSensitive_table"}),tt=ej.buildTag("tr","",{},{}),kt=ej.buildTag("td.e-designer-fontfamily","",{width:"122px","font-size":"12px"},{}),it=ej.buildTag("td","",{}),rt=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_conditional_settings_caseSensitive"});it.append(rt);tt.append(kt).append(it);nt.append(tt);n.append(nt);this.renderMeasureConditionValue(n);this.renderTextBox(n,"Value","dimension_value");this.renderFontStyleContainer(n);var ut=ej.buildTag("table.e-designer-exp-table","",{width:"100%",display:"none"},{id:this.id+"_conditional_settings_pgcolor_table"}),ft=ej.buildTag("tr","",{},{}),dt=ej.buildTag("td.e-designer-fontfamily","Background",{width:"122px","font-size":"12px"},{}),et=ej.buildTag("td","",{},{}),ot=ej.buildTag("input.e-reportdesigner-designer","",{},{type:"text",id:this.id+"_conditional_settings_bgcolor"});et.append(ot);ft.append(dt).append(et);ut.append(ft);var st=ej.buildTag("table.e-designer-exp-table","",{width:"100%",display:"none"},{id:this.id+"_conditional_settings_foreground_table"}),ht=ej.buildTag("tr","",{},{}),gt=ej.buildTag("td.e-designer-fontfamily","Foreground",{width:"122px","font-size":"12px"},{}),ct=ej.buildTag("td","",{},{}),lt=ej.buildTag("input.e-reportdesigner-designer","",{},{type:"text",id:this.id+"_conditional_settings_foreground"});ct.append(lt);ht.append(gt).append(ct);st.append(ht);this.renderTextBox(n,"Enter Column Title","column_title");n.append(ut).append(st);i=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_conditional_settings_okbtn"});r=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_conditional_settings_cancelbtn"});t.append(n);$(document.body).append(t);t.ejDialog({minWidth:360,minHeight:350,width:"auto",height:"auto",enableResize:!1,showOnInit:!1,enableModal:!0,cssClass:"e-designer-dialog e-dashboarddesigner",showFooter:!0,title:"Grid Conditional Formatting",close:$.proxy(ej.DashboardUtil.closeDialog,this)});at=$("#"+this.id+"_conditional_settings_foot");at.append(r).append(i);u=this.dashboardDesigner.locale.dialogOptions;r.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-cancelbtn",text:u.cancelButtonText,click:$.proxy(this.closeConditionalSettings,this)});i.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-okbtn",text:u.okButtonText,click:$.proxy(this.saveConditionalSettings,this)});s.ejDropDownList({dataSource:[],fields:{text:"columnInfo.Value",value:"FieldType"},selectedIndex:0,width:"200px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changeColumnInfo,this)});vt=this.getColorList();a.ejDropDownList({dataSource:vt,fields:{text:"text",value:"value"},selectedIndex:0,width:"200px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changeColorSettings,this)});g.ejDropDownList({dataSource:this.formattingTypeList(!0),fields:{text:"text",value:"value"},selectedIndex:0,width:"200px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changeGradientFormatting,this)});w.ejDropDownList({dataSource:this.formattingTypeList(!1),fields:{text:"text",value:"value"},selectedIndex:0,width:"200px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control"});ot.ejColorPicker({value:"#2f79b5",cssClass:"e-designer-ejwidgets-colorpicker e-designer-content-label",width:"35px",height:"26px",modelType:"palette",palette:"basicpalette"});lt.ejColorPicker({cssClass:"e-designer-ejwidgets-colorpicker e-designer-content-label",width:"35px",height:"26px",modelType:"palette",palette:"basicpalette"});rt.ejCheckBox({text:"Case Sensitive",checked:!0,width:"35px",cssClass:"e-designer-case-sensitive"})},n.prototype.renderMeasureConditionType=function(n){var t=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_measure_conditionType_table"}),i=ej.buildTag("tr","",{},{}),f=ej.buildTag("td.e-designer-fontfamily","Condition Type",{width:"122px","font-size":"12px"},{}),r=ej.buildTag("td","",{width:"31px"},{}),u=ej.buildTag("input","",{},{type:"text",id:this.id+"_conditional_settings_measure_conditionType"});r.append(u);i.append(f).append(r);t.append(i);n.append(t);u.ejDropDownList({dataSource:this.measureConditionList(),fields:{text:"text",value:"value"},selectedIndex:0,width:"200px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changeMeasureCondition,this)})},n.prototype.renderDimensionConditionType=function(n){var t=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_dimension_conditionType_table"}),i=ej.buildTag("tr","",{},{}),f=ej.buildTag("td.e-designer-fontfamily","Condition Type",{width:"122px","font-size":"12px"},{}),r=ej.buildTag("td","",{width:"31px"},{}),u=ej.buildTag("input","",{},{type:"text",id:this.id+"_conditional_settings_dimension_conditionType"});r.append(u);i.append(f).append(r);t.append(i);n.append(t);u.ejDropDownList({dataSource:this.dimensionConditionList(),fields:{text:"text",value:"value"},selectedIndex:0,width:"200px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control"})},n.prototype.renderFontStyleContainer=function(n){var f=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_font_table"}),e=ej.buildTag("tr","",{},{}),v=ej.buildTag("td.e-designer-fontfamily","Font",{width:"122px","font-size":"12px"},{}),o=ej.buildTag("td","",{width:"35px","padding-right":"4px"},{}),s=ej.buildTag("input.e-reportdesigner-designer","",{},{type:"text",id:this.id+"_conditional_settings_fontColor"}),h=ej.buildTag("td","",{width:"35px","padding-left":"3px","border-spacing":"0px"}),t=ej.buildTag("span","",{width:"30px","text-align":"center",height:"27px",display:"table-cell","vertical-align":"middle"},{"class":"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-designer-font-bold-icon e-designer-font-style-icons e-dbrd-hand-cursor",id:this.id+"_conditional_settings_fontBold"}),c=ej.buildTag("td","",{width:"35px","padding-left":"3px","border-spacing":"0px"}),i=ej.buildTag("span","",{width:"30px","text-align":"center",height:"27px",display:"table-cell","vertical-align":"middle"},{"class":"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-designer-font-italic-icon e-designer-font-style-icons e-dbrd-hand-cursor",id:this.id+"_conditional_settings_fontItalic"}),l=ej.buildTag("td","",{width:"35px","padding-left":"3px","border-spacing":"0px"}),r=ej.buildTag("span","",{width:"30px","text-align":"center",height:"27px",display:"table-cell","vertical-align":"middle"},{"class":"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-designer-font-underline-icon e-designer-font-style-icons e-dbrd-hand-cursor",id:this.id+"_conditional_settings_fontUnderLine"}),a=ej.buildTag("td","",{width:"35px","padding-left":"3px","border-spacing":"0px"}),u=ej.buildTag("span","",{width:"30px","text-align":"center",height:"27px",display:"table-cell","vertical-align":"middle"},{"class":"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-designer-font-strike-icon e-designer-font-style-icons e-dbrd-hand-cursor",id:this.id+"_conditional_settings_fontStrike"});o.append(s);h.append(t);c.append(i);l.append(r);a.append(u);e.append(v).append(o).append(h).append(c).append(l).append(a);f.append(e);n.append(f);t.bind("click",$.proxy(this.selectFontStyleIcons,this,t));i.bind("click",$.proxy(this.selectFontStyleIcons,this,i));r.bind("click",$.proxy(this.selectFontStyleIcons,this,r));u.bind("click",$.proxy(this.selectFontStyleIcons,this,u));s.ejColorPicker({cssClass:"e-designer-ejwidgets-colorpicker e-designer-content-label",width:"35px",height:"26px",modelType:"palette",palette:"basicpalette"})},n.prototype.renderColorPalette=function(n){var t=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_palette_table"}),i=ej.buildTag("tr","",{},{}),o=ej.buildTag("td.e-designer-fontfamily","Select Color Palette",{width:"122px","font-size":"12px"},{}),r=ej.buildTag("td","",{width:"31px"},{}),u=ej.buildTag("div","",{},{id:this.id+"_conditional_settings_palettediv"}),f=ej.buildTag("div","",{height:"18px",width:"155px",position:"absolute",margin:"4px 11px 0px 11px",background:"#ffffff"},{id:this.id+"_conditional_settings_palette_panel"}),e=this.colorPalette=ej.buildTag("input","",{},{type:"text",id:this.id+"_conditional_settings_colorPalette"});u.append(f).append(e);r.append(u);i.append(o).append(r);t.append(i);n.append(t);e.ejDropDownList({dataSource:this.gradientList(),fields:{value:"gradient"},selectedIndex:0,width:"200px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-designer-colorpalette e-dbrd-control",template:'<div style="height:18px;width:178px;background:${gradient}"><\/div>',change:$.proxy(this.updatePalettePanel,this)});f.css("background","linear-gradient(to right, #A8E1F4 0%, #0D7CBD 100%)")},n.prototype.renderTextBox=function(n,t,i){var r=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_"+i+"_table"}),u=ej.buildTag("tr","",{},{}),o=ej.buildTag("td.e-designer-fontfamily",t,{width:"122px","font-size":"12px"},{}),f=ej.buildTag("td","",{width:"31px"},{}),e=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_conditional_settings_"+i});f.append(e);u.append(o).append(f);r.append(u);n.append(r);e.ejMaskEdit({inputMode:ej.InputMode.Text,width:"200px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border"})},n.prototype.renderMeasureConditionValue=function(n){var r=this.measureConditionValues=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px",display:"none"},{id:this.id+"_conditional_settings_measurevalue_table"}),u=$("<tr><\/tr>"),c=ej.buildTag("td.e-designer-fontfamily","Values",{width:"122px","font-size":"12px"},{}),f=ej.buildTag("td","",{},{}),t=ej.buildTag("input","",{},{type:"text",id:this.id+"_conditional_settings_text1"});f.append(t);var e=ej.buildTag("td","",{width:"33px"},{}),o=this.textDiv=ej.buildTag("div","",{"padding-left":"10px",display:"none"}),l=ej.buildTag("editLabel.e-designer-fontfamily","&",{"font-size":"12px"},{type:"label"}),s=ej.buildTag("td","",{height:"28px"},{}),h=this.rightTextBoxDiv=ej.buildTag("div","",{display:"none"},{id:this.id+"_conditional_settings_rightText_div"}),i=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_conditional_settings_text2"});s.append(h);h.append(i);o.append(l);e.append(o);u.append(c).append(f).append(e).append(s);r.append(u);n.append(r);t.ejNumericTextbox({decimalPlaces:2,value:0,width:"80px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",change:$.proxy(this.changeTextBoxValue,this,t)});i.ejNumericTextbox({decimalPlaces:2,value:0,width:"80px",height:"26px",showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",change:$.proxy(this.changeTextBoxValue,this,i)})},n.prototype.changeTextBoxValue=function(n,t){ej.isNullOrUndefined(t.value)&&n.data("ejNumericTextbox").setModel({value:0})},n.prototype.selectFontStyleIcons=function(n){this.hasSelectionClass(n)?n.removeClass("e-designer-fontstyle-selection"):n.addClass("e-designer-fontstyle-selection")},n.prototype.updatePalettePanel=function(n){$("#"+this.id+"_conditional_settings_palette_panel").css("background",n.value)},n.prototype.changeMeasureCondition=function(n){n.value==="Between"?(this.textDiv.css("display","block"),this.rightTextBoxDiv.css("display","block")):(this.textDiv.css("display","none"),this.rightTextBoxDiv.css("display","none"))},n.prototype.changeGradientFormatting=function(n){this.showGradientFormatting(n.value)},n.prototype.showGradientFormatting=function(n){var t=this.divContainer.find("#"+this.id+"_conditional_settings_foreground_table"),i=this.divContainer.find("#"+this.id+"_conditional_settings_column_title_table");n===ConditionalFormatType.Indication.toString()?(t.css("display","none"),i.css("display","block")):(t.css("display","block"),i.css("display","none"))},n.prototype.changeColorSettings=function(n){this.showColorSettings(n.value)},n.prototype.showColorSettings=function(n){n===ColorType[ColorType.GradientColor]?(this.showSingleColorElements(!1),this.showGradientColorElements(!0)):n===ColorType[ColorType.SingleColor]?(this.showGradientColorElements(!1),this.showSingleColorElements(!0)):(this.showGradientColorElements(!1),this.showSingleColorElements(!1))},n.prototype.showSingleColorElements=function(n){var t=this.divContainer.find("#"+this.id+"_conditional_settings_formattingType_table"),i=$("#"+this.id+"_conditional_settings_measure_conditionType_table"),r=$("#"+this.id+"_conditional_settings_measurevalue_table"),u=$("#"+this.id+"_conditional_settings_font_table"),f=$("#"+this.id+"_conditional_settings_pgcolor_table");n?(t.css("display","block"),i.css("display","block"),r.css("display","block"),u.css("display","block"),f.css("display","block")):(t.css("display","none"),i.css("display","none"),r.css("display","none"),u.css("display","none"),f.css("display","none"))},n.prototype.showGradientColorElements=function(n){var u=this.divContainer.find("#"+this.id+"_conditional_settings_grdntFormattingType"),t=this.divContainer.find("#"+this.id+"_conditional_settings_grdntFormattingType_table"),i=this.divContainer.find("#"+this.id+"_conditional_settings_palette_table"),f=this.divContainer.find("#"+this.id+"_conditional_settings_foreground_table"),e=this.divContainer.find("#"+this.id+"_conditional_settings_column_title_table"),r;n?(t.css("display","block"),i.css("display","block"),r=u.data("ejDropDownList").getSelectedValue(),this.showGradientFormatting(r)):(t.css("display","none"),i.css("display","none"),f.css("display","none"),e.css("display","none"))},n.prototype.changeColumnInfo=function(n){if(n.selectedValue===FieldType[FieldType.Measures]){var t=this.columnDetails.data("ejDropDownList").getListData(),i=t[this.columnDetails.data("ejDropDownList").model.selectedIndex].columnInfo.Value;this.divContainer.find("#"+this.id+"_conditional_settings_column_title").data("ejMaskEdit").setModel({value:i});this.showDimensionElements(!1);this.showMeasureElements(!0)}else n.selectedValue===FieldType[FieldType.Dimensions]&&(this.showMeasureElements(!1),this.showDimensionElements(!0))},n.prototype.showMeasureElements=function(n){var t=this.divContainer.find("#"+this.id+"_conditional_settings_colorSetting_table"),r=this.divContainer.find("#"+this.id+"_conditional_settings_colorSetting"),i;n?(t.css("display","block"),i=r.data("ejDropDownList").getSelectedValue(),this.showColorSettings(i)):(t.css("display","none"),this.showColorSettings(""))},n.prototype.showDimensionElements=function(n){var t=this.divContainer.find("#"+this.id+"_conditional_settings_formattingType_table"),i=this.divContainer.find("#"+this.id+"_conditional_settings_dimension_conditionType_table"),r=this.divContainer.find("#"+this.id+"_conditional_settings_caseSensitive_table"),u=this.divContainer.find("#"+this.id+"_conditional_settings_dimension_value_table"),f=$("#"+this.id+"_conditional_settings_font_table"),e=$("#"+this.id+"_conditional_settings_pgcolor_table");n?(t.css("display","block"),i.css("display","block"),r.css("display","block"),u.css("display","block"),f.css("display","block"),e.css("display","block")):(t.css("display","none"),i.css("display","none"),r.css("display","none"),u.css("display","none"),f.css("display","none"),e.css("display","none"))},n.prototype.createConditionalSetting=function(){return{GradDarkColor:"",TargetMeasureColumn:Column,MeasureConditionType:MeasureConditionType.Equals,DimensionConditionType:DimensionConditionType.Equals,Name:"",MappingColor:"",IsCaseSensitive:!0,GradLightColor:"",SelectedColorPalette:"",Value:0,FormatType:ConditionalFormatType.Column,EndValue:0,DisplayExpression:"",ColumnName:"",ColorStyle:ColorType.SingleColor,Styles:{FontFormats:{TextColor:"",IsBold:!1,IsItalic:!1,IsUnderline:!1,IsStrikethrough:!1},BackgroundColor:""},Text:""}},n.prototype.getConditionSettingsInfo=function(){var n=this.createConditionalSetting(),l=this.columnDetails.data("ejDropDownList").getListData(),i=[],u,e,t,h,r,c,f;i=l[this.columnDetails.data("ejDropDownList").model.selectedIndex].columnInfo;n.TargetMeasureColumn={ColumnType:i.FieldType,UniqueColumnName:i.UniqueColumnName,DisplayName:i.Value};n.Name=ej.getGuid("ConditionalFormatting_");u=this.divContainer.find("#"+this.id+"_conditional_settings_colorSetting").data("ejDropDownList");e=u.getItemDataByValue(u.getSelectedValue())[0];n.ColorStyle=e.value;n.ColumnName=n.TargetMeasureColumn.DisplayName;n.ColorStyle===ColorType[ColorType.SingleColor]?n.FormatType=this.divContainer.find("#"+this.id+"_conditional_settings_formattingType").data("ejDropDownList").getSelectedValue():n.ColorStyle===ColorType[ColorType.GradientColor]&&(n.FormatType=this.divContainer.find("#"+this.id+"_conditional_settings_grdntFormattingType").data("ejDropDownList").getSelectedValue());n.IsCaseSensitive=this.divContainer.find("#"+this.id+"_conditional_settings_caseSensitive").data("ejCheckBox").model.checked;n.Styles.BackgroundColor=this.divContainer.find("#"+this.id+"_conditional_settings_bgcolor").data("ejColorPicker").getValue();n.ColorStyle===ColorType[ColorType.GradientColor]&&(n.Styles.FontFormats.TextColor=this.divContainer.find("#"+this.id+"_conditional_settings_foreground").data("ejColorPicker").getValue());t=this.divContainer.find("#"+this.id+"_conditional_settings_colorPalette").data("ejDropDownList");n.SelectedColorPalette=t.getSelectedValue();n.GradLightColor=n.ColorStyle===ColorType[ColorType.GradientColor]?t.model.dataSource[t.model.selectedIndex].startValue:"";n.GradDarkColor=n.ColorStyle===ColorType[ColorType.GradientColor]?t.model.dataSource[t.model.selectedIndex].endValue:"";var o=this.divContainer.find("#"+this.id+"_conditional_settings_measure_conditionType").data("ejDropDownList"),a=o.getItemDataByValue(o.getSelectedValue())[0],s=this.divContainer.find("#"+this.id+"_conditional_settings_dimension_conditionType").data("ejDropDownList"),v=s.getItemDataByValue(s.getSelectedValue())[0];return i.FieldType===FieldType[FieldType.Measures]?n.MeasureConditionType=a.value:n.DimensionConditionType=v.value,this.getFontFormatValues(n),h=this.divContainer.find("#"+this.id+"_conditional_settings_dimension_value_table"),h.css("display")==="block"?(r=this.divContainer.find("#"+this.id+"_conditional_settings_dimension_value").data("ejMaskEdit").get_UnstrippedValue(),n.Text=!ej.isNullOrUndefined(r)&&r.length>0?r:"",n.Value=0):(c=this.divContainer.find("#"+this.id+"_conditional_settings_text1").data("ejNumericTextbox").getValue(),n.Value=c,f=this.divContainer.find("#"+this.id+"_conditional_settings_text2").data("ejNumericTextbox").getValue(),n.EndValue=ej.isNullOrUndefined(f)?0:f),n},n.prototype.getFontFormatValues=function(n){var t=this.divContainer.find("#"+this.id+"_conditional_settings_fontColor"),i=this.divContainer.find("#"+this.id+"_conditional_settings_fontBold"),r=this.divContainer.find("#"+this.id+"_conditional_settings_fontItalic"),u=this.divContainer.find("#"+this.id+"_conditional_settings_fontStrike"),f=this.divContainer.find("#"+this.id+"_conditional_settings_fontUnderLine");n.ColorStyle.toString()===ColorType[ColorType.SingleColor]&&(n.Styles.FontFormats.TextColor=t.data("ejColorPicker").getValue());n.Styles.FontFormats.IsBold=this.hasSelectionClass(i);n.Styles.FontFormats.IsItalic=this.hasSelectionClass(r);n.Styles.FontFormats.IsUnderline=this.hasSelectionClass(f);n.Styles.FontFormats.IsStrikethrough=this.hasSelectionClass(u)},n.prototype.hasSelectionClass=function(n){return n.hasClass("e-designer-fontstyle-selection")},n.prototype.removeSelectionClass=function(n){n.hasClass("e-designer-fontstyle-selection")&&n.removeClass("e-designer-fontstyle-selection")},n.prototype.resetFontStyle=function(){var n=this.divContainer.find("#"+this.id+"_conditional_settings_fontColor");this.removeSelectionClass(this.divContainer.find("#"+this.id+"_conditional_settings_fontBold"));this.removeSelectionClass(this.divContainer.find("#"+this.id+"_conditional_settings_fontItalic"));this.removeSelectionClass(this.divContainer.find("#"+this.id+"_conditional_settings_fontStrike"));this.removeSelectionClass(this.divContainer.find("#"+this.id+"_conditional_settings_fontUnderLine"));n.data("ejColorPicker").setModel({value:"#ffffff"})},n.prototype.updateFontStyleSelection=function(n){var t=this.divContainer.find("#"+this.id+"_conditional_settings_fontColor"),i=this.divContainer.find("#"+this.id+"_conditional_settings_fontBold"),r=this.divContainer.find("#"+this.id+"_conditional_settings_fontItalic"),u=this.divContainer.find("#"+this.id+"_conditional_settings_fontStrike"),f=this.divContainer.find("#"+this.id+"_conditional_settings_fontUnderLine");this.resetFontStyle();ej.isNullOrUndefined(n)||(t.data("ejColorPicker").setModel({value:n.Styles.FontFormats.TextColor}),n.Styles.FontFormats.IsBold&&i.addClass("e-designer-fontstyle-selection"),n.Styles.FontFormats.IsItalic&&r.addClass("e-designer-fontstyle-selection"),n.Styles.FontFormats.IsStrikethrough&&u.addClass("e-designer-fontstyle-selection"),n.Styles.FontFormats.IsUnderline&&f.addClass("e-designer-fontstyle-selection"))},n.prototype.populateConditionalSettingInfo=function(n){var r,u,f,i,t;for(n.TargetMeasureColumn.ColumnType===FieldType[FieldType.Dimensions]?this.divContainer.find("#"+this.id+"_conditional_settings_dimension_value").data("ejMaskEdit").setModel({value:n.Text}):(this.divContainer.find("#"+this.id+"_conditional_settings_text1").data("ejNumericTextbox").setModel({value:n.Value}),this.divContainer.find("#"+this.id+"_conditional_settings_text2").data("ejNumericTextbox").setModel({value:n.EndValue})),r=null,u=this.columnDetails.data("ejDropDownList").model.dataSource,t=0;t<u.length;t++)if(u[t].DataField.toLowerCase()===n.TargetMeasureColumn.DisplayName.toLowerCase()){r=t;break}for(this.columnDetails.data("ejDropDownList").setModel({selectedIndex:r}),this.divContainer.find("#"+this.id+"_conditional_settings_colorSetting").data("ejDropDownList").selectItemByValue(n.ColorStyle),this.divContainer.find("#"+this.id+"_conditional_settings_column_title").data("ejMaskEdit").setModel({value:n.ColumnName}),this.updateFontStyleSelection(n),n.ColorStyle===ColorType[ColorType.SingleColor]?this.divContainer.find("#"+this.id+"_conditional_settings_formattingType").data("ejDropDownList").selectItemByValue(n.FormatType):n.ColorStyle===ColorType[ColorType.GradientColor]&&this.divContainer.find("#"+this.id+"_conditional_settings_grdntFormattingType").data("ejDropDownList").selectItemByValue(n.FormatType),this.divContainer.find("#"+this.id+"_conditional_settings_caseSensitive").data("ejCheckBox").setModel({checked:n.IsCaseSensitive}),this.divContainer.find("#"+this.id+"_conditional_settings_bgcolor").data("ejColorPicker").setModel({value:n.Styles.BackgroundColor}),this.divContainer.find("#"+this.id+"_conditional_settings_foreground").data("ejColorPicker").setModel({value:n.Styles.FontFormats.TextColor}),f=null,i=this.gradientList(),t=0;t<i.length;t++)i[t].startValue===n.GradLightColor&&i[t].endValue===n.GradDarkColor&&(f=i[t].gradient);this.divContainer.find("#"+this.id+"_conditional_settings_colorPalette").data("ejDropDownList").setModel({value:f});this.divContainer.find("#"+this.id+"_conditional_settings_measure_conditionType").data("ejDropDownList").selectItemByValue(n.MeasureConditionType);this.divContainer.find("#"+this.id+"_conditional_settings_dimension_conditionType").data("ejDropDownList").selectItemByValue(n.DimensionConditionType)},n.prototype.resetConditionalSetting=function(){var t,n;for(this.isEdit=!1,this.conditionalInfo=null,t=2,this.divContainer.find("#"+this.id+"_conditional_settings_dimension_value").data("ejMaskEdit").model.value="",n=0;n<t;n++)this.divContainer.find("#"+this.id+"_conditional_settings_text"+(n+1)).data("ejNumericTextbox").setModel({value:0});this.divContainer.find("#"+this.id+"_conditional_settings_colorSetting").data("ejDropDownList").setModel({selectedIndex:0});this.divContainer.find("#"+this.id+"_conditional_settings_column_title").data("ejMaskEdit").model.value="";this.divContainer.find("#"+this.id+"_conditional_settings_formattingType").data("ejDropDownList").setModel({selectedIndex:0});this.divContainer.find("#"+this.id+"_conditional_settings_grdntFormattingType").data("ejDropDownList").setModel({selectedIndex:0});this.divContainer.find("#"+this.id+"_conditional_settings_bgcolor").data("ejColorPicker").setModel({value:"#2f79b5"});this.divContainer.find("#"+this.id+"_conditional_settings_foreground").data("ejColorPicker").setModel({value:"#ffffff"});this.divContainer.find("#"+this.id+"_conditional_settings_colorPalette").data("ejDropDownList").setModel({selectedIndex:0});this.divContainer.find("#"+this.id+"_conditional_settings_measure_conditionType").data("ejDropDownList").setModel({selectedIndex:0});this.divContainer.find("#"+this.id+"_conditional_settings_dimension_conditionType").data("ejDropDownList").setModel({selectedIndex:0});this.divContainer.find("#"+this.id+"_conditional_settings_dimension_value").val("");this.divContainer.find("#"+this.id+"_conditional_settings_caseSensitive").data("ejCheckBox").option("checked",!0);this.resetFontStyle()},n.prototype.getBasedOnColumnDetails=function(){for(var i,n,t,r,s=[],c=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems,h=ej.DashboardUtil.getWidgetInstance($(c[0])),e=h.dataGroupInfo.Values,l=h.dataGroupInfo.DatasetId,o=ejDashboardDesigner.getInstance("DataSet").datasets,u=[],f=0;f<o.length;f++)l===o[f].Id&&(u=o[f].Fields);for(i=0;i<e.length;i++)for(n=0;n<e[i].Values.length;n++)for(t=e[i].Values,r=0;r<u.length;r++)t[n].DataField!==u[r].Name||ej.DashboardUtil.isDateTimeType(u[r].TypeName)||s.push({DataField:t[n].Value,Value:t[n].DataField,FieldType:t[n].FieldType,columnInfo:t[n]});return s},n.prototype.openColumnSettings=function(n,t){this.resetConditionalSetting();this.isEdit=t;this.conditionalInfo=n;this.settingsDialog.data("ejDialog").open();var i=this.getBasedOnColumnDetails();this.columnDetails.data("ejDropDownList").setModel({dataSource:i});ej.isNullOrUndefined(n)?this.columnDetails.data("ejDropDownList").setModel({selectedIndex:0}):this.populateConditionalSettingInfo(n)},n.prototype.closeConditionalSettings=function(){this.settingsDialog.data("ejDialog").close()},n.prototype.saveConditionalSettings=function(){var n=this.getConditionSettingsInfo();this.updateGridData(n,this.isEdit);this.settingsDialog.data("ejDialog").close()},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_conditional_settings"));$("#"+this.id+"_conditional_settings").length>0&&$("#"+this.id+"_conditional_settings").remove();ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_col_conditional_format"));$("#"+this.id+"_col_conditional_format").length>0&&$("#"+this.id+"_col_conditional_format").remove()},n.prototype.formattingTypeList=function(){return[{text:"Column",value:"Column"},{text:"Row",value:"Row"}]},n.prototype.measureConditionList=function(){var n=[];return n.push({value:MeasureConditionType[MeasureConditionType.Equals],text:MeasureConditionType.Equals}),n.push({value:MeasureConditionType[MeasureConditionType.NotEquals],text:MeasureConditionType.NotEquals}),n.push({value:MeasureConditionType[MeasureConditionType.GreaterThan],text:MeasureConditionType.GreaterThan}),n.push({value:MeasureConditionType[MeasureConditionType.GreaterThanOrEqual],text:MeasureConditionType.GreaterThanOrEqual}),n.push({value:MeasureConditionType[MeasureConditionType.LessThan],text:MeasureConditionType.LessThan}),n.push({value:MeasureConditionType[MeasureConditionType.LessThanOrEqual],text:MeasureConditionType.LessThanOrEqual}),n.push({value:MeasureConditionType[MeasureConditionType.Between],text:MeasureConditionType.Between}),n},n.prototype.dimensionConditionList=function(){var n=[];return n.push({value:DimensionConditionType[DimensionConditionType.Equals],text:DimensionConditionType.Equals}),n.push({value:DimensionConditionType[DimensionConditionType.NotEquals],text:DimensionConditionType.NotEquals}),n.push({value:DimensionConditionType[DimensionConditionType.Contains],text:DimensionConditionType.Contains}),n.push({value:DimensionConditionType[DimensionConditionType.NotContains],text:DimensionConditionType.NotContains}),n.push({value:DimensionConditionType[DimensionConditionType.StartsWith],text:DimensionConditionType.StartsWith}),n.push({value:DimensionConditionType[DimensionConditionType.EndsWith],text:DimensionConditionType.EndsWith}),n},n.prototype.getColorList=function(){var n=[];return n.push({value:ColorType[ColorType.SingleColor],text:ColorType.SingleColor}),n.push({value:ColorType[ColorType.GradientColor],text:ColorType.GradientColor}),n},n.prototype.gradientList=function(){return[{gradient:"linear-gradient(to right, #A8E1F4 0%, #0D7CBD 100%)",startValue:"#A8E1F4",endValue:"#0D7CBD"},{gradient:"linear-gradient(to right, #C0E662 0%, #007500 100%)",startValue:"#C0E662",endValue:"#007500"},{gradient:"linear-gradient(to right, #FFA76B 0%, #9E2B49 100%)",startValue:"#FFA76B",endValue:"#9E2B49"},{gradient:"linear-gradient(to right, #A8E1F4 0%, #FF712F 100%)",startValue:"#A8E1F4",endValue:"#FF712F"},{gradient:"linear-gradient(to right, #EED2EE 0%, #B877D2 100%)",startValue:"#EED2EE",endValue:"#B877D2"}]},n}();window.ej.createObject("ej.DashboardDesignerUtility.ConditionalFormat",InternalConditionalFormat,window);InternalContainerPropertyItem=function(){function n(){this.containerSettings=null;this.filterSettings=null;this.controlContainer=null;this.controlHeader=null;this.filterConfigInfo=null;this.hierarchicalConfigInfo=null;this.dataGroupInfo=null;this.filterConfigInfo=ejDashboardDesigner.getInstance("MasterSlaveFilter");this.hierarchicalConfigInfo=ejDashboardDesigner.getInstance("DataConfiguration");this.designerInstance=ejDashboardDesigner.getInstance("DashboardDesigner")}return Object.defineProperty(n,"ContainerPropertyItem",{get:function(){return(this.container===null||this.container===undefined)&&(this.container=new ej.DashboardDesignerUtility.ContainerPropertyItem),this.container},enumerable:!0,configurable:!0}),n.prototype.updatePropertyChange=function(n,t,i,r,u){var s=!1,e,h,c,f,o,l;switch(n){case"ContainerTitleAlign":this.updateContainerTitleAlign(i,this.controlHeader);break;case"ContainerTitleColor":this.updateContainerTitleColor(i,this.controlHeader);break;case"ShowBorder":this.updateShowBorder(i,this.controlContainer);break;case"CornerRadius":this.updateCornerRadius(i,this.controlContainer);break;case"ShowMaximize":this.updateShowMaximize(i);break;case"CSVExport":this.updateCSVExport(i);break;case"ExcelExport":this.updateExcelExport(i);break;case"ImageExport":this.updateImageExport(i);break;case"PDFExport":this.updatePDFExport(i);break;case"EnableComment":this.updateEnableComment(i);break;case"ActAsMasterWidget":this.updateActAsMasterWidget(i,r);break;case"IgnoreFilterActions":this.updateIgnoreFilterActions(i);break;case"ShowLinkIcon":this.updateShowLinkIcon(i);break;case"HierarchicalFilter":this.updateHierarchicalFilter(i);break;default:s=!0}s||(e=ejDashboardDesigner.getInstance("DesignPanel"),h=r.getReportItem(),e.selectedReportItems.length>0&&ejDashboardDesigner.editManager.isPerformAction?(c=ejDashboardDesigner.getInstance("PropertyPanel"),h.attr("id")===this.controlContainer.attr("id")&&(f=$.extend(!0,{},u),f.categoryName=u.categoryName,f.valueList=u.valueList,c.updatePropertyValue(f,r.controlType,i))):(o=r.getReportItemJson(),l=e.getWidgetItemType(o),ejDashboardDesigner.editManager.addCmdAction(CommandAction.ContainerPropertyChanged,"updatePropertyChange",l,this.designerInstance._id+"_"+o.UniqueName,[n,i,t,r,u],[n,t,i,r,u])))},n.prototype.getContainerSettingItems=function(n,t,i,r){this.controlContainer=t;this.controlHeader=i;this.containerSettings=n;this.dataGroupInfo=r;return{CategoryName:"Container Appearance",Items:[{name:"ContainerTitleAlign",isVisible:!0,displayName:"Title Alignment",value:ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.containerSettings.TextAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"ContainerTitleColor",isVisible:!0,displayName:"Title Color",value:this.containerSettings.TextColor,itemType:"color"},{name:"ShowBorder",displayName:"Show Border",value:this.containerSettings.ShowBorder,itemType:"bool"},{name:"CornerRadius",displayName:"Corner Radius",value:this.containerSettings.CornerRadius,itemType:"float",decimalPlaces:0,minimum:0,maximum:10,unitType:"pt"},{name:"ShowMaximize",isVisible:!0,displayName:"Show Maximize",value:this.containerSettings.ShowMaximize,itemType:"bool"},{name:"CSVExport",isVisible:!0,displayName:"CSV Export",value:this.containerSettings.EnableCsvExport,itemType:"bool"},{name:"ExcelExport",isVisible:!0,displayName:"Excel Export",value:this.containerSettings.EnableExcelExport,itemType:"bool"},{name:"ImageExport",isVisible:!0,displayName:"Image Export",value:this.containerSettings.EnableImageExport,itemType:"bool"},{name:"PDFExport",isVisible:!0,displayName:"PDF Export",value:this.containerSettings.EnablePdfExport,itemType:"bool"},{name:"EnableComment",displayName:"Enable Commenting",value:this.containerSettings.EnableComment,itemType:"bool"},{name:"ShowLinkIcon",isVisible:!1,displayName:"Show Link Icon",value:this.containerSettings.ShowLinkIcon,itemType:"bool"},]}},n.prototype.getFilterSettingsItems=function(n,t,i,r){this.controlContainer=t;this.controlHeader=i;this.filterSettings=n;this.dataGroupInfo=r;return{CategoryName:"Filter",Items:[{name:"ActAsMasterWidget",isDisable:!1,displayName:"Act as Master Widget",value:this.filterSettings.ActAsMasterWidget,itemType:"bool"},{name:"IgnoreFilterActions",displayName:"Ignore Filter Actions",value:this.filterSettings.IgnoreFilterActions,itemType:"bool"},{name:"HierarchicalFilter",displayName:"Enable Hierarchical Filtering",isVisible:!0,value:this.filterSettings.HierarchicalFilter,itemType:"bool"}]}},n.prototype.updateContainerTitleAlign=function(n,t){var r=$(t).siblings(".e-dbrd-control-sub-header"),u=$(t).find(".e-dbrd-controlIcon-container"),i=10;this.containerSettings.TextAlignment=ej.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,n);$(t).find(".e-dbrd-control-title-wrapper").css({"justify-content":this.getContainerTitleAlignmentValue(n)});this.containerSettings.TextAlignment!==TextAlignment.Center&&(i=u.outerWidth(!0)+10);$(t).find(".e-dbrd-control-title-wrapper").css({width:"calc(100% - "+i+"px)"});r.find(".e-dbrd-control-sub-title").css({"text-align":n})},n.prototype.getContainerTitleAlignmentValue=function(n){var t=null;switch(n){case"Center":t="Center";break;case"Left":t="flex-start";break;case"Right":t="flex-end";break;default:t="flex-start"}return t},n.prototype.updateContainerTitleColor=function(n,t){this.containerSettings.TextColor=n;$(t).find(".e-dbrd-control-title").css({color:n})},n.prototype.updateShowBorder=function(n,t){this.containerSettings.ShowBorder=n;this.containerSettings.ShowBorder?$(t).css({border:"1px solid lightgray"}):$(t).css({border:"0px"})},n.prototype.updateCornerRadius=function(n,t){this.containerSettings.CornerRadius=n;$(t).css("border-radius",n+"px");$(t).find(".e-dbrd-content-container").css({"border-bottom-left-radius":n,"border-bottom-right-radius":n})},n.prototype.updateShowMaximize=function(n){this.containerSettings.ShowMaximize=n},n.prototype.updateCSVExport=function(n){this.containerSettings.EnableCsvExport=n},n.prototype.updateActAsMasterWidget=function(n,t){this.filterSettings.ActAsMasterWidget=n;this.filterConfigInfo.ActAsMasterPropertyChangeInFilterConfigInfo(n,t)},n.prototype.updateIgnoreFilterActions=function(n){this.filterSettings.IgnoreFilterActions=n;this.filterConfigInfo.IgnoreFilterActionPropertyChange(n)},n.prototype.updateHierarchicalFilter=function(n){this.filterSettings.HierarchicalFilter=n;this.hierarchicalConfigInfo.postDraggedFields()},n.prototype.updateExcelExport=function(n){this.containerSettings.EnableExcelExport=n},n.prototype.updateImageExport=function(n){this.containerSettings.EnableImageExport=n},n.prototype.updatePDFExport=function(n){this.containerSettings.EnablePdfExport=n},n.prototype.updateEnableComment=function(n){this.containerSettings.EnableComment=n},n.prototype.updateShowLinkIcon=function(n){this.containerSettings.ShowLinkIcon=n},n}();window.ej.createObject("ej.DashboardDesignerUtility.ContainerPropertyItem",InternalContainerPropertyItem,window);InternalCredentialDialog=function(){function n(){this.id=null;this.userWaterMark="Username";this.passwdWaterMark="Password";this.userNameTag=null;this.passwordTag=null;this.id=ej.DashboardUtil.getInstance().ejInstance._id;this.renderCredentialDialog()}return Object.defineProperty(n,"CredentialDialog",{get:function(){return(this.credential===null||this.credential===undefined)&&(this.credential=new ej.DashboardDesignerUtility.CredentialDialog),this.credential},enumerable:!0,configurable:!0}),n.prototype.renderCredentialDialog=function(){var t=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{height:"auto"},{title:"Credential Dialog",id:this.id+"_credential_dialog"}),i=ej.buildTag("div","",{},{id:this.id+"_table_id"}),n=ej.buildTag("table.e-designer-credential-table","",{width:"100%"},{unselectable:"on"}),r=$("<tr><\/tr>"),u=$("<td><\/td>"),nt=ej.buildTag("Label.e-designer-fontfamily","Username",{"font-size":"13px","padding-bottom":"2px"},{type:"label"}),f=$("<tr><\/tr>"),e=$("<td><\/td>"),o=this.userNameTag=ej.buildTag("input.e-textbox e-designer-textbox-border e-designer-border","",{height:"23px",width:"238px"},{type:"text",id:this.id+"_txt_box"}),g;ej.DashboardUtil.txtWaterMark(o,this.userWaterMark);var s=$("<tr><\/tr>"),h=$("<td><\/td>"),tt=ej.buildTag("Label.e-designer-fontfamily","",{"margin-bottom":"2px",color:" red","font-size":"12px"},{type:"label",id:this.id+"_label_user_validation"}),c=$("<tr><\/tr>"),l=$("<td><\/td>"),it=ej.buildTag("Label.e-designer-fontfamily","Password",{"font-size":"13px","padding-bottom":"2px"},{type:"label"}),a=$("<tr><\/tr>"),v=$("<td><\/td>"),y=this.passwordTag=ej.buildTag("input.e-textbox e-designer-textbox-border e-designer-border","",{height:"23px",width:"238px"},{type:"text",id:this.id+"_pass_word"});ej.DashboardUtil.txtWaterMark(y,this.passwdWaterMark,!0);var p=$("<tr><\/tr>"),w=$("<td><\/td>"),rt=ej.buildTag("Label.e-designer-fontfamily","",{"margin-bottom":"2px",color:" red","font-size":"12px"},{type:"label",id:this.id+"_label_pass_validation"}),b=$("<tr><\/tr>"),k=$("<td><\/td>"),ut=ej.buildTag("Label.e-designer-fontfamily","",{"margin-bottom":"3px",color:" red","font-size":"13px"},{type:"label",id:this.id+"_label_alert"}),d=ej.buildTag("button.e-designer-connect e-dbrd-hand-cursor","",{"margin-left":"80px"},{id:this.id+"_btn_login"});$(document.body).append(t);t.append(i);i.append(n);r.append(u);n.append(r);u.append(nt);f.append(e);n.append(f);e.append(o);n.append(s);s.append(h);h.append(tt);n.append(c);c.append(l);l.append(it);n.append(a);a.append(v);v.append(y);n.append(p);p.append(w);w.append(rt);b.append(k);n.append(b);k.append(ut);t.ejDialog({enableModal:!0,minWidth:250,width:280,enableResize:!1,showOnInit:!1,cssClass:"e-designer-dialog e-dashboarddesigner",minHeight:75,height:"auto",showFooter:!0,beforeClose:$.proxy(this.closeDialog,this),close:$.proxy(ej.DashboardUtil.closeDialog,this)});g=$("#"+this.id+"_credential_dialog_foot");g.append(d);d.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"submit",text:"Connect",click:$.proxy(this.connectLoginWindow,this,!0)});t.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"})},n.prototype.connectLoginWindow=function(){var n=this.userNameTag.val(),t=this.passwordTag.val(),i,r;(this.userFieldValidation(this.id,n.length===0||n.toLowerCase()===this.userWaterMark,"Please enter Username"),this.passFieldValidation(this.id,t.length===0||t.toLowerCase()===this.passwdWaterMark,"Please enter Password"),n.length!==0&&t.length!==0&&n.toLowerCase()!==this.userWaterMark&&t.toLowerCase()!==this.passwdWaterMark)&&(i=this.datasourceInfo.Name,this.datasourceInfo.Username=n,this.datasourceInfo.Password=t,r={Name:i,Provider:this.datasourceInfo.ConnectionProperties.DataProvider,IsIntegrated:!1,Username:ej.DashboardUtil.encryptData(n),Password:ej.DashboardUtil.encryptData(t),ConnectionString:ej.DashboardUtil.encryptData(this.datasourceInfo.ConnectionProperties.ConnectString)},ej.DashboardUtil.getInstance().doAjaxPost("POST",ej.DashboardUtil.getInstance().ejInstance.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.testConnection,datasource:r})},{fnction:$.proxy(this.validateConnection,this),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]}))},n.prototype.updateConnectionProperties=function(){var n={};return n.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.DataSource",n.Name=this.datasourceInfo.Name,n.Transaction=!1,n.DataSourceReference=null,n.ConnectionProperties={},n.ConnectionProperties.__type="Syncfusion.Dashboard.Web.Serialization.Model.Connection.ConnectionProperties",n.ConnectionProperties.ConnectString=this.datasourceInfo.ConnectionProperties.ConnectString,n.ConnectionProperties.EmbedCredentials=!1,n.ConnectionProperties.DataProvider=this.datasourceInfo.ConnectionProperties.DataProvider,n.ConnectionProperties.IntegratedSecurity=!1,n.ConnectionProperties.UserName=this.datasourceInfo.Username,n.ConnectionProperties.PassWord=this.datasourceInfo.Password,n.ConnectionProperties.Prompt=this.datasourceInfo.ConnectionProperties.Prompt,n},n.prototype.userFieldValidation=function(n,t,i){t?($("#"+this.id+"_label_alert").css("display","none"),$("#"+n+"_label_user_validation").css("display","block"),$("#"+n+"_label_user_validation").text("* "+i)):$("#"+n+"_label_user_validation").css("display","none")},n.prototype.passFieldValidation=function(n,t,i){t?($("#"+this.id+"_label_alert").css("display","none"),$("#"+n+"_label_pass_validation").css("display","block"),$("#"+n+"_label_pass_validation").text("* "+i)):$("#"+n+"_label_pass_validation").css("display","none")},n.prototype.validateConnection=function(n){n==="true"?(this.datasourceInfo=this.updateConnectionProperties(),$("#"+this.id+"_label_alert").css("display","none"),this.targetInstance&&this.targetMethod&&ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.datasourceInfo]),$("#"+this.id+"_credential_dialog").data("ejDialog").close()):($("#"+this.id+"_label_alert").css("display","block"),$("#"+this.id+"_label_alert").text(n))},n.prototype.resetCredentialDialog=function(){this.userNameTag.val(this.userWaterMark).addClass("e-designer-txtmark");this.passwordTag.val(this.passwdWaterMark).addClass("e-designer-txtmark");$("#"+this.id+"_label_user_validation").css("display","none");$("#"+this.id+"_label_pass_validation").css("display","none");$("#"+this.id+"_label_alert").css("display","none");this.datasourceInfo=null;this.targetInstance=null;this.targetMethod=null},n.prototype.openCredentialDialog=function(n,t,i,r){this.resetCredentialDialog();this.datasourceInfo=t;this.targetInstance=i;this.targetMethod=r;var u=$("#"+this.id+"_credential_dialog").data("ejDialog");u.open();u.setModel({title:t.ConnectionProperties.Prompt&&t.ConnectionProperties.Prompt.length>0?t.ConnectionProperties.Prompt:"Credential-  "+n});this.passwordTag.val(this.passwdWaterMark).addClass("e-designer-txtmark");this.passwordTag.attr("type","text");this.userNameTag.focus()},n.prototype.closeDialog=function(n){n.isInteraction&&ej.DashboardUtil.getQueryInstance("QueryDesigner").enableDataSourceDwn(!0);this.hideWaitingIndicator()},n.prototype.showIndicator=function(){ej.DashboardUtil.buttonEnable($("#"+this.id+"_btn_login"),!1);$("#"+this.id+"_credential_dialog").data("ejWaitingPopup").show()},n.prototype.hideIndicator=function(){ej.DashboardUtil.buttonEnable($("#"+this.id+"_btn_login"),!0);$("#"+this.id+"_credential_dialog").data("ejWaitingPopup").hide()},n.prototype.hideWaitingIndicator=function(){$("#"+this.id+"_credential_dialog").data("ejWaitingPopup")&&$("#"+this.id+"_credential_dialog").data("ejWaitingPopup").hide()},n}();window.ej.createObject("ej.DashboardDesignerUtility.CredentialDialog",InternalCredentialDialog,window);InternalCustomLegendSettings=function(){function n(){this.dashboardDesigner=null;this.legendSettingsDialog=null;this.editDiv=null;this.customDiv=null;this.editChooserTag=null;this.individualContainer=null;this.individualScrollElement=null;this.groupContainer=null;this.groupScrollElement=null;this.customValueContainer=null;this.customValueScrollElement=null;this.formatTextBox=null;this.customLegendInfo=null;this.internalCustomLegendInfo=null;this.valuesContainer=null;this.rowContainer=null;this.formatSelectedIndex=2;this.targetInstance=null;this.targetMethod=null;this.footerTag=null;this.settingsContainer=null;this.lastModifiedTextInfo=null;this.formatListBoxObj=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderCustomLengendSettingsWindow()}return Object.defineProperty(n,"CustomLegendSettings",{get:function(){return(this.customLegendSettings===null||this.customLegendSettings===undefined)&&(this.customLegendSettings=new ej.DashboardDesignerUtility.CustomLegendSettings),this.customLegendSettings},enumerable:!0,configurable:!0}),n.prototype.renderCustomLengendSettingsWindow=function(){var i=this.legendSettingsDialog=ej.buildTag("div.e-userselect","",{},{id:this.id+"_legend_settings"}),c=this.settingsContainer=ej.buildTag("div","",{}),l=this.customDiv=ej.buildTag("div","",{height:"283px",display:"block"},{id:this.id+"_legend_settings_custom"}),r=this.customValueContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{height:"283px",width:"418px"},{id:this.id+"_legend_settings_customValue_container"}),a=ej.buildTag("div","",{}),b=this.customValueScrollElement=ej.buildTag("div","",{height:"283px"},{id:this.id+"_legend_settings_customValue_elements"}),t,u,p,w,o,s,h;a.append(b);r.append(a);l.append(r);t=this.editDiv=ej.buildTag("div","",{display:"none"},{id:this.id+"_legend_settings_edit"});this.renderEditRadioButtions(t);u=ej.buildTag("div","",{height:"253px",width:"418px"},{});t.append(u);var f=this.individualContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{height:"252px",display:"block"},{id:this.id+"_legend_settings_individual_container"}),v=ej.buildTag("div","",{}),k=this.individualScrollElement=ej.buildTag("div","",{height:"252px"},{id:this.id+"_legend_settings_individual_elements"});v.append(k);f.append(v);var e=this.groupContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{height:"252px",display:"none"},{id:this.id+"_legend_settings_group_container"}),y=ej.buildTag("div","",{}),n=this.groupScrollElement=ej.buildTag("div","",{},{id:this.id+"_legend_settings_group_elements"});y.append(n);e.append(y);this.renderDisplayFormat(n);this.renderHeaderElement(n,!1,"Values");p=this.valuesContainer=ej.buildTag("div","",{width:"408px",padding:"8px 0px"},{id:this.id+"_legend_settings_val_container"});n.append(p);this.renderHeaderElement(n,!0,"Row");w=this.rowContainer=ej.buildTag("div","",{width:"408px",padding:"8px 0px"},{id:this.id+"_legend_settings_row_container"});n.append(w);u.append(f).append(e);o=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_legend_settings_cancel"});s=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_legend_settings_ok"});c.append(l).append(t);i.append(c);$(document.body).append(i);i.ejDialog({title:"Custom Legend Settings",width:"auto",height:"auto",minWidth:420,minHeight:320,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.footerTag=$("#"+this.id+"_legend_settings_foot");this.footerTag.append(o).append(s);h=this.dashboardDesigner.locale.dialogOptions;s.ejButton({text:h.okButtonText,showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.updateCustomInfo,this)});o.ejButton({text:h.cancelButtonText,showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.closeLegendSettings,this)});f.ejScroller({height:"252px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});e.ejScroller({height:"252px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});r.ejScroller({height:"283px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.renderDisplayFormat=function(n){var r=ej.buildTag("table.e-designer-exp-table","",{width:"388px",margin:"0px 10px 5px 10px",height:"30px"},{id:this.id+"_conditional_settings_format_table"}),u=ej.buildTag("tr","",{},{}),l=ej.buildTag("td.e-designer-fontfamily","Display Format",{"font-size":"12px","padding-top":"15px",width:"194px"},{}),f=ej.buildTag("td","",{width:"194px"},{}),e=ej.buildTag("div","",{height:"15px","margin-left":"2px"},{id:this.id+"_lengendSetting_error_icon"}),t;ej.DashboardUtil.renderErrIndictor(e,this.id,"Format should not empty");t=this.formatTextBox=ej.buildTag("input.e-textbox e-designer-content-label","",{width:"170px",height:"25px","margin-left":"11px"},{type:"text",id:this.id+"_conditional_settings_format_textBox"});f.append(e).append(t);u.append(l).append(f);r.append(u);var o=ej.buildTag("table.e-designer-exp-table","",{width:"388px",margin:"0px 10px 12px 10px",height:"30px"},{id:this.id+"_conditional_settings_formatList_table"}),s=ej.buildTag("tr","",{},{}),a=ej.buildTag("td","",{width:"194px"},{}),h=ej.buildTag("td","",{width:"31px"},{}),c=ej.buildTag("div","",{"padding-left":"11px"},{}),i=ej.buildTag("ul","",{},{id:this.id+"_conditional_settings_formatList"});c.append(i);h.append(c);s.append(a).append(h);o.append(s);n.append(r).append(o);i.ejListBox({dataSource:[{text:"Value",value:"Value"},{text:"Row",value:"Row"}],fields:{text:"text",value:"value"},showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-list-selection e-dbrd-control",width:"182px",height:"55px",select:$.proxy(this.changeFormat,this)});t.bind("blur",$.proxy(this.formatTextFocusOut,this));t.bind("keyup",$.proxy(this.formatTextKeyUp,this));this.formatListBoxObj=i.data("ejListBox")},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n.prototype.changeFormat=function(n){if(!ej.isNullOrUndefined(n)&&n.value.length>0&&n.index!==this.formatSelectedIndex){var t=this.formatTextBox.val(),i="{{:"+n.value+"}}";this.formatTextBox.val(t+i);this.formatValueChange(t+i);this.formatSelectedIndex=n.index}},n.prototype.formatTextFocusOut=function(){var n=this.formatTextBox.val();this.formatValueChange(n)},n.prototype.formatTextKeyUp=function(){var n=this.formatTextBox.val();this.formatValueChange(n)},n.prototype.formatValueChange=function(n){n.length>0?(this.customLegendInfo.Format=n,this.formatTextBox.hasClass("e-designer-error")&&(this.formatTextBox.removeClass("e-designer-error"),ej.DashboardUtil.showErrIndictor(this.groupScrollElement.find("#"+this.id+"_lengendSetting_error_icon"),!1)),this.footerTag.find("#"+this.id+"_legend_settings_ok").attr("disabled")==="disabled"&&this.disableUpdateButton(!1)):(ej.DashboardUtil.showErrIndictor(this.groupScrollElement.find("#"+this.id+"_lengendSetting_error_icon"),!0),this.formatTextBox.addClass("e-designer-error"),this.disableUpdateButton(!0))},n.prototype.renderEditRadioButtions=function(n){var r=ej.buildTag("div","",{"background-color":"#f5f5f5",border:"0px solid #cecece","border-bottom-width":"0.5px",height:"30px",width:"418px"},{}),u=ej.buildTag("table.e-designer-exp-table","",{width:"398px",margin:"0px 10px",height:"30px"},{id:this.id+"_conditional_settings_colInfo_table"}),f=ej.buildTag("tr","",{},{}),c=ej.buildTag("td.e-designer-fontfamily","Edit as",{width:"194px","font-size":"12px","font-weight":"600"},{}),e=ej.buildTag("td","",{width:"194px"},{}),o=this.editChooserTag=ej.buildTag("div","",{width:"194px",float:"left",clear:"none","box-sizing":"border-box",padding:"2px",display:"inline-block"},{}),t=ej.buildTag("div","",{width:"85px",display:"inline-block"},{}),i=ej.buildTag("div","",{width:"85px",display:"inline-block"},{}),s=ej.buildTag("input","",{},{type:"radio",name:"groupchooser",id:this.id+"_legend_settings_individual"}),l=ej.buildTag("label","Individual",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.id+"_legend_settings_individual",type:"label"}),h=ej.buildTag("input","",{},{type:"radio",name:"groupchooser",id:this.id+"_legend_settings_group"}),a=ej.buildTag("label","Group",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.id+"_legend_settings_group",type:"label"});t.append(s);i.append(h);t.append(l);i.append(a);o.append(t).append(i);e.append(o);f.append(c).append(e);u.append(f);r.append(u);n.append(r);s.ejRadioButton({checked:!0,change:$.proxy(this.dataChooser,this),text:"Individual",cssClass:"e-designer-radiobtn"});h.ejRadioButton({change:$.proxy(this.dataChooser,this),text:"Group",cssClass:"e-designer-radiobtn"})},n.prototype.renderHeaderElement=function(n,t,i){var f=i==="Values"?"Value(s)":"Row",r=ej.buildTag("div.e-property-row-header e-mid-item e-item-expand","",{width:"100%",height:"25px",display:"block"},{id:this.id+"_legendSetting_element_"+i}),e=ej.buildTag("div.e-header-row-txt",f,{float:"left","font-size":"13px","margin-top":"5px","margin-left":"12px"},{id:this.id+"_header_"+i}),u;r.append(e);u=ej.buildTag("span.e-header-row-icon e-reportdesigner-minus","",{float:"right","margin-top":"-2px"});r.append(u);n.append(r);r.bind("click",$.proxy(this.onExpandCollapseClick,this,i))},n.prototype.onExpandCollapseClick=function(n){this.groupScrollElement.find("#"+this.id+"_legendSetting_element_"+n).hasClass("e-item-expand")?this.collapseCategory(n):this.expandCategory(n);this.scrollerRefresh(this.groupContainer)},n.prototype.expandCategory=function(n){var t=this.groupScrollElement.find("#"+this.id+"_legendSetting_element_"+n);t.addClass("e-item-expand").removeClass("e-item-collapse");t.find(".e-header-row-icon").addClass("e-reportdesigner-minus").removeClass("e-reportdesigner-plus");n==="Values"?this.valuesContainer.css("display","block"):this.rowContainer.css("display","block")},n.prototype.collapseCategory=function(n){var t=this.groupScrollElement.find("#"+this.id+"_legendSetting_element_"+n);t.removeClass("e-item-expand").addClass("e-item-collapse");t.find(".e-header-row-icon").removeClass("e-reportdesigner-minus").addClass("e-reportdesigner-plus");n==="Values"?this.valuesContainer.css("display","none"):this.rowContainer.css("display","none")},n.prototype.renderLegend=function(n,t){var r,f,e,u,i;if(t==="Both"&&this.customLegendInfo.SingleValues.length===0)for(i=0;i<this.customLegendInfo.GroupValues.Series.length;i++)for(r=0;r<this.customLegendInfo.GroupValues.Values.length;r++)f=this.customLegendInfo.GroupValues.Series[i].Name,e=this.customLegendInfo.GroupValues.Values[r].Name,this.customLegendInfo.SingleValues.push({Name:f+"("+e+")",Value:f+"("+e+")",IsModified:!1,Id:"None"});for(u=[],u=t==="Values"?this.customLegendInfo.GroupValues.Values:t==="Row"?this.customLegendInfo.GroupValues.Series:this.customLegendInfo.SingleValues,this.internalCustomLegendInfo=$.extend(!0,{},this.customLegendInfo),i=0;i<u.length;i++)this.renderRowElement(n,u[i],t,i)},n.prototype.renderRowElement=function(n,t,i,r){var f=ej.buildTag("div","",{"margin-top":"10px",display:"inline-block",width:"388px",padding:"0px 10px"},{id:this.id+"_legend_"+i+"_Label"+r}),o=ej.buildTag("div","",{width:"194px",float:"left","margin-left":"3px","margin-top":"8.5px"}),s=ej.buildTag("div.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),e,u;s.text(t.Name);o.append(s);f.append(o);e=ej.buildTag("div","",{display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red","margin-left":"5px"},{id:this.id+"_legend_"+i+"_LabelValue"+r+"_parent"});u=ej.buildTag("input.e-textbox e-designer-content-label","",{width:"170px",height:"25px"},{id:this.id+"_legend_"+i+"_LabelValue"+r,type:"text"});u.val(t.Value);e.append(u);u.bind("blur",$.proxy(this.textFocusOut,this,i,r));u.bind("keyup",$.proxy(this.textKeyUp,this,i,r));f.append(e);n.append(f)},n.prototype.textFocusOut=function(n,t){var i=this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val();this.lastModifiedTextInfo=null;this.onValueChange(n,t,i)},n.prototype.onValueChange=function(n,t,i){n==="Values"?(this.customLegendInfo.GroupValues.Values[t].IsModified=this.internalCustomLegendInfo.GroupValues.Values[t].Name!==i&&i.length>0?!0:!1,i.length>0?this.customLegendInfo.GroupValues.Values[t].Value=i:(this.customLegendInfo.GroupValues.Values[t].Value=this.internalCustomLegendInfo.GroupValues.Values[t].Name,this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val(this.internalCustomLegendInfo.GroupValues.Values[t].Name))):n==="Row"?(this.customLegendInfo.GroupValues.Series[t].IsModified=this.internalCustomLegendInfo.GroupValues.Series[t].Name!==i&&i.length>0?!0:!1,i.length>0?this.customLegendInfo.GroupValues.Series[t].Value=i:(this.customLegendInfo.GroupValues.Series[t].Value=this.internalCustomLegendInfo.GroupValues.Series[t].Name,this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val(this.internalCustomLegendInfo.GroupValues.Series[t].Name))):(this.customLegendInfo.SingleValues[t].IsModified=this.internalCustomLegendInfo.SingleValues[t].Name!==i&&i.length>0?!0:!1,i.length>0?this.customLegendInfo.SingleValues[t].Value=i:(this.customLegendInfo.SingleValues[t].Value=this.internalCustomLegendInfo.SingleValues[t].Name,this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val(this.internalCustomLegendInfo.SingleValues[t].Name)))},n.prototype.textKeyUp=function(n,t,i){var r=this.settingsContainer.find("#"+this.id+"_legend_"+n+"_LabelValue"+t).val();if(i.keyCode===13)this.onValueChange(n,t,r);else this.lastModifiedTextInfo={renderType:n,rowIndex:t,value:r}},n.prototype.groupSwitcher=function(){var n=this.editChooserTag.find("#"+this.id+"_legend_settings_individual"),t=n.data("ejRadioButton").model.checked;t?(this.individualContainer.css("display","block"),this.groupContainer.css("display","none"),this.scrollerRefresh(this.individualContainer)):(this.groupContainer.css("display","block"),this.individualContainer.css("display","none"),this.scrollerRefresh(this.groupContainer),this.formatListBoxObj.setModel({selectedIndex:-1}),this.formatListBoxObj.refresh(!0),this.formatSelectedIndex=2)},n.prototype.dataChooser=function(n){n.isInteraction&&this.groupSwitcher()},n.prototype.disableUpdateButton=function(n){n?this.footerTag.find("#"+this.id+"_legend_settings_ok").css({opacity:"0.5"}).attr("disabled","disabled"):this.footerTag.find("#"+this.id+"_legend_settings_ok").css({opacity:"1"}).removeAttr("disabled")},n.prototype.populateLegendInfo=function(n){if(n.GroupValues.Series.length>0){this.customDiv.css("display","none");this.editDiv.css("display","block");var t=n.Format.length>0?n.Format:"{{:Row}}({{:Value}})";this.formatTextBox.val(t);this.renderLegend(this.rowContainer,"Row");this.renderLegend(this.valuesContainer,"Values");this.renderLegend(this.individualScrollElement,"Both");n.Type==="Individual"?this.editChooserTag.find("#"+this.id+"_legend_settings_individual").data("ejRadioButton").setModel({checked:!0}):this.editChooserTag.find("#"+this.id+"_legend_settings_group").data("ejRadioButton").setModel({checked:!0});this.groupSwitcher()}else this.customDiv.css("display","block"),this.editDiv.css("display","none"),this.renderLegend(this.customValueScrollElement,"Values"),this.scrollerRefresh(this.customValueContainer)},n.prototype.updateSwictherValue=function(){var n=this.editChooserTag.find("#"+this.id+"_legend_settings_individual"),t=n.data("ejRadioButton").model.checked;if(this.customLegendInfo.Type=t?"Individual":"Group",!ej.isNullOrUndefined(this.lastModifiedTextInfo)){this.onValueChange(this.lastModifiedTextInfo.renderType,this.lastModifiedTextInfo.rowIndex,this.lastModifiedTextInfo.value);this.lastModifiedTextInfo=null}return this.customLegendInfo},n.prototype.updateCustomInfo=function(){var n=this.updateSwictherValue();ej.isNullOrUndefined(this.targetInstance)||(ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[n]),this.legendSettingsDialog.data("ejDialog").close())},n.prototype.closeLegendSettings=function(){this.legendSettingsDialog.data("ejDialog").close()},n.prototype.openLegendSettings=function(n,t,i){this.legendSettingsDialog.data("ejDialog").open();this.resetLengendSettings();this.targetInstance=n;this.targetMethod=t;this.customLegendInfo=JSON.parse(JSON.stringify(i));this.populateLegendInfo(this.customLegendInfo)},n.prototype.resetLengendSettings=function(){this.targetInstance=null;this.targetMethod=null;this.customLegendInfo=null;this.internalCustomLegendInfo=null;this.customValueScrollElement.empty();this.individualScrollElement.empty();this.formatSelectedIndex=2;this.formatTextBox.val("{{:Row}}({{:Value}})");this.valuesContainer.empty();this.rowContainer.empty();this.customDiv.css("display","block");this.editDiv.css("display","none")},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_legend_settings"));$("#"+this.id+"_legend_settings").length>0&&$("#"+this.id+"_legend_settings").remove()},n}();window.ej.createObject("ej.DashboardDesignerUtility.CustomLegendSettings",InternalCustomLegendSettings,window);InternalDataConfiguration=function(){function n(){this.id=null;this.dashboardDesigner=null;this.canUpdate=!0;this.supportedTypes=[SummaryType.NONE,SummaryType.SUM,SummaryType.AVG,SummaryType.MIN,SummaryType.MAX,SummaryType.COUNT,SummaryType.VAR,SummaryType.COUNTD];this.selectedDatasetId=null;this.selectedDatasetName=null;this.measuresList=[];this.dimensionsList=[];this.categoryItems=[];this.removeIndex=-1;this.resizeObj={isNoData:!1,isAssign:!1};this.id=ejDashboardDesigner.getInstance("DashboardDesigner")._id;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.toolBarObject=ejDashboardDesigner.getInstance("ToolBar");this.dataConfigRootContainer=ej.buildTag("div.e-reportdesigner-designer-dataassign","",{"background-color":"white",overflow:"hidden"},{id:this.id+"_dataTabRootElement"});this.dataConfigContainer=ej.buildTag("div.e-reportdesigner-designer-dataassign","",{margin:"8px","margin-top":"10px"},{id:this.id+"_dataTabElement"});this.dataConfigRootContainer.append(this.dataConfigContainer);this.dataConfigRootContainer.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-propertyPanel-waitingPopup"});this.ejWaitingPane=this.dataConfigRootContainer.data("ejWaitingPopup");this.renderAlertContainer(this.dataConfigRootContainer)}return Object.defineProperty(n,"DataConfigSource",{get:function(){return ej.isNullOrUndefined(this.dataConfigSource)&&(this.dataConfigSource=new ej.DashboardDesignerUtility.DataConfiguration),this.dataConfigSource},enumerable:!0,configurable:!0}),n.prototype.isLoaded=function(){return!ej.isNullOrUndefined(this.targetTag)},n.prototype.renderContainer=function(n){this.targetTag=n;this.targetTag.append(this.dataConfigRootContainer);var r=$("#"+this.id+"_dataPanelContainer").height()-29,t=ej.buildTag("div","",{width:"214px",float:"left"},{id:this.id+"_datasetFieldsContainer"}),u=ej.buildTag("div","",{width:"1px",border:"0px Solid",height:r+"px","margin-top":"-16px","margin-left":"9px",float:"left","background-color":"#c8c8c8"},{id:this.id+"_dataassignSeperator"}),i=ej.buildTag("div","",{width:"214px",float:"right"},{id:this.id+"_dataassignConfigContainer"});this.dataConfigContainer.append(t);this.dataConfigContainer.append(u);this.dataConfigContainer.append(i);ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length>0&&ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0].attr("isDataEnabled")&&(this.renderDatasetFields(t),this.renderCategoryItems(this.getCategoryItems(),i))},n.prototype.renderAlertContainer=function(n){var f=$("#"+this.id+"_dataPanelContainer").height()-34;this.dataConfigAlertContainer=ej.buildTag("div","",{"background-color":"white",overflow:"hidden",display:"none",height:f+"px",width:"464px","vertical-align":"middle"},{id:this.id+"_dataAlertElement"});var t=ej.buildTag("div","",{}),e=ej.buildTag("div.e-dashboarddesigner-hint-nodata","",{height:"60px"},{}),i=ej.buildTag("div","",{"text-align":"center","padding-bottom":"20px"},{}),o=ej.buildTag("span",this.dashboardDesigner.locale.errorMessage.alertAddDatasourceMessage,{},{}),r=ej.buildTag("div","",{"text-align":"center"},{}),u=ej.buildTag("button.e-designer-content e-designer-button e-designer-dsconnect-btn e-dbrd-hand-cursor",this.dashboardDesigner.locale.dataSource.addDatasourceText,{},{id:this.id+"_data_addDs"});r.append(u);i.append(o);t.append(e).append(i).append(r);this.dataConfigAlertContainer.append(t);u.ejButton({width:"160px",showRoundedCorner:!1,contentType:ej.ContentType.TextOnly,size:"small",click:$.proxy(this.createNewDataSource,this)});n.append(this.dataConfigAlertContainer)},n.prototype.showAlertContainer=function(n){n?(this.dataConfigContainer.css("display","none"),this.dataConfigAlertContainer.css("display","table-cell"),$("#"+this.id+"_propertyTabUl_datasetListContainer").css("display","none")):(this.dataConfigContainer.css("display","block"),this.dataConfigAlertContainer.css("display","none"))},n.prototype.createNewDataSource=function(){var n=ejDashboardDesigner.getInstance("DataConfigurationPanel"),t=n.getPanelItem("DataSource");n.updatePanelDisplay(t.GroupName,t,!1);this.dashboardDesigner.model.features.datasource.create&&ejDashboardDesigner.getInstance("DataSet").switchPanel(PanelList.DataType)},n.prototype.getSelectedCategoryIndex=function(n){for(var t=0;t<this.categoryItems.length;t++)if(!ej.isNullOrUndefined(this.categoryItems[t].DisplayName)&&this.categoryItems[t].DisplayName===n||this.categoryItems[t].Name===n)return t},n.prototype.updateSize=function(){if(this.resizeObj.isNoData=this.resizeObj.isAssign=!0,this.isLoaded()){var n=$("#"+this.id+"_dataPanelContainer").height();this.dataConfigRootContainer.height(n-34+"px");this.updatePanelSize()}},n.prototype.updatePanelSize=function(){if(this.isLoaded())if(this.dataConfigContainer.is(":visible"))this.updateDataSize(),this.resizeObj.isAssign=!1;else if(this.dataConfigAlertContainer.is(":visible")){var n=$("#"+this.id+"_dataPanelContainer").height();this.dataConfigAlertContainer.height(n-34+"px");this.resizeObj.isNoData=!1}},n.prototype.updateDataSize=function(){var t=$("#"+this.id+"_dataPanelContainer").height(),i=t-(parseInt(this.dataConfigContainer.css("margin-top"),10)+parseInt(this.dataConfigContainer.css("margin-bottom"),10)+29),n=this.getDefaultCategoryItems();this.updateCategoryItemHeight(n,i);n=this.getCategoryItems();this.updateCategoryItemHeight(n,i);$("#"+this.id+"_dataassignSeperator").height(t-29)},n.prototype.updateCategoryItemHeight=function(n,t){for(var r,u,f=n.length,i=0;i<n.length;i++)ej.isNullOrUndefined(n[i].Visibility)||n[i].Visibility!==Visibility.hidden||f--;for(i=0;i<n.length;i++)(ej.isNullOrUndefined(n[i].Visibility)||n[i].Visibility!==Visibility.hidden)&&(r=t/f,$("#"+this.id+"_"+n[i].Name+"_categoryItem").height(r),u=$("#"+this.id+"_"+n[i].Name+"_categoryListPanel").data("ejScroller"),ej.isNullOrUndefined(u)||u.setModel({height:r-40+"px"}))},n.prototype.showIndicator=function(){this.ejWaitingPane.show()},n.prototype.hideIndicator=function(){this.ejWaitingPane.hide()},n.prototype.showDataConfig=function(n,t){var r=ejDashboardDesigner.getInstance("DataSet").datasets,i=[];ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length>0&&ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0].attr("isDataEnabled")&&(i=this.getCategoryItems());i.length>0&&(this.validateItems(i)?(this.dataConfigContainer.empty(),$("#"+this.id+"_group_edit_dialog").remove(),n&&this.renderContainer(this.targetTag)):this.resetContainer(i),this.updateDatasetFields(this.selectedDatasetId,this.selectedDatasetName,!1),this.populateContainer(i),ej.DashboardUtil.getInstance().validateAndUpdateParameterColumn());this.showAlertContainer(!(r&&r.length>0));t.isDataAssign?(this.updateSize(),t.isDataAssign=!1):(this.resizeObj.isAssign||this.resizeObj.isNoData)&&this.updatePanelSize();this.hideIndicator()},n.prototype.validateItems=function(n){var t=$("#"+this.id+"_dataassignConfigContainer"),i,r;if(!ej.isNullOrUndefined(t[0])&&t[0].children.length>0&&t[0].children.length===n.length){for(i=0;i<t[0].children.length;i++)if(r=t[0].children[i].id.split("_")[1],n[i].Name!==r)return!0}else return!0;return!1},n.prototype.getCategoryItems=function(){var n=[];return ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length>0&&(n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).getDataCategoriesInfo(),this.categoryItems=n),n},n.prototype.getDefaultCategoryItems=function(){var n=[];return ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length>0&&(n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).getDefaultCategoriesInfo()),n.length===0&&(n=[{Name:"Measures"},{Name:"Dimensions"}]),n},n.prototype.resetContainer=function(n){for(var i,r,t=0;t<n.length;t++)$("#"+this.id+"_"+n[t].Name+"_categoryList").empty(),i=ej.buildTag("div.e-categorylistdiv-emptyfield","",{},{id:this.id+"_"+n[t].Name+"_categorylistdiv_emptyfield"}),r=ej.buildTag("span.e-categorylistdiv-emptyfield e-emptyfield","",{},{}),r.text("Drag & Drop"),i.append(r),$("#"+this.id+"_"+n[t].Name+"_categoryList").append(i)},n.prototype.populateContainer=function(n){for(var i,t=0;t<n.length;t++)ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length>0&&(i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i.Values)||this.populateValues(i.Values,n[t]))},n.prototype.populateValues=function(n,t){for(var u,r,f,i=0;i<n.length;i++)if(u="",n[i].Name===t.Name)for(r=0;r<n[i].Values.length;r++)f=!1,u=this.getAvailableName(),this.addItem({DataId:n[i].Values[r].DataId,TableId:n[i].Values[r].TableId,TableName:n[i].Values[r].TableName,Field:n[i].Values[r].Field,Label:u,DataField:n[i].Values[r].DataField,Name:t.Name,SummaryType:n[i].Values[r].SummaryType,FieldType:n[i].Values[r].FieldType,IsLoading:!0,Values:n[i].Values,ItemIndex:r,IsExpression:f,CategoryType:CategoryType[t.CategoryType],FieldActualType:n[i].Values[r].FieldActualType,DateTimeFormat:n[i].Values[r].DateTimeFormat,UniqueColumnName:n[i].Values[r].UniqueColumnName,IsAggregatedExpression:n[i].Values[r].IsAggregatedExpression},!0,!1)},n.prototype.renderSearchPanel=function(n){var i=ej.buildTag("div","",{width:"107px",height:"16px",float:"right","margin-top":"3px"},{id:this.id+"_"+n+"_searchPanel"}),t=ej.buildTag("input.e-reportdesigner-designer-search-dataassign","",{"border-radius":"5px","padding-left":"5px",color:"lightgrey","font-size":"11px",float:"left",width:"100px",height:"15px",border:"1px solid lightGray"},{id:this.id+"_"+n+"_searchBox"}),r;return t.val("Search"),r=ej.buildTag("div","",{width:"24px",height:"15px","margin-top":"-16px",float:"right",color:"lightgray"},{id:this.id+"_"+n+"_searchIcon","class":"e-icon e-search"}),t.bind("keyup",$.proxy(this.onSearchClick,this,n)),t.bind("blur",$.proxy(this.onSearchBlur,this,n)),t.bind("focus",$.proxy(this.onSearchFocus,this,n)),r.bind("click",$.proxy(this.onSearchCloseClick,this,n)),i.append(t),i.append(r),i},n.prototype.filterItems=function(n,t){var i=[],r,f,u;for(n==="Measures"?i=this.measuresList:n==="Dimensions"&&(i=this.dimensionsList),$("#"+this.id+"_"+n+"_categoryList").empty(),r=0;r<i.length;r++)(t===""||i[r].Name.toLowerCase().indexOf(t.toLocaleLowerCase())!==-1)&&(f=this.createLabel({Name:n,Field:i[r].Name,DataId:i[r].DataId,TableId:i[r].TableId,TableName:i[r].TableName,DataField:i[r].DataField,Aggregate:"",IsExpression:i[r].IsExpression,IsAggregatedExpression:i[r].IsAggregatedExpression},i[r].DatasetIcon,!1,!1,!1,!0),$("#"+this.id+"_"+n+"_categoryList").append(f));u=$("#"+this.id+"_"+n+"_categoryListPanel").data("ejScroller");ej.isNullOrUndefined(u)||u.refresh()},n.prototype.setSearchText=function(n,t){$("#"+this.id+"_"+n+"_searchBox").val(t)},n.prototype.onSearchClick=function(n,t){if(t.keyCode!==13){var r=$("#"+this.id+"_"+n+"_searchBox"),i=r.val();i.length>0?($("#"+this.id+"_"+n+"_searchIcon").addClass("e-close_01").removeClass("e-search"),this.filterItems(n,i)):i.length===0&&(r.val(""),this.filterItems(n,""))}},n.prototype.onSearchBlur=function(n){var t=$("#"+this.id+"_"+n+"_searchBox"),i=t.val();t.removeClass("e-focus");i.length===0&&($("#"+this.id+"_"+n+"_searchIcon").addClass("e-search").removeClass("e-close_01"),t.val("Search"),this.filterItems(n,""),t.css("color","lightgrey"))},n.prototype.onSearchFocus=function(n){var t=$("#"+this.id+"_"+n+"_searchBox");t.addClass("e-focus");t.val()==="Search"&&t.val("");t.css("color","grey")},n.prototype.onSearchCloseClick=function(n){var t=$("#"+this.id+"_"+n+"_searchBox");t.removeClass("e-focus");t.val("Search");t.css("color","lightgrey");this.filterItems(n,"");$("#"+this.id+"_"+n+"_searchIcon").addClass("e-search").removeClass("e-close_01")},n.prototype.renderDatasetFields=function(n){for(var t=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).getDefaultCategoriesInfo(),r=$("#"+this.id+"_dataPanelContainer").height()-(parseInt(this.dataConfigContainer.css("margin-top"),10)+parseInt(this.dataConfigContainer.css("margin-bottom"),10)+29),i=0;i<t.length;i++){var u=ej.buildTag("div.e-reportdesigner-box-sizing","",{height:r/t.length+"px"},{id:this.id+"_"+t[i].Name+"_categoryItem"}),f=ej.buildTag("div","",{},{id:this.id+"_"+t[i].Name+"_categoryLabelDiv"}),o=ej.buildTag("span.e-designer-fontfamily","",{overflow:"hidden","font-size":"13px",display:"inline-block","font-weight":"600",margin:"3px","margin-bottom":"0px",width:"70px"},{id:this.id+"_"+t[i].Name+"_categoryLabel"});o.text(t[i].Name);f.append(o);f.append(this.renderSearchPanel(t[i].Name));var e=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{display:"block",position:"relative",width:"100%",border:"1px solid #c8c8c8","border-radius":"5px","margin-top":"5px","background-color":"white",height:r/t.length-40+"px"},{id:this.id+"_"+t[i].Name+"_categoryListPanel"}),s=ej.buildTag("div","",{},{}),h=ej.buildTag("div","",{height:"auto"},{id:this.id+"_"+t[i].Name+"_categoryList"});s.append(h);e.append(s);u.append(f);u.append(e);n.append(u);e.ejScroller({scrollerSize:9,enableTouchScroll:!1,autoHide:!0,buttonSize:14,height:r/t.length-40})}},n.prototype.renderCategoryItems=function(n,t){for(var i,f=$("#"+this.id+"_dataPanelContainer").height()-(parseInt(this.dataConfigContainer.css("margin-top"),10)+parseInt(this.dataConfigContainer.css("margin-bottom"),10)+29),r=n.length,u=0;u<n.length;u++)ej.isNullOrUndefined(n[u].Visibility)||n[u].Visibility!==Visibility.hidden||r--;for(i=0;i<n.length;i++)if(ej.isNullOrUndefined(n[i].Visibility)||n[i].Visibility!==Visibility.hidden){var e=ej.buildTag("div.e-reportdesigner-box-sizing","",{height:f/r+"px"},{id:this.id+"_"+n[i].Name+"_categoryItem"}),c=ej.buildTag("div","",{},{id:this.id+"_"+n[i].Name+"_categoryLabelDiv"}),o=ej.buildTag("span.e-designer-fontfamily","",{overflow:"hidden","font-size":"13px",display:"inline-block","font-weight":"600",margin:"3px","margin-bottom":"0px",width:"202px"},{id:this.id+"_"+n[i].Name+"_categoryLabel"});ej.isNullOrUndefined(n[i].DisplayName)?o.text(n[i].Name):o.text(n[i].DisplayName);c.append(o);var s=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{display:"block",position:"relative",width:"100%",border:"1px solid #c8c8c8","border-radius":"5px","margin-top":"5px","background-color":"white",height:f/r-40+"px"},{id:this.id+"_"+n[i].Name+"_categoryListPanel"}),l=ej.buildTag("div","",{},{}),h=ej.buildTag("div.e-dbrd-rendercolumn-container","",{height:"auto"},{id:this.id+"_"+n[i].Name+"_categoryList",category:n[i].Name,categorytype:CategoryType[n[i].CategoryType],categorycount:n[i].CategoryCount}),a=ej.buildTag("div.e-categorylistdiv-emptyfield","",{},{id:this.id+"_"+n[i].Name+"_categorylistdiv_emptyfield"}),v=ej.buildTag("span.e-categorylistdiv-emptyfield e-emptyfield","",{},{});v.text("Drag & Drop");a.append(v);h.append(a);h.bind(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.listMouseMove,this,n[i].Name));e.append(c);l.append(h);s.append(l);e.append(s);t.append(e);s.ejScroller({scrollerSize:9,enableTouchScroll:!1,autoHide:!0,buttonSize:14,height:f/r-40})}},n.prototype.getPosition=function(n,t){var i=0;return t[n]?i=t[n]:t.originalEvent&&t.originalEvent.targetTouches&&t.originalEvent.targetTouches.length>0?i=t.originalEvent.targetTouches[0][n]:t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length>0&&(i=t.originalEvent.changedTouches[0][n]),i},n.prototype.listMouseMove=function(n,t){var u=this.getPosition("pageY",t),i=$("#"+this.id+"_"+n+"_categoryList"),r;this.dashboardDesigner.isItemDrag&&(i[0].clientHeight<=u-i[0].offsetTop+30?(r=i.scrollTop(),i.scrollTop(r+15)):i[0].offsetTop>=u-8&&(r=i.scrollTop(),i.scrollTop(r-15)))},n.prototype.validateMenuDisable=function(n){var u=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),r=u.dataGroupInfo,i={},t;if(!ej.isNullOrUndefined(r))for(t=0;t<r.Values.length;t++)r.Values[t].Name===n.Name&&(i=r.Values[t].Values);for(t=0;t<i.length;t++)i[t].Field===n.Field&&(i[t].FilterInfo===null?(this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearMeasureFilter),this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearDimensionFilter),this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDateOptions),this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDates)):(ej.isNullOrUndefined(i[t].FilterInfo.MeasureFilterInfo)?this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearMeasureFilter):this.enableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearMeasureFilter),ej.isNullOrUndefined(i[t].FilterInfo.DimensionFilterInfo)?this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearDimensionFilter):this.enableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearDimensionFilter),ej.isNullOrUndefined(i[t].FilterInfo.RelativeDateFilterInfo)?this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDates):this.enableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDates),ej.isNullOrUndefined(i[t].FilterInfo.RelativeDateOptions)?this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDateOptions):this.enableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDateOptions)));u.controlType!=="DatePicker"||this.validateFilterWidgetDateColumn(n)||(u.datepickerJson.Type===DatePickerType.Range?this.enableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.relativeDateOptions):this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.relativeDateOptions))},n.prototype.validateFilterWidgetDateColumn=function(n){var r=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,i={},t;if(!ej.isNullOrUndefined(r))for(t=0;t<r.Values.length;t++)r.Values[t].Name===n.Name&&(i=r.Values[t].Values);for(t=0;t<i.length;t++)if(i[t].Field===n.Field&&i[t].FilterInfo!==null&&!ej.isNullOrUndefined(i[t].FilterInfo.RelativeDateOptions))return!0;return!1},n.prototype.disableMenuItem=function(n,t){var i="#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label),r=$(i+" li a.e-fieldmenuListName[fieldmenuname ='"+t+"']");r.length>0&&$(i).ejMenu("disableItemByID",r.closest("li")[0].id)},n.prototype.enableMenuItem=function(n,t){var i="#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label),r=$(i+" li a.e-fieldmenuListName[fieldmenuname ='"+t+"']");r.length>0&&$(i).ejMenu("enableItemByID",r.closest("li")[0].id)},n.prototype.onSettingsClick=function(n,t){var u=$("#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)),s=this.EnableFormatOption(n),e,r,i,o,f;s?this.enableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormat):this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormat);e=$("#"+this.id+"_"+n.Name+"_categoryListSettingsIcon_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)).offset();r=u.data("ejMenu");u.is(":visible")?r.hide():u.children().length>0&&(i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),i.controlType==="DatePicker"||i.controlType==="ComboBox"||i.controlType==="ListBox"?r=this.validateRelativeDate(i.controlType,n,r):i.controlType==="Chart"&&(i.chartJson.ChartType==="Pie"||i.chartJson.ChartType==="Doughnut"||i.chartJson.ChartType==="Pyramid"||i.chartJson.ChartType==="Funnel")&&n.CategoryType==="Non_Numeric"&&(r=this.CreateChartMenuItem(i,n,r)),this.validateMenuDisable(n),o=$("#"+this.id+"_"+n.Name+"_categoryListSettingsIcon_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)),f=this.calculateMenuPosition(o,e,u),r.show(f.left,f.top,$("#"+this.id+"_"+n.Name+"_categoryListDiv_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)),t))},n.prototype.CreateChartMenuItem=function(n,t){var r=this.validateFilterInfo(t),i;return $("#"+this.id+"_"+t.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(t.Label)?t.Values[t.ItemIndex].Label:t.Label)).remove(),n.dataGroupInfo.Values[0].Values.length>0&&r?this.createMenu(t,[],!0):this.createMenu(t,[],null),i=$("#"+this.id+"_"+t.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(t.Label)?t.Values[t.ItemIndex].Label:t.Label)),i.data("ejMenu")},n.prototype.validateFilterInfo=function(n){var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,r={},t;if(!ej.isNullOrUndefined(i))for(t=0;t<i.Values.length;t++)i.Values[t].Name===n.Name&&(r=i.Values[t].Values);for(t=0;t<r.length;t++)if(r[t].Field===n.Field&&r[t].FilterInfo!==null)return!0;return!1},n.prototype.validateRelativeDate=function(n,t,i){var u,r;if(n==="DatePicker")if(this.validateFilterWidgetDateColumn(t))$("#"+this.id+"_"+t.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(t.Label)?t.Values[t.ItemIndex].Label:t.Label)).remove(),this.createMenu(t,[],!0),r=$("#"+this.id+"_"+t.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(t.Label)?t.Values[t.ItemIndex].Label:t.Label)),i=r.data("ejMenu"),this.updateRelativeDateCheck(t,i.element,!0);else for(r=$("#"+this.id+"_"+t.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(t.Label)?t.Values[t.ItemIndex].Label:t.Label)).find("li"),u=0;u<r.length;u++)$(r[u]).find("a").attr("fieldmenuname").toLowerCase()==="clearrelativedate"&&(this.updateRelativeDateCheck(t,i.element,!1),this.disableMenuItem(t,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDates)),$(r[u]).find("a").attr("fieldmenuname").toLowerCase()==="clearrelativedateoptions"&&(this.updateRelativeDateCheck(t,i.element,!1),this.disableMenuItem(t,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDateOptions));else(n==="ComboBox"||n==="ListBox")&&this.validateFilterWidgetDateColumn(t)&&($("#"+this.id+"_"+t.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(t.Label)?t.Values[t.ItemIndex].Label:t.Label)).remove(),this.createMenu(t,[],null),r=$("#"+this.id+"_"+t.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(t.Label)?t.Values[t.ItemIndex].Label:t.Label)),i=r.data("ejMenu"),this.updateRelativeDateCheck(t,i.element,!0));return i},n.prototype.calculateMenuPosition=function(n,t,i){var c=n.height()+3,l=n.width(),a=this.dataConfigRootContainer.height(),u=this.dataConfigRootContainer.offset(),f=window.innerHeight-t.top,s=t.top-u.top,r=i.height()+parseInt(i.css("padding-top"),10)+parseInt(i.css("padding-bottom"),10)+parseInt(i.css("border-top-width"),10)+parseInt(i.css("border-bottom-width"),10),v=r>f,e=0,o=0,h;return v?(h=f>s,e=h?f<r?a+u.top-r:t.top:s<r?u.top:t.top-r,o=t.left-(l+143)):(e=t.top+c,o=t.left-136),{left:o,top:e}},n.prototype.removeItem=function(n,t,i,r){var s,p,e,c,l,a,v,y,u;$("#"+this.id+"_"+n.Name+"_categoryListDiv_"+n.Label).remove();var h=ej.isNullOrUndefined(n.id)?ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]:this.dashboardDesigner.element.find("#"+n.id),f=ej.DashboardUtil.getWidgetInstance(h).dataGroupInfo,o={};if(!ej.isNullOrUndefined(f))for(u=0;u<f.Values.length;u++)f.Values[u].Name===n.Name&&(o=f.Values[u].Values);if(this.removeIndex=-1,!ej.isNullOrUndefined(o))for(s=0;s<o.length;s++)if(o[s].UniqueColumnName===n.UniqueColumnName){this.removeIndex=s;break}for(e=0;e<this.categoryItems.length;e++)this.categoryItems[e].Name===n.Name&&(ej.isNullOrUndefined(this.categoryItems[e].CategoryCount)||(p=parseInt(this.categoryItems[e].CategoryCount,10)));for(!ej.isNullOrUndefined(r)&&r||ej.isNullOrUndefined(p)||$("#"+this.id+"_"+n.Name+"_categorylistdiv_emptyfield").length!==0||(c=ej.buildTag("div.e-categorylistdiv-emptyfield","",{},{id:this.id+"_"+n.Name+"_categorylistdiv_emptyfield"}),l=ej.buildTag("span.e-categorylistdiv-emptyfield e-emptyfield","",{},{}),l.text("Drag & Drop"),c.append(l),$("#"+this.id+"_"+n.Name+"_categoryList").append(c)),n.Values=JSON.parse(JSON.stringify(o)),n.ItemIndex=this.removeIndex,a=$("#"+this.id+"_"+n.Name+"_categoryListPanel").data("ejScroller"),ej.isNullOrUndefined(a)||a.refresh(),!ej.isNullOrUndefined(r)&&r||n.IsLoading||(v=$.extend(!0,{},n),v.id=$(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).attr("id"),ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataAssignDelete,"addItem","DataConfiguration",h.attr("id"),[v,t,i,r],[])),y=!1,u=0;u<f.Values.length;u++)f.Values[u].Name===n.Name&&(f.Values[u].Values.splice(this.removeIndex,1),y=!0);ej.DashboardUtil.getWidgetInstance(h).updateDataGroupInfo(f,{update:!0,columnUpdate:!1,rowUpdate:!1,valueUpdate:y});(ej.isNullOrUndefined(r)||!r)&&this.postDraggedFields(h);this.toolBarObject.updateFilterCondition()},n.prototype.onCloseClick=function(n,t,i){this.removeItem({Name:n.Name,Field:n.Field,SummaryType:n.SummaryType,DateTimeFormat:n.DateTimeFormat,Label:n.Label,IsLoading:!1,Values:[],UniqueColumnName:n.UniqueColumnName},t,i)},n.prototype.onSettingsMenuItemClick=function(n,t){for(var g,o,r,nt,y,p,l,a,b,k,c,w,f,s,i,tt=this,d=!0,v=0;v<this.categoryItems.length;v++)this.categoryItems[v].Name!==n.Name||ej.isNullOrUndefined(this.categoryItems[v].MenuInfo)||(ej.DashboardUtil.invokeMethod(this.categoryItems[v].MenuInfo.CallBackInstance,this.categoryItems[v].MenuInfo.CallBackMethod,[n,t]),d=!1);var e=$("#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)).find(".e-mhover"),u=e.closest("li").children("a").attr("fieldmenuname"),h=!0;if(!ej.isNullOrUndefined(e)&&u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.more&&d){if(g=$("#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)).data("ejMenu"),g.hide(),o=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,r={},!ej.isNullOrUndefined(o))for(i=0;i<o.Values.length;i++)o.Values[i].Name===n.Name&&(r=o.Values[i].Values);if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.Sort){for(h=!1,i=0;i<r.length;i++)if(r[i].UniqueColumnName===n.UniqueColumnName){nt=ejDashboardDesigner.getInstance("SortDialog");ej.isNullOrUndefined(r[i].CustomSorting)&&(r[i].CustomSorting=this.createCustomSorting());r[0].CategoryName=n.Name;nt.openSortDialog(this,"updateSortInfo",r[i],$(e));break}}else if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.editDimensionFilter){for(h=!1,i=0;i<r.length;i++)if(r[i].UniqueColumnName===n.UniqueColumnName){this.setDimensionFilters({grpInfo:r[i],item:n});break}}else if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.editMeasureFilter){for(h=!1,i=0;i<r.length;i++)if(r[i].UniqueColumnName===n.UniqueColumnName){y=void 0;y=r[i].FilterInfo==null||ej.isNullOrUndefined(r[i].FilterInfo.MeasureFilterInfo)?this.createMeasureFilter():r[i].FilterInfo.MeasureFilterInfo;y.UniqueColumnName=n.UniqueColumnName;ejDashboardDesigner.getInstance("MeasureFilter").openMeasureFilter(this,"measureFilterAction",n.UniqueColumnName,n.Field,y,!1);break}}else if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.clearMeasureFilter)for(i=0;i<r.length;i++)r[i].UniqueColumnName===n.UniqueColumnName&&(r[i].FilterInfo=null,r[i].IsShowAllRecords=!0);else if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.clearDimensionFilter||u===this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDates){for(i=0;i<r.length;i++)r[i].UniqueColumnName===n.UniqueColumnName&&(r[i].FilterInfo.DimensionFilterInfo=null,ej.isNullOrUndefined(r[i].FilterInfo.RelativeDateFilterInfo)||(r[i].FilterInfo.RelativeDateFilterInfo=null),r[i].IsShowAllRecords=!0);for(c=$("#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)).find("li"),i=0;i<c.length;i++)$(c[i]).find("a").attr("fieldmenuname").toLowerCase()==="clearrelativedate"&&(this.updateFilterItemCheck(n,$(e)),this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDates)),$(c[i]).find("a").attr("fieldmenuname").toLowerCase()==="cleardimensionfilter"&&(this.updateFilterItemCheck(n,$(e)),this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearDimensionFilter))}else if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormat){for(h=!1,i=0;i<r.length;i++)if(r[i].UniqueColumnName===n.UniqueColumnName){p=void 0;r[i].MeasureFormatting!=null?(l=r[i].MeasureFormatting,p={formatProperties:{Culture:l.Culture,DecimalPoints:l.DecimalPoints,FormatType:l.FormatType,Prefix:l.Prefix,Suffix:l.Suffix,Unit:l.Unit}}):p={formatProperties:{Culture:"en-US",DecimalPoints:2,FormatType:"Number",Prefix:"",Suffix:"",Unit:"Ones"}};ejDashboardDesigner.getInstance("FormatDialog").openFormatDialog(p,function(t){var f=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),r=f.dataGroupInfo,i,u;if(r.Values.length>=1)for(i=0;i<r.Values.length;i++)for(u=0;u<r.Values[i].Values.length;u++)r.Values[i].Values[u].UniqueColumnName===n.UniqueColumnName&&(r.Values[i].Values[u].MeasureFormatting=t.formatProperties);tt.postDraggedFields()});break}}else if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.editRelativeDate){for(h=!1,i=0;i<r.length;i++)if(r[i].UniqueColumnName===n.UniqueColumnName){a=void 0;r[i].FilterInfo==null||ej.isNullOrUndefined(r[i].FilterInfo.RelativeDateFilterInfo)?(a=ejDashboardDesigner.getInstance("RelativeDateFilter").createDateFilterInfo(),a.ColumnId=r[i].DataField,a.ColumnName=r[i].DataId):a=r[i].FilterInfo.RelativeDateFilterInfo;a.UniqueColumnName=n.UniqueColumnName;ejDashboardDesigner.getInstance("RelativeDateFilter").openRelativeDateFilter(this,"relativeDateFilterAction",a,{item:n,element:$(e)});break}}else if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.editRelativeDateOptions){for(h=!1,i=0;i<r.length;i++)if(r[i].UniqueColumnName===n.UniqueColumnName){b=void 0;k=void 0;b=r[i].FilterInfo==null||ej.isNullOrUndefined(r[i].FilterInfo.RelativeDateOptions)?ejDashboardDesigner.getInstance("RelativeDates").createRelativeInfo():r[i].FilterInfo.RelativeDateOptions;k=$.extend([],!0,b);ejDashboardDesigner.getInstance("RelativeDates").openRelativeDatesDialog(this,"relativeDateOptionsAction",k);break}}else if(u===this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDateOptions){for(h=!1,i=0;i<r.length;i++)if(r[i].UniqueColumnName===n.UniqueColumnName){if(r[i].FilterInfo!=null&&r[i].FilterInfo.RelativeDateOptions!==null)for(r[i].FilterInfo.RelativeDateOptions=null,c=$("#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)).find("li"),w=0;w<c.length;w++)$(c[w]).find("a").attr("fieldmenuname").toLowerCase()==="clearrelativedateoptions"&&(this.updateRelativeDateCheck(n,$(e),!1),this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDateOptions),this.disableMenuItem(n,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearDimensionFilter),ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).updateRangeList(),ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).clearFilter());break}}else if(this.supportedTypes.indexOf(t.text)!==-1&&u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormat&&u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFilter){if(!ej.isNullOrUndefined(r))for(f=0;f<r.length;f++)if(r[f].UniqueColumnName===n.UniqueColumnName){this.updateSummaryMenuListIcon(n,e);s=$(e).find("a.e-fieldmenuListName").attr("fieldMenuName");r[f].Value=s+"("+n.Field+")";r[f].SummaryType=ej.DashboardDesignerUtility.Serialization.getSummaryType(s);$("#"+this.id+"_"+n.Name+"_categoryListLabel_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)).text(this.getSummaryTypeLocalizedText(r[f].SummaryType.toString())+"("+n.Field+")");break}}else if(u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormat&&u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFilter&&u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.relativeDateOptions&&u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.relativeDateFilter&&u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.dimensionFilter&&!ej.isNullOrUndefined(r)&&u!==this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormat)for(f=0;f<r.length;f++)r[f].UniqueColumnName===n.UniqueColumnName&&t.text!==r[f].DateTimeFormat&&(r[f].FilterInfo=null,r[f].IsShowAllRecords=!0,this.updateSummaryMenuListIcon(n,e),s=$(e).find("a.e-fieldmenuListName").attr("fieldMenuName"),r[f].Value=t.text===this.dashboardDesigner.locale.dataConfigurationMenuItems.none?n.Field:DateAndTimeFormat[s]+"("+n.Field+")",DateAndTimeFormat[s]&&(r[f].DateTimeFormat=DateAndTimeFormat[s],n.DateTimeFormat=DateAndTimeFormat[s]),$("#"+this.id+"_"+n.Name+"_categoryListLabel_"+(ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label)).text(t.text===this.dashboardDesigner.locale.dataConfigurationMenuItems.none?n.Field:DateAndTimeFormat[s]+"("+n.Field+")"));for(i=0;i<o.Values.length;i++)o.Values[i].Name===n.Name&&(o.Values[i].Values=r);ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).updateDataGroupInfo(o,{update:!0,columnUpdate:!1,rowUpdate:!1,valueUpdate:!1});h&&this.postDraggedFields()}},n.prototype.updateSortingItemCheck=function(n,t){this.addMenuListIcon(n,t[0])},n.prototype.updateFilterItemCheck=function(n,t){t.closest("ul").closest("li").find("span.e-filtermenu").length>0?t.closest("ul").closest("li").find("span.e-filtermenu").removeClass("e-dashboardtick-icon e-filtermenu"):t.closest("ul").closest("li").find("span.e-relativefiltermenu").length>0&&t.closest("ul").closest("li").find("span.e-relativefiltermenu").removeClass("e-dashboardtick-icon e-relativefiltermenu")},n.prototype.updateRelativeDateCheck=function(n,t,i){var r=t.closest("ul").find("span.e-dbd-menu-relative-dateoptions");r.removeClass("e-dashboardtick-icon");r.removeClass("e-selectedfieldmenu");i&&(r.addClass("e-dashboardtick-icon"),r.addClass("e-selectedfieldmenu"))},n.prototype.addMenuListIcon=function(n,t){var i=$(t).find("span.e-fieldmenuListIcon");i.addClass("e-dashboardtick-icon");i.addClass("e-selectedfieldmenu")},n.prototype.updateSummaryMenuListIcon=function(n,t){var r=$(t).find("span.e-fieldmenuListIcon"),u=$("#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+n.Label).find(".e-summaryselectedfieldmenu"),i;u.removeClass("e-dashboardtick-icon");u.removeClass("e-summaryselectedfieldmenu");r.addClass("e-dashboardtick-icon");r.addClass("e-summaryselectedfieldmenu");i=$(t).closest("ul.e-designer-menu").find("span.e-filtermenu");i.removeClass("e-dashboardtick-icon");i.removeClass("e-filtermenu")},n.prototype.relativeDateFilterAction=function(n,t){var i,u,f,e,r,o;if(this.addMenuListIcon(t.item,t.element),i=t.item,u=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,u.Values.length>=1)for(f=0;f<u.Values.length;f++)for(e=0;e<u.Values[f].Values.length;e++)r=u.Values[f].Values[e],r.UniqueColumnName===i.UniqueColumnName&&(ej.isNullOrUndefined(r.FilterInfo)?(o=new FilterInfo,o.RelativeDateFilterInfo=n,r.FilterInfo=o):(r.FilterInfo.DimensionFilterInfo=null,r.FilterInfo.RelativeDateFilterInfo=n));ej.isNullOrUndefined(n)||($("#"+this.id+"_"+i.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(i.Label)?i.Values[i.ItemIndex].Label:i.Label)).remove(),this.createMenu(i,[],!0),this.disableMenuItem(i,this.dashboardDesigner.locale.dataConfigurationMenuItems.clearDimensionFilter),ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo.IsShowAllRecords=!1);this.postDraggedFields()},n.prototype.relativeDateOptionsAction=function(n){var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,f={RelativeDateOptions:n},t,r,u;if(i.Values.length>=1)for(t=0;t<i.Values.length;t++)for(r=0;r<i.Values[t].Values.length;r++)u=null,f.RelativeDateOptions.length===0?i.Values[t].Values[r].FilterInfo=u:f.RelativeDateOptions.length>=1&&i.Values[t].Values[r].UniqueColumnName&&(u=f,i.Values[t].Values[r].FilterInfo=u);this.postDraggedFields()},n.prototype.measureFilterAction=function(n){for(var o,s,u,i,f,r=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,e=new MeasureCondition,t=0;t<n.Values.length;t++)o=n.Values[t],e.Values.push(o);if(s={ColumnName:n.ColumnName,UniqueColumnName:n.UniqueColumnName,Conditions:n.Conditions,Values:e.Values},u={MeasureFilterInfo:s},r.Values.length>=1)for(i=0;i<r.Values.length;i++)for(t=0;t<r.Values[i].Values.length;t++)f=null,r.Values[i].Values[t].UniqueColumnName===n.UniqueColumnName&&(f=u.MeasureFilterInfo.Values.length!==0?u:null,r.Values[i].Values[t].FilterInfo=f);this.postDraggedFields()},n.prototype.createMeasureFilter=function(){return{Conditions:"Equals",Values:[]}},n.prototype.createCustomSorting=function(){return{CustomSortType:CustomSortType.Alphabetic,CustomSortOrder:CustomSortOrder.Ascending,ManualOrderList:[],FieldId:"",FieldName:"",SummaryType:SummaryType.SUM}},n.prototype.getCategoryLabel=function(n,t){return $("#"+this.id+"_"+n+"_categoryListLabel_"+t)},n.prototype.getCategoryList=function(n){return $("#"+this.id+"_"+n+"_categoryList")},n.prototype.getCategories=function(){return this.categoryItems},n.prototype.getNumericDimensionMenuItems=function(){return[{Name:"Count",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.count},{Name:"Distinct Count",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.distinctCount,EnableSeperator:!0},{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFilter,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFilterDisplayName,EnableSeperator:!0,Icon:"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-reportdesigner-configuration-parameters",Items:this.getSubMeasureFilterItems()},{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormat,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormatDisplayName}]},n.prototype.getNumericMenuItems=function(n){var t=[],i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);return i.controlType!=="Grid"||n.IsAggregatedExpression||t.push({Name:"None",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.none}),n.IsAggregatedExpression||t.push({Name:"Sum",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.sum},{Name:"Count",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.count},{Name:"Avg",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.average},{Name:"Max",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.maximum},{Name:"Min",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.minimum},{Name:"Distinct Count",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.distinctCount},{Name:"Var",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.variable,EnableSeperator:!0}),t.push({Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFilter,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFilterDisplayName,EnableSeperator:!0,Icon:"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic e-reportdesigner-configuration-parameters",Items:this.getSubMeasureFilterItems()}),i.controlType!==ControlType.HeatMap&&t.push({Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormat,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormatDisplayName}),t},n.prototype.EnableFormatOption=function(n){var i=!0,t=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);return t.controlType!=="Card"||n.Name!=="TargetValue"||ej.isNullOrUndefined(t.dataGroupInfo.Values[0])?t.controlType==="Chart"&&n.Name==="YValue"&&(t.chartJson.ChartType===ChartTypes.PercentStackedBar||t.chartJson.ChartType===ChartTypes.PercentStackedColumn||t.chartJson.ChartType===ChartTypes.PercentStackedArea)?i=!1:t.controlType==="RadialGauge"&&(i=n.Name==="TargetValue"&&!ej.isNullOrUndefined(t.dataGroupInfo.Values[0])&&t.dataGroupInfo.Values[0].Values.length>0||n.Name==="StartValue"||n.Name==="EndValue"?!1:!0):i=t.dataGroupInfo.Values[0].Values.length===0,i},n.prototype.getSubMeasureFilterItems=function(){return[{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.editMeasureFilter,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.edit,Icon:"e-icon e-widgeticon e-reportdesigner-parameter-edit"},{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.clearMeasureFilter,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.clear,Icon:"e-headericon e-reportdesigner-close e-reportdesigner-errorLog"}]},n.prototype.getSubDimesionFilterItems=function(){return[{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.editDimensionFilter,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.edit,Icon:"e-icon e-widgeticon e-reportdesigner-parameter-edit"},{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.clearDimensionFilter,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.clear,Icon:"e-headericon e-reportdesigner-close e-reportdesigner-errorLog"}]},n.prototype.getSubRelativeDateFilterItems=function(){return[{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.editRelativeDate,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.edit,Icon:"e-icon e-widgeticon e-reportdesigner-parameter-edit"},{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDates,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.clear,Icon:"e-headericon e-reportdesigner-close e-reportdesigner-errorLog"}]},n.prototype.getSubRelativeDateOptionsItems=function(){return[{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.editRelativeDateOptions,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.edit,Icon:"e-icon e-widgeticon e-reportdesigner-parameter-edit"},{Name:this.dashboardDesigner.locale.dataConfigurationMenuItems.clearRelativeDateOptions,DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.clear,Icon:"e-headericon e-reportdesigner-close e-reportdesigner-errorLog"}]},n.prototype.getSubDateTimeItems=function(){return[{Name:"Time",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.time},{Name:"Hour",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.hours},{Name:"Minute",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.minutes},{Name:"Second",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.seconds,EnableSeperator:!0},{Name:"QuarterYear",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.quarterYear},{Name:"MonthYear",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.monthYear},{Name:"WeekYear",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.weekYear,EnableSeperator:!0},{Name:"DateHour",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.dateHour},{Name:"DayOfWeek",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.dayOfWeek},{Name:"WeekOfYear",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.weekOfYear,EnableSeperator:!0},{Name:"DayMonthYear",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.dayMonthYear},{Name:"MonthDayYear",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.monthDayYear}]},n.prototype.getNon_NumericMenuItems=function(n){var i=[],t=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),r,u;return t.controlType!==ControlType.DatePicker&&t.controlType!==ControlType.RangeSlider&&t.controlType!==ControlType.TreeMap&&t.controlType!==ControlType.BubbleMap&&t.controlType!==ControlType.ChoroplethMap&&i.push({Name:"Sort",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.SortDispalyName,EnableSeperator:!0}),t.controlType!==ControlType.DatePicker&&t.controlType!==ControlType.RangeSlider?n.FieldActualType==="e-reportdesigner-dataset-datetime"&&(r=[{Name:"Default",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.dateTime},{Name:"Date",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.date}],u=[{Name:"Year",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.year},{Name:"Quarter",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.quarter},{Name:"Month",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.month},{Name:"Day",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.day},{Name:"More",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.more,EnableSeperator:!0,Items:this.getSubDateTimeItems()}],r=r.concat(u),i=i.concat(r)):t.controlType==="RangeSlider"&&n.DateTimeFormat!==SummaryType.NONE?i.push({Name:"Year",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.year},{Name:"Date",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.date}):t.controlType==="RangeSlider"&&n.DateTimeFormat===SummaryType.NONE&&i.push({Name:"MeasureFormat",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.measureFormatDisplayName}),t.controlType!=="RangeSlider"&&i.push({Name:"DimensionFilters",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.dimensionFilterDisplayName,Items:this.getSubDimesionFilterItems()}),n.FieldActualType==="e-reportdesigner-dataset-datetime"&&t.controlType!=="RangeSlider"&&t.controlType!=="DatePicker"&&t.controlType!=="ComboBox"&&t.controlType!=="ListBox"&&i.push({Name:"RelativeDateFilter",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.relativeDateFilterDisplayName,Items:this.getSubRelativeDateFilterItems()}),n.FieldActualType==="e-reportdesigner-dataset-datetime"&&t.controlType==="DatePicker"&&i.push({Name:"RelativeDateOptions",DisplayName:this.dashboardDesigner.locale.dataConfigurationMenuItems.relativeDateOptionsDisplayName,Items:this.getSubRelativeDateOptionsItems()}),i},n.prototype.validateDefaultCategories=function(n){for(var i={enableMeasures:!1,enableDimensions:!1,supportedTypes:[]},t=0;t<n.length;t++)n[t].Name==="Measures"?i.enableMeasures=!0:n[t].Name==="Dimensions"&&(i.enableDimensions=!0,i.supportedTypes=n[t].SupportedTypes);return i},n.prototype.resetDataGroupInfo=function(n,t,i){var f=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),e=!1,r=f.dataGroupInfo,u;if(r.Values.length>0)for(u=0;u<r.Values.length;u++)r.DatasetId!==t&&(r.Values[u].Values=[],e=!0);e&&(r.DatasetId=t,r.DatasetName=i,f.updateDataGroupInfo(r,{update:!0,columnUpdate:!0,rowUpdate:!0,valueUpdate:!0}),this.postDraggedFields())},n.prototype.updateDatasetFields=function(n,t,i){var y,o,u,r,f,e,h,c,l;for($("#"+this.id+"_Measures_categoryItem").remove(),$("#"+this.id+"_Dimensions_categoryItem").remove(),this.renderDatasetFields($("#"+this.id+"_datasetFieldsContainer")),i&&(this.resetContainer(this.getCategoryItems()),this.resetDataGroupInfo(this.getCategoryItems(),n,t)),y=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).getDefaultCategoriesInfo(),o=this.validateDefaultCategories(y),this.selectedDatasetId=n,this.selectedDatasetName=t,this.measuresList=[],this.dimensionsList=[],u=ejDashboardDesigner.getInstance("DataSet").datasets,r=0;r<u.length;r++)if(u[r].Id===n)for(f=0;f<u[r].Fields.length;f++)e=ej.DashboardUtil.getDatasetTypeIcon(u[r].Fields[f].TypeName),e==="e-reportdesigner-dataset-number"&&o.enableMeasures?(h=this.createLabel({Name:"Measures",DataId:u[r].Fields[f].Id,TableId:u[r].Fields[f].TableId,TableName:u[r].Fields[f].TableName,DataField:u[r].Fields[f].DataField,Field:u[r].Fields[f].Name,Aggregate:"",IsExpression:u[r].Fields[f].IsExpression,IsAggregatedExpression:u[r].Fields[f].IsAggregatedExpression,UniqueColumnName:u[r].Fields[f].UniqueColumnName},e,!1,!1,!1,!0),$("#"+this.id+"_Measures_categoryList").append(h),this.measuresList.push({Name:u[r].Fields[f].Name,DatasetIcon:e,DataId:u[r].Fields[f].Id,TableId:u[r].Fields[f].TableId,TableName:u[r].Fields[f].TableName,DataField:u[r].Fields[f].DataField,UniqueColumnName:u[r].Fields[f].UniqueColumnName,IsExpression:u[r].Fields[f].IsExpression,IsAggregatedExpression:u[r].Fields[f].IsAggregatedExpression})):o.enableDimensions&&e!=="e-reportdesigner-dataset-number"&&(ej.isNullOrUndefined(o.supportedTypes)||o.supportedTypes.indexOf(e)!==-1)&&(h=this.createLabel({Name:"Dimensions",DataId:u[r].Fields[f].Id,TableId:u[r].Fields[f].TableId,TableName:u[r].Fields[f].TableName,DataField:u[r].Fields[f].DataField,Field:u[r].Fields[f].Name,Aggregate:"",IsExpression:u[r].Fields[f].IsExpression,IsAggregatedExpression:u[r].Fields[f].IsAggregatedExpression,UniqueColumnName:u[r].Fields[f].UniqueColumnName},e,!1,!1,!1,!0),$("#"+this.id+"_Dimensions_categoryList").append(h),this.dimensionsList.push({Name:u[r].Fields[f].Name,DatasetIcon:e,DataId:u[r].Fields[f].Id,TableId:u[r].Fields[f].TableId,TableName:u[r].Fields[f].TableName,DataField:u[r].Fields[f].DataField,UniqueColumnName:u[r].Fields[f].UniqueColumnName,IsExpression:u[r].Fields[f].IsExpression,IsAggregatedExpression:u[r].Fields[f].IsAggregatedExpression}));var s=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),a=$(s.controlContainer).find(".e-dbrd-control-title"),v=s.getReportItemJson().ContainerSettings.Title;v=ej.DashboardUtil.getInstance().getResultantParameterString(v,n);a.html(v);a.attr("title",a.text());s.getReportItemJson().ContainerSettings.SubTitle!==" "&&(c=$(s.controlContainer).find(".e-dbrd-control-sub-title"),l=s.getReportItemJson().ContainerSettings.SubTitle,l=ej.DashboardUtil.getInstance().getResultantParameterString(l,n),c.html(l),c.attr("title",c.text()))},n.prototype.getExpressionField=function(n){for(var i=null,t=0;t<this.measuresList.length;t++)if(this.measuresList[t].DataId===n){i=this.measuresList[t];break}for(t=0;t<this.dimensionsList.length;t++)if(this.dimensionsList[t].DataId===n){i=this.dimensionsList[t];break}return i},n.prototype.getDataField=function(n){for(var i=n,t=0;t<this.measuresList.length;t++)if(this.measuresList[t].Name===n)return this.measuresList[t].DataField;for(t=0;t<this.dimensionsList.length;t++)if(this.dimensionsList[t].Name===i)return this.dimensionsList[t].DataField;return i},n.prototype.enableDrag=function(n,t){$("#"+this.id+"_"+n+"_categoryListDragIcon_"+t).css("display","block");$("#"+this.id+"_"+n+"_categoryListDatasetIcon_"+t).css("margin-left","0px")},n.prototype.disableDrag=function(n,t){$("#"+this.id+"_"+n+"_categoryListDragIcon_"+t).css("display","none");$("#"+this.id+"_"+n+"_categoryListDatasetIcon_"+t).css("margin-left","21px")},n.prototype.getDragElement=function(n,t,i){var r=t.replace(" ",""),u=ej.buildTag("div","",{border:"0.5px solid #EDF1F4",background:"#EDF1F4",margin:"6px",height:"25px","border-radius":"1px"},{id:this.id+"_"+n+"_categoryListDiv_"+r+"_draggingElement"}),e=ej.buildTag("div","",{"margin-right":"3px","margin-left":"23px","margin-top":"4.5px",float:"left"},{id:this.id+"_"+n+"_categoryListDatasetIcon_"+r+"_draggingElement","class":"e-reporticons "+i}),f=ej.buildTag("span.e-designer-fontfamily","",{overflow:"hidden","font-size":"11px",display:"inline-block","white-space":"nowrap","text-overflow":"ellipsis","margin-left":"2px","margin-top":"1px",width:"120px","vertical-align":"middle",background:"#EDF1F4"},{id:this.id+"_"+n+"_categoryListLabel_"+r+"_draggingElement"});return f.text(t),u.append(e),u.append(f),u},n.prototype.getAvailableName=function(){return ej.getGuid("Column")},n.prototype.createLabel=function(n,t,i,r,u){var o=n.Field.replace(" ",""),s=ej.isNullOrUndefined(n.DataField)&&!ej.isNullOrUndefined(n.Values)&&n.Values.length>n.ItemIndex?n.Values[n.ItemIndex].DataField:n.DataField,h=ej.isNullOrUndefined(n.DataId)&&!ej.isNullOrUndefined(n.Values)&&n.Values.length>n.ItemIndex?n.Values[n.ItemIndex].DataId:n.DataId,c=ej.isNullOrUndefined(n.TableId)&&!ej.isNullOrUndefined(n.Values)&&n.Values.length>n.ItemIndex?n.Values[n.ItemIndex].TableId:n.TableId,l=ej.isNullOrUndefined(n.TableName)&&!ej.isNullOrUndefined(n.Values)&&n.Values.length>n.ItemIndex?n.Values[n.ItemIndex].TableName:n.TableName,a=ej.isNullOrUndefined(n.FieldType)&&!ej.isNullOrUndefined(n.Values)&&n.Values.length>n.ItemIndex?n.Values[n.ItemIndex].FieldType:n.FieldType,v=ej.isNullOrUndefined(n.FieldActualType)&&!ej.isNullOrUndefined(n.Values)&&n.Values.length>n.ItemIndex?n.Values[n.ItemIndex].FieldActualType:n.FieldActualType,e,y,f,b,k,p,w;if(ej.isNullOrUndefined(n.CategoryType)||(this.validateCategoryInfo(n)&&n.Name!=="Measures"&&n.Name!=="Dimensions"?(ej.isNullOrUndefined(n.SummaryType)||n.SummaryType==="")&&(n.SummaryType=n.FieldType==="Measures"?n.IsAggregatedExpression?SummaryType[SummaryType.CUSTOM]:SummaryType[SummaryType.SUM]:n.CategoryType===CategoryType[CategoryType.None]?SummaryType[SummaryType.NONE]:SummaryType[SummaryType.COUNT]):(ej.isNullOrUndefined(n.SummaryType)||n.SummaryType==="")&&(n.SummaryType=SummaryType[SummaryType.NONE]),(ej.isNullOrUndefined(n.DateTimeFormat)||n.DateTimeFormat==="")&&(n.DateTimeFormat="None")),e=ej.buildTag("div.e-draggable e-reportdesigner-box-sizing e-categoryLabel","",{border:"1px solid #ececec",background:"#ececec",margin:"6px",height:"25px","border-radius":"2px"},{id:this.id+"_"+n.Name+"_categoryListDiv_"+(ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label),field:n.Field,label:n.Label,datafield:s,uniqueColumnName:n.UniqueColumnName,dataid:h,tableid:c,tablename:l,fieldtype:a,summarytype:n.SummaryType,datetimeformat:n.DateTimeFormat,fieldactualtype:ej.isNullOrUndefined(t)?v:t,IsExpression:n.IsExpression,IsAggregatedExpression:n.IsAggregatedExpression,category:n.Name,categorytype:n.CategoryType}),this.validateCategoryInfo(n)||(e=ej.buildTag("div.e-reportdesigner-box-sizing e-categoryLabel","",{border:"1px solid #ececec",background:"#ececec",margin:"6px",height:"25px","border-radius":"2px"},{id:this.id+"_"+n.Name+"_categoryListDiv_"+(ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label),field:n.Field,label:n.Label,datafield:s,uniqueColumnName:n.UniqueColumnName,dataid:h,tableid:c,tablename:l,fieldtype:a,summarytype:n.SummaryType,datetimeformat:n.DateTimeFormat,fieldactualtype:ej.isNullOrUndefined(t)?v:t,category:n.Name,categorytype:n.CategoryType,title:n.Field,IsExpression:n.IsExpression,IsAggregatedExpression:n.IsAggregatedExpression})),y=ej.buildTag("div","",{"margin-right":"5px","margin-left":"5px","line-height":"25px",display:"none",float:"left","font-size":"11px"},{id:this.id+"_"+n.Name+"_categoryListDragIcon_"+(ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label),"class":"e-widgeticons e-reportdesigner-double-drag e-dbrd-hand-cursor",field:n.Field,label:n.Label,datafield:s,uniqueColumnName:n.UniqueColumnName,dataid:h,tableid:c,tablename:l,fieldtype:a,summarytype:n.SummaryType,datetimeformat:n.DateTimeFormat,fieldactualtype:ej.isNullOrUndefined(t)?v:t,IsExpression:n.IsExpression,IsAggregatedExpression:n.IsAggregatedExpression,category:n.Name,categorytype:n.CategoryType}),f=ej.buildTag("span.e-designer-fontfamily","",{overflow:"hidden","font-size":"11px",display:"inline-block","white-space":"nowrap","text-overflow":"ellipsis","line-height":"25px",width:"90px",float:"left","vertical-align":"middle",background:"#ececec"},{id:this.id+"_"+n.Name+"_categoryListLabel_"+(ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label)}),this.validateCategoryInfo(n)&&n.Name!=="Measures"&&n.Name!=="Dimensions"?!ej.isNullOrUndefined(n.Values)&&n.Values.length>0&&n.ItemIndex<n.Values.length&&n.Values[n.ItemIndex].Value===""?f.text("<Empty>"):n.DateTimeFormat!=="None"?f.text(n.DateTimeFormat+"("+n.DataField+")"):n.FieldType==="Dimensions"&&(n.SummaryType===SummaryType[SummaryType.NONE]||n.SummaryType===SummaryType[SummaryType.NONE])&&n.DateTimeFormat==="None"?f.text(n.DataField):n.SummaryType==="CUSTOM"?f.text("Agg("+n.DataField+")"):(b=ej.isNullOrUndefined(n.DataField)?n.Field:n.DataField,f.text(this.getSummaryTypeLocalizedText(n.SummaryType.toString())+"("+b+")")):n.DateTimeFormat!=="None"&&n.Name!=="Measures"&&n.Name!=="Dimensions"?f.text(n.DateTimeFormat+"("+n.DataField+")"):f.text(n.DataField),e.append(y),ej.isNullOrUndefined(t)?(y.css("display","block"),f.css("width","115px")):(k=ej.buildTag("div","",{"margin-right":"5px","margin-left":"21px","line-height":"25px",float:"left"},{id:this.id+"_"+n.Name+"_categoryListDatasetIcon_"+(ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label),"class":"e-reporticons "+t}),e.append(k),e.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableDrag,this,n.Name,ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label)),e.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableDrag,this,n.Name,ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label))),e.append(f),r){p=ej.buildTag("span","",{"margin-top":"7px","margin-right":"5px",float:"right",display:"inline-block","vertical-align":"middle",color:"#f45d5d","font-size":"10px"},{id:this.id+"_"+n.Name+"_categoryListIcon_"+(ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label),"class":"e-widgeticons e-reportdesigner-close e-dbrd-hand-cursor",title:"Remove"});p.on("click",$.proxy(this.onCloseClick,this,n,u,!0));e.append(p)}if(i){w=ej.buildTag("span.e-designer-click e-reportdesigner-toolbarIconSettings e-toolbarsmallfonticonsettings e-reportdesigner-selection e-dbrd-hand-cursor","",{"margin-top":"5.5px","margin-right":"5px","margin-left":"5px",float:"right",width:"16px",display:"inline-block","vertical-align":"middle",color:"#0c8be2"},{id:this.id+"_"+n.Name+"_categoryListSettingsIcon_"+(ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label),"e-target":this.id+"_"+n.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(n.Label)?ej.DashboardUtil.escapeSelector(o):n.Label),title:"Options"});e.append(w);w.on("click",$.proxy(this.onSettingsClick,this,n))}return i&&r||f.css("width",ej.DashboardUtil.getPixelVal(f.css("width"))+24+"px"),f.addClass(ej.DashboardUtil.isExistTextWidth(f)?"e-title-tip":""),ejDashboardDesigner.getInstance("DragOnDrop").initializeDraggable(e,100),e},n.prototype.reorderItem=function(n,t){var r=$("#"+this.id+"_"+n.Name+"_categoryList"),i;$("#"+this.id+"_"+n.Name+"_categoryListDiv_"+n.Label).insertBefore(r[0].children[n.ItemIndex]);i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo;ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"updateDataGroupInfo",[n,i,t])},n.prototype.getSummaryTypeLocalizedText=function(n){switch(n.toLowerCase()){case"sum":return this.dashboardDesigner.locale.dataConfigurationMenuItems.sum;case"count":return this.dashboardDesigner.locale.dataConfigurationMenuItems.count;case"countd":return this.dashboardDesigner.locale.dataConfigurationMenuItems.distinctCount;case"avg":return this.dashboardDesigner.locale.dataConfigurationMenuItems.average;case"max":return this.dashboardDesigner.locale.dataConfigurationMenuItems.maximum;case"min":return this.dashboardDesigner.locale.dataConfigurationMenuItems.minimum;case"var":return this.dashboardDesigner.locale.dataConfigurationMenuItems.variable;case"stdev":case"stddev":return"StdDev";default:return this.dashboardDesigner.locale.dataConfigurationMenuItems.none}},n.prototype.populateMenuList=function(n){var t=[],i;if(n.CategoryType===CategoryType[CategoryType.Numeric]||n.CategoryType===CategoryType[CategoryType.None]){for(i=0;i<this.measuresList.length;i++)this.measuresList[i].DataId===n.DataId&&(t=this.getNumericMenuItems(n));t.length===0&&(t=n.CategoryType===CategoryType[CategoryType.None]?this.getNon_NumericMenuItems(n):this.getNumericDimensionMenuItems(n))}else n.CategoryType===CategoryType[CategoryType.Non_Numeric]&&(t=this.getNon_NumericMenuItems(n));return t},n.prototype.createMenu=function(n,t,i){var r=ej.buildTag("div","",{"margin-top":"5px"},{id:this.id+"_"+n.Name+"_categoryAggregateList"});t.length===0&&(t=this.populateMenuList(n));t.length>0&&this.populateFunctionItems(r,n,t,i)},n.prototype.addItem=function(n,t,i,r){var o,p,f,c,u,a,v;if(CategoryType[n.CategoryType]==="Numeric"?n.FieldType==="Dimensions"&&(n.FieldType="Measures",n.SummaryType=SummaryType[SummaryType.COUNT]):CategoryType[n.CategoryType]==="Non_Numeric"&&(n.FieldType="Dimensions"),ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length>0){var l=ej.isNullOrUndefined(n.id)?ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]:this.dashboardDesigner.element.find("#"+n.id),s=ej.DashboardUtil.getWidgetInstance(l).dataGroupInfo,w=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),e=void 0,y=[],h=void 0;for(o=0;o<this.categoryItems.length;o++)this.categoryItems[o].Name===n.Name&&(n.CategoryType=CategoryType[this.categoryItems[o].CategoryType],ej.isNullOrUndefined(this.categoryItems[o].CategoryCount)||(h=parseInt(this.categoryItems[o].CategoryCount,10)),ej.isNullOrUndefined(this.categoryItems[o].MenuInfo)||(y=this.categoryItems[o].MenuInfo.Items));if(i&&(u=this.GetUniqueColumnName(s,n),n.UniqueColumnName="column"+(parseInt(u,10)+1)),n.Label=ej.isNullOrUndefined(n.Label)?n.Values[n.ItemIndex].Label:n.Label,p=w.menuSettingsIconVisible,e=this.createLabel(n,null,p,!0,t,i),this.createMenu(n,y),f=$("#"+this.id+"_"+n.Name+"_categoryList"),c=$("#"+this.id+"_"+n.Name+"_categorylistdiv_emptyfield"),!ej.isNullOrUndefined(r)&&r&&!ej.isNullOrUndefined(h)&&f.children().length>0&&f.children().length+1===h&&this.removeIndex!==-1?(this.removeIndex>0?e.insertAfter(f[0].children[this.removeIndex-1]):e.insertBefore(f[0].children[this.removeIndex]),this.removeIndex=-1):f.append(e),(ej.isNullOrUndefined(r)||!r)&&(ej.isNullOrUndefined(f[0])?$("#"+e[0].id).insertBefore(c):n.ItemIndex>-1&&f[0].children.length>0&&($("#"+e[0].id).insertBefore(f[0].children[n.ItemIndex]),n.ItemIndex<f[0].children.length-1&&c.insertAfter(f[0].children[f[0].children.length-1])),!ej.isNullOrUndefined(h)&&f.children().length>h&&c.remove()),!t&&(n.Values=this.updateDataGroupInfo(n,s),n.Values.Values.length>0))for(u=0;u<n.Values.Values.length;u++)n.Values.Values[u].Label===n.Label&&n.Values.Values[u].FilterInfo!==null&&n.FieldType!=="Measures"&&($("#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+n.Label).remove(),this.createMenu(n,[],!0));if(n.Values.length>0){for(u=0;u<s.Values.length;u++)s.Values[u].Name===n.Name&&(s.Values[u].Values=n.Values);for(u=0;u<n.Values.length;u++)!ej.isNullOrUndefined(n.Values[u].FilterInfo)&&this.isFilterInfoExist(n.Values[u].FilterInfo)&&n.FieldType!=="Measures"&&($("#"+this.id+"_"+n.Name+"_categoryAggregateListUl_"+n.Label).remove(),this.createMenu(n,[],!0))}return!ej.isNullOrUndefined(r)&&r||n.IsLoading||(a=$.extend(!0,{},n),a.id=$(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).attr("id"),ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataAssignAdd,"removeItem","DataConfiguration",l.attr("id"),[a,t,i,r],[])),v=$("#"+this.id+"_"+n.Name+"_categoryListPanel").data("ejScroller"),ej.isNullOrUndefined(v)||v.refresh(),i&&this.postDraggedFields(l),this.toolBarObject.updateFilterCondition(),e.attr("title",e.text()),e}return null},n.prototype.isFilterInfoExist=function(n){if(ej.isNullOrUndefined(n.RelativeDateFilterInfo)){if(!ej.isNullOrUndefined(n.DimensionFilterInfo)&&(n.DimensionFilterInfo.IsAllowFilteringApplied||n.DimensionFilterInfo.IsConditionFilteringApplied||n.DimensionFilterInfo.IsTopNFilteringApplied))return!0}else return!0;return!1},n.prototype.GetUniqueColumnName=function(n){for(var i,u,r=0,t=0;t<n.Values.length;t++)for(i=0;i<n.Values[t].Values.length;i++)n.Values[t].Values[i].UniqueColumnName!=null&&(u=parseInt(n.Values[t].Values[i].UniqueColumnName.match(/\d+$/)[0],10),u>=r&&(r=u));return r},n.prototype.replaceItem=function(n,t){this.removeItem(n,!1,!0,!0);this.addItem(t,!1,!0,!0);ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataAssignReplace,"replaceItem","DataConfiguration","",[t,n],[n,t])},n.prototype.updateDataset=function(n,t){for(var u,f,e,o,s,i=ej.DashboardUtil.getAllWidgets(),r=0;r<i.length;r++)if(i[r].dataGroupInfo.DatasetId===n)if(t){for(u=0;u<i[r].dataGroupInfo.Values.length;u++)i[r].dataGroupInfo.Values[u].Values=[],i[r].dataGroupInfo.DatasetId=null,i[r].dataGroupInfo.DatasetName=null;this.bindData(i[r].controlContainer,!1,{data:[],columnbindings:{},Error:!1,noDataAvailable:!1,isDataSetEmpty:!0,widgetData:{Data:[]}})}else this.updatewidgetdata(n,i[r].controlContainer),this.postDraggedFields(i[r].controlContainer),f=$(i[r].controlContainer).find(".e-dbrd-control-title"),e=i[r].getReportItemJson().ContainerSettings.Title,e=ej.DashboardUtil.getInstance().getResultantParameterString(e,i[r].getReportItemJson().Data.Id),f.html(e),f.attr("title",f.text()),i[r].getReportItemJson().ContainerSettings.SubTitle!==" "&&(o=$(i[r].controlContainer).find(".e-dbrd-control-sub-title"),s=i[r].getReportItemJson().ContainerSettings.SubTitle,s=ej.DashboardUtil.getInstance().getResultantParameterString(s,i[r].getReportItemJson().Data.Id),o.html(s),o.attr("title",o.text()));i.length>0&&ej.DashboardUtil.getInstance().validateAndUpdateParameterColumn()},n.prototype.updatewidgetdata=function(n,t){var e=ejDashboardDesigner.getInstance("DesignPanel").getDataSet(n),o=t||ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0],f=ej.DashboardUtil.getWidgetInstance(o),r=f.dataGroupInfo,u,i;for(r.DatasetName=e.Name,u=0;u<r.Values.length;u++)i=this.createValueInfo(),i.Name=i.DisplayName=r.Values[u].Name,i.CategoryType=r.Values[u].CategoryType,i.Values=ejDashboardDesigner.getInstance("DesignPanel").createFieldInfos(r.Values[u].Values,e,i.CategoryType,f.controlType,!0),f.controlType==="DatePicker"&&i.Values.length>0&&(i.Values[0].DateTimeFormat==="None"||i.Values[0].DateTimeFormat==="NONE")?r.Values=[]:r.Values[u]=i},n.prototype.postDraggedFields=function(n,t){var a=n||ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0],f=ej.DashboardUtil.getWidgetInstance(a),i=f.dataGroupInfo,b=[],p=[],d=t?t:!1,k,s,v,o,e,w,y,h,c,r,u,l;if(i.Values.length>=1)for(r=0;r<i.Values.length;r++)for(u=0;u<i.Values[r].Values.length;u++)k=i.Values[r].Values[u].DateTimeFormat,ej.isNullOrUndefined(i.Values[r].Values[u].FilterInfo)||ej.isNullOrUndefined(i.Values[r].Values[u].FilterInfo.DimensionFilterInfo)||ej.isNullOrUndefined(i.Values[r].Values[u].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||ej.isNullOrUndefined(ejDashboardDesigner.getInstance("ContainerPropertyItem").filterSettings)||(i.Values[r].Values[u].FilterInfo.DimensionFilterInfo.TopNFilterInfo.IsHierarchicalFilter=ejDashboardDesigner.getInstance("ContainerPropertyItem").filterSettings.HierarchicalFilter),b.push({Id:i.Values[r].Values[u].DataId,Name:i.Values[r].Values[u].Field,SummaryType:i.Values[r].Values[u].SummaryType,Sorting:i.Values[r].Values[u].Sorting,CustomSorting:i.Values[r].Values[u].CustomSorting,FieldType:i.Values[r].Values[u].FieldType,MeasureFormatting:i.Values[r].Values[u].MeasureFormatting,DateTimeFormat:k,FilterInfo:i.Values[r].Values[u].FilterInfo,UniqueColumnName:i.Values[r].Values[u].UniqueColumnName,IsKPIColumn:i.Values[r].Values[u].IsKPIColumn,KPIColumnInfo:i.Values[r].Values[u].KPIColumnInfo,IsExpression:i.Values[r].Values[u].IsExpression,IsAggregatedExpression:i.Values[r].Values[u].IsAggregatedExpression});if(s=[],f.controlType==="Grid"){for(v=[],o=0;o<i.Values.length-1;o++)for(e=0;e<i.Values[o].Values.length;e++)ej.DashboardUtil.isDateField(i.Values[o].Values[e].FieldActualType)||v.push(i.Values[o].Values[e].UniqueColumnName);for(o=0;o<i.Values[0].Values.length;o++)for(e=0;e<f.gridJson.GridTemplate.length;e++)if(i.Values[0].Values[o].UniqueColumnName===f.gridJson.GridTemplate[e].Columns.UniqueColumnName&&i.Values[0].Values[o].FieldType===f.gridJson.GridTemplate[e].Columns.ColumnType&&!ej.DashboardUtil.isDateField(i.Values[0].Values[o].FieldActualType))if(f.gridJson.GridTemplate[e].DisplayType===DisplayType[DisplayType.ConditionalFormatting]){for(w=[],y=0;y<v.length;y++)for(h=0;h<f.gridJson.GridTemplate[e].ConditionalFormatting.length;h++)v[y]===f.gridJson.GridTemplate[e].ConditionalFormatting[h].TargetMeasureColumn.UniqueColumnName&&w.push(f.gridJson.GridTemplate[e].ConditionalFormatting[h]);s.push({Columns:f.gridJson.GridTemplate[e].Columns,DisplayType:f.gridJson.GridTemplate[e].DisplayType,ConditionalFormatting:w})}else s.push(f.gridJson.GridTemplate[e]);f.gridJson.GridTemplate=s}for(c=JSON.parse(JSON.stringify(i)),r=0;r<c.Values.length;r++)for(u=0;u<c.Values[r].Values.length;u++)l=c.Values[r].Values[u],ej.isNullOrUndefined(l.FilterInfo)||ej.isNullOrUndefined(l.FilterInfo.DimensionFilterInfo)||ej.isNullOrUndefined(l.FilterInfo.RelativeDateOptions)||(l.FilterInfo.DimensionFilterInfo=null);p.push({Id:f.reportName,Name:f.reportName,ControlType:f.controlType,DataGroupInfo:c.Values,GridTemplate:s});ej.isNullOrUndefined(f.chartJson)||ej.isNullOrUndefined(f.chartJson.ChartType)||(p[0].ChartType=f.chartJson.ChartType);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.fetchData,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.fetchData,fieldInfo:b,dataset:i.DatasetId,widgetInfo:p,request:AjaxRequest.Widget.toString()})},{fnction:$.proxy(this.bindData,this,a,d),indicator:[$.proxy(this.showLoadingIndicator,this,a),$.proxy(this.hideLoadingIndicator,this,a)]})},n.prototype.showLoadingIndicator=function(n){ejDashboardDesigner.getInstance("DesignPanel").showLoadingIndicator(n)},n.prototype.hideLoadingIndicator=function(n){ejDashboardDesigner.getInstance("DesignPanel").hideLoadingIndicator(n)},n.prototype.bindData=function(n,t,i){ej.DashboardUtil.getWidgetInstance(n||ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).updateData(i);t||ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.setDimensionFilters=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null,r=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);r.controlType==="DatePicker"?ejDashboardDesigner.getInstance("RangeFilterDialog").openFilterDialog(this,"filterAction",n,i):ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this,"filterAction",n,i)},n.prototype.getValueInfo=function(n,t,i){var r=this.createDataValueInfo(),u;return r.Name=this.selectedDatasetId,r.Field=i.Field,r.DataField=i.DataField,r.UniqueColumnName=i.UniqueColumnName,r.DataId=i.DataId,r.TableId=i.TableId,r.TableName=i.TableName,r.Label=i.Label,r.FieldType=i.FieldType,r.FieldActualType=i.FieldActualType,r.SummaryType=i.SummaryType,r.DateTimeFormat=i.DateTimeFormat,r.MeasureFormatting=this.defaultFormatting(i.SummaryType),r.IsKPIColumn=i.IsKPIColumn,r.KPIColumnInfo=i.KPIColumnInfo,r.IsExpression=i.IsExpression,r.IsAggregatedExpression=i.IsAggregatedExpression,i.SummaryType!==""&&(r.Value=i.SummaryType===SummaryType[SummaryType.NONE]&&r.DateTimeFormat==="None"?i.Field:i.SummaryType!==SummaryType[SummaryType.NONE]||r.DateTimeFormat!=="None"?(r.DateTimeFormat!=="None"?i.DateTimeFormat:SummaryType[i.SummaryType])+"("+i.Field+")":i.Field),u=ej.isNullOrUndefined(n)?[]:this.getGroupValues(n,t,i.Field),u.length>0?u[0]:r},n.prototype.defaultFormatting=function(){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);return n.getDefaultFormat(new MeasureFormatting)},n.prototype.getGroupValues=function(n,t,i){for(var u,r=0;r<n.length;r++)if(n[r].Name===t)for(u=0;u<n[r].Values.length;u++)if(ej.isNullOrUndefined(n[r].Values[u].Label)&&(n[r].Values[u].Label="LabelData"+(u+1)),n[r].Values[u].Label===i)return[n[r].Values[u]];return[]},n.prototype.getColumnInfo=function(n,t,i){var s=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),r=this.createColumnInfo(),e=this.createSort(),u,o,f;return e.Value="=Fields!"+i.Field+".Value",u=this.createGroup(),u.Value="=Fields!"+i.Field+".Value",r.Name=this.selectedDatasetId,r.Field=i.Field,r.DataField=i.DataField,r.UniqueColumnName=i.UniqueColumnName,r.DataId=i.DataId,r.TableId=i.TableId,r.TableName=i.TableName,r.Label=i.Label,r.FieldType=i.FieldType,r.FieldActualType=i.FieldActualType,r.SummaryType=i.SummaryType,r.DateTimeFormat=i.DateTimeFormat,r.IsExpression=i.IsExpression,r.IsAggregatedExpression=i.IsAggregatedExpression,o=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),o.controlType==="RangeSlider"&&i.DateTimeFormat===SummaryType.NONE&&(r.MeasureFormatting=this.defaultFormatting(i.SummaryType)),r.Value=r.DateTimeFormat!=="None"?i.DateTimeFormat+"("+i.Field+")":i.Field,r.GroupName=ej.isNullOrUndefined(s.chartJson)?i.Field:"",r.SortExpressions=[e],r.GroupExpressions=[u],f=ej.isNullOrUndefined(n)?[]:this.getGroupValues(n,t,i.Label),f.length>0?f[0]:r},n.prototype.getDataInfo=function(n,t,i,r,u){return i.ItemIndex<n.Values[r].Values.length?this.validateCategoryInfo(u)?n.Values[r].Values.splice(i.ItemIndex,0,this.getValueInfo(t.Values,i.Name,u)):n.Values[r].Values.splice(i.ItemIndex,0,this.getColumnInfo(t.Values,i.Name,u)):this.validateCategoryInfo(u)?n.Values[r].Values.push(this.getValueInfo(t.Values,i.Name,u)):n.Values[r].Values.push(this.getColumnInfo(t.Values,i.Name,u)),n.DatasetId=this.selectedDatasetId,n.DatasetName=this.selectedDatasetName,n},n.prototype.validateGroupValues=function(n,t,i){var f=!1,r,u;if(ej.isNullOrUndefined(t)||t.length!==i.length)f=!0;else for(r=0;r<t.length;r++)if(t[r].Name===n)if(t[r].Values.length===i[r].Values.length){for(u=0;u<t[r].Values.length;u++)if(t[r].Values[u].Value!==i[r].Values[u].Value){f=!0;break}}else{f=!0;break}return f},n.prototype.validateCategoryInfo=function(n){return n.CategoryType===CategoryType[CategoryType.Numeric]||n.CategoryType===CategoryType[CategoryType.None]?!0:!1},n.prototype.updateDataGroupInfo=function(n,t,i){var o,u;t.DatasetId=this.selectedDatasetId;t.DatasetName=this.selectedDatasetName;var s=n.Name,r=$("#"+this.id+"_"+s+"_categoryList"),h=!1,l=!1;if(r.length>0){var c=this.categoryItems=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).getDataCategoriesInfo(),f=this.createDataGroupInfo(),e=0;for(u=0;u<c.length;u++)o=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createValueInfo"),o.Name=c[u].Name,o.CategoryType=c[u].CategoryType,o.Name===s&&(e=u),o.DisplayName=c[u].DisplayName,f.Values.push(o);if(ej.isNullOrUndefined(i)){!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.Values)&&t.Values.length>0&&(f.Values[e].Values=t.Values[e].Values);var a=$(r[0].children[n.ItemIndex]).attr("field"),v=$(r[0].children[n.ItemIndex]).attr("datafield"),y=$(r[0].children[n.ItemIndex]).attr("UniqueColumnName"),p=$(r[0].children[n.ItemIndex]).attr("label"),w=$(r[0].children[n.ItemIndex]).attr("fieldtype"),b=$(r[0].children[n.ItemIndex]).attr("fieldactualtype"),k=$(r[0].children[n.ItemIndex]).attr("summarytype"),d=$(r[0].children[n.ItemIndex]).attr("categorytype"),g=$(r[0].children[n.ItemIndex]).attr("datetimeformat"),nt=$(r[0].children[n.ItemIndex]).attr("dataid"),tt=$(r[0].children[n.ItemIndex]).attr("tableid"),it=$(r[0].children[n.ItemIndex]).attr("tablename"),rt=$(r[0].children[n.ItemIndex]).attr("isexpression"),ut=$(r[0].children[n.ItemIndex]).attr("isaggregatedexpression")==="true";if(ej.isNullOrUndefined(a)||a==="emptyField"||(f=this.getDataInfo(f,t,n,e,{Field:a,DataId:nt,TableId:tt,TableName:it,DataField:v,Label:p,FieldType:w,FieldActualType:b,SummaryType:k,CategoryType:d,DateTimeFormat:g,UniqueColumnName:y,IsExpression:rt,IsAggregatedExpression:ut})),ej.isNullOrUndefined(t)||ej.isNullOrUndefined(t.Values))h=!0,t=f;else if(h=!0,l=this.validateGroupValues(s,t.Values,f.Values),l)if(t.Values.length!==f.Values.length)t.Values=f.Values;else for(u=0;u<f.Values.length;u++)f.Values[u].Name===s&&(t.Values[u].Values=f.Values[u].Values)}else h=!0,t.Values[e].Values.splice(i.currentIndex,0,t.Values[e].Values.splice(i.previousIndex,1)[0])}else h=!0;return ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).updateDataGroupInfo(t,{update:h,columnUpdate:!1,rowUpdate:!1,valueUpdate:l}),t.Values[this.getSelectedCategoryIndex(s)]},n.prototype.populateFunctionItems=function(n,t,i,r){for(var l,a,e,f,w,o,v,y,h,p=ej.buildTag("ul.e-designer-menu","",{padding:"4px"},{id:this.id+"_"+t.Name+"_categoryAggregateListUl_"+t.Label}),c=r,s=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),u=0;u<i.length;u++){if(l=ej.buildTag("li","",{},{id:this.id+"_"+i[u].Name+"_"+t.Label}),a=ej.buildTag("a.e-fieldmenuListName","",{},{fieldMenuName:i[u].Name}),a.text(i[u].DisplayName),e=ej.buildTag("span.e-fieldmenuListIcon","",{},{}),ej.isNullOrUndefined(i[u].Icon)?(t.SummaryType.toUpperCase()===SummaryType[i[u].Name]||t.FieldType==="Dimensions"&&t.DateTimeFormat===i[u].Name||t.FieldType==="Dimensions"&&ej.isNullOrUndefined(t.Values.length)&&i[u].Name==="Sort")&&(e.addClass("e-dashboardtick-icon"),e.addClass("e-summaryselectedfieldmenu")):(e.addClass(i[u].Icon),e.css({"font-size":"12px","margin-left":"5px","margin-top":"1.5px"})),t.FieldType==="Measures"&&i[u].Name==="Sort"&&s.controlType===ControlType.Chart&&(s.chartJson.ChartType===ChartTypes.Bar||s.chartJson.ChartType===ChartTypes.Pie||s.chartJson.ChartType===ChartTypes.Doughnut||s.chartJson.ChartType===ChartTypes.Pyramid||s.chartType===ChartTypes.Funnel)&&(e.addClass("e-dashboardtick-icon"),e.addClass("e-selectedfieldmenu")),t.FieldType==="Measures"&&i[u].Name==="Sort"&&s.controlType===ControlType.Card&&(e.addClass("e-dashboardtick-icon"),e.addClass("e-selectedfieldmenu")),t.FieldType==="Dimensions"&&i[u].Name==="RelativeDateOptions"&&e.addClass("e-dbd-menu-relative-dateoptions"),!ej.isNullOrUndefined(t.Values.length))for(f=0;f<t.Values.length;f++){if(t.FieldType==="Measures"&&t.DataField===t.Values[f].DataField&&(i[u].Name==="SortAscending"&&t.Values[f].Sorting==="Ascending"&&!t.Values[f].IsCustomSortApplied||i[u].Name==="SortDescending"&&t.Values[f].Sorting==="Descending"&&!t.Values[f].IsCustomSortApplied||i[u].Name==="Sort"&&!ej.isNullOrUndefined(t.Values[f].CustomSorting))||t.FieldType==="Dimensions"&&i[u].Name==="Sort"){e.addClass("e-dashboardtick-icon e-selectedfieldmenu");break}c&&!ej.isNullOrUndefined(t.Values[f].FilterInfo)&&c&&!ej.isNullOrUndefined(t.Values[f].FilterInfo)&&(c=this.updateFilterTickIcon(i[u].Name,t.Values[f].FilterInfo,e))}if(!ej.isNullOrUndefined(t.Values.Values)&&t.Values.Values.length>0)for(f=0;f<t.Values.Values.length;f++)c&&!ej.isNullOrUndefined(t.Values.Values[f].FilterInfo)&&(c=this.updateFilterTickIcon(i[u].Name,t.Values.Values[f].FilterInfo,e));if(a.append(e),l.append(a),!ej.isNullOrUndefined(i[u].Items))for(w=ej.buildTag("ul","",{padding:"4px",width:"150px"},{}),l.append(w),o=0;o<i[u].Items.length;o++)v=ej.buildTag("li","",{},{id:this.id+"_"+i[u].Items[o].Name+"_"+t.Label}),y=ej.buildTag("a.e-fieldmenuListName","",{},{fieldMenuName:i[u].Items[o].Name}),y.text(i[u].Items[o].DisplayName),h=ej.buildTag("span.e-fieldmenuListIcon","",{},{}),ej.isNullOrUndefined(i[u].Items[o].Icon)?(t.SummaryType===SummaryType[i[u].Items[o].Name]||t.FieldType==="Dimensions"&&t.DateTimeFormat===i[u].Items[o].Name)&&(h.addClass("e-dashboardtick-icon"),h.addClass("e-summaryselectedfieldmenu")):(h.addClass(i[u].Items[o].Icon),h.css({"font-size":"12px","margin-left":"5px","margin-top":"1.5px"})),y.append(h),v.append(y),w.append(v),!ej.isNullOrUndefined(i[u].Items[o].EnableSeperator)&&i[u].Items[o].EnableSeperator&&v.addClass("e-separator");!ej.isNullOrUndefined(i[u].EnableSeperator)&&i[u].EnableSeperator&&l.addClass("e-separator");p.append(l)}n.append(p);p.ejMenu({menuType:ej.MenuType.ContextMenu,openOnClick:!1,ontextMenuTarget:"#"+this.id+"_"+name+"_categoryListDiv_"+t.Label,width:180,click:$.proxy(this.onSettingsMenuItemClick,this,t)})},n.prototype.updateFilterTickIcon=function(n,t,i){if(n!=="DimensionFilters"||ej.isNullOrUndefined(t.DimensionFilterInfo)){if(n==="RelativeDateFilter"&&!ej.isNullOrUndefined(t.RelativeDateFilterInfo))return i.addClass("e-dashboardtick-icon e-relativefiltermenu"),!1}else return i.addClass("e-dashboardtick-icon e-filtermenu"),!1;return!0},n.prototype.createDataGroupInfo=function(){return{__type:"Syncfusion.RDL.DOM.DataGroupInfo",Values:[],DatasetId:this.selectedDatasetId,DatasetName:this.selectedDatasetName,Filters:[],SortExpressions:[]}},n.prototype.createValueInfo=function(){return{__type:"Syncfusion.RDL.DOM.ValueInfo",Name:"",DisplayName:"",CategoryType:"",Values:[]}},n.prototype.createDataValueInfo=function(){return{__type:"Syncfusion.RDL.DOM.DataValueInfo",Name:"",Field:"",DataField:"",DataId:"",TableId:"",TableName:"",FieldType:"",FieldActualType:"",SummaryType:"",Label:"",Value:"",FilterInfo:null,CustomSorting:null,MeasureFormatting:null,Sorting:"Ascending",DateTimeFormat:DateTimeFormat[DateTimeFormat.None],UniqueColumnName:"",IsKPIColumn:!1,KPIColumnInfo:KpiColumnInfo,IsShowAllRecords:!1,IsExpression:"",IsAggregatedExpression:""}},n.prototype.createColumnInfo=function(){return{__type:"Syncfusion.RDL.DOM.DataColumnInfo",Name:"",Field:"",DataField:"",DataId:"",TableId:"",TableName:"",FieldType:"",FieldActualType:"",SummaryType:"",Label:"",Value:"",FilterInfo:null,CustomSorting:null,MeasureFormatting:null,Sorting:"Ascending",GroupName:"",DateTimeFormat:DateTimeFormat[DateTimeFormat.None],UniqueColumnName:"",IsShowAllRecords:!1,IsExpression:"",IsAggregatedExpression:""}},n.prototype.createSort=function(){return{__type:"Syncfusion.RDL.DOM.SortExpression",Value:"",Direction:"Ascending"}},n.prototype.createGroup=function(){return{__type:"Syncfusion.RDL.DOM.GroupExpression",Value:""}},n.prototype.updateSortInfo=function(n,t,i){var o,f,r,e,u,s,h;if(ejDashboardDesigner.editManager.isPerformAction||this.updateSortingItemCheck(t,i),o=ejDashboardDesigner.getInstance("DesignPanel"),o.selectedReportItems.length>0)for(f=ej.DashboardUtil.getWidgetInstance(o.selectedReportItems[0]).dataGroupInfo,r=0;r<f.Values.length;r++)if(t.CategoryName===f.Values[r].Name)for(e=0;e<f.Values[r].Values.length;e++)u=f.Values[r].Values[e],ej.isNullOrUndefined(u.Label)&&(u.Label="LabelData"+(e+1)),u.Label===t.Label&&(s=[u.CustomSorting,t,i],h=[n,t,i],ejDashboardDesigner.editManager.addCmdAction(CommandAction.UpdateSort,"updateSortInfo","DataConfiguration","",s,h),u.CustomSorting=n);this.postDraggedFields()},n.prototype.filterAction=function(n,t,i){var u=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,r,f,e;if(u.Values.length>=1)for(r=0;r<u.Values.length;r++)for(f=0;f<u.Values[r].Values.length;f++)u.Values[r].Values[f].UniqueColumnName===i.UniqueColumnName&&(ej.isNullOrUndefined(u.Values[r].Values[f].FilterInfo)?ej.isNullOrUndefined(n)?u.Values[r].Values[f].FilterInfo=n:(e=new FilterInfo,e.DimensionFilterInfo=n,u.Values[r].Values[f].FilterInfo=e):(u.Values[r].Values[f].FilterInfo.RelativeDateFilterInfo=null,u.Values[r].Values[f].FilterInfo.DimensionFilterInfo=n)),i.Label===u.Values[r].Values[f].Label&&(i.DateTimeFormat=u.Values[r].Values[f].DateTimeFormat);ej.isNullOrUndefined(n)||($("#"+this.id+"_"+i.Name+"_categoryAggregateListUl_"+(ej.isNullOrUndefined(i.Label)?i.Values[i.ItemIndex].Label:i.Label)).remove(),this.createMenu(i,[],!0),ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo.IsShowAllRecords=!1);this.postDraggedFields()},n}();window.ej.createObject("ej.DashboardDesignerUtility.DataConfiguration",InternalDataConfiguration,window);MeasureCondition=function(){function n(){this.Values=[]}return n}(),function(n){n[n.Numeric=0]="Numeric";n[n.Non_Numeric=1]="Non_Numeric";n[n.None=2]="None"}(CategoryType||(CategoryType={})),function(n){n[n.Show=0]="Show";n[n.hidden=1]="hidden"}(Visibility||(Visibility={})),function(n){n.Widget="Widget"}(AjaxRequest||(AjaxRequest={}));ConfigurationPanel=function(){function n(t){this.dashboardDesigner=null;this.occupyFullWidth=!1;this.resizeObj={isPropertyPanel:!0,isDataSet:!0,isParameter:!1,isImageManager:!1};this.collapseDiv=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");n.dataPanel=this;this.targetTag=t;this.rendererItemPanel()}return Object.defineProperty(n,"DataPanel",{get:function(){return this.dataPanel},enumerable:!0,configurable:!0}),n.prototype.rendererItemPanel=function(){var n=this.dashboardDesigner._id;this.panelItems=[{GroupName:"Properties",DisplayName:this.dashboardDesigner.locale.dataConfigurationPanel.properties,GroupClass:"e-reporticon e-reportdesigner-configuration-settings",GroupId:n+"_Properties"},{GroupName:"DataSource",DisplayName:this.dashboardDesigner.locale.dataConfigurationPanel.dataSource,GroupClass:"e-reporticon e-reportdesigner-configuration-dataset",GroupId:n+"_DataSource"}];this.expandablePanel=ej.buildTag("div.e-reportdesigner-designer-configuration","",{width:"463px",height:"100%",display:"block",overflow:"hidden",float:"left",border:"0px solid #c8c8c8","border-left":"1px solid #c8c8c8","box-sizing":"border-box","background-color":"#f9f9f9"},{id:n+"_designerConfigurationPanel"});this.targetTag.append(this.expandablePanel);this.expandablePanel.css("display","none");this.renderToolBarPanel(this.panelItems)},n.prototype.showDataConfigurationPanel=function(){this.expandablePanel.css("display","block");this.expandablePanel.css("width","100%")},n.prototype.renderToolBarPanel=function(n){var r=Array.prototype.slice.call(n),t;for(this.toolBarPanel=ej.buildTag("div.e-reportdesigner-itempanel-header","",{width:"36px",height:"100%"},{id:this.dashboardDesigner._id+"_configurationHeaderPanel"}),this.renderTooltip(),t=0;t<r.length;t++){var i=r[t],u=ej.buildTag("div.e-reportdesigner-itempanel-wrapper","",{width:"35px",height:"35px"},{id:i.GroupId+"_wrapper"}),f=ej.buildTag("div","",{cursor:"pointer"},{id:this.dashboardDesigner._id+"_"+i.GroupName,"class":i.GroupClass+" e-reportdesigner-itempanel-icon",title:i.DisplayName});u.on("click",$.proxy(this.onGroupItemsClick,this,n[t]));u.append(f);this.toolBarPanel.append(u)}r.length>0&&this.renderCollapseItem();this.targetTag.append(this.toolBarPanel)},n.prototype.renderCollapseItem=function(){var n;this.collapseDiv=ej.buildTag("div.e-reportdesigner-itempanel-wrapper e-dashboarddesigner-collapsable-item","",{top:"40.5px"},{id:this.dashboardDesigner._id+"_collapse_wrapper"});n=ej.buildTag("div","",{cursor:"pointer"},{id:this.dashboardDesigner._id+"_collapseItem","class":"e-reporticon e-dashboarddesigner-configuration-collapse e-reportdesigner-itempanel-icon",title:this.dashboardDesigner.locale.dataConfigurationPanel.collapse});this.collapseDiv.on("click",$.proxy(this.onCollapseItemClick,this));this.collapseDiv.append(n);this.targetTag.append(this.collapseDiv)},n.prototype.renderTooltip=function(){var n=this.dashboardDesigner._id,i=ej.buildTag("div.e-tooltip-wrap e-widget e-userselect e-designer-config-tooltip","",{display:"none"},{id:n+"_config_tooltip"}),r=ej.buildTag("div.e-arrowTip","",{height:"20px",width:"10px",top:"4px",display:"block"},{id:n+"_config_arrow_tooltip"}),f=ej.buildTag("div.e-arrowTipOuter","",{}),e=ej.buildTag("div.e-arrowTipInner","",{left:"0px",top:"1px"}),t,u;r.append(f).append(e);t=ej.buildTag("div.e-tipContainer","",{});u=ej.buildTag("div.e-tipcontent e-def","",{},{id:n+"_config_content_tooltip"});t.append(u);i.append(r).append(t);this.toolBarPanel.append(i)},n.prototype.onGroupItemsClick=function(n){this.selectedItem===n?(this.showConfigurationPanel(!1,n.GroupName,n),this.collapseDiv.css("display","none")):(this.showConfigurationPanel(!0,n.GroupName,n),this.collapseDiv.css("display","block"));ej.DashboardUtil.refreshIndicator($("#"+this.dashboardDesigner._id+"_designSurfaceContainer"))},n.prototype.onCollapseItemClick=function(){this.collapseDiv.css("display","none");this.showConfigurationPanel(!1,this.selectedItem.GroupName,this.selectedItem);ejDashboardDesigner.getInstance("PropertyPanel").resetDataTab()},n.prototype.getPanelItem=function(n){for(var i=Array.prototype.slice.call(this.panelItems),t=0;t<i.length;t++)if(i[t].GroupName===n)return i[t]},n.prototype.showConfigurationPanel=function(n,t,i){var h=Array.prototype.slice.call(this.panelItems),u,o,s,f,r;if(ej.isNullOrUndefined(i))for(u=0;u<h.length;u++)if(this.panelItems[u].GroupName===t){i=this.panelItems[u];break}if(n||ej.isNullOrUndefined(this.selectedItem)){if(n){if(o=this.validatePanelSwitch(t),!o)if(this.selectedItem.GroupName==="DataSource")if(s=ejDashboardDesigner.getInstance("DataSet"),s.isDataSourceWiz()){var f=ejDashboardDesigner.getInstance("DataSource").isEdit,e=this.dashboardDesigner.locale.alertDialogTitle.CancelDataSourceCreation,r=this.dashboardDesigner.locale.alertWindowMesages.datasourceCancel;f&&(e=this.dashboardDesigner.locale.alertDialogTitle.EditDataSourceConnection,r=this.dashboardDesigner.locale.alertWindowMesages.datasourceEditing);ej.DashboardUtil.getInstance().alertDialog(e,r,IconType.information,AlertType.Confirm,!1,"",{dataInfo:{Name:t,Item:i},instance:this,method:"confirmSwitchWiz"})}else{var f=ejDashboardDesigner.getInstance("DataSet").isEdit,e=this.dashboardDesigner.locale.alertDialogTitle.CancelDataSourceCreation,r=this.dashboardDesigner.locale.alertWindowMesages.datasourceCancel;f&&(e=this.dashboardDesigner.locale.alertDialogTitle.EditDataSourceConnection,r=this.dashboardDesigner.locale.alertWindowMesages.datasourceEditing);ej.DashboardUtil.getInstance().alertDialog(e,r,IconType.question,AlertType.Confirm,!1,"",{dataInfo:{Name:t,Item:i},instance:this,method:"confirmSwitchWiz"})}else this.selectedItem.GroupName==="Parameters"&&(f=ejDashboardDesigner.getInstance("Parameter").isEdit,r=this.dashboardDesigner.locale.alertWindowMesages.parameterCancel,f&&(r=this.dashboardDesigner.locale.alertWindowMesages.parameterEditing),ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.parameter,r,IconType.information,AlertType.Confirm,!1,"",{dataInfo:{Name:t,Item:i},instance:this,method:"confirmSwitchWiz"}));o&&this.updatePanelDisplay(t,i,!1)}}else $("#"+i.GroupId+"_wrapper").css("background-color","transparent"),this.validateDisplay(this.selectedItem.GroupName,!1),this.expandablePanel.css("display","none"),this.targetTag.css("width","36px"),ej.isNullOrUndefined(ejDashboardDesigner.getInstance("DashboardDesigner"))||this.updateDesignContainerWidth(this.selectedItem.GroupName==="Properties"||"DataSource"?464:254),this.selectedItem=null},n.prototype.confirmSwitchWiz=function(n,t){n&&!ej.isNullOrUndefined(t)&&this.updatePanelDisplay(t.Name,t.Item,!0)},n.prototype.updatePanelDisplay=function(n,t,i){var r,u;this.expandablePanel.css("display","block");this.targetTag.css("width",n==="Properties"||"DataSource"?"500px":"290px");$("#"+this.dashboardDesigner._id+"_designerConfigurationPanel").css("width",n==="Properties"||"DataSource"?"464px":"254px");ej.isNullOrUndefined(this.selectedItem)?ej.isNullOrUndefined(ejDashboardDesigner.getInstance("DashboardDesigner"))||this.updateDesignContainerWidth(n==="Properties"||"DataSource"?-464:-254):($("#"+this.selectedItem.GroupId+"_wrapper").css("background-color","transparent"),this.validateDisplay(this.selectedItem.GroupName,!1),this.selectedItem.GroupName!==t.GroupName&&(this.selectedItem.GroupName==="Properties"||"DataSource"||t.GroupName==="Properties"||"DataSource")&&(ej.isNullOrUndefined(ejDashboardDesigner.getInstance("DashboardDesigner"))||this.updateDesignContainerWidth(t.GroupName==="Properties"||"DataSource"?-210:210)));this.selectedItem=t;this.validateDisplay(t.GroupName,!0);$("#"+t.GroupId+"_wrapper").css("background-color","white");$("#"+t.GroupId+"_wrapper").css("border-bottom-width","1px");i&&(r=ejDashboardDesigner.getInstance("DesignPanel").selectedItems,r.length>0&&this.selectedItem.GroupName==="Properties"&&$(r[0]).attr("designPanel")&&(u=ejDashboardDesigner.getInstance("DesignPanel").getDesignProperty("Dashboard"),ejDashboardDesigner.getInstance("PropertyPanel").showPropertyItem(u,"Dashboard")))},n.prototype.loadDataSet=function(){var n=ejDashboardDesigner.getInstance("DataSet");n.isLoaded()||ejDashboardDesigner.getInstance("DataSet").renderContainer(this.expandablePanel)},n.prototype.validatePanelSwitch=function(n){var t=!1,i=$("#"+this.dashboardDesigner._id+"_datasetSourceTag"),r=$("#"+this.dashboardDesigner._id+"_dataSourceTag"),u=$("#"+this.dashboardDesigner._id+"_parameterList");return ej.isNullOrUndefined(this.selectedItem)||this.selectedItem.GroupName===n?t=!0:ej.isNullOrUndefined(this.selectedItem)||(t=this.selectedItem.GroupName==="Datasource"?r.length===0||r.length>0&&$("#"+this.dashboardDesigner._id+"_dataSourceTag").css("display")==="block":this.selectedItem.GroupName==="DataSource"?i.length===0||i.length>0&&!ejDashboardDesigner.getInstance("DataSet").isConfigWizard():this.selectedItem.GroupName==="Parameters"?u.length===0||u.length>0&&!ejDashboardDesigner.getInstance("Parameter").isConfigWizard():!0),t},n.prototype.resizeConfigurationPanel=function(n){n||this.targetTag.css("width","500px");this.occupyFullWidth=n;this.updateDesignAreaWidth(n)},n.prototype.showDataSetPanel=function(n){var t=ejDashboardDesigner.getInstance("DataSet");t.isLoaded()||ejDashboardDesigner.getInstance("DataSet").renderContainer(this.expandablePanel);t.showDataSet(n,this.resizeObj)},n.prototype.showParameterPanel=function(n){var t=ejDashboardDesigner.getInstance("Parameter");t.isLoaded()||ejDashboardDesigner.getInstance("Parameter").renderContainer(this.expandablePanel);t.showParameter(n,this.resizeObj)},n.prototype.showPropertyPanel=function(n){var t=ejDashboardDesigner.getInstance("PropertyPanel");t.isLoaded()||ejDashboardDesigner.getInstance("PropertyPanel").renderContainer(this.expandablePanel);t.showPropertyPanel(n,this.resizeObj)},n.prototype.showImageManager=function(n){var t=ejDashboardDesigner.getInstance("ImageManager");t.isLoaded()||ejDashboardDesigner.getInstance("ImageManager").renderContainer(this.expandablePanel);t.showImageManager(n)},n.prototype.validateDisplay=function(n,t){t?($("#"+this.dashboardDesigner._id+"_"+n).addClass("e-reportdesigner-itempanel-selection"),$("#"+this.dashboardDesigner._id+"_"+n+"_wrapper").addClass("e-reportdesigner-itempanel-selection")):($("#"+this.dashboardDesigner._id+"_"+n).removeClass("e-reportdesigner-itempanel-selection"),$("#"+this.dashboardDesigner._id+"_"+n+"_wrapper").removeClass("e-reportdesigner-itempanel-selection"));switch(n){case"Properties":this.showPropertyPanel(t);break;case"DataSource":this.showDataSetPanel(t);break;case"Parameters":this.showParameterPanel(t);break;case"ImageManager":this.showImageManager(t)}},n.prototype.updateSize=function(){this.resizeObj.isPropertyPanel=this.resizeObj.isDataSource=this.resizeObj.isDataSet=this.resizeObj.isParameter=this.resizeObj.isImageManager=!0;$("#"+this.dashboardDesigner._id+"_propertyPanel").is(":visible")?(ejDashboardDesigner.getInstance("PropertyPanel").updatePanelSize(),this.resizeObj.isPropertyPanel=!1):$("#"+this.dashboardDesigner._id+"_datasetContainer").is(":visible")?(ejDashboardDesigner.getInstance("DataSet").updateSize(),this.resizeObj.isDataSet=!1):$("#"+this.dashboardDesigner._id+"_param_Container").is(":visible")?(ejDashboardDesigner.getInstance("Parameter").updateSize(),this.resizeObj.isParameter=!1):$("#"+this.dashboardDesigner._id+"_imageManager").is(":visible")&&(ejDashboardDesigner.getInstance("ImageManager").updateSize(),this.resizeObj.isImageManager=!1)},n.prototype.updateDesignAreaWidth=function(n){this.dashboardDesigner.updateConfigPanel(n);this.dashboardDesigner.designerPanel.updateScrollBar()},n.prototype.updateDesignContainerWidth=function(){this.dashboardDesigner.updateDesignPanel();this.dashboardDesigner.designerPanel.updateScrollBar()},n.dataPanel=null,n}();window.ej.createObject("ej.DashboardDesignerUtility.DataConfigurationPanel",ConfigurationPanel,window);InternalDataSet=function(){function n(){this.queryDesigner=null;this.newDatasource=null;this.isEdit=!1;this.resizeObj={isListPanel:!0,isTypePanel:!0,isConfigPanel:!0,isSharedPanel:!0,isDataPanel:!0};this.targetContainer=null;this.dataSetLiTag=null;this.dataList=null;this.designUI=null;this.sharedDsTag=null;this.rdlParser=ejDashboardDesigner.getInstance("RDLParser");this.id=ejDashboardDesigner.getInstance("DashboardDesigner")._id;this.datasets=this.rdlParser.rdlJsonObj.DataSets;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.dataSource=ejDashboardDesigner.getInstance("DataSource");this.sharedDs=ejDashboardDesigner.getInstance("SharedDataSource");this.sharedDs.fncDataList=$.proxy(this.switchPanel,this);this.dataSource.fncPanelSwitcher=$.proxy(this.switchPanel,this);this.browserInfo=ej.browserInfo()}return Object.defineProperty(n,"DataSet",{get:function(){return(this.dataSet===null||this.dataSet===undefined)&&(this.dataSet=new ej.DashboardDesignerUtility.DataSet),this.dataSet},enumerable:!0,configurable:!0}),n.prototype.updateDataSetJSON=function(){this.datasets=this.rdlParser.rdlJsonObj.DataSets},n.prototype.pouplateDataSets=function(){var i,n,r,t;if(this.dataSetLiTag.empty(),this.datasets=this.rdlParser.rdlJsonObj.DataSets,i=this.rdlParser.rdlJsonObj.DataSources,!ej.isNullOrUndefined(this.datasets)&&this.datasets.length>0)for(n=0;n<this.datasets.length;n++){for(r=!1,t=0;t<i.length;t++)if(i[t].Id===this.datasets[n].Id){r=i[t].Permission.CanWrite;break}this.appendItem(this.datasets[n].Name,this.datasets[n].Id,this.datasets[n].Fields,null,r)}this.showDatasetHint()},n.prototype.updateDataSet=function(n,t){if(this.editTagItem(n,t,t.Fields),!ej.isNullOrUndefined(this.datasets)&&this.datasets.length>0){for(var i=0;i<this.datasets.length;i++)if(this.datasets[i].Id===n.Id){this.datasets[i]=t;break}ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataSetEdit,"updateDataSet","DataSet","",[t,n],[n,t])}},n.prototype.insertDataSet=function(n,t){t===0?this.datasets.unshift(n):this.datasets.splice(t,0,n);this.appendItem(n.Name,n.Id,n.Fields,t);this.showDatasetHint()},n.prototype.addDataSet=function(n){this.datasets.push(n);this.appendItem(n.Name,n.Id,n.Fields);ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataSetAdd,"removeDataSet","DataSet","",[n,this.datasets.length-1],[n.Name]);this.showDatasetHint()},n.prototype.removeDataSet=function(n){var t,i;if($("#"+this.id+"_tree_"+n).remove(),!ej.isNullOrUndefined(this.datasets)&&this.datasets.length>0)for(t=0;t<this.datasets.length;t++)if(this.datasets[t].Id===n){ejDashboardDesigner.getInstance("DataConfiguration").updateDataset(this.datasets[t].Id,!0);i=$.extend(!0,{},this.datasets[t]);ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataSetDelete,"insertDataSet","DataSet","",[this.datasets[t].Id],[i,t]);this.datasets.splice(t,1);break}this.showDatasetHint()},n.prototype.addDataSetField=function(n,t,i){for(var u,r=0;r<this.datasets.length;r++)if(this.datasets[r].Id===n){u=this.getNodeTag(t.DataField,n,!0,t.Id);i===0?(this.datasets[r].Fields.unshift(t),$("#"+this.id+"_tree_"+n+">ul").prepend(u)):(this.datasets[r].Fields.splice(i,0,t),$("#"+this.id+"_tree_"+n+">ul>li:nth-child("+i+")").after(u));break}},n.prototype.removeDataSetField=function(n,t){var i,r;if($("#"+this.id+"_tree_"+n+t).remove(),!ej.isNullOrUndefined(this.datasets)&&this.datasets.length>0)for(i=0;i<this.datasets.length;i++)if(this.datasets[i].Id===n){for(r=0;r<this.datasets[i].Fields.length;r++)if(this.datasets[i].Fields[r].Id===t){ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataFieldDelete,"addDataSetField","DataSet","",[n,t],[n,$.extend(!0,{},this.datasets[i].Fields[r]),r]);this.datasets[i].Fields.splice(r,1);break}break}},n.prototype.isLoaded=function(){return!ej.isNullOrUndefined(this.targetContainer)&&this.targetContainer.length>0},n.prototype.getFieldInfo=function(n,t){var i,r;if(!ej.isNullOrUndefined(this.datasets)&&this.datasets.length>0)for(i=0;i<this.datasets.length;i++)if(this.datasets[i].Name===n)for(r=0;r<this.datasets[i].Fields.length;r++)if(this.datasets[i].Fields[r].Name===t)return this.datasets[i].Fields[r]},n.prototype.isDataSourceWiz=function(){return this.dataSource.isDataPanel},n.prototype.isConfigWizard=function(){return this.sharedDsTag.is(":visible")||this.dataSource.dsConfigTag.is(":visible")||this.dataSource.dsTypeTag.is(":visible")?!0:!1},n.prototype.showDataSet=function(n,t){this.targetContainer.css("display",n?"block":"none");this.dataList.css("display","block");n&&(this.designUI.is(":visible")||this.sharedDsTag.is(":visible")||this.dataSource.dsTypeTag.is(":visible")||this.dataSource.dsConfigTag.is(":visible")||this.dataSource.isWebTemplatesVisible())&&this.switchPanel(this.dataSource.isDataPanel?PanelList.DataPanel:PanelList.DataList);t.isDataSet&&(this.resizeObj.isListPanel=this.resizeObj.isTypePanel=this.resizeObj.isConfigPanel=this.resizeObj.isSharedPanel=this.resizeObj.isDataPanel=!0,this.updateSize(),t.isDataSet=!1)},n.prototype.renderContainer=function(n){var t=this.targetContainer=ej.buildTag("div","",{width:"100%",height:"100%",display:"block","background-color":"white"},{id:this.id+"_datasetContainer","class":"e-userselect e-dbrd-dataset-container"}),i=this.dataList=ej.buildTag("div","",{width:"100%",height:"100%",display:"block",position:"relative"},{id:this.id+"_datasetSourceTag"}),r=this.sharedDsTag=ej.buildTag("div","",{width:"100%",height:"100%",display:"none"},{id:this.id+"_sharedDsConfigTag"}),u=this.designUI=ej.buildTag("div","",{width:"100%",height:"100%",display:"none"},{id:this.id+"_queryDesigner"});t.append(i);t.append(r);t.append(u);n.append(t);this.renderDataSetPanel(i);this.sharedDs.renderConfiguration(r);this.dataSource.renderContainer(t);this.updateSize();this.wiredEvents();this.pouplateDataSets()},n.prototype.renderDataSetPanel=function(n){var r=ej.buildTag("div","",{width:"100%",height:"35px",display:"block",overflow:"hidden"},{id:this.id+"_datasetHeaderContainer"}),t=ej.buildTag("div.e-dbrd-designer-body-container-wrapper","",{},{id:this.id+"_datasetBodyContainer_Wrapper"}),u=ej.buildTag("div.e-lv e-js e-parentlv e-dbrd-designer-scroller e-dbrd-control","",{width:"100%",display:"block","margin-bottom":"3px"},{id:this.id+"_datasetBodyContainer"}),c=ej.buildTag("div","",{}),f=ej.buildTag("div","",{width:"100%",height:"63px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_datasetFooterContainer"}),nt=ej.buildTag("span.e-designer-header e-designer-cursor","DATA SOURCES",{overflow:"hidden",display:"inline-block",padding:"8.5px 7px 7px 0px"},{id:this.id+"_dataSetHeaderText"}),tt=ej.buildTag("span.e-designer-header-icon e-reportdesigner-configuration-dataset e-designer-cursor","",{display:"inline-block",float:"left",padding:"7px 11px"},{}),l,h,k,d,g;r.append(tt);r.append(nt);l=ej.buildTag("div.e-designer-new-btn-footer","",{margin:"8px","margin-bottom":"12px"},{id:this.id+"_datasetFooterSeperator"});f.append(l);var a=ej.buildTag("div.e-reportdesigner-treeView","",{padding:"0px 3px"},{id:this.id+"_div_datasetList"}),it=this.dataSetLiTag=ej.buildTag("ul.e-reportdesigner-nodeTag","",{margin:"0px"},{id:this.id+"_div_datasetUl"}),v=ej.buildTag("div.e-dbrd-designer-datasource-welcometext-content","",{"text-align":"center"},{id:this.id+"welcomettext_content"}),rt=ej.buildTag("span.e-dbrd-designer-iconemptystate","",{display:"inline-block",padding:"4px"},{id:this.id+"_empty_stateimage"}),i=ej.buildTag("div.e-dbrd-designer-sample-datasource-container","",{},{id:this.id+"sample_datasource_container"}),e=ej.buildTag("div.e-dbrd-designer-sample-datasource-header","",{},{id:this.id+"sample_datasource_container_header"}),ut=ej.buildTag("div.e-dbrd-designer-arrowicon e-dbrd-designer-uparrow-icon","",{},{id:this.id+"sample_datasource_container_updown_arrowicon"}),y=ej.buildTag("div.e-dbrd-designer-sample-datasource-content","",{},{id:this.id+"sample_datasource_container_content"}),p=ej.buildTag("div.e-dbrd-designer-sample-datasource-footer","",{},{id:this.id+"sample_datasource_container_footer"}),w=ej.buildTag("span.e-split e-drop e-widget","",{display:"inline-block","margin-left":"10px"},{}),o=ej.buildTag("button.e-splitbutton e-js e-btn e-select e-split-btn e-ntouch e-left-btn e-droparrowright e-designer-click e-designer-button e-desinger-new-btn e-dbrd-hand-cursor","USE EXISTING",{padding:"0px 10px"},{id:this.id+"_btn_import_ds"}),b=ej.buildTag("span.e-split e-drop e-widget","",{display:"inline-block","margin-left":"10px"},{}),s=ej.buildTag("button.e-splitbutton e-js e-btn e-select e-split-btn e-ntouch e-left-btn e-droparrowright e-designer-click e-designer-button e-desinger-new-btn e-dbrd-hand-cursor","CREATE NEW",{padding:"0px 10px",display:this.dashboardDesigner.model.features.datasource.create?"block":"none"},{id:this.id+"_btn_newDataSet"});a.append(it);h="<p><b>"+this.dashboardDesigner.locale.dataSource.welcomeContent+"<\/b><\/p>";h+="<p style='padding-left:15px; padding-right:15px;'>"+this.dashboardDesigner.locale.dataSource.welcomeBodyContent+"<\/p>";v.append(rt,h);k="<span>"+this.dashboardDesigner.locale.dataSource.sampleDataSources+"<\/span>";e.append(k,ut);i.append(e);d="<span>"+this.dashboardDesigner.locale.dataSource.sampleDataSourceContent+"<\/span>";y.append(d);i.append(y);g="<span><u style='cursor:pointer'>"+this.dashboardDesigner.locale.dataSource.exploreSamples+"<\/u><\/span>";p.append(g);i.append(p);t.append(u);t.append(v);t.append(i);c.append(a);u.append(c);n.append(r);n.append(t);w.append(o);b.append(s);f.append(b,w);n.append(f);o.off("click",$.proxy(this.onSharedDsBtnClick,this));o.on("click",$.proxy(this.onSharedDsBtnClick,this));s.off("click",$.proxy(this.showContextMenu,this));s.on("click",$.proxy(this.showContextMenu,this));e.on("click",$.proxy(this.popupWindowPanel,this));u.ejScroller({scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14,scroll:$.proxy(this.onDataFieldScroll,this)})},n.prototype.headerMenuClick=function(n){n.text==="Datasources"&&this.switchPanel(PanelList.DataPanel)},n.prototype.renderSpliBtContextMenu=function(n,t){var i=ej.buildTag("ul.e-designer-menu","",{"border-radius":"4px",width:t},{id:this.id+"_ul_newDataSet"}),r=$("<li><span>Shared<\/span><\/li>"),u=$("<li><span>Create New<\/span><\/li>");i.append(r);i.append(u);n.append(i);i.ejMenu({menuType:ej.MenuType.ContextMenu,animationType:ej.AnimationType.None,openOnClick:!1,showArrow:!0,click:$.proxy(this.datasetType,this)})},n.prototype.datasetType=function(n){n.text==="Shared"?this.switchPanel(PanelList.SharedData):n.text==="Create New"&&this.switchPanel(PanelList.DataType)},n.prototype.getOffset=function(n){var t=n.offset(),i;return $("body").css("position")!=="static"&&(i=$("body").offset(),t.left-=i.left,t.top-=i.top),t},n.prototype.getXYpos=function(n,t){var i,u,f,r,e=1;return i=this.getOffset(n),u=i.left,r=i.top-t.outerHeight()+1-e,f=r<0?i.top+n.outerHeight()-e:r,{left:u,top:f}},n.prototype.showContextMenu=function(){this.switchPanel(PanelList.DataType)},n.prototype.popupWindowPanel=function(){var n=this.dataList.find("#"+this.id+"_datasetBodyContainer_Wrapper"),i=n.find("#"+this.id+"_datasetBodyContainer").css("display")!=="none",t;n.find("#"+this.id+"sample_datasource_container_updown_arrowicon").hasClass("e-dbrd-designer-uparrow-icon")?(t=n.height()-45,n.find("#"+this.id+"sample_datasource_container").animate({height:"45px"},500),this.updateBodyHeight(t,i,n),n.find("#"+this.id+"sample_datasource_container_updown_arrowicon").addClass("e-dbrd-designer-downarrow-icon").removeClass("e-dbrd-designer-uparrow-icon")):(t=n.height()-135,n.find("#"+this.id+"sample_datasource_container").animate({height:"135px"},500),this.updateBodyHeight(t,i,n),n.find("#"+this.id+"sample_datasource_container_updown_arrowicon").addClass("e-dbrd-designer-uparrow-icon").removeClass("e-dbrd-designer-downarrow-icon"))},n.prototype.updateBodyHeight=function(n,t,i){var u=this,r=null;t?(r=i.find("#"+this.id+"_datasetBodyContainer"),i.find("#"+this.id+"welcomettext_content").height(n)):(r=i.find("#"+this.id+"welcomettext_content"),i.find("#"+this.id+"_datasetBodyContainer").height(n));r.animate({height:n},500,function(){u.updateScrollerHeight(n)})},n.prototype.updateScrollerHeight=function(n){var i=this.dataList.find("#"+this.id+"_datasetBodyContainer_Wrapper"),t=i.find("#"+this.id+"_datasetBodyContainer");t.data("ejScroller").setModel({height:n});t.data("ejScroller").refresh()},n.prototype.editDataSetClick=function(n){for(var i=null,t=0;t<this.datasets.length;t++)if(this.datasets[t].Id===n.dataset){i=$.extend(!0,{},this.datasets[t]);break}this.isEdit=!0;i.SharedDataSet?this.switchPanel(PanelList.SharedData):this.showQueryDesigner(i)},n.prototype.datasourceSelection=function(n,t){this.newDatasource=null;this.showQueryDesigner(null,n,t)},n.prototype.deleteDataSetClick=function(n){n.column?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.dataSource.deleteDataField+n.datasetName+this.dashboardDesigner.locale.dataSource.questionmark,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{dataset:n.dataset,field:n.column},instance:this,method:"deletConfirmationField"}):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.DeleteDataSource,this.dashboardDesigner.locale.alertDialogTitle.dataSources+"&nbsp"+n.datasetName+"&nbsp"+this.dashboardDesigner.locale.alertWindowMesages.doYouWant+this.dashboardDesigner.locale.dataSource.questionmark,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{dataset:n.dataset},instance:this,method:"deletConfirmationData"})},n.prototype.deletConfirmationData=function(n,t){var r=null,i;n&&!ej.isNullOrUndefined(t)&&(i=this.datasets.filter(function(n){return n.Id===t.dataset}),i.length>0&&(r=i[0].Id),ejQueryDesigner.deleteDataSet(r,this.dashboardDesigner.model.serviceUrl))},n.prototype.removeDataSetItem=function(n){var t,r;if(!ej.isNullOrUndefined(n)&&n!==""){var i=ejDashboardDesigner.getInstance("DataSet"),f=ejDashboardDesigner.getInstance("DataSource"),e=ejDashboardDesigner.getInstance("ToolBar");e.removeFilterCondition(n);t=null;r=i.datasets.filter(function(t){return t.Id===n});r.length>0&&(t=r[0].PublishId);i.removeDataSet(n);var u=i.dataSource.datasources.filter(function(t){return t.Id===n})[0],o=ej.isNullOrUndefined(u.ProviderType)?u.ConnectionProperties.DataProvider:u.ProviderType,s=!ej.isNullOrUndefined(t)&&t!==""?t:null;ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Datasource,f.getDatasourceSubTypes(o),s)}},n.prototype.deletConfirmationField=function(n,t){n&&!ej.isNullOrUndefined(t)&&this.removeDataSetField(t.dataset,t.column)},n.prototype.editTagItem=function(n,t,i){var e=$("#"+this.id+"_tree_"+n.Id),f=this.getNodeTag(t.Name,"",!1,t.Id),u,r;for(e.replaceWith(f),u=ej.buildTag("ul.e-reportdesigner-nodeTag","",{"padding-left":"26px",display:"none"}),f.append(u),r=0;r<i.length;r++)u.append(this.getNodeTag(i[r].DataField,t.Id,!0,i[r].Id,i[r].TypeName))},n.prototype.appendItem=function(n,t,i,r,u){var s=$("#"+this.id+"_datasetBodyContainer"),e=this.getNodeTag(n,"",!1,t),h,f,o,c;for(ej.isNullOrUndefined(r)?this.dataSetLiTag.append(e):r===0?this.dataSetLiTag.prepend(e):$("#"+this.id+"_div_datasetUl>li:nth-child("+r+")").after(e),h=ej.buildTag("ul.e-reportdesigner-nodeTag","",{"padding-left":"26px",display:"none"}),e.append(h),f=0;f<i.length;f++)h.append(this.getNodeTag(i[f].DataField,t,!0,i[f].Id,i[f].TypeName));s.height()>s.find(".e-reportdesigner-treeView").height()?s.find(".e-content").removeClass("e-content"):this.scrollerRefresh(s);ej.isNullOrUndefined(u)||(o=e.find("#"+this.id+"_edit_"+t),u?(o.parent(".e-designer-edit-wrapper").attr("title",""),o.removeClass("disablededitbutton")):(c=this.dashboardDesigner.locale.saveDatasourceDialog.noEditPermissionText,o.parent(".e-designer-edit-wrapper").attr("title",c),o.addClass("disablededitbutton")))},n.prototype.treeNodeClick=function(n,t){t.stopPropagation();var i=$("#"+this.id+"_icon_"+n.dataset),u=$("#"+this.id+"_tree_"+n.dataset),r=u.children("ul");i.hasClass("e-reportdesigner-rightarrow")?(i.addClass("e-reportdesigner-dropdown").removeClass("e-reportdesigner-rightarrow"),r.find(".e-reportdesigner-treeRow").css("display","block")):(i.removeClass("e-reportdesigner-dropdown").addClass("e-reportdesigner-rightarrow"),r.find(".e-reportdesigner-treeRow").css("display","none"));r.slideToggle("slow",$.proxy(this.scrollerRefresh,this,$("#"+this.id+"_datasetBodyContainer")))},n.prototype.getNodeTag=function(n,t,i,r,u){var l="",o="",b={DataType:u,IsPrimaryKey:!1},y=$("#"+this.id+"_designerConfigurationPanel").width(),h,v,c,w;t?(l=t,o=n):l=n;var s=ej.buildTag("li.e-reportdesigner-nodeTag","",{},{id:this.id+"_tree_"+r+o}),f=ej.buildTag("div.e-reportdesigner-nodeContent e-treerow e-datafield","",{width:"100%",display:this.browserInfo.name==="mozilla"?"inline-flex":"block",height:"36px"},{id:this.id+"_text_"+t+r,name:n,"e-dataset":t}),p=ej.buildTag("div.e-designer-content-icon e-reportdesigner-treeIcon "+(i?"":"e-reportdesigner-rightarrow"),"",{padding:"4px","padding-top":"6px","font-size":"12px"},{id:this.id+"_icon_"+r}),k=ej.buildTag("div.e-designer-content-icon e-reportdesigner-treeIcon e-reportdesigner-datasourcelist e-designer-cursor","",{padding:"4px"},{}),e=ej.buildTag("a.e-reportdesigner-treeText e-designer-content e-designer-li-text",n,{width:y-120+"px",padding:i?"9px 0px":"10px 0px"},{}),a=ej.buildTag("a.e-tree-settings","",{display:"block","margin-right":this.browserInfo.name==="mozilla"?"0px":"20px","margin-left":this.browserInfo.name==="mozilla"?"5px":"0px","margin-top":"9px",float:"right"}),d=ej.buildTag("span.e-icon e-close_01 e-chk-image e-lv-checkdiv","",{float:"right","margin-right":"8px","margin-top":"-2px"},{});if(i)w=ej.buildTag("span.e-designer-content-icon e-designer-cursor "+ej.DashboardUtil.getDataTypeStyle(b),"",{display:"inline-block",padding:"7px 4px","margin-left":"15px","font-size":"18px"},{}),s.css({"border-bottom":"0px solid #dddddd"}),e.css({width:y-126+"px"}),f.append(w).append(e);else{s.css({"border-bottom":"0.5px solid #dddddd"});f.append(p).append(k).append(e);h=ej.buildTag("span.e-designer-content-icon e-reportdesigner-toolbar-delete e-reportdesigner-content-label e-tooltip e-designer-click","",{float:"right","margin-right":"0px","margin-left":"12px"},{id:this.id+"_delete_"+r,"e-target":this.id+"_datasetConfigMenu",title:ejDashboardDesigner.getInstance("DashboardDesigner").locale.dataSource.deleteContextMenu});a.append(h);v=ej.buildTag("div.e-designer-edit-wrapper","",{},{});c=ej.buildTag("span.e-designer-content-icon e-reportdesigner-parameter-edit e-reportdesigner-content-label e-tooltip e-designer-click editbutton","",{float:"right","margin-right":"2px","margin-left":"0px"},{id:this.id+"_edit_"+r,"e-target":this.id+"_datasetConfigMenu",title:ejDashboardDesigner.getInstance("DashboardDesigner").locale.dataSource.editContextMenu});v.append(c);a.append(v);f.bind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.treeNodeClick,this,{dataset:r}));p.bind("click",$.proxy(this.treeNodeClick,this,{dataset:r}));c.off("click",$.proxy(this.editDataSet,this,{dataset:r,datasetName:n}));c.on("click",$.proxy(this.editDataSet,this,{dataset:r,datasetName:n}));h.off("click",$.proxy(this.deleteDataset,this,{dataset:r,datasetName:n}));h.on("click",$.proxy(this.deleteDataset,this,{dataset:r,datasetName:n}))}return e.addClass(ej.DashboardUtil.isExistTextWidth(e)?"e-title-tip":""),s.append(f),f.append(a),i||f.addClass("e-datasource-title"),e.attr("title",o===""?l:o),d.bind("click",$.proxy(this.deleteDataSetClick,this,{dataset:r,column:o,datasetName:n})),s},n.prototype.getDragElement=function(n,t){var i=ej.buildTag("div","",{border:"0.5px solid #EDF1F4",background:"#EDF1F4",margin:"6px",height:"25px","border-radius":"1px","z-index":"50","white-space":"nowrap",overflow:"hidden"},{id:this.id+"_"+n+"_div"}),u=ej.buildTag("div","",{"margin-right":"3px","margin-left":"15px","margin-top":"3px",float:"left","font-size":"18px"},{id:this.id+"_dataseticon","class":t}),r=ej.buildTag("span.e-designer-fontfamily","",{overflow:"hidden","font-size":"12px",display:"inline-block","white-space":"nowrap","text-overflow":"ellipsis","margin-left":"2px","margin-top":"2px",width:"120px","vertical-align":"middle"},{id:this.id+"_"+n+"_text"});return r.text(n),i.append(u),i.append(r),i},n.prototype.deleteDataset=function(n){var t={dataset:n.dataset,column:"",datasetName:n.datasetName};this.deleteDataSetClick(t,null)},n.prototype.editDataSet=function(n){var t={dataset:n.dataset,column:"",datasetName:n.datasetName};this.editDataSetClick(t,null)},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh(!0)},n.prototype.showQueryDesigner=function(n,t,i){var r=ejDashboardDesigner.getInstance("Parameter");this.dashboardDesigner.showToolbar(!1);ejDashboardDesigner.getInstance("DataConfigurationPanel").resizeConfigurationPanel(!0);$("#"+this.id+"_designerConfigurationPanel").css("border-left-style","none");this.switchPanel(PanelList.QueryBuilder);ej.isNullOrUndefined(this.queryDesigner)&&(this.designUI.ejQueryDesigner({id:this.id,create:$.proxy(this.queryDesignerLoaded,this),toolbarSettings:{items:ej.QueryDesigner.ToolbarItems.All&~ej.QueryDesigner.ToolbarItems.SelectDataSource},serviceAuthorizationToken:this.dashboardDesigner.model.serviceAuthorizationToken,serviceUrl:this.dashboardDesigner.model.serviceUrl}),this.queryDesigner=this.designUI.data("ejQueryDesigner"));this.queryDesigner.callBackfn=$.proxy(this.queryDesignerResult,this);this.queryDesigner.credentials=this.dataSource.credential;this.queryDesigner.model.serviceUrl=this.dashboardDesigner.model.serviceUrl;this.queryDesigner.model.dataSources=$.extend(!0,[],this.dataSource.datasources);i&&i.Name&&(this.queryDesigner.model.dataSources.push(i),this.newDatasource=i);this.queryDesigner.model.parameters=$.extend(!0,{},r.parameters);this.queryDesigner.model.validateNames=this.getAvilableNames();n?(this.isEdit=!0,this.queryDesigner.editDataSet(n)):t?(this.isEdit=!1,this.queryDesigner.dataset=ejQueryDesigner.createDataSet(),this.queryDesigner.dataset.Id=ej.isNullOrUndefined(i)?ej.getGuid("Datasource_"):i.Id,this.queryDesigner.newDataSet(t)):(this.isEdit=!1,this.queryDesigner.newDataSet(null));ejDashboardDesigner.getInstance("QueryDesigner").showEditConnectionBtn()},n.prototype.queryDesignerLoaded=function(){var n={ejQueryDesigner:this.designUI.data("ejQueryDesigner")};this.dashboardDesigner.triggerEvents("queryDesignerRendered",n)},n.prototype.queryDesignerResult=function(n){$("#"+this.id+"_designerConfigurationPanel").css("border-left-style","solid");n.isCancel?this.cancelDataSet():this.saveDataSet(n.oldDataSet,n.newDataSet,n.parameters);this.dashboardDesigner.resizeObj.isDesigner?(ejDashboardDesigner.getInstance("ItemPanel").updateSize(),ejDashboardDesigner.getInstance("DesignPanel").updatePanelSize(),ejDashboardDesigner.getInstance("DataConfigurationPanel").updateSize(),this.dashboardDesigner.resizeObj.isDesigner=!1):this.scrollerRefresh($("#"+this.id+"_datasetBodyContainer"))},n.prototype.cancelDataSet=function(){this.newDatasource=null;this.isEdit=!1;this.dashboardDesigner.showToolbar(!0);ejDashboardDesigner.getInstance("DataConfigurationPanel").resizeConfigurationPanel(!1);this.dataSource.isDataPanel?this.switchPanel(PanelList.DataPanel):this.switchPanel(PanelList.DataList)},n.prototype.saveDataSet=function(n,t,i){ejDashboardDesigner.getInstance("DataConfigurationPanel").resizeConfigurationPanel(!1);this.dashboardDesigner.showToolbar(!0);ejDashboardDesigner.editManager.setMergeAction(!0);this.isEdit?this.updateDataSet(n,t):(this.newDatasource&&this.newDatasource.Name&&this.dataSource.addDataSource(this.newDatasource),this.addDataSet(t));i&&i.length>0&&ejDashboardDesigner.getInstance("Parameter").addParameters(i);ejDashboardDesigner.editManager.setMergeAction(!1);this.switchPanel(PanelList.DataList);this.isEdit=!1;this.newDatasource=null},n.prototype.getAvilableNames=function(){var n=[],t=$("#"+this.id+"_div_datasetUl>li>div>.e-reportdesigner-treeText");return t.each(function(t,i){n.push($(i).text())}),n},n.prototype.getAvailableName=function(){var t="DataSet",r=this.getAvilableNames(),n=0,i;do n++,i=r.indexOf(t+n);while(i!==-1);return t+n},n.prototype.showDatasetHint=function(){$("#"+this.id+"_div_datasetList li").length>0?(this.dataList.find("#"+this.id+"welcomettext_content").hide(),this.dataList.find("#"+this.id+"_datasetBodyContainer").css("display","block")):(this.dataList.find("#"+this.id+"welcomettext_content").show(),this.dataList.find("#"+this.id+"_datasetBodyContainer").css("display","none"))},n.prototype.onDataFieldScroll=function(n){n.cancel=this.dashboardDesigner.isItemDrag},n.prototype.updateDataListSize=function(){var u=this.targetContainer.height(),f=$("#"+this.id+"_datasetBodyContainer_Wrapper"),n=$("#"+this.id+"_datasetBodyContainer"),e=$("#"+this.id+"_datasetHeaderContainer").height(),o=$("#"+this.id+"sample_datasource_container").height(),s=$("#"+this.id+"_datasetFooterContainer").height(),i=u-(e+s),t=i-o,r;f.height(i);n.height(t);r=$("#"+this.id+"welcomettext_content");r.height(t);n.data("ejScroller")&&(n.data("ejScroller").setModel({height:t+"px"}),n.data("ejScroller").refresh())},n.prototype.updateSharedDataSize=function(){this.sharedDs.resize(this.targetContainer.height())},n.prototype.switchPanel=function(n){this.dataSource.isEdit=!1;this.dataSource.hideChildPanels();switch(n){case PanelList.DataList:this.dataSource.datasourceItem=null;this.dataSource.isDataPanel=!1;this.isEdit=!1;this.dataList.css("display","block");this.sharedDsTag.css("display","none");this.dataSource.dsTypeTag.css("display","none");this.dataSource.dsConfigTag.css("display","none");this.dataSource.dsListTag.css("display","none");this.designUI.css("display","none");break;case PanelList.SharedData:this.dataSource.datasourceItem=null;this.dataSource.isDataPanel=!1;this.dataList.css("display","none");this.sharedDsTag.css("display","block");this.dataSource.dsTypeTag.css("display","none");this.dataSource.dsConfigTag.css("display","none");this.dataSource.dsListTag.css("display","none");this.designUI.css("display","none");this.sharedDs.fetchDatasourceList(!1);break;case PanelList.DataType:this.dataSource.datasourceItem=null;this.dataList.css("display","none");this.sharedDsTag.css("display","none");this.dataSource.dsTypeTag.css("display","block");this.dataSource.dsConfigTag.css("display","none");this.dataSource.dsListTag.css("display","none");this.designUI.css("display","none");this.dataSource.resetDataSourceList();this.dataSource.enableDataChooser();break;case PanelList.ConfigPanel:this.dataList.css("display","none");this.sharedDsTag.css("display","none");this.dataSource.dsTypeTag.css("display","none");this.dataSource.dsConfigTag.css("display","block");this.dataSource.dsListTag.css("display","none");this.designUI.css("display","none");break;case PanelList.DataPanel:this.dataSource.datasourceItem=null;this.dataList.css("display","none");this.sharedDsTag.css("display","none");this.dataSource.dsTypeTag.css("display","none");this.dataSource.dsConfigTag.css("display","none");this.dataSource.dsListTag.css("display","block");this.designUI.css("display","none");break;case PanelList.QueryBuilder:this.dataSource.datasourceItem=null;this.dataList.css("display","none");this.sharedDsTag.css("display","none");this.dataSource.dsTypeTag.css("display","none");this.dataSource.dsConfigTag.css("display","none");this.dataSource.dsListTag.css("display","none");this.designUI.css("display","block");break;case PanelList.TemplatesPanel:this.dataList.css("display","none");this.sharedDsTag.css("display","none");this.dataSource.dsTypeTag.css("display","none");this.dataSource.dsConfigTag.css("display","none");this.dataSource.dsListTag.css("display","none");this.designUI.css("display","none");break;case PanelList.SampleData:this.dataSource.datasourceItem=null;this.dataList.css("display","none");this.sharedDsTag.css("display","block");this.dataSource.dsTypeTag.css("display","none");this.dataSource.dsConfigTag.css("display","none");this.dataSource.dsListTag.css("display","none");this.designUI.css("display","none");this.sharedDs.fetchDatasourceList(!0)}this.updatePanelSize()},n.prototype.showsampledatasources=function(n){n.preventDefault();this.switchPanel(PanelList.SampleData)},n.prototype.updatePanelSize=function(){this.resizeObj.isListPanel&&this.dataList.is(":visible")?(this.resizeObj.isListPanel=!1,this.updateDataListSize()):this.resizeObj.isSharedPanel&&this.sharedDsTag.is(":visible")?(this.resizeObj.isSharedPanel=!1,this.updateSharedDataSize()):this.resizeObj.isConfigPanel&&this.dataSource.dsConfigTag.is(":visible")?(this.resizeObj.isConfigPanel=!1,this.dataSource.updateDSConfigContainer()):this.resizeObj.isTypePanel&&this.dataSource.dsTypeTag.is(":visible")?(this.resizeObj.isTypePanel=!1,this.dataSource.updateDSTypeContainer()):this.resizeObj.isDataPanel&&this.dataSource.dsListTag.is(":visible")?(this.resizeObj.isDataPanel=!1,this.dataSource.updateDSListContainer()):this.queryDesigner&&this.queryDesigner.isRendered()&&this.designUI.is(":visible")&&this.dashboardDesigner.resizeObj.isQueryDesigner&&(this.designUI.width(this.targetContainer.width()),this.dashboardDesigner.resizeObj.isQueryDesigner=!1)},n.prototype.updateSize=function(){this.isLoaded()&&(this.resizeObj.isListPanel=this.resizeObj.isTypePanel=this.resizeObj.isConfigPanel=this.resizeObj.isSharedPanel=this.resizeObj.isDataPanel=!0,this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource?this.targetContainer.css("height","100%"):this.targetContainer.height($("#"+this.id+"_designerConfigurationPanel").height()),this.designUI.height(this.targetContainer.height()),this.dataList.is(":visible")?(this.updateDataListSize(),this.resizeObj.isListPanel=!1):this.sharedDsTag.is(":visible")?(this.updateSharedDataSize(),this.resizeObj.isSharedPanel=!1):this.dataSource.dsTypeTag.is(":visible")?(this.dataSource.updateDSTypeContainer(),this.resizeObj.isTypePanel=!1):this.dataSource.dsConfigTag.is(":visible")||this.dataSource.isWebTemplatesVisible()?(this.dataSource.updateDSConfigContainer(),this.resizeObj.isConfigPanel=!1):this.dataSource.dsListTag.is(":visible")&&(this.dataSource.updateDSListContainer(),this.resizeObj.isDataPanel=!1),this.queryDesigner&&this.queryDesigner.isRendered()&&this.designUI.is(":visible")&&this.dashboardDesigner.resizeObj.isQueryDesigner&&(this.dashboardDesigner.resizeObj.isQueryDesigner=!1))},n.prototype.wiredEvents=function(){this.dataList.on("click",".e-dbrd-designer-sample-datasource-footer",$.proxy(this.showsampledatasources,this))},n.prototype.updateCulture=function(){},n.prototype.unWiredEvents=function(){this.dataList.off("click",".e-dbrd-designer-sample-datasource-footer",$.proxy(this.showsampledatasources,this))},n.prototype.onSharedDsBtnClick=function(){this.switchPanel(PanelList.SharedData)},n}();window.ej.createObject("ej.DashboardDesignerUtility.DataSet",InternalDataSet,window),function(n){n[n.DataList=0]="DataList";n[n.DataPanel=1]="DataPanel";n[n.SharedData=2]="SharedData";n[n.DataType=3]="DataType";n[n.ConfigPanel=4]="ConfigPanel";n[n.QueryBuilder=5]="QueryBuilder";n[n.TemplatesPanel=6]="TemplatesPanel";n[n.SampleData=7]="SampleData"}(PanelList||(PanelList={}));InternalDataSource=function(){function n(){this.dataSourceSearchTimer=-1;this.searchText="";this.selectedCategory=DataSourceCategory.all;this.isDataPanel=!1;this.isCsvFirstRowHeader=!0;this.titleConfig=null;this.ejDataSourceDwn=null;this.ajaxPost=null;this.rdlParser=ejDashboardDesigner.getInstance("RDLParser");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.datasources=this.rdlParser.rdlJsonObj.DataSources;this.webDsTemplateInstance=new ej.DashboardDesignerUtility.WebDsTemplate(this.dashboardDesigner,$.proxy(this.resetConfigTable,this));this.linkedAccountsInstance=new ej.DashboardDesignerUtility.LinkedAccounts(this.dashboardDesigner,$.proxy(this.resetConfigTable,this),this);this.dataSourceLocale=this.dashboardDesigner.locale.dataSource;this.isEdit=!1;this.dataExtension=[];this.credential={}}return Object.defineProperty(n,"DataSource",{get:function(){return(this.dataSource===null||this.dataSource===undefined)&&(this.dataSource=new ej.DashboardDesignerUtility.DataSource),this.dataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ReconnectDataSource",{get:function(){return(this.editdataSource===null||this.editdataSource===undefined)&&(this.editdataSource=new ej.DashboardDesignerUtility.DataSource),this.editdataSource},enumerable:!0,configurable:!0}),n.prototype.updateDataSourceJSON=function(){this.datasources=this.rdlParser.rdlJsonObj.DataSources;this.credential={}},n.prototype.pouplateDataSources=function(){if($("#"+this.id+"_dsListContainer li").remove(),this.credential={},this.datasources=this.rdlParser.rdlJsonObj.DataSources,!ej.isNullOrUndefined(this.datasources)&&this.datasources.length>0)for(var n=0;n<this.datasources.length;n++)this.appendItem(this.datasources[n].Name,this.datasources[n].Id);this.showDataSourceHint()},n.prototype.updateDataSource=function(n,t){if(this.updateItem(n.Name,t.Name),!ej.isNullOrUndefined(this.datasources)&&this.datasources.length>0){for(var i=0;i<this.datasources.length;i++)if(this.datasources[i].Name===n.Name){this.datasources[i]=t;break}ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataSourceEdit,"updateDataSource","DataSource","",[t,n],[n,t])}},n.prototype.insertDataSource=function(n,t){t===0?this.datasources.unshift(n):this.datasources.splice(t,0,n);this.appendItem(n.Name,n.Id,t);this.showDataSourceHint()},n.prototype.addDataSource=function(n){this.datasources.push(n);this.appendItem(n.Name,n.Id);ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataSourceAdd,"removeDataSource","DataSource","",[n,this.datasources.length-1],[n.Name]);this.showDataSourceHint()},n.prototype.removeDataSource=function(n){var t,i;if($("#"+this.id+"_li_"+n).remove(),this.updateContainerBorder(),!ej.isNullOrUndefined(this.datasources)&&this.datasources.length>0)for(t=0;t<this.datasources.length;t++)if(this.datasources[t].Name===n){i=$.extend(!0,{},this.datasources[t]);ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataSourceDelete,"insertDataSource","DataSource","",[i.Name],[i,t]);this.datasources.splice(t,1);break}this.showDataSourceHint()},n.prototype.showIndicator=function(){var n=$("#"+this.id+"_dsConfig_BodyContainer").data("ejWaitingPopup");n.option("text",this.getWaitingTextIfAny());n.show();ej.DashboardUtil.buttonEnable($("#"+this.id+"_btn_connect"),!1)},n.prototype.hideIndicator=function(){var n=$("#"+this.id+"_dsConfig_BodyContainer").data("ejWaitingPopup");n.option("text","");n.hide();ej.DashboardUtil.buttonEnable($("#"+this.id+"_btn_connect"),!0)},n.prototype.getWaitingTextIfAny=function(){var n="";return this.dsInfo&&(this.dsInfo.Provider==="Salesforce"?n=this.dashboardDesigner.locale.salesForceDataSource.waitingPopupText:this.dsInfo.Provider==="File"?n=this.dashboardDesigner.locale.dataSource.fileWaitingPopupText:ej.isNullOrUndefined(this.dsInfo.OAuthConnection)||this.dsInfo.OAuthConnection.Provider!==ej.DashboardDesignerUtility.Serialization.enumToString(OAuthProvider,OAuthProvider.Google)||this.dsInfo.OAuthConnection.Service!=="analytics"||(n=this.dashboardDesigner.locale.dataSource.googleAnalyticsWaitingPopupText)),n},n.prototype.updateItem=function(n,t){var i=$("#"+this.id+"_designerConfigurationPanel").width()-66;$("#"+this.id+"_li_"+n).unbind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableEdit,this,n));$("#"+this.id+"_li_"+n).unbind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableEdit,this,n));$("#"+this.id+"_li_"+n+" .e-chk-image").unbind("click",$.proxy(this.editDataSourceItem,this,n));$("#"+this.id+"_"+n).unbind("click",$.proxy(this.editDataSourceItem,this,n));$("#"+this.id+"_li_"+n).find(".e-title-tip").unbind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(ej.DashboardUtil.getInstance().tagOverTip,this,n));$("#"+this.id+"_li_"+n).find(".e-title-tip").unbind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(ej.DashboardUtil.getInstance().tagOutTip,this,n));$("#"+this.id+"_li_"+n+" .e-list-text").text(t);$("#"+this.id+"_li_"+n).attr("name",t);$("#"+this.id+"_li_"+n).attr("id",this.id+"_li_"+t);$("#"+this.id+"_"+n).attr("id",this.id+"_"+t);$("#"+this.id+"_li_"+t).bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableEdit,this,t));$("#"+this.id+"_li_"+t).bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableEdit,this,t));$("#"+this.id+"_li_"+t+" .e-chk-image").bind("click",$.proxy(this.editDataSourceItem,this,t));$("#"+this.id+"_"+t).bind("click",$.proxy(this.editDataSourceItem,this,t));ej.DashboardUtil.textWidth(t,"segoe ui 12px")>=i?$("#"+this.id+"_li_"+t).find(".e-designer-content").addClass("e-title-tip"):$("#"+this.id+"_li_"+t).find(".e-designer-content").removeClass("e-title-tip")},n.prototype.appendItem=function(n,t,i){var o=$("#"+this.id+"_designerConfigurationPanel").width()-66,r=ej.buildTag("li.e-user-select e-list e-state-default e-list-check e-designer-datasource-list e-designer-cursor","",{padding:"0px"},{id:this.id+"_li_"+t,name:n}),s=ej.buildTag("span.e-designer-content-icon e-reportdesigner-treeIcon e-reportdesigner-datasourcelist e-designer-cursor","",{margin:"1px 9px"}),f=ej.buildTag("a.e-chevron-right_01 e-remove-shadow","",{padding:"9px 0px"},{}),u,e;r.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableEdit,this,t));r.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableEdit,this,t));u=ej.buildTag("span.e-list-text e-rel e-user-select e-designer-content e-content-bold e-designer-li-text "+(ej.DashboardUtil.textWidth(n,"segoe ui 12px")>=o?"e-title-tip":""),n,{width:o+"px","margin-top":"2px"});f.append(s).append(u);u.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableEdit,this,t));u.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableEdit,this,t));e=ej.buildTag("span.e-designer-content-icon e-reportdesigner-single-drag e-designer-click","",{display:"none",float:"right","margin-right":"5px","margin-top":"1.5px"},{id:this.id+"_"+t,"e-target":this.id+"_dsConfigMenu"});f.append(e);e.bind("click",$.proxy(this.editDataSourceItem,this,t));r.append(f);ej.isNullOrUndefined(i)?$("#"+this.id+"_dsListContainer ul").append(r):i===0?$("#"+this.id+"_dsListContainer ul").prepend(r):$("#"+this.id+"_dsListContainer ul>li:nth-child("+i+")").after(r);this.updateContainerBorder()},n.prototype.updateContainerBorder=function(){$("#"+this.id+"_dsListContainer li").length===0?$("#"+this.id+"_dsListContainer").css("border-top-width","0px"):$("#"+this.id+"_dsListContainer").css("border-top-width","1px")},n.prototype.getDSInstance=function(){switch(this.configTable.data("selected").trim().toLowerCase()){case"e-sql":return ejDashboardDesigner.getInstance("SQLDataSource");case"e-azuresqldw":return ejDashboardDesigner.getInstance("AzureSQLDataWarehouseDataSource");case"e-mongodb":return ejDashboardDesigner.getInstance("MongoDB");case"e-sqlce":return ejDashboardDesigner.getInstance("SqlCeDataSource");case"e-odbc":return ejDashboardDesigner.getInstance("ODBCDataSource");case"e-oracle":return ejDashboardDesigner.getInstance("ORACLEDataSource");case"e-oledb":return ejDashboardDesigner.getInstance("OLEDBDataSource");case"e-xml":return ejDashboardDesigner.getInstance("XMLDataSource");case"e-shared":return ejDashboardDesigner.getInstance("SharedDataSource");case"e-odata":return ejDashboardDesigner.getInstance("ODATADataSource");case"e-redshift":case"e-psql":return ejDashboardDesigner.getInstance("PSQLDataSource");case"e-sass":return ejDashboardDesigner.getInstance("SASSDataSource");case"e-mysql":case"e-mariadb":case"e-memsql":return ejDashboardDesigner.getInstance("MySQLDatasource");case"e-file":return ejDashboardDesigner.getInstance("FileDatasource");case"e-web":case"e-oauth":return ejDashboardDesigner.getInstance("WebDatasource");case"e-oauth-salesforce":return ejDashboardDesigner.getInstance("SalesForceDataSource");case"e-amazon-aurora":return ejDashboardDesigner.getInstance("AmazonAuroraDataSource");case"e-google-cloud":return ejDashboardDesigner.getInstance("GoogleCloudDataSource");case"e-oauth-salesforce-reports":return ejDashboardDesigner.getInstance("SalesforceReportsDataSource")}},n.prototype.connectDatasource=function(){var o=this.configTable.data("selected"),u=this.validateDataSourceName(),s=u.isAvailable,t=!1,n,r,e,i,f;this.dashboardDesigner.isExecute=!1;n=null;r=null;switch(o){case"e-sql":n=ejDashboardDesigner.getInstance("SQLDataSource");break;case"e-azuresqldw":n=ejDashboardDesigner.getInstance("AzureSQLDataWarehouseDataSource");break;case"e-mongodb":n=ejDashboardDesigner.getInstance("MongoDB");t=!0;break;case"e-sqlce":n=ejDashboardDesigner.getInstance("SqlCeDataSource");break;case"e-odbc":n=ejDashboardDesigner.getInstance("ODBCDataSource");break;case"e-oracle":n=ejDashboardDesigner.getInstance("ORACLEDataSource");break;case"e-oledb":n=ejDashboardDesigner.getInstance("OLEDBDataSource");break;case"e-xml":if(e=ejDashboardDesigner.getInstance("XMLDataSource"),i=e.getDatasourceInfo(u.name,this.datasourceItem),ej.isNullOrUndefined(i))return;if(!i.ConnectionString){this.dsInfo=i;this.validateConnection("true");return}this.dsInfo=i;break;case"e-odata":n=ejDashboardDesigner.getInstance("ODATADataSource");break;case"e-redshift":case"e-psql":n=ejDashboardDesigner.getInstance("PSQLDataSource");break;case"e-sass":n=ejDashboardDesigner.getInstance("SASSDataSource");break;case"e-file":n=ejDashboardDesigner.getInstance("FileDatasource");t=!0;break;case"e-mysql":case"e-memsql":case"e-mariadb":n=ejDashboardDesigner.getInstance("MySQLDatasource");break;case"e-oauth-salesforce":n=ejDashboardDesigner.getInstance("SalesForceDataSource");t=!0;break;case"e-oauth-salesforce-reports":n=ejDashboardDesigner.getInstance("SalesforceReportsDataSource");t=!0;break;case"e-web":case"e-oauth":n=ejDashboardDesigner.getInstance("WebDatasource");t=!0;break;case"e-amazon-aurora":n=ejDashboardDesigner.getInstance("AmazonAuroraDataSource");break;case"e-google-cloud":n=ejDashboardDesigner.getInstance("GoogleCloudDataSource")}ej.isNullOrUndefined(n)||(r=n.getDatasourceInfo(u.name,this.datasourceItem),ej.isNullOrUndefined(r))||(this.dsInfo=r,s&&this.dsInfo&&(this.dsInfo.Id=ej.getGuid("Datasource_"),t?(f=ej.DashboardDesignerUtility.DesignerHub.DesignerHub,f.GetStatusFromServer("GetStatusFromServer",{indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)],fnction:$.proxy(this.intermediateDbActionResponse,this,!1)}),f.StartHubConnection({indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)],fnction:$.proxy(this.fetchSchema,this)})):this.ajaxPost=ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.testConnection,datasource:this.encryptPostBack(this.dsInfo),mode:this.dashboardDesigner.model.mode})},{fnction:$.proxy(this.validateConnection,this),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]})))},n.prototype.fetchSchema=function(){var n=ej.DashboardDesignerUtility.DesignerHub.DesignerHub,t=n.connectionId;this.ajaxPost=ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/validateconnection/",{action:ej.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.testConnection,datasource:this.encryptPostBack(this.dsInfo),clientid:t})},{})},n.prototype.encryptPostBack=function(n){var t=$.extend(!0,{},n);return t.ConnectionString=ej.DashboardUtil.encryptData(t.ConnectionString),t.Username=ej.DashboardUtil.encryptData(t.Username),t.Password=ej.DashboardUtil.encryptData(t.Password),t},n.prototype.connectQueryDesigner=function(){this.newQueryDesigner(this.ejDataSourceDwn.getSelectedValue())},n.prototype.getConStringArgs=function(n){for(var i,r=n.split(";"),u={},t=0;t<r.length;t++)r[t]&&(i=r[t].split("="),u[i[0].toLowerCase()]={field:i[0],value:i[1]});return u},n.prototype.intermediateDbActionResponse=function(n,t){if(t)if(t.Data.IgnoreSchemaFetch)this.validateConnection("true");else{var i=new ej.DashboardDesignerUtility.TableSelector(this.dsInfo,n);i.showDialog(JSON.parse(t.Data))}},n.prototype.validateConnection=function(n){var r,t,i,u;n.result==="true"||n==="true"?(ej.isNullOrUndefined(n.data)?(t=this.constructCon(),ej.isNullOrUndefined(this.dashboardDesigner.model.mode)||this.dashboardDesigner.model.mode!==ej.dashboardDesigner.mode.connection?this.connectDataSource(t):(i=ejQueryDesigner.createDataSet(),i.Name=t.Name,i.Id=t.Id,ej.isNullOrUndefined(this.dashboardDesigner.model.serviceAuthorizationToken)||this.dashboardDesigner.model.serviceAuthorizationToken===""||(u=new ej.DashboardDesignerUtility.DatasourceSaveDialog(t,i,$.proxy(this.onActionSuccess,this)),u.trySavingDataSource($.proxy(this.dashboardDesigner.showWaitingPopupConnectionMode,this.dashboardDesigner,!1),$.proxy(this.dashboardDesigner.hideWaitingPopupConnectionMode,this.dashboardDesigner,!1))))):(r=new ej.DashboardDesignerUtility.TableSelector(this.dsInfo,!1),r.showDialog(n.data,n.table)),this.isEdit=!1):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSource,this.dashboardDesigner.locale.errorMessage.failedToConnectDataSource,IconType.information,AlertType.Alert,!1,n,{});ej.isNullOrUndefined(this.ajaxPost)||(this.ajaxPost.abort(),this.ajaxPost=null)},n.prototype.onActionSuccess=function(n){if(n){var t={element:null,data:n},i={mode:ej.dashboardDesigner.mode.connection,event:"createConnection",source:t};this.dashboardDesigner._trigger("actionComplete",{eventType:DashboardDesignerEvent.SaveConnection,data:i})}},n.prototype.connectDataSource=function(n){this.isDataPanel||$("#"+this.id+"_btn_connect").hasClass("e-btn-mode-save")?(this.isEdit?this.updateDataSource(this.datasourceItem,n):this.addDataSource(n),ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataPanel)):this.isEdit?(this.updateDataSource(this.datasourceItem,n),ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataList)):this.newQueryDesigner(n.Id,n)},n.prototype.setButtonTxt=function(){this.isEdit||this.isDataPanel?$("#"+this.id+"_btn_connect").text("Save").addClass("e-btn-mode-save").removeClass("e-connect"):$("#"+this.id+"_btn_connect").text("Connect").addClass("e-connect").removeClass("e-btn-mode-save")},n.prototype.constructCon=function(){var n=this.isEdit?$.extend(!0,{},this.datasourceItem):ej.DashboardUtil.createDataSource();return n.Name=this.dsInfo.Name,n.Id=this.dsInfo.Id,n.ServerName=this.dsInfo.ServerName,this.dsInfo.Provider!=="shared"?(this.getDSInstance().UpdateDSInfo(n,this.dsInfo),this.credential[n.Name]={UserName:this.dsInfo.Username,PassWord:this.dsInfo.Password}):(n.ConnectionProperties=null,n.DataSourceReference=this.dsInfo.ConnectionString),n},n.prototype.enableEdit=function(n){$("#"+this.id+"_"+n).css("display","block")},n.prototype.disableEdit=function(n){$("#"+this.id+"_"+n).css("display","none")},n.prototype.contextMenuClick=function(n){var t=$("#"+this.id+"_dsConfigMenu").attr("datasoure");switch(n.text){case this.dashboardDesigner.locale.dataSource.editContextMenu:this.editDataSource(t);break;case this.dashboardDesigner.locale.dataSource.deleteContextMenu:ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSource,this.dashboardDesigner.locale.dataSource.deleteDataSource+t+this.dashboardDesigner.locale.dataSource.questionmark,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{name:t},instance:this,method:"deletConfirmation"});break;case"Create DataSet":this.newQueryDesigner(t)}},n.prototype.deletConfirmation=function(n,t){n&&!ej.isNullOrUndefined(t)&&this.removeDataSource(t.name)},n.prototype.newQueryDesigner=function(n,t){var i=ejDashboardDesigner.getInstance("DataSet");i.datasourceSelection(n,t)},n.prototype.editDataSource=function(n){var t,i,r,u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d,g;if(!ej.isNullOrUndefined(this.datasources)&&this.datasources.length>0)for(t=0;t<this.datasources.length;t++)if(this.datasources[t].Name===n){i=this.datasources[t].DataSourceReference?"Shared":this.datasources[t].ConnectionProperties.DataProvider;ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.ConfigPanel);this.isEdit=!0;this.resetConfigurationPanel();this.datasourceItem=this.datasources[t];this.setHeaderType(!0);this.setDataSourceName(this.datasources[t]);this.setButtonTxt();this.configTable.children().hide();switch(i){case"SQL":this.configTable.data("selected","e-sql");r=ejDashboardDesigner.getInstance("SQLDataSource");this.showToggleOption(!0);r.editConfiguration(this.configTable,this.datasources[t]);break;case"AzureSQLDataWarehouse":this.configTable.data("selected","e-azuresqldw");u=ejDashboardDesigner.getInstance("AzureSQLDataWarehouseDataSource");this.showToggleOption(!0);u.editConfiguration(this.configTable,this.datasources[t]);break;case"MongoDB":this.configTable.data("selected","e-mongodb");f=ejDashboardDesigner.getInstance("MongoDB");this.showToggleOption(!0);f.editConfiguration(this.configTable,this.datasources[t]);break;case"SQLCe":this.configTable.data("selected","e-sqlce");e=ejDashboardDesigner.getInstance("SqlCeDataSource");this.showToggleOption(!1);e.editConfiguration(this.datasources[t]);break;case"ODBC":this.configTable.data("selected","e-odbc");o=ejDashboardDesigner.getInstance("ODBCDataSource");this.showToggleOption(!1);o.editConfiguration(this.datasources[t]);break;case"ORACLE":this.configTable.data("selected","e-oracle");s=ejDashboardDesigner.getInstance("ORACLEDataSource");this.showToggleOption(!1);s.editConfiguration(this.configTable,this.datasources[t]);break;case"OLEDB":this.configTable.data("selected","e-oledb");h=ejDashboardDesigner.getInstance("OLEDBDataSource");this.showToggleOption(!1);h.editConfiguration(this.datasources[t]);break;case"XML":this.configTable.data("selected","e-xml");c=ejDashboardDesigner.getInstance("XMLDataSource");this.showToggleOption(!1);c.editConfiguration(this.datasources[t]);break;case"OData":this.configTable.data("selected","e-odata");l=ejDashboardDesigner.getInstance("ODATADataSource");this.showToggleOption(!1);l.editConfiguration(this.datasources[t]);break;case"PostgreSQL":this.configTable.data("selected","e-psql");a=ejDashboardDesigner.getInstance("PSQLDataSource");this.showToggleOption(!1);a.editConfiguration(this.configTable,this.datasources[t]);break;case"Redshift":this.configTable.data("selected","e-redshift");v=ejDashboardDesigner.getInstance("PSQLDataSource");this.showToggleOption(!1);v.editConfiguration(this.configTable,this.datasources[t]);break;case"Microsoft SQL Server Analysis Services":this.configTable.data("selected","e-sass");y=ejDashboardDesigner.getInstance("SASSDataSource");this.showToggleOption(!1);y.editConfiguration(this.datasources[t]);break;case"File":this.configTable.data("selected","e-file");p=ejDashboardDesigner.getInstance("FileDatasource");this.showToggleOption(!1);p.editConfiguration(this.configTable,this.datasources[t]);break;case"MySQL":this.configTable.data("selected","e-mysql");w=ejDashboardDesigner.getInstance("MySQLDatasource");this.showToggleOption(!1);w.editConfiguration(this.configTable,this.datasources[t]);break;case"MariaDB":this.configTable.data("selected","e-mariadb");b=ejDashboardDesigner.getInstance("MySQLDatasource");this.showToggleOption(!1);b.editConfiguration(this.configTable,this.datasources[t]);break;case"MemSQL":this.configTable.data("selected","e-memsql");k=ejDashboardDesigner.getInstance("MySQLDatasource");this.showToggleOption(!1);k.editConfiguration(this.configTable,this.datasources[t]);break;case"AmazonAuroraMySQL":case"AmazonAuroraPostgreSQL":this.configTable.data("selected","e-amazon-aurora");d=ejDashboardDesigner.getInstance("AmazonAuroraDataSource");this.showToggleOption(!1);d.editConfiguration(this.configTable,this.datasources[t]);break;case"GoogleCloudMySQL":case"GoogleCloudPostgreSQL":this.configTable.data("selected","e-google-cloud");g=ejDashboardDesigner.getInstance("GoogleCloudDataSource");this.showToggleOption(!1);g.editConfiguration(this.configTable,this.datasources[t])}}},n.prototype.editDataSourceItem=function(n){var i=$("#"+this.id+"_"+n),r=i.offset(),t=$("#"+this.id+"_dsConfigMenu").data("ejMenu");t.element.attr("datasoure",n);t.element.is(":visible")?t.hide():t.show(r.left-$("#"+this.id+"_dsConfigMenu").width(),r.top+i.height(),this.dsListTag,n)},n.prototype.renderContextMenu=function(n){var t=ej.buildTag("ul.e-designer-menu","",{},{id:this.id+"_dsConfigMenu"}),i=this.dashboardDesigner.locale.dataSource;t.append("<li><a class='editContextMenu'>"+i.editContextMenu+"<\/a><\/li>");t.append("<li><a class='datasetContextMenu'>Create DataSet<\/a><\/li>");t.append("<li><a class='deleteContextMenu'>"+i.deleteContextMenu+"<\/a><\/li>");n.append(t);t.ejMenu({menuType:ej.MenuType.ContextMenu,openOnClick:!1,ontextMenuTarget:"#"+this.id+"_dataSourceTag",width:140,click:$.proxy(this.contextMenuClick,this)})},n.prototype.showToggleOption=function(n){$("#"+this.id+"_switchCont").css("display",n?"block":"none");this.updateDSConfigContainer()},n.prototype.resetConfigurationPanel=function(){$("#"+this.id+"_basicPanel").css("display","table-row");ej.isNullOrUndefined(this.dashboardDesigner.model.mode)||this.dashboardDesigner.model.mode!==ej.dashboardDesigner.mode.connection?$("#"+this.id+"_basicPanel").css("display","table-row"):$("#"+this.id+"_basicPanel").css("display","block");$("#"+this.id+"_panelSwitch").text(this.dashboardDesigner.locale.dataSource.advanceOptionText);this.dsInfo=null;this.datasourceItem=this.isEdit?this.datasourceItem:null},n.prototype.resetConfigTable=function(n){this.setButtonTxt();this.resetConfigurationPanel();this.showValidationMsg(this.id+"_datasource_dsname",!1);this.setHeaderType(!1);this.setDataSourceName();this.configTable.data("selected",n);this.configTable.children().hide()},n.prototype.isOAuthConnector=function(n){return n.indexOf("e-oauth-")!==-1},n.prototype.isWebExtension=function(n){return n.indexOf("e-web-")!==-1},n.prototype.getDataSourceHeaderTemplate=function(n){var t,i="<span class='e-dbrd-designer-webds-template-header-icon "+n.cssClass+"'><\/span><label class='e-dbrd-designer-webds-template-header-label'>"+n.name+"<\/label>";return ej.isNullOrUndefined(n.docUrl)?i:(t="<a class='e-dbrd-designer-webds-template-header-link' href='"+n.docUrl+"' target='_blank'>"+n.name+this.dashboardDesigner.locale.dataSource.webDataSource.apiDocumentationText+"<\/a>",i+t)},n.prototype.updateDataSourceHeader=function(n,t){t.html(this.getDataSourceHeaderTemplate(n))},n.prototype.newDatabase=function(n){var e,r=$(n.target).attr("itemType"),o=$(n.currentTarget).find(".e-designer-tile-content").text(),i,f,u,t;if(this.connectButton.setModel({width:"110px"}),this.connectButton.element.html("Connect"),ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Selected,ActivityLogItemType.Datasource,this.getDatasourceSubTypes(o),null),i=null,e=r==="e-file"?o:r,f=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(e,this.dashboardDesigner.locale),ej.isNullOrUndefined(f)||this.updateDataSourceHeader(f,this.titleConfig),this.isOAuthConnector(r)){u=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(r,this.dashboardDesigner.locale);this.linkedAccountsInstance.showDialog(u,this.configTable,this.fncPanelSwitcher);return}if(this.isWebExtension(r)){ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.TemplatesPanel);u=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(r,this.dashboardDesigner.locale);this.webDsTemplateInstance.showTemplates(this.fncPanelSwitcher,u,this.configTable);this.connectButton.setModel({width:"150px"});this.connectButton.element.html(this.dashboardDesigner.locale.dataSource.previewAndConnect);return}ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.ConfigPanel);this.resetConfigTable(r);t=null;switch(r){case"e-sql":t=ejDashboardDesigner.getInstance("SQLDataSource");i="_newConnection";break;case"e-azuresqldw":t=ejDashboardDesigner.getInstance("AzureSQLDataWarehouseDataSource");i="_newConnection";break;case"e-mongodb":t=ejDashboardDesigner.getInstance("MongoDB");i="_newConnection";break;case"e-sqlce":t=ejDashboardDesigner.getInstance("SqlCeDataSource");break;case"e-odbc":t=ejDashboardDesigner.getInstance("ODBCDataSource");break;case"e-oracle":t=ejDashboardDesigner.getInstance("ORACLEDataSource");break;case"e-oledb":t=ejDashboardDesigner.getInstance("OLEDBDataSource");break;case"e-xml":t=ejDashboardDesigner.getInstance("XMLDataSource");break;case"e-shared":t=ejDashboardDesigner.getInstance("SharedDataSource");break;case"e-odata":t=ejDashboardDesigner.getInstance("ODATADataSource");break;case"e-redshift":case"e-psql":t=ejDashboardDesigner.getInstance("PSQLDataSource");i="_newConnection";break;case"e-sass":t=ejDashboardDesigner.getInstance("SASSDataSource");break;case"e-file":t=ejDashboardDesigner.getInstance("FileDatasource");i="_newConnection";break;case"e-mysql":case"e-mariadb":case"e-memsql":t=ejDashboardDesigner.getInstance("MySQLDatasource");i="_newConnection";break;case"e-web":t=ejDashboardDesigner.getInstance("WebDatasource");i="_newConnection";break;case"e-amazon-aurora":t=ejDashboardDesigner.getInstance("AmazonAuroraDataSource");i="_newConnection";break;case"e-google-cloud":t=ejDashboardDesigner.getInstance("GoogleCloudDataSource");i="_newConnection"}ej.isNullOrUndefined(t)||(ej.isNullOrUndefined(i)||r!=="e-redshift"?ej.isNullOrUndefined(i)||r!=="e-mariadb"&&r!=="e-memsql"?ej.isNullOrUndefined(i)?t.renderConfiguration(this.configTable):t.renderConfiguration(this.configTable,i):t.renderConfiguration(this.configTable,i,r):t.renderConfiguration(this.configTable,i,r));this.isPreviewButtonApplicable(r)&&(this.connectButton.setModel({width:"150px"}),this.connectButton.element.html(this.dashboardDesigner.locale.dataSource.previewAndConnect));this.updateEJComponentSize();this.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.isPreviewButtonApplicable=function(n){return this.isOAuthConnector(n)||n==="e-file"||n==="e-web"},n.prototype.getDatasourceSubTypes=function(n){switch(n){case this.dashboardDesigner.locale.dataSource.dataSourceType.mariadb:return ActivityLogItemSubTypes.MariaDB;case this.dashboardDesigner.locale.dataSource.dataSourceType.memsql:return ActivityLogItemSubTypes.MemSQL;case this.dashboardDesigner.locale.dataSource.dataSourceType.redshift:return ActivityLogItemSubTypes.Redshift;case this.dashboardDesigner.locale.dataSource.dataSourceType.askNicely.name:return ActivityLogItemSubTypes.AskNicely;case this.dashboardDesigner.locale.dataSource.dataSourceType.callRail.name:return ActivityLogItemSubTypes.CallRail;case this.dashboardDesigner.locale.dataSource.dataSourceType.campaignMonitor.name:return ActivityLogItemSubTypes.CampaignMonitor;case this.dashboardDesigner.locale.dataSource.dataSourceType.chargify.name:return ActivityLogItemSubTypes.Chargify;case this.dashboardDesigner.locale.dataSource.dataSourceType.chartMogul.name:return ActivityLogItemSubTypes.ChartMogul;case this.dashboardDesigner.locale.dataSource.dataSourceType.chartBeat.name:return ActivityLogItemSubTypes.ChartBeat;case this.dashboardDesigner.locale.dataSource.dataSourceType.file:return ActivityLogItemSubTypes.File;case this.dashboardDesigner.locale.dataSource.dataSourceType.excel:return ActivityLogItemSubTypes.Excel;case this.dashboardDesigner.locale.dataSource.dataSourceType.csv:return ActivityLogItemSubTypes.Csv;case this.dashboardDesigner.locale.dataSource.dataSourceType.json:return ActivityLogItemSubTypes.Json;case this.dashboardDesigner.locale.dataSource.dataSourceType.flurry.name:return ActivityLogItemSubTypes.Flurry;case this.dashboardDesigner.locale.dataSource.dataSourceType.freshdesk.name:return ActivityLogItemSubTypes.FreshDesk;case this.dashboardDesigner.locale.dataSource.dataSourceType.fusebill.name:return ActivityLogItemSubTypes.Fusebill;case this.dashboardDesigner.locale.dataSource.dataSourceType.gitlab.name:return ActivityLogItemSubTypes.Gitlab;case this.dashboardDesigner.locale.dataSource.oauthConnectors.gmail:return ActivityLogItemSubTypes.Gmail;case this.dashboardDesigner.locale.dataSource.dataSourceType.goSquared.name:return ActivityLogItemSubTypes.GoSquared;case this.dashboardDesigner.locale.dataSource.oauthConnectors.googleAnalytics:return ActivityLogItemSubTypes.GoogleAnalytics;case this.dashboardDesigner.locale.dataSource.oauthConnectors.googleDrive:return ActivityLogItemSubTypes.GoogleDrive;case this.dashboardDesigner.locale.dataSource.oauthConnectors.microsoftOneDrive:return ActivityLogItemSubTypes.MicrosoftOneDrive;case this.dashboardDesigner.locale.dataSource.oauthConnectors.microsoftSharePoint:return ActivityLogItemSubTypes.MicrosoftSharePoint;case this.dashboardDesigner.locale.dataSource.oauthConnectors.googleplus:return ActivityLogItemSubTypes.GooglePlus;case this.dashboardDesigner.locale.dataSource.oauthConnectors.box:return ActivityLogItemSubTypes.Box;case this.dashboardDesigner.locale.dataSource.dataSourceType.harvest.name:return ActivityLogItemSubTypes.Harvest;case this.dashboardDesigner.locale.dataSource.dataSourceType.helpScout.name:return ActivityLogItemSubTypes.HelpScout;case this.dashboardDesigner.locale.dataSource.dataSourceType.insightly.name:return ActivityLogItemSubTypes.Insightly;case this.dashboardDesigner.locale.dataSource.dataSourceType.intervals.name:return ActivityLogItemSubTypes.Intervals;case this.dashboardDesigner.locale.dataSource.dataSourceType.jira.name:return ActivityLogItemSubTypes.Jira;case this.dashboardDesigner.locale.dataSource.dataSourceType.keenIo.name:return ActivityLogItemSubTypes.KeenIo;case this.dashboardDesigner.locale.dataSource.dataSourceType.kissMetrics.name:return ActivityLogItemSubTypes.Kissmetrics;case this.dashboardDesigner.locale.dataSource.dataSourceType.wistia.name:return ActivityLogItemSubTypes.Wistia;case this.dashboardDesigner.locale.dataSource.dataSourceType.liveAgent.name:return ActivityLogItemSubTypes.LiveAgent;case this.dashboardDesigner.locale.dataSource.dataSourceType.mailchimp.name:return ActivityLogItemSubTypes.Mailchimp;case this.dashboardDesigner.locale.dataSource.dataSourceType.msSql:case"SQL":return ActivityLogItemSubTypes.SQL;case this.dashboardDesigner.locale.dataSource.dataSourceType.azureSqlDataWarehouse:return ActivityLogItemSubTypes.AzureSQLDataWarehouse;case this.dashboardDesigner.locale.dataSource.dataSourceType.mongodb:return ActivityLogItemSubTypes.MongoDB;case this.dashboardDesigner.locale.dataSource.dataSourceType.mySql:return ActivityLogItemSubTypes.MySQL;case this.dashboardDesigner.locale.dataSource.dataSourceType.amazonAurora:return ActivityLogItemSubTypes.AmazonAurora;case this.dashboardDesigner.locale.dataSource.dataSourceType.googleCloud:return ActivityLogItemSubTypes.GoogleCloud;case this.dashboardDesigner.locale.dataSource.dataSourceType.mixpanel.name:return ActivityLogItemSubTypes.Mixpanel;case this.dashboardDesigner.locale.dataSource.dataSourceType.newRelic.name:return ActivityLogItemSubTypes.NewRelic;case this.dashboardDesigner.locale.dataSource.dataSourceType.nicereply.name:return ActivityLogItemSubTypes.Nicereply;case this.dashboardDesigner.locale.dataSource.dataSourceType.odata.name:return ActivityLogItemSubTypes.OData;case this.dashboardDesigner.locale.dataSource.dataSourceType.pipelineDeals.name:return ActivityLogItemSubTypes.PipelineDeals;case this.dashboardDesigner.locale.dataSource.dataSourceType.postgres:return ActivityLogItemSubTypes.PostgresSql;case this.dashboardDesigner.locale.dataSource.dataSourceType.prosperWorks.name:return ActivityLogItemSubTypes.ProsperWorks;case this.dashboardDesigner.locale.dataSource.oauthConnectors.salesforce:return ActivityLogItemSubTypes.Salesforce;case this.dashboardDesigner.locale.dataSource.oauthConnectors.todoist:return ActivityLogItemSubTypes.Todoist;case this.dashboardDesigner.locale.dataSource.dataSourceType.sendGrid.name:return ActivityLogItemSubTypes.SendGrid;case this.dashboardDesigner.locale.dataSource.dataSourceType.smartSheet.name:return ActivityLogItemSubTypes.Smartsheet;case this.dashboardDesigner.locale.dataSource.dataSourceType.fortytwomatters.name:return ActivityLogItemSubTypes.FortyTwomatters;case this.dashboardDesigner.locale.dataSource.dataSourceType.zohocrm.name:return ActivityLogItemSubTypes.ZohoCRM;case this.dashboardDesigner.locale.dataSource.dataSourceType.stripe.name:return ActivityLogItemSubTypes.Stripe;case this.dashboardDesigner.locale.dataSource.dataSourceType.twilio.name:return ActivityLogItemSubTypes.Twilio;case this.dashboardDesigner.locale.dataSource.dataSourceType.webDataSource:case this.dashboardDesigner.locale.dataSource.dataSourceType.webDataSource.toLocaleUpperCase():return ActivityLogItemSubTypes.WebDataSource;case this.dashboardDesigner.locale.dataSource.oauthConnectors.youtube:return ActivityLogItemSubTypes.YouTube;case this.dashboardDesigner.locale.dataSource.oauthConnectors.bitly:return ActivityLogItemSubTypes.Bitly;case this.dashboardDesigner.locale.dataSource.dataSourceType.basecrm.name:return ActivityLogItemSubTypes.BaseCrm;case this.dashboardDesigner.locale.dataSource.dataSourceType.zendesk.name:return ActivityLogItemSubTypes.Zendesk;case this.dashboardDesigner.locale.dataSource.dataSourceType.pipedrive.name:return ActivityLogItemSubTypes.Pipedrive;case this.dashboardDesigner.locale.dataSource.oauthConnectors.intercom:return ActivityLogItemSubTypes.Intercom;case this.dashboardDesigner.locale.dataSource.dataSourceType.sendible.name:return ActivityLogItemSubTypes.Sendible;case this.dashboardDesigner.locale.dataSource.dataSourceType.github.name:return ActivityLogItemSubTypes.GitHub;case this.dashboardDesigner.locale.dataSource.dataSourceType.toggl.name:return ActivityLogItemSubTypes.Toggl;case this.dashboardDesigner.locale.dataSource.dataSourceType.basecamp3.name:return ActivityLogItemSubTypes.Basecamp3;case this.dashboardDesigner.locale.dataSource.dataSourceType.lighthouse.name:return ActivityLogItemSubTypes.Lighthouse;case this.dashboardDesigner.locale.dataSource.dataSourceType.activeCampaign.name:return ActivityLogItemSubTypes.ActiveCampaign;case this.dashboardDesigner.locale.dataSource.dataSourceType.freshsales.name:return ActivityLogItemSubTypes.Freshsales;case this.dashboardDesigner.locale.dataSource.dataSourceType.freshservice.name:return ActivityLogItemSubTypes.Freshservice;case this.dashboardDesigner.locale.dataSource.oauthConnectors.buffer:return ActivityLogItemSubTypes.Buffer;case this.dashboardDesigner.locale.dataSource.oauthConnectors.linkedin:return ActivityLogItemSubTypes.LinkedIn;case this.dashboardDesigner.locale.dataSource.oauthConnectors.googleAdsense:return ActivityLogItemSubTypes.GoogleAdsense;case this.dashboardDesigner.locale.dataSource.dataSourceType.servicenow.name:return ActivityLogItemSubTypes.ServiceNow;case this.dashboardDesigner.locale.dataSource.oauthConnectors.basecamp2:return ActivityLogItemSubTypes.Basecamp2;case this.dashboardDesigner.locale.dataSource.oauthConnectors.infusionsoft:return ActivityLogItemSubTypes.Infusionsoft;case this.dashboardDesigner.locale.dataSource.oauthConnectors.slack:return ActivityLogItemSubTypes.Slack;case this.dashboardDesigner.locale.dataSource.oauthConnectors.pinterest:return ActivityLogItemSubTypes.Pinterest}},n.prototype.isLoaded=function(){return this.targetTag&&this.targetTag.length>0},n.prototype.hideChildPanels=function(){this.webDsTemplateInstance.hide()},n.prototype.renderContainer=function(n){this.targetTag=n;var t=this.dsListTag=ej.buildTag("div","",{width:"100%",height:"100%",display:"block",position:"relative"},{id:this.id+"_dataSourceTag"}),i=this.dsTypeTag=ej.buildTag("div","",{width:"100%",height:"100%",display:"none"},{id:this.id+"_dsTypesTag"}),r=this.dsConfigTag=ej.buildTag("div","",{width:"100%",height:"100%",display:"none"},{id:this.id+"_dsConfigTag"});n.append(t);n.append(i);n.append(r);this.renderDataSourcePanel(t);this.renderDataSourceTypes(i);this.renderDataSourceConfig(r);this.webDsTemplateInstance.render(this.targetTag);this.wiredEvents();this.pouplateDataSources()},n.prototype.renderDataSourcePanel=function(n){var f=this.dashboardDesigner.locale.dataSource,i=ej.buildTag("div","",{width:"100%",height:"35px",display:"block",overflow:"hidden"},{id:this.id+"_dsHeaderContainer"}),t=ej.buildTag("div.e-lv e-js e-parentlv e-dbrd-designer-scroller e-dbrd-control","",{width:"100%",display:"block"},{id:this.id+"_dsBodyContainer"}),r=ej.buildTag("div","",{width:"100%",height:"63px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_dsFooterContainer"}),h=ej.buildTag("span.e-designer-header e-designer-cursor",f.headerDataSourcesText,{overflow:"hidden",display:"inline-block",padding:"8.5px 7px 7px 0px"},{id:this.id+"_dataSourceHeaderText"}),c=ej.buildTag("span.e-designer-header-icon e-dbrd-designer-configuration-datasource e-designer-cursor","",{display:"inline-block",float:"left",padding:"7px 11px"},{}),s,u;i.append(c);i.append(h);var e=ej.buildTag("div","",{},{}),o=ej.buildTag("div.e-list-container e-js e-widget e-reportdesigner-dataset","",{"border-top-width":"1px",padding:"0px 3px"},{id:this.id+"_dsListContainer"}),l=ej.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"});o.append(l);e.append(o);t.append(e);t.ejScroller({scrollerSize:9,autoHide:!0,enableTouchScroll:!0,buttonSize:14});s=ej.buildTag("div.e-designer-new-btn-footer","",{margin:"8px","margin-bottom":"12px"},{id:this.id+"_dataSourceFooterSeperator"});r.append(s);u=ej.buildTag("button.e-designer-content e-designer-button e-designer-newds-btn e-dbrd-hand-cursor",f.newDataSourceText,{},{id:this.id+"_newDataSourceButton"});r.append(u);u.ejButton({width:"160px",showRoundedCorner:!1,contentType:ej.ContentType.TextAndImage,prefixIcon:"e-icon e-plus",size:"small",click:$.proxy(this.newConnectionType,this)});n.append(i);n.append(t);n.append(r);this.renderContextMenu(t)},n.prototype.renderDataSourceTypes=function(n){var r=this.dashboardDesigner.locale.dataSource,t=ej.buildTag("div","",{width:"100%",height:"auto",display:"block",overflow:"hidden"},{id:this.id+"_dsTypeHeaderContainer"}),u=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{width:"100%",display:"block",position:"relative"},{id:this.id+"_dsTypeBodyContainer"}),f=ej.buildTag("div","",{width:"100%",height:"63px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_dsTypeFooterContainer"}),o=ej.buildTag("span.e-designer-header e-designer-cursor",r.headerDataSourcesText,{overflow:"hidden",display:"inline-block",padding:"8px 7px 7px 0px"},{id:this.id+"_headerMarkupTag"}),s=ej.buildTag("span.e-designer-header-icon e-reportdesigner-backarrow","",{display:"inline-block",float:"left",padding:"7px 11px"},{id:this.id+"_headerback"}),e,l;t.append(s);t.append(o);var h=ej.buildTag("div","",{},{}),i=ej.buildTag("div","",{},{id:this.id+"_dataType_container"}),c=this.connectionTypeTag=ej.buildTag("div","",{width:"100%",display:"block",height:"100%",padding:"10px 0px"},{}),a=ej.buildTag("div.e-designer-fontfamily",r.chooseConnctionTypeText,{"font-size":"13px","font-weight":"600",padding:"0px 10px"},{}),v=ej.buildTag("div.e-designer-new-btn-footer","",{margin:"8px","margin-bottom":"11px"},{});f.append(v);e=ej.buildTag("button.e-designer-content e-designer-button e-designer-dsconnect-btn e-dbrd-hand-cursor",r.connectDataSourceBtnText,{},{id:this.id+"_connectDataSourceButton"});f.append(e);e.ejButton({width:"160px",showRoundedCorner:!1,contentType:ej.ContentType.TextOnly,size:"small",click:$.proxy(this.connectQueryDesigner,this)});l=ej.buildTag("div","",{},{"class":"e-close-icon e-dbrd-designer-hoverable","data-tooltip":this.dashboardDesigner.locale.linkedAccountsWindow.closeButtonText});ej.isNullOrUndefined(this.dashboardDesigner.model.mode)||this.dashboardDesigner.model.mode!==ej.dashboardDesigner.mode.connection||(s.css({visibility:"hidden",height:"0px"}),o.css({visibility:"hidden",height:"0px"}),t.append(l));n.append(t);n.append(u);n.append(f);h.append(i);u.append(h);this.renderDataChooser(i);this.renderExistingData(i);i.append(c);t.append(a);this.renderDataSourceSearchOptions(t);this.renderGroupItems(c);u.ejScroller({scrollerSize:9,autoHide:!0,enableTouchScroll:!0,buttonSize:14})},n.prototype.closeConnectionModeDialog=function(n){this.targetTag.css("display","none");var t={element:null,data:n},i={mode:ej.dashboardDesigner.mode.connection,event:"ConnectionModeDialogClose",source:t};this.dashboardDesigner._trigger("actionComplete",{eventType:DashboardDesignerEvent.ConnectionModeDialogClose,data:i})},n.prototype.renderDataSourceSearchOptions=function(n){if(!this.dashboardDesigner.intermediateDBStatus){var i="<div style='padding:10px 10px 0px 10px;height:30px;'><div class='e-dbrd-designer-datasource-category-container' style='width:48%;float:left;height:100%;display:block;'><input type='text' id='"+this.id+"_datasource_list_category_ddl'/><\/div><div class='e-dbrd-designer-datasource-search-container' style='height:100%;width:48%;margin-left:10px'><input type='text' id='"+this.id+"_datasource_list_search' class='e-autocomplete e-dbrd-designer-font e-dbrd-designer-search-box e-js e-input' placeholder='"+this.dataSourceLocale.searchDataSource+"'/><span id='"+this.id+"_datasource_list_search_icon' class='e-dbrd-designer-icon e-dbrd-designer-search'><\/span><\/div><\/div><hr style=\"border:0;border-top:1px solid #ccc;\"><\/hr>",t=$(i);t.find("#"+this.id+"_datasource_list_category_ddl").ejDropDownList({cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control e-dbrd-datasource-list-category-dropdownlist",dataSource:this.getDataSourceCategories(),change:$.proxy(this.onCategorySelectionChange,this),selectedIndex:0,popupHeight:"415px"});n.append(t)}},n.prototype.onCategorySelectionChange=function(n){this.selectedCategory=n.model.dataSource[n.itemId].id;this.generateDataSourceTypes(this.targetTag.find("#"+this.id+"_dsTypeList").html(""))},n.prototype.resetDataSourceCategory=function(){if(this.selectedCategory!==DataSourceCategory.all){this.selectedCategory=DataSourceCategory.all;var n=this.targetTag.find("#"+this.id+"_datasource_list_category_ddl").data("ejDropDownList");n.model&&n.setModel({selectedIndex:0})}},n.prototype.onDataSourceSearchKeyPress=function(n){var i=this,t;this.dataSourceSearchTimer!==-1&&(clearTimeout(this.dataSourceSearchTimer),this.dataSourceSearchTimer=-1);t=this;this.dataSourceSearchTimer=setTimeout(function(){var r=$(n.currentTarget);t.searchText=r.val();t.searchText.trim()===""?r.siblings(".e-dbrd-designer-icon").removeClass("e-dbrd-designer-close").addClass("e-dbrd-designer-search"):r.siblings(".e-dbrd-designer-icon").addClass("e-dbrd-designer-close").removeClass("e-dbrd-designer-search");i.generateDataSourceTypes(t.targetTag.find("#"+t.id+"_dsTypeList").html(""))},500)},n.prototype.onDataSourceClearIconClick=function(n){var t=$(n.currentTarget);t.removeClass("e-dbrd-designer-close").addClass("e-dbrd-designer-search");this.searchText="";t.siblings(".e-autocomplete").val(this.searchText);this.generateDataSourceTypes(this.targetTag.find("#"+this.id+"_dsTypeList").html(""))},n.prototype.getDataSourceCategories=function(){return[{text:this.dataSourceLocale.category.all,id:DataSourceCategory.all}].concat(this.sortCollection([{text:this.dataSourceLocale.category.salesCrm,id:DataSourceCategory.salesCrm},{text:this.dataSourceLocale.category.webAnalytics,id:DataSourceCategory.webAnalytics},{text:this.dataSourceLocale.category.digitalMarketing,id:DataSourceCategory.digitalMarketing},{text:this.dataSourceLocale.category.marketing,id:DataSourceCategory.marketing},{text:this.dataSourceLocale.category.advertising,id:DataSourceCategory.advertising},{text:this.dataSourceLocale.category.finance,id:DataSourceCategory.finance},{text:this.dataSourceLocale.category.projectManagement,id:DataSourceCategory.projectManagement},{text:this.dataSourceLocale.category.support,id:DataSourceCategory.support},{text:this.dataSourceLocale.category.sql,id:DataSourceCategory.sql},{text:this.dataSourceLocale.category.files,id:DataSourceCategory.files},{text:this.dataSourceLocale.category.rest,id:DataSourceCategory.rest},{text:this.dataSourceLocale.category.emailCompaign,id:DataSourceCategory.emailCompaign},{text:this.dataSourceLocale.category.mobileAnalytics,id:DataSourceCategory.mobileAnalytics}],"text"))},n.prototype.sortCollection=function(n,t){return n.sort(function(n,i){return n[t]<i[t]?-1:n[t]>i[t]?1:0})},n.prototype.filterCollection=function(n,t,i,r){return n.filter(function(n){return r?n[t]===i:ej.DashboardUtil.contains(n[t],i,!0)})},n.prototype.renderDataChooser=function(n){var t=this.dataChooserTag=ej.buildTag("div","",{width:"100%",float:"left",clear:"none",display:"none","box-sizing":"border-box",padding:"10px 10px"},{}),i=ej.buildTag("div","",{width:"85px",display:"inline-block"},{}),r=ej.buildTag("div","",{width:"85px",display:"inline-block"},{}),u=ej.buildTag("input","",{},{type:"radio",name:"datachooser",id:this.id+"_data_existing"}),f=ej.buildTag("input","",{},{type:"radio",name:"datachooser",id:this.id+"_data_new"});i.append(u);r.append(f);t.append(i).append(r);n.append(t);u.ejRadioButton({checked:!1,change:$.proxy(this.dataChooser,this),text:"Existing",cssClass:"e-designer-radiobtn"});f.ejRadioButton({checked:!0,change:$.proxy(this.dataChooser,this),text:"Create New",cssClass:"e-designer-radiobtn"})},n.prototype.renderExistingData=function(n){var r=this.selectDataTag=ej.buildTag("div","",{width:"100%",float:"left",clear:"none","box-sizing":"border-box",padding:"0px 10px"},{}),t,s,i;n.append(r);t=ej.buildTag("table.e-designer-existing-tbl","",{width:"100%"},{unselectable:"on"});r.append(t);var u=$("<tr><\/tr>"),f=$("<td><\/td>"),e=$("<tr><\/tr>"),o=$("<td><\/td>");t.append(u);u.append(f);t.append(e);e.append(o);s=ej.buildTag("span.e-designer-fontfamily","Select the DataSource",{"font-size":"13px","font-weight":"600"},{});f.append(s);i=ej.buildTag("input","",{},{id:"",value:""});o.append(i);i.ejDropDownList({dataSource:[],fields:{text:"name"},width:"100%",cssClass:"e-reportdesigner-dataset-selection e-dbrd-control"});this.ejDataSourceDwn=i.data("ejDropDownList")},n.prototype.renderDataSourceConfig=function(n){var i=this.dashboardDesigner.locale.dataSource,r=ej.buildTag("div","",{width:"100%",height:"32px",display:"block",overflow:"hidden"},{id:this.id+"_dsConfigHeaderContainer"}),u=ej.buildTag("div","",{width:"100%",display:"block"},{id:this.id+"_dsConfig_BodyContainer"}),o=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-designer-dsscroller e-dbrd-control","",{width:"100%",display:"block",position:"relative"},{id:this.id+"_dsConfigBodyContainer"}),l=ej.buildTag("div","",{},{}),a=ej.buildTag("div","",{width:"100%",display:"block"},{id:this.id+"_dsConfigContainer"}),t=ej.buildTag("div","",{width:"100%",height:"80px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_dsConfigFooterContainer"}),g=ej.buildTag("span.e-designer-header e-designer-cursor",i.headerNewConnectionText,{overflow:"hidden",display:"inline-block",padding:"8.5px 7px 7px 0px"},{id:this.id+"_datasourceHeaderMarkupTag"}),nt=ej.buildTag("span.e-designer-header-icon e-dbrd-designer-configuration-datasource e-designer-cursor","",{display:"inline-block",float:"left",padding:"7px 11px"},{}),v,k,d,c,e;r.append(nt);r.append(g);v=ej.buildTag("div.e-designer-new-btn-footer","",{margin:"8px","margin-bottom":"9px"},{id:this.id+"_dataSourceConfigFooterSeperator"});t.append(v);var f=ej.buildTag("div","",{width:"100%",height:"100%",display:"table-row",overflow:"auto"},{id:this.id+"_basicPanel"}),s=ej.buildTag("div.e-reportdesigner-dsheader","",{width:"100%",height:"100%",display:"table-row",overflow:"auto","margin-left":"6px"},{id:this.id+"_headerPane"}),y=ej.buildTag("table","",{width:"100%","margin-left":"5px"},{unselectable:"on",id:this.id+"_sql_datasource"});this.configTable=ej.buildTag("div","",{width:"100%",height:"100%",display:"table-row"},{id:this.id+"_configurePane"});var h=ej.buildTag("div.e-designer-switch-label e-designer-header-icon","",{width:"100%",height:"20px",display:"none"},{id:this.id+"_switchCont"}),tt=ej.buildTag("span",i.advanceOptionText,{},{id:this.id+"_panelSwitch"}),it=ej.buildTag("span.e-reportdesigner-rightarrow e-designer-switchind-icon","",{},{});this.titleConfig=ej.buildTag("div","",{width:"100%",height:"auto",padding:"2px 10px 2px 10px"},{id:this.id+"_datasource_Header","class":"e-dbrd-designer-webds-template-wrapper"});s.append(this.titleConfig);s.append(y);f.append(s);f.append(this.configTable);h.append(tt);h.append(it);u.append(o);u.append(h);o.append(l);l.append(a);a.append(f);o.ejScroller({scrollerSize:9,autoHide:!0,enableTouchScroll:!0,buttonSize:14});var p=ej.buildTag("div","",{height:"100%",display:"block","padding-left":"10px",overflow:"none",float:"right"},{}),w=ej.buildTag("div","",{height:"100%",display:"block","padding-left":"10px",overflow:"none",float:"right"},{}),rt=ej.buildTag("div.e-dbrd-connection-disclaimer-container","",{},{id:this.id+"_disclaimer_Container"}),b=ej.buildTag("div.e-dbrd-connection-disclaimer-text1","By connecting you agree to these",{},{id:this.id+"_disclaimerText"}),ut=ej.buildTag("span.connection-disclaimer-message e-dbrd-connection-disclaimer-msg","terms",{},{id:this.id+"_connection_disclaimer_message"});rt.append(b,ut);t.append(w);t.append(p);k=t.find(".e-dbrd-connection-disclaimer-msg");d="Customer acknowledges and agrees that by asking Syncfusion to connect to this data source (comprising data, storage systems, environment and other constituent systems) on behalf of Customer, Customer certifies that it has adequate rights and licenses from the owners of the data source to allow Customer and Syncfusion on behalf of the Customer to connect to, and use, the data source. Customer agrees to fully indemnify Syncfusion for any and all claims and fees. If Customer does not agree, then Customer should not request that Syncfusion connect to the data source.";k.ejTooltip({content:d,cssClass:"e-defaultIndex-template",isBalloon:!0,collision:ej.Tooltip.Collision.FlipFit,trigger:ej.Tooltip.Trigger.Click,showRoundedCorner:!0,showShadow:!0});c=ej.buildTag("button.e-designer-content e-designer-button e-designer-back-btn e-dbrd-hand-cursor",i.cancelButtonText,{},{id:this.id+"_btn_back"});w.append(c);c.ejButton({width:"110px",showRoundedCorner:!0,contentType:ej.ContentType.TextOnly,prefixIcon:"e-reply",size:"small",click:$.proxy(this.cancelDataSource,this)});e=ej.buildTag("button.e-designer-content e-connect e-designer-button e-designer-connect-btn e-dbrd-hand-cursor",i.connectButtonText,{},{id:this.id+"_btn_connect"});p.append(e);e.ejButton({width:"110px",showRoundedCorner:!0,contentType:ej.ContentType.TextOnly,prefixIcon:"e-shrink",size:"small",click:$.proxy(this.connectDatasource,this,!0)});ej.isNullOrUndefined(this.dashboardDesigner.model.mode)||this.dashboardDesigner.model.mode!==ej.dashboardDesigner.mode.connection||(r.css({visibility:"hidden",height:"0px"}),f.css({display:"block","margin-left":"33.7%"}),t.css({width:"465px"}),b.css({"margin-left":"16px"}));n.append(r);n.append(u);n.append(t);this.renderTextBoxItem("Name",this.id+"_datasource_dsname",!1,y,424);u.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});this.connectButton=e.data("ejButton")},n.prototype.headerMenuClick=function(n){n.text==="Data"&&ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataList)},n.prototype.dataChooser=function(n){n.isInteraction&&this.dataTypeSwitcher($("#"+this.id+"_data_new").data("ejRadioButton").model.checked)},n.prototype.setDataSourceToDd=function(){var t,n;if(this.datasources&&this.datasources.length>0){for(t=[],n=0;n<this.datasources.length;n++)t.push({name:this.datasources[n].Name});this.ejDataSourceDwn.setModel({dataSource:t})}},n.prototype.resetDataSourceList=function(){this.searchText.trim()!==""?(this.searchText="",this.targetTag.find(".e-dbrd-designer-datasource-search-container .e-dbrd-designer-icon").addClass("e-dbed-designer-search").removeClass("e-dbrd-designer-close"),this.targetTag.find(".e-dbrd-designer-datasource-search-container .e-autocomplete").val(this.searchText),this.resetDataSourceCategory(),this.generateDataSourceTypes(this.targetTag.find("#"+this.id+"_dsTypeList").html(""))):this.selectedCategory!==DataSourceCategory.all&&(this.resetDataSourceCategory(),this.generateDataSourceTypes(this.targetTag.find("#"+this.id+"_dsTypeList").html("")))},n.prototype.enableDataChooser=function(){this.datasources&&this.datasources.length>0&&!this.isDataPanel?(this.selectDataTag.css("display","none"),this.connectionTypeTag.css("display","block"),$("#"+this.id+"_dsTypeFooterContainer").css("display","none"),$("#"+this.id+"_data_new").data("ejRadioButton").setModel({checked:!0}),this.setDataSourceToDd()):(this.dataChooserTag.css("display","none"),this.selectDataTag.css("display","none"),this.connectionTypeTag.css("display","block"),$("#"+this.id+"_dsTypeFooterContainer").css("display","none"));this.targetTag.find(".e-dbrd-designer-search-box").focus()},n.prototype.dataTypeSwitcher=function(n){n?(this.selectDataTag.css("display","none"),this.connectionTypeTag.css("display","block"),$("#"+this.id+"_dsTypeFooterContainer").css("display","none")):(this.selectDataTag.css("display","block"),this.connectionTypeTag.css("display","none"),$("#"+this.id+"_dsTypeFooterContainer").css("display","block"));this.updateDSTypeContainer()},n.prototype.renderUploadBox=function(n,t,i,r,u,f){var e=$("<tr id="+n+"_tr/>"),o=$("<td unselectable='on'/>");e.append(o);t.append(e);var s=$("<table unselectable='on'><\/table>"),h=$("<tr><\/tr>"),c=$("<td style='width:125px;'><\/td>"),l=$("<td><\/td>"),v=ej.buildTag("label.editLabel e-designer-content-label","Upload file (*."+i+")",{}),a=ej.buildTag("div","",{},{id:n+"_upload"});h.append(c).append(l);c.append(v);l.append(a);s.append(h);o.append(s);a.ejUploadbox({saveUrl:this.dashboardDesigner.model.serviceUrl+"/UploadReportAction",extensionsAllow:"."+i,beforeSend:$.proxy(r,f),success:$.proxy(u,f),dialogPosition:this.getDialogPosition()})},n.prototype.getDialogPosition=function(){var n=document.documentElement,t=($(window).outerWidth()>500?($(window).outerWidth()-500)/2:0)+(window.pageXOffset||n.scrollLeft),i=($(window).outerHeight()>200?($(window).outerHeight()-200)/2:0)+(window.pageYOffset||n.scrollTop);return{X:t,Y:i}},n.prototype.onChange=function(n){this.isCsvFirstRowHeader=n.model.checked},n.prototype.renderDropDownItem=function(n,t,i,r,u,f,e,o){var c,l,s,a,v,h;n==="Separator"&&this.renderCheckboxItem(this.dashboardDesigner.locale.dataSource.considerFirstRowHeader,t+"_row_header",i,this.onChange,this,"left");c=$("<tr id="+t+"_tr/>");l=$("<td unselectable='on'/>");c.append(l);i.append(c);s=$("<table unselectable='on'><\/table>");l.append(s);s.append(this.getRowCaption(n,t));a=$("<tr><\/tr>");v=ej.buildTag("td","",{},{colspan:"2",id:t+"_td"});s.append(a);a.append(v);h=ej.buildTag("input","",{},{id:t,value:"",spellcheck:"false"});v.append(h);h.ejDropDownList({width:"440px",dataSource:r,fields:u,change:$.proxy(e,o),cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control",showRoundedCorner:!0});f&&h.data("ejDropDownList").selectItemsByIndices(f)},n.prototype.getRowCaption=function(n,t){var i=ej.buildTag("tr","",{}),u=ej.buildTag("td","",{}),f=ej.buildTag("label.editLabel e-designer-title-label",n,{},{}),e=ej.buildTag("span.e-dbrd-info-icon","",{display:"none"},{}),r;return u.append(f,e),i.append(u),r=ej.buildTag("td","",{},{id:t+"_error_icon_td"}),ej.DashboardUtil.renderErrIndictor(r,this.id),i.append(r),i},n.prototype.renderDropDownUploadBox=function(n,t,i,r,u,f,e,o,s,h,c,l){var k=$("<tr id="+t+"_tr/>"),d=$("<td unselectable='on'/>"),a,v,p,y,w,b;k.append(d);i.append(k);a=$("<table unselectable='on'><\/table>");d.append(a);a.append(this.getRowCaption(n,t));v=$("<tr><\/tr>");p=ej.buildTag("td","",{},{id:t+"_td"});a.append(v);v.append(p);y=ej.buildTag("input.e-dropdownUpload","",{},{id:t,value:"",spellcheck:"false"});p.append(y);y.ejDropDownList({width:l,dataSource:r,fields:u,change:$.proxy(o,c),cssClass:"e-reportdesigner-dataset-selection e-designer-content-label e-dbrd-control",showRoundedCorner:!0});e&&y.data("ejDropDownList").selectItemsByIndices(e);w=$("<td><\/td>");b=ej.buildTag("div","",{},{id:t+"_upload"});w.append(b);v.append(w);b.ejUploadbox({saveUrl:this.dashboardDesigner.model.serviceUrl+"/UploadReportAction",extensionsAllow:"."+f,beforeSend:$.proxy(s,c),buttonText:{browse:"..."},height:"30px",width:"37px",success:$.proxy(h,c),dialogPosition:this.getDialogPosition()});$("#"+t+"_upload_SelectButton").css({"font-size":"25px","margin-top":"-16px","margin-right":"-5px","margin-left":"1px"})},n.prototype.renderTextArea=function(n,t,i,r){var o=$("<tr id="+t+"_tr/>"),s=$("<td unselectable='on'/>"),u,f,e,h;o.append(s);i.append(o);u=$("<table unselectable='on'><\/table>");s.append(u);u.append(this.getRowCaption(n,t));f=$("<tr><\/tr>");e=ej.buildTag("td","",{},{colspan:"2",id:t+"_td"});u.append(f);f.append(e);h=ej.buildTag("textarea.e-textarea e-ejinputtext e-designer-content-label e-designer-constr-textarea",r,{height:"65px",width:"421px",resize:"none","text-indent":"0px",overflow:"hidden"},{id:t,type:"textarea",spellcheck:"false"});e.append(h)},n.prototype.renderNumericItem=function(n,t,i,r,u,f,e,o,s,h,c){var p=$("<tr id="+t+"_tr/>"),w=$("<td unselectable='on'/>"),l,v,y,a;p.append(w);i.append(p);l=$("<table unselectable='on'><\/table>");w.append(l);l.append(this.getRowCaption(n,t));v=$("<tr><\/tr>");y=ej.buildTag("td","",{},{colspan:"2",id:t+"_td"});l.append(v);v.append(y);a=ej.buildTag("input","",{},{id:t,value:"",spellcheck:"false"});y.append(a);e?a.ejNumericTextbox({width:o,cssClass:"e-designer-ejwidgets e-designer-content-label",watermarkText:"",change:$.proxy(r,u,f),showRoundedCorner:!0,showEmptyResultText:!1,showSpinButton:s,groupSeparator:"",maxValue:c?c:Number.MAX_VALUE,minValue:h?h:Number.MIN_VALUE}):a.ejNumericTextbox({width:o,cssClass:"e-designer-ejwidgets e-designer-content-label",watermarkText:"",change:$.proxy(r,u,f),showRoundedCorner:!0,showEmptyResultText:!1,showSpinButton:s,maxValue:c?c:Number.MAX_VALUE,minValue:h?h:Number.MIN_VALUE})},n.prototype.renderTextBoxItem=function(n,t,i,r,u,f,e,o,s){var v=$("<tr id="+t+"_tr/>"),y=$("<td unselectable='on'/>"),h,c,l,a;v.append(y);r.append(v);h=$("<table unselectable='on'><\/table>");y.append(h);h.append(this.getRowCaption(n,t));c=$("<tr><\/tr>");l=ej.buildTag("td","",{},{colspan:"2",id:t+"_td"});h.append(c);c.append(l);a=ej.buildTag("input.e-textbox e-designer-content-label","",{height:"24px",width:u+"px"},{id:t,type:i?"password":"text",value:f,spellcheck:"false",placeholder:ej.isNullOrUndefined(s)?null:s});l.append(a);e&&a.bind("focusout",$.proxy(e,o))},n.prototype.renderAccordionItem=function(n,t,i,r,u,f,e){var l=$("<tr id="+t+"_tr/>"),a=$("<td unselectable='on'/>"),o,s,h,c;l.append(a);i.append(l);o=$("<table unselectable='on'><\/table>");a.append(o);o.append(this.getRowCaption(n,t));s=$("<tr><\/tr>");h=ej.buildTag("td","",{},{colspan:"2",id:t+"_td"});o.append(s);s.append(h);c=ej.buildTag("input","",{},{id:t,value:e,spellcheck:"false"});h.append(c);c.ejAutocomplete({width:"440px",showPopupButton:!0,enableAutoFill:!0,showLoadingIcon:!0,focusIn:$.proxy(r,f),cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control",focusOut:$.proxy(u,f),showEmptyResultText:!1,showRoundedCorner:!0})},n.prototype.renderCheckboxItem=function(n,t,i,r,u,f){var s,e,o,h;f===void 0&&(f="Left");s=$("<tr id="+t+"_tr/>");e=$("<td unselectable='on' style='padding-right:7px' align="+f+"/>");s.append(e);i.append(s);o=ej.buildTag("input","",{},{type:"checkbox",id:t});e.append(o);h=ej.buildTag("label.editLabel e-designer-title-label",n,{"margin-left":"6px"},{"for":t,id:t});e.append(h);ej.isNullOrUndefined(r)?o.ejCheckBox():o.ejCheckBox({change:$.proxy(r,u)})},n.prototype.renderExtractModeMessageItem=function(n,t,i){var r=ej.buildTag("tr","",{},{id:t+"_tr"}),u=ej.buildTag("td","",{},{unselectable:"'on'"}),f;r.append(u);i.append(r);f=ej.buildTag("div.e-dbrd-connection-extract-text",n,{},{id:t});u.append(f)},n.prototype.renderRadioItem=function(n,t,i,r,u,f,e){var h=$("<tr/>"),o=$("<td unselectable='on'/>"),s,c;h.append(o);u.append(h);s=ej.buildTag("input","",{},{type:"radio",name:i,id:t});o.append(s);c=ej.buildTag("label.editLabel e-designer-title-label",n,{"margin-left":"6px"},{"for":t,id:t});o.append(c);s.ejRadioButton({checked:r,change:$.proxy(f,e)})},n.prototype.showValidationMsg=function(n,t,i){var r=$("#"+n+"_error_icon_td"),u=$("#"+n+"_td").find(".e-designer-content-label");t?(ej.DashboardUtil.showErrIndictor(r,!0,i),u.addClass("e-designer-error")):(ej.DashboardUtil.showErrIndictor(r,!1),u.removeClass("e-designer-error"))},n.prototype.cancelDataSource=function(){ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.CancelDataSourceCreation,this.dashboardDesigner.locale.alertWindowMesages.datasourceCancel,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmCancelWiz"})},n.prototype.confirmCancelWiz=function(n){if(ej.isNullOrUndefined(this.ajaxPost))n&&this.goToDataSourceList();else if(n){var t=this.configTable.data("selected");switch(t){case"e-oledb":case"e-xml":case"e-odata":case"e-sass":case"e-file":case"e-oauth-salesforce":case"e-web":case"e-oauth":case"e-oauth-salesforce-reports":ej.DashboardDesignerUtility.DesignerHub.DesignerHub.hubConnection.stop()}this.hideIndicator();this.goToDataSourceList();this.ajaxPost.abort();this.ajaxPost=null}},n.prototype.goToDataSourceList=function(){this.isDataPanel?ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataPanel):ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataType)},n.prototype.connectionTypeBack=function(){this.isDataPanel?ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataPanel):ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataList)},n.prototype.newConnectionType=function(){this.isDataPanel=!0;ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataType)},n.prototype.setHeaderType=function(n){var t=this.dashboardDesigner.locale.dataSource;n?$("#"+this.id+"_datasourceHeaderMarkupTag").text(t.headerEditConnectionText):$("#"+this.id+"_datasourceHeaderMarkupTag").text(this.isDataPanel?t.headerNewConnectionText:t.newDataSourceText)},n.prototype.setDataSourceName=function(n){var t=this.targetTag.find("#"+this.id+"_datasource_dsname");n&&t.val(n.Name);t.val(this.isEdit?this.datasourceItem.Name:this.getAvailableName())},n.prototype.validateDataSourceName=function(){var i=this.dashboardDesigner.locale.dataSource,t=this.id+"_datasource_dsname",n=this.targetTag.find("#"+t).val();if(!this.dashboardDesigner.nameValidation(n)){ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.getInvalidNameAlertTitle("datasourceName",!0),this.dashboardDesigner.getInvalidNameAlertTitle("datasourceName",!1),IconType.errors,AlertType.Alert,!1,"");return}if(n){if(this.isAvailable(n))return this.showValidationMsg(t,!0,i.nameAlreadyExistonDataSource),{name:n,isAvailable:!1}}else return this.showValidationMsg(t,!0,i.specifyDataSourceName),{name:n,isAvailable:!1};return this.showValidationMsg(t,!1),{name:n,isAvailable:!0}},n.prototype.isAvailable=function(n){for(var i=!1,r=[],u=ejDashboardDesigner.getInstance("DataSet").datasets,t=0;t<u.length;t++)r.push(u[t].Name);return r.indexOf(n)!==-1&&(i=!0),i},n.prototype.getAvailableName=function(){for(var n,f,i="DataSource",r=[],u=ejDashboardDesigner.getInstance("DataSet").datasets,t=0;t<u.length;t++)r.push(u[t].Name);n=0;do n++,f=r.indexOf(i+n);while(f!==-1);return i+n},n.prototype.renderGroupItems=function(n){var t=ej.buildTag("div","",{padding:"10px 0px 10px 9px",height:"100%",width:"100%",margin:"0 auto",display:"inline-block"},{id:this.id+"_dsTypeList"});this.generateDataSourceTypes(t);n.append(t)},n.prototype.generateDataSourceTypes=function(n){var c,t,r,u,l,a,f,o,s,v,i,e,y,h;if(n.html(""),c=90,t=this.getDatasourceTypes(),this.dashboardDesigner.intermediateDBStatus)for(r=0;r<t.length;r++)t[r].isVisible=t[r].name===this.dashboardDesigner.locale.dataSource.dataSourceType.msSql||t[r].name===this.dashboardDesigner.locale.dataSource.dataSourceType.redshift||t[r].name===this.dashboardDesigner.locale.dataSource.dataSourceType.postgres?!0:!1;if(u=t,this.selectedCategory!==DataSourceCategory.all&&(u=this.filterCollection(t,"category",this.selectedCategory.toString(),!0),t=u),this.searchText.trim()!=="")for(t=this.filterCollection(u,"name",this.searchText),l=this.filterCollection(u,"tags",this.searchText),a=function(n){t.every(function(t){return t.name!==n.name})&&t.push(n)},f=0,o=l;f<o.length;f++)i=o[f],a(i);for(t=this.sortCollection(t,"name"),s=ej.buildTag("div"),t.length===0&&(v=ej.buildTag("div.e-dbrd-designer-datasource-search-no-data",this.dataSourceLocale.noDataSourceMessage,{},{}),n.append(v)),this.dashboardDesigner.triggerEvents("beforeDataSourceUIRender",t),i=0;i<t.length;i++)e=ej.buildTag("div.e-reportdesigner-datasourceTypes","",{display:t[i].isVisible?"inline-block":"none"},{itemType:t[i].itemType}),y=ej.buildTag("span.e-designer-tile "+t[i].cssClass,"",{display:"inline-block","margin-bottom":"4px","border-radius":"3px"},{id:t[i].id+"_img",itemType:t[i].itemType}),e.append(y),h=ej.buildTag("span.e-designer-tile-content","",{display:"inline-block",width:c+"px","padding-top":"2px"},{id:t[i].id,itemType:t[i].itemType}),h.text(t[i].name),e.append(h),s.append(e);n.append(s.children());this.dashboardDesigner.intermediateDBStatus&&this.setDataStoreSettings(n)},n.prototype.setDataStoreSettings=function(n){var t=ej.buildTag("div.e-designer-dataStore-content","",{display:"inline-block","font-size":"14px",padding:"0 15px 0 15px",width:this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.connection?"100%":"unset"},{id:this.id+"_datastore_settings_div"}),i=ej.buildTag("div","",{},{id:this.id+"_dataStore_info","class":"e-dataStoreSet-info"}),r=ej.buildTag("span","",{},{id:this.id+"_dataStore_info_span","class":"e-dataStoreSet-info-span"});t.append(i.append(r));n.append(t);this.dashboardDesigner.intermediateDBStatus?($(n).find("#"+this.id+"_dataStore_info_span").html("Connecting Files and Web Services require an intermediate database for processing. Please configure it in data store <a href='"+(ej.isNullOrUndefined(this.dashboardDesigner.model.serverSettings)?"#":this.dashboardDesigner.model.serverSettings.dataStoreSettingURL)+"' target='_blank'> settings.<\/a> <\/br><\/br><span style='float: left'>If it was configured already, click <\/span><span id='"+this.id+"_dataStore_info_span_retrive' class='e-dbrd-banner-refresh e-dbrd-hoverable e-dbrd-bannerIcon' tabindex='0' name='refresh' data-tooltip='Refresh' aria-haspopup='true' aria-label='Refresh' style='cursor: pointer; margin: 2px 4px 0 4px; float: left'><\/span><span style='float: left'>to refresh.<\/span>"),this.dashboardDesigner.element.find("#"+this.id+"_dataStore_info").css("display","block")):this.dashboardDesigner.element.find("#"+this.id+"_dataStore_info").css("display","none")},n.prototype.GetIntermediateStatus=function(){this.showIndicator();ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/GetIntermediateDBStatus/",{},{fnction:$.proxy(this.refreshDataSourcePanel,this)},!0)},n.prototype.refreshDataSourcePanel=function(n){var i;if(this.dashboardDesigner.intermediateDBStatus=n,n){this.hideIndicator();var t=this.dashboardDesigner.locale.errorMessage.failedToRetriveDataSource.split(this.dashboardDesigner.locale.errorMessage.dataStoreSettings),r="<a href=' "+(ej.isNullOrUndefined(this.dashboardDesigner.model.serverSettings)?"#":this.dashboardDesigner.model.serverSettings.dataStoreSettingURL)+"' target='_blank'>"+this.dashboardDesigner.locale.errorMessage.dataStoreSettings+"<\/a>",u=t[0]+r+t[1];ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSource,u,IconType.information,AlertType.Alert,!1,n,{})}i=$("#"+this.id+"_dsTypeList");this.generateDataSourceTypes(i.html(""));this.renderDataSourceSearchOptions($("#"+this.id+"_dsTypeHeaderContainer"));this.updateDSTypeContainer();this.hideIndicator()},n.prototype.getDatasourceTypes=function(){return ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypes(this.id,this.dashboardDesigner.locale)},n.prototype.showDataSourceHint=function(){this.targetTag.find("#"+this.id+"_dsListContainer li").length>0?this.targetTag.find("#"+this.id+"welcomettext_content").hide():this.targetTag.find("#"+this.id+"welcomettext_content").show()},n.prototype.updateCulture=function(n){var t=this.id,i;i=ej.DashboardDesigner.Locale[n]?ej.DashboardDesigner.Locale[n].dataSource:ej.DashboardDesigner.Locale["en-US"].dataSource;this.targetTag.find("#"+t+"_dataSourceHeaderText").html(i.headerText);this.targetTag.find("#"+t+"_newDataSourceButton").html(i.newDataSourceText);this.targetTag.find("#"+t+"_headerMarkupTag").html(i.dataSourceTypeText);this.targetTag.find("#"+t+"_btn_back").html(i.backButtonText);this.targetTag.find("#"+t+"_sql").html(i.sqlButtonText);this.targetTag.find("#"+t+"_btn_connect").html("Save");this.targetTag.find("#"+t+"_panelSwitch").html(i.advanceOptionText);this.targetTag.find("#"+t+"_panelSwitch").html(i.basicOption);this.targetTag.find("#"+t+"_datasourceHeaderMarkupTag").html(i.setConnectionText);this.targetTag.find("#"+t+"_Sql_dsname_tr .editLabel").html(i.dataSourceNameText);this.targetTag.find("#"+t+"_Sql_dsname").html(i.dataSourceText);this.targetTag.find("#"+t+"_Sql_servername_tr .editLabel").html(i.serverNameText);this.targetTag.find("#"+t+"_Sql_authondicationtype .editLabel").html(i.authenticationTypeText);this.targetTag.find("#"+t+"_WinAuth").html(i.windowsText);this.targetTag.find("#"+t+"_SQLAuth").html(i.sqlServerText);this.targetTag.find("#"+t+"_Sql_dbname_tr .editLabel").html(i.dataBaseText);this.targetTag.find("#"+t+"_Sql_username_tr .editLabel").html(i.userName);this.targetTag.find("#"+t+"_Sql_passwd_tr .editLabel").html(i.passWord);this.targetTag.find("#"+t+"_save_password .editLabel").html(i.savePassWord);this.targetTag.find("#"+t+"_windows_user").html(i.useCurrentWindowsUser);this.targetTag.find("#"+t+"_credential_user").html(i.useThisUserNameAndPassword);this.targetTag.find("#"+t+"_credential_prompt").html(i.promptForCredentials);this.targetTag.find("#"+t+"_credential_donot").html(i.doNotUseCredentials);this.targetTag.find("#"+t+"_cred_username_tr .editLabel").html(i.userName);this.targetTag.find("#"+t+"_cred_passwd_tr .editLabel").html(i.passWord);this.targetTag.find("#"+t+"_cred_windows").html(i.useAsWindowCredential);this.targetTag.find("#"+t+"_cred_impersonate .editLabel").html(i.impersonateAuthenticatedUserAfterConnecting);this.targetTag.find("#"+t+"_prompt_text_tr .editLabel").html(i.enterPromptText);this.targetTag.find("#"+t+"_prompt_windows .editLabel").html(i.useAsWindowCredential);this.targetTag.find("#"+t+"_dsConfigMenu .editContextMenu").html(i.editContextMenu);this.targetTag.find("#"+t+"_dsConfigMenu .deleteContextMenu").html(i.deleteContextMenu);this.targetTag.find("#"+t+"_Sql_dsname_label_validation").html(i.specifyServerName);this.targetTag.find("#"+t+"_Sql_dbname_label_validation").html(i.specifyDatabaseName);this.targetTag.find("#"+t+"_Sql_dsname_label_validation").html(i.specifyDataSourceName);this.targetTag.find("#"+t+"_Sql_dsname_label_validation").html(i.nameAlreadyExistonDataSource)},n.prototype.wiredEvents=function(){this.targetTag.on("click","#"+this.id+"_headerback",$.proxy(this.connectionTypeBack,this));this.targetTag.on("click",".e-reportdesigner-datasourceTypes",$.proxy(this.newDatabase,this));this.targetTag.on("click","#"+this.id+"_dataStore_info_span_retrive",$.proxy(this.GetIntermediateStatus,this));this.targetTag.on("keyup",".e-dbrd-designer-datasource-search-container .e-autocomplete",$.proxy(this.onDataSourceSearchKeyPress,this));this.targetTag.on("click",".e-dbrd-designer-datasource-search-container .e-dbrd-designer-close",$.proxy(this.onDataSourceClearIconClick,this));this.targetTag.on("click",".e-close-icon",$.proxy(this.closeConnectionModeDialog,this))},n.prototype.unWiredEvents=function(){this.targetTag.off("click","#"+this.id+"_headerback",$.proxy(this.connectionTypeBack,this));this.targetTag.off("click",".e-reportdesigner-datasourceTypes",$.proxy(this.newDatabase,this));this.targetTag.off("click","#"+this.id+"_dataStore_info_span_retrive",$.proxy(this.GetIntermediateStatus,this));this.targetTag.off("keyup",".e-dbrd-designer-datasource-search-container .e-autocomplete",$.proxy(this.onDataSourceSearchKeyPress,this));this.targetTag.on("click",".e-dbrd-designer-datasource-search-container .e-dbrd-designer-close",$.proxy(this.onDataSourceClearIconClick,this));this.targetTag.off("click",".e-close-icon",$.proxy(this.closeConnectionModeDialog,this))},n.prototype.destroy=function(){this.unWiredEvents();this.webDsTemplateInstance.destroy();this.linkedAccountsInstance.destroy()},n.prototype.isOverflow=function(){return $("#"+this.id+"_dsConfigContainer").height()>$("#"+this.id+"_dsConfigBodyContainer").height()?!0:!1},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n.prototype.updateEJComponentSize=function(){var e=$("#"+this.id+"_basicPanel"),o=e.find(".e-textbox").not(".e-designer-exclude"),s=e.find(".e-textarea"),r=e.find(".e-js"),i=this.isOverflow(),u,n,f,t;if(r&&r.length>0)for(u=0;u<r.length;u++)if(n=$(r[u]),f=n.data("ejWidgets"),f){t=n.data(f[0]);switch(f[0]){case"ejDropDownList":n.hasClass("e-designer-exclude")||t.option("width",(i?n.hasClass("e-dropdownUpload")?"430":"434":n.hasClass("e-dropdownUpload")?"436":"438")+"px");break;case"ejAutocomplete":t.option("width")!=="100%"&&t.option("width",i?"430":"439px");break;case"ejNumericTextbox":t.option("width")!=="100%"&&t.option("width",i?"431":"439px")}}s.width(i?"418":"421px");o.width(i?"421":"426px")},n.prototype.updateDSListContainer=function(){var n=this.targetTag.height();$("#"+this.id+"_dsBodyContainer").height(n-($("#"+this.id+"_dsHeaderContainer").height()+$("#"+this.id+"_dsFooterContainer").height()));$("#"+this.id+"_dsBodyContainer").data("ejScroller")&&$("#"+this.id+"_dsBodyContainer").data("ejScroller").setModel({height:n-($("#"+this.id+"_dsHeaderContainer").height()+$("#"+this.id+"_dsFooterContainer").height())})},n.prototype.updateDSTypeContainer=function(){var n=this.targetTag.height(),i=$("#"+this.id+"_dsTypeFooterContainer"),r=$("#"+this.id+"_dsTypeHeaderContainer").height(),u=i.is(":visible")?i.height():0,t=$("#"+this.id+"_dsTypeList");(t.height()>n||this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.connection&&!this.dashboardDesigner.intermediateDBStatus)&&($("#"+this.id+"_dsTypeBodyContainer").height(n-(r+u)),$("#"+this.id+"_dsTypeBodyContainer").data("ejScroller")&&$("#"+this.id+"_dsTypeBodyContainer").data("ejScroller").setModel({height:n-(r+u)}));$("#"+this.id+"_dataType_container").hasClass("e-content")?t.css("padding-left","5px"):t.css("padding-left","9px")},n.prototype.updateDSConfigContainer=function(){var i=this.targetTag.height(),r=$("#"+this.id+"_dsConfigHeaderContainer").height(),u=$("#"+this.id+"_dsConfigFooterContainer").height(),n=$("#"+this.id+"_dsConfig_BodyContainer");n.height(i-(r+u));var f=parseFloat($("#"+this.id+"_dsConfigBodyContainer").css("padding-bottom")),e=$("#"+this.id+"_switchCont").is(":visible")?$("#"+this.id+"_switchCont").height():0,t=n.height()-(e+f);$("#"+this.id+"_dsConfigBodyContainer").height(t);$("#"+this.id+"_dsConfigBodyContainer").data("ejScroller")&&(this.targetTag.find("#"+this.id+"_dsConfigBodyContainer").data("ejScroller").setModel({height:t}),this.targetTag.find("#"+this.id+"_dsConfigBodyContainer").data("ejScroller").refresh());this.webDsTemplateInstance.resize();this.updateEJComponentSize()},n.prototype.isWebTemplatesVisible=function(){return this.webDsTemplateInstance.isVisible()},n}();window.ej.createObject("ej.DashboardDesignerUtility.DataSource",InternalDataSource,window);ExtractionModeDetails=function(){function n(){}return n}(),function(n){n[n.Live=0]="Live";n[n.Extract=1]="Extract"}(ExtractionMode||(ExtractionMode={})),function(n){n[n.all="All"]="all";n[n.socialMedia="Social Media"]="socialMedia";n[n.webAnalytics="WebAnalytics"]="webAnalytics";n[n.liveConnection="LiveConnection"]="liveConnection";n[n.cloudStorage="CloudStorage"]="cloudStorage";n[n.salesCrm="Sales & CRM"]="salesCrm";n[n.communications="Communications"]="communications";n[n.digitalMarketing="Digital Marketing"]="digitalMarketing";n[n.marketing="Marketing"]="marketing";n[n.email="Email"]="email";n[n.advertising="Advertising"]="advertising";n[n.finance="Finance"]="finance";n[n.projectManagement="Project Management"]="projectManagement";n[n.support="Support"]="support";n[n.sql="SQL"]="sql";n[n.nosql="NoSQL"]="nosql";n[n.files="Files"]="files";n[n.rest="Rest"]="rest";n[n.emailCompaign="Email Campaign"]="emailCompaign";n[n.mobileAnalytics="Mobile Analytics"]="mobileAnalytics";n[n.survey="Survey"]="survey"}(DataSourceCategory||(DataSourceCategory={}));InternalDateRangePopup=function(){function n(){this.filterInfo=new DimensionFilterInfo;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id}return Object.defineProperty(n,"DateRangePopup",{get:function(){return(this.dateRangePopup===null||this.dateRangePopup===undefined)&&(this.dateRangePopup=new ej.DashboardDesignerUtility.DateRangePopup),this.dateRangePopup},enumerable:!0,configurable:!0}),n.prototype.renderDateRangePopup=function(n){var t=null,f;if($("#"+n+"_dateRange_popup").length>0)t=$("#"+n+"_dateRange_popup");else{t=ej.buildTag("div.e-daterange-popup","",{width:"270px",height:"210px",position:"absolute",border:"1px solid #dddddd","background-color":"white","border-radius":"3px",display:"none","z-index":"1010"},{id:n+"_dateRange_popup"});var e=ej.buildTag("div","",{height:"25px","border-bottom":"1px solid #dddddd",padding:"10px 5px"}),o=ej.buildTag("table","",{width:"100%"},{}),i=ej.buildTag("tr","",{},{});this.renderRadioButton("Ranges",n,n+"_RangeBtn",!0,i,this.onRangeTypeChange,this);this.renderRadioButton("Start Date",n,n+"_startBtn",!1,i,this.onRangeTypeChange,this);this.renderRadioButton("End Date",n,n+"_endBtn",!1,i,this.onRangeTypeChange,this);var r=ej.buildTag("div","",{height:"111px","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"1010",padding:"10px 10px","padding-top":"12px"},{id:n+"_dateRange_fieldDiv"}),s=ej.buildTag("div","",{"margin-top":"6px"},{id:n+"_dateRange_start_tr"}),h=ej.buildTag("div","",{"margin-top":"12px"},{id:n+"_dateRange_end_tr"}),c=ej.buildTag("table","",{width:"100%"},{}),l=ej.buildTag("tr","",{},{}),a=ej.buildTag("table","",{width:"100%"},{}),v=ej.buildTag("tr","",{},{}),y=ej.buildTag("div","",{height:"39px","padding-top":"12px","padding-right":"12px","border-top":"1px solid #dddddd"},{}),u=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:n+"_dateRange_okBtn"}),p=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:n+"_dateRange_cancelBtn"});$(document.body).append(t);o.append(i);e.append(o);t.append(e);s.append(c);c.append(l);this.renderDateRangePicker(n+"_dateRange_Start",n,"Start",l,this.onPickerChange,this);h.append(a);a.append(v);this.renderDateRangePicker(n+"_dateRange_end",n,"End",v,this.onPickerChange,this);r.append(s);r.append(h);t.append(r);y.append(p).append(u);t.append(y);t.css("z-index",$("#"+this.id+"_query_filter_dialog_wrapper").css("z-index")+1);f=this.dashboardDesigner.locale.dialogOptions;u.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-okbtn",text:f.applyButtonText,enabled:!1,click:$.proxy(this.updateDateRangeAttr,this,n)});p.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-cancelbtn",text:f.cancelButtonText,click:$.proxy(this.closeDateRangePopup,this,n)});r.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});u.css("opacity","0.3");this.resetAttributes(t,n)}return t},n.prototype.resetAttributes=function(n,t){n.removeAttr("IsLoaded");n.removeAttr("Range");n.removeAttr("StartDate");n.removeAttr("EndDate");n.removeAttr("IsPopulate");this.getStartPicker(t).removeAttr("minDateTime");this.getEndPicker(t).removeAttr("minDateTime")},n.prototype.showLoadingIndicator=function(n){var t=this.getFieldDiv(n);t.ejWaitingPopup("show");this.getRangeRadioBtn(n).data("ejRadioButton").disable();this.getStartRadioBtn(n).data("ejRadioButton").disable();this.getEndRadioBtn(n).data("ejRadioButton").disable()},n.prototype.hideLoadingIndicator=function(n){var t=this.getFieldDiv(n);t.ejWaitingPopup("hide");this.getRangeRadioBtn(n).data("ejRadioButton").enable();this.getStartRadioBtn(n).data("ejRadioButton").enable();this.getEndRadioBtn(n).data("ejRadioButton").enable()},n.prototype.populateDateRangeDrpDwn=function(n,t,i,r,u,f,e){$("#"+n+"_dateRange_multidDrpDwn").off("click",$.proxy(this.showPopupContainer,this,n,t,i,r,e,f));$("#"+n+"_dateRange_multidDrpDwn").on("click",$.proxy(this.showPopupContainer,this,n,t,i,r,e,f));this.populateDateRangePopup(n,u)},n.prototype.renderDateRangeDrpDwn=function(n,t,i,r,u,f,e){this.filterInfo=u;var o=ej.buildTag("div.list e-popup-button","",{border:"0.5px solid #cecece","border-radius":"2px",width:e?e:"144px",height:"24px",cursor:"pointer","background-color":"white",display:"none"},{id:n+"_dateRange_multidDrpDwn","e-target":"e-daterange-popup"}),s=ej.buildTag("div","",{"border-style":"none",width:e?e-39+"px":"105px",height:"100%","padding-left":"5px","line-height":"24px",float:"left","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"},{id:n+"_dateRange_multiDrpDwn_txt",text:"Date Options"}),h=ej.buildTag("div","",{display:"inline-block",width:"33px",height:"100%"},{}),c=ej.buildTag("span.e-designer-ejwidgets-updown e-icon e-arrow-sans-down","",{color:"#666666",padding:"5px 10px"});h.append(c);o.append(s).append(h);s.text("Date Options");t.append(o);o.attr("e-targetId",n+"_dateRange_popup");o.bind("click",$.proxy(this.showPopupContainer,this,n,t,i,r,e,f));ej.isNullOrUndefined(this.filterInfo)||this.populateDateRangePopup(n,this.filterInfo)},n.prototype.updateIconIndication=function(n,t){var i=this.getDateRangeDrpDwn(t);n.css("display")==="block"?i.find(".e-designer-ejwidgets-updown").removeClass("e-arrow-sans-down").addClass("e-arrow-sans-up"):i.find(".e-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down")},n.prototype.renderRadioButton=function(n,t,i,r,u,f,e){var o=$("<td unselectable='on'/>"),s,h;u.append(o);s=ej.buildTag("input","",{},{type:"radio",name:t,id:i});o.append(s);h=ej.buildTag("label.editLabel e-designer-title-label",n,{"margin-left":"6px"},{"for":i,id:i});o.append(h);s.ejRadioButton({checked:r,change:$.proxy(f,e,t),cssClass:"e-designer-radio",size:"medium"})},n.prototype.renderDateRangePicker=function(n,t,i,r,u,f){var e=ej.buildTag("td","",{}),h=ej.buildTag("Label.e-designer-add-label",i,{},{type:"label"}),o=ej.buildTag("td","",{"padding-left":i==="Start"?"9px":"15px"},{id:n}),s=ej.buildTag("input.e-popup-button","",{},{type:"text",id:n+"_picker"});e.append(h);o.append(s);r.append(e);r.append(o);s.ejDateTimePicker({width:"201px",height:"26px",change:$.proxy(u,f,t),cssClass:"e-designer-border e-popup-button e-dashboarddesigner-widget"})},n.prototype.showPopupContainer=function(n,t,i,r,u,f){var e=this.renderDateRangePopup(n),o=t,c=e.css("display")==="block",s=o.offset(),h;e.css({display:c?"none":"block","z-index":ej.getMaxZindex()});e.offset({left:s.left+parseFloat(o.css("padding-left"))-(u?26:126),top:s.top+o.height()+2});this.updateIconIndication(e,n);e.css("display")==="block"&&(ej.isNullOrUndefined(e.attr("IsLoaded"))||e.attr("IsLoaded")==="false"?(h=[{Id:r.Id,Name:r.Name,SummaryType:"None",Sorting:"Ascending",FieldType:"Dimensions",MeasureFormatting:null,DateTimeFormat:"Date",FilterInfo:null}],ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getDateRange,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getDateRange,fieldInfo:h,dataset:i,type:"date",dateRangeType:f})},{fnction:$.proxy(this.setFieldInformation,this,n),indicator:[$.proxy(this.showLoadingIndicator,this,n),$.proxy(this.hideLoadingIndicator,this,n)]})):this.setDatePopupValues(n))},n.prototype.setFieldInformation=function(n,t){var u=this.renderDateRangePopup(n),f=$("#"+n+"_dateRange_Start_picker"),e=$("#"+n+"_dateRange_end_picker"),o=f.data("ejDateTimePicker"),s=e.data("ejDateTimePicker"),i=t.MinValue,r=t.MaxValue;u.attr("isLoaded","true");i=this.getConvertedDateTime(new Date(i));r=this.getConvertedDateTime(new Date(r));f.attr("minDateTime",i).attr("maxDateTime",r);e.attr("minDateTime",i).attr("maxDateTime",r);o.setModel({minDateTime:i,maxDateTime:r});s.setModel({minDateTime:i,maxDateTime:r});u.attr("IsPopulate")==="true"?this.setDatePopupValues(n):(o.setModel({value:i}),s.setModel({value:r}))},n.prototype.getConvertedDateTime=function(n){var i=(n.getMonth()+1>=10?"":"0")+(n.getMonth()+1),t=n.getHours()===0?12:n.getHours()>12?n.getHours()-12:n.getHours(),r=n.getHours()>=12?"PM":"AM",u=(t<10?"0":"")+t,f=(n.getMinutes()<10?"0":"")+n.getMinutes();return i+"/"+n.getDate()+"/"+n.getFullYear()+" "+u+":"+f+" "+r},n.prototype.setDatePopupValues=function(n){var t=this.renderDateRangePopup(n),o=ej.isNullOrUndefined(t.attr("Range"))?DateFormatOption.Range.toString():t.attr("Range"),s=ej.isNullOrUndefined(t.attr("StartDate"))?"":t.attr("StartDate"),h=ej.isNullOrUndefined(t.attr("EndDate"))?"":t.attr("EndDate"),i="block",r="block",c=this.getStartTr(n),l=this.getEndTr(n),u=this.getRangeRadioBtn(n).data("ejRadioButton"),f=this.getStartRadioBtn(n).data("ejRadioButton"),e=this.getEndRadioBtn(n).data("ejRadioButton");o===DateFormatOption.StartDate.toString()?(u.setModel({checked:!1}),f.setModel({checked:!0}),e.setModel({checked:!1}),r="none",i="block"):o===DateFormatOption.EndDate.toString()?(u.setModel({checked:!1}),f.setModel({checked:!1}),e.setModel({checked:!0}),r="block",i="none"):(u.setModel({checked:!0}),f.setModel({checked:!1}),e.setModel({checked:!1}));c.css("display",i);l.css("display",r);this.getStartPicker(n).data("ejDateTimePicker").setModel({value:s.length===0?this.getStartPicker(n).attr("minDateTime"):s});this.getEndPicker(n).data("ejDateTimePicker").setModel({value:h.length===0?this.getEndPicker(n).attr("maxDateTime"):h});this.enableApplyButton(n)},n.prototype.closeDateRangePopup=function(n){var t=this.renderDateRangePopup(n);t.css("display","none");this.updateIconIndication(t,n)},n.prototype.updateDateFormatCondition=function(n,t){var i=this.getRangeRadioBtn(n).data("ejRadioButton"),r=this.getStartRadioBtn(n).data("ejRadioButton"),u=this.getEndRadioBtn(n).data("ejRadioButton"),f="block",e="block",o=this.getStartTr(n),s=this.getEndTr(n);t===DateFormatOption.StartDate.toString()?(i.setModel({checked:!1}),r.setModel({checked:!0}),u.setModel({checked:!1}),e="none",f="block"):t===DateFormatOption.EndDate.toString()?(i.setModel({checked:!1}),r.setModel({checked:!1}),u.setModel({checked:!0}),e="block",f="none"):(i.setModel({checked:!0}),r.setModel({checked:!1}),u.setModel({checked:!1}));o.css("display",f);s.css("display",e)},n.prototype.populateDateRangePopup=function(n,t){var i=this.renderDateRangePopup(n),r;this.filterInfo=t;this.getDateRangeDrpDwnTxt(n).text("Date Options");this.updateIconIndication(i,n);i.attr("IsPopulate","true");ej.isNullOrUndefined(t)?(this.resetAttributes(i,n),this.updateDateFormatCondition(n,DateFormatOption.Range.toString())):(i.attr({StartDate:t.StartDate,EndDate:t.EndDate,Range:t.DateFormatCondition}),r=t.DateFormatCondition,this.updateDateFormatCondition(n,r))},n.prototype.updateDateRangeAttr=function(n){var t=this.renderDateRangePopup(n),i=this.getStartRadioBtn(n).data("ejRadioButton").model.checked,r=this.getEndRadioBtn(n).data("ejRadioButton").model.checked,u=this.getStartPicker(n).data("ejDateTimePicker").getValue(),f=this.getEndPicker(n).data("ejDateTimePicker").getValue();t.css("display","none");this.updateIconIndication(t,n);this.hideErrorIndicator(n);t.attr("StartDate",u);t.attr("EndDate",f);r?t.attr("Range",DateFormatOption.EndDate.toString()):i?t.attr("Range",DateFormatOption.StartDate.toString()):t.attr("Range",DateFormatOption.Range.toString())},n.prototype.hideErrorIndicator=function(n){var t=$("#"+n).find(".e-error-tip");t.length>0&&t.css("display","none")},n.prototype.getDateRangeValues=function(n){var t=this.renderDateRangePopup(n),u="Range",f=ej.isNullOrUndefined(t.attr("Range"))?DateFormatOption.Range.toString():t.attr("Range"),i,r;return u=f===DateFormatOption.StartDate.toString()?DateFormatOption.StartDate.toString():f===DateFormatOption.EndDate.toString()?DateFormatOption.EndDate.toString():DateFormatOption.Range.toString(),i=ej.isNullOrUndefined(t.attr("StartDate"))?"":t.attr("StartDate"),r=ej.isNullOrUndefined(t.attr("EndDate"))?"":t.attr("EndDate"),{StartDate:i,EndDate:r,DateFormatCondition:u,IsFilterApplied:i===""&&r===""?!1:!0}},n.prototype.onRangeTypeChange=function(n,t){var u=this.getStartRadioBtn(n).data("ejRadioButton").model.checked,f=this.getEndRadioBtn(n).data("ejRadioButton").model.checked,i=this.getStartTr(n),r=this.getEndTr(n);t.isInteraction&&(u?(r.css("display","none"),i.css("display","block")):f?(i.css("display","none"),r.css({display:"block","margin-top":"6px"})):(i.css("display","block"),r.css({display:"block","margin-top":"6px"})))},n.prototype.onPickerChange=function(n,t){t.isInteraction&&this.enableApplyButton(n)},n.prototype.enableApplyButton=function(n){var i=this.getStartPicker(n).data("ejDateTimePicker").getValue(),r=this.getEndPicker(n).data("ejDateTimePicker").getValue(),f=this.getStartPicker(n).attr("minDateTime"),t=this.getStartPicker(n).attr("maxDateTime"),e=this.getApplyBtn(n),o=this.getStartRadioBtn(n).data("ejRadioButton").model.checked,s=this.getEndRadioBtn(n).data("ejRadioButton").model.checked,u=!0;u=o?i!==f?!0:!1:s?r!==t?!0:!1:i!==t||r!==t?!0:!1;ej.DashboardUtil.buttonEnable(e,u)},n.prototype.getRangeRadioBtn=function(n){return $("#"+n+"_RangeBtn")},n.prototype.getStartRadioBtn=function(n){return $("#"+n+"_startBtn")},n.prototype.getEndRadioBtn=function(n){return $("#"+n+"_endBtn")},n.prototype.getDateRangeDrpDwn=function(n){return $("#"+n+"_dateRange_multidDrpDwn")},n.prototype.getStartPicker=function(n){return $("#"+n+"_dateRange_Start_picker")},n.prototype.getEndPicker=function(n){return $("#"+n+"_dateRange_end_picker")},n.prototype.getStartTr=function(n){return $("#"+n+"_dateRange_start_tr")},n.prototype.getEndTr=function(n){return $("#"+n+"_dateRange_end_tr")},n.prototype.getDateRangeDrpDwnTxt=function(n){return $("#"+n+"_dateRange_multiDrpDwn_txt")},n.prototype.getApplyBtn=function(n){return $("#"+n+"_dateRange_okBtn")},n.prototype.getFieldDiv=function(n){return $("#"+n+"_dateRange_fieldDiv")},n}();window.ej.createObject("ej.DashboardDesignerUtility.DateRangePopup",InternalDateRangePopup,window),function(n){n[n.Range="Range"]="Range";n[n.StartDate="StartDate"]="StartDate";n[n.EndDate="EndDate"]="EndDate"}(DateFormatOption||(DateFormatOption={}));InternalDesignPanel=function(){function InternalDesignPanel(n,t){this.scrollerPanel=null;this.rdlParser=null;this.propertyTimeOut=null;this.errorLoggerTimer=null;this.forwardTabIndex=0;this.reverseTabIndex=0;this.selectedReportItems=[];this.selectedItems=[];this.isSelectedPropertyPanel=!1;this.dbrdErrors=[];this.designCanvas=null;this.rowsLength=6;this.columnsLength=12;this.minimumCellSize=80;this.cellMargin=4;this.defaultPadding=50;this.minimumPanelWidth=1400;this.minimumPanelHeight=700;this.minimumSpan=1;this.helperItem=null;this.placingItem=null;this.itemRestrictedColor="rgba(250, 199, 199, 0.6)";this.itemPlacingColor="rgba(210, 239, 247, 0.6)";this.selectedItemBounds={left:0,top:0,width:0,height:0};this.isDragStarted=!1;this.isResizeStarted=!1;this.isSettingIconClick=!1;this.isEditLabel=!1;this.isUpdateLabel=!1;this.resizePosition="";this.isWidgetItemRestricted=!1;this.dataConfigurationInstance=null;this.filterObject=null;this.isPasteAction=!1;this.mapFileDwnldTimer=null;this.mapFileTimerCount=0;this.dashboardDesigner=n;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.dataConfigurationInstance=ejDashboardDesigner.getInstance("DataConfiguration");this.designId=this.dashboardDesigner._id;this.targetTag=t;this.renderDesignCanvas();this.designPanel.bind(ej.DashboardUtil.MouseEvent.mouseDown,$.proxy(this.designerMouseDown,this));this.filterObject=ejDashboardDesigner.getInstance("MasterSlaveFilter")}return InternalDesignPanel.prototype.renderDesignCanvas=function(){var t,i,n,r;for(this.designPanel=ej.buildTag("div.e-dashboarddesigner-designPanel","",{display:"block",width:"100%",height:"100%"},{id:this.designId+"_designPanel"}),this.scrollerPanel=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{display:"block",position:"relative",width:"100%",height:"100%"},{id:this.designId+"_scrollPanel"}),t=ej.buildTag("div","",{},{id:this.designId+"_scrollContentDesignPanel"}),this.targetTag.append(this.designPanel),this.designPanel.append(this.scrollerPanel),this.scrollerPanel.append(t),this.designCanvas=ej.buildTag("div.e-dashboarddesigner-designcanvas","",{position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",outline:"0px"},{id:this.designId+"_designCanvas",tabindex:"0"}),i=this.columnsLength*this.rowsLength,n=0;n<i;n++)r=ej.buildTag("div.e-dashboarddesigner-cellitem","",{border:"1px solid #e6e6e6",float:"left","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","box-sizing":"border-box"},{id:this.designId+"cellitem"+n,row:Math.floor(n/this.columnsLength),column:n%this.columnsLength}),this.designCanvas.append(r);this.helperItem=ej.buildTag("div","",{border:"1px solid #cccccc","background-color":"transparent",position:"absolute",display:"none","z-index":"1002","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"_helperItem"});this.placingItem=ej.buildTag("div.e-placing-cell","",{border:"1px solid #179bd7","background-color":this.itemPlacingColor,position:"absolute",display:"none","z-index":"1001","pointer-events":"none","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"_placingItem",row:"0",column:"0"});this.designCanvas.append(this.helperItem);this.designCanvas.append(this.placingItem);t.append(this.designCanvas);this.updatePanelSize();this.scrollerPanel.ejScroller({scrollerSize:9,autoHide:!0,enableTouchScroll:!1,buttonSize:14});this.updateScrollBar()},InternalDesignPanel.prototype.updateScrollBar=function(){var n=this.scrollerPanel.data("ejScroller"),r;if(!ej.isNullOrUndefined(n)){if(n.setModel({height:this.designPanel.height(),width:this.designPanel.width()}),n.refresh(),this.selectedReportItems.length>0){var u=$("#"+this.designId+"_designerConfigurationPanel"),t=this.designCanvas.find(".e-selected-item"),i=t.position().left+t.width()+15;i>this.designPanel.width()&&u.css("display")==="block"&&n.scrollX(i-this.designPanel.width())}n.isHScroll()||n.scrollX(0);r=this.scrollerPanel.children(".e-scrollbar");r.each(function(n,t){$(t).hasClass("e-canvas-scrollbar")||$(t).addClass("e-canvas-scrollbar")})}},InternalDesignPanel.prototype.updateDesignPanelSize=function(){var n=10,e=$("#"+this.designId+"_designerConfigurationPanel"),v=(e.css("display")==="block"?this.designPanel.width()+e.width():this.designPanel.width())-n,y=this.designPanel.height()-n,s,t;this.minimumPanelWidth=this.minimumCellSize*this.columnsLength+this.defaultPadding+n;this.minimumPanelWidth=Math.max(v,this.minimumPanelWidth);this.minimumPanelHeight=this.minimumCellSize*this.rowsLength+this.defaultPadding+n;this.minimumPanelHeight=Math.max(y,this.minimumPanelHeight);this.designCanvas.css({width:this.minimumPanelWidth+"px",height:this.minimumPanelHeight+"px"});var u=this.minimumPanelWidth-this.defaultPadding,f=this.minimumPanelHeight-this.defaultPadding,o=this.cellSize=Math.min(u/this.columnsLength,f/this.rowsLength);for(this.cellMargin=this.cellSize/20,this.cellSize=this.cellSize-this.cellMargin*2,s=this.columnsLength*this.rowsLength,t=0;t<s;t++)this.designCanvas.find("#"+this.designId+"cellitem"+t).css({width:this.cellSize+"px",height:this.cellSize+"px",margin:this.cellMargin+"px"});var h=o*this.columnsLength,c=o*this.rowsLength,l=h<u?(u-h)/2:0,a=c<f?(f-c)/2:0,i=this.defaultPadding/2-2,r=2;this.designCanvas.css({"padding-left":l+i+r+"px","padding-right":l+i-n-r+"px","padding-top":a+i+r+"px","padding-bottom":a+i-n-r+"px"});this.updateCanvasItemSize();this.updateScrollBar()},InternalDesignPanel.prototype.updateCanvasItemSize=function(){var n=this.getCellItem(Number(this.placingItem.attr("row")),Number(this.placingItem.attr("column"))),t,i,r;ej.isNullOrUndefined(n)||(t=n.position(),this.placingItem.css({left:t.left+this.cellMargin,top:t.top+this.cellMargin,width:n.width()+2,height:n.height()+2}));n=null;i=this.designCanvas.find(".e-reportitem");r=this;i.each(function(t,i){var e=$(i),f=ej.DashboardUtil.getWidgetInstance(e),u=f.cellInfo;n=r.getCellItem(u.row,u.column);ej.isNullOrUndefined(n)||f.updateItemSize(u)})},InternalDesignPanel.prototype.getCellItem=function(n,t){var r=this.designCanvas.find("[row="+n+"][column="+t+"]"),i=null;return r.each(function(n,t){var r=$(t);if(r.hasClass("e-dashboarddesigner-cellitem"))return i=r,!1}),i},InternalDesignPanel.prototype.getCellItemBounds=function(n,t){var r=this.getCellItem(n,t),i=r.position();return{left:i.left+this.cellMargin,top:i.top+this.cellMargin,width:this.cellSize,height:this.cellSize}},InternalDesignPanel.prototype.getWidgetItemPosition=function(n,t){var i=this.getCellItem(n,t).position();return{left:i.left+this.cellMargin,top:i.top+this.cellMargin}},InternalDesignPanel.prototype.getWidgetItemWidth=function(n){return n*this.cellSize+(n-1)*this.cellMargin*2},InternalDesignPanel.prototype.getWidgetItemHeight=function(n){return n*this.cellSize+(n-1)*this.cellMargin*2},InternalDesignPanel.prototype.updateWidgetItem=function(n,t,i,r,u,f){var e,o,s;u!=="updateSize"&&(e=this.getWidgetItemPosition(n.row,n.column),t.css({left:e.left,top:e.top}));u!=="updatePosition"&&(t.css({width:this.getWidgetItemWidth(n.colSpan),height:this.getWidgetItemHeight(n.rowSpan)}),this.updateWidgetSelectionBox(t));o=[{row:i.ContainerSettings.Bounds.Row,column:i.ContainerSettings.Bounds.Column,rowSpan:i.ContainerSettings.Bounds.RowSpan,colSpan:i.ContainerSettings.Bounds.ColumnSpan}];s=[{row:n.row,column:n.column,rowSpan:n.rowSpan,colSpan:n.colSpan}];i.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(n);ejDashboardDesigner.editManager.addCmdAction(r,u,f,this.designer._id+"_"+i.UniqueName,o,s)},InternalDesignPanel.prototype.designerMouseDown=function(n){var e=this.isScroller(n),i,r;if(!e)if(this.wireDesignerEvents(),this.mouseDownTarget=$(n.target),this.startPoint=this.getMousePosition(n),this.initialScrollPosition=this.getPanelScrollPosition(),this.mouseDownTarget.hasClass("e-dashboarddesigner-cellitem")||this.placingItem.css({display:"none","background-color":this.itemPlacingColor}),this.validateHelperIconClick(this.mouseDownTarget),this.isSettingIconClick)this.performWidgetSettingOption();else if(this.isEditLabel)ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]).enableLabelEdit();else if(this.isUpdateLabel)ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]).disableLabelEdit();else if(this.isResizeStarted)this.resizePosition=this.getResizePosition(this.mouseDownTarget),i=this.getCursor(this.resizePosition),this.setDragItem(i),$("#"+this.designId+"_designAreaContainer").css("cursor",i);else if(this.mouseDownTarget.hasClass("e-dashboarddesigner-cellitem"))this.removeItemSelection(),r=this.mouseDownTarget.position(),this.placingItem.attr({row:this.mouseDownTarget.attr("row"),column:this.mouseDownTarget.attr("column")}),this.placingItem.css({display:"block","background-color":"transparent",left:r.left+this.cellMargin,top:r.top+this.cellMargin,width:this.mouseDownTarget.width()+2,height:this.mouseDownTarget.height()+2}),this.setPropertyPanelItem();else{var u=this.mouseDownTarget.closest(".e-reportitem"),t=ej.DashboardUtil.getWidgetInstance(u),f=this.selectedReportItems.length>0&&u.length>0?ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0])!==t:!0;if(f&&!ej.isNullOrUndefined(t)){t.onWidgetUnSelect();t.onWidgetSelect(t)}else f&&(this.removeItemSelection(),this.setPropertyPanelItem())}},InternalDesignPanel.prototype.designCanvasMouseMove=function(n){this.endPoint=this.getMousePosition(n);this.validateItemMove();this.endScrollPosition=this.getPanelScrollPosition();this.isDragStarted&&this.selectedReportItems.length>0?(this.scrollPanel(n),this.performItemMove(!1)):this.isResizeStarted&&this.performItemResize(!1)},InternalDesignPanel.prototype.validateItemMove=function(){if(this.selectedReportItems.length>0&&!this.isResizeStarted&&!this.isDragStarted&&(Math.abs(this.endPoint.x-this.startPoint.x)>0||Math.abs(this.endPoint.y-this.startPoint.y)>0)&&this.isAllowItemMove()){this.isDragStarted=!0;var n=this.selectedReportItems[0];n.hasClass("e-combobox-item")?$("#"+this.designId+"comboBoxElement"+n.attr("id")+"_popup_list_wrapper").css("display","none"):n.hasClass("e-datepicker-item")&&$("#"+this.designId+"Element"+n.attr("id")+"_popup_wrapper").css("display","none");this.setDragItem("move")}},InternalDesignPanel.prototype.isAllowItemMove=function(){var n=!0,t;return this.mouseDownTarget.closest(".e-scrollbar").length>0?n=!1:this.selectedReportItems[0].hasClass("e-label-item")?(t=this.selectedReportItems[0].find(".e-label-element"),n=t.length>0&&!t.hasClass("e-editable-area")):this.selectedReportItems[0].hasClass("e-rangeslider-item")&&this.mouseDownTarget.closest(".e-slider-wrap").length>0&&(n=!1),n},InternalDesignPanel.prototype.designCanvasMouseUp=function(n){if($(n.currentTarget.activeElement).closest(".e-label-element").length>0){var t=ej.DashboardUtil.getWidgetInstance($(n.currentTarget.activeElement).closest(".e-label-item"));t.textSelectionChange(n)}this.endPoint=this.getMousePosition(n);this.endScrollPosition=this.getPanelScrollPosition();this.selectedReportItems.length>0&&(this.isDragStarted?(this.performItemMove(!0),this.showWidgetSelectionBox()):this.isResizeStarted&&(this.performItemResize(!0),this.showWidgetSelectionBox()),this.selectedReportItems[0].find(".e-widget-selectionbox").css("z-index",999));this.isSettingIconClick=!1;this.isEditLabel=!1;this.isUpdateLabel=!1;this.isResizeStarted=!1;this.isDragStarted=!1;this.resizePosition="";this.helperItem.css("display","none");this.placingItem.css("border-color","#179bd7");this.mouseDownTarget.hasClass("e-dashboarddesigner-cellitem")||this.placingItem.css("display","none");$("#"+this.designId+"_designAreaContainer").css("cursor","auto");this.unWiredDesignerEvents()},InternalDesignPanel.prototype.getPanelScrollPosition=function(){var n=this.scrollerPanel.data("ejScroller");return{x:n.model.scrollLeft,y:n.model.scrollTop}},InternalDesignPanel.prototype.getCanvasPadding=function(){return{left:parseFloat(this.designCanvas.css("padding-left")),top:parseFloat(this.designCanvas.css("padding-top")),right:parseFloat(this.designCanvas.css("padding-right")),bottom:parseFloat(this.designCanvas.css("padding-bottom"))}},InternalDesignPanel.prototype.scrollPanel=function(n){var o=this.getPosition("pageX",n),s=this.getPosition("pageY",n),i=10,r=this.designPanel.offset(),t=this.getCanvasPadding(),u=this.scrollerPanel.data("ejScroller"),f,e;this.designPanel.width()<=o-r.left+this.cellSize?(f=r.left+this.designCanvas.width()+t.left+t.right,f>=this.endScrollPosition.x+this.designPanel.width()+t.left&&u.scrollX(this.endScrollPosition.x+i)):r.left>=o-t.left-this.cellSize&&(e=this.endScrollPosition.x-i>0?this.endScrollPosition.x-i:0,u.scrollX(e));this.designPanel.height()<=s-r.top+this.cellSize?(f=r.top+this.designCanvas.height()+t.top+t.bottom,f>=this.endScrollPosition.y+this.designPanel.height()+t.top&&u.scrollY(this.endScrollPosition.y+i)):r.top>=s-t.top-this.cellSize&&(e=this.endScrollPosition.y-i>0?this.endScrollPosition.y-i:0,u.scrollY(e))},InternalDesignPanel.prototype.isScroller=function(n){return!ej.isNullOrUndefined($(n.target))&&!ej.isNullOrUndefined($(n.target).parents(".e-canvas-scrollbar"))&&$(n.target).parents(".e-canvas-scrollbar").length>0?!0:!1},InternalDesignPanel.prototype.getPosition=function(n,t){var i=0;return t[n]?i=t[n]:t.originalEvent&&t.originalEvent.targetTouches&&t.originalEvent.targetTouches.length>0?i=t.originalEvent.targetTouches[0][n]:t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length>0&&(i=t.originalEvent.changedTouches[0][n]),i},InternalDesignPanel.prototype.performItemMove=function(n){var c,l,f,u;this.selectedReportItems[0].find(".e-widget-selectionbox").css("z-index",999);this.hideWidgetSelectionBox();var a=this.getOffsetPosition(this.designCanvas.offset()),e=this.selectedItemBounds.left+(this.endPoint.x+this.endScrollPosition.x-(this.startPoint.x+this.initialScrollPosition.x)),o=this.selectedItemBounds.top+(this.endPoint.y+this.endScrollPosition.y-(this.startPoint.y+this.initialScrollPosition.y)),v={x:a.left+e+this.cellMargin,y:a.top+o+this.cellMargin,width:this.selectedItemBounds.width,height:this.selectedItemBounds.height},i=this.getTargetElement(v),s=parseFloat(this.designCanvas.css("padding-left")),h=parseFloat(this.designCanvas.css("padding-top")),t=e<0+s||o<0+h,r=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]);!ej.isNullOrUndefined(i)&&i.hasClass("e-dashboarddesigner-cellitem")?(this.placingItem.css("display","block"),u=this.placingItem.position(),(u.left+this.placingItem.width()+this.cellMargin-s>this.designCanvas.width()||u.top+this.placingItem.height()+this.cellMargin-h>this.designCanvas.height())&&(t=!0)):(c=this.helperItem.position(),l=2,(c.top+this.helperItem.height()+this.cellMargin+l>this.designCanvas.height()+h||c.left+this.helperItem.width()+this.cellMargin+l>this.designCanvas.width()+s)&&(t=!0,this.placingItem.css("display","none")));this.helperItem.css({display:"block","background-color":t?this.itemRestrictedColor:"transparent","border-color":t?"#f13232":"#cccccc",left:e,top:o});ej.isNullOrUndefined(i)||(f={row:Number(i.attr("row")),column:Number(i.attr("column")),rowSpan:r.cellInfo.rowSpan,colSpan:r.cellInfo.colSpan},this.placingItem.attr({row:f.row,column:f.column,rowSpan:f.rowSpan,colSpan:f.colSpan}),this.isWidgetItemRestricted=this.isItemRestricted(f),u=i.position(),this.placingItem.css({"z-index":1001,"background-color":this.isWidgetItemRestricted?this.itemRestrictedColor:this.itemPlacingColor,"border-color":this.isWidgetItemRestricted?"#f13232":"#179bd7",left:this.cellMargin+u.left,top:this.cellMargin+u.top}));this.placingItem.css("display",t?"none":"block");!n||this.isWidgetItemRestricted||t||(r.cellInfo.row=Number(this.placingItem.attr("row")),r.cellInfo.column=Number(this.placingItem.attr("column")),r.updatePosition(r.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange());t&&!this.isWidgetItemRestricted&&this.placingItem.css("display","none")},InternalDesignPanel.prototype.performItemResize=function(n){this.selectedReportItems[0].find(".e-widget-selectionbox").css("z-index",999);this.hideWidgetSelectionBox();switch(this.resizePosition){case"LeftTop":this.performLeftTop(n);break;case"LeftCenter":this.performLeftCenter(n);break;case"LeftBottom":this.performLeftBottom(n);break;case"CenterTop":this.performCenterTop(n);break;case"CenterBottom":this.performCenterBottom(n);break;case"RightCenter":this.performRightCenter(n);break;case"RightBottom":this.performRightBottom(n)}n&&this.updateWidgetSelectionBox(this.selectedReportItems[0])},InternalDesignPanel.prototype.performLeftTop=function(n){var f=this.selectedItemBounds.left-(this.startPoint.x-this.endPoint.x),e=this.selectedItemBounds.top-(this.startPoint.y-this.endPoint.y),o=f>this.selectedItemBounds.left+this.selectedItemBounds.width||f<0||e>this.selectedItemBounds.top+this.selectedItemBounds.height||e<0,r,t,i;if(this.helperItem.css({display:o?"none":"block",left:f,top:e,width:this.selectedItemBounds.width+(this.startPoint.x-this.endPoint.x),height:this.selectedItemBounds.height+(this.startPoint.y-this.endPoint.y)}),r=this.getTargetElement({x:this.endPoint.x,y:this.endPoint.y,width:1,height:1}),t=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]),ej.isNullOrUndefined(r))this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent"});else{i=r.position();i={left:i.left+this.cellMargin,top:i.top+this.cellMargin};var s=this.selectedItemBounds.left-i.left+this.selectedItemBounds.width,h=this.selectedItemBounds.top-i.top+this.selectedItemBounds.height,c=t.cellInfo.row+t.cellInfo.rowSpan-this.minimumSpan,l=t.cellInfo.column+t.cellInfo.colSpan-this.minimumSpan,a=Number(r.attr("row"))>c?c:Number(r.attr("row")),v=Number(r.attr("column"))>l?l:Number(r.attr("column")),u={row:a,column:v,rowSpan:t.cellInfo.row+t.cellInfo.rowSpan-a,colSpan:t.cellInfo.column+t.cellInfo.colSpan-v};this.placingItem.attr({row:u.row,column:u.column,rowSpan:u.rowSpan,colSpan:u.colSpan});this.isWidgetItemRestricted=this.isItemRestricted(u);this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent","border-color":this.isWidgetItemRestricted?"#f13232":"#179bd7",left:o?this.placingItem.position().left:i.left,top:o?this.placingItem.position().top:i.top,width:s>this.cellSize?s:this.cellSize,height:h>this.cellSize?h:this.cellSize})}n&&!this.isWidgetItemRestricted&&(t.cellInfo.row=Number(this.placingItem.attr("row")),t.cellInfo.column=Number(this.placingItem.attr("column")),t.cellInfo.rowSpan=Number(this.placingItem.attr("rowSpan")),t.cellInfo.colSpan=Number(this.placingItem.attr("colSpan")),t.updateItemSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange())},InternalDesignPanel.prototype.performLeftCenter=function(n){var u=this.selectedItemBounds.left-(this.startPoint.x-this.endPoint.x),f=u>this.selectedItemBounds.left+this.selectedItemBounds.width||u<0,i,t;if(this.helperItem.css({display:f?"none":"block",left:u,top:this.selectedItemBounds.top,width:this.selectedItemBounds.width+(this.startPoint.x-this.endPoint.x)}),i=this.getTargetElement({x:this.endPoint.x,y:this.endPoint.y,width:1,height:1},!0,!0),t=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]),ej.isNullOrUndefined(i))this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent"});else{var e=i.position().left+this.cellMargin,o=this.selectedItemBounds.left-e+this.selectedItemBounds.width,s=t.cellInfo.column+t.cellInfo.colSpan-this.minimumSpan,h=Number(i.attr("column"))>s?s:Number(i.attr("column")),r={row:t.cellInfo.row,column:h,rowSpan:t.cellInfo.rowSpan,colSpan:t.cellInfo.column+t.cellInfo.colSpan-h};this.placingItem.attr({row:r.row,column:r.column,rowSpan:r.rowSpan,colSpan:r.colSpan});this.isWidgetItemRestricted=this.isItemRestricted(r);this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent","border-color":this.isWidgetItemRestricted?"#f13232":"#179bd7",left:f?this.placingItem.position().left:e,top:this.selectedItemBounds.top,width:o>this.cellSize?o:this.cellSize})}n&&!this.isWidgetItemRestricted&&(t.cellInfo.column=Number(this.placingItem.attr("column")),t.cellInfo.colSpan=Number(this.placingItem.attr("colSpan")),t.updateItemSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange())},InternalDesignPanel.prototype.performLeftBottom=function(n){var f=this.selectedItemBounds.left-(this.startPoint.x-this.endPoint.x),e=this.selectedItemBounds.height+(this.endPoint.y-this.startPoint.y),o=f>this.selectedItemBounds.left+this.selectedItemBounds.width||f<0||e<0||this.selectedItemBounds.top+e>this.designCanvas.height(),i,t,r;if(this.helperItem.css({display:o?"none":"block",left:f,top:this.selectedItemBounds.top,height:e,width:this.selectedItemBounds.width+(this.startPoint.x-this.endPoint.x)}),i=this.getTargetElement({x:this.endPoint.x,y:this.endPoint.y,width:1,height:1}),t=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]),ej.isNullOrUndefined(i))this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent"});else{r=i.position();r={left:r.left+this.cellMargin,top:r.top+this.cellMargin};var s=this.selectedItemBounds.left-r.left+this.selectedItemBounds.width,h=r.top+i.height()+2-this.selectedItemBounds.top,a=Number(i.attr("row"))<t.cellInfo.row?t.cellInfo.row:Number(i.attr("row")),c=t.cellInfo.column+t.cellInfo.colSpan-this.minimumSpan,l=Number(i.attr("column"))>c?c:Number(i.attr("column")),u={row:t.cellInfo.row,column:l,rowSpan:a-t.cellInfo.row+this.minimumSpan,colSpan:t.cellInfo.column+t.cellInfo.colSpan-l};this.placingItem.attr({row:u.row,column:u.column,rowSpan:u.rowSpan,colSpan:u.colSpan});this.isWidgetItemRestricted=this.isItemRestricted(u);this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent","border-color":this.isWidgetItemRestricted?"#f13232":"#179bd7",left:o?this.placingItem.position().left:r.left,top:this.selectedItemBounds.top,height:h>this.cellSize?h:this.cellSize,width:s>this.cellSize?s:this.cellSize})}n&&!this.isWidgetItemRestricted&&(t.cellInfo.column=Number(this.placingItem.attr("column")),t.cellInfo.rowSpan=Number(this.placingItem.attr("rowSpan")),t.cellInfo.colSpan=Number(this.placingItem.attr("colSpan")),t.updateItemSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange())},InternalDesignPanel.prototype.performCenterTop=function(n){var u=this.selectedItemBounds.top-(this.startPoint.y-this.endPoint.y),f=u>this.selectedItemBounds.top+this.selectedItemBounds.height||u<0,i,t;if(this.helperItem.css({display:f?"none":"block",left:this.selectedItemBounds.left,top:u,height:this.selectedItemBounds.height+(this.startPoint.y-this.endPoint.y)}),i=this.getTargetElement({x:this.endPoint.x,y:this.endPoint.y,width:1,height:1},!0),t=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]),ej.isNullOrUndefined(i))this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent"});else{var e=i.position().top+this.cellMargin,o=this.selectedItemBounds.top-e+this.selectedItemBounds.height,s=t.cellInfo.row+t.cellInfo.rowSpan-this.minimumSpan,h=Number(i.attr("row"))>s?s:Number(i.attr("row")),r={row:h,column:t.cellInfo.column,rowSpan:t.cellInfo.row+t.cellInfo.rowSpan-h,colSpan:t.cellInfo.colSpan};this.placingItem.attr({row:r.row,column:r.column,rowSpan:r.rowSpan,colSpan:r.colSpan});this.isWidgetItemRestricted=this.isItemRestricted(r);this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent","border-color":this.isWidgetItemRestricted?"#f13232":"#179bd7",left:this.selectedItemBounds.left,top:f?this.placingItem.position().top:e,height:o>this.cellSize?o:this.cellSize})}n&&!this.isWidgetItemRestricted&&(t.cellInfo.row=Number(this.placingItem.attr("row")),t.cellInfo.rowSpan=Number(this.placingItem.attr("rowSpan")),t.updateItemSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange())},InternalDesignPanel.prototype.performCenterBottom=function(n){var u=this.selectedItemBounds.height+(this.endPoint.y-this.startPoint.y),e=u<0||this.selectedItemBounds.top+u>this.designCanvas.height(),i,t,f;if(this.helperItem.css({display:e?"none":"block",left:this.selectedItemBounds.left,top:this.selectedItemBounds.top,height:u}),i=this.getTargetElement({x:this.endPoint.x,y:this.endPoint.y,width:1,height:1},!0),t=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]),ej.isNullOrUndefined(i))this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent"});else{var o=i.position().top+this.cellMargin,s=Number(i.attr("row"))<t.cellInfo.row?t.cellInfo.row:Number(i.attr("row")),r={row:t.cellInfo.row,column:t.cellInfo.column,rowSpan:s-t.cellInfo.row+this.minimumSpan,colSpan:t.cellInfo.colSpan};this.placingItem.attr({row:r.row,column:r.column,rowSpan:r.rowSpan,colSpan:r.colSpan});this.isWidgetItemRestricted=this.isItemRestricted(r);f=o+i.height()+2-this.selectedItemBounds.top;this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent","border-color":this.isWidgetItemRestricted?"#f13232":"#179bd7",left:this.selectedItemBounds.left,top:this.selectedItemBounds.top,height:f>this.cellSize?f:this.cellSize})}n&&!this.isWidgetItemRestricted&&(t.cellInfo.rowSpan=Number(this.placingItem.attr("rowSpan")),t.updateSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange())},InternalDesignPanel.prototype.performRightCenter=function(n){var u=this.selectedItemBounds.width+(this.endPoint.x-this.startPoint.x),e=u<0||this.selectedItemBounds.left+u>this.designCanvas.width(),i,t,f;if(this.helperItem.css({display:e?"none":"block",left:this.selectedItemBounds.left,top:this.selectedItemBounds.top,width:u}),i=this.getTargetElement({x:this.endPoint.x,y:this.endPoint.y,width:1,height:1},!0,!0),t=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]),ej.isNullOrUndefined(i))this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent"});else{var o=i.position().left+this.cellMargin,s=Number(i.attr("column"))<t.cellInfo.column?t.cellInfo.column:Number(i.attr("column")),r={row:t.cellInfo.row,column:t.cellInfo.column,rowSpan:t.cellInfo.rowSpan,colSpan:s-t.cellInfo.column+this.minimumSpan};this.placingItem.attr({row:r.row,column:r.column,rowSpan:r.rowSpan,colSpan:r.colSpan});this.isWidgetItemRestricted=this.isItemRestricted(r);f=o+i.width()+2-this.selectedItemBounds.left;this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent","border-color":this.isWidgetItemRestricted?"#f13232":"#179bd7",left:this.selectedItemBounds.left,top:this.selectedItemBounds.top,width:f>this.cellSize?f:this.cellSize})}n&&!this.isWidgetItemRestricted&&(t.cellInfo.colSpan=Number(this.placingItem.attr("colSpan")),t.updateSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange())},InternalDesignPanel.prototype.performRightBottom=function(n){var u=this.selectedItemBounds.width+(this.endPoint.x-this.startPoint.x),f=this.selectedItemBounds.height+(this.endPoint.y-this.startPoint.y),h=u<0||this.selectedItemBounds.left+u>this.designCanvas.width()||f<0||this.selectedItemBounds.top+f>this.designCanvas.height(),i,t,e,o;if(this.helperItem.css({display:h?"none":"block",left:this.selectedItemBounds.left,top:this.selectedItemBounds.top,width:u,height:f}),i=this.getTargetElement({x:this.endPoint.x,y:this.endPoint.y,width:1,height:1}),t=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]),ej.isNullOrUndefined(i))this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent"});else{var s=i.position(),c=Number(i.attr("row"))<t.cellInfo.row?t.cellInfo.row:Number(i.attr("row")),l=Number(i.attr("column"))<t.cellInfo.column?t.cellInfo.column:Number(i.attr("column")),r={row:t.cellInfo.row,column:t.cellInfo.column,rowSpan:c-t.cellInfo.row+this.minimumSpan,colSpan:l-t.cellInfo.column+this.minimumSpan};this.placingItem.attr({row:r.row,column:r.column,rowSpan:r.rowSpan,colSpan:r.colSpan});this.isWidgetItemRestricted=this.isItemRestricted(r);e=s.left+this.cellMargin+i.width()+2-this.selectedItemBounds.left;o=s.top+this.cellMargin+i.height()+2-this.selectedItemBounds.top;this.placingItem.css({display:"block","z-index":1003,"background-color":"transparent","border-color":this.isWidgetItemRestricted?"#f13232":"#179bd7",left:this.selectedItemBounds.left,top:this.selectedItemBounds.top,width:e>this.cellSize?e:this.cellSize,height:o>this.cellSize?o:this.cellSize})}n&&!this.isWidgetItemRestricted&&(t.cellInfo.rowSpan=Number(this.placingItem.attr("rowSpan")),t.cellInfo.colSpan=Number(this.placingItem.attr("colSpan")),t.updateSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange())},InternalDesignPanel.prototype.isItemRestricted=function(n,t){var r,i;return this.isWidgetItemRestricted=!1,r=ej.isNullOrUndefined(t)||t?this.designCanvas.find(".e-reportitem").not(this.selectedReportItems[0]):this.designCanvas.find(".e-reportitem"),i=!1,r.each(function(t,r){var u=ej.DashboardUtil.getWidgetInstance($(r)).cellInfo;return(u.row>=n.row||u.row+u.rowSpan>n.row)&&u.row<n.row+n.rowSpan&&(u.column>=n.column||u.column+u.colSpan>n.column)&&u.column<n.column+n.colSpan?(i=!0,!1):!0}),i},InternalDesignPanel.prototype.updateElementLeft=function(n){var u=this.selectedReportItems[0],t=ej.DashboardUtil.getWidgetInstance(u),r,i,f;this.selectedItemBounds=this.getItemBounds($(u));r=t.cellInfo.column+(n==="left"?-1:1);i=this.getCellItem(t.cellInfo.row,r);r+t.cellInfo.colSpan-1<this.columnsLength&&!ej.isNullOrUndefined(i)&&i.length>0&&(f={row:Number(i.attr("row")),column:Number(i.attr("column")),rowSpan:t.cellInfo.rowSpan,colSpan:t.cellInfo.colSpan},this.isWidgetItemRestricted=this.isItemRestricted(f),this.isWidgetItemRestricted||(t.cellInfo.column=Number(i.attr("column")),t.updatePosition(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange()))},InternalDesignPanel.prototype.updateElementTop=function(n){var u=this.selectedReportItems[0],t=ej.DashboardUtil.getWidgetInstance(u),r,i,f;this.selectedItemBounds=this.getItemBounds($(u));r=t.cellInfo.row+(n==="top"?-1:1);i=this.getCellItem(r,t.cellInfo.column);r+t.cellInfo.rowSpan-1<this.rowsLength&&!ej.isNullOrUndefined(i)&&i.length>0&&(f={row:Number(i.attr("row")),column:Number(i.attr("column")),rowSpan:t.cellInfo.rowSpan,colSpan:t.cellInfo.colSpan},this.isWidgetItemRestricted=this.isItemRestricted(f),this.isWidgetItemRestricted||(t.cellInfo.row=Number(i.attr("row")),t.updatePosition(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange()))},InternalDesignPanel.prototype.updateElementWidth=function(n){var u=this.selectedReportItems[0],t=ej.DashboardUtil.getWidgetInstance(u),i,f,e,r;this.selectedItemBounds=this.getItemBounds($(u));i=t.cellInfo.colSpan+(n==="left"?-1:1);i>0&&i<=this.columnsLength&&(f={row:t.cellInfo.row,column:t.cellInfo.column,rowSpan:t.cellInfo.rowSpan,colSpan:i},this.isWidgetItemRestricted=this.isItemRestricted(f),e=t.cellInfo.column+i-1,r=this.getCellItem(t.cellInfo.row,e),!this.isWidgetItemRestricted&&!ej.isNullOrUndefined(r)&&r.length>0&&(t.cellInfo.colSpan=i,t.updateSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange()))},InternalDesignPanel.prototype.updateElementHeight=function(n){var u=this.selectedReportItems[0],t=ej.DashboardUtil.getWidgetInstance(u),i,f,e,r;this.selectedItemBounds=this.getItemBounds($(u));i=t.cellInfo.rowSpan+(n==="top"?-1:1);i>0&&i<=this.rowsLength&&(f={row:t.cellInfo.row,column:t.cellInfo.column,rowSpan:i,colSpan:t.cellInfo.colSpan},this.isWidgetItemRestricted=this.isItemRestricted(f),e=t.cellInfo.row+i-1,r=this.getCellItem(e,t.cellInfo.column),!this.isWidgetItemRestricted&&!ej.isNullOrUndefined(r)&&r.length>0&&(t.cellInfo.rowSpan=i,t.updateSize(t.cellInfo),ej.DashboardDesignerUtility.Serialization.notifyChange()))},InternalDesignPanel.prototype.nextWidgetItem=function(n){var i=this.designCanvas.find(".e-reportitem"),r=i.length,t,u;if(this.placingItem.is(":visible")&&(this.placingItem.css("display","none"),this.forwardTabIndex=-1),this.forwardTabIndex!==r)for(n.preventDefault(),t=0;t<r;t++){if(u=$(i[t]),this.selectedReportItems.length>0&&u.attr("id")===this.selectedReportItems[0].attr("id")){this.performItemSelection(t===r-1?$(i[0]):$(i[t+1]));this.addFocusClass(!0);this.forwardTabIndex++;break}if(this.selectedReportItems.length<1){this.performItemSelection($(i[0]));this.addFocusClass(!0);this.forwardTabIndex++;break}}else this.forwardTabIndex=0,this.addFocusClass(!1),$("#"+this.designId+"_dataPanelContainer").focus();n.stopPropagation()},InternalDesignPanel.prototype.previousWidgetItem=function(n){var i=this.designCanvas.find(".e-reportitem"),r=i.length,t,u;if(this.placingItem.is(":visible")&&(this.placingItem.css("display","none"),this.reverseTabIndex=-1),this.reverseTabIndex!==r)for(n.preventDefault(),t=r-1;t>=0;t--){if(u=$(i[t]),this.selectedReportItems.length>0&&u.attr("id")===this.selectedReportItems[0].attr("id")){this.performItemSelection(t===0?$(i[r-1]):$(i[t-1]));this.reverseTabIndex++;this.addFocusClass(!0);break}if(this.selectedReportItems.length<1){this.performItemSelection($(i[0]));this.reverseTabIndex++;this.addFocusClass(!0);break}}else this.reverseTabIndex=0,this.addFocusClass(!1),$("#"+this.designId+"_designerConfigurationPanel").is(":visible")&&$("#"+this.designId+"_itemPanelContainer").focus(),n.stopPropagation()},InternalDesignPanel.prototype.addFocusClass=function(n,t){this.designCanvas.removeClass("e-designer-canvas-focus");n&&this.designCanvas.addClass("e-designer-canvas-focus");!ej.isNullOrUndefined(t)&&n&&(this.forwardTabIndex=0,this.reverseTabIndex=0)},InternalDesignPanel.prototype.setDragItem=function(n){this.selectedItemBounds=this.getItemBounds($(this.selectedReportItems[0]));this.helperItem.css({width:this.selectedItemBounds.width,height:this.selectedItemBounds.height,cursor:n});this.placingItem.css({left:this.selectedItemBounds.left,top:this.selectedItemBounds.top,width:this.selectedItemBounds.width,height:this.selectedItemBounds.height})},InternalDesignPanel.prototype.getResizePosition=function(n){var t="";return n.hasClass("e-reportdesigner-selection-drag")||(n=n.parent()),n.hasClass("e-lefttop")?t="LeftTop":n.hasClass("e-leftcenter")?t="LeftCenter":n.hasClass("e-leftbottom")?t="LeftBottom":n.hasClass("e-centertop")?t="CenterTop":n.hasClass("e-centerbottom")?t="CenterBottom":n.hasClass("e-rightcenter")?t="RightCenter":n.hasClass("e-rightbottom")&&(t="RightBottom"),t},InternalDesignPanel.prototype.getCursor=function(n){var t="";switch(n){case"LeftTop":t="nw-resize";break;case"LeftCenter":t="w-resize";break;case"LeftBottom":t="sw-resize";break;case"CenterTop":t="n-resize";break;case"CenterBottom":t="s-resize";break;case"RightCenter":t="e-resize";break;case"RightBottom":t="se-resize";break;default:t="auto"}return t},InternalDesignPanel.prototype.getItemBounds=function(n){var t=n.position();return{left:t.left,top:t.top,width:n.width(),height:n.height()}},InternalDesignPanel.prototype.validateHelperIconClick=function(n){n.hasClass("e-reportdesigner-selection-move")||n.parent()&&n.parent().hasClass("e-reportdesigner-selection-move")?this.isSettingIconClick=!0:n.hasClass("e-dashboarddesigner-selection-edit")||n.parent()&&n.parent().hasClass("e-dashboarddesigner-selection-edit")?this.isEditLabel=!0:(n.hasClass("e-dashboarddesigner-selection-ok")||n.parent()&&n.parent().hasClass("e-dashboarddesigner-selection-ok"))&&(this.isUpdateLabel=!0);(n.hasClass("e-reportdesigner-selection-drag")||n.parent()&&n.parent().hasClass("e-reportdesigner-selection-drag"))&&(this.isResizeStarted=!0)},InternalDesignPanel.prototype.performWidgetSettingOption=function(){this.invokePropertyPanel();this.propertyPanel.showProperty(!0)},InternalDesignPanel.prototype.updatePreviousSelectedItem=function(){if(ej.isNullOrUndefined(this.propertyPanel.ActiveProperty)||(this.propertyPanel.itemNameChange(null),this.propertyPanel.itemDescriptionChange(null),this.propertyPanel.itemSubTitleChange(null)),!ej.isNullOrUndefined(this.propertyPanel.labelLastModifiedInfo)){var n=this.propertyPanel.EjMaskEditObj[this.designId+"_"+this.propertyPanel.labelLastModifiedInfo.elementType+"_"+this.propertyPanel.labelLastModifiedInfo.categoryName+"_"+this.propertyPanel.labelLastModifiedInfo.item.name].val();this.propertyPanel.onValueChange(this.propertyPanel.labelLastModifiedInfo.item,this.propertyPanel.labelLastModifiedInfo.categoryName,this.propertyPanel.labelLastModifiedInfo.elementType,{value:n});this.propertyPanel.labelLastModifiedInfo=null}},InternalDesignPanel.prototype.performItemSelection=function(n){n.length>0&&(this.removeItemSelection(),this.itemSelection(n),this.invokePropertyPanel());this.placingItem.is(":visible")&&this.placingItem.css("display","none")},InternalDesignPanel.prototype.removeItemSelection=function(){this.selectedReportItems.length>0&&(this.updatePreviousSelectedItem(),this.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.selectedReportItems[0].removeClass("e-selected-item"),this.selectedReportItems=[],this.updateRptToolbarActions())},InternalDesignPanel.prototype.itemSelection=function(n){var t,i;n.length>0&&(t=ej.DashboardUtil.getWidgetInstance(n),ej.isNullOrUndefined(t)||(i=t.getSettingsInfo(),this.createWidgetSelectionBox(n,i.className,i.pathLength)),n.hasClass("e-selected-item")||(n.addClass("e-selected-item"),this.selectedReportItems=[n]),this.updateRptToolbarActions())},InternalDesignPanel.prototype.createWidgetSelectionBox=function(n,t,i){var r=ej.buildTag("div.e-widget-selectionbox","",{left:"0px",top:"0px",height:"100%",width:"100%",border:"1px solid #05b2ed",position:"absolute",display:"block",cursor:"move","pointer-events":"none","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":999});r.append(this.generateHelperItem("e-reportdesigner-selection-drag e-lefttop e-widgeticons",2)).append(this.generateHelperItem("e-reportdesigner-selection-drag e-leftcenter e-widgeticons",2)).append(this.generateHelperItem("e-reportdesigner-selection-drag e-leftbottom e-widgeticons",2)).append(this.generateHelperItem("e-reportdesigner-selection-drag e-centertop e-widgeticons",2)).append(this.generateHelperItem("e-reportdesigner-selection-drag e-centerbottom e-widgeticons",2)).append(this.generateHelperItem("e-reportdesigner-selection-drag e-rightcenter e-widgeticons",2)).append(this.generateHelperItem("e-reportdesigner-selection-drag e-rightbottom e-widgeticons",2));r.append(this.generateHelperItem(t,i));n.append(r);this.updateWidgetSelectionBox(n)},InternalDesignPanel.prototype.generateHelperItem=function(n,t){var i={},u=null,f,r,e;switch(n){case"e-reportdesigner-selection-drag e-lefttop e-widgeticons":i={cursor:"nw-resize"};break;case"e-reportdesigner-selection-drag e-leftcenter e-widgeticons":i={cursor:"w-resize"};break;case"e-reportdesigner-selection-drag e-leftbottom e-widgeticons":i={cursor:"sw-resize"};break;case"e-reportdesigner-selection-drag e-centertop e-widgeticons":i={cursor:"n-resize"};break;case"e-reportdesigner-selection-drag e-centerbottom e-widgeticons":i={cursor:"s-resize"};break;case"e-reportdesigner-selection-drag e-rightcenter e-widgeticons":i={cursor:"e-resize"};break;case"e-reportdesigner-selection-drag e-rightbottom e-widgeticons":i={cursor:"se-resize"};break;case"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic":i={cursor:"pointer","font-size":"25px"};u="Widget Settings"}for(f=ej.buildTag("div","",{cursor:i.cursor,position:"absolute","font-size":ej.isNullOrUndefined(i["font-size"])?"":i["font-size"],"pointer-events":"auto","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{"class":n,title:ej.isNullOrUndefined(u)?"":u}),r=0;r<t;r++)e=ej.buildTag("span","",{},{"class":"path"+(r+1).toString()}),f.append(e);return f[0]},InternalDesignPanel.prototype.updateWidgetSelectionBox=function(n){var t=n.find(".e-widget-selectionbox"),i=t.width(),r=t.height();t.find(".e-lefttop").css({left:"-4px",top:"-4px"});t.find(".e-leftcenter").css({left:"-4px",top:r/2-4+"px"});t.find(".e-leftbottom").css({left:"-4px",top:r-4+"px"});t.find(".e-centertop").css({left:i/2-4+"px",top:"-4px"});t.find(".e-centerbottom").css({left:i/2-4+"px",top:r-4+"px"});t.find(".e-rightcenter").css({left:i-3+"px",top:r/2-4+"px"});t.find(".e-rightbottom").css({left:i-3+"px",top:r-4+"px"});t.find(".e-moveicon").css({left:i-11+"px",top:"-13px"})},InternalDesignPanel.prototype.showWidgetSelectionBox=function(){this.selectedReportItems[0].find(".e-widget-selectionbox").css("display","block")},InternalDesignPanel.prototype.hideWidgetSelectionBox=function(){this.selectedReportItems[0].find(".e-widget-selectionbox").css("display","none")},InternalDesignPanel.prototype.validateTargetElement=function(n,t){var i=this.cellMargin*2,r={x:n.x+i,y:n.y,height:1,width:1},u={x:n.x,y:n.y+i,height:1,width:1},f={x:n.x+i,y:n.y+i,height:1,width:1};return this.isIntersectDesignerSection(n,t)||this.isIntersectDesignerSection(r,t)||this.isIntersectDesignerSection(u,t)||this.isIntersectDesignerSection(f,t)?!1:!0},InternalDesignPanel.prototype.getTargetElement=function(n,t,i){var r=this,e=this.designCanvas.find(".e-dashboarddesigner-cellitem"),u=this,f=null;return e.each(function(e,o){var c=$(o),a=u.getOffsetPosition(c.offset()),l=u.getSelectionBounds(a,c),s,h;return!ej.isNullOrUndefined(t)&&t?(h={x:i?n.x:n.x+r.cellMargin,y:i?n.y+r.cellMargin:n.y,width:n.width,height:n.height},s=r.validateTargetElement(h,l),s&&(h.x=i?n.x:n.x-r.cellMargin,h.y=i?n.y-r.cellMargin:n.y,s=r.validateTargetElement(h,l))):s=r.validateTargetElement(n,l),s||(f=c),s}),f},InternalDesignPanel.prototype.isIntersectDesignerSection=function(n,t){return n.x>=t.x1&&n.x<=t.x2&&n.y>=t.y1&&n.y<=t.y2},InternalDesignPanel.prototype.isDesignerSections=function(n){return n.hasClass("e-dashboarddesigner-cellitem")||n.hasClass("e-placing-cell")||n.hasClass("e-dashboarddesigner-designcanvas")},InternalDesignPanel.prototype.wireDesignerEvents=function(){$(document).bind(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.designCanvasMouseMove,this));$(document).bind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.designCanvasMouseUp,this))},InternalDesignPanel.prototype.unWiredDesignerEvents=function(){$(document).unbind(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.designCanvasMouseMove,this));$(document).unbind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.designCanvasMouseUp,this));$(document).unbind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.designCanvasMouseUp,this))},InternalDesignPanel.prototype.isLoaded=function(){return!ej.isNullOrUndefined(this.targetTag)&&this.targetTag.length>0},InternalDesignPanel.prototype.updatePanelSize=function(){this.isLoaded()&&this.designPanel.css("height",this.targetTag.height()+"px");this.updateDesignPanelSize()},InternalDesignPanel.prototype.getItemWidth=function(n){return n.width()+parseFloat(n.css("border-left-width"))+parseFloat(n.css("border-right-width"))},InternalDesignPanel.prototype.getItemHeight=function(n){return n.height()+parseFloat(n.css("border-top-width"))+parseFloat(n.css("border-bottom-width"))},InternalDesignPanel.prototype.updateControlSize=function(n){if(n.attr("hasHeader")){var t=n.find(".e-dbrd-widget"),i=n.find(".e-dbrd-control-header").height(),r=n.height();t.css("height",r-i+"px")}},InternalDesignPanel.prototype.getSelectionBounds=function(n,t){return{x1:n.left,x2:n.left+this.getItemWidth(t),y1:n.top,y2:n.top+this.getItemHeight(t)}},InternalDesignPanel.prototype.getMousePosition=function(n){var t=n.pageX,i=n.pageY,r,u;return n.pageX||n.pageY?(t=n.pageX,i=n.pageY):n.originalEvent&&n.originalEvent.targetTouches&&n.originalEvent.targetTouches.length>0?(t=n.originalEvent.targetTouches[0].pageX,i=n.originalEvent.targetTouches[0].pageY):n.originalEvent&&n.originalEvent.changedTouches&&n.originalEvent.changedTouches.length>0&&(t=n.originalEvent.changedTouches[0].pageX,i=n.originalEvent.changedTouches[0].pageY),r=$(document).scrollLeft(),u=$(document).scrollTop(),{x:Math.round(t+r),y:Math.round(i+u)}},InternalDesignPanel.prototype.getOffsetPosition=function(n){var t=this.designCanvas.offset(),i={left:0,top:0};return ej.isNullOrUndefined(n)||(i={left:t.left+(n.left-t.left),top:t.top+(n.top-t.top)}),i},InternalDesignPanel.prototype.reset=function(){this.selectedReportItems=[];this.dbrdErrors=[];ej.DashboardUtil.destroyEjObjects(this.designCanvas.find(".e-js"))},InternalDesignPanel.prototype.logError=function(n){var t=this;n.Error={Message:n.Error.message,Stack:n.Error.stack};this.dbrdErrors.push(n);this.errorLoggerTimer&&(clearTimeout(this.errorLoggerTimer),this.errorLoggerTimer=null);this.errorLoggerTimer=setTimeout($.proxy(function(){ej.DashboardDesignerUtility.Serialization.syncScriptErrors();clearTimeout(t.errorLoggerTimer);t.errorLoggerTimer=null},this),1e3)},InternalDesignPanel.prototype.updateDefaultProperties=function(){this.propertyPanel.showProperty(!1);this.removeItemSelection();this.updateReportProperties()},InternalDesignPanel.prototype.createWidgetInstance=function(n,t){var i,r,o;if(ej.isNullOrUndefined(n))throw new Error("Invalid NameSpace Argument");var f=n.split("."),u=null,e=null;try{for(i=0;i<f.length;i++)u=i===0?window[f[i]]:u[f[i]]}catch(s){throw new Error("Invalid NameSpace Argument");}if(ej.isNullOrUndefined(u))throw new Error("Invalid NameSpace Argument");try{return r=Object.create(u.prototype),o=[t],r.constructor.apply(r,o),e=ejDashboardDesigner.getAvailableName(r.rootCss,t),r.itemName=e.Id,r}catch(s){throw new Error("InCorrect Implementation of IDashboardWidgetBase");}},InternalDesignPanel.prototype.renderItem=function(n,t,i,r){var u=this.createWidgetInstance(n),e,o,f,s;if(!ej.isNullOrUndefined(u)){e=null;u.cellInfo=r;u.reportName=u.itemName;o=this.getCellItemBounds(r.row,r.column);this.containerCreation(u,n,o);u.render(t,e);u.onWidgetUnSelect();u.onWidgetSelect(u);this.placingItem.is(":visible")&&this.placingItem.css("display","none");u.isMasterByDefault&&this.filterObject.ActAsMasterPropertyChangeInFilterConfigInfo(!0);f=u.getJson();ej.isNullOrUndefined(f)||ej.isNullOrUndefined(f.FilterSettings)?this.filterObject.IgnoreFilterActionPropertyChange(!1):this.filterObject.IgnoreFilterActionPropertyChange(f.FilterSettings.IgnoreFilterActions);s=[n,t,i,{row:r.row,column:r.column,rowSpan:r.rowSpan,colSpan:r.colSpan}];ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemAdd,"renderItem","DesignPanel",this.designer._id+"_"+u.reportName,null,s)}},InternalDesignPanel.prototype.containerCreation=function(n,t,i){var r,e,c,u,f;t=n.rootCss;r=n.getJson();n.controlContainer=ej.buildTag("div.e-reportitem e-dbrd-control-container","",{left:i.left,top:i.top,width:i.width,height:i.height,position:"absolute","box-sizing":"content-box","-moz-box-sizing":"content-box","-webkit-box-sizing":"content-box"},{id:this.designer._id+"_"+n.reportName,Name:n.reportName,isDataEnabled:n.isDataEnabled,hasHeader:r.ContainerSettings.ShowHeader,type:n.controlType,controlType:ej.DashboardDesignerUtility.Serialization.enumToString(WidgetType,n.isMasterByDefault?WidgetType.Filter:WidgetType.NonFilter)});n.controlContainer.addClass(t);this.designCanvas.append(n.controlContainer);this.appendSpinningWidget(n.controlContainer);e=r.ContainerSettings.ShowHeader?{controlTitle:r.ContainerSettings.Title,controlId:n.reportName,isControlMenuVisible:n.isControlMenuVisible,isMaximizeEnable:!1,isFilterIconEnable:r.FilterSettings.ActAsMasterWidget,controlType:ej.DashboardDesignerUtility.Serialization.enumToString(WidgetType,n.isMasterByDefault?WidgetType.Filter:WidgetType.NonFilter)}:{};Object.keys(e).length>0&&(this.getControlHeader(e,n),this.getControlSubHeader(n));this.createContentContainer(n);this.createNoDataContainer(n);var o=$(n.controlContainer).find(".e-dbrd-control-title"),l=$(n.controlContainer).find(".e-dbrd-control-description"),s=r.ContainerSettings.Title,h=r.ContainerSettings.Description;l.css({display:!ej.isNullOrUndefined(h)&&h.trim().length>0?"block":"none"});s=ej.DashboardUtil.getInstance().getResultantParameterString(s,r.Data.Id);o.html(s);o.attr("title",o.text());c=ejDashboardDesigner.getInstance("ContainerPropertyItem");$(n.controlContainer).find(".e-dbrd-control-title-wrapper").css({"justify-content":c.getContainerTitleAlignmentValue(ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,r.ContainerSettings.TextAlignment))});$(n.controlContainer).find(".e-dbrd-control-sub-title").css("text-align",ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,r.ContainerSettings.TextAlignment));n.getReportItemJson().ContainerSettings.SubTitle!==" "&&(u=n.getReportItemJson().ContainerSettings.SubTitle,f=$(n.controlContainer).find(".e-dbrd-control-sub-title"),u=ej.DashboardUtil.getInstance().getResultantParameterString(u,r.Data.Id),f.html(u),f.attr("title",f.text()));$(n.controlContainer).find(".e-dbrd-control-title").css({color:r.ContainerSettings.TextColor});r.ContainerSettings.ShowBorder&&($(n.controlContainer).find(".e-dbrd-control-sub-title").css("text-align",ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,r.ContainerSettings.TextAlignment)),$(n.controlContainer).find(".e-dbrd-control-title").css({color:r.ContainerSettings.TextColor}),n.getJson().ContainerSettings.ShowBorder?$(n.controlContainer).css({border:"1px solid lightgray"}):$(n.controlContainer).css({border:"0px"}),$(n.controlContainer).css("border-radius",r.ContainerSettings.CornerRadius),$(n.controlContainer).find(".e-dbrd-content-container").css({"border-bottom-left-radius":r.ContainerSettings.CornerRadius,"border-bottom-right-radius":r.ContainerSettings.CornerRadius}))},InternalDesignPanel.prototype.createContentContainer=function(n){var i=n.getJson().ContainerSettings.SubTitle,t=10,r;n.isHeaderVisible&&(t=n.controlHeader.outerHeight(!0),!ej.isNullOrUndefined(i)&&i.trim().length>0?(t+=n.controlSubHeader.outerHeight(!0),$(n.controlContainer).find(".e-dbrd-control-sub-header").css("display","block")):$(n.controlContainer).find(".e-dbrd-control-sub-header").css("display","none"));r=n.isHeaderVisible?"calc(100% - "+t+"px)":"100%";n.contentContainer=ej.buildTag("div.e-dbrd-content-container e-dashboardviewer","",{width:"100%",height:r,"box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",padding:n.isHeaderVisible?"0px 3px 3px 3px":"3px","background-color":"#ffffff"},{});n.controlContainer.append(n.contentContainer)},InternalDesignPanel.prototype.appendSpinningWidget=function(n){var i="http://www.w3.org/2000/svg",r=ej.buildTag("div.ej-background-waiting-popup","",{display:"none",top:"0px",opacity:"0.8",position:"absolute",width:"100%",height:"100%","background-color":"white","z-index":"3000"}),u=ej.buildTag("div.ej-dashboard-spinning","",{}),t=document.createElementNS(i,"svg"),f=document.createElementNS(i,"circle"),e=document.createElementNS(i,"circle");ej.DashboardUtil.setAttributes(t,{"class":"ej-dashboard-circular",viewBox:"25 25 50 50"});ej.DashboardUtil.setAttributes(f,{"class":"path-outline",cx:"50",cy:"50",r:"10",fill:"none","stroke-width":"2","stroke-miterlimit":"20"});ej.DashboardUtil.setAttributes(e,{"class":"path",cx:"50",cy:"50",r:"10",fill:"none","stroke-width":"2","stroke-miterlimit":"20"});t.appendChild(f);t.appendChild(e);u.append(t);r.append(u);n.append(r)},InternalDesignPanel.prototype.createNoDataContainer=function(n){n.nodataDispalyContainer=ej.buildTag("div.e-dbrd-control-nodatainfo e-nodata-container","",{padding:n.isHeaderVisible?"0px 3px 3px 3px":"3px"},{});var t=ej.buildTag("div.e-dbrd-control-nodatainfo e-info-div align-center","",{display:"inline-block"},{}),r=ej.buildTag("div.widget-info-icon","",{display:"inline-block"},{}),i=ej.buildTag("div.e-nodata","",{"font-size":"12px","font-style":"italic","font-family":"Roboto"},{});i.html("There is no data to be displayed.");t.append(r);t.append(i);n.nodataDispalyContainer.append(t);n.contentContainer.append(n.nodataDispalyContainer)},InternalDesignPanel.prototype.showControlError=function(n,t,i){var u=n,r,f;u.children(".e-dbrd-control").css({display:"none"});r=$("<div>").addClass("e-dbrd-control-error align-center").css({"z-index":"998",position:"relative"});r.append($("<div>").addClass("widget-error-icon").attr({"data-tooltip":"Data Retrieval Error"}).addClass("e-dbrd-hoverable"),$("<div>").addClass("e-dbrd-controlError-msg").html("Data Retrieval Error"),$("<div class='e-dbrd-link-btn'>").html("KnowMore..."));u.css({display:"table"});r.append($("<button type='button' class='reload-retrievalerror-icon reload-button e-dbrd-hand-cursor'><span style = 'padding-left:6px'>Reload<\/span><\/button>").addClass("e-dbrd-refresh-link-btn").css({"font-size":"13px"}).data({control:u}));u.append(r);$(".e-dbrd-link-btn").bind("click",$.proxy(ej.DashboardUtil.getInstance().alertDialog,ej.DashboardUtil.getInstance(),this.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,this.dashboardDesigner.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,t.Message));f=this;$(".reload-retrievalerror-icon").bind("click",function(){f.dataConfigurationInstance.postDraggedFields()});i.rowSpan===1&&i.colSpan===1?(r.find(".widget-error-icon").remove(),r.prepend($("<div>").addClass("widget-error-icon-single").attr({"data-tooltip":"Data Retrieval Error"}).addClass("e-dbrd-hoverable").css({"font-size":"18px"})),r.find(".e-dbrd-controlError-msg").remove(),r.find(".e-dbrd-link-btn").css({"font-size":"7px"}),r.find(".e-dbrd-refresh-link-btn").css({border:"none","font-size":"7px",color:"#3b99fc",height:"15px","margin-top":"0px"})):i.rowSpan===1&&(r.find(".widget-error-icon").addClass("e-dbrd-iocn-single"),r.find(".e-dbrd-controlError-msg").remove(),r.find(".e-dbrd-refresh-link-btn").addClass("e-dbrd-refresh-single"))},InternalDesignPanel.prototype.canRemove=function(){return this.designCanvas.find(".e-selected-item").length>0},InternalDesignPanel.prototype.removeItem=function(){ejDashboardDesigner.editManager.setMergeAction(!0);var i=this.designCanvas.find(".e-selected-item"),t=this,n=null;i.each(function(i,r){var u=ej.DashboardUtil.getWidgetInstance($(r));ej.isNullOrUndefined(u)||(t.filterObject.RemoveSelectedWidgetFromFilterObject(),n=t.selectNextItem($(r)),u.dispose())});ejDashboardDesigner.editManager.setMergeAction(!1);this.updateSelectedItems();ej.isNullOrUndefined(n)?this.updateReportProperties():this.performItemSelection(n);this.updateRptToolbarActions();ej.DashboardDesignerUtility.Serialization.notifyChange()},InternalDesignPanel.prototype.selectNextItem=function(n){for(var f,r=null,i=this.designCanvas.find(".e-reportitem"),u=i.length,t=0;t<u;t++)f=$(i[t]),n.attr("id")===f.attr("id")&&(r=t===u-1?$(i[0]):$(i[t+1]));return r},InternalDesignPanel.prototype.canCopy=function(){return this.designCanvas.find(".e-selected-item").length>0},InternalDesignPanel.prototype.canCut=function(){return this.designCanvas.find(".e-selected-item").length>0},InternalDesignPanel.prototype.canPaste=function(){return this.dashboardDesigner.copiedItem&&this.dashboardDesigner.copiedItem.items&&this.dashboardDesigner.copiedItem.items.length>0},InternalDesignPanel.prototype.copyItem=function(){var n=[];ejDashboardDesigner.editManager.setMergeAction(!0);this.designCanvas.find(".e-selected-item").each(function(t,i){var r=ej.DashboardUtil.getWidgetInstance($(i)),u=r.getReportItemJson();n.push({item:JSON.parse(JSON.stringify(u))})});n&&n.length>0&&(this.dashboardDesigner.copiedItem={actionType:CopyType.ReportItem,items:n},this.dashboardDesigner.rptToolbar.showPaste(!0));ejDashboardDesigner.editManager.setMergeAction(!1)},InternalDesignPanel.prototype.cutItem=function(){var n=[],t=this.designCanvas.find(".e-selected-item"),i=t.length;ejDashboardDesigner.editManager.setMergeAction(!0);t.each(function(t,i){var r=ej.DashboardUtil.getWidgetInstance($(i)),u;ej.isNullOrUndefined(r)||(u=r.getReportItemJson(),n.push({item:JSON.parse(JSON.stringify(u))}),r.dispose())});n.length>0&&(this.dashboardDesigner.copiedItem={actionType:CopyType.ReportItem,items:n},this.dashboardDesigner.rptToolbar.showCopy(!1),this.dashboardDesigner.rptToolbar.showCut(!1),this.dashboardDesigner.rptToolbar.showPaste(!0));this.updateSelectedItems();i>0&&this.updateReportProperties();ejDashboardDesigner.editManager.setMergeAction(!1)},InternalDesignPanel.prototype.pasteItem=function(){var i,t,r;if(!ej.isNullOrUndefined(this.dashboardDesigner.copiedItem)){var n=this.dashboardDesigner.copiedItem.items,u=Number(this.placingItem.attr("row")),f=Number(this.placingItem.attr("column"));if(this.dashboardDesigner.copiedItem.actionType===CopyType.ReportItem&&(i=this.validatePasteOperation(u,f),n&&n.length>0&&i)){for(ejDashboardDesigner.editManager.setMergeAction(!0),t=0;t<n.length;t++)r=$.extend(!0,{},n[t].item),this.pasteWidgetElement(r);ejDashboardDesigner.editManager.setMergeAction(!1)}}},InternalDesignPanel.prototype.validatePasteOperation=function(n,t){for(var r,u=this.designCanvas.find(".e-reportitem"),i=0;i<u.length;i++)if(r=ej.DashboardUtil.getWidgetInstance($(u[i])),r.cellInfo.row===n&&r.cellInfo.column===t)return!1;return!0},InternalDesignPanel.prototype.validateCellInfo=function(n,t){for(var i,u=this.designCanvas.find(".e-reportitem"),r=0;r<u.length;r++)if(i=ej.DashboardUtil.getWidgetInstance($(u[r])),n>=i.cellInfo.row&&n<i.cellInfo.rowSpan+i.cellInfo.row&&t>=i.cellInfo.column&&t<i.cellInfo.colSpan+i.cellInfo.column)return!1;return!0},InternalDesignPanel.prototype.getCalculatedInfo=function(n){for(var o,f,u,i,r=1,e=1,t=0;t<n.colSpan;t++)i=this.getCellItem(n.row,n.column+t),!ej.isNullOrUndefined(i)&&i.length>0&&this.validateCellInfo(n.row,n.column+t)&&(o=Number(i.attr("column"))-Number(n.column)+1,o>r&&(r=t+1));for(t=0;t<n.rowSpan;t++){for(f=!1,u=0;u<r;u++)if(i=this.getCellItem(n.row+t,n.column),!ej.isNullOrUndefined(i)&&i.length>0&&!this.validateCellInfo(n.row+t,n.column+u)){f=!0;break}if(f)break;else n.row+t<this.rowsLength&&(e=t+1)}return n.rowSpan=e,n.colSpan=r,n},InternalDesignPanel.prototype.pasteWidgetElement=function(n){var t,i,r;this.isPasteAction=!0;t={row:Number(this.placingItem.attr("row")),column:Number(this.placingItem.attr("column")),rowSpan:n.ContainerSettings.Bounds.RowSpan,colSpan:n.ContainerSettings.Bounds.ColumnSpan};i=this.getCalculatedInfo(t);n.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(i);n.UniqueId=null;r=this.renderReportItem(n);this.performItemSelection(r);this.updateFilterConfiguration(n);ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemAdd,"renderReportItem","DesignPanel",this.designer._id+"_"+n.UniqueName,null,[n]);this.placingItem.css("display","none");this.isPasteAction=!1;ej.DashboardDesignerUtility.Serialization.notifyChange()},InternalDesignPanel.prototype.updateFilterConfiguration=function(n){n.FilterSettings.ActAsMasterWidget&&this.filterObject.ActAsMasterPropertyChangeInFilterConfigInfo(!0);n.FilterSettings.IgnoreFilterActions||this.filterObject.IgnoreFilterActionPropertyChange(!1)},InternalDesignPanel.prototype.renderReport=function(n){var t,i;if(this.rdlParser=n,n.rdlJsonObj&&n.rdlJsonObj.WidgetData)for(t=0;t<this.rdlParser.rdlJsonObj.WidgetData.length;t++)try{i=this.rdlParser.rdlJsonObj.WidgetData[t];this.renderReportItem(i)}catch(r){this.logError({Source:"Deserialization",Error:r,Type:r.name})}},InternalDesignPanel.prototype.updateReportDef=function(){},InternalDesignPanel.prototype.getReportItems=function(n){var t=[];return n.length>0&&(t=[]),t},InternalDesignPanel.prototype.getCultureScriptFile=function(culture){var dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");$.ajax({url:dashboardDesigner.model.serviceUrl+"/GetCultureScript?culture="+culture,dataType:"html",contentType:"application/javascript",crossDomain:!0,cache:!0,error:function(){},beforeSend:function(n){ej.isNullOrUndefined(ej.DashboardUtil.clientId)||ej.DashboardUtil.clientId===""||n.setRequestHeader("ClientID",ej.DashboardUtil.clientId);ej.isNullOrUndefined(dashboardDesigner.model.serviceAuthorizationToken)||n.setRequestHeader("Authorization",dashboardDesigner.model.serviceAuthorizationToken)},success:function(args){eval(args)}})},InternalDesignPanel.prototype.renderReportItem=function(n){for(var g,it,o,s,h,c,l,a,v,y,p,w,f,e,k,d,t,rt,ut,r=null,nt=!1,tt=this.getCellItem(n.ContainerSettings.Bounds.Row,n.ContainerSettings.Bounds.Column).position(),u={left:tt.left+this.cellMargin,top:tt.top+this.cellMargin,width:n.ContainerSettings.Bounds.ColumnSpan*this.cellSize+(n.ContainerSettings.Bounds.ColumnSpan-1)*this.cellMargin*2,height:n.ContainerSettings.Bounds.RowSpan*this.cellSize+(n.ContainerSettings.Bounds.RowSpan-1)*this.cellMargin*2},i=this.getWidgetItemType(n),b=0;b<n.Data.Containers.length;b++){for(g=0;g<n.Data.Containers[b].FieldInfos.length;g++)n.Data.Containers[b].FieldInfos[g].MeasureFormatting!==null&&(it=ej.globalize.findCulture(n.Data.Containers[b].FieldInfos[g].MeasureFormatting.Culture),it.name!==n.Data.Containers[b].FieldInfos[g].MeasureFormatting.Culture&&this.getCultureScriptFile(n.Data.Containers[b].FieldInfos[g].MeasureFormatting.Culture));n.Data.Containers[b]}switch(n.__type){case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.CardProperties":o=new ej.DashboardDesignerUtility.CardItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),o.reportName=n.UniqueName=t.Id,n.TitleSettings.Text=n.ContainerSettings.Title=t.Name):o.reportName=n.UniqueName;o.itemName="Card";o.setJson(n);this.containerCreation(o,i,u);o.renderCardReportElement(n);this.updateDataGroupInfo(o,n.Data);r=o.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.GridProperties":s=new ej.DashboardDesignerUtility.GridItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),s.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):s.reportName=n.UniqueName;s.itemName="Grid";s.setJson(n);this.containerCreation(s,i,u);s.renderGridReportElement(n);this.updateDataGroupInfo(s,n.Data);r=s.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboBoxProperties":h=new ej.DashboardDesignerUtility.ComboBoxItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),h.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):h.reportName=n.UniqueName;h.itemName="ComboBox";h.setJson(n);this.containerCreation(h,i,u);h.renderComboBoxReportElement(n);this.updateDataGroupInfo(h,n.Data);r=h.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.GaugeProperties":c=new ej.DashboardDesignerUtility.RadialGaugeItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),c.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):c.reportName=n.UniqueName;c.itemName="RadialGauge";c.setJson(n);this.containerCreation(c,i,u);c.renderRadialGaugeReportElement(n);this.updateDataGroupInfo(c,n.Data);r=c.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties":l=new ej.DashboardDesignerUtility.ChartItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),l.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):l.reportName=n.UniqueName;l.itemName=n.ChartType;l.setJson(n);this.containerCreation(l,i,u);l.renderChartReportElement(n);this.updateDataGroupInfo(l,n.Data);r=l.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.DatePickerProperties":a=new ej.DashboardDesignerUtility.DatePickerItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),a.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):a.reportName=n.UniqueName;a.itemName="DatePicker";a.setJson(n);this.containerCreation(a,i,u);a.renderDatePickerReportElement(n);this.updateDataGroupInfo(a,n.Data);r=a.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ListBoxProperties":v=new ej.DashboardDesignerUtility.ListBoxItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),v.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):v.reportName=n.UniqueName;v.itemName="ListBox";v.setJson(n);this.containerCreation(v,i,u);v.renderListBoxReportElement(n);this.updateDataGroupInfo(v,n.Data);r=v.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeSliderProperties":y=new ej.DashboardDesignerUtility.RangeSliderItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),y.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):y.reportName=n.UniqueName;y.itemName="RangeSlider";y.setJson(n);this.containerCreation(y,i,u);y.renderRangeSliderReportElement(n);this.updateDataGroupInfo(y,n.Data);r=y.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.TreeMapProperties":p=new ej.DashboardDesignerUtility.TreeMapItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),p.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):p.reportName=n.UniqueName;p.itemName="TreeMap";p.setJson(n);this.containerCreation(p,i,u);p.renderTreeMapReportElement(n);this.updateDataGroupInfo(p,n.Data);r=p.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMapProperties":w=new ej.DashboardDesignerUtility.HeatMapItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),w.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):w.reportName=n.UniqueName;w.itemName="HeatMap";w.setJson(n);this.containerCreation(w,i,u);w.renderHeatMapReportElement(n);this.updateDataGroupInfo(w,n.Data);r=w.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleMapProperties":f=new ej.DashboardDesignerUtility.BubbleMapItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),f.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):f.reportName=n.UniqueName;f.itemName="BubbleMap";f.setJson(n);this.containerCreation(f,i,u);f.cellInfo=this.updateCellInfo(n);this.updateDataGroupInfo(f,n.Data);this.setTimerToDwnldMapFile(n,f,"BubbleMap");r=f.getReportItem();nt=!0;break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChoroplethMapProperties":e=new ej.DashboardDesignerUtility.ChoroplethMapItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.ContainerSettings.Title),e.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):e.reportName=n.UniqueName;e.itemName="ChoroplethMap";e.setJson(n);this.containerCreation(e,i,u);e.cellInfo=this.updateCellInfo(n);this.updateDataGroupInfo(e,n.Data);this.setTimerToDwnldMapFile(n,e,"ChoroplethMap");r=e.getReportItem();nt=!0;break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.LabelProperties":k=new ej.DashboardDesignerUtility.LabelItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.UniqueName),k.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):k.reportName=n.UniqueName;k.setJson(n);this.containerCreation(k,i,u);k.renderLabelReportElement(n);this.updateDataGroupInfo(k,n.Data);r=k.getReportItem();break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ImageProperties":d=new ej.DashboardDesignerUtility.ImageItem;this.isPasteAction?(t=ejDashboardDesigner.getAvailableName(i,n.UniqueName),d.reportName=n.UniqueName=t.Id,n.ContainerSettings.Title=t.Name):d.reportName=n.UniqueName;d.setJson(n);this.containerCreation(d,i,u);d.renderImageReportElement(n);this.updateDataGroupInfo(d,n.Data);r=d.getReportItem()}return rt=ej.DashboardUtil.getWidgetInstance(r),ut=this.isDataConfigurated(rt),ut&&!nt&&this.dataConfigurationInstance.postDraggedFields(r,!0),ejDashboardDesigner.editManager.isPerformAction&&this.updateFilterConfiguration(n),r},InternalDesignPanel.prototype.isDataConfigurated=function(n){for(var u,i,r=!1,t=0;t<n.dataGroupInfo.Values.length;t++){for(u=n.dataGroupInfo.Values[t],i=0;i<u.Values.length;i++){r=!0;break}if(r)return!0}return!1},InternalDesignPanel.prototype.updateCellInfo=function(n){return{row:n.ContainerSettings.Bounds.Row,column:n.ContainerSettings.Bounds.Column,rowSpan:n.ContainerSettings.Bounds.RowSpan,colSpan:n.ContainerSettings.Bounds.ColumnSpan}},InternalDesignPanel.prototype.setTimerToDwnldMapFile=function(n,t,i){ej.isNullOrUndefined(window[n.ShapeData])?(this.mapFileTimerCount=0,this.showLoadingIndicator(t.controlContainer),this.mapFileDwnldTimer=this.addingTimerForMapFile(t,n,i)):this.openMap(n,t,i)},InternalDesignPanel.prototype.addingTimerForMapFile=function(n,t,i){var r=this;this.mapFileDwnldTimer=setTimeout(function(n,t,i){r.mapFileTimerCount<6&&(ej.isNullOrUndefined(window[t.ShapeData])||(r.hideLoadingIndicator(n.controlContainer),r.openMap(t,n,i),r.clearTimer(r.mapFileDwnldTimer)),r.mapFileTimerCount++,r.mapFileTimerCount<6?r.mapFileDwnldTimer=r.addingTimerForMapFile(n,t,i):r.mapFileTimerCount>=6&&(ej.isNullOrUndefined(window[t.ShapeData])&&(r.hideLoadingIndicator(n.controlContainer),r.showMapFileErr(n,t,i)),r.clearTimer(r.mapFileDwnldTimer)))},1e4,n,t,i)},InternalDesignPanel.prototype.openMap=function(n,t){t.renderMapReportElement(n);var i=t.getReportItem();this.dataConfigurationInstance.postDraggedFields(i)},InternalDesignPanel.prototype.clearTimer=function(n){this.mapFileTimerCount=0;clearTimeout(n);n=null},InternalDesignPanel.prototype.showMapFileErr=function(n,t,i){var r=ej.buildTag("div.e-map-file-err","",{position:"relative","text-align":"center","vertical-align":"middle","z-index":"998",overflow:"hidden",color:"rgb(104, 98, 98)","font-size":"13px"},{id:this.designId+"mapFileError"+t.UniqueName}).text(this.dashboardDesigner.locale.errorMessage.mapFileDownloadingError);n.controlContainer.data(i,n);n.contentContainer.append(r);r.css({top:n.contentContainer.height()/2-r.height()+"px"});ej.DashboardDesignerUtility.Serialization.updateWidgetData(t,n.dataGroupInfo)},InternalDesignPanel.prototype.getWidgetItemType=function(n){var t="";switch(n.__type){case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.CardProperties":t="e-card-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.GridProperties":t="e-grid-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboBoxProperties":t="e-combobox-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.GaugeProperties":t="e-radialgauge-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties":t="e-chart-bar";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.DatePickerProperties":t="e-datepicker-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ListBoxProperties":t="e-listbox-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeSliderProperties":t="e-rangeslider-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.TreeMapProperties":t="e-treemap-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleMapProperties":t="e-bubblemap-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChoroplethMapProperties":t="e-choroplethmap-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.LabelProperties":t="e-label-item";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.ImageProperties":t="e-image";break;case"Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMapProperties":t="e-heatmap-item"}return t},InternalDesignPanel.prototype.updateDataGroupInfo=function(n,t){var f=this.getDataSet(t.Id),r,u,i;if(f!==null)for(n.dataGroupInfo.DatasetId=t.Id,n.dataGroupInfo.DatasetName=t.DataSetName,r=0;r<t.Containers.length;r++)u=t.Containers[r],i=this.dataConfigurationInstance.createValueInfo(),i.Name=i.DisplayName=u.Id,i.CategoryType=u.ContainerType,i.Values=this.createFieldInfos(u.FieldInfos,f,i.CategoryType,null),n.dataGroupInfo.Values.push(i)},InternalDesignPanel.prototype.createFieldInfos=function(n,t,i,r,u){for(var e,f,o,l,a,v,c=[],s=!1,h=0;h<n.length;h++)e=n[h],f=this.dataConfigurationInstance.createDataValueInfo(),e.IsKPIColumn?(f.Name=t.Id,f.Field=f.DataField=e.KPIColumnInfo.DisplayColumnName,f.IsExpression=e.IsExpression,f.IsAggregatedExpression=e.IsAggregatedExpression,f.Sorting=ej.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,e.Sorting),f.DateTimeFormat=isNaN(e.DateTimeFormat)?e.DateTimeFormat:ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,e.DateTimeFormat),f.FieldActualType="e-reportdesigner-dataset-number",f.FieldType=ej.DashboardDesignerUtility.Serialization.enumToString(FieldType,e.FieldType),f.MeasureFormatting=this.applyMeasureFormatting(e),f.CustomSorting=ej.isNullOrUndefined(e.CustomSorting)?null:e.CustomSorting,f.SummaryType=e.SummaryType,f.FilterInfo=this.getFilterInfo(e.FilterInfo,t.Id),f.Value=f.SummaryType.toLowerCase()!==SummaryType.NONE.toString().toLowerCase()&&f.SummaryType.toString()!=="CUSTOM"?f.SummaryType+"("+f.Field+")":f.SummaryType.toString()==="CUSTOM"?"Sum("+f.Field+")":f.Field,f.IsKPIColumn=e.IsKPIColumn,f.KPIColumnInfo=e.KPIColumnInfo,f.UniqueColumnName=e.UniqueColumnName,c.push(f)):(o=this.getFieldFromDataSet(e,t),l=void 0,o!==null&&(f.Name=t.Id,f.Field=o.Name,f.DataField=o.DataField,f.DataId=o.Id,f.Sorting=u?e.Sorting:ej.DashboardDesignerUtility.Serialization.enumToString(SortingOrder,e.Sorting),f.Label="LabelData"+h,f.IsExpression=e.IsExpression,f.IsAggregatedExpression=e.IsAggregatedExpression,f.FieldActualType=ej.DashboardUtil.getDatasetTypeIcon(o.TypeName),ej.isNullOrUndefined(e.FieldActualType)||(s=f.FieldActualType!==e.FieldActualType?!0:!1),f.FieldType=u?e.FieldType:ej.DashboardDesignerUtility.Serialization.enumToString(FieldType,e.FieldType),s&&(f.FieldType=f.FieldActualType==="e-reportdesigner-dataset-boolean"||f.FieldActualType==="e-reportdesigner-dataset-string"||f.FieldActualType==="e-reportdesigner-dataset-datetime"||f.FieldActualType==="e-reportdesigner-dataset-time"?FieldType[FieldType.Dimensions]:FieldType[FieldType.Measures],e.DateTimeFormat=f.FieldActualType==="e-reportdesigner-dataset-datetime"?i===CategoryType.Numeric?DateTimeFormat.None:f.FieldActualType==="e-reportdesigner-dataset-time"?DateTimeFormat.Default:DateTimeFormat.Year:DateTimeFormat.None,a=f.FieldType==="Dimensions"?f.FieldActualType==="e-reportdesigner-dataset-boolean"||f.FieldActualType==="e-reportdesigner-dataset-string"||f.FieldActualType==="e-reportdesigner-dataset-datetime"||f.FieldActualType==="e-reportdesigner-dataset-time"?i===CategoryType.None||i===CategoryType.Non_Numeric?SummaryType[SummaryType.NONE]:SummaryType[SummaryType.COUNT]:SummaryType[SummaryType.NONE]:i===CategoryType.Non_Numeric?SummaryType[SummaryType.NONE]:SummaryType[SummaryType.SUM],e.SummaryType=a.toString(),f.FieldType==="Dimensions"&&i===CategoryType.Numeric?f.FieldType=FieldType[FieldType.Measures]:f.FieldType==="Measures"&&i===CategoryType.Non_Numeric&&(f.FieldType=FieldType[FieldType.Dimensions]),e.FilterInfo=null),f.DateTimeFormat=isNaN(e.DateTimeFormat)?e.DateTimeFormat:ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,e.DateTimeFormat),f.TableId=o.TableId,f.TableName=o.TableName,f.MeasureFormatting=e.MeasureFormatting==null||s?s&&f.FieldType==="Measures"&&(f.FieldActualType!=="e-reportdesigner-dataset-datetime"||f.FieldActualType!=="e-reportdesigner-dataset-time"||f.FieldActualType!=="e-reportdesigner-dataset-string")?this.defaultFormatting(e.SummaryType.toString(),r):null:l=u?e.MeasureFormatting:this.applyMeasureFormatting(e),v=!ej.isNullOrUndefined(e.CustomSorting)&&this.getSortInfo(e.CustomSorting,t.Id),f.CustomSorting=ej.isNullOrUndefined(e.CustomSorting)?null:ej.isNullOrUndefined(e.CustomSorting)||v?e.CustomSorting:e.CustomSorting=null,f.SummaryType=e.SummaryType,f.FilterInfo=ej.isNullOrUndefined(e.FilterInfo)?null:this.getFilterInfo(e.FilterInfo,t.Id),f.Value=f.SummaryType.toLowerCase()!==SummaryType.NONE.toString().toLowerCase()&&f.SummaryType.toString()!=="CUSTOM"?f.SummaryType+"("+f.Field+")":f.SummaryType.toString()==="CUSTOM"?"Sum("+f.Field+")":f.Field,f.UniqueColumnName=e.UniqueColumnName,c.push(f)));return c},InternalDesignPanel.prototype.applyMeasureFormatting=function(n){var t=null;return ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.MeasureFormatting)||(t={Culture:n.MeasureFormatting.Culture,DecimalPoints:n.MeasureFormatting.DecimalPoints,FormatType:isNaN(parseInt(n.MeasureFormatting.FormatType,10))?n.MeasureFormatting.FormatType:ej.DashboardDesignerUtility.Serialization.getDataValueFormat(n.MeasureFormatting.FormatType),Prefix:n.MeasureFormatting.Prefix,Suffix:n.MeasureFormatting.Suffix,Unit:isNaN(parseInt(n.MeasureFormatting.Unit,10))?n.MeasureFormatting.Unit:ej.DashboardDesignerUtility.Serialization.getNumberFormat(n.MeasureFormatting.Unit)}),t},InternalDesignPanel.prototype.defaultFormatting=function(n,t){var i=null;return(n===SummaryType[SummaryType.COUNT]||n===SummaryType[SummaryType.SUM]||ej.isNullOrUndefined(t)&&t==="RangeSlider")&&(i={Culture:"en-US",DecimalPoints:2,FormatType:"Number",Prefix:"",Suffix:"",Unit:ej.isNullOrUndefined(t)?"Auto":t==="Grid"||t==="Card"?"Ones":"Auto"}),i},InternalDesignPanel.prototype.getFilterInfo=function(n,t){var i;return ej.isNullOrUndefined(n)||(n.__type&&delete n.__type,n.DimensionFilterInfo&&(n.DimensionFilterInfo.__type&&delete n.DimensionFilterInfo.__type,ej.isNullOrUndefined(n.DimensionFilterInfo.ConditionFilterInfo)||(i=this.getExpressionInfo(n.DimensionFilterInfo.ConditionFilterInfo,t),i||(n.DimensionFilterInfo.ConditionFilterInfo=null,n.DimensionFilterInfo.IsConditionFilteringApplied=!1)),ej.isNullOrUndefined(n.DimensionFilterInfo.TopNFilterInfo)||(i=this.getExpressionInfo(n.DimensionFilterInfo.TopNFilterInfo,t),i||(n.DimensionFilterInfo.TopNFilterInfo=null,n.DimensionFilterInfo.IsTopNFilteringApplied=!1)),n.DimensionFilterInfo.ConditionFilterInfo&&n.DimensionFilterInfo.ConditionFilterInfo.__type&&delete n.DimensionFilterInfo.ConditionFilterInfo.__type,n.DimensionFilterInfo.TopNFilterInfo&&n.DimensionFilterInfo.TopNFilterInfo.__type&&delete n.DimensionFilterInfo.TopNFilterInfo.__type,n.DimensionFilterInfo.AllowFilterInfo&&n.DimensionFilterInfo.AllowFilterInfo.__type&&delete n.DimensionFilterInfo.AllowFilterInfo.__type,n.DimensionFilterInfo.ConditionFilterInfo===null&&n.DimensionFilterInfo.TopNFilterInfo===null&&n.DimensionFilterInfo.AllowFilterInfo===null&&(n.DimensionFilterInfo=null)),n.MeasureFilterInfo&&n.MeasureFilterInfo.__type&&delete n.MeasureFilterInfo.__type,n.RelativeDateFilterInfo&&n.RelativeDateFilterInfo.__type&&delete n.RelativeDateFilterInfo.__type),n},InternalDesignPanel.prototype.getExpressionInfo=function(n,t){for(var r=this.getDataSet(t),i=0;i<r.Fields.length;i++)if(r.Fields[i].Id===n.ColumnId)return!0;return!1},InternalDesignPanel.prototype.getSortInfo=function(n,t){var r=this.getDataSet(t),i;if(!ej.isNullOrUndefined(n.CustomSortType)&&n.CustomSortType==="Field")for(i=0;i<r.Fields.length;i++)if(r.Fields[i].Id===n.FieldId)return!0;return!ej.isNullOrUndefined(n.CustomSortType)&&n.CustomSortType==="Alphabetic"||n.CustomSortType==="DataSource"},InternalDesignPanel.prototype.getDataSet=function(n){for(var i,r=ejDashboardDesigner.getInstance("DataSet").datasets,t=0;t<r.length;t++)if(i=r[t],i.Id===n)return i;return null},InternalDesignPanel.prototype.fieldFromDataSet=function(n,t){if(t!==null)for(var i=0;i<t.Fields.length;i++)if(t.Fields[i].Name===n)return t.Fields[i];return null},InternalDesignPanel.prototype.getFieldFromDataSet=function(n,t){var i,r;if(t!==null)for(i=0;i<t.Fields.length;i++)if(r=ej.isNullOrUndefined(n.Id)?n.DataId:n.Id,t.Fields[i].Id===r)return t.Fields[i];return null},InternalDesignPanel.prototype.invokePropertyPanel=function(){var n=this;this.propertyTimeOut&&clearTimeout(this.propertyTimeOut);this.propertyTimeOut=setTimeout(function(){n.setPropertyPanelItem()},500)},InternalDesignPanel.prototype.setPropertyPanelItem=function(){this.selectedReportItems.length>1?this.propertyPanel.showProperty(!1):this.selectedReportItems.length>0?this.propertyPanel.isVisible()?this.propertyPanel.setPropertyElement(this.selectedReportItems):this.propertyPanel.targetItems=this.selectedReportItems:this.selectedItems.length>0&&this.updateReportProperties()},InternalDesignPanel.prototype.showLoadingIndicator=function(n){var t=n||ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0];t.find(".ej-background-waiting-popup").show()},InternalDesignPanel.prototype.hideLoadingIndicator=function(n){var t=n||ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0];t.find(".ej-background-waiting-popup").hide()},InternalDesignPanel.prototype.updateReportProperties=function(){var t,n;(ej.isNullOrUndefined(this.selectedReportItems)||this.selectedReportItems.length<1)&&(t=this.getDesignProperty("Dashboard"),this.selectedItems=[this.designPanel],n=ejDashboardDesigner.getInstance("DataConfigurationPanel").selectedItem,ej.isNullOrUndefined(n)||n.GroupName!=="Properties"||this.propertyPanel.isVisible()&&(this.propertyPanel.targetDesignArea="Dashboard",this.propertyPanel.showDesignAreaProperty(t,"Dashboard")))},InternalDesignPanel.prototype.updateRptToolbarActions=function(){var n=this.selectedReportItems&&this.selectedReportItems.length>0;this.dashboardDesigner.rptToolbar.showPaste(this.canPaste());this.dashboardDesigner.rptToolbar.showCopy(n);this.dashboardDesigner.rptToolbar.showCut(n);this.dashboardDesigner.rptToolbar.showDelete(n)},InternalDesignPanel.prototype.updateSelectedItems=function(){this.selectedReportItems=[]},InternalDesignPanel.prototype.getControlHeader=function(n,t){var i,f,r,u,o,e;t.controlHeader=ej.buildTag("div.e-dbrd-control-header","",{"data-widget-id":n.controlId});t.controlContainer.prepend(t.controlHeader);i=this.getControlHeaderIcons(n);t.controlHeader.append(i);f=10;i.css("display")==="block"&&(f=i.outerWidth(!0)+10);r=ej.buildTag("div.e-dbrd-control-title-wrapper","",{width:"calc(100% - "+f+"px)"});t.controlHeader.prepend(r);u=this.getControlDescriptionIcon(t.getJson());r.append(u);o=u.css("display")==="block"?u.width():0;e=ej.buildTag("div.e-dbrd-control-title","",{"max-width":"calc(100% - "+o+"px)"},{title:n.controlTitle});e.append(n.controlTitle);r.prepend(e)},InternalDesignPanel.prototype.getControlHeaderIcons=function(n){var t=ej.buildTag("div.e-dbrd-controlIcon-container"),u=ej.buildTag("div.e-dbrd-control-maximize-icon"),i,r;return t.append(u),i=ej.buildTag("div.e-dbrd-control-menu-icon"),t.append(i),r=ej.buildTag("div.e-remove-control-filter e-remove-control-filter-disable"),t.append(r),n.isMaximizeEnable||u.css("display","none"),n.isControlMenuVisible||i.css("display","none"),n.isFilterIconEnable||r.css("display","none"),n.isMaximizeEnable||n.isControlMenuVisible||n.isFilterIconEnable?t.css("display","block"):t.css("display","none"),t},InternalDesignPanel.prototype.getControlSubHeader=function(n){var t=n.getJson().ContainerSettings.SubTitle,i;n.controlSubHeader=ej.buildTag("div.e-dbrd-control-sub-header","",{display:!ej.isNullOrUndefined(t)&&t.trim().length>0?"block":"none"});i=ej.buildTag("div.e-dbrd-control-sub-title",t,{width:"calc(100% - 10px)"},{title:t});n.controlSubHeader.prepend(i);$(n.controlContainer).find(".e-dbrd-control-header").after(n.controlSubHeader)},InternalDesignPanel.prototype.getControlDescriptionIcon=function(n){var t=ej.buildTag("div .e-dbrd-control-description"),i=n.ContainerSettings.Description;return!ej.isNullOrUndefined(i)&&i.length>0?(t.css("display","block"),t.attr("title",i)):(t.css("display","none"),t.attr("title","")),t},InternalDesignPanel.prototype.getDesignProperty=function(){var n=null;return this.assigndashboardNameAndDescription(),n="Dashboard",{Header:ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name,Type:n,SubTitle:ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.SubTitle,Description:ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description,Comment:{name:"EnableComment",displayName:"Enable Comment",value:ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.EnableComments,itemType:"bool"}}},InternalDesignPanel.prototype.assigndashboardNameAndDescription=function(){this.dashboardDesigner.reportFileName=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name=!ej.isNullOrUndefined(this.dashboardDesigner.model.dashboardName)&&this.dashboardDesigner.model.dashboardName!==""?this.dashboardDesigner.model.dashboardName:ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name;this.dashboardDesigner.dashboardDescription=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description=ej.isNullOrUndefined(this.dashboardDesigner.model.dashboardDescription)?ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description:this.dashboardDesigner.model.dashboardDescription},InternalDesignPanel.prototype.updateTitleName=function(n){var t=ej.DashboardUtil.getWidgetInstance(this.selectedReportItems[0]).getReportItemJson();t.ContainerSettings.Title=n;this.propertyPanel.setTitle(t)},InternalDesignPanel.prototype.updatePropertyChange=function(n,t,i,r){switch(n){case"Name":var u=this.designer.nameValidation(r);u?ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name=this.dashboardDesigner.model.dashboardName=r:(this.setPropertyPanelItem(),ej.DashboardUtil.getInstance().alertDialog(this.designer.getInvalidNameAlertTitle("dashboardName",!0),this.designer.getInvalidNameAlertTitle("dashboardName",!1),IconType.errors,AlertType.Alert,!1,""));break;case"Description":ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description=this.dashboardDesigner.model.dashboardDescription=r;break;case"Comment":ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.EnableComments=r}},InternalDesignPanel.prototype.destroy=function(){!ej.isNullOrUndefined(this.designPanel)&&this.designPanel.length>0&&(ej.DashboardUtil.destroyEjObjects(this.designPanel),this.unWiredDesignerEvents(),this.designPanel.remove())},InternalDesignPanel}();window.ej.createObject("ej.DashboardDesignerUtility.DesignPanel",InternalDesignPanel,window);InternalDimensionFilter=function(){function n(){this.dashboardDesigner=null;this.id=null;this.targetItem=null;this.filterContainer=null;this.listContainer=null;this.conditionContainer=null;this.rankContainer=null;this.conditionCheckBox=null;this.conditionColumnDropDown=null;this.conditionSummaryDropDown=null;this.conditionTypeDropDown=null;this.leftTextBox=null;this.rightTextBox=null;this.labelDiv=null;this.rightTextBoxDiv=null;this.modifiedConditionalFilter=!1;this.isConditionFilteringApplied=!1;this.columnName=null;this.columnId=null;this.summaryType=null;this.conditionSummaryType=null;this.leftValue=0;this.rightValue=0;this.rankCheckBox=null;this.rankModeDropDown=null;this.rankCountUpDown=null;this.rankColumnDropDown=null;this.dateTimeCheckBox=null;this.rankFormatDropDown=null;this.modifiedTopNFilter=!1;this.isTopNFilteringApplied=!1;this.mode="Top";this.numberOfRecords=5;this.rankColumnName=null;this.rankColumnId=null;this.dataFieldItems=[];this.measuresList=[];this.dimensionsList=[];this.dateTimeFormats=[];this.timeFormats=[];this.dimensionFormats=[];this.measureFormats=[];this.conditionTypes=[];this.modeTypes=[];this.targetInstance=null;this.targetMethod="";this.dataSetName="";this.filterInfo=null;this.selectedColumnName=null;this.fieldDetails=null;this.ejFilterDialog=null;this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.dateRangePopup=ejDashboardDesigner.getInstance("DateRangePopup");this.multiSelectionComboBox=ejDashboardDesigner.getInstance("MultiSelectionComboBox");this.dateTimeFormats=this.getDateFormatsList();this.timeFormats=this.getTimeFormatsList();this.dimensionFormats=this.getSummaryTypeArrayforDimension();this.measureFormats=this.getmeasureFormatsList();this.conditionTypes=this.getconditionTypes();this.modeTypes=this.getRankModeList();this.renderDimensionFilterWindow()}return n.prototype.getDateFormatsList=function(){var n=[];return n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Date],text:DateTimeFormatForFilter.Date}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.DateTime],text:DateTimeFormatForFilter.DateTime}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Year],text:DateTimeFormatForFilter.Year}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Quarter],text:DateTimeFormatForFilter.Quarter}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Month],text:DateTimeFormatForFilter.Month}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.QuarterYear],text:DateTimeFormatForFilter.QuarterYear}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.MonthYear],text:DateTimeFormatForFilter.MonthYear}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.WeekYear],text:DateTimeFormatForFilter.WeekYear}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.DayOfWeek],text:DateTimeFormatForFilter.DayOfWeek}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.WeekOfYear],text:DateTimeFormatForFilter.WeekOfYear}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Day],text:DateTimeFormatForFilter.Day}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Hour],text:DateTimeFormatForFilter.Hour}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Minute],text:DateTimeFormatForFilter.Minute}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Second],text:DateTimeFormatForFilter.Second}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Time],text:DateTimeFormatForFilter.Time}),n},n.prototype.getTimeFormatsList=function(){var n=[];return n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Hour],text:DateTimeFormatForFilter.Hour}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Minute],text:DateTimeFormatForFilter.Minute}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Second],text:DateTimeFormatForFilter.Second}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Time],text:DateTimeFormatForFilter.Time}),n},n.prototype.getmeasureFormatsList=function(){var n=[];return n.push({value:SummaryType[SummaryType.SUM],text:SummaryType.SUM}),n.push({value:SummaryType[SummaryType.AVG],text:SummaryType.AVG}),n.push({value:SummaryType[SummaryType.COUNT],text:SummaryType.COUNT}),n.push({value:SummaryType[SummaryType.MAX],text:SummaryType.MAX}),n.push({value:SummaryType[SummaryType.MIN],text:SummaryType.MIN}),n.push({value:SummaryType[SummaryType.COUNTD],text:SummaryType.COUNTD}),n.push({value:SummaryType[SummaryType.VAR],text:SummaryType.VAR}),n},n.prototype.getconditionTypes=function(){var n=[];return n.push({value:NumberFilterOption[NumberFilterOption.Equals],text:NumberFilterOption.Equals}),n.push({value:NumberFilterOption[NumberFilterOption.NotEquals],text:NumberFilterOption.NotEquals}),n.push({value:NumberFilterOption[NumberFilterOption.GreaterThan],text:NumberFilterOption.GreaterThan}),n.push({value:NumberFilterOption[NumberFilterOption.GreaterThanOrEquals],text:NumberFilterOption.GreaterThanOrEquals}),n.push({value:NumberFilterOption[NumberFilterOption.LessThan],text:NumberFilterOption.LessThan}),n.push({value:NumberFilterOption[NumberFilterOption.LessThanOrEquals],text:NumberFilterOption.LessThanOrEquals}),n.push({value:NumberFilterOption[NumberFilterOption.IsBetween],text:NumberFilterOption.IsBetween}),n.push({value:NumberFilterOption[NumberFilterOption.IsNotBetween],text:NumberFilterOption.IsNotBetween}),n},n.prototype.getSummaryTypeArrayforDimension=function(){var t=[],i=new ValueAliasPair,n;return i.text=SummaryType.COUNT.toString(),i.value=SummaryType[SummaryType.COUNT],n=new ValueAliasPair,n.text=SummaryType.COUNTD.toString(),n.value=SummaryType[SummaryType.COUNTD],t.push(i),t.push(n),t},n.prototype.getRankModeList=function(){var t=[],i=new ValueAliasPair,n;return i.text=RankType.Top.toString(),i.value=RankType[RankType.Top],n=new ValueAliasPair,n.text=RankType.Bottom.toString(),n.value=RankType[RankType.Bottom],t.push(i),t.push(n),t},Object.defineProperty(n,"DimensionFilter",{get:function(){return(this.dimensionFilter===null||this.dimensionFilter===undefined)&&(this.dimensionFilter=new ej.DashboardDesignerUtility.DimensionFilter),this.dimensionFilter},enumerable:!0,configurable:!0}),n.prototype.renderDimensionFilterWindow=function(){this.filterContainer=ej.buildTag("div.e-userselect","",{width:"450px"},{id:this.id+"_dimension_filter"});this.renderListContainer();this.renderConditionContainer();this.renderRankContainer();this.filterContainer.ejDialog({width:"auto",height:"auto",minWidth:450,minHeight:200,maxWidth:450,title:"Filters",zIndex:1e4,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",enableModal:!0,beforeClose:$.proxy(this.closeDialog,this)});this.renderFooter();this.ejFilterDialog=this.filterContainer.data("ejDialog")},n.prototype.renderListContainer=function(){this.listContainer=ej.buildTag("div","",{width:"100%",height:"35px","border-bottom":"1px solid #dddddd",padding:"10px 0px"},{id:this.id+"_dimension_filter_list"});var n=ej.buildTag("table","",{width:"100%",height:"100%",padding:"0px 15px"},{}),t=ej.buildTag("tr","",{},{}),i=ej.buildTag("td","",{width:"40%"},{}),r=ej.buildTag("td","",{width:"60%"},{id:this.id+"_dimension_filter_list_dropDownCell"}),u=ej.buildTag("span","List",{});this.listContainer.append(n);n.append(t);t.append(i).append(r);i.append(u);this.filterContainer.append(this.listContainer);this.targetItem=ej.buildTag("div","",{width:"245px",height:"100%"},{});r.append(this.targetItem)},n.prototype.renderConditionContainer=function(){var n,t,p;this.conditionContainer=ej.buildTag("div","",{width:"100%",height:"155px",padding:"10px 0px"},{id:this.id+"_dimension_filter_condition"});n=ej.buildTag("table","",{width:"100%",padding:"0px 15px"},{});t=ej.buildTag("table","",{width:"100%",padding:"0px 15px"},{});this.conditionContainer.append(n).append(t);var i=ej.buildTag("tr","",{},{}),r=ej.buildTag("tr","",{},{}),u=ej.buildTag("tr","",{},{}),f=ej.buildTag("td","",{padding:"5px 0px"},{});this.conditionCheckBox=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_dimension_filter_condition_checkBox"});var w=ej.buildTag("label","Condition",{"margin-left":"10px"},{"for":this.id+"_dimension_filter_condition_checkBox"}),e=ej.buildTag("td","",{width:"40%",padding:"5px 0px"},{}),o=ej.buildTag("td","",{width:"60%",padding:"5px 0px"},{}),b=ej.buildTag("span","Column",{});this.conditionColumnDropDown=ej.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_dimension_filter_condition_columndropDown"});var s=ej.buildTag("td","",{width:"40%",padding:"5px 0px"},{}),h=ej.buildTag("td","",{width:"60%",padding:"5px 0px"},{}),k=ej.buildTag("span","Summary",{});this.conditionSummaryDropDown=ej.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_dimension_filter_condition_summarydropDown"});n.append(i).append(r).append(u);i.append(f);f.append(this.conditionCheckBox).append(w);r.append(e).append(o);e.append(b);o.append(this.conditionColumnDropDown);u.append(s).append(h);s.append(k);h.append(this.conditionSummaryDropDown);var c=ej.buildTag("tr","",{},{}),l=ej.buildTag("td","",{width:"40%",padding:"5px 0px"},{colspan:"3"}),a=ej.buildTag("td","",{width:"25%",padding:"5px 0px"},{colspan:"1"}),v=ej.buildTag("td","",{width:"10%",padding:"5px 0px"},{colspan:"1"}),y=ej.buildTag("td","",{width:"25%",padding:"5px 0px"},{colspan:"1"});this.conditionTypeDropDown=ej.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_dimension_filter_conditionType_dropDown"});this.leftTextBox=ej.buildTag("input","",{width:"100%"},{type:"text"});this.labelDiv=ej.buildTag("div","",{width:"100%",padding:"0px 5px",display:"none"});p=ej.buildTag("editLabel","and",{width:"100%"},{type:"label"});this.rightTextBoxDiv=ej.buildTag("div","",{width:"100%",display:"none"});this.rightTextBox=ej.buildTag("input","",{width:"100%"},{type:"text"});t.append(c);c.append(l).append(a).append(v).append(y);l.append(this.conditionTypeDropDown);a.append(this.leftTextBox);this.labelDiv.append(p);v.append(this.labelDiv);this.rightTextBoxDiv.append(this.rightTextBox);y.append(this.rightTextBoxDiv);this.filterContainer.append(this.conditionContainer);this.conditionCheckBox.ejCheckBox({width:"100%",change:$.proxy(this.updateConditionCheck,this)});this.conditionColumnDropDown.ejDropDownList({width:"100%",fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateConditionColumn,this)});this.conditionSummaryDropDown.ejDropDownList({width:"100%",fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateConditionSummary,this)});this.conditionTypeDropDown.ejDropDownList({width:"85%",dataSource:this.conditionTypes,fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,selectedIndex:0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateConditionValue,this)});this.conditionSummaryType=this.conditionTypes[0].value;this.leftTextBox.ejNumericTextbox({showSpinButton:!1,decimalPlaces:2,value:0,showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",change:$.proxy(this.updateLeftTextBoxValue,this)});this.rightTextBox.ejNumericTextbox({showSpinButton:!1,decimalPlaces:2,value:0,showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",change:$.proxy(this.updateRightTextBoxValue,this)})},n.prototype.renderRankContainer=function(){var n,p,t;this.rankContainer=ej.buildTag("div","",{width:"100%",height:"225px",padding:"10px 0px"},{id:this.id+"_dimension_filter_rank"});n=ej.buildTag("table","",{width:"100%",padding:"0px 15px"},{});this.rankContainer.append(n);var i=ej.buildTag("tr","",{},{}),r=ej.buildTag("tr","",{},{}),u=ej.buildTag("tr","",{},{}),f=ej.buildTag("tr","",{},{}),e=ej.buildTag("tr","",{},{id:this.id+"_dimension_filter_rank_date_time_row"}),o=ej.buildTag("tr","",{},{id:this.id+"_dimension_filter_rank_summary_row"}),s=ej.buildTag("td","",{padding:"5px 0px"},{});this.rankCheckBox=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_dimension_filter_rank_checkBox"});var k=ej.buildTag("label","Rank",{"margin-left":"10px"},{"for":this.id+"_dimension_filter_rank_checkBox"}),h=ej.buildTag("td","",{width:"40%",padding:"5px 0px"},{}),c=ej.buildTag("td","",{width:"60%",padding:"5px 0px"},{}),d=ej.buildTag("span","Mode",{});this.rankModeDropDown=ej.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_dimension_filter_rankMode_dropDown"});var l=ej.buildTag("td","",{width:"40%",padding:"5px 0px"},{}),a=ej.buildTag("td","",{width:"60%",padding:"5px 0px"},{}),g=ej.buildTag("span","Count",{});this.rankCountUpDown=ej.buildTag("input","",{},{type:"text"});var v=ej.buildTag("td","",{width:"40%",padding:"5px 0px"},{}),y=ej.buildTag("td","",{width:"60%",padding:"5px 0px"},{}),nt=ej.buildTag("span","Column",{});this.rankColumnDropDown=ej.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_dimension_filter_rankColumn_dropDown"});p=ej.buildTag("td","",{width:"40%",padding:"5px 0px"},{});t=ej.buildTag("td","",{width:"60%",padding:"5px 0px"},{});this.dateTimeCheckBox=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_dimension_filter_rank_datetime_checkBox"});var tt=ej.buildTag("label","Based On Date and Time",{"margin-left":"10px"},{"for":this.id+"_dimension_filter_rank_datetime_checkBox"}),w=ej.buildTag("td","",{width:"40%",padding:"5px 0px"},{}),b=ej.buildTag("td","",{width:"60%",padding:"5px 0px"},{}),it=ej.buildTag("span.e-summary_text","Summary",{});this.rankFormatDropDown=ej.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_dimension_filter_rankFormat_dropDown"});n.append(i).append(r).append(u).append(f).append(e).append(o);i.append(s);s.append(this.rankCheckBox).append(k);r.append(h).append(c);h.append(d);c.append(this.rankModeDropDown);u.append(l).append(a);l.append(g);a.append(this.rankCountUpDown);f.append(v).append(y);v.append(nt);y.append(this.rankColumnDropDown);e.append(p).append(t);t.append(this.dateTimeCheckBox).append(tt);o.append(w).append(b);w.append(it);b.append(this.rankFormatDropDown);this.filterContainer.append(this.rankContainer);this.rankCheckBox.ejCheckBox({width:"100%",change:$.proxy(this.updateRankCheck,this)});this.rankModeDropDown.ejDropDownList({width:"100%",dataSource:this.modeTypes,fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateRankMode,this)});this.rankCountUpDown.ejNumericTextbox({value:5,minValue:1,maxValue:1e10,showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",width:"80px",change:$.proxy(this.updateRankCount,this)});this.rankColumnDropDown.ejDropDownList({width:"100%",fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateRankColumn,this)});this.dateTimeCheckBox.ejCheckBox({width:"100%",change:$.proxy(this.updateDateTimeValidation,this)});this.rankFormatDropDown.ejDropDownList({width:"100%",fields:{text:"text"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"})},n.prototype.renderFooter=function(){var n=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_dimension_filter_ok_btn"}),t=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_dimension_filter_cancel_btn"}),i=this.dashboardDesigner.locale.dialogOptions,r;n.ejButton({showRoundedCorner:!1,size:"small",cssClass:"e-designer-okbtn",text:i.okButtonText,click:$.proxy(this.saveFilters,this)});t.ejButton({showRoundedCorner:!1,size:"small",cssClass:"e-designer-cancelbtn",text:i.cancelButtonText,click:$.proxy(this.closeFilterDialog,this)});r=$("#"+this.id+"_dimension_filter_foot");r.append(t).append(n)},n.prototype.updateConditionCheck=function(n){this.updateConditionFieldItemState(n.isChecked);this.modifiedConditionalFilter=!0;this.isConditionFilteringApplied=n.isChecked},n.prototype.updateConditionColumn=function(n){this.modifiedConditionalFilter=!0;this.columnName=n.text;this.columnId=n.value;var i=this.getItemType(this.columnId),t=i==="Dimensions"?this.dimensionFormats:this.measureFormats;this.conditionSummaryDropDown.data("ejDropDownList").setModel({dataSource:t});this.conditionSummaryDropDown.data("ejDropDownList").selectItemByValue(t[0].value)},n.prototype.updateConditionSummary=function(n){this.modifiedConditionalFilter=!0;this.summaryType=n.value},n.prototype.updateConditionValue=function(n){var t=n.value;NumberFilterOption.IsBetween===NumberFilterOption[t]||NumberFilterOption.IsNotBetween===NumberFilterOption[t]?this.showConditionElement(!0):this.showConditionElement(!1);this.modifiedConditionalFilter=!0;this.conditionSummaryType=t},n.prototype.showConditionElement=function(n){this.labelDiv.css("display",n?"block":"none");this.rightTextBoxDiv.css("display",n?"block":"none")},n.prototype.updateLeftTextBoxValue=function(n){this.modifiedConditionalFilter=!0;this.leftValue=n.value},n.prototype.updateRightTextBoxValue=function(n){this.modifiedConditionalFilter=!0;this.rightValue=n.value},n.prototype.updateConditionFieldItemState=function(n){n?(this.conditionColumnDropDown.data("ejDropDownList").enable(),this.conditionSummaryDropDown.data("ejDropDownList").enable(),this.conditionTypeDropDown.data("ejDropDownList").enable(),this.leftTextBox.data("ejNumericTextbox").enable(),this.rightTextBox.data("ejNumericTextbox").enable()):(this.conditionColumnDropDown.data("ejDropDownList").disable(),this.conditionSummaryDropDown.data("ejDropDownList").disable(),this.conditionTypeDropDown.data("ejDropDownList").disable(),this.leftTextBox.data("ejNumericTextbox").disable(),this.rightTextBox.data("ejNumericTextbox").disable())},n.prototype.updateRankCheck=function(n){this.updateRankFieldItemState(n.isChecked);this.modifiedTopNFilter=!0;this.isTopNFilteringApplied=n.isChecked},n.prototype.updateRankMode=function(n){this.modifiedTopNFilter=!0;this.mode=n.value},n.prototype.updateRankCount=function(n){this.modifiedTopNFilter=!0;this.numberOfRecords=n.value},n.prototype.updateRankColumn=function(n){var u;this.modifiedTopNFilter=!0;this.rankColumnName=n.text;this.rankColumnId=n.value;var i=this.isDateField(this.rankColumnId),f=this.isTimeField(this.rankColumnId),e=this.getItemType(this.rankColumnId),t,r=this.dateTimeCheckBox.data("ejCheckBox").isChecked();i||f?(t=r?i?this.dateTimeFormats:this.timeFormats:this.dimensionFormats,this.rankContainer.find("#"+this.id+"_dimension_filter_rank_date_time_row").css("display",""),u=r?"Format":"Summary",this.rankContainer.find("#"+this.id+"_dimension_filter_rank_summary_row").find(".e-summary_text").text(u)):(this.dateTimeCheckBox.data("ejCheckBox").setModel({checked:!1}),t=e==="Dimensions"?this.dimensionFormats:this.measureFormats,this.rankContainer.find("#"+this.id+"_dimension_filter_rank_date_time_row").css("display","none"),this.rankContainer.find("#"+this.id+"_dimension_filter_rank_summary_row").find(".e-summary_text").text("Summary"));this.rankFormatDropDown.data("ejDropDownList").setModel({dataSource:t});this.rankFormatDropDown.data("ejDropDownList").selectItemByIndex(0)},n.prototype.updateDateTimeValidation=function(n){var t=this.rankContainer.find("#"+this.id+"_dimension_filter_rank_summary_row").find(".e-summary_text"),i;this.modifiedTopNFilter=!0;i=this.isDateField(this.rankColumnDropDown.data("ejDropDownList").getSelectedValue());n.isChecked?(t.text("Format"),i?this.rankFormatDropDown.data("ejDropDownList").setModel({dataSource:this.dateTimeFormats}):this.rankFormatDropDown.data("ejDropDownList").setModel({dataSource:this.timeFormats}),this.rankFormatDropDown.data("ejDropDownList").selectItemByIndex(0)):(t.text("Summary"),this.rankFormatDropDown.data("ejDropDownList").setModel({dataSource:this.dimensionFormats}),this.rankFormatDropDown.data("ejDropDownList").selectItemByIndex(0))},n.prototype.updateRankFieldItemState=function(n){n?(this.rankModeDropDown.data("ejDropDownList").enable(),this.rankCountUpDown.data("ejNumericTextbox").enable(),this.rankColumnDropDown.data("ejDropDownList").enable(),this.dateTimeCheckBox.data("ejCheckBox").enable(),this.rankFormatDropDown.data("ejDropDownList").enable()):(this.rankModeDropDown.data("ejDropDownList").disable(),this.rankCountUpDown.data("ejNumericTextbox").disable(),this.rankColumnDropDown.data("ejDropDownList").disable(),this.dateTimeCheckBox.data("ejCheckBox").disable(),this.rankFormatDropDown.data("ejDropDownList").disable())},n.prototype.openDimensionFilterWindow=function(n,t,i,r){var e=i.grpInfo.Name,u=i.grpInfo.DataField,o,f,s;this.ejFilterDialog.open();this.resetFilter();this.targetInstance=n;this.targetMethod=t;this.dataSetName=e;this.fieldDetails=i.grpInfo;this.filterInfo=ej.isNullOrUndefined(r)?new DimensionFilterInfo:$.extend(!0,this.filterInfo,r);this.dataInfo=i.item;this.selectedColumnName=u;o={filters:[],fieldInfo:this.fieldDetails,filterInfo:r};this.fieldDetails.DateTimeFormat===DateTimeFormat[DateTimeFormat.Date]||this.fieldDetails.DateTimeFormat===DateTimeFormat[DateTimeFormat.Default]&&this.fieldDetails.FieldActualType!=="e-reportdesigner-dataset-time"?(f=!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined(r.AllowFilterInfo)&&!ej.isNullOrUndefined(r.AllowFilterInfo.DateFilterInfo)?r.AllowFilterInfo.DateFilterInfo:null,$("#"+this.id+"_dimension_filter_date_dateRange_multidDrpDwn").length>0?this.dateRangePopup.populateDateRangeDrpDwn(this.id+"_dimension_filter_date",this.targetItem,this.dataSetName,{Id:this.fieldDetails.DataId,Name:u},f,"DimensionFilter",this.targetItem.width()):this.dateRangePopup.renderDateRangeDrpDwn(this.id+"_dimension_filter_date",this.targetItem,this.dataSetName,{Id:this.fieldDetails.DataId,Name:u},f,"DimensionFilter",this.targetItem.width()),$("#"+this.id+"_dimension_filter_date_dateRange_multidDrpDwn").css("display","block")):($("#"+this.id+"_dimension_filter_date_dateRange_multidDrpDwn").length>0&&$("#"+this.id+"_dimension_filter_date_dateRange_multidDrpDwn").css("display","none"),this.multiSelectionComboBox.renderMultiSelectionComboBox(this.targetItem,this.id+"_dimension_filter",e,o),s=!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined(r.AllowFilterInfo)?r.AllowFilterInfo:null,this.multiSelectionComboBox.populateMultiSelectionItem(this.id+"_dimension_filter",s));this.populateFilterValues()},n.prototype.resetFilter=function(){this.filterInfo=null;this.dataFieldItems=[];this.measuresList=[];this.dimensionsList=[];this.targetInstance=null;this.targetMethod=null},n.prototype.populateFilterValues=function(){this.updateDatasetFields();this.populateConditionFields();this.populateRankFields();this.updateConditionFieldItemState(this.isConditionFilteringApplied);this.updateRankFieldItemState(this.isTopNFilteringApplied)},n.prototype.updateDatasetFields=function(){for(var i,r,t=ejDashboardDesigner.getInstance("DataSet").datasets,n=0;n<t.length;n++)if(t[n].Id===this.dataSetName)for(i=0;i<t[n].Fields.length;i++)this.dataFieldItems.push({text:t[n].Fields[i].Name,value:t[n].Fields[i].Id}),r=ej.DashboardUtil.getDatasetTypeIcon(t[n].Fields[i].TypeName),r==="e-reportdesigner-dataset-number"?this.measuresList.push({Name:t[n].Fields[i].Name,DatasetIcon:r,DataField:t[n].Fields[i].Id}):this.dimensionsList.push({Name:t[n].Fields[i].Name,DatasetIcon:r,DataField:t[n].Fields[i].Id})},n.prototype.getItemType=function(n){for(var i="",t=0;t<this.measuresList.length;t++)this.measuresList[t].DataField===n&&(i="Measures");for(t=0;t<this.dimensionsList.length;t++)this.dimensionsList[t].DataField===n&&(i="Dimensions");return i},n.prototype.isTimeField=function(n){for(var i=!1,t=0;t<this.dimensionsList.length;t++)this.dimensionsList[t].DataField===n&&this.dimensionsList[t].DatasetIcon==="e-reportdesigner-dataset-time"&&(i=!0);return i},n.prototype.isDateField=function(n){for(var i=!1,t=0;t<this.dimensionsList.length;t++)this.dimensionsList[t].DataField===n&&this.dimensionsList[t].DatasetIcon==="e-reportdesigner-dataset-datetime"&&(i=!0);return i},n.prototype.populateConditionFields=function(){var n,t;this.conditionColumnDropDown.data("ejDropDownList").setModel({dataSource:this.dataFieldItems});this.filterInfo&&this.filterInfo.IsConditionFilteringApplied&&!ej.isNullOrUndefined(this.filterInfo.ConditionFilterInfo)?(this.conditionCheckBox.data("ejCheckBox").setModel({checked:this.filterInfo.IsConditionFilteringApplied}),this.conditionColumnDropDown.data("ejDropDownList").selectItemByValue(this.filterInfo.ConditionFilterInfo.ColumnId),n=this.getItemType(this.filterInfo.ConditionFilterInfo.ColumnId),t=n==="Dimensions"?this.dimensionFormats:this.measureFormats,this.conditionSummaryDropDown.data("ejDropDownList").setModel({dataSource:t}),this.conditionSummaryDropDown.data("ejDropDownList").selectItemByValue(this.filterInfo.ConditionFilterInfo.SummaryType),this.conditionTypeDropDown.data("ejDropDownList").selectItemByValue(this.filterInfo.ConditionFilterInfo.ConditionSummaryType),NumberFilterOption[this.filterInfo.ConditionFilterInfo.ConditionSummaryType.toString()]===NumberFilterOption.IsBetween||NumberFilterOption[this.filterInfo.ConditionFilterInfo.ConditionSummaryType.toString()]===NumberFilterOption.IsNotBetween?(this.leftTextBox.data("ejNumericTextbox").setModel({value:this.filterInfo.ConditionFilterInfo.Values[0]}),this.rightTextBox.data("ejNumericTextbox").setModel({value:this.filterInfo.ConditionFilterInfo.Values[1]})):this.leftTextBox.data("ejNumericTextbox").setModel({value:this.filterInfo.ConditionFilterInfo.Values[0]}),this.modifiedConditionalFilter=!0,this.isConditionFilteringApplied=!0):(this.conditionCheckBox.data("ejCheckBox").setModel({checked:!1}),this.conditionColumnDropDown.data("ejDropDownList").selectItemByIndex(0),n=this.getItemType(this.conditionColumnDropDown.data("ejDropDownList").getSelectedValue()),t=n==="Dimensions"?this.dimensionFormats:this.measureFormats,this.conditionSummaryDropDown.data("ejDropDownList").setModel({dataSource:t}),this.conditionSummaryDropDown.data("ejDropDownList").selectItemByIndex(0),this.conditionTypeDropDown.data("ejDropDownList").selectItemByIndex(0),this.leftTextBox.data("ejNumericTextbox").setModel({value:0}),this.modifiedConditionalFilter=!1,this.isConditionFilteringApplied=!1)},n.prototype.populateRankFields=function(){var u,n,i,r,t;if(this.filterInfo.IsTopNFilteringApplied&&!ej.isNullOrUndefined(this.filterInfo.TopNFilterInfo)){this.rankCheckBox.data("ejCheckBox").setModel({checked:this.filterInfo.IsTopNFilteringApplied});this.rankModeDropDown.data("ejDropDownList").selectItemByValue(this.filterInfo.TopNFilterInfo.Mode);this.rankCountUpDown.data("ejNumericTextbox").setModel({value:this.filterInfo.TopNFilterInfo.NoOfRecords});this.rankColumnDropDown.data("ejDropDownList").setModel({dataSource:this.dataFieldItems});this.rankColumnDropDown.data("ejDropDownList").selectItemByValue(this.filterInfo.TopNFilterInfo.ColumnId);var n=this.isDateField(this.filterInfo.TopNFilterInfo.ColumnId),i=this.isTimeField(this.filterInfo.TopNFilterInfo.ColumnId),r=this.getItemType(this.filterInfo.TopNFilterInfo.ColumnId),t=[];t=n||i?this.filterInfo.TopNFilterInfo.IsBasedOnDateAndTimeField?n?this.dateTimeFormats:this.timeFormats:this.dimensionFormats:r==="Dimensions"?this.dimensionFormats:this.measureFormats;this.dateTimeCheckBox.data("ejCheckBox").setModel({checked:this.filterInfo.TopNFilterInfo.IsBasedOnDateAndTimeField});this.rankFormatDropDown.data("ejDropDownList").setModel({dataSource:t});u=this.filterInfo.TopNFilterInfo.IsBasedOnDateAndTimeField?this.filterInfo.TopNFilterInfo.DateFormat.toString():this.filterInfo.TopNFilterInfo.SummaryType.toString();this.rankFormatDropDown.data("ejDropDownList").selectItemByValue(u);this.isTopNFilteringApplied=!0}else this.rankCheckBox.data("ejCheckBox").setModel({checked:!1}),this.rankModeDropDown.data("ejDropDownList").selectItemByIndex(0),this.rankCountUpDown.data("ejNumericTextbox").setModel({value:5}),this.rankColumnDropDown.data("ejDropDownList").setModel({dataSource:this.dataFieldItems}),this.rankColumnDropDown.data("ejDropDownList").selectItemByIndex(0),n=this.isDateField(this.rankColumnDropDown.data("ejDropDownList").getSelectedValue()),i=this.isTimeField(this.rankColumnDropDown.data("ejDropDownList").getSelectedValue()),n||i?(this.dateTimeCheckBox.data("ejCheckBox").setModel({checked:!0}),n?this.rankFormatDropDown.data("ejDropDownList").setModel({dataSource:this.dateTimeFormats}):this.rankFormatDropDown.data("ejDropDownList").setModel({dataSource:this.timeFormats}),this.rankFormatDropDown.data("ejDropDownList").selectItemByIndex(0)):(r=this.getItemType(this.rankColumnDropDown.data("ejDropDownList").getSelectedValue()),t=r==="Dimensions"?this.dimensionFormats:this.measureFormats,this.rankFormatDropDown.data("ejDropDownList").setModel({dataSource:t}),this.rankFormatDropDown.data("ejDropDownList").selectItemByIndex(0)),this.isTopNFilteringApplied=!1,this.modifiedTopNFilter=!1},n.prototype.saveFilters=function(){var i,u,f,e;if(this.targetInstance!==null&&!this.multiSelectionComboBox.isMultiSelectionPopupLoading()){this.filterInfo=new DimensionFilterInfo;var n=this.multiSelectionComboBox.getPopupContainerInformation(this.id+"_dimension_filter"),t=this.dateRangePopup.getDateRangeValues(this.id+"_dimension_filter_date"),r=[];if(this.checkDimensionFilterChange(),!n.IsCheckAll){for(this.filterInfo.IsAllowFilteringApplied=!0,this.filterInfo.AllowFilterInfo=new AllowFilteringInfo,this.filterInfo.AllowFilterInfo.IsCheckAll=n.IsCheckAll,this.filterInfo.AllowFilterInfo.IsInclude=n.IsInclude,this.filterInfo.AllowFilterInfo.IsDateFormatFilteringApplied=!1,i=0;i<n.FilterValues.length;i++)n.FilterValues[i].value===undefined?r.push(n.FilterValues[i]):r.push(n.FilterValues[i].value);this.filterInfo.AllowFilterInfo.FilterValues=r}this.fieldDetails.DateTimeFormat!==DateTimeFormat[DateTimeFormat.Date]&&this.fieldDetails.DateTimeFormat!==DateTimeFormat[DateTimeFormat.Default]||!t.IsFilterApplied||ej.isNullOrUndefined(t.StartDate)||ej.isNullOrUndefined(t.EndDate)||(this.filterInfo.IsAllowFilteringApplied=!0,ej.isNullOrUndefined(this.filterInfo.AllowFilterInfo)&&(this.filterInfo.AllowFilterInfo=new AllowFilteringInfo),this.filterInfo.AllowFilterInfo.IsDateFormatFilteringApplied=!0,this.filterInfo.AllowFilterInfo.DateFilterInfo=new DateRangeFilterInfo,this.filterInfo.AllowFilterInfo.DateFilterInfo.DateFormatCondition=t.DateFormatCondition,this.filterInfo.AllowFilterInfo.DateFilterInfo.StartDate=t.StartDate,this.filterInfo.AllowFilterInfo.DateFilterInfo.EndDate=t.EndDate);this.modifiedConditionalFilter&&(this.filterInfo.IsConditionFilteringApplied=this.isConditionFilteringApplied,this.filterInfo.ConditionFilterInfo=new ConditionFilteringInfo,this.filterInfo.ConditionFilterInfo.ColumnName=this.columnName,this.filterInfo.ConditionFilterInfo.ColumnId=this.columnId,this.filterInfo.ConditionFilterInfo.SummaryType=this.summaryType,this.filterInfo.ConditionFilterInfo.ConditionSummaryType=this.conditionSummaryType,this.filterInfo.ConditionFilterInfo.Values[0]=this.leftValue.toString(),this.filterInfo.ConditionFilterInfo.Values[1]=this.rightValue.toString());this.modifiedTopNFilter&&(this.filterInfo.IsTopNFilteringApplied=this.isTopNFilteringApplied,this.filterInfo.TopNFilterInfo=new TopNFilteringInfo,this.filterInfo.TopNFilterInfo.Mode=this.mode,this.filterInfo.TopNFilterInfo.NoOfRecords=this.numberOfRecords,this.filterInfo.TopNFilterInfo.ColumnName=this.rankColumnName,this.filterInfo.TopNFilterInfo.ColumnId=this.rankColumnId,this.filterInfo.TopNFilterInfo.IsHierarchicalFilter=ej.isNullOrUndefined(ejDashboardDesigner.getInstance("ContainerPropertyItem").filterSettings)?!0:ej.isNullOrUndefined(ejDashboardDesigner.getInstance("ContainerPropertyItem").filterSettings.HierarchicalFilter)?!0:ejDashboardDesigner.getInstance("ContainerPropertyItem").filterSettings.HierarchicalFilter,this.filterInfo.TopNFilterInfo.IsBasedOnDateAndTimeField=this.dateTimeCheckBox.data("ejCheckBox").isChecked(),this.dateTimeCheckBox.data("ejCheckBox").isChecked()?(u=this.rankFormatDropDown.data("ejDropDownList").getSelectedValue(),this.filterInfo.TopNFilterInfo.DateFormat=u):(f=this.rankFormatDropDown.data("ejDropDownList").getSelectedValue(),this.filterInfo.TopNFilterInfo.SummaryType=f));this.filterInfo.IsAllowFilteringApplied||this.filterInfo.IsConditionFilteringApplied||this.filterInfo.IsTopNFilteringApplied||(this.filterInfo=null);e=[this.filterInfo,this.selectedColumnName,this.dataInfo];ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,e);this.closeFilterDialog()}},n.prototype.closeFilterDialog=function(){this.multiSelectionComboBox.hideMultiSelectionWaitingPopup();this.ejFilterDialog.close()},n.prototype.closeDialog=function(n){$("#"+this.id+"_dimension_filter_multi_select_dropDown").remove();$("#"+this.id+"_dimension_filter_popup_container").remove();var t=$("#"+this.id+"_dimension_filter_date_dateRange_popup");t.length>0&&(t.css("display","none"),$("#"+this.id+"_dimension_filter_date_dateRange_multidDrpDwn .e-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"));n.model.position={X:0,Y:0}},n.prototype.checkDimensionFilterChange=function(){var r=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0].attr("controlType")===ej.DashboardDesignerUtility.Serialization.enumToString(WidgetType,WidgetType.Filter),f=this.multiSelectionComboBox.getPopupContainerInformation(this.id+"_dimension_filter"),i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),t=i.dataGroupInfo.Values[0].Values[0],u=ej.isNullOrUndefined(t)?null:t.FilterInfo,n;ej.isNullOrUndefined(u)?r&&ej.isNullOrUndefined(u)&&(this.modifiedConditionalFilter||this.modifiedTopNFilter||!f.IsCheckAll||this.dataInfo.DateTimeFormat===DateTimeFormat[DateTimeFormat.Date])&&i.clearFilter():(n=t.FilterInfo.DimensionFilterInfo,r&&!ej.isNullOrUndefined(n)&&(this.isTopNhasSameValues(n)||this.isConditionFilterHasSameValues(n)||this.isAllowFilterHasSameValues(n)||this.isAllowFilterHasDateRange(n,t))&&i.clearFilter())},n.prototype.isTopNhasSameValues=function(n){var t=!1;return ej.isNullOrUndefined(n.TopNFilterInfo)||(t=this.isTopNFilterModeChanged(n)||this.isTopNRecordsCountChanged(n)||this.isTopNColumnNameChnaged(n)||this.isTopNColumnIdChanged(n)||this.isTopNBasedOnDateAndTimeFiled(n)||this.isTopNSummaryTypeChanged(n)||this.isTopNNDateTimeFormatChanged(n)),this.modifiedTopNFilter&&(!n.IsTopNFilteringApplied&&this.isTopNFilteringApplied||n.IsTopNFilteringApplied&&t)},n.prototype.isTopNFilterModeChanged=function(n){return n.TopNFilterInfo.Mode!==this.mode},n.prototype.isTopNRecordsCountChanged=function(n){return n.TopNFilterInfo.NoOfRecords!==this.numberOfRecords},n.prototype.isTopNColumnNameChnaged=function(n){return n.TopNFilterInfo.ColumnName!==this.rankColumnName},n.prototype.isTopNColumnIdChanged=function(n){return n.TopNFilterInfo.ColumnId!==this.rankColumnId},n.prototype.isTopNBasedOnDateAndTimeFiled=function(n){return n.TopNFilterInfo.IsBasedOnDateAndTimeField!==this.dateTimeCheckBox.data("ejCheckBox").isChecked()},n.prototype.isTopNSummaryTypeChanged=function(n){var t=this.rankFormatDropDown.data("ejDropDownList");return!this.dateTimeCheckBox.data("ejCheckBox").isChecked()&&n.TopNFilterInfo.SummaryType!==ej.DashboardDesignerUtility.Serialization.stringtoEnum(SummaryType,t.getSelectedValue().toLocaleLowerCase().replace(/\b[a-z]/g,function(n){return n.toUpperCase()}))},n.prototype.isTopNNDateTimeFormatChanged=function(n){var t=this.rankFormatDropDown.data("ejDropDownList");return this.dateTimeCheckBox.data("ejCheckBox").isChecked()&&!ej.isNullOrUndefined(t)&&n.TopNFilterInfo.DateFormat!==ej.DashboardDesignerUtility.Serialization.stringtoEnum(DateTimeFormatForFilter,t.selectedTextValue)},n.prototype.isConditionFilterHasSameValues=function(n){var t=!1;return ej.isNullOrUndefined(n.ConditionFilterInfo)||(t=this.isConditionFilterColumnNameChanged(n)||this.isConditionFilterColumnIdChanged(n)||this.isConditionFilterSummaryTypeChanged(n)||this.isConditionFilterConditionSummaryTypeChanged(n)||this.isConditionFilterLeftValueChanged(n)||this.isConditionFilterRightValueChanged(n)),this.modifiedConditionalFilter&&(!n.IsConditionFilteringApplied&&this.isConditionFilteringApplied||n.IsConditionFilteringApplied&&t)},n.prototype.isConditionFilterColumnNameChanged=function(n){return n.ConditionFilterInfo.ColumnName!==this.columnName},n.prototype.isConditionFilterColumnIdChanged=function(n){return n.ConditionFilterInfo.ColumnId!==this.columnId},n.prototype.isConditionFilterSummaryTypeChanged=function(n){return n.ConditionFilterInfo.SummaryType!==this.summaryType},n.prototype.isConditionFilterConditionSummaryTypeChanged=function(n){return n.ConditionFilterInfo.ConditionSummaryType!==this.conditionSummaryType},n.prototype.isConditionFilterLeftValueChanged=function(n){return n.ConditionFilterInfo.Values[0]!==this.leftValue.toString()},n.prototype.isConditionFilterRightValueChanged=function(n){return n.ConditionFilterInfo.Values[1]!==this.rightValue.toString()},n.prototype.isAllowFilterHasSameValues=function(n){var i=!1,t=this.multiSelectionComboBox.getPopupContainerInformation(this.id+"_dimension_filter");return ej.isNullOrUndefined(n.AllowFilterInfo)||(i=this.isAllowFilterCheckAllChanged(n,t)||this.isAllowFilterIncludeChanged(n,t)||this.isAllowFilterHasDateTimeFormat(n,t)||!this.isAllowFilterChange(n.AllowFilterInfo.FilterValues,t.FilterValues)),!t.IsCheckAll&&n.IsAllowFilteringApplied&&i},n.prototype.isAllowFilterCheckAllChanged=function(n,t){return n.AllowFilterInfo.IsCheckAll!==t.IsCheckAll},n.prototype.isAllowFilterIncludeChanged=function(n,t){return n.AllowFilterInfo.IsInclude!==t.IsInclude},n.prototype.isAllowFilterHasDateTimeFormat=function(n){return n.AllowFilterInfo.IsDateFormatFilteringApplied},n.prototype.isAllowFilterChange=function(n,t){return n.length===t.length&&n.every(function(n,i){return n===t[i]})},n.prototype.isAllowFilterHasDateRange=function(n,t){if(!ej.isNullOrUndefined(n.AllowFilterInfo)&&!ej.isNullOrUndefined(n.AllowFilterInfo.DateFilterInfo)){var i=this.dateRangePopup.getDateRangeValues(this.id+"_dimension_filter_date"),r=this.isAllowFilterDateFomartCondtionModified(n,i)||this.isAllowFilterStartDateChanged(n,i)||this.isAllowFilterEndDateChanged(n,i);return(t.DateTimeFormat===DateTimeFormat[DateTimeFormat.Date]||this.fieldDetails.DateTimeFormat===DateTimeFormat[DateTimeFormat.Default])&&n.IsAllowFilteringApplied&&r}return!1},n.prototype.isAllowFilterDateFomartCondtionModified=function(n,t){return n.AllowFilterInfo.DateFilterInfo.DateFormatCondition!==t.DateFormatCondition},n.prototype.isAllowFilterStartDateChanged=function(n,t){return n.AllowFilterInfo.DateFilterInfo.StartDate!==t.StartDate},n.prototype.isAllowFilterEndDateChanged=function(n,t){return n.AllowFilterInfo.DateFilterInfo.EndDate!==t.EndDate},n}();window.ej.createObject("ej.DashboardDesignerUtility.DimensionFilter",InternalDimensionFilter,window);InternalDragDropHelper=function(){function n(n){this.dashboardDesigner=null;this.zIndex="";this.dragging=null;this.pageY=0;this.isWidgetListDrag=!1;this.itemJson=null;this.restrictDrop=!1;this.fieldInfo=null;this.paramName="";this.dashboardDesigner=n;this.id=this.dashboardDesigner._id;this.designAreaContainer=$("#"+this.id+"_designAreaContainer");this.designCanvas=this.designAreaContainer.find(".e-dashboarddesigner-designcanvas");this.initalizeDraggable()}return n.prototype.initalizeDraggable=function(){$("#"+this.id+" .e-draggable").ejDraggable({clone:!0,cursor:"move",helper:$.proxy(this.helper,this),dragStart:$.proxy(this.dragstart,this),dragStop:$.proxy(this.dragStop,this),cursorAt:{top:-4,left:-10},drag:$.proxy(this.drag,this)})},n.prototype.initializeDraggable=function(n,t){n.ejDraggable({clone:!0,cursor:"move",helper:$.proxy(this.helper,this),dragStart:$.proxy(this.dragstart,this),dragStop:$.proxy(this.dragStop,this),cursorAt:{top:-4,left:-10},drag:$.proxy(this.drag,this)});this.zIndex=t},n.prototype.initializeParameterDraggable=function(n){n.ejDraggable({clone:!0,cursor:"move",helper:$.proxy(this.helper,this),dragStart:$.proxy(this.dragstart,this),dragStop:$.proxy(this.dragStop,this),drag:$.proxy(this.drag,this)})},n.prototype.initializeWidgetListDraggable=function(n,t){this.itemJson=t;n.ejDraggable({clone:!0,cursor:"pointer",helper:$.proxy(this.helper,this),dragStart:$.proxy(this.dragstart,this),dragStop:$.proxy(this.dragStop,this),drag:$.proxy(this.drag,this)})},n.prototype.dragstart=function(n){this.dashboardDesigner.isItemDrag=!0;this.fieldInfo=null;this.paramName="";this.designAreaContainer=$("#"+this.id+"_designAreaContainer");this.designCanvas=this.designAreaContainer.find(".e-dashboarddesigner-designcanvas");var t=$(n.element);t.hasClass("e-datafield")?this.fieldInfo={dataSetName:t.attr("e-dataset"),fieldName:t.attr("name")}:t.hasClass("e-parameter")?this.paramName=t.attr("name"):t.closest(".e-dbd-widget-list").length>0&&(this.isWidgetListDrag=!0)},n.prototype.drag=function(n){var f,e,o;this.restrictDrop=!1;var l=this.getPosition("clientX",n.event),u=this.getPosition("clientY",n.event),h=this.designCanvas[0].getBoundingClientRect(),i=this.dashboardDesigner.designerPanel;if(ej.isNullOrUndefined(n.element)||ej.isNullOrUndefined($(n.element).attr("id"))||$(n.element).attr("id").indexOf("categoryList")===-1)if(h.left+parseFloat(this.designCanvas.css("padding-left"))<l&&h.top+parseFloat(this.designCanvas.css("padding-top"))<u&&h.right-parseFloat(this.designCanvas.css("padding-right"))>l&&h.bottom-parseFloat(this.designCanvas.css("padding-bottom"))>u){if(this.designAreaContainer.css("cursor","default"),this.draggingItem.css({display:"block",zIndex:this.zIndex}),o=i.getTargetElement({x:l,y:u,width:1,height:1}),!ej.isNullOrUndefined(o)){var b=o.position(),k=this.designCanvas.find("#"+i.designId+"_placingItem"),d=o.attr("row"),g=o.attr("column");k.attr({row:d,column:g});i.isWidgetItemRestricted=i.isItemRestricted({row:Number(d),column:Number(g),rowSpan:1,colSpan:1},!1);k.css({display:"block","background-color":i.isWidgetItemRestricted?i.itemRestrictedColor:"transparent","border-color":i.isWidgetItemRestricted?"#f13232":"#179bd7",left:b.left+i.cellMargin,top:b.top+i.cellMargin,width:o.width()+2,height:o.height()+2})}}else this.designCanvas.find("#"+i.designId+"_placingItem").css("display","none"),this.designAreaContainer.css("cursor","not-allowed"),this.restrictDrop=!0;else{this.droppingItem=null;this.draggingItem.css("zIndex",this.zIndex);var c=this.getDataCategoryListContainer(n.event,$(n.element).attr("category")),t=ej.isNullOrUndefined(c)?null:c.Container,nt=ej.isNullOrUndefined(c)?null:c.ParentContainer,a=$(n.element).attr("category"),v=$("#"+this.id+"_dataTabElement"),tt=ej.DashboardUtil.getWidgetInstance(i.selectedReportItems[0]),it=tt.onFieldDragDrop({dataId:!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined($(t).attr("dataid"))?$(t).attr("dataid"):$(n.element).attr("dataid"),tableId:!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined($(t).attr("tableid"))?$(t).attr("tableid"):$(n.element).attr("tableid"),tableName:!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined($(t).attr("tablename"))?$(t).attr("tablename"):$(n.element).attr("tablename"),fieldType:a,categoryType:!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined($(t).attr("categorytype"))?$(t).attr("categorytype"):$(n.element).attr("categorytype"),field:!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined($(t).attr("field"))?$(t).attr("field"):$(n.element).attr("field"),dataField:!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined($(t).attr("datafield"))?$(t).attr("datafield"):$(n.element).attr("datafield")});if(!ej.isNullOrUndefined(t)&&it){this.droppingItem=t;var s=$(t).attr("category"),p=$(t).attr("categorycount"),rt=$(n.element).attr("field").replace(" ","");v.css("cursor","default");var r=-1,y=-1,ut=$("#"+this.id+"_"+s+"_categoryListDiv_"+ej.DashboardUtil.escapeSelector(rt));if(ej.isNullOrUndefined(ut[0])||a!=="Measures"&&a!=="Dimensions")for(f=0;f<t[0].children.length;f++){var w=t[0].children[f].getBoundingClientRect(),ft=t[0].children[t[0].children.length-1].getBoundingClientRect(),et=nt[0].getBoundingClientRect();t[0].children[f].id===this.id+"_"+s+"_categorylistdiv_emptyfield"&&(y=f);w.top<u&&w.bottom>u?r=f:u>ft.bottom&&u<et.bottom&&(r=t[0].children.length-1)}e=$("#"+this.id+"_"+s+"_categorylistdiv_emptyfield");(r>-1||t[0].children.length===0)&&y!==r?(ej.isNullOrUndefined(p)||e.length===1||t[0].children.length<=parseInt(p,10))&&(y<r?e.insertAfter(t[0].children[r]):e.insertBefore(t[0].children[r])):r===-1&&(v.css("cursor","not-allowed"),this.restrictDrop=!0);(s==="Measures"||s==="Dimensions")&&($("#"+this.id+"_dataTabElement").css("cursor","not-allowed"),this.restrictDrop=!0)}else v.css("cursor","not-allowed"),e=this.dashboardDesigner.element.find("div.e-dbrd-rendercolumn-container .e-categorylistdiv-emptyfield:not(:last-child)"),e.insertAfter(e.siblings(":last")),this.restrictDrop=!0}},n.prototype.restrictAggregateField=function(n){var t;if(!ej.isNullOrUndefined(n.element)&&!ej.isNullOrUndefined($(n.element).attr("id"))&&(t=this.getDataCategoryListContainer(n.event,$(n.element).attr("category")),!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.Container))){var i=t.Container,r=$(i).attr("category"),u=$(i).attr("categorytype"),f=$(n.element).attr("isaggregatedexpression"),e=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);return this.restrictDrop=!e.isFieldValid(f,u,r),this.restrictDrop&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.DataConfiguration,this.dashboardDesigner.locale.alertWindowMesages.restrictedFieldMessage,IconType.warning,AlertType.Alert,!1,null),this.restrictDrop}return this.restrictDrop=!1},n.prototype.getValidatedContainer=function(n,t,i){var u=$("#"+this.id+"_"+i+"_categoryListPanel"),r=ej.isNullOrUndefined(u)?null:u[0].getBoundingClientRect();return!ej.isNullOrUndefined(r)&&r.left<n&&r.top<t&&r.right>n&&r.bottom>t?{ParentContainer:u,Container:$("#"+this.id+"_"+i+"_categoryList")}:null},n.prototype.getDataCategoryListContainer=function(n,t){var f=this.getPosition("clientX",n),e=this.getPosition("clientY",n),u,i,r;if(t==="Measures"||t==="Dimensions"){for(u=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"getCategories"),i=0;i<u.length;i++)if((ej.isNullOrUndefined(u[i].Visibility)||u[i].Visibility!==Visibility.hidden)&&(r=this.getValidatedContainer(f,e,u[i].Name),!ej.isNullOrUndefined(r)))return r}else if(!ej.isNullOrUndefined(t)&&(r=this.getValidatedContainer(f,e,t),!ej.isNullOrUndefined(r)))return r;return null},n.prototype.dragStop=function(n,t,i){var tt,st,lt,w,v,at,rt,p,k,u,h,ft,et,ot,wt;ej.isNullOrUndefined(i)||(this.droppingItem=i);tt=$(n.target);st=this.dashboardDesigner.element.find("#"+this.id+"_dataTabElement");this.dashboardDesigner.isItemDrag=!1;var l=this.dashboardDesigner.designerPanel,ht=this.id,ct=$("#"+ht+"_dragging_item"),bt=ct.attr("data-widgetnamespace"),kt=ct.attr("data-widgetname"),o=$(n.element).attr("category");if($("#"+this.id+"_dragging_item").remove(),lt=l.isDesignerSections(tt),ejDashboardDesigner.editManager.setMergeAction(!0),w=this.designCanvas.find("#"+ht+"_placingItem"),lt)v={row:Number(w.attr("row")),column:Number(w.attr("column")),rowSpan:1,colSpan:1},l.isWidgetItemRestricted=l.isItemRestricted(v,!1),l.isWidgetItemRestricted||(this.isWidgetListDrag?(this.itemJson.ContainerSettings.Bounds.Row=v.row,this.itemJson.ContainerSettings.Bounds.Column=v.column,this.dashboardDesigner.designerPanel.pasteWidgetElement(this.itemJson)):this.droppedReportItems(bt,kt,"",v));else if(!this.restrictDrop&&l.selectedReportItems.length>0){var r=this.droppingItem,f=ej.isNullOrUndefined(r)?$(n.element).attr("category"):$(r).attr("category"),dt=ej.DashboardUtil.getWidgetInstance(l.selectedReportItems[0]),gt=ej.isNullOrUndefined(t)?dt.onFieldDragDrop({dataId:!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("dataid"))?$(r).attr("dataid"):$(n.element).attr("dataid"),tableId:!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("tableid"))?$(r).attr("tableid"):$(n.element).attr("tableid"),tableName:!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("tablename"))?$(r).attr("tablename"):$(n.element).attr("tablename"),fieldType:o,categoryType:!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("categorytype"))?$(r).attr("categorytype"):$(n.element).attr("categorytype"),field:!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("field"))?$(r).attr("field"):$(n.element).attr("field"),dataField:!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("datafield"))?$(r).attr("datafield"):$(n.element).attr("datafield"),eventObject:n,elementCategoryInfo:f,droppedItem:this.droppingItem}):!1;if(this.restrictAggregateField(n),!ej.isNullOrUndefined(n.element)&&!ej.isNullOrUndefined($(n.element).attr("id"))&&$(n.element).attr("id").indexOf("categoryList")!==-1&&(gt&&ej.isNullOrUndefined(t)&&!this.restrictDrop||!ej.isNullOrUndefined(t))){var s=-1,a=-1,y=CategoryType[!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("categorytype"))?$(r).attr("categorytype"):$(n.element).attr("categorytype")],ni=DateTimeFormat[!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("datetimeformat"))?$(r).attr("datetimeformat"):$(n.element).attr("datetimeformat")],c=!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("fieldactualtype"))?$(r).attr("fieldactualtype"):$(n.element).attr("fieldactualtype"),ti=!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("dataid"))?$(r).attr("dataid"):$(n.element).attr("dataid"),ii=!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("tableid"))?$(r).attr("tableid"):$(n.element).attr("tableid"),ri=!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined($(r).attr("tablename"))?$(r).attr("tablename"):$(n.element).attr("tablename"),it=$(n.element).attr("label"),e=ej.isNullOrUndefined(r)?$("#"+this.id+"_"+f+"_categoryList")[0].children:r[0].children,b=$("#"+this.id+"_"+f+"_categorylistdiv_emptyfield");for(h=0;h<e.length;h++)e[h].id===this.id+"_"+f+"_categorylistdiv_emptyfield"&&(s=h),e[h].id===this.id+"_"+f+"_categoryListDiv_"+it&&(a=h);if(at=$("#"+this.id+"_"+f+"_categoryListDiv_"+it),rt=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),ej.isNullOrUndefined(at[0])||o!=="Measures"&&o!=="Dimensions"){if(p=void 0,k=null,b.length<1||!ej.isNullOrUndefined(t)&&!t){for(u=tt.closest("[label]"),u.length<1&&(u=!ej.isNullOrUndefined(t)&&!t?$(e[0]):$(e[e.length-1])),h=0;h<e.length;h++)u.attr("id")===e[h].id&&(s=h);(f===o||o!=="Measures")&&(o!=="Dimensions"||!ej.isNullOrUndefined(t)&&(ej.isNullOrUndefined(t)||t))||(k={Field:u.attr("field"),Label:u.attr("label"),DataField:u.attr("datafield"),DataId:u.attr("dataid"),TableId:u.attr("tableid"),TableName:u.attr("tablename"),Name:u.attr("category"),SummaryType:u.attr("summarytype"),IsLoading:!1,Values:{},ItemIndex:s,IsExpression:!1,FieldType:u.attr("fieldtype"),CategoryType:u.attr("categorytype"),FieldActualType:u.attr("fieldactualtype"),DateTimeFormat:u.attr("datetimeformat"),UniqueColumnName:u.attr("uniqueColumnName")})}if(f!=="Measures"&&f!=="Dimensions")if(o==="Measures"||o==="Dimensions"){var d=ejDashboardDesigner.getInstance("DataConfiguration"),ui=d.getAvailableName(),vt=!1,yt=!1,fi=$(n.element).attr("dataid"),ut=d.getExpressionField(fi);ej.isNullOrUndefined(ut)||(vt=ut.IsExpression,yt=ut.IsAggregatedExpression);ft=ej.DashboardUtil.getDefaultSummaryType(o,y)===SummaryType.NONE?"":ej.DashboardUtil.getDefaultSummaryType(o,y).toString();et=ej.DashboardUtil.getDefaultDateFormat(c);c=(c==="e-reportdesigner-dataset-datetime"||c==="e-reportdesigner-dataset-time")&&CategoryType[y]===CategoryType[CategoryType.Numeric]?"e-reportdesigner-dataset-string":c;ot={Field:$(n.element).attr("field"),Label:ui,DataField:$(n.element).attr("datafield"),DataId:ti,TableId:ii,TableName:ri,Name:f,SummaryType:ej.isNullOrUndefined(ft)?y===CategoryType[CategoryType.Numeric]?o==="Measures"?SummaryType.SUM:SummaryType.COUNT:"":ft,IsLoading:!1,Values:{},ItemIndex:s,IsExpression:vt,IsAggregatedExpression:yt,FieldType:o,CategoryType:y,FieldActualType:c,DateTimeFormat:ej.isNullOrUndefined(et)?c==="e-reportdesigner-dataset-datetime"?DateTimeFormat[DateTimeFormat.Year]:c==="e-reportdesigner-dataset-time"?DateTimeFormat[DateTimeFormat.Default]:ni:et};b.length<1?ej.DashboardUtil.invokeMethod(d,"replaceItem",[k,ot]):(ej.isNullOrUndefined(t)||t||ejDashboardDesigner.getInstance("DataConfiguration").removeItem(k,!1,!0,!1),p=ej.DashboardUtil.invokeMethod(d,"addItem",[ot,!1,!0]))}else if(p=$("#"+this.id+"_"+f+"_categoryListDiv_"+it),p[0].style.display="block",s>-1&&e.length>0){$("#"+p[0].id).insertBefore(e[s]);b.length>0&&s<e.length-1&&b.insertAfter(e[e.length-1]);var pt={Field:$(n.element).attr("field"),DataField:$(n.element).attr("datafield"),DataId:$(n.element).attr("dataid"),TableId:$(n.element).attr("tableid"),TableName:$(n.element).attr("tablename"),Label:$(n.element).attr("label"),FieldType:$(n.element).attr("fieldtype"),SummaryType:$(n.element).attr("summarytype"),FieldActualType:$(n.element).attr("fieldactualtype"),DateTimeFormat:rt.controlType==="DatePicker"?"Date":$(n.element).attr("datetimeformat"),Name:f,ItemIndex:a},ei={Field:$(n.element).attr("field"),DataField:$(n.element).attr("datafield"),DataId:$(n.element).attr("dataid"),TableId:$(n.element).attr("tableid"),TableName:$(n.element).attr("tablename"),FieldType:$(n.element).attr("fieldtype"),SummaryType:$(n.element).attr("summarytype"),FieldActualType:$(n.element).attr("fieldactualtype"),DateTimeFormat:rt.controlType==="DatePicker"?"Date":$(n.element).attr("datetimeformat"),Label:$(n.element).attr("label"),Name:f,ItemIndex:s},g=s<a?a-1:a,nt=s>a?s-1:s;g!==nt&&(ejDashboardDesigner.editManager.addCmdAction(CommandAction.DataAssignUpdate,"reorderItem","DataConfiguration","",[pt,{previousIndex:nt,currentIndex:g}],[ei,{previousIndex:g,currentIndex:nt}]),wt=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"updateDataGroupInfo",[pt,wt,{previousIndex:g,currentIndex:nt}]),ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"postDraggedFields",[]))}}}}$(st).css("cursor","default");w.css({display:"none","background-color":l.itemPlacingColor});this.isWidgetListDrag=!1;ejDashboardDesigner.editManager.setMergeAction(!1);$("#"+this.id+"_designAreaContainer").css("cursor","default");this.droppingItem=null},n.prototype.droppedReportItems=function(n,t,i,r){this.dashboardDesigner.designerPanel.renderItem(n,t,i,r);ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.helper=function(n){var t=$(n.element).clone(!0),i=this.id,r,u,o,f,e;if(ej.isNullOrUndefined(n.element)||ej.isNullOrUndefined($(n.element).attr("id"))||$(n.element).attr("id").indexOf("categoryList")===-1)if($(n.element)[0].children.length>0)if(o=$(n.element)[0].children[0],o.className.indexOf("e-widgeticon")!==-1)t=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("ItemPanel"),"getDragElement",[t]),$(t).attr("id",i+"_dragging_item"),$("#"+i+"_designPanel").append(t),this.draggingItem=$("#"+i+"_dragging_item");else if($(n.element).closest(".e-dbd-widget-list").length>0){this.isWidgetListDrag=!0;var s=$(n.element).closest(".e-dbd-widget-list"),h=s.attr("data-uniqueName"),c=s.attr("data-itemName");t=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("WidgetContainer"),"getDragElement",[h,c]);$(t).attr("id",i+"_dragging_item");$("#"+i+"_designPanel").append(t);this.draggingItem=$("#"+i+"_dragging_item")}else $(n.element).hasClass("e-parameter")?(f=$(n.element).attr("name"),e=$(n.element).find("span.e-designer-datatype-icon").attr("class"),t=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("Parameter"),"getDragElement",[f,e]),t.css("border-color","#0C8BE2"),$(t).attr("id",i+"_dragging_item"),$("#"+i+"_designPanel").append(t),this.draggingItem=$("#"+i+"_dragging_item")):$(n.element).hasClass("e-datafield")?(f=$(n.element).attr("name"),e=$(n.element).find("span.e-designer-content-icon").attr("class"),t=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataSet"),"getDragElement",[f,e]),t.css("border-color","#0C8BE2"),$(t).attr("id",i+"_dragging_item"),$("#"+i+"_designPanel").append(t),this.draggingItem=$("#"+i+"_dragging_item")):($(t).attr("id",i+"_dragging_item"),$("#"+i+"_designPanel").append(t),this.draggingItem=$("#"+i+"_dragging_item"));else $(t).attr("id",i+"_dragging_item"),$("#"+i+"_designPanel").append(t),this.draggingItem=$("#"+i+"_dragging_item");else r=$(n.element).attr("category"),u=$(n.element).attr("field"),t=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"getDragElement",[r,u,$("#"+this.id+"_"+r+"_categoryListDatasetIcon_"+ej.DashboardUtil.escapeSelector(u.replace(" ",""))).attr("class")]),t.css("border-color","#0C8BE2"),r!=="Measures"&&r!=="Dimensions"&&$("#"+this.id+"_"+r+"_categoryListDiv_"+u).css("display","none"),$(t).attr("id",i+"_dragging_item"),t.css("width",$("#"+this.id+"_"+r+"_categoryList")[0].offsetWidth-10),$("#"+this.id+"_"+r+"_categoryItem").append(t),this.draggingItem=$(t);return $(t)},n.prototype.getPosition=function(n,t){var i=0;return t[n]?i=t[n]:t.originalEvent&&t.originalEvent.targetTouches&&t.originalEvent.targetTouches.length>0?i=t.originalEvent.targetTouches[0][n]:t.originalEvent&&t.originalEvent.changedTouches&&t.originalEvent.changedTouches.length>0&&(i=t.originalEvent.changedTouches[0][n]),i},n.prototype.initializeSortable=function(n,t,i,r,u){n.bind(ej.DashboardUtil.MouseEvent.mouseDown,$.proxy(this.ondragStart,this,{element:t,diaglog:i,container:r,callBackMethod:u}));n.css("cursor","move")},n.prototype.ondragStart=function(n,t){$("body").bind(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.ondrag,this,{container:n.container}));$("body").bind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.ondrop,this,n));this.dragging=ej.buildTag("div","",{height:"auto",width:n.element.width(),position:"absolute",display:"block","border-style":"none","z-index":$("#"+n.diaglog+"_wrapper").css("z-index")+10,top:t.originalEvent&&t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY+1.5:t.pageY+1.5,left:t.originalEvent&&t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX+1.5:t.pageX+1.5},{});this.dragging.append(n.element.clone());$("body").append(this.dragging);this.updateDragRegion(n.element,"bottom");n.element.hide()},n.prototype.ondrag=function(n,t){var h=this,s,f;if(this.dragging!=null){var u=$("#"+n.container),i=u.data("ejScroller"),e=u.offset(),r=t.originalEvent&&t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageY:t.pageY,o=t.originalEvent&&t.originalEvent.targetTouches?t.originalEvent.targetTouches[0].pageX:t.pageX;this.dragging.css({display:"block",position:"absolute",top:r+1.5,left:o+1.5});e.top>r?i.model.scrollTop>0&&i.model.scrollTop-5>0?i.scrollY(i.model.scrollTop-5):i.scrollY(0):r>e.top+u.height()&&i.scrollY(i.model.scrollTop+5);s=u.find(".e-items").children(".e-drag-row:visible");f=this;s.each(function(n,t){var i=$(t);if(f.isIntersect(o,r,i,u)){f.updateDragRegion(i,r<h.pageY?"bottom":"top");return}});this.pageY=r}},n.prototype.ondrop=function(n){n.element.show();var t=$("#"+this.id+"_drag_empty_area");n.element.insertAfter(t);this.dragging.remove();this.dragging=null;t.remove();ej.isNullOrUndefined(n.callBackMethod)||ej.DashboardUtil.invokeCallBack(n.callBackMethod,{});$("body").unbind(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.ondrag,this));$("body").unbind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.ondrop,this))},n.prototype.isIntersect=function(n,t,i,r){var u=i.offset(),f=r.offset();return f.left<n&&n<f.left+r.width()&&f.top<t&&t<f.top+r.height()&&u.left<n&&n<u.left+i.width()&&u.top<t&&t<u.top+i.height()},n.prototype.updateDragRegion=function(n,t){var i=$("#"+this.id+"_drag_empty_area");i.length===0&&(i=ej.buildTag("div.e-empty","",{border:"1px solid #f1f1f1",width:n.children().width(),margin:"8px",height:n.children().height(),background:"white"},{id:this.id+"_drag_empty_area"}));t==="bottom"?i.insertBefore(n):i.insertAfter(n)},n}();window.ej.createObject("ej.DashboardDesignerUtility.DragdropHelper",InternalDragDropHelper,window);InternalDriveFilePickerDialog=function(){function n(){this.scrollerObj=null;this.divFilePickerDialog=null;this.oAuthProvider=null;this.oAuthService=null;this.serviceId=null;this.containerdiv=null;this.fileContainerdiv=null;this.fileSubContainerdiv=null;this.subContainerdiv=null;this.selectBtnTag=null;this.fileId=null;this.backContainer=null;this.refreshInterval=null;this.refreshContainer=null;this.separatorContainer=null;this.dataSourceNameContainer=null;this.sitesListContainer=null;this.separator=null;this.currentFolder=null;this.separatorJson=null;this.csvChkBox=null;this.id=null;this.folderNames=[];this.fileName=null;this.fileType=null;this.ajaxPost=null;this.folderId=null;this.folderName=null;this.folderUniqueId=null;this.scrolled=!1;this.isEdit=!1;this.datasource=ejDashboardDesigner.getInstance("DataSource");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.helpLinks=[{provider:OAuthProvider.Google,service:"drive"},{provider:OAuthProvider.Microsoft,service:"onedrive"},{provider:OAuthProvider.Microsoft,service:"sharepoint"},{provider:OAuthProvider.Box,service:"box"},];this.field={id:"id",text:"text",value:"value"};this.id=this.dashboardDesigner._id;this.renderFilePickerDialog();this.credential={}}return Object.defineProperty(n,"FilePickerDialog",{get:function(){return(this.fileBrowse===null||this.fileBrowse===undefined)&&(this.fileBrowse=new ej.DashboardDesignerUtility.FilePickerDialog),this.fileBrowse},enumerable:!0,configurable:!0}),n.prototype.showDialog=function(n,t,i,r,u,f){this.oAuthService=r;r==="sharepoint"?$(this.sitesListContainer).css("display","inline-block"):$(this.sitesListContainer).css("display","none");this.resetFilePickerDialog();this.setTitleContent(n);this.divFilePickerDialog.data("ejDialog").open();this.isEdit=u;this.editDSInfo=f;u===!0?this.setDataSourceName(f):this.setDataSourceName();this.oAuthService==="sharepoint"?this.getAllSites(t,i,r,u,f):this.getAllFiles(t,i,r,null,null)},n.prototype.renderFilePickerDialog=function(){var i,n,r,u,f,t;this.divFilePickerDialog=ej.buildTag("div","",{},{id:this.id+"_file_picker_dialog"});i=this.divFilePickerDialog.height();this.containerdiv=ej.buildTag("div","",{height:i},{id:this.id+"_file_picker_container","class":"e-dbrd-designer-file-picker-container"});this.fileContainerdiv=ej.buildTag("div","",{},{id:this.id+"_file_picker_container_file_container","class":"e-dbrd-designer-file-picker-file-container e-dbrd-designer-scroller e-dbrd-control"});this.backContainer=ej.buildTag("div","",{},{id:this.id+"_file_picker_container_back_container","class":"e-dbrd-designer-file-picker-back-container"});this.dataSourceNameContainer=ej.buildTag("div.e-drive-file-picker-field-container","",{},{id:this.id+"_googledrive_dataSource_name_container"});n=this.dashboardDesigner.locale.driveFilePicker;r=ej.buildTag("label.editLabel e-designer-title-label e-google-drive-dataSource-name-label",n.datasourceNameText,{},{id:this.id+"_googledrive_dataSource_name_label"});this.dataSourceNameContainer.append(r);u=ej.buildTag("input.e-textbox e-designer-content-label e-google-drive-dataSource-name-textbox","",{},{id:this.id+"_googledrive_datasource_dsname",type:"text",spellcheck:"false"});this.dataSourceNameContainer.append(u);this.sitesListContainer=ej.buildTag("div.e-drive-file-picker-field-container","",{},{id:this.id+"_googledrive_sites_list_container"});f=ej.buildTag("label.editLabel e-designer-title-label e-google-drive-sites-list-name-label",n.selectSiteText,{},{id:this.id+"_googledrive_selectSite_drp_label"});t=ej.buildTag("input","",{},{id:this.id+"_filedrive_site_name",value:"",spellcheck:"false"});this.sitesListContainer.append(f);this.sitesListContainer.append(t);t.ejDropDownList({dataSource:[],width:"455px",fields:{text:"displayName",value:"id"},placeHolder:"Select a site",cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control e-google-drive-sites-list-dropdown",showRoundedCorner:!0});this.containerdiv.append(this.dataSourceNameContainer).append(this.backContainer).append(this.fileContainerdiv);this.containerdiv.append(this.sitesListContainer).append(this.backContainer).append(this.fileContainerdiv);this.divFilePickerDialog.append(this.containerdiv);$(this.dashboardDesigner.element).append(this.divFilePickerDialog);this.filePickerDialog=this.divFilePickerDialog.ejDialog({minHeight:500,minWidth:600,height:"auto",width:600,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-file-picker-container",beforeClose:$.proxy(this.resetFilePickerDialog,this),close:$.proxy(ej.DashboardUtil.closeDialog,this),containment:"#"+this.id});this.scrollerObj=this.fileContainerdiv.ejScroller({height:"408px",scrollerSize:14,autoHide:!0,enableTouchScroll:!0,buttonSize:14,scroll:$.proxy(this.resetScroller,this)}).data("ejScroller");this.loaderInstance=this.divFilePickerDialog.ejWaitingPopup({showOnInit:!1,showImage:!0,cssClass:"e-designer-waitingpopup e-designer-loader e-file-waiting-popup"}).data("ejWaitingPopup");this.renderFooterModule()},n.prototype.renderFooterModule=function(){var n=this.dashboardDesigner.element.find("#"+this.id+"_file_picker_dialog_foot"),r=ej.buildTag("button.e-dbrd-hand-cursor","Cancel",{float:"right","margin-left":"12px"},{id:n.attr("id")+"_file_picker_btn_cancel",tabindex:4}),t=ej.buildTag("button.e-dbrd-hand-cursor","Open",{float:"right","margin-left":"5px"},{id:n.attr("id")+"_file_picker_btn_select",tabindex:3}),i;n.append(r,t);i=this.dashboardDesigner.locale.driveFilePicker;this.selectBtnTag=t.ejButton({text:i.selectButtonText,width:"60px",height:"23px",size:"mini",cssClass:"e-designer-okbtn",enabled:!1,showRoundedCorner:!1,click:$.proxy(this.downloadFile,this)});r.ejButton({text:i.cancelButtonText,width:"60px",height:"23px",cssClass:"e-designer-cancelbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeDialog,this,!0)});t.css("opacity","0.3");ej.DashboardUtil.buttonEnable(this.selectBtnTag,!1)},n.prototype.setTitleContent=function(n){var t=ej.buildTag("span",n.name,{},{id:this.divFilePickerDialog.attr("id")+"_title_header","class":"e-drive-title"}),i=ej.buildTag("span","",{},{id:this.divFilePickerDialog.attr("id")+"_title_header_icon","class":"e-drive-icon "+n.cssClass});this.dashboardDesigner.element.find("#"+this.divFilePickerDialog.attr("id")+"_title").prepend(i,t)},n.prototype.resetScroller=function(n){var i=n.scrollTop,u=this.fileSubContainerdiv.attr("id")+"_"+this.folderUniqueId,r=this.dashboardDesigner.element.find("#"+u),t=r.attr("nextpagetoken");this.scrollerObj!==null&&i!==undefined&&$("#"+this.fileSubContainerdiv.attr("id"))[0].scrollHeight-i<=this.scrollerObj.option("height")+30&&t!==""&&this.scrolled===!1&&r.find("div").length>0&&(this.scrolled=!0,this.folderName===this.dashboardDesigner.locale.driveFilePicker.backContainerText?this.getAllFiles(this.serviceId,this.oAuthProvider,this.oAuthService,null,t):this.getFilesInSelectedFolder(this.folderName,this.folderId,null,t))},n.prototype.getAllFiles=function(n,t,i,r,u){this.oAuthProvider=t;this.serviceId=n;this.oAuthService=i;var f=this.dashboardDesigner.locale.driveFilePicker.backContainerText;String(OAuthProvider[t]).toLowerCase()==="box"&&(f=this.dashboardDesigner.locale.boxFilePicker.backContainerText);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/list-drive-files/",{action:"",data:JSON.stringify({serviceId:n,folderId:r,provider:t,pageToken:u,service:i,siteId:this.getSiteId()})},{fnction:$.proxy(this.bindingAction,this,f,r,u),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!1,!0)},n.prototype.getAllSites=function(n,t,i,r,u){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/list-sites/",{action:"",data:JSON.stringify({serviceId:n,provider:t,service:i})},{fnction:$.proxy(this.updateSitesListDropDown,this,n,t,i,r,u),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!1,!0)},n.prototype.updateSitesListDropDown=function(n,t,i,r,u,f){for(var s,e=JSON.parse(f.Data),o=0;o<e.value.length;o++)e.value[o].displayName=e.value[o].displayName+" ["+e.value[o].webUrl+"]";s=this.sitesListContainer.find("#"+this.id+"_filedrive_site_name").data("ejDropDownList");s.setModel({dataSource:e.value,change:$.proxy(this.onChangeSitesDropDown,this,n,t,i)});r?s.selectItemByValue(u.SiteId):e.value.length>0&&s.option({selectedIndex:0})},n.prototype.onChangeSitesDropDown=function(n,t,i){this.folderNames=[];this.fileSubContainerdiv!=null&&this.fileSubContainerdiv.html("");this.getAllFiles(n,t,i,null,null)},n.prototype.getSiteId=function(){var n=this.sitesListContainer.find("#"+this.id+"_filedrive_site_name").data("ejDropDownList");return n.getSelectedValue()},n.prototype.bindingAction=function(n,t,i,r){var u,s,l,f,e,c;if(this.scrolled=!1,this.fileSubContainerdiv===null&&(this.fileSubContainerdiv=ej.buildTag("div","",{},{id:this.fileContainerdiv.attr("id")+"_file_sub_container","class":"e-dbrd-designer-file-picker-sub-container"})),u=null,this.folderName=n,this.folderId=t,i===null?(s=this.getRandomId(),u=this.subContainerdiv=ej.buildTag("div","",{},{id:this.fileSubContainerdiv.attr("id")+"_"+s,"class":"e-dbrd-designer-file-picker-file-sub-container",fileId:t,uniqueId:s}),this.folderUniqueId=s,this.folderNames.push({folderName:n,uniqueId:s}),this.getOptions()):(l=this.fileSubContainerdiv.attr("id")+"_"+this.folderUniqueId,u=this.dashboardDesigner.element.find("#"+l)),r&&r.Status){if(f=JSON.parse(r.Data),f.files.length!==0)for(e=0;e<f.files.length;e++){var h=Math.random().toString(36).substring(7),a=f.files[e].name,v=f.files[e].fileExtension,o=ej.buildTag("div.e-reportdesigner-file","",{},{id:h,type:v,title:a}),y=ej.buildTag("span.e-designer-tile ","",{},{id:this.subContainerdiv.attr("id")+"img_"+e}),p=void 0;p=this.oAuthService==="sharepoint"||this.oAuthService==="onedrive"||this.oAuthService==="box"?ej.buildTag("div."+f.files[e].iconLink,"",{},{id:this.subContainerdiv.attr("id")+"img_"+h}):ej.buildTag("div","",{"background-image":"url("+f.files[e].iconLink+")"},{id:this.subContainerdiv.attr("id")+"img_"+h});y.append(p);o.append(y);c=ej.buildTag("span","",{},{"class":"e-designer-tile-content e-text"});c.text(f.files[e].name);o.append(c);o.on("click",$.proxy(this.highlightSelectedItem,this,h));o.on("click",$.proxy(this.getFilesInSelectedFolder,this,a,f.files[e].id,v,null));i===null?(u.append(o),this.fileSubContainerdiv.append(u)):u.append(o)}else this.bindingEmptyFolder(u);this.fileContainerdiv.append(this.fileSubContainerdiv);$("."+u.attr("class")).css("display","none");u.attr("nextpagetoken","");u.css("display","inline-block");u.attr("nextpagetoken",f.nextPageToken);this.fileContainerdiv.hasClass("e-dbrd-designer-file-picker-file-container-border")&&this.fileContainerdiv.removeClass("e-dbrd-designer-file-picker-file-container-border");this.fileContainerdiv.addClass("e-dbrd-designer-file-picker-file-container-border");$("#"+this.containerdiv.attr("id")+"_refresh_panel").length<=0&&this.renderRefreshSettings();this.refreshDropdown(this.isEdit);this.refreshScroller()}},n.prototype.bindingEmptyFolder=function(n){var t=ej.buildTag("div.e-folder-empty","",{},{id:this.subContainerdiv.attr("id")+"_folder_empty"});t.html(this.dashboardDesigner.locale.driveFilePicker.folderEmptyText);n.append(t);this.fileSubContainerdiv.append(n)},n.prototype.getOptions=function(){var n=ej.buildTag("div","",{},{id:this.backContainer.attr("id")+"_options","class":"e-back-arrow"});n.ejBreadcrumb({dataSource:this.getFolders(this.folderNames,this.backContainer.attr("id")),width:String(this.divFilePickerDialog.width()),selected:$.proxy(this.renderFolderList,this)});this.backContainer.html("");this.backContainer.append(n);n.find("div:first").addClass("e-dashboardviewer e-options")},n.prototype.getRandomId=function(){return Math.random().toString(36).substring(7)},n.prototype.getFolders=function(n,t){for(var r=[],u=n.length,i=0;i<u;i++)r.push({uniqueId:n[i].uniqueId,id:t+"_backarrow_"+n[i].uniqueId,displayText:n[i].folderName});return r},n.prototype.refreshScroller=function(){this.scrollerObj.setModel({height:this.dashboardDesigner.element.find("#"+this.fileContainerdiv.attr("id")).height()+"px",width:this.dashboardDesigner.element.find("#"+this.fileContainerdiv.attr("id")).width()+"px",scrollTop:0});this.scrollerObj.refresh(!0)},n.prototype.renderRefreshSettings=function(){var n=this.refreshContainer=ej.buildTag("div","",{},{id:this.containerdiv.attr("id")+"_refresh_panel","class":"e-refresh-panel"}),u=ej.buildTag("span","Refresh Settings",{},{id:this.containerdiv.attr("id")+"_refresh_panel_label","class":"e-refresh-panel-label"}),r,t,i;n.append(u);r=this.getRefreshSettingsJson();t=this.containerdiv.attr("id")+"_refresh_settings";this.datasource.renderDropDownItem("Refresh Settings",t,n,r,this.field,"0");this.refreshInterval=n.find("#"+t);i=this.refreshInterval.data("ejDropDownList");ej.isNullOrUndefined(i)||this.isEdit||i.selectItemByValue("Never");this.containerdiv.append(n);n.find("#"+t+"_tr").addClass("e-brd-refresh-css");n.find(".e-designer-content-label").addClass("e-content-label");$("#"+t+"_popup_wrapper").find("div.e-designer-content-label").addClass("e-content-label")},n.prototype.refreshDropdown=function(n){var t=this.refreshInterval.data("ejDropDownList");ej.isNullOrUndefined(t)||(n?t.selectItemByValue(this.editDSInfo.RefreshInterval):t.selectItemByValue("Never"))},n.prototype.renderCSVSeparator=function(){var n=this.separatorContainer=ej.buildTag("div","",{},{id:this.containerdiv.attr("id")+"_separator_panel","class":"e-separator-panel"}),t,i;this.separatorJson=[{id:"comma",text:"Comma",value:"comma"},{id:"space",text:"Space",value:"space"},{id:"tab",text:"Tab",value:"tab"},{id:"semicolon",text:"Semicolon",value:"semicolon"}];t=this.containerdiv.attr("id")+"_csv_seperator_type";this.datasource.renderDropDownItem("Separator",t,n,this.separatorJson,this.field,"0");this.separator=n.find("#"+t);i=this.separator.data("ejDropDownList");ej.isNullOrUndefined(i)||i.selectItemByValue("Comma");n.find(".e-designer-content-label").addClass("e-content-label");n.find("tbody  > tr").addClass("dropdown-float");this.csvChkBox=n.find(".e-checkbox").data("ejCheckBox");this.csvChkBox.option("checked",this.datasource.isCsvFirstRowHeader);this.containerdiv.append(n)},n.prototype.highlightSelectedItem=function(n){this.fileSubContainerdiv.find("#"+n).removeClass("unhighlight-item");this.fileSubContainerdiv.find("#"+n).removeClass("highlight-item");$("div.e-reportdesigner-file").removeClass("highlight-selected-item");this.fileSubContainerdiv.find("#"+n).addClass("highlight-selected-item")},n.prototype.renderFolderList=function(n){var f,u,t,e,i,r;for(this.subContainerdiv.find(".e-reportdesigner-file").removeClass("highlight-selected-item"),ej.DashboardUtil.buttonEnable(this.selectBtnTag,!1),f=this.backContainer.find("#"+n.tabId).html(),this.folderName=f,u=n.tabId.split("_"),t=u[u.length-1],this.folderUniqueId=t,e=this.subContainerdiv.attr("class"),this.fileContainerdiv.find("."+e).css("display","none"),$("#"+this.fileSubContainerdiv.attr("id")+"_"+t).css("display","inline-block"),this.folderId=$("#"+this.fileSubContainerdiv.attr("id")+"_"+t).attr("fileId"),i=this.getIndex(t),r=i+1;r<this.folderNames.length;r++)$("#"+this.fileSubContainerdiv.attr("id")+"_"+this.folderNames[r].uniqueId).remove();this.folderNames.splice(i+1,this.folderNames.length-i+1);this.getOptions();this.displaySeparatorPanel()},n.prototype.getIndex=function(n){for(var i=0,t=0;t<this.folderNames.length;t++)if(this.folderNames[t].uniqueId===n){i=t;break}return i},n.prototype.displaySeparatorPanel=function(){this.separatorContainer!==null&&(this.separator.data("ejDropDownList").selectItemByValue("comma"),this.separatorContainer.css("display","none"))},n.prototype.getFilesInSelectedFolder=function(n,t,i,r){this.displaySeparatorPanel();ej.DashboardUtil.buttonEnable(this.selectBtnTag,!1);i===null||i===""||i===undefined?(this.separatorContainer!=null&&this.separatorContainer.css("display","none"),ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/list-drive-files/",{action:"",data:JSON.stringify({serviceId:this.serviceId,folderId:t,provider:this.oAuthProvider,pageToken:r,service:this.oAuthService,siteId:this.getSiteId()})},{fnction:$.proxy(this.bindingAction,this,n,t,r),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!1,!0)):(this.fileId=t,this.fileName=n,this.fileType=i,i==="csv"&&(this.separatorContainer!==null?this.separatorContainer.css("display","inline-block"):this.renderCSVSeparator()),ej.DashboardUtil.buttonEnable(this.selectBtnTag,!0))},n.prototype.downloadFile=function(){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/drive-file/",{action:"",data:JSON.stringify({serviceId:this.serviceId,fileId:this.fileId,provider:this.oAuthProvider,pageToken:null,service:this.oAuthService,siteId:this.getSiteId()})},{fnction:$.proxy(this.createDatasource,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!1,!0)},n.prototype.showLoadingIndicator=function(){this.loaderInstance.show()},n.prototype.hideLoadingIndicator=function(){this.loaderInstance.hide()},n.prototype.closeDialog=function(){this.resetFilePickerDialog();this.divFilePickerDialog.data("ejDialog").close()},n.prototype.resetFilePickerDialog=function(){this.folderNames=[];this.fileSubContainerdiv!==null&&this.fileSubContainerdiv.html("");this.dashboardDesigner.element.find(".e-drive-title").remove();this.dashboardDesigner.element.find(".e-drive-icon").remove();this.fileContainerdiv.removeClass("e-dbrd-designer-file-picker-file-container-border");ej.DashboardUtil.buttonEnable(this.selectBtnTag,!1);this.backContainer.html("");this.fileContainerdiv.html("");this.refreshInterval!==null&&this.refreshInterval.data("ejDropDownList").selectItemByValue("Never");this.displaySeparatorPanel();ej.isNullOrUndefined(this.loaderInstance)||this.loaderInstance.hide();this.separatorContainer!=null&&this.separatorContainer.css("display","none")},n.prototype.setDataSourceName=function(n){var t=this.dataSourceNameContainer.find("#"+this.id+"_googledrive_datasource_dsname");n?t.val(n.Name):t.val(this.datasource.getAvailableName())},n.prototype.createDatasource=function(n){var t=null,i=this.currentFolder;t=this.createDSInfo(n);this.dsInfo=t;this.isEdit?(this.dsInfo.Name=this.editDSInfo.Name,this.dsInfo.Id=this.editDSInfo.Id):(this.dsInfo.Name=this.dataSourceNameContainer.find("#"+this.id+"_googledrive_datasource_dsname").val(),this.dsInfo.Id=ej.getGuid("Datasource_"),this.dsInfo.OriginalFileName=i);this.connectDatasource()},n.prototype.createDSInfo=function(n){var t=this.getFileFormat(this.fileType),i=this.getOauthData(this.oAuthService),r=this.dashboardDesigner.locale.driveFilePicker.methodType,u=this.refreshInterval.data("ejDropDownList").getSelectedValue();return{Name:this.fileName,FileName:this.fileName.split(".")[0],Provider:"WEB",IsCSVFirstRowHeader:ej.isNullOrUndefined(this.csvChkBox)?!1:this.csvChkBox.model.checked,SeparatorType:ej.isNullOrUndefined(this.separator)?"Comma":this.separator.data("ejDropDownList").getSelectedValue(),ProviderType:this.oAuthProvider,IsJQL:!1,MethodType:r,Headers:[],RefreshInterval:u,DataFormat:t,SecurityType:"oauth",OAuthConnection:i,BodyType:"Parameters",RawData:null,Pages:"1",Rows:100,WebUrl:n.Data,SiteId:this.getSiteId()}},n.prototype.getFileFormat=function(n){return WebDataFormat[n]},n.prototype.getOauthData=function(n){for(var i=null,t=0;t<this.helpLinks.length;t++)this.helpLinks[t].service===n&&(i={Provider:this.helpLinks[t].provider,Service:this.helpLinks[t].service,ServiceId:this.serviceId});return i},n.prototype.connectDatasource=function(){var n=ej.DashboardDesignerUtility.DesignerHub.DesignerHub;n.GetStatusFromServer("GetStatusFromServer",{indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)],fnction:$.proxy(this.intermediateDbActionResponse,this,this.isEdit)});n.StartHubConnection({indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)],fnction:$.proxy(this.fetchSchema,this)})},n.prototype.validateConnection=function(n){var u=this.dashboardDesigner.locale.alertDialogTitle.dataSource,f=this.dashboardDesigner.locale.errorMessage.failedToConnectDataSource,t,i,r;n==="true"?(t=this.constructCon(),ej.isNullOrUndefined(this.dashboardDesigner.model.mode)||this.dashboardDesigner.model.mode!==ej.dashboardDesigner.mode.connection?this.connectDataSource(t):(i=ejQueryDesigner.createDataSet(),i.Name=t.Name,i.Id=t.Id,ej.isNullOrUndefined(this.dashboardDesigner.model.serviceAuthorizationToken)||this.dashboardDesigner.model.serviceAuthorizationToken===""||(r=new ej.DashboardDesignerUtility.DatasourceSaveDialog(t,i,$.proxy(this.onActionSuccess,this)),r.trySavingDataSource($.proxy(this.dashboardDesigner.showWaitingPopupConnectionMode,this.dashboardDesigner,!1),$.proxy(this.dashboardDesigner.hideWaitingPopupConnectionMode,this.dashboardDesigner,!1))))):ej.DashboardUtil.getInstance().alertDialog(u,f,IconType.information,AlertType.Alert,!1,n,{});this.ajaxPost.abort();this.ajaxPost=null},n.prototype.onActionSuccess=function(n){if(n){var t={element:null,data:n},i={mode:ej.dashboardDesigner.mode.connection,event:"createConnection",source:t};this.dashboardDesigner._trigger("actionComplete",{eventType:DashboardDesignerEvent.SaveConnection,data:i})}},n.prototype.constructCon=function(){var n=ej.DashboardUtil.createDataSource(),t;return n.Name=this.dsInfo.Name,n.Id=this.dsInfo.Id,n.ServerName=this.dsInfo.ServerName,n.SiteId=this.dsInfo.SiteId,this.dsInfo.Provider!=="shared"?(t=ejDashboardDesigner.getInstance("WebDatasource"),t.UpdateDSInfo(n,this.dsInfo),this.credential[n.Name]={UserName:this.dsInfo.Username,PassWord:this.dsInfo.Password}):(n.ConnectionProperties=null,n.DataSourceReference=this.dsInfo.ConnectionString),n},n.prototype.fetchSchema=function(){var n=ej.DashboardDesignerUtility.DesignerHub.DesignerHub,t=n.connectionId;this.ajaxPost=ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/validateconnection/",{action:ej.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.testConnection,datasource:this.dsInfo,clientid:t})},{})},n.prototype.intermediateDbActionResponse=function(n,t){if(t)if(t.Data.IgnoreSchemaFetch)this.validateConnection("true");else{var i=new ej.DashboardDesignerUtility.TableSelector(this.dsInfo,n);i.showDialog(JSON.parse(t.Data));i.setDriveFile(i)}},n.prototype.connectDataSource=function(n){this.newQueryDesigner(n.Id,n)},n.prototype.newQueryDesigner=function(n,t){var i=ejDashboardDesigner.getInstance("DataSet");i.datasourceSelection(n,t);this.closeDialog()},n.prototype.getRefreshSettingsJson=function(){var t=ejDashboardDesigner.getInstance("DashboardDesigner").previewFeaturesJson,n=ej.DashboardUtil.getInstance().GetPreviewFeatureValue(t,PreviewFeatureName.RefreshSettings);return ej.isNullOrUndefined(n)?[{id:"never",text:"Never",value:"Never"},{id:"1hours",text:"1 Hour",value:"OneHours"},{id:"6hours",text:"6 Hours",value:"SixHours"},{id:"12hours",text:"12 Hours",value:"TwelveHours"},{id:"24hours",text:"24 Hours",value:"TwentyFourHours"},{id:"1week",text:"1 Week",value:"OneWeek"},{id:"1month",text:"1 Month",value:"OneMonth"}]:n},n}();window.ej.createObject("ej.DashboardDesignerUtility.FilePickerDialog",InternalDriveFilePickerDialog,window);InternalEditorManager=function(){function n(n){this.rangeExtractor=null;this.actionList=null;this.tempCollection=null;this.textRange=null;this.targetWindow=null;this.next=null;this.end=null;this.current=null;this.targetWindow=n;this.rangeExtractor=new ej.DashboardDesignerUtility.RangeExtractor;this.updateData();this.actionList=["fontname","forecolor","backgroundcolor","fontsize","fontstyle","fontweight","textdecoration"]}return n.prototype.updateData=function(){var n=Array();n.push({Key:"fontname",Value:{tag:null,css:"font-family",result:"span",removeCSS:{"font-family":""},attr:"e-textrun-fontfamily",styleParent:"span"}});n.push({Key:"forecolor",Value:{tag:null,css:"color",result:"span",removeCSS:{color:""},attr:"e-textrun-fontcolor",styleParent:"span"}});n.push({Key:"backgroundcolor",Value:{tag:null,css:"background-color",result:"span",removeCSS:{"background-color":""},attr:"e-textrun-backgroundcolor",styleParent:"span"}});n.push({Key:"fontsize",Value:{tag:null,css:"font-size",result:"span",removeCSS:{"font-size":""},attr:"e-textrun-fontsize",styleParent:"span"}});n.push({Key:"fontstyle",Value:{tag:null,css:"font-style",result:"span",removeCSS:{"font-style":""},attr:"e-textrun-fontstyle",styleParent:"span"}});n.push({Key:"fontweight",Value:{tag:null,css:"font-weight",result:"span",removeCSS:{"font-weight":""},attr:"e-textrun-fontweight",styleParent:"span"}});n.push({Key:"textdecoration",Value:{tag:null,css:"text-decoration",result:"span",removeCSS:{"text-decoration":""},attr:"e-textrun-textdecoration",styleParent:"span"}});n.push({Key:"format",Value:{tag:null,data:"format",result:"span",removeAttr:{format:null},styleParent:"span"}});n.push({Key:"link",Value:{tag:null,data:"link",result:"span",removeAttr:{link:null},styleParent:"span"}});this.tempCollection=n},n.prototype.execCommand=function(n,t,i){this.textRange=i;switch(n){case ExecCommand.Fontname:this.cssFormatProcess("fontname",t);break;case ExecCommand.Forecolor:this.cssFormatProcess("forecolor",t);break;case ExecCommand.Backgroundcolor:this.cssFormatProcess("backgroundcolor",t);break;case ExecCommand.Fontsize:this.cssFormatProcess("fontsize",t);break;case ExecCommand.Fontstyle:this.cssFormatProcess("fontstyle",t);break;case ExecCommand.Fontweight:this.cssFormatProcess("fontweight",t);break;case ExecCommand.Textdecoration:this.cssFormatProcess("textdecoration",t);break;case ExecCommand.TextAlign:this.setTextAlign(t);break;case ExecCommand.Padding:this.setPadding(t);break;case ExecCommand.TextFormat:this.cssFormatProcess("format",t);break;case ExecCommand.TextLink:this.cssFormatProcess("link",t)}},n.prototype.cssFormatProcess=function(n,t){var u=this.rangeExtractor.getNodeCollection(this.textRange),s=null,h=null,f={Info:null,status:null},i=null,r,o,e,c;if(!this.validateSelectedNode(u)){for(r=0;r<u.length;r++){if(o=u[r],f=this.validateFormat(o,n),f.status)for(e=0;e<f.Info.length;e++)(c=f.Info[e].node,this.validateStyleData(c,this.getFormatData(n).Value.css,t))||(i=this.removeFormat(f,n,e));i=n.toLowerCase()==="format"||n.toLowerCase()==="link"?this.applyTextFormat(o,n,t):this.applyFormat(o,n,t);i&&(u.length===1?(s=i,h=i):r===0?s=i:h=r===u.length-1?i:null)}this.refreshRange(s,h);this.focus()}},n.prototype.setPadding=function(n){this.onApplyParagraphValue(n.side,n.value)},n.prototype.setTextAlign=function(n){this.onApplyParagraphValue("text-align",n)},n.prototype.onApplyParagraphValue=function(n,t){for(var u=this.getExactSelectedNode(this.textRange),r=this.getSelectedParent(u),i=0;i<r.length;i++)r[i].css(n,t);this.refreshRange(this.textRange.startContainer,this.textRange.endContainer);this.focus()},n.prototype.focus=function(){var n=this;setTimeout(function(){n.targetWindow.focus()},100)},n.prototype.removeFormat=function(n,t,i){var r=this.getFormatedTagOrder(n.Info,i),f=r[0].currentNode.slice(r[0].currentNode.length-1),o=document.createElement("span"),e,u;return r[0].currentNode=r[0].currentNode.slice(0,r[0].currentNode.length-1),e=this.splitNode(f[0]),e.rightSide.length>0&&$($(r[0].node.cloneNode(!1)).append(e.rightSide)).insertAfter(r[0].node),u=null,r[0].tag?(this.rangeExtractor.cursorBasedCollection&&!r[0].textNode.data.trim().length?$(o).append(f).insertAfter($(r[0].node)):$(f).insertAfter(r[0].node),u=r[0].textNode,this.rangeExtractor.cursorBasedCollection&&this.setCursorOnNode(u,r[0].textNode)):(u=$(r[0].node.cloneNode(!1)),u.css(this.getFormatData(t).Value.removeCSS),!this.rangeExtractor.validateTextNode(u[0])&&u[0].getAttribute("style")?$(u.append(f)).insertAfter(r[0].node):$(f).insertAfter(r[0].node),u=f),r[0].currentNode.length>0&&this.formateChildNodes(r[0].currentNode,t,r[0].node),e.leftSide.length<1&&$(r[0].node).remove(),u[0]?u[0]:u},n.prototype.formateChildNodes=function(n,t,i){for(var r={rightSide:[],leftSide:[]},f,u=n.length-1;u>=0;u--)r=this.splitNode(n[u]),r.rightSide.length>0&&$($(i.cloneNode(!1)).append(r.rightSide)).insertAfter(n[u]),f=i,r.leftSide.length&&$($(i.cloneNode(!1)).append(r.leftSide.reverse())).insertBefore(n[u])},n.prototype.refreshRange=function(n,t){var i=null,r=null,u;this.rangeExtractor&&(i=this.rangeExtractor.cursorData.node,r=this.rangeExtractor.cursorData.offSet);this.rangeExtractor.cursorBasedCollection&&i&&r>-1?(r=this.rangeExtractor.validateTextNode(i)?r>i.data.length?i.data.length:r:0,this.rangeExtractor.validateTextNode(i)&&!i.data.trim()&&(i.data=String.fromCharCode(65279)+i.data,r++),this.updateCursor(i,r)):n&&t&&(n.data&&!n.data.trim()&&n.data.indexOf(String.fromCharCode(65279))===-1&&(n.data=String.fromCharCode(65279)+n.data),t.data&&!t.data.trim()&&t.data.indexOf(String.fromCharCode(65279))===-1&&(t.data=String.fromCharCode(65279)),u=window.getSelection?window.getSelection():document.getSelection(),u.removeAllRanges(),this.textRange.setStart(n,0),this.textRange.setEnd(t,t.data?t.data.length:0),u.addRange(this.textRange))},n.prototype.updateCursor=function(n,t){var i=window.getSelection?window.getSelection():document.getSelection();this.textRange.setStart(n,t);this.textRange.setEnd(n,t);i.removeAllRanges();i.addRange(this.textRange)},n.prototype.generateRange=function(n){var t=n.commonAncestorContainer;this.next=n.startContainer===t&&!this.isTextNode(n.startContainer)?n.startContainer.childNodes[n.startOffset]:this.getStartEndElement(n.startContainer,t);this.end=n.endContainer===t&&!this.isTextNode(n.endContainer)?n.endContainer.childNodes[n.endOffset]:$(this.getStartEndElement(n.endContainer,t)).hasClass("e-label-element")?null:this.getStartEndElement(n.endContainer,t).nextSibling},n.prototype.setCursorOnNode=function(n,t){this.rangeExtractor.cursorData.node===n&&(this.rangeExtractor.cursorData.node=t)},n.prototype.traverse=function(n){function u(){return t.next!==(t.isTextNode(t.textRange.endContainer)?t.textRange.endContainer.parentNode.nextSibling:t.textRange.endContainer.nextElementSibling)&&t.textRange.endContainer.parentNode.nextSibling!==t.next?(t.current=t.next,t.next=t.current&&t.current.nextSibling!==t.targetWindow.find("span#endRange")[0]&&t.current.nextSibling!==(ej.isNullOrUndefined(t.end)?t.textRange.endContainer.nextSibling:t.end)?t.current.nextSibling:null,t.current):null}for(var t=this,r,i;r=u();)if(t.hasSubNodes())t.getSubtree(t.textRange),t.traverse(n);else{if(i=r,!$(t.textRange.startContainer).hasClass("e-label-element")&&t.next===null&&i!==t.textRange.endContainer)while(ej.isNullOrUndefined(t.next)&&!ej.isNullOrUndefined(i))i=i.parentNode,ej.isNullOrUndefined(i)||t.current.nextSibling===t.targetWindow.find("span#endRange")[0]||(t.next=i.nextSibling);n(r)}return r},n.prototype.getSelectedParent=function(n){for(var i,r=[],t=0;t<n.length;t++)i=n[t].closest("p"),ej.isNullOrUndefined(i)||r.push(i);return r},n.prototype.applyFormat=function(n,t,i){var r=this.splitNode(n),o=n,f=this.getFormatData(t).Value,s=i?f.css+":"+i+";":f.css,u,e;return r.leftSide.length>0&&!this.rangeExtractor.validateTextNode(r.leftSide[0])&&(this.tagCheck(r.leftSide[0],t)||this.compareCss(r.leftSide[0],s))?$(r.leftSide[0]).append(n):r.rightSide.length>0&&!this.rangeExtractor.validateTextNode(r.rightSide[0])&&(this.tagCheck(r.rightSide[0],t)||this.compareCss(r.rightSide[0],s))?$(r.rightSide[0]).prepend(n):r.leftSide.length<1&&r.rightSide.length<1&&$(n.parentNode).is(f.styleParent)?i?$(n.parentNode).css(f.css,i):$(n.parentNode).css(this.collectStyleData(f.css)):(u=document.createElement(f.result),this.rangeExtractor.cursorBasedCollection?(e=document.createElement("span"),this.rangeExtractor.validateTextNode(n)?(!$(u).is("span")&&this.rangeExtractor.noContent?$(e).append(u):e=u,u.appendChild(o=document.createTextNode(n.data)),this.rangeExtractor.cursorBasedCollection&&this.setCursorOnNode(n,o),$(n).replaceWith(e)):(u.innerHTML="&#65279;",$(e).append(u),n.firstChild&&$(n.firstChild).is("br")?$(e).insertBefore(n.firstChild):$(n).append(e),this.rangeExtractor.cursorBasedCollection&&this.setCursorOnNode(n,u.firstChild),o=u)):(u.appendChild(o=document.createTextNode(n.data)),$(n).replaceWith(u)),i&&$(u).css(f.css,i)),o},n.prototype.applyTextFormat=function(n,t,i){var r=this.splitNode(n),u,e=n,f=document.createElement("span");return r.leftSide.length&&r.leftSide[0].nodeType!==3&&(this.tagCheck(r.leftSide[0],t)||this.compareTypeValue(t,r.leftSide[0],i?this.getFormatData(t).Value.data+":"+i+";":this.getFormatData(t).Value.data))?$(r.leftSide[0]).append(n):r.rightSide.length&&!this.rangeExtractor.validateTextNode(r.rightSide[0])&&(this.tagCheck(r.rightSide[0],t)||this.compareTypeValue(t,r.rightSide[0],i?this.getFormatData(t).Value.data+":"+i+";":this.getFormatData(t).Value.data))?$(r.rightSide[0]).prepend(n):r.leftSide.length||r.rightSide.length||!$(n.parentNode).is(this.getFormatData(t).Value.styleParent)?(u=document.createElement(this.getFormatData(t).Value.result),this.rangeExtractor.cursorBasedCollection?this.rangeExtractor.validateTextNode(n)?(!$(u).is("span")&&this.rangeExtractor.noContent?$(f).append(u):f=u,u.appendChild(e=document.createTextNode(n.data)),this.rangeExtractor.cursorBasedCollection&&this.setCursorOnNode(n,e),$(n).replaceWith(f)):(u.innerHTML="&#65279;",$(f).append(u),n.firstChild&&$(n.firstChild).is("br")?$(f).insertBefore(n.firstChild):$(n).append(f),this.rangeExtractor.cursorBasedCollection&&this.setCursorOnNode(n,u.firstChild),e=u):(u.appendChild(e=document.createTextNode(n.data)),$(n).replaceWith(u)),i&&$(u).data(this.getFormatData(t).Value.data,i)):$(n.parentNode).data(this.getFormatData(t).Value.data,i),e},n.prototype.isTextNode=function(n){return n&&n.nodeValue!==null&&n.data!==null},n.prototype.isAncestor=function(n,t){try{return!this.isTextNode(t)&&($.contains(t,this.isTextNode(n)?n.parentNode:n)||n.parentNode===t)}catch(i){return!1}},n.prototype.isAncestorItself=function(n,t){return this.isAncestor(t,n)||n===t},n.prototype.tagCheck=function(n,t){var i=this.getFormatData(t).Value;return i.tag?$(n).is(i.tag):!1},n.prototype.styleCheck=function(n,t){var r=this.getFormatData(t).Value,i,u;return r.css&&!this.rangeExtractor.validateTextNode(n)&&!$(n).is("p")&&$(n).is("span")&&n.getAttribute("style")?(i=!0,u=r.css.split(";"),$(u).each(function(t,r){r&&n.getAttribute("style").replace(/\s/g,"").indexOf(r)===-1&&(i=!1)}),i):!1},n.prototype.validateCommentNode=function(n){return n.nodeType!==8},n.prototype.validateSelectedNode=function(n){return!n.length||n.length===1&&n[0].data&&!n[0].data.length},n.prototype.validateFormat=function(n,t){var i=[],r={Info:null,status:!1};return t=t.toLowerCase(),$.inArray(t,this.actionList)!==-1&&(i=this.validateFormatData(n,t),i&&i.length>0&&(r.Info=i),r.status=i.length>0),r},n.prototype.validateFormatData=function(n,t){var f=[],i=n.parentNode,e=n,r=!1,u=!1;if(i)do r=this.tagCheck(i,t),u=this.styleCheck(i,t),(r||u)&&f.push({textNode:n,node:i,css:u,tag:r});while(!$(i).hasClass("e-label-element")&&(e=i)&&(i=i.parentNode));return f},n.prototype.validateStyleData=function(n,t,i){var r=null,u=!1;return this.rangeExtractor.validateTextNode(n)||(r=n.getAttribute("style").split(";")),$(r).each(function(n,r){var f=r.split(":");return f[0].toLowerCase().trim()===t.toLowerCase().trim()&&f[1].toLowerCase().trim()===i.toLowerCase().trim()?(u=!0,!1):!1}),u},n.prototype.getFormatedTagOrder=function(n,t){return n[t].currentNode=this.getNodeOrder(n[t].textNode,n[t].node),t>0?n:n.slice(t,t+1)},n.prototype.getNodeOrder=function(n,t){var i=n,r=[];do r.push(i);while((i=i.parentNode)&&i!==t);return r},n.prototype.hasSubNodes=function(){return!this.isTextNode(this.current)&&(this.isAncestorItself(this.current,this.textRange.startContainer)||this.isAncestorItself(this.current,this.textRange.endContainer))},n.prototype.getFormatData=function(n){for(var t=0;t<this.tempCollection.length;t++)if(this.tempCollection[t].Key===n)return this.tempCollection[t];return null},n.prototype.compareCss=function(n,t){if(!this.rangeExtractor.validateTextNode(n)){var i=n.getAttribute("style"),r=!ej.isNullOrUndefined(i)&&i.toLowerCase().trim().replace(this.rangeExtractor.expression,""),u=t.toLowerCase().trim().replace(this.rangeExtractor.expression,"");return i&&r===u}return!1},n.prototype.compareTypeValue=function(n,t,i){return n.toLowerCase()==="format"?$(t).data("format")===i:n.toLowerCase()==="link"?$(t).data("link")===i:!1},n.prototype.collectStyleData=function(n){var i=n.replace(this.rangeExtractor.expression,"").split(";"),r={},t;return $(i).each(function(n){var u=i[n];t=u.split(":");t.length>1&&(r[t[0].toLowerCase().trim()]=t[1].toLowerCase().trim())}),r},n.prototype.getStartEndElement=function(n,t){if(this.isAncestor(n,t))while(n&&n.parentNode!==t)n=n.parentNode;return n},n.prototype.getSubtree=function(){var n=this.textRange.cloneRange();return n.selectNodeContents(this.current),this.isAncestorItself(this.current,this.textRange.startContainer)&&n.setStart(this.textRange.startContainer,this.textRange.startOffset),this.isAncestorItself(this.current,this.textRange.endContainer)&&n.setEnd(this.textRange.endContainer,this.textRange.endOffset),this.generateRange(n)},n.prototype.splitNode=function(n){for(var t=n,i={rightSide:[],leftSide:[]};t=t.nextSibling;)this.validateCommentNode(t)&&i.rightSide.push(t);for(t=n;t=t.previousSibling;)this.validateCommentNode(t)&&i.leftSide.push(t);return i},n.prototype.getExactSelectedNode=function(n){function u(n){if(n.nodeType===3&&($.trim(n.nodeValue)!==""||n.nodeValue==="﻿"||$.trim(n.nodeValue)===""&&n.nextSibling===f[0]))t.push($(n));else if(n.nodeValue&&n.nodeName!=="#comment"&&n.nodeValue.trim()===""&&r.textRange.endContainer.parentNode.nextSibling!==r.next)$.inArray(n.previousElementSibling,i)<0&&i.push(n.previousElementSibling);else if((n.nodeName.toLowerCase()==="br"||!$(n).hasClass("e-label-element"))&&$.inArray(n.parentNode,t)<0&&n.nodeName.toLowerCase()!=="div"&&!ej.isNullOrUndefined(t[t.length-1])&&t[t.length-1].parentNode!==n.parentNode&&n.previousSibling&&n.previousSibling.parentNode!==n.parentNode)t.push($(n.parentNode));else if(ej.isNullOrUndefined(n.firstChild))t.push($(n));else for(n=n.firstChild;n;)u(n),n=n.nextSibling}var t=[],i=[],f=this.targetWindow.find("span#startRange"),r=this;return this.generateRange(n),this.traverse(u),t},n}();window.ej.createObject("ej.DashboardDesignerUtility.EditorManager",InternalEditorManager,window);InternalRangeExtractor=function(){function n(){this.expression=null;this.findStatus=null;this.iterationStatus=!1;this.cursorData=null;this.textNodeCollection=[];this.traverseData=null;this.noContent=!1;this.cursorBasedCollection=!1;this.expression=/\s/g;this.findStatus={leftSide:null,rightSide:null};this.cursorData={node:null,offSet:null};this.traverseData={leftSide:{childNode:"lastChild",sibling:"previousSibling"},rightSide:{childNode:"firstChild",sibling:"nextSibling"}};this.iterationStatus=!1}return n.prototype.getNodeCollection=function(n){return n&&(this.textNodeCollection=[],this.noContent=!1,this.iterationStatus=!1,this.cursorData={node:null,offSet:null},n.startContainer===n.endContainer&&n.startOffset===n.endOffset?(this.collectCursorBasedTextNode(n.startContainer,n.startOffset),this.cursorBasedCollection=!0):(this.collectSelectionBasedTextNode(n),this.cursorBasedCollection=!1)),this.textNodeCollection},n.prototype.insertCursor=function(n,t){var r=n.data.substring(0,t),u=n.data.substr(t),i,f,e;r.replace(String.fromCharCode(65279),"")&&(f=this.createParentNode(r,$(n).closest("span")),f.insertBefore(n.parentNode));u.replace(String.fromCharCode(65279),"")&&(e=this.createParentNode(u,$(n).closest("span")),e.insertAfter(n.parentNode));$(n).replaceWith(i=document.createTextNode(""));this.cursorData={node:i,offSet:0};this.textNodeCollection.push(i);this.noContent=!0},n.prototype.collectCursorBasedTextNode=function(n,t){for(var f,i,r,u,c=new RegExp(this.expression),s,h,e,o;f=c.exec(n.data);)n.data.substring(f.index,f.index+1).indexOf(" ")!==-1&&(f.index<t&&(r=f),!u&&t<=f.index&&(u=f));r&&u?t-(r.index+1)==0||t-(r.index+1)===n.data.substring(r.index+1,u.index).replace("\n","").length?this.insertCursor(n,t):(s=n.data.substring(0,r.index+1),h=n.data.substring(u.index),$(document.createTextNode(s)).insertBefore(n),$(document.createTextNode(h)).insertAfter(n),i=document.createTextNode(n.data.substring(r.index+1,u.index)),$(n).replaceWith(i),this.cursorData={node:i,offSet:t-(r.index+1)},this.textNodeCollection.push(i)):r?(e=void 0,this.collectNodeData(n,!1),e=this.textNodeCollection,this.textNodeCollection=[],e.length===0&&(t-(r.index+1)==0||t-(r.index+1)===n.data.substring(r.index+1).replace("\n","").length)?this.insertCursor(n,t):(s=n.data.substring(0,r.index+1),$(document.createTextNode(s)).insertBefore(n),i=document.createTextNode(n.data.substring(r.index+1)),$(n).replaceWith(i),this.cursorData={node:i,offSet:t-(r.index+1)},this.textNodeCollection.push(i),this.textNodeCollection.concat(e))):u?(o=void 0,this.collectNodeData(n,!0),o=this.textNodeCollection,this.textNodeCollection=[],o.length===0&&(t===0||t===n.data.substring(0,u.index).replace("\n","").length)?this.insertCursor(n,t):(h=n.data.substring(u.index),$(document.createTextNode(h)).insertAfter(n),$(n).replaceWith(i=document.createTextNode(n.data.substring(0,u.index))),this.cursorData={node:i,offSet:t},this.textNodeCollection=o.reverse(),this.textNodeCollection.push(i))):this.validateTextNode(n)?(this.collectNodeData(i=n,!1),e=this.textNodeCollection,this.textNodeCollection=[],this.collectNodeData(i,!0),o=this.textNodeCollection,this.textNodeCollection=[],i.data===String.fromCharCode(65279)||o.length===0&&t===0||e.length===0&&i.data?this.insertCursor(n,t):(this.textNodeCollection=o.reverse(),this.textNodeCollection.push(i),this.textNodeCollection=this.textNodeCollection.concat(e),this.cursorData={node:i,offSet:t})):(i=document.createTextNode(""),n.firstChild?$(i).insertBefore(n.firstChild):$(i).appendTo(n),this.textNodeCollection.push(i),this.cursorData={node:i,offSet:t},this.noContent=!0)},n.prototype.validateContent=function(n,t){for(var e=new RegExp(this.expression),i,r=[],u,f;i=e.exec(n.data);)r.push(i);r.length?(i=r[t==="leftSide"?r.length-1:0],f=t==="leftSide"?i.index+1:i.index,$(u=document.createTextNode(n.data.substring(f))).insertAfter(n),n.data=n.data.substring(0,f),t==="rightSide"&&$.trim(n.data)?this.textNodeCollection.push(n):t==="leftSide"&&$.trim(u.data)&&this.textNodeCollection.push(u),this.findStatus[t]=!0):this.textNodeCollection.push(n)},n.prototype.iterateNodes=function(n,t){if(!this.findStatus[t])if(this.validateTextNode(n)&&n.data)this.validateContent(n,t);else if((n=n[this.traverseData[t].childNode])&&!this.findStatus[t])do this.validateTextNode(n)&&n.data?this.validateContent(n,t):this.iterateNodes(n,t);while((n=n[this.traverseData[t].sibling])&&!this.findStatus[t])},n.prototype.collectNodeData=function(n,t){this.findStatus={leftSide:null,rightSide:null};var r={leftSide:[],rightSide:[]},u=this,i=t?"leftSide":"rightSide";do r=this.getSiblingNode(n),$(r[i]).each(function(n,t){u.iterateNodes(t,i)});while(!$(n.parentNode).hasClass("e-label-element")&&(n=n.parentNode)&&!this.findStatus[i])},n.prototype.collectSelectionBasedTextNode=function(n){var t,i,o,r,u,s,f=n.startContainer,e=n.endContainer,h;this.textNodeCollection=[];n.startContainer===n.endContainer?this.validateTextNode(n.endContainer)?(n.startOffset&&(t=n.startContainer.data.substr(0,n.startOffset)),n.startContainer.data.length!==n.endOffset&&(i=n.startContainer.data.substr(n.endOffset)),o=n.startContainer.data.substr(n.startOffset,n.endOffset-n.startOffset),t&&(r=this.createParentNode(t,$(n.startContainer).closest("span")),r.insertBefore(n.startContainer.parentNode)),i&&(u=this.createParentNode(i,$(n.endContainer).closest("span")),u.insertAfter(n.startContainer.parentNode)),o&&(s=document.createTextNode(o),$(n.startContainer).replaceWith(s)&&this.textNodeCollection.push(s))):n.startContainer.nodeName.toLowerCase()==="div"?this.updateNodeCollection($(n.startContainer)[0],f,null):this.updateNodeCollection(n.startContainer,f,null):(h=n.commonAncestorContainer,this.validateTextNode(n.startContainer)&&n.startOffset&&(t=n.startContainer.data.substr(0,n.startOffset),i=n.startContainer.data.substr(n.startOffset),t&&(r=this.createParentNode(t,$(n.startContainer).closest("span")),r.insertBefore(n.startContainer.parentNode)),i&&(u=this.createParentNode(i,$(n.startContainer).closest("span")),$(f.parentNode).replaceWith(f=u))),this.validateTextNode(n.endContainer)&&n.endContainer.data&&n.endContainer.data.length!==n.endOffset?(i=n.endContainer.data.substr(n.endOffset),t=n.endContainer.data.substr(0,n.endOffset),i&&(u=this.createParentNode(i,$(n.endContainer).closest("span")),u.insertAfter(n.endContainer.parentNode)),t&&(r=this.createParentNode(t,$(n.endContainer).closest("span")),$(e.parentNode).replaceWith(e=r))):n.endOffset&&n.endContainer.lastChild&&(e=n.endContainer.lastChild),this.updateNodeCollection(h,f,e))},n.prototype.createParentNode=function(n,t){var i=$(document.createElement("span"));return i.text(n),t.length>0&&i.css("cssText",t[0].style.cssText),i},n.prototype.updateNodeCollection=function(n,t,i){if(this.updateIterationStatus(n,t,i),n=n.firstChild)do this.updateNodeCollection(n,t,i);while(n=n.nextSibling)},n.prototype.updateIterationStatus=function(n,t,i){n!==t||this.iterationStatus||(this.iterationStatus=!0);this.validateTextNode(n)&&this.iterationStatus&&this.textNodeCollection.push(n);n===i&&this.iterationStatus&&(this.iterationStatus=!1)},n.prototype.validateTextNode=function(n){return n.nodeType===3},n.prototype.getSiblingNode=function(n){for(var t=n,i={leftSide:[],rightSide:[]};t=t.nextSibling;)(!t.tagName||$(t).hasClass("e-label-element"))&&i.rightSide.push(t);for(t=n;t=t.previousSibling;)(!t.tagName||$(t).hasClass("e-label-element"))&&i.leftSide.push(t);return i},n}();window.ej.createObject("ej.DashboardDesignerUtility.RangeExtractor",InternalRangeExtractor,window),function(n){n[n.Fontname=0]="Fontname";n[n.Fontsize=1]="Fontsize";n[n.Forecolor=2]="Forecolor";n[n.Backgroundcolor=3]="Backgroundcolor";n[n.Fontstyle=4]="Fontstyle";n[n.Fontweight=5]="Fontweight";n[n.Textdecoration=6]="Textdecoration";n[n.TextAlign=7]="TextAlign";n[n.Padding=8]="Padding";n[n.TextFormat=9]="TextFormat";n[n.TextLink=10]="TextLink"}(ExecCommand||(ExecCommand={}));InternalExpressionParsor=function(){function n(){this.revfnctions={};this.expErrors=[];this.expErrors=[]}return n.prototype.parseExpression=function(n){var i,t;for(this.expression=n,this.provider="SQL",this.expErrors=[],this.parseDateExp(),this.parseNumExp(),this.parseStrExp(),this.parseCondExp(),i=Object.keys(this.revfnctions),t=i.length-1;t>=0;t--)this.revfnctions[i[t]]&&(this.expression=this.expression.split(i[t]).join(this.revfnctions[i[t]]));return this.expression},n.prototype.parseErrors=function(n,t){return this.parseExpression(n,t),this.expErrors},n.prototype.parseNumExp=function(){ej.DashboardUtil.contains(this.expression,"abs(",!0)&&(this.expression=this.parseNumberExp(this.expression,"abs("));ej.DashboardUtil.contains(this.expression,"acos(",!0)&&(this.expression=this.parseNumberExp(this.expression,"acos("));ej.DashboardUtil.contains(this.expression,"asin(",!0)&&(this.expression=this.parseNumberExp(this.expression,"asin("));ej.DashboardUtil.contains(this.expression,"atan(",!0)&&(this.expression=this.parseNumberExp(this.expression,"atan("));ej.DashboardUtil.contains(this.expression,"cos(",!0)&&(this.expression=this.parseNumberExp(this.expression,"cos("));ej.DashboardUtil.contains(this.expression,"degrees(",!0)&&(this.expression=this.parseNumberExp(this.expression,"degrees("));ej.DashboardUtil.contains(this.expression,"exp(",!0)&&(this.expression=this.parseNumberExp(this.expression,"exp("));ej.DashboardUtil.contains(this.expression,"log(",!0)&&(this.expression=this.parseNumberExp(this.expression,"log("));ej.DashboardUtil.contains(this.expression,"pi(",!0)&&(this.expression=this.parseNumberExp(this.expression,"pi("));ej.DashboardUtil.contains(this.expression,"power(",!0)&&(this.expression=this.parseNumberExp(this.expression,"power("));ej.DashboardUtil.contains(this.expression,"radians(",!0)&&(this.expression=this.parseNumberExp(this.expression,"radians("));ej.DashboardUtil.contains(this.expression,"round(",!0)&&(this.expression=this.parseNumberExp(this.expression,"round("));ej.DashboardUtil.contains(this.expression,"sign(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sign("));ej.DashboardUtil.contains(this.expression,"sin(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sin("));ej.DashboardUtil.contains(this.expression,"sqrt(",!0)&&(this.expression=this.parseNumberExp(this.expression,"sqrt("));ej.DashboardUtil.contains(this.expression,"tan(",!0)&&(this.expression=this.parseNumberExp(this.expression,"tan("))},n.prototype.parseNumberExp=function(n,t){var f=this.getExpCode(),e=this.trimEnd(t,"("),r=0,i=n,h;this.revfnctions[f]=this.updateNumberFunc(e).toUpperCase();do if(r=i.toLowerCase().lastIndexOf(t),r!==-1){var u=r+t.length,o=this.getFunctionEndIndex(u,i),c=this.getParameters(i,u,o-u-1),l=i.substr(0,r)+f+"(",s="";this.provider==="SQL"&&(s=this.getSQLNumberExp(e,c));h=")"+i.substr(o);i=l+s+h}while(r!==-1);return i},n.prototype.updateNumberFunc=function(n){return n},n.prototype.getSQLNumberExp=function(n,t){var i="";switch(n){case"pi":ej.isNullOrUndefined(t)?i=i:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"abs":case"acos":case"asin":case"atan":case"cos":case"degrees":case"exp":case"log":case"radians":case"sign":case"sin":case"sqrt":case"tan":t&&t.length===1?i+=t[0]:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"power":t&&t.length===2?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"round":t&&t.length===1?(i+=t[0],this.provider==="SQL"&&(i+=",0")):t&&(t.length===1||t.length===2)?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression")}return i},n.prototype.parseDateExp=function(){this.provider==="SQL"&&(ej.DashboardUtil.contains(this.expression,"dateadd(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"dateadd(")),ej.DashboardUtil.contains(this.expression,"datesub(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datesub(")),ej.DashboardUtil.contains(this.expression,"datename(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datename(")),ej.DashboardUtil.contains(this.expression,"datepart(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"datepart(")),ej.DashboardUtil.contains(this.expression,"daydiff(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"daydiff(")),ej.DashboardUtil.contains(this.expression,"today(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"today(")),ej.DashboardUtil.contains(this.expression,"day(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"day(")),ej.DashboardUtil.contains(this.expression,"hour(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"hour(")),ej.DashboardUtil.contains(this.expression,"minute(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"minute(")),ej.DashboardUtil.contains(this.expression,"month(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"month(")),ej.DashboardUtil.contains(this.expression,"now(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"now(")),ej.DashboardUtil.contains(this.expression,"year(",!0)&&(this.expression=this.parseSQLDateExp(this.expression,"year(")))},n.prototype.parseSQLDateExp=function(n,t){var f=this.getExpCode(),u=this.trimEnd(t,"("),r=0,i=n;this.revfnctions[f]=this.updateDateFunc(u).toUpperCase();do if(r=i.toLowerCase().lastIndexOf(t),r!==-1){var e=r+t.length,o=this.getFunctionEndIndex(e,i),s=this.getParameters(i,e,o-e-1),h=u==="today"?i.substr(0,r)+f:i.substr(0,r)+f+"(",c=this.getSQLDateExp(u,s),l=u==="today"?i.substr(o):")"+i.substr(o);i=h+c+l}while(r!==-1);return i},n.prototype.updateDateFunc=function(n){var t;switch(n){case"dateadd":case"datesub":t="dateadd";break;case"daydiff":t="datediff";break;case"now":t="getdate";break;case"week":case"hour":case"minute":case"datepart":t="datepart";break;case"day":case"month":case"year":case"datename":t=n;break;case"today":t="CAST(GETDATE() AS DATE)"}return t},n.prototype.getSQLDateExp=function(n,t){var i="";switch(n){case"dateadd":t&&t.length===1?i+="D, 0,"+t[0]:t&&t.length===2?i+="D,"+t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"datesub":t&&t.length===1?i+="D, 0,"+t[0]:t&&t.length===2?i+="D, -"+t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"daydiff":t&&t.length===2?i+="D,"+t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"week":case"hour":case"minute":t&&t.length===1?i+=n.toUpperCase()+","+t[0]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"datename":case"datepart":t&&t.length===1&&(i+="D,"+t[0]);t&&t.length===2?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in"+n+"Expression");break;case"day":case"month":case"year":t&&t.length===1?i+=t[0]:this.expErrors.push("Invalid Arguments in"+n+"Expression")}return i},n.prototype.parseCondExp=function(){this.provider==="SQL"&&(ej.DashboardUtil.contains(this.expression,"ifnull(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"ifnull(")),ej.DashboardUtil.contains(this.expression,"if(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"if(")),ej.DashboardUtil.contains(this.expression,"isnull(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"isnull(")),ej.DashboardUtil.contains(this.expression,"isnotnull(",!0)&&(this.expression=this.parseSQLCondExp(this.expression,"isnotnull(")))},n.prototype.parseSQLCondExp=function(n,t){var f=this.trimEnd(t,"("),r=0,i=n;if(f==="ifnull")i=this.parseSQLIFNullExp(n,t);else do if(r=i.toLowerCase().lastIndexOf(t),r!==-1){var e=this.getExpCode(),u=r+t.length,o=this.getFunctionEndIndex(u,i),s=this.getParameters(i,u,o-u-1),h=i.substr(0,r)+e,c=i.substr(o);this.revfnctions[e]=this.getSQLCondExp(f,s);i=h+c}while(r!==-1);return i},n.prototype.parseSQLIFNullExp=function(n,t){var f=this.getExpCode(),o=this.trimEnd(t,"("),r=0,i=n;this.revfnctions[f]="ISNULL";do if(r=i.toLowerCase().lastIndexOf(t),r!==-1){var u=r+t.length,e=this.getFunctionEndIndex(u,i),s=this.getParameters(i,u,e-u-1),h=i.substr(0,r)+f+"(",c=this.getSQLCondExp(o,s),l=")"+i.substr(e);i=h+c+l}while(r!==-1);return i},n.prototype.getSQLCondExp=function(n,t){var i="";switch(n){case"if":t&&t.length===3?i+=" CASE WHEN "+t[0]+" THEN "+t[1]+" ELSE "+t[2]+" END ":this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"ifnull":t&&t.length===2?i+=t[0]+","+t[1]:this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"isnull":t&&t.length===1?i+=" CASE WHEN "+t[0]+" IS NULL THEN 'true' ELSE 'false' END ":this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"isnotnull":t&&t.length===1?i+=" CASE WHEN "+t[0]+" IS NULL THEN 'false' ELSE 'true' END ":this.expErrors.push("Invalid Arguments in "+n+" Expression")}return i},n.prototype.parseStrExp=function(){ej.DashboardUtil.contains(this.expression,"char(",!0)&&(this.expression=this.parseStringExp(this.expression,"char("));ej.DashboardUtil.contains(this.expression,"concat(",!0)&&(this.expression=this.parseStringExp(this.expression,"concat("));ej.DashboardUtil.contains(this.expression,"contains(",!0)&&(this.expression=this.parseStringExp(this.expression,"contains("));ej.DashboardUtil.contains(this.expression,"endswith(",!0)&&(this.expression=this.parseStringExp(this.expression,"endswith("));ej.DashboardUtil.contains(this.expression,"left(",!0)&&(this.expression=this.parseStringExp(this.expression,"left("));ej.DashboardUtil.contains(this.expression,"len(",!0)&&(this.expression=this.parseStringExp(this.expression,"len("));ej.DashboardUtil.contains(this.expression,"lower(",!0)&&(this.expression=this.parseStringExp(this.expression,"lower("));ej.DashboardUtil.contains(this.expression,"ltrim(",!0)&&(this.expression=this.parseStringExp(this.expression,"ltrim("));ej.DashboardUtil.contains(this.expression,"max(",!0)&&(this.expression=this.parseStringExp(this.expression,"max("));ej.DashboardUtil.contains(this.expression,"min(",!0)&&(this.expression=this.parseStringExp(this.expression,"min("));ej.DashboardUtil.contains(this.expression,"right(",!0)&&(this.expression=this.parseStringExp(this.expression,"right("));ej.DashboardUtil.contains(this.expression,"rtrim(",!0)&&(this.expression=this.parseStringExp(this.expression,"rtrim("));ej.DashboardUtil.contains(this.expression,"startswith(",!0)&&(this.expression=this.parseStringExp(this.expression,"startswith("));ej.DashboardUtil.contains(this.expression,"substr(",!0)&&(this.expression=this.parseStringExp(this.expression,"substr("))},n.prototype.parseStringExp=function(n,t){var c=this.getExpCode(),i=this.trimEnd(t,"("),u=0,r=n,e=!0,s,f,h;this.revfnctions[c]=this.updateStringFunc(i).toUpperCase();do if(u=r.toLowerCase().lastIndexOf(t),u!==-1){var o=u+t.length,l=this.getFunctionEndIndex(o,r),a=this.getParameters(r,o,l-o-1);(i==="max"||i==="min"||i==="startswith"||i==="endswith"||i==="contains")&&(e=!1);s=r.substr(0,u)+(e?c+"(":"");f="";this.provider==="SQL"&&(f=this.getSQLStringExp(i,a));h=(e?")":"")+r.substr(l);r=i==="max"||i==="min"?s+"("+f+")"+h:s+f+h}while(u!==-1);return r},n.prototype.updateStringFunc=function(n){var t;switch(n){case"contains":case"endswith":case"startswith":case"max":case"min":t="";break;case"substr":t="substring";break;default:t=n}return t},n.prototype.getSQLStringExp=function(n,t){var i="",u,r,f;switch(n){case"char":case"len":case"lower":case"ltrim":case"rtrim":case"upper":case"max":case"min":t&&t.length===1?i+=t[0].trim():this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"left":case"right":t&&t.length===2?i+=t[0].trim()+","+t[1].trim():this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"concat":if(u=!0,t&&t.length>1)for(r=0;r<t.length;r++)r===t.length-1&&(u=!1),i+=u?t[r].trim()+",":t[r].trim();else this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"contains":case"endswith":case"startswith":t&&t.length===2?(f=this.customizeSingleQuoteValues(n,t[1]),i+="CASE WHEN "+t[0]+" LIKE "+f+" THEN 'true' ELSE 'false' END"):this.expErrors.push("Invalid Arguments in "+n+" Expression");break;case"substr":t&&t.length===3?i+=t[0].trim()+","+t[1].trim()+","+t[2].trim():this.expErrors.push("Invalid Arguments in "+n+" Expression")}return i},n.prototype.customizeSingleQuoteValues=function(n,t){var i=t,r="",u=null,f;if(i=i.trim(),ej.DashboardUtil.contains(i,"'",!0))for(f=0;f<i.length;f++)i[f]!=="'"&&(r+=i[f]);if(r.length>0)switch(n){case"contains":u="'%"+r+"%'";break;case"startswith":u="'"+r+"%'";break;case"endswith":u="'%"+r+"'"}else u=i;return u},n.prototype.getParameters=function(n,t,i){var u=n.substr(t,i);if(u.length===0)return null;for(var o=0,f=!1,r=0,e=0,s=[];r<u.length;r++)f||u[r]!==")"||o--,f||u[r]!=="("||o++,u[r]==="'"&&(r===0||u[r-1]!=="\\")&&(f=!f),f||o!==0||u[r]!==","||(s.push(u.substr(e,r-e)),e=r+1);return s.push(u.substr(e,r-e)),s},n.prototype.getFunctionEndIndex=function(n,t){for(var i=n,u=1,r=!1;u>0;){if(i>=t.length)throw"Invalid Expression";r||t[i]!==")"||u--;r||t[i]!=="("||u++;t[i]==='"'&&(i===0||t[i-1]!=="\\")&&(r=!r);i++}return i},n.prototype.getExpCode=function(){for(var n="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",i=0;i<5;i++)n+=t.charAt(Math.floor(Math.random()*t.length));return"@"+n+"@"},n.prototype.trimEnd=function(n,t){var i=n.lastIndexOf(t);return i===-1?n:n.trim().slice(0,i)},n}();window.ej.createObject("ej.DashboardDesignerUtility.ExpressionParsor",InternalExpressionParsor,window);InternalFileDatasource=function(){function n(){this.connectionType="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.dashboardDesigner._id}return Object.defineProperty(n,"FileDatasource",{get:function(){return(this.fileDatasource===null||this.fileDatasource===undefined)&&(this.fileDatasource=new ej.DashboardDesignerUtility.FileDatasource),this.fileDatasource},enumerable:!0,configurable:!0}),Object.defineProperty(n,"FileReconnectDataSource",{get:function(){return(this.fileReconnectDataSource===null||this.fileReconnectDataSource===undefined)&&(this.fileReconnectDataSource=new ej.DashboardDesignerUtility.FileDatasource),this.fileReconnectDataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n,t){this.connectionType=t;n.find("#"+this.id+this.connectionType+"_file_datasource").length>0?this.resetConfiguration():(this.fileConfig=ej.buildTag("div","",{width:"100%",height:"100%",display:"table-row"},{id:this.id+this.connectionType+"_file_datasource"}),n.append(this.fileConfig),this.renderFileDatasourcePanel(),this.renderUploadBox(),this.separatorTypeEle.find("table").css("border-spacing","0px"),this.separatorTypeEle.hide(),this.csvHeaderChkbox.hide());this.showConfiguration(!0)},n.prototype.renderFileDatasourcePanel=function(){var f=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+this.connectionType+"_file_local_table"}),e=ej.buildTag("tr","",{}),o=ej.buildTag("td","",{}),n=ej.buildTag("table","",{unselectable:"on"}),t=ej.buildTag("tr","",{},{}),i=ej.buildTag("tr","",{},{}),s=ej.buildTag("td","",{}),w=ej.buildTag("label.editLabel e-designer-title-label","File Path",{}),p;this.progressTxt=ej.buildTag("label.editLabel e-designer-title-label","",{float:"left"});var b=ej.buildTag("label.editLabel e-designer-tile-content","Max file size: 75 MB",{float:"right","font-size":"12px"}),h=ej.buildTag("td","",{},{id:this.id+this.connectionType+"_fileDatasource_path_error_icon_td"}),c=ej.buildTag("td","",{},{colspan:"2"});ej.DashboardUtil.renderErrIndictor(h,this.id);var r=ej.buildTag("tr","",{height:"22.5px"},{id:this.id+this.connectionType+"_fileDatasource_path_td"}),l=ej.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.id+this.connectionType+"_fileDatasource_progresserr_tr"}),a=ej.buildTag("td","",{}),k=ej.buildTag("label.editLabel",this.dashboardDesigner.locale.alertWindowMesages.fileUploadInProgress,{"font-size":"12px","font-weight":"normal"},{}),v=ej.buildTag("td","",{},{colspan:"2"}),y=ej.buildTag("td","",{},{}),d=this.filePath=ej.buildTag("input.e-textbox e-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"427px"},{id:this.id+this.connectionType+"_fileDatasource_path",type:"text",readonly:"readonly"}),u=ej.buildTag("div.e-designer-content-label e-dbrd-hand-cursor","",{display:"inline-block","margin-left":"-32px"},{id:this.id+this.connectionType+"_file_datasource_browse"}),g=ej.buildTag("span.e-reportdesigner-horizontal-browse e-reportdesigner-browse-icon","",{"font-size":"16px","margin-top":"6px"});this.fileConfig.append(f);f.append(e);e.append(o);o.append(n);n.append(t);s.append(w);t.append(s);t.append(h);n.append(r,i.clone(),i);v.append(d);r.append(v);r.append(y);y.append(u);c.append(this.progressTxt,b);i.append(c);a.append(k);l.append(a);u.ejButton({width:"18px",height:"21.5px",showRoundedCorner:!1,click:$.proxy(this.onBrowseClick,this)});u.append(g);this.datasource.renderDropDownItem("Separator",this.id+this.connectionType+"_csv_seperator_type",n,[{id:"comma",text:"Comma",value:"comma"},{id:"space",text:"Space",value:"space"},{id:"tab",text:"Tab",value:"tab"},{id:"semicolon",text:"Semicolon",value:"semicolon"}],{id:"id",text:"text",value:"value"},"0");this.separatorTypeEle=$("#"+this.id+this.connectionType+"_csv_seperator_type_tr");this.csvHeaderChkbox=$("#"+this.id+this.connectionType+"_csv_seperator_type_row_header_tr");p=this.csvHeaderChkbox.find("#"+this.id+this.connectionType+"_csv_seperator_type_row_header").data("ejCheckBox");p.option("checked",this.datasource.isCsvFirstRowHeader);this.separatorTypeObj=$("#"+this.id+this.connectionType+"_csv_seperator_type").data("ejDropDownList");n.append(l)},n.prototype.renderUploadBox=function(){var t=this,i=$("#"+this.id+this.connectionType+"_fileDatasource_upload"),n;i.length>0&&i.remove();n=ej.buildTag("div","",{height:"0px"},{id:this.id+this.connectionType+"_fileDatasource_upload"});this.dashboardDesigner.element.append(n);this.ejUploadBox=n.ejUploadbox({width:"0px",height:"0px",uploadName:"file",extensionsAllow:".xls,.xlsx,.csv,.txt,.json",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.dashboardDesigner.element},fileSize:78643200,saveUrl:this.dashboardDesigner.model.dataServiceUrl+"/upload",fileSelect:$.proxy(this.onfileSelect,this),error:$.proxy(this.onuploadError,this),success:$.proxy(this.onuploadSuccess,this),inProgress:$.proxy(this.fileProgress,this),beforeSend:$.proxy(function(n){ej.DashboardUtil.clientId!==""&&n.xhr.setRequestHeader("ClientID",ej.DashboardUtil.clientId);ej.isNullOrUndefined(t.dashboardDesigner.model.serviceAuthorizationToken)||n.xhr.setRequestHeader("Authorization",t.dashboardDesigner.model.serviceAuthorizationToken)},this)}).data("ejUploadbox");$(this.id+this.connectionType+"_fileDatasource_upload_SelectButton").hide()},n.prototype.onBrowseClick=function(){$("#"+this.id+this.connectionType+"_fileDatasource_upload .e-uploadinput").click()},n.prototype.fileProgress=function(n){this.progressTxt.text("Uploading..."+n.percentage+"%")},n.prototype.onfileSelect=function(n){if(this.resetConfiguration(),n.files.length!==0)if(n.files[0].size>n.model.fileSize)this.datasource.showValidationMsg(this.filePath.attr("id"),!0,"The selected file exceeds the file size limit of "+n.model.fileSize/1048576+" MB"),n.cancel=!0,this.progressTxt.text("");else{if(n.files[0].extension.toLowerCase()===".csv"||n.files[0].extension.toLowerCase()===".txt"){this.separatorTypeEle.show();this.csvHeaderChkbox.show();var t=this.csvHeaderChkbox.find("#"+this.id+this.connectionType+"_csv_seperator_type_row_header").data("ejCheckBox");t.option("checked",!0)}this.progressTxt.text("Initiating upload...");this.fileName=this.fileExt=null;this.filePath.val(n.files[0].name)}ej.browserInfo().name!=="msie"&&this.ejUploadBox._uploadFileListDelete()},n.prototype.onuploadError=function(n){this.progressTxt.text("Upload failed.");this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_fileDatasource_progresserr_tr").css("display","none");this.datasource.showValidationMsg(this.filePath.attr("id"),!0,n.error)},n.prototype.onuploadSuccess=function(n){this.progressTxt.text("Upload Completed");this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_fileDatasource_progresserr_tr").css("display","none");var t=JSON.parse(n.responseText);t&&t.Status?(this.fileExt=t.Data.ext,this.fileName=t.Data.fileId,this.originalFileName=n.files.name):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.upload,this.dashboardDesigner.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},n.prototype.editConfiguration=function(n,t){var i,r;this.hideValidationMsg();this.renderConfiguration(n,"_editConnection");i=ej.isNullOrUndefined(t.ConnectionProperties.OriginalFileName)?ej.isNullOrUndefined(t.OriginalFileName)?t.FileName:t.OriginalFileName:t.ConnectionProperties.OriginalFileName;this.filePath.val(i);(!ej.isNullOrUndefined(t.FileName)&&t.FileName.toLocaleLowerCase().indexOf(".csv")>0||!ej.isNullOrUndefined(t.ConnectionProperties.FileName)&&t.ConnectionProperties.FileName.toLocaleLowerCase().indexOf(".csv")>0)&&(this.separatorTypeEle.show(),this.csvHeaderChkbox.show(),r=this.csvHeaderChkbox.find("#"+this.id+this.connectionType+"_csv_seperator_type_row_header").data("ejCheckBox"),r.option("checked",t.IsCSVFirstRowHeader))},n.prototype.showConfiguration=function(n){this.fileConfig.css("display",n?"table-row":"none");this.fileConfig.children().show()},n.prototype.resetConfiguration=function(){this.hideValidationMsg();this.filePath.val("");this.fileName=null;this.fileExt=null;this.progressTxt.text("");this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_fileDatasource_progresserr_tr").css("display","none");this.separatorTypeEle.hide();this.csvHeaderChkbox.hide()},n.prototype.hideValidationMsg=function(){ej.isNullOrUndefined(this.filePath)||this.datasource.showValidationMsg(this.filePath.attr("id"),!1)},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.ServerName=t.ServerName;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName="";n.ConnectionProperties.PassWord="";n.ConnectionProperties.Prompt="";n.ConnectionProperties.Database=t.Database;n.ConnectionProperties.FileName=t.FileName;n.SecurityType=t.SecurityType;n.Name=t.Name;n.ServerName=t.ServerName;n.FileName=t.FileName;n.OriginalFileName=t.OriginalFileName;n.IsCSVFirstRowHeader=t.IsCSVFirstRowHeader},n.prototype.UpdateDataSourceInfo=function(n,t){this.UpdateDSInfo(n,t)},n.prototype.getDatasourceInfo=function(n){var t=!0,i;return(this.filePath.val().length===0?(this.datasource.showValidationMsg(this.filePath.attr("id"),!0,"Please select a file"),t=!1):ej.isNullOrUndefined(this.fileName)||this.fileName===""?(this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_fileDatasource_progresserr_tr").css("display","block"),t=!1):this.hideValidationMsg(),i=this.csvHeaderChkbox.find("#"+this.id+this.connectionType+"_csv_seperator_type_row_header").data("ejCheckBox"),t)?{Name:n,Provider:"File",FileName:this.fileName,OriginalFileName:this.originalFileName,FileType:this.getFileTypeFromExt(this.fileExt),IsCSVFirstRowHeader:i.model.checked,SeparatorType:ej.isNullOrUndefined(this.separatorTypeObj)?"Comma":this.separatorTypeObj.getSelectedValue(),SecurityType:"None"}:(this.datasource.isCsvFirstRowHeader=i.model.checked,null)},n.prototype.getFileTypeFromExt=function(n){var t="";switch(n.toLowerCase()){case".xls":case".xlsx":t="Excel";break;case".txt":case".csv":t="Csv";break;case".json":t="Json"}return t},n}();window.ej.createObject("ej.DashboardDesignerUtility.FileDatasource",InternalFileDatasource,window);InternalFilterConfiguration=function(){function n(){this.id=null;this.reportItems=[];this.filterContainer=null;this.filterFooterTag=null;this.updateBtnTag=null;this.configChooserTag=null;this.masterFooterTag=null;this.masterElementContainer=null;this.masterScrollElement=null;this.masterUlTag=null;this.listContainer=null;this.masterListContainer=null;this.profileField=null;this.defaultContainer=null;this.customContainer=null;this.listenerField=null;this.listenerElementContainer=null;this.profileAddIcon=null;this.columnConfig=null;this.errorMsg=ejDashboardDesigner.getInstance("DashboardDesigner").locale.masterSlaveWindow.errorMessage;this.selectedMaster=null;this.columnContainer=null;this.filterActionInfo=null;this.isCustomColumnModified=!1;this.isChangedCheckBoxValue=!1;this.editColVal=null;this.selectedProfile=null;this.targetInstance=null;this.targetMethod=null;this.sourceColumnData=[];this.targetSourceData=[];this.targetColumnData=[];this.filterSerializer=null;this.ejFilterDialog=null;this.ejMasterDialog=null;this.ejColumnGridObj=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderFilterConfigWindow();this.filterSerializer=ejDashboardDesigner.getInstance("MasterSlaveFilter")}return Object.defineProperty(n,"FilterConfiguration",{get:function(){return(this.filterConfig===null||this.filterConfig===undefined)&&(this.filterConfig=new ej.DashboardDesignerUtility.FilterConfiguration),this.filterConfig},enumerable:!0,configurable:!0}),n.prototype.renderFilterConfigWindow=function(){var r=this.filterContainer=ej.buildTag("div.e-userselect","",{},{id:this.id+"_filter_configuration"}),v=ej.buildTag("table.e-designer-filter-config-table","",{},{unselectable:"on"}),y=ej.buildTag("tr","",{}),p=ej.buildTag("td.e-filterConfig-separator e-designer-filterConfig-td","",{"font-size":"13px"},{}),w=ej.buildTag("td.e-designer-filterConfig-td","",{"margin-left":"12px"},{}),n,u,lt,c,l,a,at;r.append(v);v.append(y);y.append(p).append(w);n=ej.buildTag("div","",{width:"175px",height:"470px"});u=ej.buildTag("div","",{"margin-left":"8px","margin-right":"8px"});p.append(n);w.append(u);var f=ej.buildTag("div","",{"border-bottom":"0.5px solid #dddddd"}),t=ej.buildTag("div","",{padding:"7px 10px",height:"20px"}),vt=ej.buildTag("span",this.dashboardDesigner.locale.masterSlaveWindow.masterWidgetsLabelText,{}),e=ej.buildTag("span.e-icon e-plus e-designer-filter-addIcon","",{"padding-top":"3px",float:"right"},{id:this.id+"_filter_config_master_addIcon",title:"Add"});e.off("click",$.proxy(this.addMasterItems,this));e.on("click",$.proxy(this.addMasterItems,this));t.append(vt).append(e);f.append(t);var o=this.masterListContainer=ej.buildTag("div.e-lv e-js e-parentlv e-designer-hint-newmaster e-dbrd-designer-scroller e-dbrd-control","",{width:"100%",height:n.height()-f.height(),display:"block","background-color":"#ffffff","border-left":"1px solid #dddddd"},{id:this.id+"_filter_config_listContainer"}),b=ej.buildTag("div","",{},{}),k=this.listContainer=ej.buildTag("div.e-list-container e-js e-widget e-reportdesigner-dataset","",{"border-top-width":"1px",padding:"3px 6px"},{id:this.id+"_filter_config_masterList"}),yt=this.masterUlTag=ej.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"},{id:this.id+"_filter_config_List_ulTag"});k.append(yt);b.append(k);o.append(b);n.append(f).append(o);var d=ej.buildTag("div","",{}),g=ej.buildTag("table","",{}),nt=$("<tr><\/tr>"),tt=$("<td><\/td>"),pt=$("<td style='width:5px;'><\/td>"),it=$("<td><\/td>"),rt=ej.buildTag("div","",{}),ut=ej.buildTag("div","",{"padding-bottom":"10px"}),wt=ej.buildTag("span",this.dashboardDesigner.locale.masterSlaveWindow.filterProfileslabelText,{"padding-left":"2px"},{}),s=this.profileAddIcon=ej.buildTag("span.e-icon e-plus e-designer-filter-addIcon","",{"padding-top":"3px",float:"right","padding-right":"2px"},{id:this.id+"_filter_config_profile_addIcon",title:"Add"}),i=this.profileField=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{border:"1px solid #dddddd","border-radius":"4px",height:"185px",width:"250px","background-color":"#ffffff",position:"relative"}),ft=ej.buildTag("div","",{}),et=ej.buildTag("div","",{id:this.id+"_filter_config_profile_list"}),bt=ej.buildTag("ul.e-list-hdr e-clearall e-filter-profileList","",{width:"auto",height:"auto",padding:"0px",margin:"0px"},{id:this.id+"_filter_config_profile_ulTag"});s.off("click",$.proxy(this.addNewProfile,this));s.on("click",$.proxy(this.addNewProfile,this));et.append(bt);ft.append(et);i.append(ft);ut.append(wt).append(s);rt.append(ut).append(i);tt.append(rt).append(i);var ot=ej.buildTag("div","",{}),st=ej.buildTag("div","",{"padding-bottom":"10px"}),kt=ej.buildTag("span",this.dashboardDesigner.locale.masterSlaveWindow.listenerWidgetsLabelText,{}),h=this.listenerField=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{border:"1px solid #dddddd","border-radius":"4px",height:"185px",width:"250px","background-color":"#ffffff",position:"relative"}),ht=ej.buildTag("div","",{}),ct=this.listenerElementContainer=ej.buildTag("div","",{},{id:this.id+"_filter_config_listener_list"}),dt=ej.buildTag("table.e-designer-listener-table","",{});st.append(kt);ct.append(dt);ht.append(ct);h.append(ht);ot.append(st).append(h);it.append(ot);nt.append(tt).append(pt).append(it);g.append(nt);d.append(g);lt=ej.buildTag("div","",{"border-bottom":"0.5px solid #dddddd","padding-top":"8px"});c=ej.buildTag("div","",{padding:"0px 3px",width:"520px"});this.renderColumnConfig(c);u.append(d).append(lt).append(c);l=this.updateBtnTag=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_filter_config_update_btn"});a=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_filter_config_close_btn"});r.ejDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",enableModal:!0,close:$.proxy(ej.DashboardUtil.closeDialog,this)});a.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-cancelbtn",text:"Close",click:$.proxy(this.closeFilterWindow,this)});l.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-okbtn",text:"Update",click:$.proxy(this.updateFilterConfig,this)});at=t.height()+parseInt(t.css("padding-top"),10)+parseInt(t.css("padding-bottom"),10);this.generateScroller(o,n.height()-at+"px","auto");this.generateScroller(i,"185px","250px");this.generateScroller(h,"185px","250px");this.filterFooterTag=$("#"+this.id+"_filter_configuration_foot");this.filterFooterTag.append(a).append(l);this.ejFilterDialog=r.data("ejDialog");this.renderMasterWindow()},n.prototype.generateScroller=function(n,t,i){n.ejScroller({scrollerSize:9,height:t,width:i,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.renderColumnConfig=function(n){var f=this.configChooserTag=ej.buildTag("div","",{width:"100%",float:"left",clear:"none","box-sizing":"border-box",padding:"8px",display:"inline-block"},{}),i=ej.buildTag("div","",{width:"85px",display:"inline-block"},{}),r=ej.buildTag("div","",{width:"85px",display:"inline-block"},{}),e=ej.buildTag("input","",{},{type:"radio",name:"customchooser",id:this.id+"_filter_config_default"}),l=ej.buildTag("label","Default",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.id+"_filter_config_default",type:"label"}),o=ej.buildTag("input","",{},{type:"radio",name:"customchooser",id:this.id+"_filter_config_custom"}),a=ej.buildTag("label","Custom",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.id+"_filter_config_custom",type:"label"}),t;i.append(e);i.append(l);r.append(o);r.append(a);t=ej.buildTag("span.e-icon e-plus e-designer-filter-addIcon","",{"padding-top":"2px",float:"right","padding-right":"2px"},{id:this.id+"_filter_config_custom_addIcon"});f.append(i).append(r).append(t);t.off("click",$.proxy(this.addCustomColumn,this));t.on("click",$.proxy(this.addCustomColumn,this));e.ejRadioButton({checked:!0,change:$.proxy(this.dataChooser,this),value:"default",text:this.dashboardDesigner.locale.masterSlaveWindow.filterModeDefaultText,cssClass:"e-designer-radiobtn"});o.ejRadioButton({checked:!1,change:$.proxy(this.dataChooser,this),value:"custom",text:this.dashboardDesigner.locale.masterSlaveWindow.filterModeCustomText,cssClass:"e-designer-radiobtn"});var s=this.columnContainer=ej.buildTag("div","",{height:"190px",width:"515px",display:"inline-block","margin-bottom":"5px",border:"1px solid #dddddd","border-radius":"4px","background-color":"#ffffff"},{id:this.id+"_column_config_container"}),h=this.defaultContainer=ej.buildTag("div","",{height:"190px",display:"block","background-color":"#ffffff","border-radius":"4px","border-width":"0px"},{id:this.id+"_default_column_container"}),c=ej.buildTag("div.e-designer-defaultcolumn-grid","",{height:"190px",display:"block","border-width":"0px"},{id:this.id+"_default_column_grid"}),u=this.columnConfig=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{height:"190px",width:"515px",display:"inline-block","border-radius":"4px","background-color":"#ffffff"},{}),v=this.customContainer=ej.buildTag("div.e-designer-custom-column","",{display:"block","background-color":"#ffffff",height:"190px","border-width":"0px"},{id:this.id+"_custom_column_container"});u.append(v);n.append(f);n.append(s);h.append(c);s.append(u).append(h);this.generateScroller(u,"190px","515px");this.customTypeSwitcher(!1);this.createGridDefaultColumn(c)},n.prototype.createGridDefaultColumn=function(n){for(var r=[],t=[{fieldName:"SourceColumn",Name:this.dashboardDesigner.locale.masterSlaveWindow.sourceColumn},{fieldName:"TargetDataSource",Name:this.dashboardDesigner.locale.masterSlaveWindow.targetDataSource},{fieldName:"TargetColumn",Name:this.dashboardDesigner.locale.masterSlaveWindow.targetColumn}],u=515/t.length,i=0;i<t.length;i++)r.push({field:t[i].fieldName,headerText:t[i].Name,width:u,textAlign:ej.TextAlign.Left});n.ejGrid({allowScrolling:!0,columns:r,allowSelection:!1});this.ejColumnGridObj=n.data("ejGrid")},n.prototype.appendMasterList=function(n,t){var u=n.ID,f=n.Name,i=ej.buildTag("li.e-user-select e-list e-state-default e-list-check e-designer-masterwidget-list","",{padding:"0px","list-style":"none","border-radius":"4px",margin:"2px 0px"},{id:this.id+"_li_"+u,name:f,guid:u}),e=ej.buildTag("a.e-chevron-right_01 e-remove-shadow","",{padding:"8px 0px"}),o=ej.buildTag("span.e-list-text e-rel e-designer-content",f,{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","vertical-align":"middle","padding-left":"2px",display:"inline-block","margin-top":"-2px",width:"122px","line-height":"normal","margin-left":"5px"},{name:f}),r;e.append(o);r=ej.buildTag("div.e-widgeticons e-reportdesigner-close","",{float:"right",display:"none",color:"#f45d5d","margin-top":"5px","margin-right":"10px"},{id:this.id+"_"+u,title:"Delete"});e.append(r);i.append(e);r.off("click",$.proxy(this.removeMaster,this,i,n));i.off("click",$.proxy(this.masterSelection,this,n.ID));r.on("click",$.proxy(this.removeMaster,this,i,n));i.on("click",$.proxy(this.masterSelection,this,n.ID));i.bind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.onListItemMouseUp,this));i.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.elementMouseOver,this,r));i.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.elementMouseLeave,this,r));ej.isNullOrUndefined(t)?this.masterUlTag.append(i):t===0?(this.masterUlTag.prepend(i),i.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(i);this.masterListContainer.height()>this.listContainer.height()?this.masterListContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.masterListContainer)},n.prototype.elementMouseOver=function(n){n.css("display","inline-block")},n.prototype.elementMouseLeave=function(n){n.css("display","none")},n.prototype.getSelectedMasterCollection=function(n){for(var r=null,i=this.filterActionInfo.MastersCollection,t=0;t<i.length;t++)i[t].MasterInfo.ID===n&&(r=i[t]);return r},n.prototype.masterSelection=function(n){if(n!==this.selectedMaster.MasterInfo.ID){this.profileAddIcon.attr("disabled")==="disabled"&&this.disableFilterConditionSlaveWidgetArea(!1);this.updateMasterDetails();var t=this.getSelectedMasterCollection(n);ej.isNullOrUndefined(t)||(this.selectedMaster=t,this.selectedMaster.ProfileManager.length>0?(this.selectedProfile=this.selectedMaster.ProfileManager[0],this.disableFilterConditionSlaveWidgetArea(!1),this.populateProfileArea(!0),this.isChangedCheckBoxValue=!1):(this.selectedProfile=null,this.resetColumnConfiguration(),this.resetProfileFields(),this.resetListenerContainer(),this.disableFilterConditionSlaveWidgetArea(!0,!1)))}},n.prototype.getSelectedListener=function(n){for(var i=[],t=0;t<n.length;t++)$("#"+this.id+"_listener_"+n[t].ID).data("ejCheckBox").model.checked&&i.push(n[t]);return i},n.prototype.updateMasterDetails=function(){this.filterActionInfo.MastersCollection.length>0&&!ej.isNullOrUndefined(this.selectedProfile)&&this.UpdateProfileDetails();this.removeEmptyCustomColumn()},n.prototype.removeMaster=function(n,t){var r,i;for(n.remove(),this.scrollerRefresh(this.masterListContainer),this.resetProfileFields(),this.scrollerRefresh(this.profileField),this.resetListenerContainer(),this.scrollerRefresh(this.listenerField),r=this.filterActionInfo.MastersCollection,i=0;i<r.length;i++)r[i].MasterInfo.ID===t.ID&&r.splice(i,1);this.masterUlTag.find("li").length>0?(this.setDefaultSelection(),this.disableFilterConfigArea(!1),this.populateProfileArea(!0),this.masterUlTag.find("li").first().addClass("e-masterwidget-user-selection-active")):(this.resetColumnConfiguration(),this.disableFilterConfigArea(!0))},n.prototype.profileSelection=function(n){var i,t;if(this.profileAddIcon.attr("disabled")!=="disabled"&&(i=n.find("span.e-list-text").attr("name"),!ej.isNullOrUndefined(this.selectedMaster)&&this.selectedMaster.ProfileManager.length>0&&i!==""&&this.selectedProfile.Name!==i))for(this.UpdateProfileDetails(),this.isChangedCheckBoxValue=!1,t=0;t<this.selectedMaster.ProfileManager.length;t++)this.selectedMaster.ProfileManager[t].ProfileInfo.Name===i&&(this.selectedProfile=this.selectedMaster.ProfileManager[t],this.populateProfileArea(!1))},n.prototype.setProfileInfoToSelectedProfileProperty=function(){this.selectedMaster.ProfileManager.length>0?(this.selectedProfile=this.selectedMaster.ProfileManager[0],this.populateProfileArea(!1),this.profileField.find(".e-filter-profileList li").first().addClass("e-masterwidget-user-selection-active")):(this.selectedProfile=null,this.resetListenerContainer(),this.resetColumnConfiguration(),this.listenerField.attr("disabled","true").css({opacity:"0.5","background-color":"#f4f4f4"}),this.configChooserTag.find("#"+this.id+"_filter_config_default").data("ejRadioButton").disable(),this.configChooserTag.find("#"+this.id+"_filter_config_custom").data("ejRadioButton").disable(),this.configChooserTag.css("opacity","0.5"))},n.prototype.onListItemMouseUp=function(n){var t=$(n.target).closest("li");t.hasClass("e-masterwidget-user-selection-active")||(t.parent().children().each(function(){var n=$(this);n.removeClass("e-masterwidget-user-selection-active");n.find("span").removeClass("e-masterwidget-user-selection-active")}),t.addClass("e-masterwidget-user-selection-active"),t.find("span").addClass("e-masterwidget-user-selection-active"))},n.prototype.addNewProfile=function(){this.profileAddIcon.attr("disabled")!=="disabled"&&(this.disableFilterConditionSlaveWidgetArea(!0),this.appendProfileElement(this.selectedMaster.MasterInfo.Name,this.selectedMaster.MasterInfo.ID,"",!1),this.scrollerRefresh(this.profileField))},n.prototype.appendProfileElement=function(n,t,i,r){var f=ej.getGuid(""),h=this.profileField.height()<this.profileField.find("#"+this.id+"_filter_config_profile_list").height(),o=h?140:150,u=ej.buildTag("li.e-user-select e-list e-list-check e-designer-filterProfile-row","",{padding:"5px 8px",margin:"6px","border-radius":"4px","list-style":"none"},{id:this.id+"_li_"+f,name:i}),s=ej.buildTag("a.e-chevron-right_01 e-remove-shadow","",{padding:"3.5px 0"}),c=ej.buildTag("span.e-list-text e-rel e-user-select e-designer-fontfamily"+(ej.DashboardUtil.textWidth(i,"12px segoe ui")>=o?" e-title-tip":""),i,{width:o,"text-overflow":"ellipsis",overflow:"hidden",display:r?"inline-block":"none","white-space":"nowrap","font-size":"12px","margin-left":"1px",cursor:"default"},{name:i,id:this.id+"_txtSpan_"+f}),l=ej.buildTag("input.e-textbox e-edit-profile e-designer-fontfamily","",{width:o-18,height:"16px","line-height":"normal","margin-top":"1px",display:r?"none":"inline-block","border-radius":"2px","font-size":"12px"},{liTag:this.id+"_txtSpan_"+f,type:"text",id:this.id+"_txtEdit_"+f}),e=ej.buildTag("span.e-widgeticons e-reportdesigner-close","",{float:"right",display:"none",color:"#f45d5d","margin-top":"6px","margin-right":"5px"},{id:this.id+"_closeIcon_"+f,title:"Delete"});if(s.append(c).append(l).append(e),u.append(s),this.profileField.find(".e-filter-profileList").append(u),r)this.profileAddIcon.css("opacity")!=="1"&&this.profileAddIcon.removeAttr("disabled").css("opacity","1");else{this.profileAddIcon.attr("disabled","true").css("opacity","0.5");this.onListItemMouseUp({target:u})}u.off("click",$.proxy(this.profileSelection,this,u,t));e.off("click",$.proxy(this.removeProfile,this,u));u.on("click",$.proxy(this.profileSelection,this,u,t));e.on("click",$.proxy(this.removeProfile,this,u));u.bind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.editProfileName,this));u.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.profileMouseOver,this,e));u.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.profileMouseLeave,this,e));u.bind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.onListItemMouseUp,this));u.find(".e-edit-profile").off("blur",$.proxy(this.editColumnBlur,this,t));u.find(".e-edit-profile").off("keypress",$.proxy(this.editColumnKeyPress,this,t));u.find(".e-edit-profile").on("blur",$.proxy(this.editColumnBlur,this,t));u.find(".e-edit-profile").on("keypress",$.proxy(this.editColumnKeyPress,this,t));u.find(".e-edit-profile").focus()},n.prototype.removeProfile=function(n){var i=n.find("span.e-list-text").attr("name"),t;if(!ej.isNullOrUndefined(this.selectedMaster)&&this.selectedMaster.ProfileManager.length>0)if(this.selectedProfile.ProfileInfo.Name===i&&this.profileAddIcon.attr("disabled")!=="disabled")for(t=0;t<this.selectedMaster.ProfileManager.length;t++)this.selectedMaster.ProfileManager[t].ProfileInfo.Name===this.selectedProfile.ProfileInfo.Name&&(this.selectedMaster.ProfileManager.splice(t,1),n.remove(),this.setProfileInfoToSelectedProfileProperty(this.selectedMaster.MasterInfo.ID));else(ej.isNullOrUndefined(i)||i==="")&&(n.remove(),this.disableFilterConditionSlaveWidgetArea(!1),this.UpdateProfileDetails(),this.setProfileInfoToSelectedProfileProperty(this.selectedMaster.MasterInfo.ID));else n.remove(),this.resetListenerContainer(),this.resetColumnConfiguration(),this.listenerField.attr("disabled","true").css({opacity:"0.5","background-color":"#f4f4f4"}),this.configChooserTag.find("#"+this.id+"_filter_config_default").data("ejRadioButton").disable(),this.configChooserTag.find("#"+this.id+"_filter_config_custom").data("ejRadioButton").disable(),this.configChooserTag.css("opacity","0.5"),this.profileAddIcon.css("opacity")!=="1"&&this.profileAddIcon.removeAttr("disabled").css("opacity","1");this.scrollerRefresh(this.profileField)},n.prototype.editProfileName=function(n){var t=$(n.currentTarget).find(".e-edit-profile"),r=t[0],e=this.profileField.find(".e-filter-profileList"),u=e.find(".e-edit-profile:visible").not(t),f=$(n.currentTarget).find(".e-list-text"),i;t.css("display")==="none"&&u.length===0?(i=f.text().trim(),f.css("display","none"),t.css("display","inline-block").val(i).focus(),this.editColVal=i,r.selectionStart=r.selectionEnd=i.length):u.length>0&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,this.dashboardDesigner.locale.masterSlaveWindow.profileNameEditAdd,IconType.warning,AlertType.Alert,!1,"")},n.prototype.profileMouseOver=function(n){n.css("display","inline-block")},n.prototype.profileMouseLeave=function(n){n.css("display","none")},n.prototype.editColumnBlur=function(n,t){var r=$(t.currentTarget),f=r.closest("li"),e=r.attr("liTag"),u=f.find("#"+e),i=r.val().trim(),o=u.attr("name"),s,h;o!==i.trim()?i.trim()===""?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,this.dashboardDesigner.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,""):this.isExistProfileName(i,u)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidFilterProfile,this.dashboardDesigner.locale.masterSlaveWindow.filterKeyExist,IconType.warning,AlertType.Alert,!1,""):(r.css("display","none"),u.css("display","inline-block").text(i.trim()),s=$("#"+f[0].id),h=$("#"+e),s.attr("name",i.trim()),h.attr("name",i.trim()),this.UpdateSelectedProfileDetails(o,i.trim(),n),this.editColVal=null,this.profileAddIcon.css("opacity")!=="1"&&this.profileAddIcon.removeAttr("disabled").css("opacity","1")):ej.isNullOrUndefined(i)||i.trim()===""?i.trim()===""&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,this.dashboardDesigner.locale.masterSlaveWindow.filterKeyEmpty,IconType.warning,AlertType.Alert,!1,""):(r.css("display","none"),u.css("display","inline-block"))},n.prototype.editColumnKeyPress=function(n,t){var s,h;if(t.keyCode===13){var r=$(t.currentTarget),f=r.closest("li"),e=r.attr("liTag"),u=f.find("#"+e),i=r.val().trim(),o=u.attr("name");o!==i.trim()?i.trim()===""?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,this.dashboardDesigner.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,""):this.isExistProfileName(i,u)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,this.dashboardDesigner.locale.masterSlaveWindow.filterKeyExist,IconType.warning,AlertType.Alert,!1,""):(r.css("display","none"),u.css("display","inline-block").text(i.trim()),s=$("#"+f[0].id),h=$("#"+e),s.attr("name",i.trim()),h.attr("name",i.trim()),this.UpdateSelectedProfileDetails(o,i.trim(),n),this.editColVal=null,this.profileAddIcon.css("opacity")!=="1"&&this.profileAddIcon.removeAttr("disabled").css("opacity","1")):ej.isNullOrUndefined(i)||i.trim()===""?i.trim()===""&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,this.dashboardDesigner.locale.masterSlaveWindow.filterKeyEmpty,IconType.errors,AlertType.Alert,!1,""):(r.css("display","none"),u.css("display","inline-block"))}},n.prototype.UpdateProfileDetails=function(){this.selectedMaster.ProfileManager.length>0&&!ej.isNullOrUndefined(this.selectedProfile)&&(this.isCustomColumnModified&&(this.selectedProfile.ProfileInfo.FilterCondition=this.getCustomColumnValues(),this.selectedProfile.ProfileInfo.Option=this.isCustomColumnModified,this.isCustomColumnModified=!1),this.isChangedCheckBoxValue&&(this.selectedProfile.WidgetInfo=this.getSelectedListener(this.selectedProfile.WidgetInfo)))},n.prototype.SetSelectedProfile=function(n,t){var r,i;if(this.selectedMaster.MasterInfo.ID===n)for(r=this.createProfileInfo(),r.Name=t,r.FilterCondition=$.parseJSON(JSON.stringify(this.getDefaultFilterConditions(n))),this.selectedMaster.ProfileManager.push({ProfileInfo:r,WidgetInfo:this.generateWidgetInfo(n)}),i=0;i<this.selectedMaster.ProfileManager.length;i++)this.selectedMaster.ProfileManager[i].ProfileInfo.Name===t&&(this.selectedProfile=this.selectedMaster.ProfileManager[i])},n.prototype.isExistProfileName=function(n){var t;if(!ej.isNullOrUndefined(this.selectedMaster.ProfileManager)&&this.selectedMaster.ProfileManager.length>0)for(t=0;t<this.selectedMaster.ProfileManager.length;t++)if(this.selectedMaster.ProfileManager[t].ProfileInfo.Name===n)return!0;return!1},n.prototype.UpdateSelectedProfileDetails=function(n,t,i){var u=!1,r;if(this.selectedMaster.ProfileManager.length>0)for(r=0;r<this.selectedMaster.ProfileManager.length;r++)this.selectedMaster.ProfileManager[r].ProfileInfo.Name===n&&(this.selectedMaster.ProfileManager[r].ProfileInfo.Name=t,u=!0);else u=!1;u||this.setNewProfile(i,t)},n.prototype.setNewProfile=function(n,t){this.UpdateProfileDetails();this.SetSelectedProfile(n,t);this.disableFilterConditionSlaveWidgetArea(!1);this.populateProfileArea(!1)},n.prototype.populateListenerWidgets=function(n,t){var e,r,i,u,f,o;for(this.resetListenerContainer(),e=this.listenerElementContainer.find(".e-designer-listener-table"),r=this.filterSerializer.getWidgetList(),i=0;i<r.length;i++)u=r[i].ID,u!==t&&this.checkBoxWithElementsCreation(r[i].Name,u,this.id+"_listener_"+u,!0,e,"5px 15px 0px 10px");for(f=0;f<n.length;f++)o=n[f],$("#"+this.id+"_listener_"+o.ID).data("ejCheckBox").setModel({checked:!0});this.scrollerRefresh(this.listenerField)},n.prototype.resetListenerContainer=function(){this.listenerElementContainer.find(".e-designer-listener-table tr").remove()},n.prototype.dataChooser=function(n){var t,r,i;n.isInteraction&&(t=n.model.value==="custom",t?(this.customTypeSwitcher(t),this.removeEmptyCustomColumn()):(r=this.getCustomColumnValues(),i=!0,i=this.isCustomColumnModified||this.selectedProfile.ProfileInfo.Option?!0:!1,i?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,this.dashboardDesigner.locale.masterSlaveWindow.resetAllCustomizationText,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{filterCondition:r}}):this.customTypeSwitcher(t)))},n.prototype.confirmAction=function(n,t){n?(this.customTypeSwitcher(!1),this.customContainer.empty(),this.selectedProfile.ProfileInfo.FilterCondition=$.parseJSON(JSON.stringify(this.getDefaultFilterConditions(this.selectedMaster.MasterInfo.ID))),this.updateConfigFields(this.selectedProfile.ProfileInfo.FilterCondition,this.sourceColumnData,this.targetColumnData),this.isCustomColumnModified=!1,this.selectedProfile.ProfileInfo.Option=!1):(this.configChooserTag.find("#"+this.id+"_filter_config_custom").data("ejRadioButton").setModel({checked:!0}),this.customTypeSwitcher(!n),this.customContainer.empty(),this.updateConfigFields(t.filterCondition,this.sourceColumnData,this.targetColumnData),this.isCustomColumnModified=!0,this.selectedProfile.ProfileInfo.Option=!0)},n.prototype.getCustomColumnValues=function(){var n=this,t=!1,i=[],r=this.customContainer.find(".e-reportdesigner-column-config-row");return r.each(function(r,u){var f=$(u).attr("id"),c=$("#"+f+"_source_column").data("ejDropDownList"),l=$("#"+f+"_datasource_column").data("ejDropDownList"),a=$("#"+f+"_target_column").data("ejDropDownList"),o=l.getSelectedValue(),v=l.getItemDataByValue(o)[0].Name,y=$(c.getSelectedItem()).text(),s=c.getSelectedValue(),p=$(a.getSelectedItem()).text(),h=a.getSelectedValue(),e;s.length>0&&o.length>0&&h.length>0||(ej.DashboardUtil.showErrIndictor($("#"+f+"_col_error_icon"),!0),t=!0);s.length>0||(n.updateBorder($("#"+f+"_source_column_wrapper"),!0),t=!0);o.length>0||(n.updateBorder($("#"+f+"_datasource_column_wrapper"),!0),t=!0);h.length>0||(n.updateBorder($("#"+f+"_target_column_wrapper"),!0),t=!0);s.length>0&&o.length>0&&h.length>0&&(n.updateBorder($("#"+f+"_source_column_wrapper > span"),!1),n.updateBorder($("#"+f+"_datasource_column_wrapper > span"),!1),n.updateBorder($("#"+f+"_target_column_wrapper > span"),!1),ej.DashboardUtil.showErrIndictor($("#"+f+"_col_error_icon"),!1),e=n.createcolumnJson(),e.SourceColumn.Name=y,e.SourceColumn.ID=s,e.DataSource.ID=o,e.DataSource.Name=v,e.TargetColumn.Name=p,e.TargetColumn.ID=h,i.push(e),t=!1)}),i},n.prototype.updateBorder=function(n,t){t?n.addClass("e-designer-error"):n.removeClass("e-designer-error")},n.prototype.createcolumnJson=function(){return{SourceColumn:{ID:"",Name:""},DataSource:{ID:"",Name:""},TargetColumn:{ID:"",Name:""}}},n.prototype.customTypeSwitcher=function(n){var t=this.configChooserTag.find(".e-icon.e-plus");n?(this.defaultContainer.css("display","none"),t.css("display","table"),this.columnConfig.css({display:"block",width:"515px"}),this.columnContainer.css({opacity:"1","background-color":"#ffffff"}),this.scrollerRefresh(this.columnConfig)):(t.css("display","none"),this.columnConfig.css("display","none"),this.defaultContainer.css("display","block"),this.columnContainer.css({opacity:"0.5","background-color":"#f4f4f4"}))},n.prototype.addCustomColumn=function(){this.renderNewConfigField();this.scrollerRefresh(this.columnConfig)},n.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},n.prototype.updateConfigFields=function(n){for(var t=0;t<n.length;t++){var i=this.renderNewConfigField(),r=$("#"+i+"_source_column"),u=$("#"+i+"_datasource_column"),f=$("#"+i+"_target_column");r.data("ejDropDownList").selectItemByText(n[t].SourceColumn.Name);u.data("ejDropDownList").selectItemByValue(n[t].DataSource.ID);this.populateTargetColumn(this.targetColumnData,u,f,r,{});f.data("ejDropDownList").selectItemByText(n[t].TargetColumn.Name)}},n.prototype.populateCustomColumn=function(n,t){var e=ej.DashboardUtil.getWidgetInstance($("#"+this.dashboardDesigner._id+"_"+n)),f=t,i=[],r,u;$.each(e.supportedColumnsForFiltering(),function(n,t){i.push({Name:t.DataField,Id:t.DataId})});r=ejDashboardDesigner.getInstance("DataSet").datasets;u=this.getTargetDataSourceList(r);this.targetColumnData=r;this.targetSourceData=u;this.sourceColumnData=i;f.length>0&&(this.updateConfigFields(f,i,u),this.isCustomColumnModified=!1)},n.prototype.getTargetDataSourceList=function(n){for(var i=[],t=0;t<n.length;t++)this.isDuplicateDataSource(i,n[t].Id)||ej.isNullOrUndefined(n[t].Id)||n[t].Id===""||i.push({Name:n[t].Name,Id:n[t].Id});return i},n.prototype.isDuplicateDataSource=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Id===t)return!0;return!1},n.prototype.renderNewConfigField=function(){var y=this.sourceColumnData,p=this.targetSourceData,h=this.targetColumnData,n=ej.getGuid(this.id+"_row_"),u=ej.buildTag("div.e-reportdesigner-column-config-row","",{padding:"4px 10px","border-radius":"4px"},{id:n,rowId:n}),o,t,s,i;this.customContainer.append(u);var f=ej.buildTag("table.e-designer-table-dialog","",{height:"40px",width:"100%"},{unselectable:"on",id:n+"_column_config_table"}),c=ej.buildTag("tr","",{},{id:n+"_link_rowTag"}),l=ej.buildTag("td","",{width:"5px","padding-left":"5px"}),e=ej.buildTag("input","",{"font-size":"12px"},{id:n+"_source_column"});l.append(e);o=ej.buildTag("td","",{width:"135px","padding-left":"5px"},{});t=ej.buildTag("input","",{"font-size":"12px"},{id:n+"_datasource_column"});o.append(t);s=ej.buildTag("td","",{width:"135px","padding-left":"5px"},{});i=ej.buildTag("input","",{"font-size":"12px"},{id:n+"_target_column"});s.append(i);var a=ej.buildTag("td","",{"padding-left":"5px",width:"10px"},{id:n+"_col_error_icon"}),v=ej.buildTag("td","",{"padding-right":"5px",width:"20px"}),r=ej.buildTag("span.e-widgeticons e-reportdesigner-close","",{cursor:"pointer",float:"right",display:"none",color:"#f45d5d","margin-right":"5px","margin-left":"5px","font-size":"9px"},{id:n+"_delete_icon",title:"Delete"});u.append(f);f.append(c);c.append(l).append(o).append(s).append(a).append(v);ej.DashboardUtil.renderErrIndictor(a,this.id,this.errorMsg);v.append(r);r.off("click",$.proxy(this.deleteCustomColumn,this,u));r.on("click",$.proxy(this.deleteCustomColumn,this,u));return e.ejDropDownList({showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",width:"135px",height:"26px",dataSource:y,fields:{text:"Name",value:"Id"},watermarkText:this.dashboardDesigner.locale.masterSlaveWindow.sourceColumn,change:$.proxy(this.populateTargetColumn,this,h,t,i,e)}),t.ejDropDownList({showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",width:"135px",height:"26px",dataSource:p,fields:{text:"Name",value:"Id"},watermarkText:this.dashboardDesigner.locale.masterSlaveWindow.targetDataSource,change:$.proxy(this.populateTargetColumn,this,h,t,i,e)}),i.ejDropDownList({showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",width:"135px",height:"26px",dataSource:[],fields:{text:"Name",value:"Id"},watermarkText:this.dashboardDesigner.locale.masterSlaveWindow.targetColumn,change:$.proxy(this.updateModificationStatus,this)}),f.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.elementMouseOver,this,r)),f.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.elementMouseLeave,this,r)),n},n.prototype.updateModificationStatus=function(){this.isCustomColumnModified=!0},n.prototype.setEmptyDataSource=function(n){this.isCustomColumnModified=!0;var t=n.data("ejDropDownList");t.model.dataSource.length>0&&(t.model.dataSource=[],t.clearText())},n.prototype.populateTargetColumn=function(n,t,i,r){var s,u,f;this.updateModificationStatus(null);var e=[],h=t.data("ejDropDownList").getSelectedValue(),c=[],l=r.data("ejDropDownList"),a=l.model.dataSource[l.model.selectedIndex].Name,v=ej.DashboardUtil.getWidgetInstance($("#"+this.dashboardDesigner._id+"_"+this.selectedMaster.MasterInfo.ID)),y=v.dataGroupInfo.DatasetId,o=null;if(h.length>0&&a.length>0){for(u=0;u<n.length;u++)h===n[u].Id&&(e=n[u].Fields),y===n[u].Id&&(o=n[u]);if(s=null,!ej.isNullOrUndefined(o))for(u=0;u<o.Fields.length;u++)if(a===o.Fields[u].DataField){s=o.Fields[u].TypeName;break}for(f=0;f<e.length;f++)s===e[f].TypeName&&c.push({Name:e[f].Name,Id:e[f].Id})}i.data("ejDropDownList").setModel({dataSource:c})},n.prototype.removeEmptyCustomColumn=function(){var n=this,t;this.customContainer.find(".e-reportdesigner-column-config-row").length>0&&(t=this.customContainer.find(".e-reportdesigner-column-config-row"),t.each(function(t,i){var r=$(i).attr("id");n.isEmptyRow(r)&&n.customContainer.find($("#"+r)).remove()}),this.scrollerRefresh(this.columnConfig))},n.prototype.isEmptyRow=function(n){var t=$("#"+n+"_source_column").data("ejDropDownList").getSelectedValue(),i=$("#"+n+"_datasource_column").data("ejDropDownList").getSelectedValue(),r=$("#"+n+"_target_column").data("ejDropDownList").getSelectedValue();return!(t.length>0)||!(i.length>0)||!(r.length>0)?!0:!1},n.prototype.deleteCustomColumn=function(n){this.customContainer.find(".e-reportdesigner-column-config-row").length>0&&(this.isEmptyRow(n.attr("id"))||(this.isCustomColumnModified=!0),n.remove(),this.scrollerRefresh(this.columnConfig))},n.prototype.getDefaultFilterConditions=function(n){var t=ej.DashboardUtil.getWidgetInstance($("#"+this.dashboardDesigner._id+"_"+n));return this.filterSerializer.getFilterCondition(t)},n.prototype.updateGridValues=function(n){for(var i=this.getDefaultFilterConditions(n),r=[],t=0;t<i.length;t++)r.push({SourceColumn:i[t].SourceColumn.Name,TargetColumn:i[t].TargetColumn.Name,TargetDataSource:i[t].DataSource.Name});this.ejColumnGridObj.setModel({dataSource:r})},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n.prototype.updateFilterConfig=function(){this.updateMasterDetails();this.targetInstance!==null&&(ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.filterActionInfo]),this.closeFilterWindow())},n.prototype.openFilterConfiguration=function(n,t,i){this.ejFilterDialog.open();this.resetFilter();this.targetInstance=n;this.targetMethod=t;this.filterActionInfo=$.extend(!0,{},i);this.filterActionInfo.MastersCollection.length>0?(this.setDefaultSelection(),this.populateValues()):this.disableFilterConfigArea(!0)},n.prototype.setDefaultSelection=function(){this.filterActionInfo.MastersCollection.length>0&&(this.selectedMaster=this.filterActionInfo.MastersCollection[0]);this.selectedMaster.ProfileManager.length>0&&(this.selectedProfile=this.selectedMaster.ProfileManager[0])},n.prototype.populateValues=function(){this.populateMasterArea();this.populateProfileArea(!0)},n.prototype.populateMasterArea=function(){var n,t;if(this.masterUlTag.children().length>0&&(this.masterUlTag.empty(),this.scrollerRefresh(this.masterListContainer)),this.filterActionInfo.MastersCollection.length>0){for(n=0;n<this.filterActionInfo.MastersCollection.length;n++)t=this.filterActionInfo.MastersCollection[n].MasterInfo,this.appendMasterList(t);this.masterUlTag.find("li").first().addClass("e-masterwidget-user-selection-active")}},n.prototype.populateProfileArea=function(n){if(this.selectedMaster.ProfileManager.length>0){if(this.resetColumnConfiguration(),n){this.resetProfileFields();for(var t=0;t<this.selectedMaster.ProfileManager.length;t++)this.appendProfileElement(this.selectedMaster.MasterInfo.Name,this.selectedMaster.MasterInfo.ID,this.selectedMaster.ProfileManager[t].ProfileInfo.Name,!0);this.profileField.find(".e-filter-profileList li").first().addClass("e-masterwidget-user-selection-active")}this.populateSlaveArea();this.populateDefaultArea();this.populateCustomArea()}else this.resetColumnConfiguration(),this.resetProfileFields(),this.resetListenerContainer(),this.disableFilterConditionSlaveWidgetArea(!0,!1);this.scrollerRefresh(this.profileField)},n.prototype.populateSlaveArea=function(){this.populateListenerWidgets(this.selectedProfile.WidgetInfo,this.selectedMaster.MasterInfo.ID)},n.prototype.populateDefaultArea=function(){this.updateGridValues(this.selectedMaster.MasterInfo.ID)},n.prototype.populateCustomArea=function(){if(!ej.isNullOrUndefined(this.selectedProfile)){this.populateCustomColumn(this.selectedMaster.MasterInfo.ID,this.selectedProfile.ProfileInfo.FilterCondition);var n=this.selectedProfile.ProfileInfo.FilterCondition.length>0?this.selectedProfile.ProfileInfo.Option:!1;this.configChooserTag.find("#"+this.id+"_filter_config_custom").data("ejRadioButton").setModel({checked:n});this.customTypeSwitcher(n)}},n.prototype.disableFilterConfigArea=function(n){n?(this.profileField.css({opacity:"0.5","background-color":"#f4f4f4"}),this.disableFilterConditionSlaveWidgetArea(n)):(this.profileField.css({opacity:"1","background-color":"#ffffff"}),this.disableFilterConditionSlaveWidgetArea(n))},n.prototype.disableProfileAddIcon=function(n){n===void 0&&(n=!0);n?this.profileAddIcon.attr("disabled","true").css("opacity","0.5"):this.profileAddIcon.removeAttr("disabled").css("opacity","1")},n.prototype.disableFilterConditionSlaveWidgetArea=function(n,t){t===void 0&&(t=!0);n?(this.listenerField.prop("disabled","true").css({opacity:"0.5","background-color":"#f4f4f4"}),this.configChooserTag.find("#"+this.id+"_filter_config_default").data("ejRadioButton").disable(),this.configChooserTag.find("#"+this.id+"_filter_config_custom").data("ejRadioButton").disable(),this.disableProfileAddIcon(t),this.configChooserTag.css("opacity","0.5"),$("#"+this.id+"_custom_column_container .e-dropdownlist").ejDropDownList("disable"),$("#"+this.id+"_filter_config_listener_list .e-checkbox").ejCheckBox("disable")):(this.listenerField.removeAttr("disabled").css({opacity:"1","background-color":"#ffffff"}),this.configChooserTag.find("#"+this.id+"_filter_config_default").data("ejRadioButton").enable(),this.configChooserTag.find("#"+this.id+"_filter_config_custom").data("ejRadioButton").enable(),this.profileAddIcon.removeAttr("disabled").css("opacity","1"),this.configChooserTag.css("opacity","1"),$("#"+this.id+"_custom_column_container .e-dropdownlist").ejDropDownList("enable"),$("#"+this.id+"_filter_config_listener_list .e-checkbox").ejCheckBox("enable"))},n.prototype.resetProfileFields=function(){this.profileField.find(".e-filter-profileList li").remove()},n.prototype.resetColumnConfiguration=function(){this.configChooserTag.find("#"+this.id+"_filter_config_default").data("ejRadioButton").setModel({checked:!0});this.customTypeSwitcher(!1);this.customContainer.empty();this.ejColumnGridObj.setModel({dataSource:[]})},n.prototype.resetFilter=function(){this.masterUlTag.children().length>0&&(this.masterUlTag.empty(),this.scrollerRefresh(this.masterListContainer));this.resetListenerContainer();this.resetProfileFields();this.resetColumnConfiguration();this.reportItems=[];this.targetInstance=null;this.targetMethod=null;this.isCustomColumnModified=!1;this.filterActionInfo=null},n.prototype.closeFilterWindow=function(){this.resetFilter();this.disableFilterConfigArea(!1);this.ejFilterDialog.close()},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_add_master"));$("#"+this.id+"_add_master").length>0&&$("#"+this.id+"_add_master").remove();ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_filter_configuration"));$("#"+this.id+"_filter_configuration").length>0&&$("#"+this.id+"_filter_configuration").remove()},n.prototype.renderMasterWindow=function(){var n=ej.buildTag("div.e-userselect","",{},{id:this.id+"_add_master"}),u=ej.buildTag("div","",{"padding-bottom":"10px"}),s=ej.buildTag("span",this.dashboardDesigner.locale.masterSlaveWindow.chooseWidgetText,{}),t=this.masterScrollElement=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{width:"100%",height:"300px",border:"1px solid #dddddd","border-radius":"4px",padding:"5px 0px"},{id:this.id+"_add_master_container"}),f=ej.buildTag("div","",{}),e=this.masterElementContainer=ej.buildTag("div","",{},{id:this.id+"_add_master_fields"}),o=ej.buildTag("table.e-designer-master-table","",{}),i,r;e.append(o);f.append(e);t.append(f);u.append(s);n.append(u).append(t);i=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_master_add_ok_btn"});r=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_master_add_cancel_btn",title:"Cancel"});n.ejDialog({width:"auto",height:"auto",minWidth:"280px",minHeight:"215px",title:this.dashboardDesigner.locale.masterSlaveWindow.addWidgetDialogAlertTitle,zIndex:1e3,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",enableModal:!0,close:$.proxy(ej.DashboardUtil.closeDialog,this)});r.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-cancelbtn",text:this.dashboardDesigner.locale.masterSlaveWindow.cancelButtonText,click:$.proxy(this.closeMasterWindow,this)});i.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-okbtn",text:this.dashboardDesigner.locale.masterSlaveWindow.okButtonText,click:$.proxy(this.updateMasterInfo,this,o)});t.ejScroller({scrollerSize:9,height:"190px",width:"auto",enableTouchScroll:!0,autoHide:!0,buttonSize:14});this.masterFooterTag=$("#"+this.id+"_add_master_foot");this.masterFooterTag.append(r).append(i);this.ejMasterDialog=n.data("ejDialog")},n.prototype.isAvailableMaster=function(n){for(var t=0;t<this.filterActionInfo.MastersCollection.length;t++)if(n===this.filterActionInfo.MastersCollection[t].MasterInfo.ID)return!0;return!1},n.prototype.getMasterWidgetsJson=function(){for(var t=this.filterSerializer.getMastetFilterWidgets(),i=[],n=0;n<t.length;n++)i.push(t[n].getReportItemJson());return i},n.prototype.getRemainingWidgets=function(){for(var t=this.getMasterWidgetsJson(),i=[],n=0;n<t.length;n++)this.isAvailableMaster(t[n].UniqueName)||i.push(this.getWidgetJSON(t[n].UniqueName,t[n].ContainerSettings.Title));return i},n.prototype.profileManager=function(){return{ProfileInfo:null,WidgetInfo:[]}},n.prototype.createProfileInfo=function(){return{ID:"",Name:"",FilterCondition:[],Option:!1}},n.prototype.createMasterInfo=function(){return{ID:"",Name:""}},n.prototype.createWidgetInfo=function(){return{ID:"",Name:""}},n.prototype.createMasterCollectionJSON=function(){return{MasterInfo:null,ProfileManager:[]}},n.prototype.generateWidgetInfo=function(n){for(var r,u=[],i=this.filterSerializer.getWidgetList(),t=0;t<i.length;t++)i[t].ID!==n&&(r=this.createWidgetInfo(),r.ID=i[t].ID,r.Name=i[t].Name,u.push(r));return u},n.prototype.getWidgetJSON=function(n,t){var r=this.createMasterCollectionJSON(),i=this.createMasterInfo();return i.ID=n,i.Name=t,r.MasterInfo=i,r},n.prototype.openMasterDialog=function(){if(this.reportItems=this.getRemainingWidgets(),this.reportItems.length>0)this.resetMasterFields(),this.ejMasterDialog.open(),this.populateMastersInMasterDialog(this.reportItems);else{var n=this.reportItems.length>0?"more":" ";ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.alertTitle,this.dashboardDesigner.locale.alertWindow.noBtnText+n+this.dashboardDesigner.locale.masterSlaveWindow.widgetsAvailable,IconType.information,AlertType.Alert,!1,"")}},n.prototype.addMasterItems=function(){this.openMasterDialog()},n.prototype.populateMastersInMasterDialog=function(n){for(var i=this.masterElementContainer.find(".e-designer-master-table"),t=0;t<n.length;t++)this.checkBoxWithElementsCreation(n[t].MasterInfo.Name,n[t].MasterInfo.ID,this.id+"_master_"+n[t].MasterInfo.ID.replace(" ",""),!1,i,"0px 20px 5px 10px");this.scrollerRefresh(this.masterScrollElement)},n.prototype.checkBoxWithElementsCreation=function(n,t,i,r,u,f){var s=ej.buildTag("tr","",{id:i+"_tr"}),h=ej.buildTag("td","",{align:"left",padding:f},{});s.append(h);u.append(s);var c=ej.buildTag("div","",{display:"inline-block"},{}),e=ej.buildTag("input","",{},{type:"checkbox",id:i}),o=ej.buildTag("label.e-dashbrd-filter-widget-label",n,{height:"20px"},{"for":i,type:"label"});ej.DashboardUtil.isExistTextWidth(o)&&o.attr("title",n);c.append(e,o);h.append(c);r?e.ejCheckBox({cssClass:"e-designer-param-assign e-designer-filter-checktext",change:$.proxy(this.changedCheckBoxValue,this,n,t)}):e.ejCheckBox({cssClass:"e-designer-param-assign e-designer-filter-checktext"})},n.prototype.changedCheckBoxValue=function(n,t,i){var u,f,r,e;for(this.isChangedCheckBoxValue=!0,u=!1,f=0,r=0;r<this.selectedProfile.WidgetInfo.length;r++)if(this.selectedProfile.WidgetInfo[r].ID===t){u=!0;f=r;break}i.isChecked?u||this.selectedProfile.WidgetInfo.push({ID:t,Name:n}):(e=this.selectedProfile.WidgetInfo,u&&e.splice(f,1),this.selectedProfile.WidgetInfo=e)},n.prototype.updateMasterInfo=function(){for(var t,i=[],r=[],n=0;n<this.reportItems.length;n++)t=!1,t=$("#"+this.id+"_master_"+this.reportItems[n].MasterInfo.ID.replace(" ","")).data("ejCheckBox").isChecked(),t?(i.push(this.reportItems[n]),this.filterActionInfo.MastersCollection.push($.parseJSON(JSON.stringify(this.getMasterInformation(this.reportItems[n].MasterInfo.ID))))):r.push(this.reportItems[n]);i.length>0?(this.reportItems=r,this.closeMasterWindow(),this.disableFilterConfigArea(!1),this.masterUlTag.find("li").length>0&&this.updateMasterDetails(),this.setDefaultSelection(),this.populateValues()):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.masterSlaveWindow.masterWidget,this.dashboardDesigner.locale.masterSlaveWindow.selectWidget,IconType.errors,AlertType.Alert,!1,"")},n.prototype.getMasterInformation=function(n){var t=ej.DashboardUtil.getWidgetInstance($("#"+this.dashboardDesigner._id+"_"+n)),i=this.filterSerializer.getWidgetList();return this.filterSerializer.generateMasterInformation(t,i)},n.prototype.resetMasterFields=function(){this.masterElementContainer.find(".e-designer-master-table tr").remove()},n.prototype.closeMasterWindow=function(){this.ejMasterDialog.close()},n}();window.ej.createObject("ej.DashboardDesignerUtility.FilterConfiguration",InternalFilterConfiguration,window);var FilterConfigurationModel=function(){function n(){this.MastersCollection=[]}return n}(),Widgetcollection=function(){function n(){this.MasterInfo=new MasterInfo;this.ProfileManager=[]}return n}(),MasterInfo=function(){function n(){this.ID=null;this.Name=null}return n}(),ProfileManager=function(){function n(){this.ProfileInfo=new ProfileInfo;this.WidgetInfo=[]}return n}(),ProfileInfo=function(){function n(){this.ID=null;this.Option=!0;this.Name=null;this.FilterCondition=[]}return n}(),FilterCondition=function(){function n(){this.SourceColumn=new ColumnDetail;this.TargetColumn=new ColumnDetail;this.DataSource=new ColumnDetail}return n}(),ColumnDetail=function(){function n(){this.ID=null;this.Name=null}return n}(),WidgetInfo=function(){function n(){this.ID=null;this.Name=null}return n}(),InternalFilterConfigurationInfo=function(){function n(){this.filterConfigurationModel=null}return Object.defineProperty(n,"FilterConfigurationInfo",{get:function(){return(this.filterConfigurationInfo===null||this.filterConfigurationInfo===undefined)&&(this.filterConfigurationInfo=new ej.DashboardDesignerUtility.FilterConfigurationInfo),this.filterConfigurationInfo},enumerable:!0,configurable:!0}),n.prototype.setFilterConfiguration=function(n){this.filterConfigurationModel=n},Object.defineProperty(n.prototype,"FilterConfigurationModel",{get:function(){return this.filterConfigurationModel},enumerable:!0,configurable:!0}),n}();window.ej.createObject("ej.DashboardDesignerUtility.FilterConfigurationInfo",InternalFilterConfigurationInfo,window);InternalFormatDialog=function(){function InternalFormatDialog(){this.previewTag=null;this.formatTag=null;this.representationTag=null;this.decimalTag=null;this.cultureTag=null;this.leftTextBox=null;this.rightTextBox=null;this.dialogTag=null;this.negativetable=null;this.appendTextDiv=null;this.dashboardDesigner=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderFormatDialog()}return Object.defineProperty(InternalFormatDialog,"Format",{get:function(){return(this.format===null||this.format===undefined)&&(this.format=new ej.DashboardDesignerUtility.FormatDialog),this.format},enumerable:!0,configurable:!0}),InternalFormatDialog.prototype.renderFormatDialog=function(){var t=this.dialogTag=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{cursor:"default"},{id:this.id+"_format_dialog"}),i=ej.buildTag("div.e-reportdesigner-box-sizing","",{"padding-top":"6px","border-radius":"2px",overflow:"auto",height:"310px",width:"100%"},{id:this.id+"_format_body_div"}),r=ej.buildTag("div.e-reportdesigner-box-sizing","",{float:"left",width:"312px",height:"300px",padding:"10px 10px 0px 10px"},{id:this.id+"_format_head_div"}),u=ej.buildTag("div.e-reportdesigner-box-sizing","",{float:"right","border-left":"1px solid #DBDBDB",height:"300px",width:"216px","padding-top":"5px","padding-right":"10px"},{id:this.id+"_format_sub_div"}),e=ej.buildTag("div","",{"padding-bottom":"10px"},{id:this.id+"_format_type_div"}),o=ej.buildTag("table.e-designer-exp-table","",{width:"100%"},{unselectable:"on"}),f=ej.buildTag("tr","",{},{}),d=ej.buildTag("td.e-designer-fontfamily","Type",{width:"122px","font-size":"12px"},{}),s=ej.buildTag("td","",{width:"11px"},{}),h=this.formatTag=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_format_type_drop"}),c=ej.buildTag("div","",{},{id:this.id+"_format_prvw_div"}),l=ej.buildTag("table.e-designer-exp-table","",{width:"100%"},{unselectable:"on"}),a=ej.buildTag("tr","",{},{}),v=ej.buildTag("td","",{"padding-bottom":"51px","padding-left":"12px"},{}),g=ej.buildTag("Label.e-designer-fontfamily","Preview:",{"font-size":"14px","font-weight":"600"},{type:"label"}),y=ej.buildTag("div","",{border:"1px solid #DBDBDB",height:"150px",width:"200px","margin-left":"13px",display:"block"}),p=ej.buildTag("div","",{display:"table"}),nt=this.previewTag=ej.buildTag("div","",{height:"142px",width:"192px",position:"absolute","word-break":"break-all","align-items":"center",display:"flex","justify-content":"center",overflow:"hidden",padding:"4px","font-size":"24px"},{id:this.id+"_format_preview_span"}),n=this.dashboardDesigner.locale.dialogOptions,w=ej.buildTag("input.e-designer-cancelbtn e-dbrd-hand-cursor",n.cancelButtonText,{float:"right"},{id:this.id+"_format_btn_cancel"}),b=ej.buildTag("input.e-designer-okbtn e-dbrd-hand-cursor",n.okButtonText,{float:"right"},{id:this.id+"_format_btn_ok"}),k;t.append(i);i.append(r);r.append(e);e.append(o);o.append(f);f.append(d);f.append(s);s.append(h);i.append(u);u.append(c);c.append(l);l.append(a);a.append(v);v.append(g);u.append(y);y.append(p);p.append(nt);$(document.body).append(t);t.ejDialog({minWidth:560,minHeight:345,width:"auto",height:"auto",enableResize:!1,showOnInit:!1,enableModal:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",showFooter:!0,title:"Measure Formatting",close:$.proxy(ej.DashboardUtil.closeDialog,this)});h.ejDropDownList({DataSource:[],fields:{text:"text",value:"value"},enabled:!0,width:"190px",height:"26px",change:$.proxy(this.renderFormatSample,this),selectedIndex:0,showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"});k=$("#"+this.id+"_format_dialog_foot");k.append(w).append(b);w.ejButton({showRoundedCorner:!1,size:"mini",text:n.cancelButtonText,click:$.proxy(this.closeDialog,this,!0)});b.ejButton({showRoundedCorner:!1,size:"mini",text:n.okButtonText,click:$.proxy(this.saveFormat,this,!0)});this.renderFormatFields(r)},InternalFormatDialog.prototype.renderNumericTextBox=function(n){var t=ej.buildTag("tr","",{},{}),u=ej.buildTag("td.e-designer-fontfamily","Decimal Places",{width:"122px","font-size":"12px"},{}),i=ej.buildTag("td","",{width:"31px"},{}),r=this.decimalTag=ej.buildTag("input","",{},{type:"text",id:this.id+"_format_decimal"});n.append(t);t.append(u);t.append(i);i.append(r);r.ejNumericTextbox({showSpinButton:!0,width:"190px",enabled:!0,value:2,change:$.proxy(this.changeFormatValues,this),minValue:0,maxValue:6,showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label"})},InternalFormatDialog.prototype.renderFormatFields=function(n){var t=ej.buildTag("div","",{},{id:this.id+"_format_div"}),r=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px"},{}),u=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px"},{}),f=ej.buildTag("tr","",{},{}),a=ej.buildTag("td.e-designer-fontfamily","Representation",{width:"122px","font-size":"12px"},{}),e=ej.buildTag("td","",{width:"20px"},{}),o=this.representationTag=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_format_repDrop"}),v=this.negativetable=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px"},{}),s=ej.buildTag("table.e-designer-exp-table","",{width:"100%","padding-bottom":"10px"},{}),i=ej.buildTag("tr","",{},{}),y=ej.buildTag("td.e-designer-fontfamily","Currency Culture",{width:"122px","font-size":"12px"},{}),h=ej.buildTag("td","",{width:"31px"},{}),c=this.cultureTag=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_format_culture_drop"}),l;n.append(t);t.append(u);u.append(f);f.append(a).append(e);t.append(r);this.renderNumericTextBox(r);t.append(s);s.append(i);i.append(y);i.append(h);h.append(c);t.append(v);e.append(o);this.renderAppendTextField(t);o.ejDropDownList({dataSource:this.getRepresentation(),fields:{text:"text",value:"value"},selectedIndex:0,width:"190px",height:"26px",change:$.proxy(this.changeFormatValues,this),showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"});l=c.ejDropDownList({dataSource:ej.DashboardUtil.getCultures(),fields:{text:"DisplayName",value:"CurrencySymbol"},enabled:!0,width:"190px",height:"28px",change:$.proxy(this.changeFormatValues,this),showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"}).data("ejDropDownList");l.selectItemByText("English (United States)")},InternalFormatDialog.prototype.renderAppendTextField=function(n){var t=this.appendTextDiv=ej.buildTag("div","",{}),i=ej.buildTag("div","",{width:"75px","padding-left":"4px"}),h=ej.buildTag("editLabel.e-designer-fontfamily",this.dashboardDesigner.locale.dialogText.appendText,{"font-size":"12px"},{type:"label"});i.append(h);var r=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"10px 0px"},{}),u=$("<tr><\/tr>"),c=ej.buildTag("td","",{width:"25px"},{}),l=ej.buildTag("td.e-designer-fontfamily","Left",{"font-size":"12px"},{}),f=ej.buildTag("td","",{"padding-right":"7px"},{}),e=this.leftTextBox=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_format_leftText"});f.append(e);var a=ej.buildTag("td.e-designer-fontfamily","Right",{"font-size":"12px"},{}),o=ej.buildTag("td","",{},{}),s=this.rightTextBox=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_format_rightText"});o.append(s);u.append(c).append(l).append(f).append(a).append(o);r.append(u);t.append(i).append(r);n.append(t);e.ejMaskEdit({name:"mask",inputMode:ej.InputMode.Text,width:"105px",height:"28px",showRoundedCorner:!0,cssClass:"e-designer-param-assign",change:$.proxy(this.changeFormatValues,this)});s.ejMaskEdit({name:"mask",inputMode:ej.InputMode.Text,width:"105px",height:"28px",showRoundedCorner:!0,cssClass:"e-designer-param-assign",change:$.proxy(this.changeFormatValues,this)})},InternalFormatDialog.prototype.getPreviewValue=function(n,t,i,r,u){var s=Math.pow(10,3),h=Math.pow(10,6),c=Math.pow(10,9),f=12345,o="",e="";if(n.toLowerCase()!=="percentage"){switch(t){case"Auto":case"Thousands":f=f/s;o="K";break;case"Millions":f=f/h;o="M";break;case"Billions":f=f/c;o="B"}e=n.toLowerCase()==="number"?ej.globalize.format(f,"N"+i,r.Name):ej.globalize.format(f,"C"+i,r.Name);e=e+o;e=u.PrefixValue+e+u.SuffixValue}else e=f.toFixed(i)+"%";return e},InternalFormatDialog.prototype.getCultureScriptFile=function(culture,selectedValue,repDropdown,decimal){var _this=this,dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");$.ajax({url:dashboardDesigner.model.serviceUrl+"/GetCultureScript?culture="+culture.Name,dataType:"html",contentType:"application/javascript",crossDomain:!0,cache:!0,error:function(){},beforeSend:function(n){ej.isNullOrUndefined(ej.DashboardUtil.clientId)||ej.DashboardUtil.clientId===""||n.setRequestHeader("ClientID",ej.DashboardUtil.clientId);ej.isNullOrUndefined(dashboardDesigner.model.serviceAuthorizationToken)||n.setRequestHeader("Authorization",dashboardDesigner.model.serviceAuthorizationToken)},success:function(args){eval(args);_this.culturePreviewValue(culture,selectedValue,repDropdown,decimal)},complete:function(){_this.previewTag.css("opacity","1")}})},InternalFormatDialog.prototype.culturePreviewValue=function(n,t,i,r){var u="";this.enableDecimalBox();var e=this.leftTextBox.data("ejMaskEdit").get_UnstrippedValue(),o=this.rightTextBox.data("ejMaskEdit").get_UnstrippedValue(),f={PrefixValue:"",SuffixValue:""};f.PrefixValue=ej.isNullOrUndefined(e)?"":e;f.SuffixValue=ej.isNullOrUndefined(o)?"":o;u=this.getPreviewValue(t,i,r,n,f);this.setPreviewTextFontSize(u);this.previewTag.text(u);this.updatePreviewContentStyle()},InternalFormatDialog.prototype.getCurrentCulture=function(){for(var i=this.cultureTag.data("ejDropDownList").model.text,t=ej.DashboardUtil.getCultures(),n=0;n<t.length;n++)if(i===t[n].DisplayName)return t[n]},InternalFormatDialog.prototype.changeFormatValues=function(){var n=this.formatTag.data("ejDropDownList").getSelectedValue();this.formatValues(n)},InternalFormatDialog.prototype.formatValues=function(n){var i=this.representationTag.data("ejDropDownList").getSelectedValue(),r=this.decimalTag.data("ejNumericTextbox").getValue(),u="",t,f;n.toLowerCase()==="percentage"?(u=this.getPreviewValue(n,i,r),this.setPreviewTextFontSize(u),this.previewTag.text(u),this.updatePreviewContentStyle()):(t=this.getCurrentCulture(),f=ej.globalize.findCulture(t.Name),f.name!==t.Name?(this.previewTag.css("opacity",".5"),this.getCultureScriptFile(t,n,i,r)):this.culturePreviewValue(t,n,i,r))},InternalFormatDialog.prototype.setPreviewTextFontSize=function(n){var t=this.previewTag.css("font-size"),i=ej.DashboardUtil.textWidth(n,"segoe ui "+t);this.previewTag.css("font-size",i>100?"18px":"24px")},InternalFormatDialog.prototype.updatePreviewContentStyle=function(){this.previewTag.prop("scrollHeight")>this.previewTag.innerHeight()?this.previewTag.css({"align-items":"baseline"}):this.previewTag.css("align-items","center")},InternalFormatDialog.prototype.renderFormatSample=function(n){ej.isNullOrUndefined(n.value)||(this.resetFormatSample(n.value),this.formatValues(n.value))},InternalFormatDialog.prototype.resetFormatSample=function(n){var t=this.representationTag.data("ejDropDownList"),u=this.cultureTag.data("ejDropDownList"),i=this.leftTextBox.data("ejMaskEdit"),r=this.rightTextBox.data("ejMaskEdit");i.setModel({value:""});r.setModel({value:""});n.toLowerCase()==="number"?(this.isEnabled(t)||t.enable(),this.isEnabled(u)||u.enable(),this.isEnabled(i)||i.enable(),this.isEnabled(r)||r.enable()):n.toLowerCase()==="currency"?(this.isEnabled(t)||t.enable(),this.isEnabled(u)||u.enable(),this.isEnabled(i)&&i.disable(),this.isEnabled(r)&&r.disable()):n.toLowerCase()==="percentage"&&(this.isEnabled(t)&&(t.selectItemByValue("Ones"),t.disable()),this.isEnabled(u)&&u.disable(),this.isEnabled(i)&&i.disable(),this.isEnabled(r)&&r.disable());this.enableDecimalBox()},InternalFormatDialog.prototype.enableDecimalBox=function(){var n=this.decimalTag.data("ejNumericTextbox"),t=this.representationTag.data("ejDropDownList").getSelectedValue();t.toLowerCase()==="auto"?n.disable():n.enable()},InternalFormatDialog.prototype.isEnabled=function(n){return n.model.enabled},InternalFormatDialog.prototype.populateFormats=function(n){var r,i;if(!ej.isNullOrUndefined(n.formatProperties)){var t=n.formatProperties,s=t.FormatType,u=t.Unit,f=t.DecimalPoints,h=ej.isNullOrUndefined(t.Prefix)?"":t.Prefix,c=ej.isNullOrUndefined(t.Suffix)?"":t.Suffix,e=t.Culture,o="";if(e.length>0)for(r=ej.DashboardUtil.getCultures(),i=0;i<r.length;i++)if(e===r[i].Name){o=r[i].DisplayName;break}this.formatTag.data("ejDropDownList").selectItemByValue(s);this.representationTag.data("ejDropDownList").selectItemByValue(u.length>0?u:"Auto");this.decimalTag.data("ejNumericTextbox").setModel({value:f>-1?f:0});this.leftTextBox.data("ejMaskEdit").setModel({value:h});this.rightTextBox.data("ejMaskEdit").setModel({value:c});this.cultureTag.data("ejDropDownList").selectItemByText(o)}},InternalFormatDialog.prototype.getFormatValues=function(){var t=this.formatTag.data("ejDropDownList").getSelectedValue(),i=this.representationTag.data("ejDropDownList").getSelectedValue(),r=this.decimalTag.data("ejNumericTextbox").getValue(),u=this.leftTextBox.data("ejMaskEdit").get_UnstrippedValue(),f=this.rightTextBox.data("ejMaskEdit").get_UnstrippedValue(),e=this.getCurrentCulture(),n={};return n.format="",n.formatProperties=ej.DashboardDesignerUtility.FormatDialog.createFormatType(),n.formatProperties.Culture=e.Name,n.formatProperties.DecimalPoints=r,n.formatProperties.FormatType=t,n.formatProperties.Prefix=u,n.formatProperties.Suffix=f,n.formatProperties.Unit=i,n},InternalFormatDialog.prototype.saveFormat=function(){var n=this.getFormatValues();ej.DashboardUtil.invokeCallBack(this.callBackfn,n);this.closeDialog()},InternalFormatDialog.prototype.openFormatDialog=function(n,t,i,r){i===void 0&&(i=!1);r===void 0&&(r=!1);this.callBackfn=null;this.resetPreviewLable();this.callBackfn=t;this.dialogTag.data("ejDialog").open();this.formatTag.data("ejDropDownList").setModel({dataSource:this.getFormatList()});n&&n.formatProperties?this.populateFormats(n):this.formatTag.data("ejDropDownList").selectItemByText("Number");i?(this.negativetable.hide(),this.appendTextDiv.hide(),r&&this.enableDecimalSelectionOnly()):(this.negativetable.show(),this.appendTextDiv.show(),this.enableallitems())},InternalFormatDialog.prototype.enableDecimalSelectionOnly=function(){var n=this.cultureTag.data("ejDropDownList"),t=this.representationTag.data("ejDropDownList"),i=this.formatTag.data("ejDropDownList");t.disable();n.disable();i.disable()},InternalFormatDialog.prototype.enableallitems=function(){var n=this.cultureTag.data("ejDropDownList"),t=this.representationTag.data("ejDropDownList"),i=this.formatTag.data("ejDropDownList");this.formatTag.data("ejDropDownList").getSelectedValue().toLowerCase()!=="percentage"&&(t.enable(),n.enable());i.enable()},InternalFormatDialog.prototype.closeDialog=function(){this.dialogTag.data("ejDialog").close()},InternalFormatDialog.prototype.resetPreviewLable=function(){this.previewTag.text("")},InternalFormatDialog.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_format_dialog"));$("#"+this.id+"_format_dialog").length>0&&$("#"+this.id+"_format_dialog").remove()},InternalFormatDialog.prototype.getFormatList=function(){return[{text:"Number",value:"Number"},{text:"Currency",value:"Currency"},{text:"Percentage",value:"Percentage"}]},InternalFormatDialog.prototype.getRepresentation=function(){return[{text:"Auto",value:"Auto"},{text:"Ones",value:"Ones"},{text:"Thousands",value:"Thousands"},{text:"Millions",value:"Millions"},{text:"Billions",value:"Billions"}]},InternalFormatDialog.createFormatType=function(){return{Culture:"",DecimalPoints:2,FormatType:"",Prefix:"",Suffix:"",Unit:""}},InternalFormatDialog}();window.ej.createObject("ej.DashboardDesignerUtility.FormatDialog",InternalFormatDialog,window);InternalDesignerHub=function(){function n(){this.actions=[];this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.CreateHubConnection()}return n.prototype.CreateHubConnection=function(){var n=this.getHubUrl();this.hubConnection=$.hubConnection(n,{useDefaultPath:!1});this.proxy=this.hubConnection.createHubProxy("DesignerHub")},n.prototype.getHubUrl=function(){var n=document.createElement("a");return n.href=this.dashboardDesigner.model.serviceUrl,ej.isNullOrUndefined(this.dashboardDesigner.model.serverUrl)&&this.dashboardDesigner.model.serverUrl===""?n.protocol+"//"+n.host+"/webdesignerservice/helper":this.dashboardDesigner.model.serverUrl+"/webdesignerservice/helper"},n.prototype.StartHubConnection=function(n){var t=this,i;n&&n.indicator&&n.indicator.length>0&&(typeof n.indicator[0]=="string"&&typeof n.instance=="object"?ej.DashboardUtil.invokeMethod(n.instance,n.indicator[0]):ej.DashboardUtil.invokeCallBack(n.indicator[0],{}));i=this.hubConnection;i.state!==1?(i.start({withCredentials:!1}).done(function(){ej.DashboardDesignerUtility.DesignerHub.DesignerHub.connectionId=t.hubConnection.id;ej.DashboardUtil.invokeCallBack(n.fnction,{})}).fail(function(){ej.DashboardUtil.invokeCallBack(n.indicator[1],{});ej.DashboardUtil.getInstance().alertDialog(t.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,t.dashboardDesigner.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,t.dashboardDesigner.locale.errorMessage.connectionRefused)}),i.disconnected(function(){ej.DashboardUtil.invokeCallBack(n.indicator[1],{});ej.DashboardDesignerUtility.DesignerHub.DesignerHub.hubConnection.stop();for(var t=0;t<ej.DashboardDesignerUtility.DesignerHub.DesignerHub.actions.length;t++)ej.DashboardDesignerUtility.DesignerHub.DesignerHub.proxy.off(ej.DashboardDesignerUtility.DesignerHub.DesignerHub.actions[t],null);ej.DashboardDesignerUtility.DesignerHub.DesignerHub.actions=[]})):ej.DashboardUtil.invokeCallBack(n.fnction,null)},n.prototype.GetStatusFromServer=function(n,t){var r=this,i=ej.DashboardDesignerUtility.DesignerHub.DesignerHub;i.actions.push(n);i.proxy.on(n,function(u){t.indicator&&t.indicator.length>0&&(typeof t.indicator[1]=="string"&&typeof t.instance=="object"?ej.DashboardUtil.invokeMethod(t.instance,t.indicator[1]):ej.DashboardUtil.invokeCallBack(t.indicator[1],{}));u&&u.Status===!1?ej.DashboardUtil.getInstance().alertDialog(r.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,r.dashboardDesigner.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,u.Message):ej.DashboardUtil.invokeCallBack(t.fnction,u);i.proxy.off(n,null);i.hubConnection.stop()})},Object.defineProperty(n,"DesignerHub",{get:function(){return(this.designerHub===null||this.designerHub===undefined)&&(this.designerHub=new ej.DashboardDesignerUtility.DesignerHub),this.designerHub},enumerable:!0,configurable:!0}),n}();window.ej.createObject("ej.DashboardDesignerUtility.DesignerHub",InternalDesignerHub,window);InternalImageManager=function(){function n(){this.id=null;this.imageManagerHeaderText="IMAGE MANAGER";this.addImageButtonText="Add Image";this.browseImageText="Browse Image";this.imageNames=[];this.uploadfile=null;this.isInTouch=!1;this.imageList=[];this.rptDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.rdlParser=ejDashboardDesigner.getInstance("RDLParser");this.imageNames=[];this.updateImageJSON();this.id=this.rptDesigner._id;this.imageContainer=ej.buildTag("div","",{"background-color":"white"},{id:this.id+"_imageManager"})}return Object.defineProperty(n,"ImageSource",{get:function(){return ej.isNullOrUndefined(this.imageSource)&&(this.imageSource=new ej.DashboardDesignerUtility.ImageManager),this.imageSource},enumerable:!0,configurable:!0}),n.prototype.isLoaded=function(){return!ej.isNullOrUndefined(this.targetTag)},n.prototype.updateImageJSON=function(){this.imageList=this.rdlParser.rdlJsonObj.EmbeddedImages;this.imageNames=this.getImageNames();this.uploadfile=null;this.updateImgSource()},n.prototype.getImagJson=function(n){if(this.imageList&&this.imageList.length>0)for(var t=0;t<this.imageList.length;t++)if(this.imageList[t].Name===n)return this.imageList[t]},n.prototype.getImageNames=function(){var t=[],n;if(this.imageList&&this.imageList.length>0)for(n=0;n<this.imageList.length;n++)t.push(this.imageList[n].Name);return t},n.prototype.insertImage=function(n,t){t===0?this.imageList.unshift(n):this.imageList.splice(t,0,n);this.appendItem(n,t);this.showImageHint();this.updateImgSource()},n.prototype.addImage=function(n){this.imageList.push(n);this.appendItem(n);ejDashboardDesigner.editManager.addCmdAction(CommandAction.ImageAdd,"removeImage","ImageManager","",[n,this.imageList.length-1],[n.Name]);this.showImageHint();this.updateImgSource()},n.prototype.removeImage=function(n){var t,i;if(this.imageItemDelete(n),!ej.isNullOrUndefined(this.imageList)&&this.imageList.length>0)for(t=0;t<this.imageList.length;t++)if(this.imageList[t].Name===n){i=$.extend(!0,{},this.imageList[t]);ejDashboardDesigner.editManager.addCmdAction(CommandAction.ImageDelete,"insertImage","ImageManager","",[i.Name],[i,t]);this.imageList.splice(t,1);break}this.showImageHint();this.updateImgSource()},n.prototype.renderContainer=function(n){this.targetTag=n;this.targetTag.append(this.imageContainer);this.renderHeader(this.imageManagerHeaderText);this.renderImageContainer();this.renderFooter();this.updateSize();this.populateEmbeddedImages()},n.prototype.renderHeader=function(n){var t=ej.buildTag("div","",{height:"35px",overflow:"hidden"},{id:this.id+"_imageManagerHeader"}),i=ej.buildTag("span.e-designer-header e-designer-cursor","",{overflow:"hidden",display:"inline-block",padding:"8.5px 7px 7px 0px"},{id:this.id+"_imageManagerHeaderText"}),r;i.text(n);r=ej.buildTag("span.e-designer-header-icon e-reportdesigner-configuration-imagemanager e-designer-cursor","",{display:"inline-block",float:"left",padding:"7px 11px"},{});t.append(r);t.append(i);this.imageContainer.append(t)},n.prototype.renderFooter=function(){var n=ej.buildTag("div.e-reportdesigner-designer-configuration","",{height:"50px","text-align":"center"},{id:this.id+"_imageManagerFooter"}),i=ej.buildTag("div.e-designer-new-btn-footer","",{margin:"8px","margin-bottom":"12px"},{id:this.id+"_footerSeperator"}),t;n.append(i);t=ej.buildTag("button.e-designer-newparam-btn e-designer-button e-dbrd-hand-cursor","ADD IMAGE",{"padding-right":"3px"},{id:this.id+"_btn_New_Img"});n.append(t);this.imageContainer.append(n);t.ejButton({showRoundedCorner:!1,contentType:ej.ContentType.TextAndImage,prefixIcon:"e-icon e-plus",size:"small",click:$.proxy(this.browseImages,this)});this.renderImgUpload(this.imageContainer)},n.prototype.browseImages=function(){$("#"+this.id+"_img_upload .e-uploadinput").click()},n.prototype.renderImgUpload=function(n){var t=this,i=ej.buildTag("div","",{height:"0px"},{id:this.id+"_img_upload"});n.append(i);i.ejUploadbox({width:"0px",height:"0px",uploadName:"file",extensionsAllow:".png, .jpg, .jpeg, .gif",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.rptDesigner.element},saveUrl:this.rptDesigner.model.serviceUrl+"/UploadReportAction",error:$.proxy(this.onuploadError,this),complete:$.proxy(this.onuploadComplete,this),beforeSend:function(n){var r=n.files.name.split("."),i;t.uploadfile=t.getAvailableName(ej.DashboardUtil.rplSpecialChar(r[0]))+"."+t.getfileExtension(r[1]);t.rptDesigner.showDesignIndicator();i={reportDesignerToken:t.rptDesigner.authenticationToken,serviceAuthorizationToken:t.rptDesigner.model.serviceAuthorizationToken};t.rptDesigner.triggerEvents("ajaxBeforeLoad",i);n.xhr.setRequestHeader("reportDesignerToken",i.reportDesignerToken);n.xhr.setRequestHeader("serviceAuthorizationToken",i.serviceAuthorizationToken);n.xhr.setRequestHeader("fileName",t.uploadfile)}});$(this.id+"_img_upload_SelectButton").hide()},n.prototype.renderImageContainer=function(){var t,u,n,f,i,r;this.imageListContainer=ej.buildTag("div.e-reportdesigner-propertyContainer e-dbrd-designer-scroller e-dbrd-control","",{height:"100%",margin:"10px","margin-top":"0px","margin-right":"0px"},{id:this.id+"_imageContainer"});t=ej.buildTag("div","",{},{});u=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_imageContainerDiv"});t.append(u);this.imageListContainer.append(t);this.imageContainer.append(this.imageListContainer);n=ej.buildTag("div.e-reportdesigner-box-sizing","",{height:"75px",width:"90px",margin:"10px",border:"3px solid",float:"left",display:"none","vertical-align":"middle","text-align":"center","border-color":"#0b8ae1",position:"absolute"},{id:this.id+"_imageHoverDiv"});f=ej.buildTag("div","",{height:"75px",width:"90px","background-color":"#428bca",opacity:"0.5"});n.append(f);i=ej.buildTag("div","",{height:"35px",width:"35px",position:"absolute",left:"27.5px",top:"20.5px"},{"class":"e-imagemanagericon e-reportdesigner-imagemanager-add"});r=ej.buildTag("div","",{height:"15px",width:"15px",position:"absolute",left:"70.5px",top:"54.5px","font-size":"15px"},{"class":"e-imagemanagericon e-reportdesigner-imagemanager-delete"});n.append(i);n.append(r);n.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.onImageLeave,this));this.imageListContainer.append(n);i.bind("click",$.proxy(this.onImageAdd,this));r.bind("click",$.proxy(this.onImageDelete,this));this.imageListContainer.ejScroller({scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.onuploadError=function(){this.rptDesigner.hideDesignIndicator();this.uploadfile=null},n.prototype.onuploadComplete=function(n){this.rptDesigner.hideDesignIndicator();var t=this.createEmbeddedImage(this.uploadfile?this.uploadfile:n.files.name);this.imageNames.push(t.Name);this.uploadfile=null;this.addImage(t)},n.prototype.onTouchEnd=function(n){n.preventDefault();this.isInTouch=!1},n.prototype.onTouchStart=function(n){this.isInTouch=!0;var t=$(n.currentTarget).offset();$("#"+this.id+"_imageHoverDiv").css({display:"table-cell",left:t.left-10,top:t.top-10});this.hoverElement=n.currentTarget},n.prototype.onImageHover=function(n){var t=$(n.currentTarget).offset();$("#"+this.id+"_imageHoverDiv").css({display:"table-cell",left:t.left-10,top:t.top-10});this.hoverElement=n.currentTarget},n.prototype.onImageLeave=function(){this.isInTouch||$("#"+this.id+"_imageHoverDiv").css({display:"none"})},n.prototype.onImageAdd=function(){if(!this.isInTouch){var n=$(this.hoverElement).attr("imgName"),t=$("#"+this.id+"_rpt_image_"+n+" img").attr("src"),i={name:n,src:t};ejDashboardDesigner.getInstance("DesignPanel").renderItem("e-image",this.id,$("#"+this.id+"_designBody"),{left:10,top:10},i)}},n.prototype.onImageDelete=function(){if(!this.isInTouch){var n=$(this.hoverElement).attr("imgName");ej.DashboardUtil.getInstance().alertDialog(this.rptDesigner.locale.alertDialogTitle.image,this.rptDesigner.locale.dataSource.deleteEmbeddedImage+n+this.rptDesigner.locale.dataSource.questionmark,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{name:n},instance:this,method:"deletConfirmation"})}},n.prototype.deletConfirmation=function(n,t){if(n&&!ej.isNullOrUndefined(t)){ejDashboardDesigner.editManager.setMergeAction(!0);var i=$.extend(!0,{},this.getImagJson(t.name));this.removeImage(t.name);this.deleteImageItems(i);ejDashboardDesigner.editManager.setMergeAction(!1);$("#"+this.id+"_imageHoverDiv").hide();this.scrollerRefresh(this.imageListContainer)}},n.prototype.imageItemDelete=function(n){$("#"+this.id+"_rpt_image_"+n).remove();$("#"+this.id+"_imageHoverDiv").hide()},n.prototype.populateEmbeddedImages=function(){if($("#"+this.id+"_imageContainerDiv .e-img-tile").remove(),this.updateImageJSON(),this.imageList&&this.imageList.length>0)for(var n=0;n<this.imageList.length;n++)this.appendItem(this.imageList[n]);this.showImageHint()},n.prototype.appendItem=function(n,t){var r=this.rptDesigner.authenticationToken,u={reportDesignerToken:r};this.rptDesigner.triggerEvents("ajaxBeforeLoad",u);r=u.reportDesignerToken;var f=ejDashboardDesigner.getInstance("DashboardDesigner").model.serviceUrl,e=f+"/GetImage/?key="+r+"&image="+n.Name+"."+this.getExtension(n.MIMEType),i=ej.buildTag("div.e-img-tile","",{height:"75px",width:"90px",margin:"10px",border:"2px solid",float:"left",display:"table-cell","vertical-align":"middle","text-align":"center","border-color":"#dde1e6"},{id:this.id+"_rpt_image_"+n.Name,imgName:n.Name}),o=ej.buildTag("img.e-draggable","",{width:"85px",height:"70px",margin:"2.5px"},{src:e});ej.isNullOrUndefined(t)?$("#"+this.id+"_imageContainerDiv").append(i):t===0?$("#"+this.id+"_imageContainerDiv").prepend(i):$("#"+this.id+"_imageContainerDiv .e-img-tile:nth-child("+t+")").after(i);i.append(o);i.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.onImageHover,this));i.bind("touchstart",$.proxy(this.onTouchStart,this));i.bind("touchend",$.proxy(this.onTouchEnd,this));this.scrollerRefresh(this.imageListContainer)},n.prototype.showImageHint=function(){$("#"+this.id+"_imageContainerDiv img").length>0?this.imageListContainer.removeClass("e-designer-hint-newimagemanager"):this.imageListContainer.addClass("e-designer-hint-newimagemanager")},n.prototype.updateImgSource=function(){var i=$("#"+this.id+"_Image_BasicSettings_Value").data("ejDropDownList"),t,n;if(!ej.isNullOrUndefined(i)){for(t=[],n=0;n<this.imageList.length;n++)t.push({text:this.imageList[n].Name});i.option("dataSource",t)}this.updateSelectedItemProp()},n.prototype.deleteImageItems=function(){},n.prototype.insertImageItems=function(n,t){var i,r;if(t&&t.length>0)for(i=0;i<t.length;i++)r=ej.DashboardUtil.getWidgetInstance($("#"+this.id+"_"+t[i])),r.imageJson.Value=n.Name,r.image.attr("src",r.getImageUrl(n.Name,this.getExtension(n.MIMEType))),r.showDefaultImage(!1),this.updateSelectedItemProp(n.Name,t[i]);ejDashboardDesigner.editManager.addCmdAction(CommandAction.AddImages,"deleteImageItems","ImageManager","",[n,t],[n])},n.prototype.updateSelectedItemProp=function(n,t){var r,i;ej.isNullOrUndefined(this.rptDesigner.designerPanel.selectedReportItems)||this.rptDesigner.designerPanel.selectedReportItems.length!==1||(r=$(this.rptDesigner.designerPanel.selectedReportItems[0]),r.hasClass("e-image")&&(i=ej.DashboardUtil.getWidgetInstance(r),ej.isNullOrUndefined(n)&&ej.isNullOrUndefined(t)?i.updatePropertyValue("Value","Value",i.imageJson.Value):i.imageJson.Name===t&&i.updatePropertyValue("Value","Value",n)))},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n.prototype.updateCulture=function(n){var i=this.id,t;t=ej.DashboardDesigner.Locale[n]?ej.DashboardDesigner.Locale[n].imageManager:ej.DashboardDesigner.Locale["en-US"].imageManager;this.imageManagerHeaderText=t.headerText;this.addImageButtonText=t.addImageButtonText;this.browseImageText=t.browseImage;$("#"+i+"_imageManagerHeaderText").html(this.imageManagerHeaderText);$("#"+i+"_addImageButtonText").html(this.addImageButtonText);$("#"+i+"_openImageFileContainer").ejDialog({title:this.browseImageText,cssClass:"e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)})},n.prototype.showImageManager=function(n){$("#"+this.id+"_imageManager").css("display",n?"block":"none");ejDashboardDesigner.getInstance("DataConfigurationPanel").resizeObj.isImageManager&&(this.updateSize(),ejDashboardDesigner.getInstance("DataConfigurationPanel").resizeObj.isImageManager=!1)},n.prototype.updateSize=function(){if(this.isLoaded()){this.imageContainer.height($("#"+this.id+"_designerConfigurationPanel").height());var n=$("#"+this.id+"_imageManagerHeader").height(),t=$("#"+this.id+"_imageManagerFooter").height();this.imageListContainer.height(this.imageContainer.height()-(n+t+15));this.imageListContainer.data("ejScroller")&&(this.imageListContainer.data("ejScroller").setModel({height:this.imageContainer.height()-(n+t+15)}),this.imageListContainer.data("ejScroller").refresh())}},n.prototype.createEmbeddedImage=function(n){var t=n.split(".");return{__type:"Syncfusion.RDL.DOM.EmbeddedImage",Name:t[0],MIMEType:this.getMimeType(t[1]),ImageData:""}},n.prototype.getMimeType=function(n){switch(n.toLowerCase()){case"png":return"image/png";case"jpeg":case"jpg":case"jpe":return"image/jpeg";case"bmp":return"image/bmp";case"gif":return"image/gif";case"emf":return"image/emf"}return"image/png"},n.prototype.getfileExtension=function(n){switch(n.toLowerCase()){case"jpeg":case"jpg":case"jpe":return"jpeg"}return n},n.prototype.getExtension=function(n){switch(n.toLowerCase()){case"image/png":return"png";case"image/jpeg":return"jpeg";case"image/bmp":return"bmp";case"image/gif":return"gif";case"image/emf":return"emf"}return"png"},n.prototype.getAvailableName=function(n){if(this.imageNames.indexOf(n)===-1)return n;var t=0,i;do t++,i=this.imageNames.indexOf(n+t);while(i!==-1);return n+t},n}();window.ej.createObject("ej.DashboardDesignerUtility.ImageManager",InternalImageManager,window);InternalItemPanel=function(){function n(n,t){this.dashboardDesigner=null;this.refreshTimer=null;this.dashboardDesigner=n;this.targetTag=t;this.rendererItemPanel()}return n.prototype.isLoaded=function(){return!ej.isNullOrUndefined(this.targetTag)},n.prototype.rendererItemPanel=function(){var n=this.dashboardDesigner._id,t;this.waterMarkText=this.dashboardDesigner.locale.itemPanel.waterMarkText;this.noMatchedText=this.dashboardDesigner.locale.itemPanel.noDataFound;t=[];$.each(this.dashboardDesigner.locale.itemPanel.groupItems,function(n,i){var r=[],f,u=[];$.each(ejDashboardDesigner.widgetItems,function(n,t){i===t.GroupName&&(t.Items.length>1?r=t.Items:u.push(t.Items[0]),f=t.GroupId)});$.isEmptyObject(u)||(r=u);r.length>0&&t.push({GroupName:i,GroupId:f,Items:r})});this.widgetItems=t;this.panelItems=this.mergeCustomandBuiltInwidgets();this.renderHeaderPanel();this.expandablePanel=ej.buildTag("div","",{},{id:n+"_designerItemPanel","class":"e-dbrd-designer-scroller e-dbrd-control e-dbrd-designer-panel-content-wrapper"});var i=ej.buildTag("div","",{},{}),r=ej.buildTag("div","",{},{id:n+"_scrollContentItemPanel"}),u=ej.buildTag("div","",{},{id:n+"_itemPanel_empty_msg","class":"e-dbrd-designer-panel-empty-wrapper"}),f=ej.buildTag("div",this.dashboardDesigner.locale.itemPanel.noDataFound,{},{"class":"e-dbrd-designer-font e-dbrd-designer-empty-msg"});u.append(f);i.append(r).append(u);this.expandablePanel.append(i);this.targetTag.append(this.expandablePanel);this.renderGroupItems(this.panelItems,r,!0,!1);this.expandablePanel.ejScroller({scrollerSize:5,enableTouchScroll:!1,autoHide:!0,buttonSize:14});this.updateSize();this.unWireEvents();this.wireEvents()},n.prototype.updateSize=function(){if(this.isLoaded()){var t=$("#"+this.dashboardDesigner._id+"_designAreaContainer").height(),n=$("#"+this.dashboardDesigner._id+"_item_autocomplete"),i=n.height()+parseInt(n.css("margin-top"),10)+parseInt(n.css("margin-bottom"),10)+parseInt(n.css("border-top-width"),10)+parseInt(n.css("border-bottom-width"),10);this.expandablePanel.height(t-i-1+"px");this.expandablePanel.data("ejScroller")&&(this.expandablePanel.data("ejScroller").setModel({height:t-i-1+"px"}),this.expandablePanel.data("ejScroller").refresh())}},n.prototype.validateSearchString=function(n,t){for(var r=!1,i=0;i<n.length;i++)if(ej.DashboardUtil.contains(n[i],t,!0)){r=!0;break}return r},n.prototype.getPanelItems=function(n,t){var f=[],i,u,r;if(n)for(i in n){for(u=void 0,u={GroupId:n[i].GroupName,GroupName:n[i].GroupName,Items:[]},r=0;r<n[i].Items.length;r++)(ej.DashboardUtil.contains(n[i].Items[r].widgetDisplayName,t,!0)||ej.DashboardUtil.contains(n[i].Items[r].widgetName,t,!0)||this.validateSearchString(n[i].Items[r].searchCategory,t))&&u.Items.push({id:n[i].Items[r].id,widgetName:n[i].Items[r].widgetName,widgetDisplayName:n[i].Items[r].widgetDisplayName,cssClass:n[i].Items[r].cssClass,widgetNameSpace:n[i].Items[r].widgetNameSpace,widgetconfiginfo:n[i].Items[r].widgetconfiginfo,useIconTemplate:n[i].Items[r].useIconTemplate,iconTemplate:n[i].Items[r].iconTemplate,tooltip:n[i].Items[r].tooltip});u.Items.length>0&&f.push(u)}return f},n.prototype.renderHeaderPanel=function(){this.headerPanel=ej.buildTag("div","",{},{id:this.dashboardDesigner._id+"_itemHeaderPanel","class":"e-dbrd-designer-panel-header-wrapper"});var n=ej.buildTag("div","",{},{id:this.dashboardDesigner._id+"_item_autocomplete","class":"e-dbrd-designer-autocomplete e-dbrd-designer-font"}),t=ej.buildTag("input","",{},{type:"text",placeholder:this.waterMarkText,id:this.dashboardDesigner._id+"_panelSearch","class":"e-autocomplete e-dbrd-designer-font e-dbrd-designer-search-box e-dbrd-designer-watermark e-dbrd-designer-boxshadow e-js e-input"}),i=ej.buildTag("span","",{},{id:this.dashboardDesigner._id+"_searchIcon","class":"e-dbrd-designer-icon e-dbrd-designer-search"});n.append(t);n.append(i);this.headerPanel.append(n);this.targetTag.append(this.headerPanel)},n.prototype.slideDownOperation=function(n){$(n.currentTarget).removeClass("plus").addClass("minus")},n.prototype.slideUpOperation=function(n){$(n.currentTarget).addClass("plus").removeClass("minus")},n.prototype.onExpandCollapseClick=function(n){var i=$(n.currentTarget),u=i.attr("data-groupid"),r=this.targetTag.find("#"+this.dashboardDesigner._id+"_widgetgroup_"+u),t;i.hasClass("plus")?r.slideDown("fast",$.proxy(this.slideDownOperation,this,n)):r.slideUp("fast",$.proxy(this.slideUpOperation,this,n));this.clearTimer();t=this;this.refreshTimer=setTimeout($.proxy(function(){t.expandablePanel.data("ejScroller")&&(t.expandablePanel.data("ejScroller").refresh(!0),t.clearTimer())},this),300)},n.prototype.clearTimer=function(){this.refreshTimer&&(clearTimeout(this.refreshTimer),this.refreshTimer=null)},n.prototype.getDragElement=function(n){var r=ej.buildTag("div","",{width:"74.5px",height:"75px",cursor:"default",float:"left","vertical-align":"middle","text-align":"center",border:"1px solid #c8c8c8","background-color":"white"},{unselectable:"on","data-widgetnamespace":n.attr("data-widgetnamespace"),"data-widgetname":n.attr("data-widgetname"),"data-widgetid":n.attr("data-widgetid")}),t=ej.buildTag("div","",{"margin-top":"14px",cursor:"default"},{"class":n.attr("data-widgetclass"),"data-widgetnamespace":n.attr("data-widgetnamespace"),"data-widgetname":n.attr("data-widgetname"),"data-widgetid":n.attr("data-widgetid")}),i;return t.addClass("e-widgeticon-drag"),i=n.attr("data-icontemplate"),ej.isNullOrUndefined(i)||i===""||t.append(n.attr("data-icontemplate")),r.append(t),r},n.prototype.renderGroupItems=function(n,t){var y=[],r,b,l,h,u,i,o,f,s,a,v;for(r in n){var k=n[r].GroupName.replace(" ",""),e=n[r].GroupId,p=ej.buildTag("div","",{},{id:this.dashboardDesigner._id+"_widgetgroup_"+e,"class":"e-dbrd-designer-widget-group-content"}),c=ej.buildTag("div","",{},{id:this.dashboardDesigner._id+"_widgetgroupHeader_"+e,"class":"e-dbrd-designer-widget-group-header-wrapper minus","data-groupid":e}),w=ej.buildTag("div.e-designer-fontfamily","",{},{id:this.dashboardDesigner._id+"_widgetgroupHeaderText_"+k,"class":"e-dbrd-designer-font e-dbrd-designer-widget-group-header-text"});for(w.text(n[r].GroupName),c.append(w),b=ej.buildTag("div","",{},{"class":"e-dbrd-designer-icon e-dbrd-designer-widget-group-header-icon",id:this.dashboardDesigner._id+"_widgetgroupHeaderIcon_"+e}),c.append(b),t.append(c),l=ej.buildTag("div","",{},{unselectable:"on",id:this.dashboardDesigner._id+"_widgetgroupelement_"+e,"class":"e-dbrd-designer-widget-group-content-wrapper"}),h=void 0,u=0;u<n[r].Items.length;u++){i=n[r].Items[u];o=i.id;u%2==0&&(h=ej.buildTag("div","",{},{unselectable:"on",id:this.dashboardDesigner._id+"_"+n[r].GroupId+"_widgetcontainer_row","class":"e-dbrd-designer-widget-group-row"}));f=ej.buildTag("div","",{},{"class":"e-draggable e-dbrd-designer-widget-group-column",unselectable:"on","data-widgetclass":i.cssClass,"data-widgetname":i.widgetName,"data-widgetnamespace":i.widgetNameSpace,"data-icontemplate":i.iconTemplate,"data-widgetid":o,id:this.dashboardDesigner._id+"_"+o});h.append(f);ejDashboardDesigner.getInstance("DragOnDrop").initializeDraggable(f,1e4);u%2==0&&l.append(h);s=ej.buildTag("div","",{},{"class":"e-dbrd-designer-icon e-dbrd-designer-widget-icon "+i.cssClass,"data-widgetclass":i.cssClass,"data-widgetname":i.widgetName,"data-widgetnamespace":i.widgetNameSpace,"data-icontemplate":i.iconTemplate,"data-widgetid":o});i.useIconTemplate&&s.append(i.iconTemplate);f.append(s);y.push(s);a=ej.buildTag("span","",{},{id:this.dashboardDesigner._id+o+"_text",unselectable:"on","class":"e-dbrd-designer-font e-dbrd-designer-widget-name"});v=i.widgetDisplayName;ej.DashboardUtil.textWidth(v,"12px Roboto")>70&&s.css("margin-top","7px");a.text(v);f.append(a);var d=i.tooltip.title,g=i.tooltip.description,nt=i.tooltip.dataRequirement,tt=this.generateTooltipTemplate(d,g,nt);f.ejTooltip({content:tt,cssClass:"e-defaultIndex-template",position:{stem:{horizontal:"left",vertical:"top"},target:{horizontal:"right",vertical:0}},tip:{adjust:{xValue:u%2==0?85:10}},isBalloon:!1,showShadow:!0,beforeOpen:function(n){n.cancel=n.event.buttons!==0}})}p.append(l);t.append(p)}return $(this.expandablePanel).data("ejScroller")&&$(this.expandablePanel).data("ejScroller").refresh(),y},n.prototype.getSearchItems=function(){return this.searchItems},n.prototype.getSearchItemsLength=function(){for(var n=0,t=0;t<this.searchItems.length;t++)n=n+this.searchItems[t].Items.length;return n},n.prototype.onSearchClick=function(n){if(n.keyCode!==13){var r=this.targetTag.find("#"+this.dashboardDesigner._id+"_panelSearch"),t=this.targetTag.find("#"+this.dashboardDesigner._id+"_scrollContentItemPanel"),i=r.val();i.length>0?(this.targetTag.find("#"+this.dashboardDesigner._id+"_searchIcon").addClass("e-dbrd-designer-close").removeClass("e-dbrd-designer-search"),this.searchItems=this.getPanelItems(this.panelItems,i),ej.DashboardUtil.destroyEjObjects(this.targetTag.find("#"+this.dashboardDesigner._id+"_scrollContentItemPanel")),this.targetTag.find("#"+this.dashboardDesigner._id+"_scrollContentItemPanel").empty(),this.renderGroupItems(this.searchItems,t,!0,!0),this.showToolboxItems(this.searchItems.length>0)):(this.targetTag.find("#"+this.dashboardDesigner._id+"_searchIcon").addClass("e-dbrd-designer-search").removeClass("e-dbrd-designer-close"),ej.DashboardUtil.destroyEjObjects(this.targetTag.find("#"+this.dashboardDesigner._id+"_scrollContentItemPanel")),this.targetTag.find("#"+this.dashboardDesigner._id+"_scrollContentItemPanel").empty(),this.searchItems=[],this.renderGroupItems(this.panelItems,t,!0,!1),this.showToolboxItems(!0))}},n.prototype.onCloseClick=function(){this.targetTag.find("#"+this.dashboardDesigner._id+"_panelSearch").val("");this.targetTag.find("#"+this.dashboardDesigner._id+"_searchIcon").addClass("e-dbrd-designer-search").removeClass("e-dbrd-designer-close");ej.DashboardUtil.destroyEjObjects(this.targetTag.find("#"+this.dashboardDesigner._id+"_scrollContentItemPanel"));this.targetTag.find("#"+this.dashboardDesigner._id+"_scrollContentItemPanel").empty();this.showToolboxItems(!0);var n=this.targetTag.find("#"+this.dashboardDesigner._id+"_scrollContentItemPanel");this.renderGroupItems(this.panelItems,n,!0,!1)},n.prototype.showToolboxItems=function(n){$("#"+this.dashboardDesigner._id+"_itemPanel_empty_msg").css("display",n?"none":"table")},n.prototype.onItemScroll=function(n){n.cancel=this.dashboardDesigner.isItemDrag},n.prototype.updateCulture=function(){var n=this.dashboardDesigner._id,i=this.dashboardDesigner.model.localeSettings.culture,t;t=ej.DashboardDesigner.Locale[i]?ej.DashboardDesigner.Locale[i].itemPanel:ej.DashboardDesigner.Locale["en-US"].itemPanel;this.waterMarkText=t.waterMarkText;this.noMatchedText=t.noDataFound;$("#"+n+"_panelSearch").val($("#"+n+"_panelSearch").hasClass("e-focus")?"":this.waterMarkText);$("#"+n+"_noMessageToolTip").find(".editLabel").html(this.noMatchedText)},n.prototype.wireEvents=function(){this.targetTag.on("keyup",".e-dbrd-designer-search-box",$.proxy(this.onSearchClick,this));this.targetTag.on("click",".e-dbrd-designer-close",$.proxy(this.onCloseClick,this));this.targetTag.on("click",".e-dbrd-designer-widget-group-header-wrapper",$.proxy(this.onExpandCollapseClick,this))},n.prototype.unWireEvents=function(){this.targetTag.off("keyup",".e-dbrd-designer-search-box",$.proxy(this.onSearchClick,this));this.targetTag.off("click",".e-dbrd-designer-close",$.proxy(this.onCloseClick,this));this.targetTag.off("click",".e-dbrd-designer-widget-group-header-wrapper",$.proxy(this.onExpandCollapseClick,this))},n.prototype.mergeCustomandBuiltInwidgets=function(){return this.widgetItems},n.prototype.generateTooltipTemplate=function(n,t,i){return"<div class= 'e-defaultIndex-info-container'><div class='e-defaultIndex-text-wrapper'><div class = 'e-defaultIndexHeader'><b>"+n+"<\/b><\/div><div class = 'e-defaultIndex-info-text'>"+t+"<\/div><\/div><div class='e-defaultIndex-text-wrapper'><div class = 'e-defaultIndexHeader'><b>"+this.dashboardDesigner.locale.itemPanel.widgetTitle.dataRequirements+"<\/b><\/div><div class = 'e-defaultIndex-info-text '>"+i+"<\/div><\/div><\/div>"},n}();window.ej.createObject("ej.DashboardDesignerUtility.ItemPanel",InternalItemPanel,window);__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){var t;(function(n){var t;(function(n){n[n.design="design"]="design";n[n.readonly="readonly"]="readonly";n[n.datasource="datasource"]="datasource";n[n.connection="connection"]="connection"})(t=n.mode||(n.mode={}))})(t=n.dashboardDesigner||(n.dashboardDesigner={}))}(ej||(ej={})),function(n){n[n.Local=0]="Local";n[n.Server=1]="Server"}(DashboardMode||(DashboardMode={})),function(n){n[n.Row=0]="Row";n[n.Column=1]="Column"}(GridUrlType||(GridUrlType={})),function(n){n[n.Row=0]="Row";n[n.Column=1]="Column";n[n.Both=2]="Both"}(LinkEnableMode||(LinkEnableMode={}));ejDashboardDesigner=function(n){function t(t,i){var r=n.call(this)||this;return r.rootCss="e-reportdesigner",r.setFirst=!1,r.tooltipTimer=null,r.pluginName="ejDashboardDesigner",r._id=$(r.element).attr("id"),r.id=null,r.model=null,r.defaults={serviceUrl:null,dashboardPath:null,viewerSettings:null,dashboardName:null,dashboardDescription:null,serviceAuthorizationToken:"",toolbarSettings:{items:32767,showToolbar:!0,templateId:null},dataServiceUrl:null,itemId:null,mode:ej.dashboardDesigner.mode.design,datasource:null,reportOpened:null,reportSaved:null,reportModified:null,toolbarRendering:null,toolbarClick:null,openReportClick:null,saveReportClick:null,ajaxBeforeLoad:null,ajaxSuccess:null,ajaxError:null,queryDesignerRendered:null,actionComplete:null,isDraft:!1,localeSettings:{culture:"en-US",dateFormat:"dd/MM/yyyy",timeFormat:"HH:mm:ss"},features:{datasource:{create:!0,edit:!0},connection:{create:!0,edit:!0}},beforeDataSourceUIRender:null},r.designerPanel=null,r.dashboardMode=DashboardMode.Server,r.itemPanel=null,r.dragDropHelper=null,r.rdlParser=null,r.isHeight=!1,r.isWidth=!1,r.isPercentWidth=-1,r.isPercentHeight=-1,r.dataConfigurationPanel=null,r.itemPanelWidth=160,r.dataPanelWidth=36,r.designSurfaceHeaderHeight=35,r.isOpenServerRpt=!1,r.isNewServerRpt=!1,r.isNewRpt=!1,r.resizeTO=null,r.lastConfigSize=null,r.isItemDrag=!1,r.serverCategory=null,r.reportFileName="Untitled Dashboard",r.dashboardDescription="",r.zoomValue=1,r.copiedItem=null,r.authenticationToken=null,r.reportServerInfo=null,r.resizeObj={isDesigner:!0,isPreview:!0,isQueryDesigner:!0},r.refreshSetting=null,r.isExecute=!1,r.previewFeaturesJson=null,r.colorCustomIconStore=[],r.clearmasterFilter=!1,r.intermediateDBStatus=!0,r.rptToolbar=null,t&&(t.jquery||(t=$("#"+t)),t.length&&(ej.isNullOrUndefined(i)||$(t).ejDashboardDesigner(i).data(r.pluginName))),r}return __extends(t,n),t.prototype.ImportDataSource=function(n){if(n.ApiStatus){var r=$.parseJSON(n.Data),i=t.getInstance("DataSource");this.rdlParser.addDataSetToRdlJsonObj(r);this.rdlParser.rdlJsonObj.DataSources=this.rdlParser.rdlJsonObj.DataSources.concat(r.DataSources);i.isLoaded()?i.pouplateDataSources():i.updateDataSourceJSON();t.getInstance("DataSet").isLoaded()?t.getInstance("DataSet").pouplateDataSets():t.getInstance("DataSet").updateDataSetJSON()}else ej.DashboardUtil.getInstance().alertDialog(this.locale.alertDialogTitle.dashboardDesigner,this.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,n.Message)},Object.defineProperty(t,"ServerDateTimeFormat",{get:function(){return"yyyy-MM-dd HH:mm:ss"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DateFormat",{get:function(){return"M/d/yyyy"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StdDateTimeFormat",{get:function(){return"MM/dd/yyyy hh:mm:ss tt"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"StdDateFormat",{get:function(){return"MM/dd/yyyy"},enumerable:!0,configurable:!0}),t.prototype._init=function(){var f,n,i,r,u;this.locale=this.getLocale(this.model.localeSettings.culture);t.dashboardDesigner=this;this.createTooltipContainer();this.initUnhandledExceptionHandler();new ej.DashboardUtil(this,this.model.itemId);new ej.DashboardDesignerUtility.Serialization;new ej.DashboardDesignerUtility.OAuthHelper;this.authenticationToken=this.getAuthenticationToken(this._id);this.GetIntermediateStatus();t.editManager=t.getInstance("UndoManager");this.renderDesignerContainer();this.initializeDesigner();this.previewFeaturesJson=null;this.refreshSetting={enableClientCaching:!1,enableAutoRefresh:!1,isRefreshWidget:!1,interval:"00:00:30",isRefreshRowCount:!1,widgetCollection:[]};this.isExecute=!1;switch(this.model.mode){case ej.dashboardDesigner.mode.design:case ej.dashboardDesigner.mode.readonly:ej.isNullOrUndefined(this.model.datasource)||ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/importconnection/"+this.model.datasource,{},{fnction:$.proxy(this.ImportDataSource,this),indicator:[$.proxy(this.showDesignIndicator,this),$.proxy(this.hideDesignIndicator,this)]},!1,!0);break;case ej.dashboardDesigner.mode.datasource:ej.isNullOrUndefined(this.model.datasource)||(f=t.getInstance("DataSet"),n=t.getInstance("DataConfigurationPanel"),n.resizeConfigurationPanel(!0),n.showDataConfigurationPanel(),n.loadDataSet(),f.switchPanel(PanelList.QueryBuilder),ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/importconnection/"+this.model.datasource,{},{fnction:$.proxy(this.renderQueryDesigner,this),indicator:[$.proxy(this.showDesignIndicator,this),$.proxy(this.hideDesignIndicator,this)]},!1,!0));break;case ej.dashboardDesigner.mode.connection:this.designerContainer.css("display","none");this.designerContainer.find("#"+this._id+"_designerConfigurationPanel").remove();i=ej.buildTag("div","",{width:"100%",height:"100%",display:"block","background-color":"white"},{id:this._id+"_designerConfigurationPanel"});this.element.append(i);r=t.getInstance("DataSet");r.isLoaded()||t.getInstance("DataSet").renderContainer(i);this.designerContainer.css("display","none");r.switchPanel(PanelList.DataType);i.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"})}u=this;setTimeout(function(){if(u.model.actionComplete){var n={mode:ej.dashboardDesigner.mode.datasource,event:"renderComplete",source:null};u._trigger("actionComplete",{eventType:DashboardDesignerEvent.RenderComplete,data:n})}},500)},t.prototype.renderQueryDesigner=function(n){if(n.ApiStatus){var u=t.getInstance("DataSource"),i=t.getInstance("DataSet"),r=$.parseJSON(n.Data);this.rdlParser.addDataSetToRdlJsonObj(r);this.rdlParser.rdlJsonObj.DataSources=this.rdlParser.rdlJsonObj.DataSources.concat(r.DataSources);u.pouplateDataSources();i.pouplateDataSets();i.datasourceSelection(this.rdlParser.rdlJsonObj.DataSources[0].Id,this.rdlParser.rdlJsonObj.DataSources[0])}else ej.DashboardUtil.getInstance().alertDialog(this.locale.alertDialogTitle.dashboardDesigner,this.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,n.Message)},t.prototype._setModel=function(n){for(var t in n)switch(t){case"locale":this.setCultureInfo(n.locale);break;case"toolbarSettings":this.rptToolbar.updateToolbar();break;case"dashboardName":this.updateDashboardName();break;case"description":this.updateDescription()}},t.prototype.loadReport=function(){this.newReportJSON();this.model.mode!==ej.dashboardDesigner.mode.connection&&this.model.mode!==ej.dashboardDesigner.mode.datasource&&this.checkdraft()},t.prototype.treeMapExtension=function(){$.extend(!0,ej.datavisualization.TreeMap.prototype,{getDrillDownHeader:function(n){var i="",r=1,t;if(n.length===r)return n[0]=this.model.header,n[0];for(t=0;t<n.length;t++)i+=n[t],t!==n.length-r&&(i+=".");return i}})},t.prototype.rangeSliderExtension=function(){var t=24,n=60,i=1e3,r="M/d/yyyy",u=ej.Slider.prototype._init,f=ej.Slider.prototype._setModel;$.extend(!0,ej.Slider.prototype,{defaults:{minDate:null,maxDate:null,dateValue:null},_init:function(){if(this._isDate=this.model.minDate&&this.model.maxDate,this._isDate){this.model.incrementStep=t*n*n*i;this.model.minValue=Number(this.model.minDate);this.model.maxValue=Number(this.model.maxDate);var r=this.model.dateValue;r&&(this.model.sliderType==="range"?this.values([Number(r[0]),Number(r[1])]):this.value(Number(r)))}u.call(this)},_setModel:function(n){f.call(this,n);for(var t in n)switch(t){case"minDate":this.option("minValue",Number(n[t]));break;case"maxDate":this.option("maxValue",Number(n[t]));break;case"dateValue":this._setDateValue(n[t])}},setValue:function(n,t){var i=n?Number(n):Number(this.model.minValue),r=t?Number(t):Number(this.model.minValue);this.model.sliderType==="range"?this._validateRangeValue([i,r]):this._validateValue(i)},_setDateValue:function(n){n&&(this.model.sliderType==="range"&&this.setValue(n[0],n[1]),this.setValue(n))},_updateModelValue:function(){var n=this._getHandleValue(!0);this.model.sliderType==="range"?this.values(n):this.value(n);this._hidden.val(this._getHandleValue())},_getHandleValue:function(n){return this.model.sliderType==="range"?[this._convertToDate(this.handleVal2,n),this._convertToDate(this.handleVal,n)]:this._convertToDate(this.handleVal,n)},_convertToDate:function(n,t){var i=null;return t||!this._isDate?n:(i=new Date(n),ej.globalize.format(i,r))}})},t.prototype.autoCompleteExtension=function(){var n=ej.Autocomplete.prototype._enterTextBoxValue,t=ej.Autocomplete.prototype.selectValueByKey,i=ej.Autocomplete.prototype.selectValueByText;$.extend(!0,ej.Autocomplete.prototype,{selectValueByKey:function(n){t.call(this,n);this._overflowTextValiation()},selectValueByText:function(n){i.call(this,n);this._overflowTextValiation()},_enterTextBoxValue:function(t){n.call(this,t);this._overflowTextValiation()},_overflowTextValiation:function(){var n=this.model.multiSelectMode==="visualmode"?this._modelValue:this.element.val()===""?null:this.element.val();this.element.attr("title",ej.DashboardUtil.isExistTextWidth(this.element)?n:"")}})},t.prototype.initializeDesigner=function(){ej.isNullOrUndefined(this.model.dashboardPath)||ej.DashboardUtil.isEmptyString(this.model.dashboardPath)||ej.isNullOrUndefined(this.model.itemId)||ej.DashboardUtil.isEmptyString(this.model.itemId)||(this.publishedId=this.model.itemId);this.loadReport();this.GetPreviewFeaturesJson();this.wiredEvents();this.rangeSliderExtension();this.treeMapExtension();this.autoCompleteExtension();t.editManager.updateToolbar();this.model.mode!==ej.dashboardDesigner.mode.datasource&&this.rptToolbar.updateToolbar()},t.prototype.renderDesignerContainer=function(){var f=this.element.height(),t=this.element.width(),i=ej.browserInfo(),e,r,o,u;this.element[0].style.height||this.element[0].parentElement.clientHeight===0||(this.isHeight=!0);this.element[0].style.width||this.element[0].parentElement.clientWidth===0||(this.isWidth=!0);f===0&&this.element[0].parentElement.clientHeight!==0?(this.element.height(this.element[0].parentElement.clientHeight),f=this.element.height()):i.name==="msie"&&i.version==="8.0"&&this.element[0].style.height.indexOf("%")!==-1&&(e=parseFloat(this.element[0].style.height),r=this.element[0].parentElement.clientHeight,r=r/100*e,this.element.height(r));t===0&&this.element[0].parentElement.clientWidth!==0?(this.element.width(this.element[0].parentElement.clientWidth),t=this.element.width()):i.name==="msie"&&i.version==="8.0"&&this.element[0].style.width.indexOf("%")!==-1&&(o=parseFloat(this.element[0].style.width),u=this.element[0].parentElement.clientWidth,u=u/100*o,this.element.width(u));this.dashboardViewerPanel=ej.buildTag("div.e-reportdesigner-reportViewer","",{height:"100%",display:"none"},{id:this._id+"_viewerContainer"});this.designerContainer=ej.buildTag("div.e-reportdesigner-designer e-dashboarddesigner","",{height:"100%","box-sizing":"border-box"},{id:this._id+"_designerContainer"});var n=this.designAreaTag=ej.buildTag("div.e-reportdesigner-designer e-userselect","",{height:"100%","border-width":"1px 0px","border-style":"solid","border-color":"#c8c8c8",display:"inline-block","background-color":"#ececec","box-sizing":"border-box"},{id:this._id+"_designAreaContainer"}),s=this.itemPanelTag=ej.buildTag("div.e-dbrd-designer-item-panel","",{width:this.itemPanelWidth+"px"},{id:this._id+"_itemPanelContainer"}),h=this.designPanelTag=ej.buildTag("div","",{width:t-this.itemPanelWidth-this.dataPanelWidth+"px",border:"0px solid #c8c8c8","border-left-width":"1px",height:"100%",float:"left","background-color":"#f9f9f9","box-sizing":"border-box"},{id:this._id+"_designSurfaceContainer"}),c=this.dataPanelTag=ej.buildTag("div","",{width:this.dataPanelWidth+"px",height:"100%",float:"right","box-sizing":"border-box","background-color":"white"},{id:this._id+"_dataPanelContainer"});this.element.append(this.designerContainer);this.element.append(this.dashboardViewerPanel);this.renderToolbar(this.designerContainer,t);this.designerContainer.append(n);n.append(s);n.append(h);n.append(c);this.setContainerSize();this.renderItemPanel(s);this.renderDesignPanel(h);this.renderDataConfigurationPanel(c);n.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this._id+"_designer_waiting_popup e-designer-loader"});ej.DashboardUtil.renderErrorToolTip(this._id)},t.prototype.newReportJSON=function(){this.isNewServerRpt=this.isOpenServerRpt=!1;ej.isNullOrUndefined(this.rdlParser)&&(this.rdlParser=new ej.DashboardDesignerUtility.RDLParser(this));this.rdlParser.newJsonReport();this.designerPanel.updateRptToolbarActions();this.designerPanel.updateDefaultProperties();t.editManager.reset();this.copiedItem=null;t.getInstance("DataSource").isLoaded()?t.getInstance("DataSource").pouplateDataSources():t.getInstance("DataSource").updateDataSourceJSON();t.getInstance("DataSet").isLoaded()?t.getInstance("DataSet").pouplateDataSets():t.getInstance("DataSet").updateDataSetJSON();t.getInstance("Parameter").isLoaded()?t.getInstance("Parameter").populateReportParameters():t.getInstance("Parameter").updateParameterJSON();t.getInstance("ImageManager").isLoaded()?t.getInstance("ImageManager").populateEmbeddedImages():t.getInstance("ImageManager").updateImageJSON();this.isNewRpt=!0},t.prototype.openRdlJSON=function(n,i){if(n&&n.indexOf("Sf_Exception")!==-1)ej.DashboardUtil.getInstance().alertDialog(this.locale.alertDialogTitle.report,this.locale.errorMessage.failedToOpenDashboard,IconType.errors,AlertType.Alert,!0,n);else{this.isOpenServerRpt=this.isNewServerRpt=this.isNewRpt=!1;this.rdlParser.deserialize(n);this.designerPanel.reset();var r=t.getInstance("DataSource"),u=t.getInstance("DataSet"),f=t.getInstance("Parameter"),e=t.getInstance("ImageManager");r.isLoaded()?r.pouplateDataSources():r.updateDataSourceJSON();u.isLoaded()?u.pouplateDataSets():u.updateDataSetJSON();f.isLoaded()?f.populateReportParameters():f.updateParameterJSON();e.isLoaded()?e.populateEmbeddedImages():e.updateImageJSON();this.designerPanel.renderReport(this.rdlParser);this.designerPanel.updateRptToolbarActions();t.editManager.reset();this.triggerEvents("reportOpened",{isServerReport:i?!0:!1,reportName:this.reportFileName});this.triggerEvents("reportModified",{reportAction:"Opened"});this.designerPanel.updateDefaultProperties()}},t.prototype.openRdlReport=function(n){n&&n.Status===!1?n.IsOldReport===!0?ej.DashboardUtil.getInstance().alertDialog(this.locale.alertDialogTitle.dashboardDesigner,n.Message,IconType.information,AlertType.Alert,!1,""):ej.DashboardUtil.getInstance().alertDialog(this.locale.alertDialogTitle.dashboardDesigner,this.locale.errorMessage.failedToOpenDashboard,IconType.errors,AlertType.Alert,!0,n.Message):(this.openRdlJSON(n.Data,!0),this.isOpenServerRpt=!0,this.isNewServerRpt=this.isNewRpt=!1)},t.prototype.checkdraft=function(){var n={};n.itemId=this.model.itemId;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/checkdraft/",{data:JSON.stringify(n)},{fnction:$.proxy(this.promptfordraft,this)},!0)},t.prototype.promptfordraft=function(n){this.model.mode!==ej.dashboardDesigner.mode.connection&&this.model.mode!==ej.dashboardDesigner.mode.datasource&&(ej.isNullOrUndefined(this.model.dashboardPath)||ej.DashboardUtil.isEmptyString(this.model.dashboardPath)||ej.isNullOrUndefined(this.model.serviceUrl)?n&&this.openDraft():n?ej.DashboardUtil.getInstance().alertDialog(this.locale.alertDialogTitle.AutoRecover,this.locale.alertWindowMesages.draftMessage,IconType.question,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmtoOpenDraft"}):this.openReport())},t.prototype.openDraft=function(){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/loaddraft/",{action:ej.DashboardUtil.DesignerAction.openServerReport,data:JSON.stringify(this.model.itemId)},{fnction:$.proxy(this.openRdlReport,this),indicator:[$.proxy(this.showDesignIndicator,this),$.proxy(this.hideDesignIndicator,this)]},!0,!0)},t.prototype.GetPreviewFeaturesJson=function(){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/previewfeatures/",{},{fnction:$.proxy(this.FillPreviewFeaturesJson,this)},!0)},t.prototype.FillPreviewFeaturesJson=function(n){n!=="No Data"&&(this.previewFeaturesJson=n)},t.prototype.GetIntermediateStatus=function(){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/GetIntermediateDBStatus/",{},{fnction:$.proxy(this.setIntermediateDBStatus,this)},!0,!1,!1)},t.prototype.setIntermediateDBStatus=function(n){this.intermediateDBStatus=n},t.prototype.confirmtoOpenDraft=function(n){n?this.openDraft():this.openReport()},t.prototype.newServerRDL=function(n,t){this.newReportJSON();t&&(this.model.serviceUrl=t);n&&n.length>0&&(this.isNewServerRpt=!0,this.isNewRpt=!1,this.reportFileName=n)},t.prototype.newRDLReport=function(n){this.reportFileName=n&&n.length>0?n:"Untitled Dashboard";this.isNewServerRpt=this.isOpenServerRpt=!1;this.newReportJSON();this.isNewRpt=!0},t.prototype.newSharedDataSet=function(n,i,r){var u=this;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.sharedDataSet,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.sharedDataSet,reportInfo:{dataSetRefer:i}})},{fnction:$.proxy(function(f){var o,e,h,s,c;if(f&&typeof f=="string"&&f.indexOf("Sf_Exception")!==-1)ej.DashboardUtil.getInstance().alertDialog(u.locale.alertDialogTitle.report,u.locale.errorMessage.failedToCreateDataSet,IconType.errors,AlertType.Alert,!0,f);else{if(o=t.getInstance("DataSet"),r?u.newServerRDL(n):u.newRDLReport(n),e=ejQueryDesigner.createDataSet(),h={__type:"Syncfusion.RDL.DOM.SharedDataSet",SharedDataSetReference:"",QueryParameters:[]},e.Name=o.getAvailableName(),e.Query=null,f.Fields.length>0)for(e.Fields=[],s=0;s<f.Fields.length;s++)c=f.Fields[s],c.__type="Syncfusion.RDL.DOM.Field",e.Fields.push(c);h.SharedDataSetReference=i;e.SharedDataSet=h;u.rdlParser.rdlJsonObj.DataSets.push(e);o.isLoaded()?(u.rdlParser.rdlJsonObj.DataSets.push(e),o.pouplateDataSets()):o.updateDataSetJSON()}},this),indicator:[$.proxy(this.showDesignIndicator,this),$.proxy(this.hideDesignIndicator,this)]})},t.prototype.createServerReport=function(n){if(!ej.isNullOrUndefined(this.rdlParser)&&n){var r=ej.isNullOrUndefined(this.model.itemId)?"":this.model.itemId,i=t.getInstance("MasterSlaveFilter");i.RefreshFilterSettings();i.RefreshMasterSlaveTitle();i.masterSlaveFilterSerializer(i.getFilterConfigurationInfoInstance().FilterConfigurationModel.MastersCollection,!0);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/savetoserver/",{data:JSON.stringify({id:!ej.isNullOrUndefined(n.id)&&!ej.DashboardUtil.isEmptyString(n.id)?n.id:ej.isNullOrUndefined(this.publishedId)||ej.DashboardUtil.isEmptyString(this.publishedId)?r:"",name:n.name,description:n.description,categoryId:n.categoryId,categoryName:n.category,widgetData:ej.DashboardDesignerUtility.Serialization.getWidgetJsonString(),isPublic:n.isPublic,isUnlisted:n.isUnlisted,filterInfo:i.masterSlaveFilterSerializer(i.getFilterConfigurationInfoInstance().FilterConfigurationModel.MastersCollection,!1)})},{fnction:$.proxy(this.saveRdlReport,this,n.eventType),indicator:[$.proxy(this.showDesignIndicator,this),$.proxy(this.hideDesignIndicator,this)]})}},t.prototype.editServerReport=function(n){var i=t.getInstance("MasterSlaveFilter"),r,u;i.RefreshFilterSettings();i.RefreshMasterSlaveTitle();i.masterSlaveFilterSerializer(i.getFilterConfigurationInfoInstance().FilterConfigurationModel.MastersCollection,!0);r=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name;u=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/savetoserver/",{action:ej.DashboardUtil.DesignerAction.saveServerReport,data:JSON.stringify({id:this.publishedId||this.model.itemId,name:r,description:u,categoryId:ej.isNullOrUndefined(this.serverCategory)?"":this.serverCategory.categoryId,dashboardPath:n,widgetData:ej.DashboardDesignerUtility.Serialization.getWidgetJsonString(),isPublic:this.model.serverSettings.isPublic||!1,isUnlisted:this.model.serverSettings.isUnlisted||!1,filterInfo:i.masterSlaveFilterSerializer(i.getFilterConfigurationInfoInstance().FilterConfigurationModel.MastersCollection,!1)})},{fnction:$.proxy(this.saveRdlReport,this,DashboardDesignerEvent.Save),indicator:[$.proxy(this.showDesignIndicator,this),$.proxy(this.hideDesignIndicator,this)]})},t.prototype.getDataSourceMap=function(){var r=[],n=t.getInstance("DataSource").datasources,i;if(n&&n.length>0)for(i=0;i<n.length;i++)n[i].DataSourceReference&&n[i].DataSourceReference.length>0&&r.push({Name:n[i].Name,DataSourceId:n[i].DataSourceReference});return r&&r.length>0?r:null},t.prototype.getDataSetMap=function(){var r=[],n=t.getInstance("DataSet").datasets,i;if(n&&n.length>0)for(i=0;i<n.length;i++)n[i].SharedDataSet&&n[i].SharedDataSet.SharedDataSetReference&&n[i].SharedDataSet.SharedDataSetReference.length>0&&r.push({Name:n[i].Name,DataSetId:n[i].SharedDataSet.SharedDataSetReference});return r&&r.length>0?r:null},t.prototype.saveServerReport=function(){this.createServerReport(this.serverCategory)},t.prototype.saveAsReport=function(){!this.isOpenServerRpt||ej.isNullOrUndefined(this.publishedId)||ej.DashboardUtil.isEmptyString(this.publishedId)?this.isNewServerRpt?this.rptToolbar.saveServerClick():(this.rptToolbar.saveServerClick(),t.getInstance("UndoManager").saveActionIndex()):this.editServerReport(this.model.dashboardPath)},t.prototype.saveRdlReport=function(n,i){var r=t.getInstance("BrowseDialog");i&&i.Status===!1?(r.dashboardSaveErr(i),this.model.dashboardPath="",this.isNewServerRpt=this.isNewRpt=!0):(r.closeDialog(),r.saveDashboardInfo(),ej.DashboardUtil.getInstance().alertDialog(this.locale.alertDialogTitle.DashboardSaved,this.locale.alertWindowMesages.saveSuccess,IconType.success,AlertType.Confirm,!1,"",{method:"navigateToDashboard",instance:this,dataInfo:{id:i.ItemId}}),this.isNewServerRpt=this.isNewRpt=!1,this.isOpenServerRpt=!0,this.publishedId=i.ItemId,t.getInstance("UndoManager").saveActionIndex(),this.triggerEvents("reportSaved",{reportAction:"Saved"}),this.triggerEvents("reportModified",{reportAction:"Saved"}));this.designerPanel.updateReportProperties();var u=!ej.isNullOrUndefined(this.serverCategory),f=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name,e=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description,o={categoryId:u?this.serverCategory.categoryId:"",categoryName:u?this.serverCategory.category:"",dashboardName:f,description:e,dashboardId:!ej.isNullOrUndefined(i.ItemId)&&i.ItemId!==""?i.ItemId:this.publishedId,version:i.Version,isPublic:!ej.isNullOrUndefined(this.model.serverSettings)&&!ej.isNullOrUndefined(this.model.serverSettings.isPublic)?this.model.serverSettings.isPublic:!1,isUnlisted:!ej.isNullOrUndefined(this.model.serverSettings)&&!ej.isNullOrUndefined(this.model.serverSettings.isUnlisted)?this.model.serverSettings.isUnlisted:!1};this._trigger("actionComplete",{eventType:n,data:o})},t.prototype.navigateToDashboard=function(n){var t=!ej.isNullOrUndefined(this.model.serverUrl)||this.model.serverUrl!==""?this.model.serverUrl:"",i,r;n&&!ej.isNullOrUndefined(this.serverCategory)?window.location.href=t+"/dashboards/"+this.serverCategory.category+"/"+this.serverCategory.name+"?showmydashboards=1":n&&(i=$('meta[name="dashboard:name"]'),r=$('meta[name="category:name"]'),window.location.href=t+"/dashboards/"+r.attr("content")+"/"+i.attr("content")+"?showmydashboards=1")},t.prototype.downloadReport=function(){var n=this.saveJSONData(),t=this.reportFileName.indexOf(".rdl")===-1?this.reportFileName+".rdl":this.reportFileName;ej.isNullOrUndefined(this.rdlParser)||(ej.DashboardUtil.doPostBack(this.model.serviceUrl+"/PostDesignerAction/",{reportPath:t,reportData:n},this),this.triggerEvents("reportSaved",{reportAction:"Download"}))},t.prototype.saveJSONData=function(){this.designerPanel.updateReportDef(this.rdlParser);return this.rdlParser.serialize(!1)},t.prototype.updateDashboardViewer=function(){var n=this.dashboardViewerPanel.find("#"+this._id+"_dashboardviewer");n.height(this.element.height()-40);n.width(this.element.width());n.data("ejDashboardViewer")&&n.data("ejDashboardViewer").resizeDashboard()},t.prototype.renderDesignPanel=function(n){this.designerPanel=new ej.DashboardDesignerUtility.DesignPanel(this,n)},t.prototype.updateFileStatus=function(n){var t={name:this.reportFileName,isModified:n};this.triggerEvents("reportModified",t)},t.prototype.renderToolbar=function(n,t){this.rptToolbar=new ej.DashboardDesignerUtility.Toolbar(n);this.rptToolbar.renderToolBar(n,this.designSurfaceHeaderHeight,t)},t.prototype.renderItemPanel=function(n){this.dragDropHelper=new ej.DashboardDesignerUtility.DragdropHelper(this);this.itemPanel=new ej.DashboardDesignerUtility.ItemPanel(this,n)},t.prototype.renderDataConfigurationPanel=function(n){this.dataConfigurationPanel=new ej.DashboardDesignerUtility.DataConfigurationPanel(n)},t.prototype.showDesignReport=function(){$("#"+this._id+"_reportviewer_toolbarContainer_target").length>0&&$("#"+this._id+"_reportviewer_toolbarContainer_hiddenlist").is(":visible")&&$("#"+this._id+"_reportviewer_toolbarContainer_target").mousedown();this.hideWaitingPopup($("#"+this._id+"_reportviewer_loadingIndicator"));this.hideWaitingPopup($("#"+this._id+"_reportviewer_viewerContainer"));this.designerContainer.css("display","block");this.dashboardViewerPanel.css("display","none");this.resizeObj.isDesigner&&(this.setContainerSize(),this.updateDesignerSize(),this.resizeObj.isDesigner=!1)},t.prototype.PreviewDashboard=function(){var n=this,i;if(t.getInstance("MasterSlaveFilter").RefreshFilterSettings(),$("#"+this._id+"_toolBar_target").length>0&&$("#"+this._id+"_toolBar_hiddenlist").is(":visible")&&$("#"+this._id+"_toolBar_target").mousedown(),!this.model.viewerSettings||ej.isNullOrUndefined(this.model.viewerSettings.serviceUrl)){ej.DashboardUtil.getInstance().alertDialog(this.locale.alertDialogTitle.dashboardDesigner,this.locale.errorMessage.previewServiceUrlNotSet,IconType.errors,AlertType.Alert,!0,this.locale.errorMessage.previewServiceUrlNotSetDesc);return}i=t.getInstance("MasterSlaveFilter");i.RefreshMasterSlaveTitle();ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/GetPreviewDashboard",{data:JSON.stringify({widgetData:ej.DashboardDesignerUtility.Serialization.getWidgetJsonString(),filterInfo:i.masterSlaveFilterSerializer(i.getFilterConfigurationInfoInstance().FilterConfigurationModel.MastersCollection,!1)})},{fnction:$.proxy(function(t){ej.isNullOrUndefined(t)?ej.DashboardUtil.getInstance().alertDialog(n.locale.alertDialogTitle.dashboardDesigner,n.locale.errorMessage.widgetNotConfigured,IconType.warning,AlertType.Alert,!1,""):(n.hideWaitingPopup(),n.showViewer(t),n.resizeObj.isPreview&&(n.updateDashboardViewer(),n.resizeObj.isPreview=!1))},this),indicator:[$.proxy(this.showDesignIndicator,this),$.proxy(this.hideDesignIndicator,this)]})},t.prototype.showViewer=function(n){var i=$("#"+this._id+"_dashboardviewer"),r=i.data("ejDashboardViewer");ej.isNullOrUndefined(r)?(this.dashboardViewerPanel.width("100%"),this.dashboardViewerPanel.height("100%"),this.renderViewerToolbar(),i=ej.buildTag("div","",{width:"100%",height:"calc(100% - 40)",position:"relative"},{id:this._id+"_dashboardviewer"}),this.dashboardViewerPanel.append(i),i.ejDashboardViewer({serverUrl:this.model.serverUrl,serviceUrl:this.model.viewerSettings.serviceUrl,dashboardPath:n,beforeDashboardFetch:$.proxy(this.beforeDashboardFetch,this),beforeSend:$.proxy(this.beforeDashboardFetch,this),enableClientSideCache:!1,showGetLinkIcon:!1,interactionSettings:{allowHistoryMaintenance:!1},accessToken:this.model.serviceAuthorizationToken,_isWebDesigner:!0,_enableHyperLinkOnErrorMessage:!1})):(r.model.dashboardPath=n,r.redrawDashboard());t.editManager.reset();this.designerContainer.css("display","none");this.dashboardViewerPanel.css("display","block")},t.prototype.beforeDashboardFetch=function(n){n.customHeaders.push({Key:"Authorization",Value:this.model.serviceAuthorizationToken})},t.prototype.renderViewerToolbar=function(){var n=ej.buildTag("div.e-dashboarddesigner-preview-toolbar","",{},{}),t=ej.buildTag("ul.e-reportviewer-toolbarul e-ul e-horizontal ","",{float:"right","margin-right":"10px"},{}),i=ej.buildTag("div.e-reportdesigner-ejdesigner","",{display:"block"},{id:this._id+"_viewer_editdiv"}),r=ej.buildTag("button.close-preview e-dbrd-hand-cursor",this.locale.menuBar.designButtonText,{background:"#428bca",color:"white","padding-left":"5px","padding-right":"5px"},{id:this._id+"_designButton"});t.append(i);i.append(r);n.append(t);this.dashboardViewerPanel.append(n);r.ejButton({showRoundedCorner:!1,size:"small",width:"120px",height:"27px",contentType:ej.ContentType.TextAndImage,cssClass:"e-flat e-designer-designbutton",prefixIcon:"e-toolbarPreview e-toolbarClose e-reportdesigner-close",click:$.proxy(this.showDesignReport,this)});this.rptToolbar.showDesign(this.model.toolbarSettings.items&ej.DashboardDesigner.ToolbarItems.EditDesign)},t.prototype.viewerAjaxLoad=function(n){if(n.inVokemethod==="_reportLoaded"){var i=[],t={headers:i,data:null,reportDesignerToken:this.authenticationToken,serviceAuthorizationToken:this.model.serviceAuthorizationToken};this.triggerEvents("ajaxBeforeLoad",t);n.data=t.data;n.serviceAuthorizationToken=t.serviceAuthorizationToken;i.push({Key:"reportDesignerToken",Value:t.reportDesignerToken});n.headers=i}},t.prototype.updateDescription=function(){this.dashboardDescription=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description=this.model.dashboardDescription},t.prototype.updateDashboardName=function(){this.reportFileName=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name=this.model.dashboardName},t.prototype.setCultureInfo=function(n){this.model.localeSettings.culture=n;this.updateCulture(n);t.getInstance("ItemPanel").updateCulture(n);t.getInstance("ToolBar").updateCulture(n);t.getInstance("PropertyPanel").updateCulture(n);t.getInstance("DataSource").updateCulture(n);t.getInstance("DataSet").updateCulture(n);t.getInstance("ImageManager").updateCulture(n)},t.prototype.updateCulture=function(n){var i=this._id,t;t=ej.DashboardDesigner.Locale[n]?ej.DashboardDesigner.Locale[n].menuBar:ej.DashboardDesigner.Locale["en-US"].menuBar;$("#"+i+"_previewButton").text(t.previewText);$("#"+i+"_Label_newMenuItem").text(t.newMenu);$("#"+i+"_Label_openMenuItem").html(t.openMenu);$("#"+i+"_Label_saveMenuItem").html(t.saveMenu);$("#"+i+"_createFileContainer").html(t.createReport);$("#"+i+"_openFileContainer").html(t.openReport);$("#"+i+"_CreateButton").html(t.createButtonText);$("#"+i+"_designButton").html(t.designButtonText)},t.prototype._destroy=function(){ej.destroyWidgets(this.element);ej.DashboardUtil.destroyEjObjects(this.element);this.unwiredEvents();this.designerPanel&&this.designerPanel.destroy();this.resetInstance();this.element.html("")},t.prototype.resetInstance=function(){clearInterval(t.getInstance("PropertyPanel").groupInterval);ej.DashboardDesignerUtility.ReportAction.reportAction=null;ej.DashboardDesignerUtility.PropertyPanel.propertyPanel=null;ej.DashboardDesignerUtility.UndoManager.undoManager=null;ej.DashboardDesignerUtility.DataSource.dataSource=null;ej.DashboardDesignerUtility.DataSet.dataSet=null;ej.DashboardDesignerUtility.DataConfigurationPanel.dataPanel=null;ej.DashboardDesignerUtility.ImageManager.imageSource=null;ej.DashboardDesignerUtility.CredentialDialog.credential=null;ej.DashboardDesignerUtility.SQLDataSource.sqldataSource=null;ej.DashboardDesignerUtility.AzureSQLDataWarehouseDataSource.azuresqldatawarehousedataSource=null;ej.DashboardDesignerUtility.MongoDB.mongoDB=null;ej.DashboardDesignerUtility.MySQLDataSource.mysqlDataSource=null;ej.DashboardDesignerUtility.AmazonAuroraDataSource.amazonAuroraDataSource=null;ej.DashboardDesignerUtility.GoogleCloudDataSource.googleCloudDataSource=null;ej.DashboardDesignerUtility.SqlCeDataSource.sqlcedataSource=null;ej.DashboardDesignerUtility.XMLDataSource.xmldataSource=null;ej.DashboardDesignerUtility.ODBCDataSource.odbcdataSource=null;ej.DashboardDesignerUtility.ORACLEDataSource.oracledataSource=null;ej.DashboardDesignerUtility.OLEDBDataSource.oledbdataSource=null;ej.DashboardDesignerUtility.SharedDataSource.shareddataSource=null;ej.DashboardDesignerUtility.ODATADataSource.odatadataSource=null;ej.DashboardDesignerUtility.PSQLDataSource.psqldataSource=null;ej.DashboardDesignerUtility.SASSDataSource.sassdataSource=null;ej.DashboardDesignerUtility.SharedDataSet.shareddataSet=null;ej.DashboardDesignerUtility.SortDialog.sortDialog=null;ej.DashboardDesignerUtility.QueryJoiner.queryJoiner=null;ej.DashboardDesignerUtility.StoreParameter.storeParameter=null;ej.DashboardDesignerUtility.DataConfiguration.dataConfigSource=null;ej.DashboardDesignerUtility.QueryFilter.queryFilter=null;ej.DashboardDesignerUtility.QueryParameter.queryParameter=null;ej.DashboardDesignerUtility.Parameter.reportParameter=null;ej.DashboardDesignerUtility.BrowseDialog.fileBrowse=null;ej.DashboardDesignerUtility.QueryExpression.queryExpression=null;ej.DashboardDesignerUtility.FormatDialog.format=null;ej.DashboardDesignerUtility.FilterConfiguration.filterConfig=null;ej.DashboardDesignerUtility.FileDatasource.fileDatasource=null;ej.DashboardDesignerUtility.MeasureFilter.measureFilter=null;ej.DashboardDesignerUtility.WebDatasource.webDatasource=null;ej.DashboardDesignerUtility.DimensionFilter.dimensionFilter=null;ej.DashboardDesignerUtility.ConditionalFormat.conditionalFormat=null;ej.DashboardDesignerUtility.KPIWindow.kpiwindow=null;ej.DashboardDesignerUtility.MasterSlaveFilterConfiguration.masterSlaveFilter=null;ej.DashboardDesignerUtility.FilterConfigurationInfo.filterConfigurationInfo=null;ej.DashboardDesignerUtility.CustomLegendSettings.customLegendSettings=null;ej.DashboardDesignerUtility.EditColumnNames.editColumnNames=null;ej.DashboardDesignerUtility.RelativeDateFilter.relativeDateFilter=null;ej.DashboardDesignerUtility.RelativeDates.relativeDates=null;ej.DashboardDesignerUtility.ContainerPropertyItem.container=null;ej.DashboardDesignerUtility.GridTemplate.gridtemplate=null;ej.DashboardDesignerUtility.ColorPalette.colorpalette=null;ej.DashboardDesignerUtility.DateRangePopup.dateRangePopup=null;ej.DashboardDesignerUtility.RangeFilterDialog.rangeFilterDialog=null;ej.DashboardDesignerUtility.MultiSelectionComboBox.multiSelectionComboBox=null;t.dashboardDesigner.designerPanel=null;t.dashboardDesigner.rdlParser=null;t.dashboardDesigner.itemPanel=null;t.dashboardDesigner.dragDropHelper=null;t.dashboardDesigner.rptToolbar=null;t.dashboardDesigner=null},t.prototype.showItemPopup=function(n){this.element.append(n)},t.prototype.wiredEvents=function(){this._on(this.element,"mousedown",".e-reportdesigner-ItemPanel .e-itempanel-report",this.hideItemPanelToolTip);this._on($(this.element),"click",".e-dashboarddesigner .e-remove-control-filter",this.clearMasterFilter);this._on($(document),"keydown",this.designerKeyDown);this._on($(document),"mousedown",this.designerMouseDown);this._on($(window),"resize",this.designerResize);this._on(this.element,"mouseover",".e-dbrd-designer-hoverable",this.showTooltip);this._on(this.element,"mouseleave",".e-dbrd-designer-hoverable",this.hideTooltip);this._on($(document),"keypress",".e-designer-dialog",this.keyEvent);this._on($(document),"keypress",".e-designer-alertbox",this.alertKeyEvent)},t.prototype.unwiredEvents=function(){this._off(this.element,"mousedown",".e-reportdesigner-ItemPanel .e-itempanel-report",this.hideItemPanelToolTip);this._off($(this.element),"click",".e-dashboarddesigner .e-remove-control-filter",this.clearMasterFilter);this._off($(document),"keydown",this.designerKeyDown);this._off($(window),"resize",this.designerResize);this._off($(document),"mousedown",this.designerMouseDown);this._off(this.element,"mouseover",".e-dbrd-designer-hoverable",this.showTooltip);this._off(this.element,"mouseleave",".e-dbrd-designer-hoverable",this.hideTooltip);this._off($(document),"keypress",".e-designer-dialog",this.keyEvent);this._off($(document),"keypress",".e-designer-alertbox",this.alertKeyEvent)},t.prototype.hideItemPanelToolTip=function(n){var i=$(n.currentTarget),t=i.data("ejTooltip");ej.isNullOrUndefined(t)||t.hide()},t.prototype.keyEvent=function(n){var t,r,i,u;if(n.keyCode===13&&!$(n.currentTarget).find(".e-designer-okbtn").hasClass("e-disable")){for(t=!1,r=$(n.currentTarget).find(".e-dropdownlist"),i=0;i<r.length;i++)if(u=$(r[i]).data("ejDropDownList"),t=!ej.isNullOrUndefined(u)&&$(u.popupListWrapper[0]).css("display")==="block",t)break;t||$(n.currentTarget).find(".e-designer-okbtn").click()}},t.prototype.alertKeyEvent=function(n){n.keyCode===13&&$(n.currentTarget).find(".e-designer-alert-okbtn").click()},t.prototype.clearMasterFilter=function(){var n=t.getInstance("DesignPanel").selectedReportItems[0],i=ej.DashboardUtil.getWidgetInstance(n);this.clearmasterFilter=!0;i.clearFilter()},t.prototype.designerResize=function(){var t=ej.browserInfo(),n=this;this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){var e=n.isWidth?n.element[0].parentElement.style.width:n.element[0].style.width,o=n.isHeight?n.element[0].parentElement.style.height:n.element[0].style.height,i=$(n.element).height(),r=$(n.element).width(),u,f;o.indexOf("%")!==-1?(n.isPercentHeight=parseFloat(o),u=n.isHeight?$(n.element).parent().height():i,i=n.isHeight?u:u/100*n.isPercentHeight):n.element[0].parentElement.clientHeight!==0&&n.isPercentHeight!==-1?i=n.isHeight?n.element[0].parentElement.clientHeight:n.element[0].parentElement.clientHeight/100*n.isPercentHeight:n.isHeight&&n.element[0].parentElement.clientHeight!==0?i=n.element[0].parentElement.clientHeight:t.name==="msie"&&t.version==="8.0"&&n.element[0].parentElement.clientHeight!==0&&(i=n.element[0].parentElement.clientHeight);n.element.height(i);e.indexOf("%")!==-1?(n.isPercentWidth=parseFloat(e),f=n.isWidth?$(n.element).parent().width():r,r=n.isWidth?f:f/100*n.isPercentWidth):n.element[0].parentElement.clientWidth!==0&&n.isPercentWidth!==-1?r=n.isWidth?n.element[0].parentElement.clientWidth:n.element[0].parentElement.clientWidth/100*n.isPercentWidth:n.isWidth&&n.element[0].parentElement.clientWidth!==0?r=n.element[0].parentElement.clientWidth:t.name==="msie"&&t.version==="8.0"&&n.element[0].parentElement.clientWidth!==0&&(r=n.element[0].parentElement.clientWidth);n.element.width(r);n.updateSize();n.designerPanel.updateDesignPanelSize();ej.DashboardUtil.refreshIndicator(n.element);n.hideAllPopup()},200)},t.prototype.updateSize=function(){this.setContainerSize();this.dashboardViewerPanel.is(":visible")?(this.updateDashboardViewer(),this.resizeObj.isDesigner=this.resizeObj.isQueryDesigner=!0,this.resizeObj.isPreview=!1):this.designerContainer.is(":visible")&&$("#"+this._id+"_queryDesigner").is(":visible")?(this.rptToolbar.updateSize(),this.updateQueryDesigner(),this.resizeObj.isPreview=this.resizeObj.isDesigner=!0,this.resizeObj.isQueryDesigner=!1):(this.resizeObj.isDesigner=!1,this.updateDesignerSize(),this.resizeObj.isPreview=this.resizeObj.isQueryDesigner=!0)},t.prototype.updateDesignerSize=function(){this.rptToolbar.updateSize();t.getInstance("ItemPanel").updateSize();t.getInstance("DesignPanel").updatePanelSize();t.getInstance("DataConfigurationPanel").updateSize()},t.prototype.updateConfigPanel=function(n){var t=$("#"+this._id+"_designerConfigurationPanel"),f;if(n){this.lastConfigSize={panelSize:this.dataPanelTag.width(),containerSize:t.width()};var i=parseFloat(this.designAreaTag.css("border-left-width")),r=parseFloat(this.designAreaTag.css("border-right-width")),u=this.element.width();this.itemPanelTag.css("display","none");this.designPanelTag.css("display","none");$("#"+this._id+"_configurationHeaderPanel").css("display","none");$("#"+this._id+"_collapse_wrapper").css("display","none");this.dataPanelTag.width(u-(i+r));t.width(u-(i+r))}else if(this.lastConfigSize){var i=parseFloat(this.designAreaTag.css("border-left-width")),r=parseFloat(this.designAreaTag.css("border-right-width")),u=this.element.width();this.itemPanelTag.css("display","block");this.designPanelTag.css("display","block");$("#"+this._id+"_configurationHeaderPanel").css("display","block");$("#"+this._id+"_collapse_wrapper").css("display","block");this.dataPanelTag.width(this.lastConfigSize.panelSize);t.width(this.lastConfigSize.containerSize);this.lastConfigSize=null;f=u-(this.itemPanelTag.width()+this.dataPanelTag.width());this.designPanelTag.css({width:f-(i+r)+"px"})}},t.prototype.updateDesignPanel=function(){var n=this.element.width(),t=parseFloat(this.designAreaTag.css("border-left-width")),i=parseFloat(this.designAreaTag.css("border-right-width")),r=n-(this.itemPanelTag.width()+this.dataPanelTag.width());this.designPanelTag.css({width:r-(t+i)+"px"})},t.prototype.updateQueryDesigner=function(){var f=this.element.height(),n=this.element.width(),e=this.toolbarTag.height(),o=parseFloat(this.toolbarTag.css("border-top-width")),s=parseFloat(this.toolbarTag.css("border-bottom-width")),h=parseFloat(this.designAreaTag.css("border-top-width")),c=parseFloat(this.designAreaTag.css("border-bottom-width")),i=f-e-(o+s)+1,l=i-(c+h),r=parseFloat(this.designAreaTag.css("border-left-width")),u=parseFloat(this.designAreaTag.css("border-right-width"));this.designAreaTag.css({height:this.model.mode===ej.dashboardDesigner.mode.datasource?"100%":i+"px",width:n+"px"});$("#"+this._id+"_queryDesigner").css({width:n+"px",height:this.model.mode===ej.dashboardDesigner.mode.datasource?"100%":l+"px"});this.dataPanelTag.width(n-(r+u));$("#"+this._id+"_designerConfigurationPanel").width(n-(r+u));t.getInstance("QueryDesigner").updateSize()},t.prototype.updateQueryDesignerSize=function(){this.resizeObj.isQueryDesigner&&(this.updateQueryDesigner(),this.resizeObj.isQueryDesigner=!1)},t.prototype.setContainerSize=function(){var r=this.element.height(),t=this.element.width(),u=this.toolbarTag.height(),f=parseFloat(this.toolbarTag.css("border-top-width")),e=parseFloat(this.toolbarTag.css("border-bottom-width")),o=parseFloat(this.designAreaTag.css("border-top-width")),s=parseFloat(this.designAreaTag.css("border-bottom-width")),h=parseFloat(this.designAreaTag.css("border-left-width")),c=parseFloat(this.designAreaTag.css("border-right-width")),i=r-u-(f+e)+1,n=i-(s+o),l=t-(this.itemPanelTag.width()+this.dataPanelTag.width());this.designAreaTag.css({height:this.model.mode===ej.dashboardDesigner.mode.datasource?"100%":i+"px",width:t+"px"});this.itemPanelTag.height(n);this.model.mode!==ej.dashboardDesigner.mode.datasource&&this.dataPanelTag.height(n);this.designPanelTag.css({height:this.model.mode===ej.dashboardDesigner.mode.datasource?"100%":n+"px",width:l-(h+c)+"px"})},t.prototype.showToolbar=function(n){n?($("#"+this._id+"_toolBar").data("ejToolbar").enable(),ej.DashboardUtil.buttonEnable($("#"+this._id+"_previewButton"),!0)):($("#"+this._id+"_toolBar").data("ejToolbar").disable(),ej.DashboardUtil.buttonEnable($("#"+this._id+"_previewButton"),!1))},t.prototype.designerMouseDown=function(n){var i=$(n.target),f=i.parents("ul.e-designer-menu"),e,r,u;f.length>0?(e=this.element.find(".e-designer-menu:visible").not(f),e.hide()):i.hasClass("e-designer-click")?(r=i.attr("e-target"),this.hideMenuExceptItem(r),$(".e-designer-tooltip:visible").css("display","none")):i.closest(".e-designer-click").length>0?(r=i.closest(".e-designer-click").attr("e-target"),this.hideMenuExceptItem(r),$(".e-designer-tooltip:visible").css("display","none")):$(".e-multiselect-popup-container-visible").length>0?(u=$(".e-multiselect-popup-container-visible"),!i.is(u)&&!i.is($(".e-multiselect-dropdown-item"))&&i.closest(".e-multiselect-dropdown-item").length<1&&i.closest(".e-multiselect-popup-container").length<1&&(t.getInstance("MultiSelectionComboBox").hideMultiSelectionWaitingPopup(),u.css("display","none"),$(".e-multiselect-dropdown-item").find(".e-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"),u.removeClass("e-multiselect-popup-container-visible"))):$(".e-daterange-popup").length>0?this.isHideDateRangePopup(i)&&($(".e-daterange-popup").css("display","none"),$(".e-popup-button").find(".e-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down")):($(".e-designer-menu:visible").hide(),$(".e-designer-tooltip:visible").css("display","none"));i.hasClass("e-dbrd-file-info-container")||i.hasClass("e-dbrd-file-info-container-title")||i.hasClass("e-dbrd-designer-refresh-ds")||i.hasClass("e-dbsize")||i.hasClass("e-dbrd-file-icon-container")||i.parents(".e-dbrd-file-info-container").length!==0||(this.element.find("#"+this._id+"_fileInfoContainer").css("display","none"),this.element.find("#"+this._id+"_fileIconContainer").removeClass("e-active"));this.designerPanel.addFocusClass(i.closest(".e-dashboarddesigner-designcanvas").length>0,!0)},t.prototype.isHideDateRangePopup=function(n){var t=!1,i=$(".e-daterange-popup-visible");return n.not(i)&&n.not($(".e-popup-button"))&&n.closest(".e-popup-button").length<1&&n.closest(".e-daterange-popup").length<1&&n.closest(".e-popup-container").length<1&&n.closest(".e-datepicker-days").length<1&&n.closest(".e-datepicker-months").length<1&&n.closest(".e-datepicker-years").length<1&&n.closest(".e-datepicker-allyears").length<1&&(t=!0),t},t.prototype.hideMenuExceptItem=function(n){if(!ej.isNullOrUndefined(n)&&n.length>0){var t=void 0;t=n==="e-exp-menu"?$(".e-exp-menu:visible"):n==="e-aggr-menu"?$(".e-aggr-menu:visible"):$("#"+n);$(".e-designer-menu:visible").not(t).hide()}else $(".e-designer-menu:visible").hide()},t.prototype.hideAllPopup=function(){var n=$(".e-multiselect-popup-container-visible"),i=$(".e-daterange-popup:visible"),t;$(".e-designer-tooltip:visible").css("display","none");$(".e-dbrd-control").find(".e-dbrd-canvas.e-dbrd-control").is(":visible")&&$(".e-dbrd-control").find(".e-dbrd-canvas.e-dbrd-control").css("display","none");$(".e-designer-menu").is(":visible")&&$(".e-designer-menu:visible").hide();n.length>0&&n.is(":visible")&&(n.css("display","none"),t=$(".e-multiselect-dropdown-item").find(".e-arrow-sans-up"),t.removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"),n.removeClass("e-multiselect-popup-container-visible"));i.length>0&&(i.css("display","none"),t=$(".e-popup-button").find(".e-arrow-sans-up"),t.removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down"))},t.prototype.showDesignIndicator=function(){this.designAreaTag.data("ejWaitingPopup").show();this.showToolbar(!1)},t.prototype.hideDesignIndicator=function(){this.designAreaTag.data("ejWaitingPopup").hide();this.showToolbar(!0)},t.prototype.isTextfocused=function(){var n=$(document.activeElement);return n.prop("type")==="text"||n.prop("type")==="textarea"||n.prop("contenteditable")==="true"||n.prop("type")==="password"},t.prototype.designerKeyDown=function(n){var u=this.element.find("#"+this._id+"_designCanvas"),f=this.isWindowOpened(),o=this.isTextfocused(),i,r,l,e,a,v,h,c,b,k;if(n.keyCode!==9){if(i=this.element.find("#"+this._id+"_div_designerTool"),this.designPanelTag.is(":visible")){if(!o&&!f)if(r=t.getInstance("UndoManager"),(n.ctrlKey&&n.keyCode===90||n.altKey&&n.keyCode===90)&&r.isUndo())n.preventDefault(),r.undo(),this.designerPanel.updateReportProperties();else if((n.ctrlKey&&n.keyCode===89||n.altKey&&n.keyCode===89)&&r.isRedo())n.preventDefault(),r.redo(),this.designerPanel.updateReportProperties();else if(n.ctrlKey&&n.keyCode===88)this.designerPanel.cutItem();else if(n.ctrlKey&&n.keyCode===67)this.designerPanel.copyItem();else if(n.ctrlKey&&n.keyCode===86)this.designerPanel.pasteItem();else if(n.keyCode===46)this.designerPanel.removeItem();else if(n.ctrlKey&&n.keyCode===83)this.saveAsReport(),n.preventDefault();else if(n.ctrlKey&&n.keyCode===79)this.rptToolbar.browseDiskReport();else if(n.ctrlKey&&n.keyCode===70)n.preventDefault(),this.rptToolbar.openFilterActionWindow();else if(n.altKey&&n.keyCode===116)n.preventDefault(),this.PreviewDashboard();else if(n.keyCode===115){n.preventDefault();l=this.dataConfigurationPanel.getPanelItem("Properties");this.dataConfigurationPanel.onGroupItemsClick(l)}else n.ctrlKey&&n.shiftKey&&n.keyCode===68?(n.preventDefault(),t.getInstance("DataConfiguration").createNewDataSource(null)):n.ctrlKey&&n.shiftKey&&n.keyCode===82?(n.preventDefault(),this.rptToolbar.openRefreshSettings()):n.ctrlKey&&(n.keyCode===80||n.keyCode===68)&&this.element.find("#"+this._id+"_propertyPanel").is(":visible")?(n.preventDefault(),e=t.getInstance("PropertyPanel"),a=e.getPropertyTab(),n.ctrlKey&&n.keyCode===80?e.setPropertyTabIndex(0):n.ctrlKey&&n.keyCode===68&&a.model.hiddenItemIndex.length===0&&e.setPropertyTabIndex(1)):n.keyCode>=37&&n.keyCode<=40&&(u.is(":focus")||u.hasClass("e-designer-canvas-focus"))&&this.designPanelTag.is(":visible")&&!f&&(v=this.isKeyValidatation(n),v||(n.preventDefault(),n.shiftKey&&n.keyCode===37?this.panelKeyDown("width","left"):n.shiftKey&&n.keyCode===39?this.panelKeyDown("width","right"):n.shiftKey&&n.keyCode===38?this.panelKeyDown("height","top"):n.shiftKey&&n.keyCode===40?this.panelKeyDown("height","bottom"):n.keyCode===37?this.panelKeyDown("left","left"):n.keyCode===39?this.panelKeyDown("left","right"):n.keyCode===38?this.panelKeyDown("top","top"):n.keyCode===40&&this.panelKeyDown("top","bottom")))}else if(this.element.find("#"+this._id+"_queryDesigner").is(":visible")&&i.length>0&&!o&&!f){n.preventDefault();var s=t.getInstance("QueryDesigner"),y=i.find("#"+this._id+"_dataset_tool_join"),p=i.find("#"+this._id+"_dataset_tool_filter"),w=i.find("#"+this._id+"_dataset_tool_exp");n.ctrlKey&&n.keyCode===74&&y.length>0&&!y.hasClass("e-disable")?s.openJoinEditor():n.ctrlKey&&n.keyCode===73&&p.length>0&&!p.hasClass("e-disable")?s.openInitialFilter():n.ctrlKey&&n.keyCode===69&&w.length>0&&!w.hasClass("e-disable")&&s.openQueryExpression()}}else(u.is(":focus")||u.hasClass("e-designer-canvas-focus"))&&this.designPanelTag.is(":visible")&&!f&&(n.shiftKey&&n.keyCode===9?this.designerPanel.previousWidgetItem(n):n.keyCode===9&&this.designerPanel.nextWidgetItem(n));h=$(".e-query-expression");h.is(":visible")&&(o||(n.preventDefault(),c=t.getInstance("QueryExpression"),n.ctrlKey&&n.keyCode===73?c.addExpression(null):n.ctrlKey&&n.keyCode===68&&(b=h.find("#"+this._id+"_query_exp_li_container"),k=b.find(".e-list-text.e-expression-user-selection-active").text(),c.removeExpression(k))))},t.prototype.panelKeyDown=function(n,t){if(this.designerPanel.selectedReportItems.length>0)switch(n){case"left":this.designerPanel.updateElementLeft(t);break;case"top":this.designerPanel.updateElementTop(t);break;case"width":this.designerPanel.updateElementWidth(t);break;case"height":this.designerPanel.updateElementHeight(t)}},t.prototype.isKeyValidatation=function(n){var t=!1,r=$(n.target).closest(".e-dbrd-content-container").length>0,i;return r&&(i=$(n.target).closest(".e-reportitem"),i.hasClass("e-combobox-item")?t=!0:i.hasClass("e-rangeslider-item")?t=!0:i.hasClass("e-grid-item")&&(t=!0)),$(".e-dashboarddatepicker.e-dashboarddatepicker-popup-wrapper").each(function(n,i){$(i).css("display")==="block"&&(t=!0)}),t},t.prototype.isWindowOpened=function(){return $(".e-designer-dialog:visible").length>0||$(".e-designer-ejdialog:visible").length>0},t.prototype.triggerEvents=function(n,t){var i,r=t;switch(n){case"ajaxBeforeLoad":i=this._trigger(n,r);break;case"ajaxSuccess":i=this._trigger(n,r);break;case"ajaxError":i=this._trigger(n,r);break;case"toolbarClick":i=this._trigger(n,r);break;case"openReportClick":i=this._trigger(n,r);break;case"saveReportClick":i=this._trigger(n,r);break;case"toolbarRendering":i=this._trigger(n,r);break;case"reportModified":i=this._trigger(n,r);break;case"reportOpened":i=this._trigger(n,r);break;case"reportSaved":i=this._trigger(n,r);break;case"queryDesignerRendered":i=this._trigger(n,r);break;case"beforeDataSourceUIRender":i=this._trigger(n,r)}return i},t.prototype.hideWaitingPopup=function(n){if(n&&n.length>0){var t=n.data("ejWaitingPopup");t&&t.hide()}else $("."+this._id+"_designer_waiting_popup:visible").hide()},t.prototype.isReportServerLogin=function(){return this.reportServerInfo&&this.reportServerInfo.token?!0:!1},t.prototype.getAuthenticationToken=function(n){return ej.getGuid(n+"_")},t.prototype.showDataSourcetip=function(){var t=$("#"+this._id+"_designer_right_tooltip"),r=$("#"+this._id+"_Datasource_wrapper"),n;if(t.length===0){n=ej.buildTag("div.e-designer-right-tip e-tooltip-wrap e-widget e-designer-tooltip","",{},{id:this._id+"_designer_right_tooltip"});$(document.body).append(n);var u=ej.buildTag("div.e-arrowTip","",{}),o=ej.buildTag("div.e-arrowTipOuter","",{}),s=ej.buildTag("div.e-arrowTipInner","",{}),i=ej.buildTag("div.e-tipContainer"),h=ej.buildTag("div","We should create the Datasource to create new Dataset.",{},{}),c=ej.buildTag("div","",{height:"1px",border:"0px Solid","border-top-width":"0.5px","border-color":"white",margin:"9px 3px 3px 3px"},{}),f=ej.buildTag("div","",{width:"100%","text-align":"center",padding:"4px 0px"}),e=ej.buildTag("button.e-designer-content e-dbrd-hand-cursor","Add DataSource",{"background-color":"#0C8BE2","border-color":"#0C8BE2",color:"white"},{id:this._id+"_newDataSourceButton"});u.append(o).append(s);i.append(h);i.append(c);i.append(f);f.append(e);n.append(i);n.append(u);t=n;e.ejButton({width:"142px",height:"25px",showRoundedCorner:!0,contentType:ej.ContentType.TextAndImage,prefixIcon:"e-icon e-plus",size:"small",click:$.proxy(this.newDataSource,this)})}t.css({display:"block",top:r.offset().top,left:r.offset().left-(t.width()+20)})},t.prototype.newDataSource=function(){var n=t.getInstance("DataSet");t.getInstance("DataConfigurationPanel").showConfigurationPanel(!0,"DataSet");n.switchPanel(PanelList.DataType)},t.prototype.updateRefreshSetting=function(n){this.refreshSetting=n},t.prototype.undo=function(){t.getInstance("UndoManager").undo()},t.prototype.canUndo=function(){return t.getInstance("UndoManager").isUndo()},t.prototype.redo=function(){t.getInstance("UndoManager").redo()},t.prototype.canRedo=function(){return t.getInstance("UndoManager").isRedo()},t.prototype.cut=function(){this.designerPanel.cutItem()},t.prototype.canCut=function(){return this.designerPanel.canCut()},t.prototype.copy=function(){this.designerPanel.copyItem()},t.prototype.canCopy=function(){return this.designerPanel.canCopy()},t.prototype.delete=function(){this.designerPanel.copyItem()},t.prototype.canDelete=function(){return this.designerPanel.canCopy()},t.prototype.paste=function(){this.designerPanel.pasteItem()},t.prototype.canPaste=function(){return this.designerPanel.canCopy()},t.prototype.showPreview=function(){this.PreviewDashboard()},t.prototype.showDesign=function(){this.showDesignReport({})},t.prototype.hasReportChanges=function(){return t.editManager.hasItemChanges()},t.prototype.isServerReport=function(){return this.isNewServerRpt||this.isOpenServerRpt},t.prototype.isNewReport=function(){return this.isNewServerRpt||this.isNewRpt},t.prototype.isNewServerReport=function(){return this.isNewServerRpt},t.prototype.saveToDevice=function(){this.downloadReport()},t.prototype.newReport=function(n,t){ej.isNullOrUndefined(n)||n&&n.length===0?this.rptToolbar.newReportClick():n&&t&&t.length>0?this.newSharedDataSet(n,t,!1):this.newRDLReport(n)},t.prototype.newServerReport=function(n,t){var i=this;ej.isNullOrUndefined(n)||n&&n.length===0?this.rptToolbar.openNewDialog(function(n){i.newServerRDL(n.name)}):n&&t&&t.length>0?this.newSharedDataSet(n,t,!0):this.newServerRDL(n)},t.prototype.showOpenSaveReportDialog=function(n,i,r){var u=t.getInstance("BrowseDialog");u.openDialog(n,i,r&&r.length?r:this.reportFileName)},t.prototype.openServerReportDialog=function(){this.rptToolbar.openServerClick()},t.prototype.saveServerReportDialog=function(){this.rptToolbar.saveServerClick()},t.prototype.showNewReportDialog=function(n){var i=t.getInstance("ToolBar");i.openNewDialog(n)},t.prototype.openReportFromDevice=function(){this.rptToolbar.browseDiskReport()},t.prototype.saveReport=function(n,t){if(!ej.isNullOrUndefined(n)&&n.length>0){var i=!ej.isNullOrUndefined(t)&&t;this.saveServerReport(n,i)}else this.saveAsReport()},t.prototype.openReport=function(n,t){var i={};(t?(i.reportServerUrl=t,this.model.serviceUrl=t):i.reportServerUrl=this.model.serviceUrl,n?(i.reportPath=n,this.model.dashboardPath=n):i.reportPath=this.model.dashboardPath,ej.isNullOrUndefined(i.reportPath))||(ej.isNullOrUndefined(this.rdlParser)&&(this.rdlParser=new ej.DashboardDesignerUtility.RDLParser(this)),this.reportFileName=ej.DashboardUtil.getFileName(this.model.dashboardPath),this.isOpenServerRpt=!0,ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/loaddashboard/",{action:ej.DashboardUtil.DesignerAction.openServerReport,data:JSON.stringify(i.reportPath)},{fnction:$.proxy(this.openRdlReport,this),indicator:[$.proxy(this.showDesignIndicator,this),$.proxy(this.hideDesignIndicator,this)]},!0,!0))},t.prototype.getReportCategory=function(n){var i=n.substr(n.lastIndexOf("/")+1),t=n.substr(0,n.lastIndexOf("/"));return t.length>0&&t.charAt(0)==="/"&&(t=t.substr(1)),{name:i,category:t}},t.getInstance=function(n){switch(n){case"DashboardDesigner":return t.dashboardDesigner;case"DesignPanel":return t.dashboardDesigner.designerPanel;case"RDLParser":return t.dashboardDesigner.rdlParser;case"ItemPanel":return t.dashboardDesigner.itemPanel;case"PropertyPanel":return ej.DashboardDesignerUtility.PropertyPanel.PropertySource;case"DragOnDrop":return t.dashboardDesigner.dragDropHelper;case"ToolBar":return t.dashboardDesigner.rptToolbar;case"UndoManager":return ej.DashboardDesignerUtility.UndoManager.UndoManager;case"DataSource":return ej.DashboardDesignerUtility.DataSource.DataSource;case"ReconnectDataSource":return ej.DashboardDesignerUtility.DataSource.ReconnectDataSource;case"DataSet":return ej.DashboardDesignerUtility.DataSet.DataSet;case"DataConfigurationPanel":return ej.DashboardDesignerUtility.DataConfigurationPanel.DataPanel;case"ImageManager":return ej.DashboardDesignerUtility.ImageManager.ImageSource;case"DataConfiguration":return ej.DashboardDesignerUtility.DataConfiguration.DataConfigSource;case"SortDialog":return ej.DashboardDesignerUtility.SortDialog.SortInstance;case"SQLDataSource":return ej.DashboardDesignerUtility.SQLDataSource.SQLDataSource;case"SQLReconnectDataSource":return ej.DashboardDesignerUtility.SQLDataSource.SQLReconnectDataSource;case"AzureSQLDataWarehouseDataSource":return ej.DashboardDesignerUtility.AzureSQLDataWarehouseDataSource.AzureSQLDataWarehouseDataSource;case"AzureSQLDataWarehouseReconnectDataSource":return ej.DashboardDesignerUtility.AzureSQLDataWarehouseDataSource.AzureSQLDataWarehouseReconnectDataSource;case"MongoDB":return ej.DashboardDesignerUtility.MongoDB.MongoDB;case"MongoDBReconnectDataSource":return ej.DashboardDesignerUtility.MongoDB.MongoDBReconnectDataSource;case"PSQLReconnectDataSource":return ej.DashboardDesignerUtility.PSQLDataSource.PSQLReconnectDataSource;case"FileReconnectDataSource":return ej.DashboardDesignerUtility.FileDatasource.FileReconnectDataSource;case"WebReconnectDataSource":return ej.DashboardDesignerUtility.WebDatasource.WebReconnectDataSource;case"SalesForceReconnectDataSource":return ej.DashboardDesignerUtility.SalesForceDataSource.SalesForceReconnectDataSource;case"SalesforceReportsReconnectDataSource":return ej.DashboardDesignerUtility.SalesforceReportsDataSource.SalesforceReportsReconnectDataSource;case"ORACLEReconnectDataSource":return ej.DashboardDesignerUtility.ORACLEDataSource.ORACLEReconnectDataSource;case"SqlCeDataSource":return ej.DashboardDesignerUtility.SqlCeDataSource.SqlCeDataSource;case"XMLDataSource":return ej.DashboardDesignerUtility.XMLDataSource.XMLDataSource;case"ODBCDataSource":return ej.DashboardDesignerUtility.ODBCDataSource.ODBCDataSource;case"ORACLEDataSource":return ej.DashboardDesignerUtility.ORACLEDataSource.ORACLEDataSource;case"OLEDBDataSource":return ej.DashboardDesignerUtility.OLEDBDataSource.OLEDBDataSource;case"SharedDataSource":return ej.DashboardDesignerUtility.SharedDataSource.SharedDataSource;case"ODATADataSource":return ej.DashboardDesignerUtility.ODATADataSource.ODATADataSource;case"PSQLDataSource":return ej.DashboardDesignerUtility.PSQLDataSource.PSQLDataSource;case"SASSDataSource":return ej.DashboardDesignerUtility.SASSDataSource.SASSDataSource;case"SharedDataSet":return ej.DashboardDesignerUtility.SharedDataSet.SharedDataSet;case"CredentialWind":return ej.DashboardDesignerUtility.CredentialDialog.CredentialDialog;case"QueryJoiner":return ej.DashboardDesignerUtility.QueryJoiner.QueryJoiner;case"StoreParameter":return ej.DashboardDesignerUtility.StoreParameter.StoreParameter;case"QueryFilter":return ej.DashboardDesignerUtility.QueryFilter.QueryFilter;case"QueryParameter":return ej.DashboardDesignerUtility.QueryParameter.QueryParameter;case"SqlEditor":return ej.DashboardDesignerUtility.SqlEditor.Editor;case"Parameter":return ej.DashboardDesignerUtility.Parameter.Parameter;case"ReportAction":return ej.DashboardDesignerUtility.ReportAction.ReportAction;case"BrowseDialog":return ej.DashboardDesignerUtility.BrowseDialog.BrowseDialog;case"QueryDesigner":return $("#"+this.dashboardDesigner._id+"_queryDesigner").data("ejQueryDesigner");case"FormatDialog":return ej.DashboardDesignerUtility.FormatDialog.Format;case"QueryExpression":return ej.DashboardDesignerUtility.QueryExpression.QueryExpression;case"FilterConfiguration":return ej.DashboardDesignerUtility.FilterConfiguration.FilterConfiguration;case"FileDatasource":return ej.DashboardDesignerUtility.FileDatasource.FileDatasource;case"DimensionFilter":return ej.DashboardDesignerUtility.DimensionFilter.DimensionFilter;case"MySQLDatasource":return ej.DashboardDesignerUtility.MySQLDataSource.MySQLDataSource;case"MySQLReconnectDataSource":return ej.DashboardDesignerUtility.MySQLDataSource.MySQLReconnectDataSource;case"AmazonAuroraDataSource":return ej.DashboardDesignerUtility.AmazonAuroraDataSource.AmazonAuroraDataSource;case"GoogleCloudDataSource":return ej.DashboardDesignerUtility.GoogleCloudDataSource.GoogleCloudDataSource;case"AmazonAuroraReconnectDataSource":return ej.DashboardDesignerUtility.AmazonAuroraDataSource.AmazonAuroraReconnectDataSource;case"GoogleCloudReconnectDataSource":return ej.DashboardDesignerUtility.GoogleCloudDataSource.GoogleCloudReconnectDataSource;case"MeasureFilter":return ej.DashboardDesignerUtility.MeasureFilter.MeasureFilter;case"WebDatasource":return ej.DashboardDesignerUtility.WebDatasource.WebDatasource;case"ContainerPropertyItem":return ej.DashboardDesignerUtility.ContainerPropertyItem.ContainerPropertyItem;case"ConditionalFormat":return ej.DashboardDesignerUtility.ConditionalFormat.ConditionalFormat;case"KPIWindow":return ej.DashboardDesignerUtility.KPIWindow.KPIWindow;case"MasterSlaveFilter":return ej.DashboardDesignerUtility.MasterSlaveFilterConfiguration.MasterSlaveFilter;case"FilterConfigurationInfo":return ej.DashboardDesignerUtility.FilterConfigurationInfo.FilterConfigurationInfo;case"CustomLegendSettings":return ej.DashboardDesignerUtility.CustomLegendSettings.CustomLegendSettings;case"EditColumnNames":return ej.DashboardDesignerUtility.EditColumnNames.EditColumnNames;case"GridTemplate":return ej.DashboardDesignerUtility.GridTemplate.gridTemplate;case"RefreshDialog":return ej.DashboardDesignerUtility.RefreshDialog.Refresh;case"ColorPalette":return ej.DashboardDesignerUtility.ColorPalette.ColorPalette;case"DateRangePopup":return ej.DashboardDesignerUtility.DateRangePopup.DateRangePopup;case"RangeFilterDialog":return ej.DashboardDesignerUtility.RangeFilterDialog.FilterInstance;case"MultiSelectionComboBox":return ej.DashboardDesignerUtility.MultiSelectionComboBox.MultiSelectionComboBox;case"RelativeDateFilter":return ej.DashboardDesignerUtility.RelativeDateFilter.RelativeDateFilter;case"RelativeDates":return ej.DashboardDesignerUtility.RelativeDates.RelativeDates;case"SalesForceDataSource":return ej.DashboardDesignerUtility.SalesForceDataSource.SalesForceDataSource;case"SalesforceReportsDataSource":return ej.DashboardDesignerUtility.SalesforceReportsDataSource.SalesforceReportsDataSource;case"EditConnection":return ej.DashboardDesignerUtility.EditConnection.EditConnection;case"TrendLineWindow":return ej.DashboardDesignerUtility.TrendLineWindow.TrendLineWindow;case"FilePickerDialog":return ej.DashboardDesignerUtility.FilePickerDialog.FilePickerDialog;case"SharedDSMenu":return ej.DashboardDesignerUtility.SharedDSMenu.SharedDSMenu;case"ColorCustomization":return ej.DashboardDesignerUtility.ColorCustomization.getColorSets;case"ColorCustomizationAdvanceSettings":return ej.DashboardDesignerUtility.ColorCustomizationAdvanceSettings.ColorCustomizationAdvanceSettings;case"ColorCustomizationCustomDialog":return ej.DashboardDesignerUtility.ColorCustomizationCustomDialog.ColorCustomizationCustomDialog;case"ColorPicker":return ej.DashboardDesignerUtility.ColorPicker.ColorPicker;case"ColorCustomizationInclusionSelection":return ej.DashboardDesignerUtility.ColorCustomizationInclusionSelection.ColorCustomizationInclusionSelection;case"ColorCustomizationBasicSettings":return ej.DashboardDesignerUtility.ColorCustomizationBasicSettings.getBasicSettings}return null},t.prototype.getLocale=function(n){return ej.isNullOrUndefined(ej.DashboardDesigner.Locale[n])?ej.DashboardDesigner.Locale["en-US"]:ej.DashboardDesigner.Locale[n]},t.getAvailableName=function(n,i){var c=[],e=[],u,r,o,s,l,a,f,h,v;switch(n){case"e-image":u="Image";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-image");break;case"e-chart-bar":u="Chart";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-chart-bar");break;case"e-grid-item":u="Grid";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-grid-item");break;case"e-pivotgrid-item":u="PivotGrid";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-pivotgrid-item");break;case"e-gauge":u="Gauge";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-gauge");break;case"e-combobox-item":u="ComboBox";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-combobox-item");break;case"e-listbox-item":u="ListBox";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-listbox-item");break;case"e-bubblemap-item":u="BubbleMap";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-bubblemap-item");break;case"e-choroplethmap-item":u="ChoroplethMap";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-choroplethmap-item");break;case"e-treemap-item":u="TreeMap";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-treemap-item");break;case"e-datepicker-item":u="DatePicker";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-datepicker-item");break;case"e-radialgauge-item":u="RadialGauge";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-radialgauge-item");break;case"e-card-item":u="Card";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-card-item");break;case"e-rangeslider-item":u="RangeSlider";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-rangeslider-item");break;case"e-label-item":u="Label";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-label-item");break;case"e-heatmap-item":u="HeatMap";r=$("#"+this.dashboardDesigner._id+"_designCanvas .e-heatmap-item")}if(r.each(function(n,t){c.push($(t).attr("name"))}),t.dashboardDesigner.designerPanel.isPasteAction)for(o=0;o<r.length;o++)e.push(ej.DashboardUtil.getWidgetInstance($(r[o])).getReportItemJson().ContainerSettings.Title);s=0;do s++,l=c.indexOf(u+s);while(l!==-1);if(a=u+s,f=i,!ej.isNullOrUndefined(i)&&(this.isAvailableWidgetName(e,i)&&(f=i+"_Copy"),this.isAvailableWidgetName(e,f))){h=1;do h++,v=e.indexOf(f+h);while(v!==-1);f=f+h}return{Id:a,Name:f}},t.isAvailableWidgetName=function(n,t){for(var i=0;i<n.length;i++)if(n[i]===t)return!0;return!1},t.prototype.initUnhandledExceptionHandler=function(){var n=this;window.onerror=function(t,i,r,u,f){if(i&&i.indexOf("ej.dashboarddesigner")!==-1||f&&f.stack&&f.stack.indexOf("ej.dashboarddesigner")!==-1)return n.designerPanel.logError({Type:f.name,LineNo:r,ColumnNo:u,Error:f}),!1}},t.prototype.showTooltip=function(n){var i=$(n.currentTarget).attr("data-tooltip"),t;ej.isNullOrUndefined(i)||i===""||(t=this,this.tooltipTimer&&clearTimeout(this.tooltipTimer),this.tooltipTimer=setTimeout(function(n){var u=t.element.find("#"+t._id+"_tooltip"),r,f,e;n.bubbles=!1;$.isFunction(n.stopPropogation)&&n.stopPropagation();r=t.measureText(i,100,{size:"12",fontStyle:"Normal",fontFamily:"Roboto"}).width+12;u.html($(n.currentTarget).attr("data-tooltip")).css({display:"block",visibility:"hidden"});f=n.pageX-(t.element.offset().left+r)>t.element.width()?n.pageX-t.element.offset().left-r<0?0:n.pageX-t.element.offset().left-r:n.pageX-(t.element.offset().left-t.element.scrollLeft());e=n.pageY-t.element.offset().top+15;u.css({top:e,left:f-u.outerWidth()}).css("visibility","visible")},400,n))},t.prototype.measureText=function(n,t,i){var e=this.element.find("#"+this._id+"_measuretext"),r,u,h;e.length===0?(r=document.createElement("text"),$(r).attr({id:this._id+"_measuretext"}),this.element.append(r)):r=e[0];var o="",f="",s="";return r.innerHTML=n,typeof i!="undefined"&&typeof i.size=="undefined"&&(u=i,u=u.split(" "),o=u[0],f=u[1],s=u[2]),i!==null&&(r.style.fontSize=i.size>0?i.size+"px":i.size?i.size:f.indexOf("px")===-1||f.indexOf("%")===-1?f+"px":f,r.style.fontStyle=i.fontStyle?i.fontStyle:o,r.style.fontFamily=i.fontFamily?i.fontFamily:s),r.style.backgroundColor="white",r.style.position="absolute",r.style.top="-100px",r.style.left="0px",r.style.visibility="hidden",t&&(r.style.maxWidth=t+"px"),h={width:r.offsetWidth,height:r.offsetHeight},ej.browserInfo().name==="msie"||ej.browserInfo().name==="webkit"?r.parentNode.removeChild(r):r.remove(),h},t.prototype.hideTooltip=function(n){var t=this;n.bubbles=!1;$.isFunction(n.stopPropagation)&&n.stopPropagation();this.tooltipTimer&&clearTimeout(this.tooltipTimer);this.tooltipTimer=setTimeout(function(){t.element.find("#"+t._id+"_tooltip").hide()},200,n)},t.prototype.createTooltipContainer=function(){var n=ej.buildTag("div.e-dbrd-designer-tooltip","",{},{id:this._id+"_tooltip"});this.element.append(n)},t.prototype.getInvalidNameAlertTitle=function(n,t){var i="",r=t?this.locale.nameValidationMessages.invalid:this.locale.nameValidationMessages.invalidCharText;switch(n){case"dashboardName":i=r+this.locale.nameValidationMessages.dashboardName;break;case"categoryName":i=r+this.locale.nameValidationMessages.categoryName;break;case"datasourceName":i=r+this.locale.nameValidationMessages.datasourceName}return t||(i=i+this.locale.nameValidationMessages.notSupportedChar),i},t.prototype.nameValidation=function(n){var t=new RegExp(/[*\[\\\]\|\/\:\<\>\%\+\#\?\'\"\;\,]/);return!t.test(n)},t.prototype.showWaitingPopupConnectionMode=function(){var n=this.element.find("#"+this._id+"_designerConfigurationPanel").data("ejWaitingPopup");ej.isNullOrUndefined(n)||n.show()},t.prototype.hideWaitingPopupConnectionMode=function(){var n=this.element.find("#"+this._id+"_designerConfigurationPanel").data("ejWaitingPopup");ej.isNullOrUndefined(n)||n.hide()},t.dashboardDesigner=null,t.widgetItems=[],t.editManager=null,t}(ej.WidgetBase);window.ej.widget("ejDashboardDesigner","ej.DashboardDesigner",new ejDashboardDesigner);ej.DashboardDesigner.ToolbarItems={New:1,Open:2,Save:4,Cut:8,Copy:16,Paste:32,Delete:64,Undo:128,Redo:256,Zoom:512,Preview:1024,GridLine:2048,Header:4096,Footer:8192,EditDesign:16384,All:32767};ej.DashboardDesigner.Locale={},function(n){n[n.ReportItem=0]="ReportItem";n[n.Text=1]="Text"}(CopyType||(CopyType={})),function(n){n[n.None="None"]="None";n[n.Chart="Chart"]="Chart";n[n.Grid="Grid"]="Grid";n[n.ComboBox="ComboBox"]="ComboBox";n[n.ListBox="ListBox"]="ListBox";n[n.RangeSlider="RangeSlider"]="RangeSlider";n[n.DatePicker="DatePicker"]="DatePicker";n[n.RadialGauge="RadialGauge"]="RadialGauge";n[n.BubbleMap="BubbleMap"]="BubbleMap";n[n.ChoroplethMap="ChoroplethMap"]="ChoroplethMap";n[n.TreeMap="TreeMap"]="TreeMap";n[n.Card="Card"]="Card";n[n.Label="Label"]="Label";n[n.Image="Image"]="Image";n[n.HeatMap="HeatMap"]="HeatMap"}(ControlType||(ControlType={}));ej.DashboardDesigner.Locale["en-US"]={itemPanel:{waterMarkText:"Search Widgets",noDataFound:"No matches found...",groupItems:{comparison:"Comparison",relation:"Relationship",deviation:"Deviation",proportion:"Proportion",distribution:"Distribution",filters:"Filters",miscellaneous:"Miscellaneous"},widgetTitle:{columnChart:"Column",barChart:"Bar",stackedColumn:"Stacked Column",stackedBar:"Stacked Bar",percentStackedBar:"100% Stacked Bar",percentStackedColumn:"100% Stacked Column",grid:"Grid",bubbleMap:"Bubble Map",choroplethMap:"Choropleth Map",treeMap:"Tree Map",card:"Card",pieChart:"Pie",doughnutChart:"Doughnut",pyramidChart:"Pyramid",funnelChart:"Funnel",areaChart:"Area",stackedArea:"Stacked Area",percentStackedArea:"100% Stacked Area",lineChart:"Line",splineChart:"Spline",comboBox:"Combo Box",listBox:"List Box",datePicker:"Date Picker",rangeSlider:"Range Slider",label:"Label",dataRequirements:"Data Requirements",image:"Image",heatMap:"Heat Map",gauge:"Radial Gauge"},widgetDescription:{columnChartDesc:"Compare values for a set of unordered items across categories using vertical bars arranged horizontally.",barChartDesc:"Compare values for a set of unordered items across categories using horizontal bars arranged vertically.",stackedColumnDesc:"Compare multiple measures using bars stacked vertically.",stackedBarDesc:"Compare multiple measures using bars stacked horizontally.",percentStackedBarDesc:"Compare multiple measures as parts of a whole using bars stacked horizontally.",percentStackedColumnDesc:"Compare multiple measures as parts of a whole using bars stacked vertically.",gridDesc:"Display tabular data with options to sort items.",bubbleMapDesc:"Showcase quantitative values encoded through bubble size .",choroplethMapDesc:"Showcase quantitative values encoded through color scale.",treeMapDesc:"Visualize large amounts of data as clustered rectangles with a color scale.",cardDesc:"Measure trends through key performance indicators like values and goals.",pieChartDesc:"Showcase the proportions of each item'&nbsps contribution to the total in the form of pie slices.",doughnutChartDesc:"Showcase the proportions of each item'&nbsps contribution to the total in the form of doughnut slices.",pyramidChartDesc:"Proportional comparison between values showcased in a progressively increasing manner.",funnelChartDesc:"Proportional comparison between values showcased in a progressively decreasing manner.",areaChartDesc:"Compare values for a set of unordered items across categories through filled curves ordered vertically.",stackedAreaDesc:"Compare multiple measures through filled curves stacked vertically.",percentStackedAreaDesc:"Compare multiple measures as parts of a whole through filled curves stacked vertically.",lineChartDesc:"Showcase trends for analysis over time with data points connected using straight lines.",splineChartDesc:"Showcase trends for analysis over time with data points connected using splines.",comboBoxDesc:"Filter based on one or more items selected in a drop-down list.",listBoxDesc:"Filter based on single or multiple items selected in a list.",datePickerDesc:"Filter based on a single date or a selected date range.",rangeSliderDesc:"Filter based on a value or date range set with sliders.",labelDesc:"Displays the given text.",imageDesc:"Displays a static image set.",heatMapDesc:"Visualize large amounts of data as clustered rectangles with a color scale.",gaugeDesc:"Measure trends through key performance indicators like values and goals."},widgetDataRequirements:{chartsDataReq:"1 or more values and 1 or more columns.",gridDataReq:"1 or more columns.",bubbleMapDataReq:"1 value and 1 shape ID.",choroplethMapDataReq:"1 value and 1 shape ID.",treeMapDataReq:"1 or more values and 1 or more group-by fields.",cardDataReq:"1 actual/target value and 0 or 1 series.",filtersDataReq:"1 column.",labelDataReq:"Text",imageDataReq:"Any JPEG, PNG Image.",heatMapDataReq:"1 or more values and 1 or more group-by fields.",gaugeDataReq:"1 actual/target value and 0 or 1 start/end/series value."}},menuBar:{previewText:"Preview",newMenu:"New",openMenu:"Open",saveMenu:"Save",createReport:"Create Report",openReport:"Open Report",createButtonText:"Create",designButtonText:"Close Preview"},propertyPanel:{headerText:"Properties",propertyPanelCommonItems:"Property panel doesn't support to show common properties for multiple items",promptWindowContent:"Do you want to reset the data source?",enableCommentingTooltip:"Show/Hide the comment icon in dashboard published to dashboard server through which users can post comments and collaborate",subHeaderText:"Subtitle"},designPanel:{editLabel:"Edit Label",updateLabel:"Update Label"},dataSource:{headerText:"Data Source",headerDataSourcesText:"DATA SOURCES",headerEditConnectionText:"EDIT CONNECTION",headerNewConnectionText:"NEW CONNECTION",newDataSourceText:"NEW DATA SOURCE",dataSourceTypeText:"Data Source Type",backButtonText:"Back",connectButtonText:"Connect",cancelButtonText:"Cancel",advanceOptionText:"Advance Options",basicOption:"Basic Options",setConnectionText:"Set Connection",dataSourceNameText:"Data Source name",dataSourceText:"Data Source",serverNameText:"Server name",databaseEngineText:"Database Engine",connectionTimeoutText:"Connection Timeout (in seconds)",port:"Port",authenticationTypeText:"Authentication type",windowsText:"Windows",sqlServerText:"SQL Server",mysqlText:"MySQL",postgresqlText:"PostgreSQL",refreshSettingsText:"Refresh Settings",authentication:"Authentication",promptText:"Prompt",noneText:"None",dataBaseText:"Database",useCurrentWindowsUser:"Use current windows user",useThisUserNameAndPassword:"Use this User name and password.",userName:"User name",passWord:"Password",savePassWord:"Save Password",mode:"Mode",live:"Live",extract:"Extract",extractModeMessage:"<b>Note:<\/b> Initially it will extract {0} records. Remaining records will be extracted based on configured refresh settings.",useAsWindowCredential:"Use as Window Credential",impersonateAuthenticatedUserAfterConnecting:"Impersonate the authenticated user after connecting.",promptForCredentials:"Prompt for credentials",enterPromptText:"Enter prompt text",doNotUseCredentials:"Do not use credentials",editContextMenu:"Edit",deleteContextMenu:"Remove",specifyServerName:"Server name cannot be empty.",specifyConnectionTimeout:"Connection Timeout cannot be empty.",specifyDatabaseName:"Database name cannot be empty.",specifyDataSourceName:"Data source name cannot be empty.",specifyUserName:"User name cannot be empty.",specifyPassword:"Password cannot be empty.",specifyConnectionString:"Connection string cannot be empty.",specifyPortNumber:"Port number cannot be empty.",specifyURL:"URL cannot be empty.",nameAlreadyExistonDataSource:"The specified name already exists in data source list.",welcomeContent:"Start by creating a data source",welcomeBodyContent:"You can connect to your own custom data source or can choose one from the predefined sample data sources that we offer.",sampleDataSources:"sample data sources",sampleDataSourceContent:"Kickstart your first dashboard and explore the customization options using the sample data sources.",exploreSamples:"explore samples",alertboxHeaderEditConnectionText:"Edit Connection",dataSourceType:{file:"File",excel:"Excel",csv:"Csv",json:"Json",msSql:"Microsoft SQL",azureSqlDataWarehouse:"Azure SQL Data Warehouse",mongodb:"MongoDB",mySql:"MySQL",mariadb:"MariaDB",memsql:"MemSQL",amazonAurora:"Amazon Aurora",googleCloud:"Google Cloud SQL",amazonAuroraMySQL:"AmazonAuroraMySQL",amazonAuroraPostgreSQL:"AmazonAuroraPostgreSQL",googleCloudMySQL:"GoogleCloudMySQL",googleCloudPostgreSQL:"GoogleCloudPostgreSQL",oracle:"Oracle",postgres:"PostgreSQL",redshift:"Amazon Redshift",webDataSource:"Web",jira:{name:"Jira",templates:{projects:{name:"Projects",desc:"Gets all projects visible to the currently logged-in user. If user credentials are not provided, it only returns public projects. To view more information, use the following keys: issueTypes, lead, and projectKeys."},boards:{name:"Boards",desc:"JIRA boards -- Gets 100 boards that you have access to. Use the following query fields to filter more information: startAt, maxResults, type, name, and projectKeyOrId."},servicedesk:{name:"Service desks",desc:"Gets all (100) the service desks’ details you have permission to access. You can use start and limit to filter information."},cusIssuesinQ:{name:"Customer issues in queue",desc:"Gets all the customers’ requests in queue for a given service desk. You can use start and limit to filter information."},pendingCR:{name:"Pending Customer requests",desc:"Gets all pending customer requests to be approved in queue. To filter information, use: searchTerm, requestOwnership, requestStatus, organizationId, serviceDeskId, and more."},completedCR:{name:"Completed Customer requests",desc:"Gets all the completed customer requests. To filter information, use: searchTerm, requestOwnership, requestStatus, organizationId, serviceDeskId, and more."}}},twilio:{name:"Twilio",templates:{calls:{name:"Calls",desc:"Retrieves a list of calls made to and from your account SID."},usageRecordCM:{name:"Usage Record(Current Month)",desc:"Retrieves your usage record for the current month."},usageRecordLM:{name:"Usage Record(Last Month)",desc:"Retrieves your usage record for the previous month."}}},askNicely:{name:"Ask Nicely",templates:{projects:{name:"Net Promoter Score",desc:"Your NPS for last 12 months"}}},callRail:{name:"CallRail",templates:{todayscall:{name:"Today’s Call",desc:"Gets a list of today’s calls. For each call, measures include duration, customer phone number, name, city, state, name, and country."}}},campaignMonitor:{name:"Campaign Monitor",templates:{lists:{name:"Lists",desc:"Campaign monitor list"}}},chargify:{name:"Chargify",templates:{subscr:{name:"Most recent 200 subscriptions",desc:"Retrieves 200 most recent subscriptions."}}},chartMogul:{name:"ChartMogul",templates:{arr:{name:"Annual run rate (ARR)",desc:"Retrieves your ARR for a given period."},avgrevday:{name:"Average Revenue per Account per day",desc:"Retrieves your average revenue per account with daily data."},avgrevmonth:{name:"Average Revenue per Account by month",desc:"Retrieves your average revenue per account with monthly data."},ccpday:{name:"Customer Count per day",desc:"Retrieves the total number of active customers with daily data for a given period."},ccpmonth:{name:"Customer Count Per Month",desc:"Retrieves the total number of active customers with monthly data for a given period."},rrpday:{name:"Monthly Recurring Revenue by day",desc:"Monitors your MRR contraction, expansion, and churn with daily data for a given period."},rrpmonth:{name:"Monthly Recurring Revenue by month",desc:"Monitors your MRR contraction, expansion, and churn with daily data for a given period."}}},chartBeat:{name:"Chartbeat",templates:{projects:{name:"",desc:""}}},flurry:{name:"Flurry",templates:[{projects:{name:"",desc:""}}]},freshdesk:{name:"Freshdesk",templates:[{projects:{name:"",desc:""}}]},fusebill:{name:"Fusebill",templates:[{projects:{name:"",desc:""}}]},goSquared:{name:"GoSquared",templates:[{projects:{name:"",desc:""}}]},harvest:{name:"Harvest",templates:[{projects:{name:"",desc:""}}]},helpScout:{name:"Help Scout",templates:[{projects:{name:"",desc:""}}]},insightly:{name:"Insightly",templates:[{projects:{name:"",desc:""}}]},intervals:{name:"Intervals",templates:[{projects:{name:"",desc:""}}]},keenIo:{name:"Keen IO",templates:[{projects:{name:"",desc:""}}]},kissMetrics:{name:"Kissmetrics",templates:[{projects:{name:"",desc:""}}]},wistia:{name:"Wistia",templates:[{projects:{name:"",desc:""}}]},gitlab:{name:"Gitlab",templates:[{projects:{name:"",desc:""}}]},liveAgent:{name:"Live Agent",templates:[{projects:{name:"",desc:""}}]},nicereply:{name:"Nicereply",templates:[{projects:{name:"",desc:""}}]},pipedrive:{name:"Pipedrive",templates:[{projects:{name:"",desc:""}}]},pipelineDeals:{name:"PipelineDeals",templates:[{projects:{name:"",desc:""}}]},prosperWorks:{name:"ProsperWorks",templates:[{projects:{name:"",desc:""}}]},sendGrid:{name:"SendGrid",templates:[{projects:{name:"",desc:""}}]},newRelic:{name:"New Relic",templates:[{projects:{name:"",desc:""}}]},mixpanel:{name:"Mixpanel",templates:[{projects:{name:"",desc:""}}]},stripe:{name:"Stripe",templates:[{projects:{name:"",desc:""}}]},asana:{name:"Asana",templates:[{projects:{name:"",desc:""}}]},slack:{name:"Slack",templates:[{projects:{name:"",desc:""}}]},smartSheet:{name:"Smartsheet",templates:[{projects:{name:"",desc:""}}]},zohocrm:{name:"ZohoCRM",templates:[{projects:{name:"",desc:""}}]},fortytwomatters:{name:"42matters",templates:[{projects:{name:"",desc:""}}]},odata:{name:"OData",templates:[{projects:{name:"",desc:""}}]},zendesk:{name:"Zendesk",templates:[{projects:{name:"",desc:""}}]},mailchimp:{name:"Mailchimp",templates:[{projects:{name:"",desc:""}}]},optimizely:{name:"Optimizely",templates:[{projects:{name:"",desc:""}}]},basecrm:{name:"Base CRM",templates:[{projects:{name:"",desc:""}}]},sendible:{name:"Sendible",templates:[{projects:{name:"",desc:""}}]},chargebee:{name:"Chargebee",templates:[{projects:{name:"",desc:""}}]},github:{name:"GitHub",templates:[{projects:{name:"",desc:""}}]},activeCampaign:{name:"Active Campaign",templates:[{projects:{name:"",desc:""}}]},bitly:{name:"Bitly",templates:[{projects:{name:"",desc:""}}]},toggl:{name:"Toggl",templates:[{projects:{name:"",desc:""}}]},basecamp3:{name:"Basecamp3",templates:[{projects:{name:"",desc:""}}]},lighthouse:{name:"Light House",templates:[{projects:{name:"",desc:""}}]},freshsales:{name:"Freshsales",templates:[{projects:{name:"",desc:""}}]},freshservice:{name:"Freshservice",templates:[{projects:{name:"",desc:""}}]},servicenow:{name:"ServiceNow",templates:[{projects:{name:"",desc:""}}]}},oauthConnectors:{facebook:"Facebook",facebookAds:"Facebook Ads",gmail:"Gmail",google:"Google",googleDrive:"Google Drive",googleAnalytics:"Google Analytics",twitter:"Twitter",googleplus:"Google+",youtube:"YouTube",salesforce:"Salesforce",instagram:"Instagram",microsoftOneDrive:"Microsoft OneDrive",microsoftOutlookCalendar:"Microsoft Outlook Calendar",salesforceReports:"Salesforce Reports",todoist:"Todoist",bitly:"Bitly",box:"Box",quickBooksOnline:"QuickBooks Online",quickBooksPayments:"QuickBooks Payments",microsoftSharePoint:"Microsoft SharePoint",googleSearchConsole:"Google Search Console",buffer:"Buffer",linkedin:"LinkedIn",intercom:"Intercom",googleAdsense:"Google AdSense",surveyMonkey:"SurveyMonkey",freshBooks:"FreshBooks",basecamp2:"Basecamp2",infusionsoft:"Infusionsoft",slack:"Slack",pinterest:"Pinterest"},dsnNotAvailable:"DSN is not available",dsnDriversNotAvailable:"DSN Drivers are not available",saveExpression:"Expression is not saved. Do you want to save and continue?",invalidExpSyntax:"Incorrect Syntax near Open/Close bracket(s).",failedToParseExp:"DashboardDesigner failed to parse the specified expression",emptyName:"Name should not be empty.",emptyExpName:"Expression name cannot be empty. Please enter a valid name.",emptyExp:"Expression should not be empty.",expNameExist:"An expression with the same name already exists.",expHasSpecialChar:"Expression name should not contain special characters.",expNotInColumn:"Column cannot be referred within its own expression!",joinerErr:"Each relation must have one field condition. So, does not allow to delete this field.",columnNameExist:"The specified column name already exists",columnHasSpecialChar:"Column name should not contain special characters.",columnName:"Column name cannot be empty.",specifyQueryText:"Specify the data source query",dataSetName:"Data source name cannot be empty. Please enter a valid data source name.",dataSetNameExist:"A data source with the same name already exists. Do you want to overwrite?",dataSetNameHasSpecialChar:"Name should not contain spaces and special characters",deleteDataSet:"Delete data source '",deleteDataField:"Delete field '",deleteDataSource:"Delete data source '",deleteEmbeddedImage:"Delete embedded image '",deleteReportParam:"Delete report parameter '",questionmark:"?",expressionText:"The string '",expressionNotValid:"' is not a valid ",addDatasourceText:"Add data source",connectDataSourceBtnText:"Connect Data Source",chooseConnctionTypeText:"Choose the type to connect",connectionString:"Connection String",specifyDSNName:"DSN name cannot be empty.",fileWaitingPopupText:"Fetching schema information from file. Please wait...",googleAnalyticsWaitingPopupText:"Importing data from Google Analytis API. This may take some time depending upon the size of the data.",searchDataSource:"Search Data Source",noDataSourceMessage:"We could not find the data source you are looking for",webDsTemplatesDescriptionText:"Choose from the predefined templates or create a new template.",category:{all:"All Categories",socialMedia:"Social Media",webAnalytics:"Web Analytics",liveConnection:"LiveConnection",cloudStorage:"Cloud Storage",salesCrm:"Sales & CRM",communications:"Communications",digitalMarketing:"Digital Marketing",marketing:"Marketing",email:"Email",advertising:"Advertising",finance:"Finance",projectManagement:"Project Management",support:"Support",sql:"SQL",nosql:"NoSQL",files:"Files",rest:"Rest",emailCompaign:"Email Campaign",mobileAnalytics:"Mobile Analytics"},webDataSource:{headersText:"Header(s)",methodText:"Method",parametersText:"Parameter(s)",replaceText:"Replace ",urlText:"URL",withUserDataText:" with your data",apiDocumentationText:" API documentation",accountKeyText:"Account Key"},previewAndConnect:"Preview & Connect",considerFirstRowHeader:"Consider the first row as header",removeExpressionText:"Deleting an expression will affect the widgets that have already been configured with it. Do you still want to proceed?"},dataSet:{headerText:"Data Source",newDataSetButtonText:"New Data Source",selectDataSourceText:"Select Data Source",backButtonText:"Back",createNewDataSource:"Create a New Data Source",dataSetName:"Data Source ",searchItemsText:"Search Items",previewText:"Preview",joinEditor:"Join Editor",renameContextMenu:"Rename",aggregationContextMenu:"Aggregation",groupBySubContextMenu:"GroupBy",sumSubContextMenu:"Sum",avgSubContextMenu:"Avg",minSubContextMenu:"Min",maxSubContextMenu:"Max",countSubContextMenu:"Count",stDevSubContextMenu:"StDev",stDevpSubContextMenu:"StDevP",varSubContextMenu:"Var",varPSubContextMenu:"VarP",sumDistinctSubContextMenu:"SumDistinct",avgDistinctSubContextMenu:"AvgDistinct",minDistinctSubContextMenu:"MinDistinct",maxDistinctSubContextMenu:"MaxDistinct",countDistinctSubContextMenu:"CountDistinct",leftTableHeader:"Left Table",tableFieldHeader:"Table Field",relationshipHeader:"Relationship",operatorHeader:"Operator",rightTableHeader:"Right Table",noRecordsToDisplay:"No records to display",pagesText:"pages",itemsText:"items"},imageManager:{headerText:"Image Manager",addImageButtonText:"Add Image",browseImage:"Browse Image"},errorMessage:{previewServiceUrlNotSet:"Dashboard viewer settings is not configured.",previewServiceUrlNotSetDesc:"Dashboard Viewer Service URL is not set. Hence preview cannot be initiated.",widgetNotConfigured:"Please configure the data and widgets to preview the dashboard.",connectionRefused:"Failed to connect to the Dashboard Service.",authenticationFailed:"Authentication failed for the request.",invalidSession:"Please make sure that you have logged into the dashboard site and your session is valid.",dataFetchingError:"An error occurred while fetching data",expressionParameterError:"Invalid parameter(s) used in the expression.",invalidQueryError:"Error executing the database query statement.",failedToConnectServer:"Dashboard Designer failed to retrieve the Resources from the Dashboard Server.",failedToConnectDataSource:"DashboardDesigner failed to connect the data source.",failedToRetriveDataSource:"Data store settings is not configured. Please configure and try again.",dataStoreSettings:"settings",failedToUploadFile:"Error in Uploading File.Please Upload again.",missedFeaturesErr:"Some features used in the dashboard are currently not supported by the web designer.",serverLoginErr:"ReportServer failed to login with specified credentials.",failedToOpenDashboard:"Dashboard Designer failed to open the dashboard.",notSupportedDashboard:"This version of Dashboard is not supported by Web Designer.",failedToCreateDataSet:"DashboardDesigner failed to create a shared Data Source.",errorOnSaveDashboard:"An error occured while trying to save the Dashboard.",failedToRetrieveDataSetTable:"Data Source failed to retrieve the selected table procedure.",failedToPreviewTable:"Data Source failed to preview the selected table",failedToSaveSelectedTableQuery:"Data Source failed to save the Query of selected table.",failedToGetQuerySchema:"Data Source failed to retrieve the Query Schema of selected table.",mapFileDownloadingError:"The map shape file fails to load due to network problems. To fix this problem, try to reload the page.",alertAddDatasourceMessage:"You have not configured a data source yet.<br>Add a data source to bind data to widgets in your dashboard.",formattedValueInvalid:"Formatted Value is invalid.",InvalidDashboardFileName:"Invalid characters exist in the dashboard name. Valid characters are alphabets, numbers and underscore",errorOnLoadingAccountInfo:"An error occured while trying to fetch the account information."},browseDialogMessages:{selectCategory:"Please select a category",fileExistInCategory:"' already exists in the category",doYouWantToReplace:". Do you want to replace it?",dashboardNameErrorMsg:"The following characters are not supported:&nbsp&nbsp&nbsp&nbsp'&nbsp+&nbsp,&nbsp;&nbsp[&nbsp]&nbsp%&nbsp#",dashboardNameEmptyErr:"Please enter a name for dashboard",createCategory:"Please create a category to continue",loadCategoryErr:"An error occurred while fetching category information.",loadDashboardErr:"An error occurred while fetching dashboard information in the selected category.",categoryEmptyMsg:"This category is empty",categoryLabelText:"Category *",nameLabelText:"Name *",descriptionLabelText:"Description",cancelBtnText:"Cancel",openBtnText:"Open",retryText:"Retry",privacySettings:"Privacy Settings"},masterSlaveWindow:{addMastersButtonText:"Add Master Widget(s)",addWidgetDialogAlertTitle:"Add Master(s)",alertTitle:"Filter Configuration",cancelButtonText:"Cancel",chooseWidgetText:"Choose Widget(s)",errorMessage:"Enter a value for this property",filterModeCustomText:"Custom",filterModeDefaultText:"Default",filterProfileslabelText:"Filter Profiles",listenerWidgetsLabelText:"Listener Widgets",masterWidgetsLabelText:"Master Widgets",okButtonText:"OK",sourceColumn:"Source Column",targetColumn:"Target Column",targetDataSource:"Target Data Source",updateButtonText:"Update",resetAllCustomizationText:"This action will reset the customization done. Do you want to continue?",selectWidget:"Select a Widget",masterWidget:"Widget master's",profileNameEditAdd:"Only one item can be edited or added",filterKeyEmpty:"Profile name cannot be empty.",filterKeyExist:"A filter profile with the same name already exists.",widgetsAvailable:"widgets available."},dataConfigurationPanel:{collapse:"Collapse",properties:"Properties",dataSource:"Data Sources"},dataConfigurationMenuItems:{none:"None",distinctCount:"Distinct Count",weightedScore:"Weighted Score...",measureFilterDisplayName:"Filter",measureFilter:"MeasureFilter",measureFormatDisplayName:"Format...",measureFormat:"MeasureFormat",sortAscending:"Sort Ascending",sortDescending:"Sort Descending",Sort:"Sort",SortDispalyName:"Sort...",dimensionFilterDisplayName:"Filter(s)",relativeDateFilterDisplayName:"Relative Date Filter",relativeDateFilter:"RelativeDateFilter",dimensionFilter:"DimensionFilters",clearRelativeDates:"ClearRelativeDate",editRelativeDate:"EditRelativeDate",editRelativeDateOptions:"EditRelativeDateOptions",clearRelativeDateOptions:"ClearRelativeDateOptions",dateTime:"Date Time",quarterYear:"Quarter Year",monthYear:"Month Year",weekYear:"Week Year",dateFormat:"Format",sum:"Sum",count:"Count",average:"Avg",maximum:"Max",minimum:"Min",variable:"Var",edit:"Edit...",editDimensionFilter:"EditDimensionFilter",editMeasureFilter:"EditMeasureFilter",clear:"Clear",clearMeasureFilter:"ClearMeasureFilter",clearDimensionFilter:"ClearDimensionFilter",time:"Time",hours:"Hours",minutes:"Minutes",seconds:"Seconds",dateHour:"Date Hour",dayOfWeek:"Day of Week",weekOfYear:"Week of Year",dayMonthYear:"Day Month Year",monthDayYear:"Month Day Year",date:"Date",year:"Year",quarter:"Quarter",month:"Month",day:"Day",more:"More",defaultFilter:"Filter",relativeDateOptionsDisplayName:"Relative Dates",relativeDateOptions:"RelativeDateOptions",nulldata:"(Null)"},tableSelectorWindow:{titleChooseTable:"Choose Table(s)",okButtonText:"OK",cancelButtonText:"Cancel",titleChooseSchema:"Choose Schema(s)",selectAllText:"Select All",selectTableLeftVal:"Select the left table value",selectTableRytVal:"Select the right table value",selectRelationTable:"Select the relation for tables",relationExistsInTable:"Already relation exists between tables",waitingPopupText:"Importing data. This may take some time depending on the size of the data.",reloadButtonText:"Reload"},alertWindowMesages:{draftMessage:"You have unsaved changes in this dashboard from your previous session. Do you want to restore that?",draftAlertTitle:"Dashboard Designer",datasourceCancel:"Do you want to cancel establishing data connection?",datasourceEditing:"Do you want to cancel the data source editing?",datasetCancel:"Do you want to cancel establishing data connection?",datasetEditing:"Do you want to cancel the data source editing?",parameterCancel:"Do you want to cancel the Parameter creation?",parameterEditing:"Do you want to cancel the Parameter editing?",fileUploadInProgress:"File upload in progress. Please wait...",missedFeaturesErr:"Some features in the Dashboard are not supported by the web designer",visualDesignerMsg:"Switching to the visual designer will discard the manual changes made to the connection string. Do you want to use the visual designer anyway? ",wrongServerName:"Wrong Server Name",invalidUser:"We could not authenticate with the credentials provided. Please try again.",saveSuccess:"Dashboard has been successfully saved. Do you want to view the dashboard?",tableViewMessage:"This action will discard all the changes in table view. Do you want to continue anyway?",visualDesignerMsgOnQuery:"Custom query is not supported in design mode. Please remove your custom query to switch back to design mode.",visualDesignerSwitcherMsg:"Default query has been modified. Please remove the modifications or clear the query to switch back to design mode.",selectTableMessage:"Please select a table to create the data source.",columnTypeChangePrefixMsg:"Changing the datatype will invalidate the ",columnTypeChangeValidationMsgCommon:"Changing the column data type will invalidate filters and sorting applied on this column.",columnTypeChangeValidationMsg1:"filter",columnTypeChangeValidationMsg2:"expression",columnTypeChangeValidationMsg3:"expression and the filter",columnFormattingMessageforString:"Unable to convert string to date format",columnFormattingMessageforBool:"Unable to convert boolean to date format",columnTypeChangePostMsg:" applied on this column. Do you still want to proceed?",columnDisableMessage:"The selected column is already in use and will affect the dashboard, if removed. Do you want to continue?",tableRemoveMessage:"Removing this table will affect the filter/expression columns referring to it. Do you still want to continue?",createCategoryMessage:"*Please create a category to save the dashboard",differentSchema:"The new schema differs from the existing one, and so the data settings in the associated widgets cannot be retained. Do you want to continue?",columnNotExist:"Some of the columns does not exist in new schema and it will affect the dashboard, if removed. Do you want to continue?",doYouWant:"will be deleted. Do you want to continue",tableremove:"Some associated tables will be dropped from the data source.",tableList:"The list of tables to be dropped ",queryViewDSCancel:"Do you want to cancel establishing data connection?",queryViewEditCancel:"Are you sure you want to cancel the data source editing?",restrictedFieldMessage:"Aggregated Expressions cannot be added to this section.",colorSettingsWarningMessage:"Color settings will not be applied for this type of chart.",colorSettingsAdvanceSettingsWarningMessage:"Advance Color settings will not be applied for this type of chart.",schemaMatchforCodeView:"If the new schema differs from the existing one, the data settings in the associated widgets cannot be retained. Do you want to continue?",retryforEditConnection:"Do you want to retry?",selectedDatabaseEmptyWarningMessage:"The selected database is empty, please select another database to create dashboard."},parameterMessages:{nameHasSpecialChar:"Name should not contain spaces and special characters",changeParameter:"Changing the datatype will discard changes made to the available and default values. Do you want to change the datatype anyway?",multilevelCannotIncludeNull:"A multi-value parameter cannot include null values",multipleValues:"Multiple default values were specified. The parameter does not allow multiple values.",nullCheck:"Available or Default values might contains null value, Do you want to check the allow null value?",blankCheck:"Available or Default values might contains blank value, Do you want to check the allow blank value?"},relativeDateMessages:{itemExist:"The relative date range that you are trying to add already exists.",relativeRangeNotEmpty:"Relative range name should not empty",startDateNotLessEndDate:"Start date should not be lesser than End date.",dateNotEmpty:"Start and End date value should not be empty."},alertDialogTitle:{dataSources:"Data source",dataSource:"Data Source",dataSet:"Data Source",parameter:"Parameter",expression:"Expression",upload:"Upload",file:"File Upload",image:"Image",odbcDataSource:"ODBC Data Source",properties:"Properties",queryExpression:"Query Expression",queryJoiner:"Query Joiner",dashboardDesigner:"Dashboard Designer",relativeDateOptions:"Add Relative Date Range",loginWindow:"Login Window",dataSourceAdvancePanel:"Data Source AdvancePanel",alertDialog:"Authentication Failure",report:"Report",dashboard:"Dashboard",queryDesigner:"Query Designer",saveAsDashboard:"Save Dashboard",saveAsReport:"Save As Report",dashboardServer:"Dashboard Server",createCategory:" Add Category",SwitchDataView:"Switch Data View",ResetDataSource:"Reset Data Source",SaveDataSource:"Save Data Source",SelectTable:"Select Table",CancelDataSourceCreation:"Cancel Data Connection",EditDataSourceConnection:"Edit Data Connection",DeleteDataSource:"Delete Data Source",SaveExpression:"Save Expression",SchemaMismatch:"Schema Mismatch",DuplicateDataSource:"Duplicate Data Source",AutoRecover:"Auto Recover",DashboardSaved:"Confirm Save Dashboard",RemoveColumn:"Remove Column",RemoveTable:"Remove Table",FilterConfiguration:"Filter Configuration",DataConfiguration:"Data Configuration",UnsupportedElements:"Unsupported Elements",InvalidSession:"Invalid Session",InvalidParameter:"Invalid Parameter",InvalidQueryStatement:"Invalid Query Statement",InvalidDashboardName:"Invalid Dashboard Name",InvalidFormat:"Invalid Format",InvalidFilterProfile:"Invalid Filter Profile",UnsupportedVersion:"Unsupported Version",NewCategory:"New Category",InvalidExpressionName:"Invalid Expression Name",removeExpression:"Remove Expression"},linkedAccountsWindow:{title:"Accounts",closeButtonText:"Close",continueButtonText:"Continue",signinButtonText:"Connect an account",accountText:"Account",connectToAccountText:"Connect to ",authorizeText:"Authorize",authorizeRequiredText:"Additonal permission is required to connect to this service.",chooseAccNameText:"Choose a name for the account",manageAccountsText:"Manage Accounts",waitForAuthCompletionText:"Waiting for authorization to complete",nextButtonText:"Next",nameCannotBeEmpty:"Name cannot be empty",specialCharNotAllowed:"Invalid characters. The following characters are not supported:&nbsp&nbsp*&nbsp,&nbsp|&nbsp[&nbsp]&nbsp'&nbsp\"&nbsp:&nbsp;&nbsp<&nbsp>&nbsp?&nbsp#&nbsp\\&nbsp/&nbsp%&nbsp+"},gridPagingContent:{ofContentText:"of",pagesContentText:"Pages",itemsContentText:"Items"},saveDatasourceDialog:{title:"Save Data Source",cancelButtonText:"Cancel",saveButtonText:"Save",nameLabelText:"Name",descriptionLabelText:"Description",descriptionMaxLengthText:"*1024 characters maximum",emptyDatasourceNameLabelText:"Please enter the data source name",datasourceAlreadyExistsText:"A data source with the same name already exists in the server.",noCreatePermissionText:"You do not have permission to create new data source. Contact site administrator.",noEditPermissionText:"You do not have permission to edit this data source. Contact site administrator.",noSchedulePermissionText:"Unable to save the data source with data refresh settings. Permission to create/update the schedules is required. Contact site administrator."},createCategoryDialog:{title:"Category",cancelButtonText:"Cancel",saveButtonText:"Save",nameLabelText:"Name",descriptionLabelText:"Description",descriptionMaxLengthText:"*1024 characters maximum",emptyCategoryNameLabelText:"Please enter the category name",noCreatePermission:"You do not have permission to create category. Contact site administrator."},editColumnNames:{editTableColumnNames:"Edit Table Column Names"},fileRowsInfo:{title:"Data Storage",fileRowsSubTextTwo:"of",fileRowsSubTextThree:"used",errorMessage:"Failed to retrieve the data. Try again",reloadText:"Reload",tootltipSuffix:" bytes",information:"More"},DefaultIndexInfo:{usage:"Usage",limitation:"Limitation",syntax:"Syntax",usageText:"Select one or more default values based on the specified indexes.",limitationText:"For single selection mode, only one index can be set.",singleNumberSyntax:"* Supports only positive integer values starting from 0.",commaSyntax:"* Use a Comma(, ) to seperate indicies.Example 1, 2, 5.",rangeSyntax:"* Use a Hyphen(-) to define the index range.Example: 1-4,7,9."},sharedDataSource:{title:"Existing Data Source",reloadDataSource:"Reload data source",selectDataSource:"Please select a data source to import.",readPermissionMessage:"You have read only permission for this data source.",editPermissionMessage:"You have edit permission for this data source.",add:"ADD"},sampleDataSource:{title:"Sample Data Sources"},alertWindow:{okBtnText:"OK",noBtnText:"No",yesBtnText:"Yes",showDetailsText:"Show Details",hideDetailsText:"Hide Details",copyToClipboardBtnText:"Copy to Clipboard"},measureFilterWindow:{measureFilterTitle:"Measure Filter",columnLabelText:"Column:",rangeLabelText:"Ranges",andLabelText:"and",resetBtnText:"Reset",applyBtnText:"Apply",cancelBtnText:"Cancel"},dashboardLink:{columnURLTooltipPrefix:"Append",columnURLTooltipSuffix:"to URL"},salesForceDataSource:{queryModeText:"Query Mode",queryModeSimpleText:"Simple",queryModeAdvancedText:"Advanced",objectText:"Salesforce Object",fieldsText:"Field(s)",filterText:"Filter(s)",soqlQueryText:"SOQL Query",helpText:"Need help with your query? Refer ",helpHyperlinkText:"Salesforce SOQL documentation",refreshSettingsText:"Refresh Settings",soqlEmptyValidation:"Please enter the SOQL query.",fieldEmptValidation:"Select one or more fields.",objectEmptyValidation:"Select an object.",waitingPopupText:"Importing data from Salesforce account. This may take some time depending upon the size of the data.",simplemodelimtText:"<sup>*<\/sup> Simple mode has a data limit of 150K records. If you have large data, please use the advanced mode with suitable filters."},salesforceReportsDataSource:{refreshSettingsText:"Refresh Settings",emptyReportsListValidation:"Select a report to proceed further.",reportsDropdownText:"Reports"},dialogOptions:{applyButtonText:"Apply",cancelButtonText:"Cancel",resetButtonText:"Reset",okButtonText:"OK",addButtonText:"Add",saveButtonText:"Save",resetButtonTooltip:"This action will reset the colors to default colors"},dateRangeFilterDialog:{titleText:"Range Filter",rangesText:"Ranges",startDateText:"Start Date",endDateText:"End Date",startLabel:"Start",endLabel:"End"},queryExpressionDialog:{NoResultFound:"No Result Found",QueryExpression:"Query Expression",successMessageNotification:"Expression has been saved successfully."},multiLevelDrillDialog:{titleText:"Multi-Level Drill Down",dialogContentText:"Do you want to enable multi-level drill down?"},nameValidationMessages:{dashboardName:"&nbspdashboard name",categoryName:"&nbspcategory name",datasourceName:"&nbspdatasource name",invalid:"Invalid",notSupportedChar:".The following characters are not supported:&nbsp&nbsp&nbsp&nbsp'&nbsp+&nbsp,&nbsp;&nbsp[&nbsp]&nbsp%&nbsp#",invalidCharText:"Invalid characters in the"},queryDesigner:{columnType:{stringField:"String",numberField:"Integer",booleanField:"Boolean",dateField:"Date",defaultField:"Default"},rename:"Rename",changeColumnType:"Change Column Type",sharedTable:{header:"Shared Tables",info:"The tables listed below are from the data sources that you have permission to access. Any changes to this table done by the owner of the data source will be reflected here.",error4004:"There are no shared tables.",error4006:"One or more shared tables used in this data source are not accessible. Do you want to continue anyway?",errorDesc4006:"This might be due to one of the following reasons.<\/br>* You no longer have permission to use the data source.<\/br>* The data source might be deleted by the owner."}},toolBar:{save:"Save",cut:"Cut",copy:"Copy",paste:"Paste",Delete:"Delete",undo:"Undo",redo:"Redo",filter:"Filter",refreshSettings:"Refresh Settings"},refreshWindow:{enbaleAutoRefresh:"Enable Autorefresh",rowInsertDelete:"Refresh Only for Insertion/Deletion of Rows",refreshWidget:"Refresh Selected Widgets Only"},dialogText:{appendText:"Append Text",checkAll:"Check All"},chartTrendLineDialog:{series:"Series",type:"Type",color:"Color",trendline:"Trendline",legendText:"Legend Text",lineType:"Line Type",order:"Order",lineColor:"Line Color",lineStyle:"Line Style",Add:"Add",Edit:"Edit",Delete:"Delete",Solid:"Solid",Dot:"Dot",Dash:"Dash",DotDash:"DotDash",LongDash:"LongDash",LongDashDotDot:"LongDashDotDot",Linear:"Linear",Exponential:"Exponential",Logarithmic:"Logarithmic",Power:"Power",Polynomial:"Polynomial"},kpi:{versus:" Vs "},webDsTemplate:{createNewDescText:"Create a custom data source.",createNewTitleText:"Create new"},editConnection:{fileAlertMsg:"*Previous tables will be dropped."},sharedDSMenu:{ownerNameHeader:"Owner",LasteUpdatedTimeHeader:"Last updated on",searchBoxText:"Search Table"},queryJoiner:{merge:"Merge",update:"Update"},sqlExtactModeLocale:{incrementalRefreshText:"Identify new/modified rows using column",noParamsText:"The selected stored procedure doesn't have any parameters",nodateErrMsg:"* A timestamp column is required to configure incremental update.",incrementalRefresh:"Incremental Refresh",noDateColumns:"No date columns",refreshColumnTitle:"Incremental Refresh Settings"},driveFilePicker:{folderEmptyText:"This folder does not have any CSV/JSON files.",selectButtonText:"Select",cancelButtonText:"Cancel",backContainerText:"My Drive",methodType:"Get",datasourceNameText:"Datasource Name",selectSiteText:"Select Site"},boxFilePicker:{backContainerText:"All Files"},colorCustomAdvanceLocale:{advanceSettingsTitle:"Advanced Settings",conditionText:"Condition",conditionNameLabel:"Condition name",conditionTypeLabel:"Condition type",conditionValueLabel:"Value",casesensitive:"Case sensitive",background:"Background",border:"Border",title:"Title",range:"Range",icon:"Icon",addConditionText:"+ Add Condition",formatText:"Format",basedOn:"Based on",aggregation:"Aggregation",numberFormating:"Number Formatting",from:"From",to:"To",valueHere:"Value here",selectFileds:"select a fields",downText:"Down",upText:"Up",leftText:"Left",rightText:"Right",pointerUpText:"PointerUp",pointerDownText:"PointerDown",tickText:"Tick",closeText:"Close",editButtonText:"Edit",colorSelectErrMsg:"Please apply any one color for this condition",miunsText:"Minus",round:"Round",polygon:"Polygon",warning:"Warning",star:"Star",uploadText:"UPLOAD",urlText:"URL",customIconDlgTitle:"Custom Icon",browseText:"Browse",customBtnText:"Custom",nameHere:"Name here",selectAny:"Select Any"},colorCustomBasicLocale:{dimensionRadioBtnText:"Text",measureRadioBtnText:"Number",advanceText:"Conditional Formatting",basicText:"Default",addConditions:"Add Conditions",modifyConditions:"Modify Conditions",advancedConditionalFormatting:"Advanced Conditional Formatting",basedOnPrimaryValue:"based on Primary Value",conditionalColorFormatting:"Conditional Color Formatting"},privacySettings:{privateText:"Private",publicText:"Public",unlistedText:"Unlisted",privateMsgText:"Dashboards will only be visible to users with the appropriate permissions.",publicMsgText:"Dashboards are accessible to anyone with a link to them.  No sign-in is required. If a user is signed in, public dashboards will be included in their dashboards list.",unlistedMsgText:"Dashboards marked as unlisted are accessible to anyone with a link to them.  No sign-in is required. Only dashboard owners can see them in their dashboards list."},datasourcePermissionText:{noReadPermissionTitle:"Dashboard",noReadPermissionText:"You do not have permission to read the following datasources. Contact site administrator."}};InternalKPIWindow=function(){function n(){this.dashboardDesigner=null;this.callMethod="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderkpiWindow()}return Object.defineProperty(n,"KPIWindow",{get:function(){return(this.kpiwindow===null||this.kpiwindow===undefined)&&(this.kpiwindow=new ej.DashboardDesignerUtility.KPIWindow),this.kpiwindow},enumerable:!0,configurable:!0}),n.prototype.openkpiDialog=function(n,t,i,r){this.callInstance=t;this.callMethod=i;this.isKpiEdit=r;ej.isNullOrUndefined(n)?(this.kpiDataValueField=null,this.kpiVal=null):(this.kpiDataValueField=n,this.kpiVal=n.KPIColumnInfo);this.setActualType();this.setTargetValues();this.setValueType();this.setResultValues();this.setBackgroundCheckbox();$("#"+this.id+"_kpi_btn_ok").data("ejButton").enable();this.kpiDialog.data("ejDialog").open()},n.prototype.getValueType=function(){return ej.DashboardUtil.ConvertEnumasKeyValuePairArray(KpiCalculationType)},n.prototype.setValueType=function(){var n=this.getValueType();ej.isNullOrUndefined(this.kpiVal)?($("#"+this.id+"_type_drop").data("ejDropDownList").setModel({dataSource:n}),$("#"+this.id+"_type_drop").data("ejDropDownList").selectItemByValue(n[0].value)):($("#"+this.id+"_type_drop").data("ejDropDownList").setModel({dataSource:n}),$("#"+this.id+"_type_drop").data("ejDropDownList").selectItemByValue(this.kpiVal.KpiCalculationType))},n.prototype.getResultValues=function(){return ej.DashboardUtil.ConvertEnumasKeyValuePairArray(IndicationType)},n.prototype.setResultValues=function(){var n=this.getResultValues();ej.isNullOrUndefined(this.kpiVal)?($("#"+this.id+"res_drop").data("ejDropDownList").setModel({dataSource:n}),$("#"+this.id+"res_drop").data("ejDropDownList").selectItemByValue(n[0].value)):($("#"+this.id+"res_drop").data("ejDropDownList").setModel({dataSource:n}),$("#"+this.id+"res_drop").data("ejDropDownList").selectItemByValue(this.kpiVal.Indication))},n.prototype.setTargetValues=function(){var n=this.getValues();ej.isNullOrUndefined(this.kpiVal)?($("#"+this.id+"_target_drop").data("ejDropDownList").setModel({dataSource:n}),$("#"+this.id+"_target_drop").data("ejDropDownList").selectItemByValue(n[0].value)):($("#"+this.id+"_target_drop").data("ejDropDownList").setModel({dataSource:n}),$("#"+this.id+"_target_drop").data("ejDropDownList").selectItemByValue(this.kpiVal.TargetColumn.UniqueColumnName))},n.prototype.getValues=function(){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),t=n.dataGroupInfo;return this.getSourceData(t)},n.prototype.setActualType=function(){var n=this.getValues();ej.isNullOrUndefined(this.kpiVal)?($("#"+this.id+"_actual_drop").data("ejDropDownList").setModel({dataSource:n}),$("#"+this.id+"_actual_drop").data("ejDropDownList").selectItemByValue(n[0].value)):($("#"+this.id+"_actual_drop").data("ejDropDownList").setModel({dataSource:n}),$("#"+this.id+"_actual_drop").data("ejDropDownList").selectItemByValue(this.kpiVal.ActualColumn.UniqueColumnName))},n.prototype.setBackgroundCheckbox=function(){ej.isNullOrUndefined(this.kpiVal)?$("#"+this.id+"_kpiCheck").ejCheckBox({checked:!1}):$("#"+this.id+"_kpiCheck").ejCheckBox({checked:this.kpiVal.SetBackground})},n.prototype.getSourceData=function(n){var f=[],u,r,t,i;if(!ej.isNullOrUndefined(n.Values)&&n.Values.length>0)for(u=n.Values,r=0;r<u.length;r++)for(t=0;t<u[r].Values.length;t++)i=u[r].Values,i[t].FieldType!=="Measures"||i[t].IsKPIColumn||i[t].SummaryType===SummaryType[SummaryType.NONE]||f.push({text:i[t].DataField+"("+i[t].SummaryType+")",value:i[t].UniqueColumnName,name:i[t].DataField});return f},n.prototype.renderkpiWindow=function(){var f;this.kpiDialog=ej.buildTag("div.e-kpidialog","",{"padding-left":"18px","padding-right":"18px"},{id:this.id+"_kpiWindowDiv",title:"KPI Expression"});this.kpiDialog.ejDialog({enableResize:!1,showRoundedCorner:!0,enableModal:!0,minWidth:400,minHeight:370,height:"auto",width:"auto",showOnInit:!1,showFooter:!0,cssClass:"e-designer-kpidialog e-dashboarddesigner e-designer-dialog",close:$.proxy(ej.DashboardUtil.closeDialog,this)});var e=ej.buildTag("div","",{},{id:this.id+"_table_id"}),n=ej.buildTag("table.e-designer-table","",{width:"100%"},{unselectable:"on"}),t=ej.buildTag("tr","",{"padding-top":"16px",display:"block"}),o=ej.buildTag("td","",{}),rt=ej.buildTag("Label.e-designer-fontfamily","Actual Value",{"font-size":"12px","font-color":"#303541"},{type:"label"}),s=ej.buildTag("td","",{"padding-left":"107px"}),h=ej.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_actual_drop"}),i=ej.buildTag("tr","",{"padding-top":"16px",display:"block"}),c=ej.buildTag("td","",{}),ut=ej.buildTag("Label.e-designer-fontfamily","Target Value",{"font-size":"12px","font-color":"#303541"},{type:"label"}),l=ej.buildTag("td","",{"padding-left":"106px"}),a=ej.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_target_drop"}),r=ej.buildTag("tr","",{"padding-top":"16px",display:"block"}),v=ej.buildTag("td","",{}),ft=ej.buildTag("Label.e-designer-fontfamily","Value Type",{"font-size":"12px","font-color":"#303541"},{type:"label"}),y=ej.buildTag("td","",{"padding-left":"115px"}),p=ej.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_type_drop"}),u=ej.buildTag("tr","",{"padding-top":"16px",display:"block"}),w=ej.buildTag("td","",{}),et=ej.buildTag("Label.e-designer-fontfamily","Result",{"font-size":"12px","font-color":"#303541"},{type:"label"}),b=ej.buildTag("td","",{"padding-left":"141px"}),k=ej.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"res_drop"}),d=ej.buildTag("tr","",{"padding-top":"16px",display:"block"}),g=ej.buildTag("td","",{"padding-left":"178px"}),nt=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_kpiCheck"}),ot=$("#"+this.id+"_kpiWindowDiv_foot"),tt=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right","margin-top":"6px","margin-right":"15px"},{id:this.id+"_kpi_btn_cancel"}),it=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right","margin-top":"6px"},{id:this.id+"_kpi_btn_ok"});ot.append(tt).append(it);this.kpiDialog.append(e);e.append(n);n.append(t);t.append(o);o.append(rt);t.append(s);s.append(h);n.append(i);i.append(c);c.append(ut);i.append(l);l.append(a);n.append(r);r.append(v);v.append(ft);r.append(y);y.append(p);n.append(u);u.append(w);w.append(et);u.append(b);b.append(k);n.append(d);d.append(g);g.append(nt);h.ejDropDownList({dataSource:[],fields:{text:"text",value:"value"},enabled:!0,width:"214px",height:"28px",selectedIndex:0,showRoundedCorner:!1,cssClass:"e-designer-actual e-designer-ejwidgets e-dbrd-control"});a.ejDropDownList({dataSource:[],fields:{text:"text",value:"value"},enabled:!0,width:"214px",height:"28px",selectedIndex:0,showRoundedCorner:!1,cssClass:"e-designer-target e-designer-ejwidgets e-dbrd-control"});p.ejDropDownList({dataSource:this.getValueType(),fields:{text:"text",value:"value"},enabled:!0,width:"214px",height:"28px",selectedIndex:0,showRoundedCorner:!1,cssClass:"e-designer-type e-designer-ejwidgets e-dbrd-control"});k.ejDropDownList({dataSource:this.getResultValues(),fields:{text:"text",value:"value"},enabled:!0,width:"214px",height:"28px",selectedIndex:0,showRoundedCorner:!1,cssClass:"e-designer-result e-designer-ejwidgets e-dbrd-control"});nt.ejCheckBox({checked:!1,text:"Delta Background",cssClass:"e-designer-checkbox"});f=this.dashboardDesigner.locale.dialogOptions;it.ejButton({text:f.okButtonText,enabled:!0,showRoundedCorner:!0,size:"mini",click:$.proxy(this.updatekpiInfo,this,this.isKpiEdit)});tt.ejButton({text:f.cancelButtonText,showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeDialog,this,!0)})},n.prototype.closeDialog=function(){this.kpiDialog.data("ejDialog").close()},n.prototype.checkStatus=function(){return $("#"+this.id+"_kpiCheck").data("ejCheckBox").model.checked?!0:!1},n.prototype.getExpression=function(n,t,i){switch(KpiCalculationType[n]){case KpiCalculationType.AbsoluteVariation:return"["+t+" - "+i+"]";case KpiCalculationType.ActualValue:return"["+t+"]";case KpiCalculationType.PercentageOfTarget:return"[[("+t+")/("+i+")]* 100]";case KpiCalculationType.PercentageVariation:return"[([("+t+")/("+i+")]*100)-100]";case KpiCalculationType.ValueAndPercentage:return"("+t+")-("+i+")([([("+t+")/("+i+" )]*100)-100] )";default:return""}},n.prototype.updatekpiInfo=function(){var n;$("#"+this.id+"_kpi_btn_ok").data("ejButton").disable();var u=$("#"+this.id+"_actual_drop").data("ejDropDownList"),f=$("#"+this.id+"_target_drop").data("ejDropDownList"),e=$("#"+this.id+"_type_drop").data("ejDropDownList"),o=$("#"+this.id+"res_drop").data("ejDropDownList"),i=u.getItemDataByValue(u.getSelectedValue())[0],r=f.getItemDataByValue(f.getSelectedValue())[0],s=e.getItemDataByValue(e.getSelectedValue())[0],h=o.getItemDataByValue(o.getSelectedValue())[0],c=this.checkStatus(),l=this.getExpression(s.value,i.text,r.text),t;t=new KpiInformation;t.KpiCalculationType=s.value;t.Indication=h.value;t.KpiDisplayType=DisplayType.Value;t.SetBackground=c;t.ActualColumn.UniqueColumnName=i.value;t.ActualColumn.CaptionName=i.name;t.TargetColumn.UniqueColumnName=r.value;t.TargetColumn.CaptionName=r.name;t.DisplayExpression=l;t.DisplayColumnName=i.name+" Vs "+r.name;ej.isNullOrUndefined(this.kpiDataValueField)?(n=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createValueInfo"),n.UniqueColumnName=this.GetNewUniqeName(),n.IsKPIColumn=!0,n.DataField=n.Field=t.DisplayColumnName,n.FieldType=FieldType.Measures,n.SummaryType=SummaryType.NONE,n.KPIColumnInfo=t,n.MeasureFormatting=this.getMeasureFormat(t.KpiCalculationType)):(n=this.kpiDataValueField,n.IsKPIColumn=!0,n.DataField=n.Field=t.DisplayColumnName,n.FieldType=FieldType.Measures,n.SummaryType=SummaryType.NONE,n.KPIColumnInfo=t,n.MeasureFormatting=this.getMeasureFormat(t.KpiCalculationType));n.DateTimeFormat=DateTimeFormat.None;ej.DashboardUtil.invokeMethod(this.callInstance,this.callMethod,[n,this.isKpiEdit]);this.kpiDialog.data("ejDialog").close()},n.prototype.GetNewUniqeName=function(){for(var r,i=this.callInstance.getKPIDataValueSet(),n=[],t=0;t<i.length;t++)n.push(parseInt(i[t].UniqueColumnName.match(/\d+/),10));return r=n.length===0?0:Math.max.apply(null,n)+1,"kpicolumn_"+r},n.prototype.getMeasureFormat=function(n){var t=new MeasureFormatting;switch(KpiCalculationType[n]){case KpiCalculationType.PercentageOfTarget:case KpiCalculationType.PercentageVariation:t.FormatType=DataValueFormat.Percentage;t.Unit=NumberFormat.Ones;t.DecimalPoints=0}return t},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_kpiWindowDiv"))},n}();window.ej.createObject("ej.DashboardDesignerUtility.KPIWindow",InternalKPIWindow,window);InternalBubbleMapReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="BubbleMap";this.isMasterByDefault=!1;this.rootCss="e-bubblemap-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.contentContainer=null;this.dataGroupInfo={};this.bubblemapItem=null;this.bubbleMapJson=null;this.field=null;this.dataSource=null;this.isHeaderVisible=!0;this.controlHeader=null;this.shapecolor=null;this.shapeDataPath=null;this.bubbleMapDataAssign=null;this.dataConfiguration=null;this.reportName=null;this.maxValue=null;this.factor=null;this.strokeThickness=.75;this.strokeColor="#ffffff";this.layerType=null;this.map=null;this.hovercolor=null;this.containerProperties=null;this.dataValues=null;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.isDataEnabled=!0;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.controlType=ControlType.BubbleMap;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.render=function(n){this.renderBubbleMapItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.bubbleMapItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.bubbleMapJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateBubbleMapItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(n){return this.onFieldDragDropped(n)},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getBubbleMapContainerInstance()},n.prototype.refresh=function(){this.bubblemapElement.ejMap("refresh")},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"9ea7c153-2f82-4b34-a3ef-2686be50f998",widgetName:"BubbleMap",widgetDisplayName:n.itemPanel.widgetTitle.bubbleMap,cssClass:"e-widgeticon e-reportdesigner-widget-bubblemap",widgetNameSpace:"ej.DashboardDesignerUtility.BubbleMapItem",searchCategory:["bubblemap","Relationship"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1' ><\/span><span class='path2' ><\/span><span class='path3' ><\/span><span class='path4'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.bubbleMap,description:n.itemPanel.widgetDescription.bubbleMapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.bubbleMapDataReq}}]})},n.prototype.renderMapReportElement=function(n){try{this.bubbleMapJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.bubbleMapJson.ContainerSettings.Bounds.Row,column:this.bubbleMapJson.ContainerSettings.Bounds.Column,rowSpan:this.bubbleMapJson.ContainerSettings.Bounds.RowSpan,colSpan:this.bubbleMapJson.ContainerSettings.Bounds.ColumnSpan};this.renderBubbleMapElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.bubbleMapJson.UniqueName,Error:t,Type:t.name})}},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"BubbleMap",i);this.propertyPanel.canUpdate=!0},n.prototype.updateReportItemDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.getBubbleMapContainerInstance=function(){return this.containerProperties},n.prototype.getPropertyGridItems=function(){ej.isNullOrUndefined(this.field)&&(this.field=this.getShapeColumnValues(window[this.bubbleMapJson.ShapeData]));var n=new ej.DashboardDesignerUtility.PropertyGridItem(this.bubbleMapJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.bubbleMapJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.bubbleMapJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.bubbleMapJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.bubbleMapJson.ContainerSettings.Description,n.propertyGridItems.Type="BubbleMap",n.linkingProperty.Items[0].value=ej.DashboardUtil.getInstance().useExistingLinks(this.bubbleMapJson),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"BubbleColor",displayName:"Bubble Color",value:"#"+this.bubbleMapJson.BubbleColor.substring(3),itemType:"color"},{name:"ShapeData",displayName:"Map",value:this.bubbleMapJson.ShapeData,itemType:"dropdown",valueList:[{text:"Africa",value:"Africa"},{text:"Asia",value:"Asia"},{text:"Australia Territories",value:"Australia_Territories"},{text:"Canada",value:"Canada"},{text:"Europe",value:"Europe"},{text:"France",value:"France"},{text:"Germany",value:"Germany"},{text:"India",value:"India"},{text:"North America",value:"NorthAmerica"},{text:"South America",value:"SouthAmerica"},{text:"United Kingdom",value:"UnitedKingdom"},{text:"USA States",value:"USA_States"},{text:"WorldMap Continent",value:"WorldMap_Continent"},{text:"WorldMap Countries",value:"WorldMap_Countries"}]},{name:"shapePropertyPath",displayName:"Column",value:this.bubbleMapJson.ShapePropertyPath,itemType:"dropdown",valueList:ej.isNullOrUndefined(window[this.bubbleMapJson.ShapeData])?[this.bubbleMapJson.ShapePropertyPath]:this.field}]},n.linkingProperty,n.filterSettingsProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.getShapeColumnValues=function(n){var r=[],u,i,t;if(!ej.isNullOrUndefined(n))for(u="features",i=Object.keys(n[u][0].properties),t=0;t<i.length;t++)r.push(i[t]);return r},n.prototype.renderBubbleMapItem=function(){try{this.renderBubbleMapElement();this.bubbleMapJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.BubbleMap)}catch(n){this.designPanel.logError({Source:this.bubbleMapJson.UniqueName,Error:n,Type:n.name})}},n.prototype.getBubbleMapJson=function(){var n=new BubbleMapProperties;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.renderBubbleMapElement=function(){this.createBubbleMapElement();this.map=this.bubblemapElement;this.maxValue=30;this.factor=.1;this.layerType="geometry";this.dataSource=[];this.shapeDataPath="Country";this.hovercolor="gray";this.shapecolor="#E5E5E5";this.bubblemapElement.ejMap({zoomSettings:{maxValue:this.maxValue,factor:this.factor},layers:[{layerType:this.layerType,dataSource:this.dataSource,shapeDataPath:this.shapeDataPath,shapePropertyPath:this.bubbleMapJson.ShapePropertyPath,shapeData:window[this.bubbleMapJson.ShapeData],shapeSettings:{fill:this.shapecolor,highlightColor:this.hovercolor,strokeThickness:this.strokeThickness,stroke:this.strokeColor}}]})},n.prototype.createBubbleMapElement=function(){this.bubblemapItem=ej.buildTag("div.e-bubblemapitem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"bubblemapItem"+this.bubbleMapJson.UniqueName});this.bubblemapElement=ej.buildTag("div.e-bubblemap-element","",{width:"100%",height:"100%",position:"relative","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"bubblemapElement"+this.bubbleMapJson.UniqueName});this.contentContainer.append(this.bubblemapItem);this.controlContainer.data("widgetInstance",this);this.bubblemapItem.append(this.bubblemapElement)},n.prototype.updateBubbleMapItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.bubbleMapJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.bubbleMapJson);break;case"Description":this.propertyPanel.setDescription(this.bubbleMapJson,i);break;case"BubbleColor":this.updatePropertyAsync(this.updateBubbleColor,i);break;case"HoverColor":this.updatePropertyAsync(this.updateHoverColor,i);break;case"ShapeData":this.updatePropertyAsync(this.updateShapeData,i);break;case"shapePropertyPath":this.updatePropertyAsync(this.updateShapePropertyPath,i);break;case"ItemLink":this.UpdateLink(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.bubbleMapJson,i);break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"BubbleMap",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-bubblemap-item",this.designer._id+"_"+this.bubbleMapJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updatePropertyAsync=function(n,t){var r=this,i;ejDashboardDesigner.getInstance("DesignPanel").showLoadingIndicator(this.controlContainer);i=this;setTimeout(function(){$.proxy(n,i,t).call();ejDashboardDesigner.getInstance("DesignPanel").hideLoadingIndicator(r.controlContainer);ej.DashboardDesignerUtility.Serialization.notifyChange()},0)},n.prototype.UpdateLink=function(n){this.bubbleMapJson.UrlLink.EnableLink=n.EnableLink;this.bubbleMapJson.UrlLink.LinkType=n.LinkType;this.bubbleMapJson.UrlLink.GridUrlType=n.GridUrlType;this.bubbleMapJson.UrlLink.PassingParameters=n.PassingParameters;this.bubbleMapJson.UrlLink.UrlPath=n.UrlPath},n.prototype.updateBubbleColor=function(n){if(this.bubbleMapJson.BubbleColor="#FF"+n.substring(1),!ej.isNullOrUndefined(this.bubblemapElement)){var t=this.bubblemapElement.data("ejMap");t.model.layers[0].bubbleSettings.color=n;this.bubblemapElement.ejMap("refresh")}},n.prototype.updateHoverColor=function(n){var t=this.bubblemapElement.data("ejMap");t.model.layers[0].shapeSettings.highlightColor=n;this.hovercolor=n;this.bubblemapElement.ejMap("refresh")},n.prototype.updateShapeData=function(n){var t,i;this.bubbleMapJson.ShapeData=n;ej.isNullOrUndefined(this.bubblemapElement)&&!ej.isNullOrUndefined(window[n])&&(this.contentContainer.find(".e-map-file-err").remove(),this.renderMapReportElement(this.bubbleMapJson),this.dataConfiguration.postDraggedFields());t=ej.isNullOrUndefined(this.bubblemapElement)?null:this.bubblemapElement.data("ejMap");ej.isNullOrUndefined(t)||ej.isNullOrUndefined(window[n])||(t.model.layers[0].shapeData=window[n],this.field=this.getShapeColumnValues(window[n]),this.bubblemapElement.ejMap({baseMapIndex:1}),i=$("#"+this.designId+"_BubbleMap_BasicSettings_shapePropertyPath").data("ejDropDownList"),i.setModel({dataSource:this.field}),this.bubbleMapJson.ShapePropertyPath=this.field.indexOf("name")!==-1?"name":this.field[0],this.setPropertyElement("BasicSettings","shapePropertyPath",this.field.indexOf("name")!==-1?"name":this.field[0]));ej.isNullOrUndefined(window[n])&&(ej.isNullOrUndefined(t)||t.destroy(),ej.isNullOrUndefined(this.bubblemapItem)||this.bubblemapItem.remove(),this.bubblemapElement=null,this.designPanel.showMapFileErr(this,this.bubbleMapJson,"BubbleMap"))},n.prototype.updateShapePropertyPath=function(n){var t=this.bubblemapElement.data("ejMap");t.model.layers[0].shapePropertyPath=n;this.bubbleMapJson.ShapePropertyPath=n;this.bubblemapElement.ejMap("refresh")},n.prototype.updateWidgetSize=function(n){var u=this,i,t,r;this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.bubbleMapJson,CommandAction.ItemResize,"updateSize","e-bubblemap-item");this.contentContainer.find(".e-map-file-err").length===1&&(i=this.contentContainer.find(".e-map-file-err"),i.css({top:this.contentContainer.height()/2-i.height()+"px"}));this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):ej.isNullOrUndefined(this.bubblemapElement)||(t=this.bubblemapElement.data("ejMap"),r=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),t.model.layers[0].bubbleSettings.showBubble&&(t.model.layers[0].bubbleSettings.minValue=r*.005,t.model.layers[0].bubbleSettings.maxValue=r*.05),t.option("width","100%"),t.option("height","100%"),this.updatePropertyAsync(function(){u.bubblemapElement.ejMap({baseMapIndex:1})},null))},n.prototype.updateItemSize=function(n){var u=this,i,t,r;this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.bubbleMapJson,CommandAction.ItemResize,"updateItemSize","e-bubblemap-item");this.contentContainer.find(".e-map-file-err").length===1&&(i=this.contentContainer.find(".e-map-file-err"),i.css({top:this.contentContainer.height()/2-i.height()+"px"}));this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):ej.isNullOrUndefined(this.bubblemapElement)||(t=this.bubblemapElement.data("ejMap"),r=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),t.model.layers[0].bubbleSettings.showBubble&&(t.model.layers[0].bubbleSettings.minValue=r*.005,t.model.layers[0].bubbleSettings.maxValue=r*.05),t.option("width","100%"),t.option("height","100%"),this.updatePropertyAsync(function(){u.bubblemapElement.ejMap({baseMapIndex:1})},null))},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.bubbleMapJson,CommandAction.ItemMove,"updatePosition","e-bubblemap-item")},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions",SupportedTypes:["e-reportdesigner-dataset-number","e-reportdesigner-dataset-boolean","e-reportdesigner-dataset-char","e-reportdesigner-dataset-string"]}),n},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Value",CategoryType:CategoryType.Numeric,CategoryCount:1}),n.push({Name:"Shape",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}),n},n.prototype.isFieldValid=function(){return!0},n.prototype.updateReportItemData=function(n){var i,u;this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.bubblemapItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");var t=this.bubblemapElement.data("ejMap"),r=null,f=null;ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.bubbleMapJson,this.dataGroupInfo);ej.isNullOrUndefined(n.Error)||n.Error?ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):(n.noDataAvailable?(this.bubblemapItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):ej.isNullOrUndefined(n)||n.data==="[]"||!ej.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?(n.data==="[]"&&n.columnBindings==="{}"||!ej.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(t.model.layers[0].bubbleSettings.showBubble=!1):(r=JSON.parse(n.data),f=JSON.parse(n.columnBindings),i=this.getColumnList(r),u=this.controlContainer.height()<this.controlContainer.width()?this.controlContainer.height():this.controlContainer.width(),i.length>1?(this.generateTooltip(f,i),t.model.layers[0].bubbleSettings.showBubble=!0,t.model.layers[0].bubbleSettings.valuePath=i[0].text,t.model.layers[0].bubbleSettings.minValue=u*.005,t.model.layers[0].bubbleSettings.maxValue=u*.05,t.model.layers[0].bubbleSettings.color="#"+this.bubbleMapJson.BubbleColor.substring(3),t.model.layers[0].bubbleSettings.bubbleOpacity=.6,t.model.layers[0].dataSource=r,t.model.layers[0].shapeDataPath=i[1].text,t.model.layers[0].showTooltip=!0,t.model.layers[0].tooltipTemplate="template"+$(this.bubblemapElement).attr("id")+"_tooltip"):t.model.layers[0].bubbleSettings.showBubble=!1),ej.DashboardUtil.updateAction("BubbleMap","Link","Link"));this.bubblemapElement.ejMap("refresh")},n.prototype.generateTooltip=function(n,t){var r,i,f,u;r='<script id="template'+$(this.bubblemapElement).attr("id")+'_tooltip" type="application/jsrender">';r+='<div style="font-family:Roboto;background:White;border: 1px solid #4D4D4D;border-radius: 7px;margin-right: 25px;min-width: 110px;padding-right: 5px;padding-left: 5px;width: auto;height: auto;">';i=new MeasureFormatting;f="false";this.dataGroupInfo.Values[0].Values[0].MeasureFormatting!==null&&(i=this.dataGroupInfo.Values[0].Values[0].MeasureFormatting,f="true");u="template"+$(this.bubblemapElement).attr("id")+"_tooltip";u="#"+u;$(u).length>0&&$(u).remove();r+="<p style='color:black;font-size:12px;font-weight:normal;margin-top:10px;'>"+n[t[1].id]+"  : {{:(#data['"+this.dataGroupInfo.Values[1].Values[0].UniqueColumnName+"'])}}<\/P>";r+="<p style='color:black;font-size:12px;font-weight:normal;margin-top:10px;'>"+n[t[0].id]+"  : {{: ~formatTooltip(#data['"+this.dataGroupInfo.Values[0].Values[0].UniqueColumnName+"'], '"+i.Culture+"', '"+i.DecimalPoints+"', '"+i.FormatType+"', '"+i.Prefix+"', '"+i.Suffix+"', '"+i.Unit+"', '"+f+"')}}<\/P>";r+="<\/div><\/script>";$(this.bubblemapItem).append(r)},n.prototype.getColumnList=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},n.prototype.bubbleMapItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.bubbleMapJson.UniqueName,[this.bubbleMapJson],null);var n=this.bubblemapElement.data("ejMap");ej.isNullOrUndefined(n)||n.destroy();$("#"+this.designer._id+"_"+this.bubbleMapJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.bubbleMapJson.UniqueName).remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.BubbleMap)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.bubbleMapJson)&&(this.bubbleMapJson=this.getBubbleMapJson()),this.bubbleMapJson},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onFieldDragDropped=function(n){return ej.isNullOrUndefined(n.droppedItem)?!(n.categoryType===CategoryType[CategoryType.Non_Numeric]&&n.fieldType===FieldType[FieldType.Measures]):!0},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Auto,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.getParameterColumn=function(){return{Value:this.bubbleMapJson.ContainerSettings.Title,Id:this.bubbleMapJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(t,i){n.FieldType==="Measures"&&i.textContent.toLowerCase()!=="none"&&i.textContent.toLowerCase()!=="sort"&&$(i).css("display","block");n.FieldType==="Dimensions"&&$(i).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters"&&$(i).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n}();window.ej.createObject("ej.DashboardDesignerUtility.BubbleMapItem",InternalBubbleMapReportItem,window);ej.DashboardDesignerUtility.BubbleMapItem.prototype.widgetItems();InternalCardReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="Card";this.isMasterByDefault=!1;this.rootCss="e-card-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.isColorSupportForText=!1;this.colorCustomizationSettings=null;this.cardJson=null;this.contentContainer=null;this.cardItem=null;this.cardElement=null;this.cardContent=null;this.titleValue=null;this.subTitleValue=null;this.subHeading=!1;this.isHeaderVisible=!1;this.isControlMenuVisible=!1;this.isMaximizeEnable=!1;this.controlHeader=null;this.controlSubHeader=null;this.reportName=null;this.dataInfo=null;this.dataGroupInfo=null;this.dataConfiguration=null;this.containerProperties=null;this.isOpenReport=!1;this.columnBinding=[];this.dataValues=null;this.colorFields=[];this.colorFields=this.getColorFields();this.dataInfo=ejDashboardDesigner.getInstance("DataConfiguration");this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.isDataEnabled=!0;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.Card;this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem");this.colorCustomizationSettings=ejDashboardDesigner.getInstance("ColorCustomization")}return n.prototype.render=function(n){this.renderCardItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.cardItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.cardJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateCardItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(){return!0},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getCardContainerInstance()},n.prototype.refresh=function(){this.cardResize()},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.deviation,GroupId:"eb520ddb-5d82-4bf8-858c-cabf3317229e",Items:[{id:"f48aed7c-c972-43c1-8668-a0c9b89c1899",widgetName:"Card",widgetDisplayName:n.itemPanel.widgetTitle.card,cssClass:"e-widgeticon e-reportdesigner-widget-card",widgetNameSpace:"ej.DashboardDesignerUtility.CardItem",searchCategory:["card","deviation"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.card,description:n.itemPanel.widgetDescription.cardDesc,dataRequirement:n.itemPanel.widgetDataRequirements.cardDataReq}}]})},n.prototype.getColorFields=function(){return[{Name:WidgetProperty.FillColor,DisplayName:"Foreground",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.BackgroundColor,DisplayName:"Background",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.TitleColor,DisplayName:"Title",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.Icon,DisplayName:"Icon",ColorPicker:ColorSetColorPickers.IconColorPicker},]},n.prototype.getCardContainerInstance=function(){return this.containerProperties},n.prototype.renderCardReportElement=function(n){this.isOpenReport=!0;try{this.cardJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.cardJson.ContainerSettings.Bounds.Row,column:this.cardJson.ContainerSettings.Bounds.Column,rowSpan:this.cardJson.ContainerSettings.Bounds.RowSpan,colSpan:this.cardJson.ContainerSettings.Bounds.ColumnSpan};this.renderCardElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.cardJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderCardItem=function(){try{this.renderCardElement();this.cardJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);this.cardJson.TitleSettings.Text=this.cardJson.ContainerSettings.Title=$(this.cardElement).find(".e-title").html();ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Card)}catch(n){this.designPanel.logError({Source:this.cardJson.UniqueName,Error:n,Type:n.name})}},n.prototype.renderCardElement=function(){this.cardItem=ej.buildTag("div.e-carditem e-dbrd-widget e-dbrd-control e-Card-Single","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"cardItem"+this.cardJson.UniqueName});this.cardElement=ej.buildTag("div","",{width:"100%",height:"100%",position:"relative","font-size":"10pt","background-color":"white"},{id:this.designId+"cardElement"+this.cardJson.UniqueName});this.contentContainer.append(this.cardItem);this.controlContainer.data("widgetInstance",this);this.cardItem.append(this.cardElement);this.cardItem.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designId+"_designer_waiting_popup e-designer-loader"});this.cardElement.ejCard({actualValue:{color:"#686262",name:"Actual",position:"right",value:"100"},targetValue:{color:"#686262",name:"Target",position:"right",value:"90"},size:{width:this.cardItem.width(),height:this.cardItem.height()},headers:{visible:this.cardJson.TitleSettings.Visibility},customHeader:{visible:!ej.isNullOrUndefined(this.cardJson.TitleSettings.Text),color:ej.isNullOrUndefined(this.cardJson.TitleSettings.Color)?"":this.cardJson.TitleSettings.Color,text:ej.isNullOrUndefined(this.cardJson.TitleSettings.Text)?"":this.cardJson.TitleSettings.Text},uniformFontSize:this.cardJson.UniformSizing,customVisibility:{compactView:this.cardJson.EnableCompactView},primaryValue:{color:""}});this.setPropertyElement("BasicSettings","TitleValue",this.cardJson.ContainerSettings.Title)},n.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.designPanel.selectedReportItems.length>0&&this.reportName===this.designPanel.selectedReportItems[0].attr("name")&&(this.propertyPanel.canUpdate=!1,u=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u.value=i,f=$.extend(!0,{},u),f.categoryName=n,this.propertyPanel.updatePropertyValue(f,"Card",i),this.propertyPanel.canUpdate=!0)},n.prototype.getPropertyGridItems=function(){var t=this.getBindedColumns(),n=new ej.DashboardDesignerUtility.PropertyGridItem(this.cardJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.cardJson.ContainerSettings),i;return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.cardJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.cardJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.cardJson.ContainerSettings.Description,n.propertyGridItems.Type="Card",n.linkingProperty.Items[0].value=ej.DashboardUtil.getInstance().useExistingLinks(this.cardJson),i=this.dataGroupInfo,$.each(n.containerSettingsProperty.Items,function(n,t){ej.isNullOrUndefined(t.isVisible)||(t.isVisible=!1);(t.name==="ContainerTitleAlign"||t.name==="ContainerTitleColor"||t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport")&&i.Values.length>2&&i.Values[2].Values.length!==0&&(t.isVisible=!0);t.name==="ShowLinkIcon"&&(t.isVisible=!0)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"ShowTitle",displayName:"Title",value:this.cardJson.TitleSettings.Visibility,itemType:"bool"},{name:"TitleValue",isDisable:this.cardJson.TitleSettings.Visibility?!1:!0,isVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[2].Values.length===0?!0:!1:!0,displayName:"",value:this.cardJson.TitleSettings.Text,itemType:"string"},{name:"TitleAlign",isVisible:this.cardJson.TitleSettings.Visibility?!0:!1,displayName:"Title Alignment",value:ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.TitleSettings.Alignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"TitleColor",isVisible:this.cardJson.TitleSettings.Visibility?!0:!1,displayName:"Title Color",value:this.cardJson.TitleSettings.Color,itemType:"color"},{name:"ShowSubHeading",isVisible:this.cardJson.TitleSettings.Visibility?!0:!1,displayName:"Subtitle",value:this.cardJson.SubTitleSettings.Visibility,itemType:"bool"},{name:"SubHeadingValue",isVisible:this.cardJson.TitleSettings.Visibility?!0:!1,isDisable:this.cardJson.SubTitleSettings.Visibility?!1:!0,displayName:"",value:this.cardJson.SubTitleSettings.Text,itemType:"string"},{name:"SubTitleColor",isVisible:this.cardJson.TitleSettings.Visibility?!0:!1,isDisable:this.cardJson.SubTitleSettings.Visibility?!1:!0,displayName:"Subtitle Foreground",value:this.cardJson.SubTitleSettings.Color,itemType:"color"},{name:"ValueAlign",displayName:"Value Alignment",isVisible:!1,value:ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.ValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"ActualValueColor",displayName:"Actual Value Foreground",value:this.cardJson.ActualValueForeground,itemType:"color"},{name:"SecondaryValueType",isDisable:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0&&this.dataGroupInfo.Values[1].Values.length!==0||this.dataGroupInfo.Values[0].Values.length===0&&this.dataGroupInfo.Values[1].Values.length===0&&this.dataGroupInfo.Values[2].Values.length===0?!1:!0:!1,displayName:"Secondary Value Type",value:this.cardJson.SecondaryValueType==="variance"||this.cardJson.SecondaryValueType==="Variation"?"Variation":"Target Value",itemType:"dropdown",valueList:["Variation","Target Value"]},{name:"ActualValuePrefix",displayName:"Actual Value Prefix",value:this.cardJson.ActualValuePrefix,itemType:"string"},{name:"TargetValuePrefix",isVisible:this.cardJson.SecondaryValueType==="target"?!0:!1,displayName:"Target Value Prefix",value:this.cardJson.TargetValuePrefix,itemType:"string"},]},n.linkingProperty,{CategoryName:"Behavior",IsVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0||this.dataGroupInfo.Values[1].Values.length!==0?!0:!1:!0,Items:[{name:"HighValueGood",displayName:"High Value Is Good",value:this.cardJson.Direction,itemType:"bool",isVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0&&this.dataGroupInfo.Values[1].Values.length!==0||this.dataGroupInfo.Values[0].Values.length===0&&this.dataGroupInfo.Values[1].Values.length===0&&this.dataGroupInfo.Values[2].Values.length===0||this.dataGroupInfo.Values[0].Values.length===0&&this.dataGroupInfo.Values[1].Values.length===0&&this.dataGroupInfo.Values[2].Values.length!==0?!0:!1:!0},{name:"ShowIndicator",displayName:"Show Indicator Only",value:this.cardJson.ShowIndicatorOnly,itemType:"bool",isVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0&&this.dataGroupInfo.Values[1].Values.length!==0||this.dataGroupInfo.Values[0].Values.length===0&&this.dataGroupInfo.Values[1].Values.length===0&&this.dataGroupInfo.Values[2].Values.length===0||this.dataGroupInfo.Values[0].Values.length===0&&this.dataGroupInfo.Values[1].Values.length===0&&this.dataGroupInfo.Values[2].Values.length!==0?!0:!1:!0},{name:"PrimaryValueType",displayName:"Primary Value Type",value:this.cardJson.PrimaryValueType,itemType:"dropdown",valueList:["Absolute Difference","Percent of Difference","Percent of Target","Actual Value","Percent of Change"],isVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0&&this.dataGroupInfo.Values[1].Values.length!==0||this.dataGroupInfo.Values[0].Values.length===0&&this.dataGroupInfo.Values[1].Values.length===0&&this.dataGroupInfo.Values[2].Values.length===0||this.dataGroupInfo.Values[0].Values.length===0&&this.dataGroupInfo.Values[1].Values.length===0&&this.dataGroupInfo.Values[2].Values.length!==0?!0:!1:!0},{name:"EnableCompactView",displayName:"Enable Compact View",value:this.cardJson.EnableCompactView,itemType:"bool",isVisible:!1},{name:"ShowPrimaryValue",displayName:"Primary Value",callbackInstance:this,callbackMethod:"renderShowValueProperties",elementType:"Card",itemType:"object",value:this.cardJson.ShowPrimaryValue,isVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0&&this.dataGroupInfo.Values[1].Values.length!==0?!0:!1:!0},{name:"ShowActualValueVariation",displayName:"Actual Value/Variation %",callbackInstance:this,callbackMethod:"renderShowValueProperties",elementType:"Card",itemType:"object",isDisable:this.cardJson.ShowIndicatorOnly,value:this.cardJson.ShowActualValue,isVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0&&this.dataGroupInfo.Values[1].Values.length!==0?!0:!1:!0},{name:"ShowSecondaryValue",displayName:"Secondary Value",isDisable:this.cardJson.ShowIndicatorOnly,callbackInstance:this,callbackMethod:"renderShowValueProperties",elementType:"Card",itemType:"object",value:this.cardJson.ShowSecondaryValue,isVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0&&this.dataGroupInfo.Values[1].Values.length!==0?!0:!1:!0},{name:"Indicator",displayName:"Indicator",callbackInstance:this,callbackMethod:"renderShowValueProperties",elementType:"Card",itemType:"object",value:this.cardJson.ShowIndicator,isDisable:this.cardJson.ShowIndicatorOnly,isVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[0].Values.length!==0&&this.dataGroupInfo.Values[1].Values.length!==0?!0:!1:!0},{name:"EnableUniformSizing",displayName:"Enable Uniform Sizing",value:this.cardJson.UniformSizing,itemType:"bool"},]},{CategoryName:"Color Settings",IsVisible:!ej.isNullOrUndefined(t.actualColumns)&&t.actualColumns.length>0&&!ej.isNullOrUndefined(t.targetColumns)&&t.targetColumns.length>0,Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderColorSettings",itemType:"object",elementType:"Card"},]},{CategoryName:"Sparkline",IsVisible:this.dataGroupInfo.Values.length!==0?this.dataGroupInfo.Values[4].Values.length!==0&&(this.dataGroupInfo.Values[0].Values.length!==0||this.dataGroupInfo.Values[1].Values.length!==0)?!0:!1:!1,Items:[{name:"SparklineType",displayName:"Sparkline Type",value:ej.DashboardDesignerUtility.Serialization.enumToString(SparkLineType,this.cardJson.SparklineSettings.Type),itemType:"dropdown",valueList:["Line","Area","Column"]},{name:"ShowMarker",displayName:"Show Marker",value:this.cardJson.SparklineSettings.ShowMarker,itemType:"bool"},{name:"LowValueColor",isDisable:!this.cardJson.SparklineSettings.ShowMarker,displayName:"Low Value Color",value:this.cardJson.SparklineSettings.LowValueColor,itemType:"color"},{name:"HighValueColor",displayName:"High Value Color",value:this.cardJson.SparklineSettings.HighValueColor,itemType:"color",isDisable:!this.cardJson.SparklineSettings.ShowMarker},{name:"Opacity",displayName:"Opacity",isDisable:!this.cardJson.SparklineSettings.ShowMarker,value:this.cardJson.SparklineSettings.Opacity,itemType:"float",decimalPlaces:1,minimum:0,maximum:1,interval:.1,unitType:"pt"}]},{CategoryName:"Alignment",Items:[{name:"PrimaryValueAlignment",displayName:"Primary Value",isDisable:this.cardJson.ShowIndicatorOnly,value:ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.PrimaryValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"ActualValueTextAlignment",displayName:"Actual Value/Variation %",isDisable:this.cardJson.ShowIndicatorOnly,value:ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.ValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"SecondaryValueAlignment",displayName:"Secondary Value",isDisable:this.cardJson.ShowIndicatorOnly,value:ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.SecondaryValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},{name:"AdditionalValueAlignment",displayName:"Custom Value",isDisable:this.dataGroupInfo.Values.length!==0&&this.dataGroupInfo.Values[3].Values.length>0?this.cardJson.ShowIndicatorOnly:!0,value:ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.AdditionalValueAlignment),itemType:"dropdown",valueList:["Left","Center","Right"]},]},n.filterSettingsProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.renderColorSettings=function(n,t,i){var r={colorFields:this.colorFields,isBasicEnable:!1,isAdvanceEnable:!0,columns:this.getColorFieldListName(),widgetInstance:this,datasetId:this.dataGroupInfo.DatasetId};this.colorCustomizationSettings.renderColorSettings(n,t,i,r)},n.prototype.getColorFieldListName=function(){for(var i,t=ej.isNullOrUndefined(this.cardJson.ColorSets)?(new ColorSets).ColorSettingsList:this.cardJson.ColorSets.ColorSettingsList,r=[],u=[],f=[],n=0;n<t.length;n++)i=this.getFieldName(t[n].SelectedColumn.UniqueColumnName),i!==""&&(this.isColorSupportForText?this.isMeasure(t[n].SelectedColumn.UniqueColumnName)?u.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName}):f.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName}):r.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName}));return{measureFields:u,dimensionFields:f,columns:r}},n.prototype.isMeasure=function(n){var u=this.dataGroupInfo,e=!1,i,t,f,o,r;if(!ej.isNullOrUndefined(u.Values)&&u.Values.length>0)for(i=u.Values,t=0;t<i.length;t++)for(f=0;f<i[t].Values.length;f++)if(o=i[t].Values,r=o.filter(function(t){return t.UniqueColumnName===n}),!ej.isNullOrUndefined(r)&&r.length>0){e=r[0].FieldType===FieldType[FieldType.Measures];break}return e},n.prototype.getFieldName=function(n){var f="",i,t,r,e,u;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(r=0;r<i[t].Values.length;r++)if(e=i[t].Values,u=e.filter(function(t){return t.UniqueColumnName===n}),!ej.isNullOrUndefined(u)&&u.length>0){f=i[t].Name==="TargetValue"?"Primary Value":this.isColorSupportForText&&i[t].Name==="Series"?i[t].Values[0].DataField:"";break}return f},n.prototype.updateColorCustomInfo=function(n){var u,t,r;if(!ej.isNullOrUndefined(this.cardJson.ColorSets.ColorSettingsList[0].AdvancedColorSettings)&&ej.isNullOrUndefined(n[0].AdvancedColorSettings)&&this.resetToDefaultColors(),this.cardJson.ColorSets.ColorSettingsList=n,u=0,ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values)||(u=this.dataGroupInfo.Values[1].Values.length),u>0&&!ej.isNullOrUndefined(n[0].AdvancedColorSettings)){this.showLoadingIndicator();var i=this.cardJson.Data,f=this.getDataCategoriesInfo(),e=[];for(t=0;t<i.Containers.length;t++)if(i.Containers[t].Id===f[0].Name||i.Containers[t].Id===f[1].Name||i.Containers[t].Id===f[2].Name)for(r=0;r<i.Containers[t].FieldInfos.length;r++)e.push(i.Containers[t].FieldInfos[r]);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designer.model.serviceUrl+"/GetColorParameters/",{action:"fetchData",data:JSON.stringify({designerAction:"fetchData",fieldInfo:e,dataset:i.Id,request:AjaxRequest.Widget.toString(),valuetype:this.cardJson.PrimaryValueType,colorSet:this.cardJson.ColorSets,controlType:this.controlType})},{fnction:$.proxy(this.bindData,this)})}},n.prototype.resetToDefaultColors=function(){var u=this,i,r,n,t;if(this.showLoadingIndicator(),ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.resetCardObject(t),t.redraw();else for(i=function(n){var t=$(r.cardContent.children()[n]).data("ejCard");setTimeout(function(){u.resetCardObject(t);t.redraw()},100)},r=this,n=0;n<this.cardContent.children().length;n++)i(n);this.hideLoadingIndicator()},n.prototype.resetCardObject=function(n){n.model.primaryValue.color="";n.model.background.color="#ffffff";n.model.customHeader.color=this.cardJson.TitleSettings.Color;n.model.icon.path=""},n.prototype.bindData=function(n){var r=this,i=JSON.parse(n["data"]),u=JSON.parse(n["icon"]),f,e,t;if(ej.isNullOrUndefined(this.cardContent))this.applySeriesCardSettings(this.cardElement,0,i,u),this.cardElement.data("ejCard").redraw();else for(f=function(n){var t=$(e.cardContent.children()[n]);setTimeout(function(){r.applySeriesCardSettings(t,n,i,u);t.data("ejCard").redraw()},100)},e=this,t=0;t<i.length;t++)f(t);setTimeout(function(){r.hideLoadingIndicator()},100)},n.prototype.applySeriesCardSettings=function(n,t,i,r){var f=n.data("ejCard"),u;if(f.model.primaryValue.color=ej.isNullOrUndefined(i[t].PrimaryValueColumn_FillColor)?"":i[t].PrimaryValueColumn_FillColor,f.model.background.color=ej.isNullOrUndefined(i[t].PrimaryValueColumn_BackgroundColor)?"#ffffff":i[t].PrimaryValueColumn_BackgroundColor,f.model.customHeader.color=ej.isNullOrUndefined(i[t].PrimaryValueColumn_TitleColor)?this.cardJson.TitleSettings.Color:i[t].PrimaryValueColumn_TitleColor,ej.isNullOrUndefined(i[t].PrimaryValueColumn_BorderColor)||(n.style.borderColor=i[t].PrimaryValueColumn_BorderColor),ej.isNullOrUndefined(i[t].PrimaryValueColumn_Icon))f.model.icon.path="";else{var s=String.fromCharCode(127),e=i[t].PrimaryValueColumn_Icon.split(s),o=e[1];if(e[0]==="Embedded")for(u=0;u<r.length;u++)if(r[u].fileName===o){o="data:image/"+r[u].ext+";base64,"+r[u].source;break}f.model.icon={type:e[0],path:o,color:e[2]}}},n.prototype.renderShowValueProperties=function(n,t,i){this.propertyPanel.setObjectValues(n,i.categoryName,i,i.elementType)},n.prototype.updateCardItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":i!==t&&(this.cardJson.HasCustomTitle=i!==""&&this.cardJson.ContainerSettings.Title!==i);this.cardJson.TitleSettings.Text=this.cardJson.ContainerSettings.Title=i;this.setPropertyElement("BasicSettings","TitleValue",this.cardJson.ContainerSettings.Title);this.dataGroupInfo.Values.length!==0&&this.dataGroupInfo.Values[2].Values.length!==0?this.propertyPanel.setTitle(this.cardJson):this.updateTitleValue(i);break;case"Description":this.propertyPanel.setDescription(this.cardJson,i);break;case"HighValueGood":this.updateHighValueGood(i);break;case"ShowIndicator":i=ej.isNullOrUndefined(i)?!1:i;this.updateShowIndicator(i);break;case"ShowTitle":this.updateShowTitle(i);break;case"TitleValue":this.updateTitleValue(i);break;case"TitleAlign":this.updateTitleAlign(i);break;case"TitleColor":this.updateTitleColor(i);break;case"ValueAlign":this.updateValueAlign(i);break;case"ActualValueColor":this.updateActualValueColor(i);break;case"SecondaryValueType":this.updateSecondaryValueType(i);break;case"ShowSubHeading":this.updateSubHeading(i);break;case"SubHeadingValue":this.updateSubHeadingValue(i);break;case"SubTitleColor":this.updateSubHeadingColor(i);break;case"PrimaryValueType":this.updatePrimaryValueType(i);break;case"ActualValuePrefix":this.updateActualValuePrefix(i);break;case"TargetValuePrefix":this.updateTargetValuePrefix(i);break;case"ItemLink":this.UpdateLink(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.cardJson,i);break;case"SparklineType":case"HighValueColor":case"LowValueColor":case"ShowMarker":case"Opacity":this.updateSparkLine(n,i);break;case"EnableCompactView":case"EnableUniformSizing":case"ShowActualValueVariation":case"ShowSecondaryValue":case"ShowPrimaryValue":case"Indicator":this.updateCardBehaviorProperties(n,i);break;case"AdditionalValueAlignment":case"ActualValueTextAlignment":case"PrimaryValueAlignment":case"SecondaryValueAlignment":this.updateCardAlignmentProperties(n,i);break;case"ColorSet":o=!0;ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-card-item",this.designer._id+"_"+this.cardJson.UniqueName,[n,i,t,r],[n,t,i,r]);this.updateColorCustomInfo(i);ej.DashboardDesignerUtility.Serialization.notifyChange();ejDashboardDesigner.editManager.setMergeAction(!1);break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"Card",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-card-item",this.designer._id+"_"+this.cardJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updateSparkLine=function(n,t){switch(n){case"SparklineType":this.cardJson.SparklineSettings.Type=ej.DashboardDesignerUtility.Serialization.stringtoEnum(SparkLineType,t);this.renderCardAfterChangingProperties("sparkLine.Type",t);break;case"HighValueColor":this.cardJson.SparklineSettings.HighValueColor=t;this.renderCardAfterChangingProperties("sparkLine.HighValueColor",t);break;case"LowValueColor":this.cardJson.SparklineSettings.LowValueColor=t;this.renderCardAfterChangingProperties("sparkLine.LowValueColor",t);break;case"Opacity":this.cardJson.SparklineSettings.Opacity=t;this.renderCardAfterChangingProperties("sparkLine.Opacity",t);break;case"ShowMarker":this.cardJson.SparklineSettings.ShowMarker=t;this.cardJson.SparklineSettings.ShowMarker?(this.propertyPanel.updateItemDisable("color","Card","Sparkline","LowValueColor",!1),this.propertyPanel.updateItemDisable("color","Card","Sparkline","HighValueColor",!1),this.propertyPanel.updateItemDisable("float","Card","Sparkline","Opacity",!1)):(this.propertyPanel.updateItemDisable("color","Card","Sparkline","LowValueColor",!0),this.propertyPanel.updateItemDisable("color","Card","Sparkline","HighValueColor",!0),this.propertyPanel.updateItemDisable("float","Card","Sparkline","Opacity",!0));this.renderCardAfterChangingProperties("sparkLine.ShowMarker",t)}},n.prototype.renderCardAfterChangingProperties=function(n,t){var i=[],r;if(ej.isNullOrUndefined(this.cardContent))i=this.cardElement.data("ejCard"),this.updateCardProperty(n,i,t);else for(r=0;r<this.cardContent.children().length;r++)i=$(this.cardContent.children()[r]).data("ejCard"),this.updateCardProperty(n,i,t)},n.prototype.updateCardBehaviorProperties=function(n,t){switch(n){case"EnableCompactView":this.cardJson.EnableCompactView=t;this.renderCardAfterChangingProperties("customVisibility.compactView",t);break;case"EnableUniformSizing":this.cardJson.UniformSizing=t;this.renderCardAfterChangingProperties("uniformFontSize",t);break;case"ShowActualValueVariation":this.cardJson.ShowActualValue=t;this.renderCardAfterChangingProperties("customVisibility.actualValue",t);this.cardJson.ShowIndicatorOnly?this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!0):this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!1);break;case"Indicator":this.cardJson.ShowIndicator=t;this.renderCardAfterChangingProperties("customVisibility.indicator",t);this.cardJson.ShowIndicatorOnly?this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!0):this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!1);break;case"ShowSecondaryValue":this.cardJson.ShowSecondaryValue=t;this.renderCardAfterChangingProperties("customVisibility.secondaryValue",t);this.cardJson.ShowIndicatorOnly?this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!0):this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!1);break;case"ShowPrimaryValue":this.cardJson.ShowPrimaryValue=t;this.renderCardAfterChangingProperties("customVisibility.primaryValue",t)}},n.prototype.updateCardAlignmentProperties=function(n,t){switch(n){case"AdditionalValueAlignment":this.cardJson.AdditionalValueAlignment=ej.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,t);this.renderCardAfterChangingProperties("additionalValue.position",t.toString().toLocaleLowerCase());break;case"ActualValueTextAlignment":this.cardJson.ValueAlignment=ej.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,t);this.renderCardAfterChangingProperties("actualValue.position",t.toString().toLocaleLowerCase());break;case"PrimaryValueAlignment":this.cardJson.PrimaryValueAlignment=ej.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,t);this.renderCardAfterChangingProperties("primaryValuePosition",t.toString().toLocaleLowerCase());break;case"SecondaryValueAlignment":this.cardJson.SecondaryValueAlignment=ej.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,t);this.renderCardAfterChangingProperties("secondaryValuePosition",t.toString().toLocaleLowerCase())}},n.prototype.updateCardProperty=function(n,t,i){var u,r,f;if(t){for(u=t.model,r=n.split("."),f=0;f<r.length-1;f++)u=u[r[f]];u[r[r.length-1]]=i;t.redraw()}},n.prototype.UpdateLink=function(n){this.cardJson.UrlLink.EnableLink=n.EnableLink;this.cardJson.UrlLink.LinkType=n.LinkType;this.cardJson.UrlLink.GridUrlType=n.GridUrlType;this.cardJson.UrlLink.PassingParameters=n.PassingParameters;this.cardJson.UrlLink.UrlPath=n.UrlPath},n.prototype.updateHighValueGood=function(n){var t,i;if(this.cardJson.Direction=n,t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("higherValueGood",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("higherValueGood",t,n)},n.prototype.updateShowIndicator=function(n){var t,i;if(this.cardJson.ShowIndicatorOnly=n,this.cardJson.ShowIndicatorOnly?(this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!0),this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!0),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!0),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowActualValueVariation",!0),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","Indicator",!0),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowSecondaryValue",!0),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","AdditionalValueAlignment",!0),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","SecondaryValueAlignment",!0),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","ActualValueTextAlignment",!0),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","PrimaryValueAlignment",!0)):(this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowPrimaryValue",!1),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowActualValueVariation",!1),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowSecondaryValue",!1),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","Indicator",!1),this.propertyPanel.updateItemOpacity("bool","Card","Behavior","ShowPrimaryValue",!1),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","AdditionalValueAlignment",!1),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","SecondaryValueAlignment",!1),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","ActualValueTextAlignment",!1),this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","PrimaryValueAlignment",!1)),t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("showIndicatorOnly",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("showIndicatorOnly",t,n)},n.prototype.updateShowTitle=function(n){var t=[],i;if(this.cardJson.TitleSettings.Visibility=n,this.cardJson.HasCustomTitle=!n&&this.cardJson.HasCustomTitle,ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.cardJson.TitleSettings.Visibility?(t.model.headers={visible:!0},this.cardJson.TitleSettings.Text===""&&ej.isNullOrUndefined(this.titleValue)?(t.model.customHeader.visible=!0,t.model.customHeader.text="Actual vs Target"):this.cardJson.TitleSettings.Text===""?(t.model.customHeader.visible=!0,t.model.customHeader.text=this.titleValue):(t.model.customHeader.visible=!0,t.model.customHeader.text=this.cardJson.TitleSettings.Text),t.redraw(),this.propertyPanel.updateItemDisable("string","Card","BasicSettings","TitleValue",!n)):(t.model.headers.visible=!1,t.model.customHeader.visible=!1,t.redraw(),this.propertyPanel.updateItemDisable("string","Card","BasicSettings","TitleValue",!n));else for(this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!1),i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),t.model.headers.visible=n,t.model.customHeader.visible=n,t.redraw();this.cardJson.TitleSettings.Visibility?(this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleAlign",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleColor",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","ShowSubHeading",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","SubHeadingValue",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","SubTitleColor",n),this.propertyPanel.refreshScroller()):(this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleAlign",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleColor",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","ShowSubHeading",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","SubHeadingValue",n),this.propertyPanel.updateItemVisibility("Card","BasicSettings","SubTitleColor",n),this.propertyPanel.refreshScroller())},n.prototype.updateTitleValue=function(n){var t=this.cardElement.data("ejCard");ej.isNullOrUndefined(t)||(n===""?(t.model.customHeader.visible=!0,this.cardJson.HasCustomTitle=!1,this.dataGroupInfo.Values.length>0?this.dataGroupInfo.Values[2].Values.length===0&&(!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values)&&this.dataGroupInfo.Values[1].Values.length>0?t.model.customHeader.text=this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=t.model.actualValue.name+" vs "+t.model.targetValue.name:!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0?t.model.customHeader.text=this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=t.model.actualValue.name:!ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values)&&this.dataGroupInfo.Values[1].Values.length>0?t.model.customHeader.text=this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=t.model.targetValue.name:ej.isNullOrUndefined(this.cardJson.TitleSettings.Text)&&this.cardJson.TitleSettings.Text==="Actual vs Target"&&(t.model.customHeader.text=this.cardJson.TitleSettings.Text)):this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=t.model.customHeader.text="Actual vs Target",this.setPropertyElement("BasicSettings","TitleValue",this.cardJson.TitleSettings.Text),t.redraw()):this.cardJson.TitleSettings.Text!==n&&(this.cardJson.HasCustomTitle=!0,this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=n),this.cardJson.TitleSettings.Visibility&&n!==""&&(t.model.customHeader.visible=!0,t.model.customHeader.text=n,t.redraw()),!ej.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanel.selectedReportItems.length>0&&this.reportName===this.designPanel.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.cardJson.ContainerSettings.Title));!ej.isNullOrUndefined(this.cardContent)},n.prototype.updateTitleAlign=function(n){var t=[],r,i;if(this.cardJson.TitleSettings.Alignment=ej.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,n),ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("headers.headerPosition",t,n);else for(r=this.cardContent.children(),i=0;i<r.length;i++)t=r.eq(i).data("ejCard"),ej.isNullOrUndefined(t)||this.updateCardProperty("headers.headerPosition",t,n)},n.prototype.updateTitleColor=function(n){var t,i;if(this.cardJson.TitleSettings.Color=n,t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("customHeader.color",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("customHeader.color",t,n)},n.prototype.updateValueAlign=function(n){var t,i;if(this.cardJson.ValueAlignment=ej.DashboardDesignerUtility.Serialization.stringtoEnum(TextAlignment,n),t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("actualValue.position",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("actualValue.position",t,n)},n.prototype.updateActualValueColor=function(n){var r,t,i;if(this.cardJson.ActualValueForeground=n,r=ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.ValueAlignment),t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),t.model.actualValue.position=r.toLocaleLowerCase(),t.model.actualValue.color=n,t.redraw();else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),t.model.actualValue.position=r.toLocaleLowerCase(),t.model.actualValue.color=n,t.redraw()},n.prototype.updateSecondaryValueType=function(n){var t=[],i;if(n==="Variation"?(n="variance",this.propertyPanel.updateItemVisibility("Card","BasicSettings","TargetValuePrefix",!1)):(n="target",this.propertyPanel.updateItemVisibility("Card","BasicSettings","TargetValuePrefix",!0)),this.cardJson.SecondaryValueType=n,ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("secondaryValueType",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("secondaryValueType",t,n)},n.prototype.updateSubHeading=function(n){var t,i;if(this.cardJson.SubTitleSettings.Visibility=n,this.subHeading=n,t=[],this.cardJson.SubTitleSettings.Visibility){if(ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),t.model.subTitle.visible=n,t.model.subTitle.text=ej.DashboardUtil.getInstance().getResultantParameterString(t.model.subTitle.text,this.cardJson.Data.Id),t.redraw();else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),t.model.subTitle.visible=n,t.model.subTitle.text=ej.DashboardUtil.getInstance().getResultantParameterString(this.cardJson.SubTitleSettings.Text,this.cardJson.Data.Id),t.redraw();this.propertyPanel.updateItemDisable("string","Card","BasicSettings","SubHeadingValue",!n);this.propertyPanel.updateItemDisable("color","Card","BasicSettings","SubTitleColor",!n)}else{if(ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("subTitle.visible",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("subTitle.visible",t,n);this.propertyPanel.updateItemDisable("string","Card","BasicSettings","SubHeadingValue",!n);this.propertyPanel.updateItemDisable("color","Card","BasicSettings","SubTitleColor",!n)}},n.prototype.updateSubHeadingValue=function(n){var t,i;if(this.cardJson.SubTitleSettings.Text=n,t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),t.model.subTitle.text=ej.DashboardUtil.getInstance().getResultantParameterString(n,this.cardJson.Data.Id),t.model.subTitle.visible=this.subHeading,t.redraw();else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),t.model.subTitle.visible=this.subHeading,t.model.subTitle.text=ej.DashboardUtil.getInstance().getResultantParameterString(n,this.cardJson.Data.Id),t.redraw();this.subTitleValue=n},n.prototype.updateSubHeadingColor=function(n){var t,i;if(this.cardJson.SubTitleSettings.Color=n,t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("subTitle.color",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("subTitle.color",t,n)},n.prototype.updatePrimaryValueType=function(n){var t,r,i;if(this.cardJson.PrimaryValueType=n,t=[],r=!ej.isNullOrUndefined(this.cardJson.ColorSets)&&this.cardJson.ColorSets.ColorSettingsList.length>0&&!ej.isNullOrUndefined(this.cardJson.ColorSets.ColorSettingsList[0].AdvancedColorSettings),ej.isNullOrUndefined(this.cardContent)){t=this.cardElement.data("ejCard");switch(n){case PrimaryValueType.AbsoluteDifference:t.model.valueRepresentation.variationType="absolute";break;case PrimaryValueType.PercentOfDifference:t.model.valueRepresentation.variationType="percentofdifference";break;case PrimaryValueType.PercentOfTarget:t.model.valueRepresentation.variationType="percentoftarget";break;case PrimaryValueType.ActualValue:t.model.valueRepresentation.variationType="actualvalue";break;case PrimaryValueType.PercentOfChange:t.model.valueRepresentation.variationType="percentofchange"}r||t.redraw()}else for(i=0;i<this.cardContent.children().length;i++){t=$(this.cardContent.children()[i]).data("ejCard");switch(n){case PrimaryValueType.AbsoluteDifference:t.model.valueRepresentation.variationType="absolute";break;case PrimaryValueType.PercentOfDifference:t.model.valueRepresentation.variationType="percentofdifference";break;case PrimaryValueType.PercentOfTarget:t.model.valueRepresentation.variationType="percentoftarget";break;case PrimaryValueType.ActualValue:t.model.valueRepresentation.variationType="actualvalue";break;case PrimaryValueType.PercentOfChange:t.model.valueRepresentation.variationType="percentofchange"}r||t.redraw()}this.updateColorCustomInfo(this.cardJson.ColorSets.ColorSettingsList)},n.prototype.updateActualValuePrefix=function(n){var t,i;if(this.cardJson.ActualValuePrefix=n,t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("actualValue.customText",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("actualValue.customText",t,n)},n.prototype.updateTargetValuePrefix=function(n){var t,i;if(this.cardJson.TargetValuePrefix=n,t=[],ej.isNullOrUndefined(this.cardContent))t=this.cardElement.data("ejCard"),this.updateCardProperty("targetValue.customText",t,n);else for(i=0;i<this.cardContent.children().length;i++)t=$(this.cardContent.children()[i]).data("ejCard"),this.updateCardProperty("targetValue.customText",t,n)},n.prototype.updateWidgetSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.cardJson,CommandAction.ItemResize,"updateSize","e-card-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):this.cardResize()},n.prototype.cardResize=function(){var t=this,n,i,u,r;if(this.cardItem.data("ejScroller")&&this.cardItem.ejScroller("destroy"),this.cardItem.css({width:"100%",height:"100%"}),n=null,ej.isNullOrUndefined(this.cardContent))n=this.cardElement.data("ejCard"),n.model.size={width:this.cardItem.width(),height:this.cardItem.height()},n.redraw();else{for(this.showLoadingIndicator(),this.cardContent.css({width:this.cardItem.width(),height:this.cardItem.height()}),i=this.getSizeForCard(this.cardContent.children().length),u=function(r){setTimeout(function(){t.cardElement.css({width:i.width,height:i.height});n=$(t.cardContent.children()[r]).data("ejCard");n.model.size={width:i.width,height:i.height};n.redraw()},100)},r=0;r<this.cardContent.children().length;r++)u(r);setTimeout(function(){t.cardItem.ejScroller({width:t.cardItem.width(),height:t.cardItem.height(),autoHide:!0,scrollerSize:9,buttonSize:14,cssClass:"e-dbrd-designer-scroller e-dbrd-control"});t.hideLoadingIndicator()},100)}},n.prototype.updateItemSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.cardJson,CommandAction.ItemResize,"updateItemSize","e-card-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):this.cardResize()},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.cardJson,CommandAction.ItemMove,"updatePosition","e-card-item")},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions"}),n},n.prototype.getItemDataCategoriesInfo=function(){return[{Name:"ActualValue",DisplayName:"Actual Value",CategoryType:CategoryType.Numeric,CategoryCount:1},{Name:"TargetValue",DisplayName:"Target Value",CategoryType:CategoryType.Numeric,CategoryCount:1},{Name:"Series",DisplayName:"Series",CategoryType:CategoryType.Non_Numeric,CategoryCount:1},{Name:"CustomValue",DisplayName:"Custom Value",CategoryType:CategoryType.Numeric,CategoryCount:1},{Name:"Sparkline",DisplayName:"Sparkline",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}]},n.prototype.updateReportItemDataGroupInfo=function(n){this.dataGroupInfo=n;var t=this.getBindedColumns();!ej.isNullOrUndefined(t.actualColumns)&&!ej.isNullOrUndefined(t.rowColumns)&&t.actualColumns.length>0&&t.rowColumns.length>0&&ej.isNullOrUndefined(t.rowColumns[0].CustomSorting)&&(t.rowColumns[0].CustomSorting={CustomSortType:CustomSortType.Field,CustomSortOrder:CustomSortOrder.Descending,FieldName:t.actualColumns[0].Field,FieldId:t.actualColumns[0].DataId,SummaryType:t.actualColumns[0].SummaryType})},n.prototype.isFieldValid=function(n,t,i){return!(t===CategoryType[CategoryType.Non_Numeric]&&i==="Series"&&n.toLowerCase()==="true")},n.prototype.updateReportItemData=function(n){var p=this,u,l,f,e,a,y;try{this.showLoadingIndicator();this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.cardItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.cardJson,this.dataGroupInfo);this.isHeaderVisible=!1;var v=this.dataGroupInfo.Values[0].Values.length,o=this.dataGroupInfo.Values[1].Values.length,s=this.dataGroupInfo.Values[2].Values.length,h=this.dataGroupInfo.Values[3].Values.length,c=this.dataGroupInfo.Values[4].Values.length,i=this.cardElement.data("ejCard"),t=null,b=$(this.controlContainer).find(".e-dbrd-control-header"),k=$(this.controlContainer).find(".e-dbrd-control-sub-header"),r=!1;if(this.updateCustomColorSettings(),r=!ej.isNullOrUndefined(this.cardJson.ColorSets)&&this.cardJson.ColorSets.ColorSettingsList.length>0&&!ej.isNullOrUndefined(this.cardJson.ColorSets.ColorSettingsList[0].AdvancedColorSettings),this.cardItem.data("ejScroller")&&this.cardItem.ejScroller("destroy"),this.cardItem.hasClass("e-Card-Single")||this.cardItem.addClass("e-Card-Single"),u={controlTitle:this.reportName,controlId:this.reportName,isControlMenuVisible:this.isControlMenuVisible,isMaximizeEnable:this.isMaximizeEnable},r||($(b).remove(),$(k).remove(),ej.isNullOrUndefined(i)||i.destroy(),this.cardElement.remove(),ej.isNullOrUndefined(this.cardContent)||(this.cardContent.remove(),this.cardContent=null),this.setContainerHeight(10)),n.Error)this.designPanel.showControlError(this.contentContainer,n,this.cellInfo);else{if(n.noDataAvailable)this.cardItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block");else{if(n.data!=="[]"&&ej.isNullOrUndefined(n.isDataSetEmpty)){if(ej.isNullOrUndefined(n.columnBindings)||(this.columnBinding=JSON.parse(n.columnBindings)),!ej.isNullOrUndefined(n.data))for(t=JSON.parse(n.data),l=Object.keys(t[0]),f=0;f<t.length;f++)for(e=0;e<l.length;e++)t[f][l[e]]==="(Blanks)"&&(t[f][l[e]]=0);a=this.getColumns(t);v>0&&o===0&&s===0&&h===0&&c===0?this.updateActualValue(i,a,t,n):o>0&&s===0&&c===0&&h===0?r?this.updateColorInfo(i,n,"targetValue",this.cardJson.ColorSets.ColorSettingsList,null,null,t):this.updateTargetValue(i,t,n,r,null):s>0?(ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values[0])&&ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values[0])?this.updateCardWithDefaultValue():r?this.updateColorInfo(i,n,"seriesValue",this.cardJson.ColorSets.ColorSettingsList,u,null,t):this.updateSeriesValue(u,t,i,n,r,null),this.propertyPanel.setTitle(this.cardJson)):c>0?ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values[0])&&ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values[0])?this.updateCardWithDefaultValue():r?this.updateColorInfo(i,n,"sparkLine",this.cardJson.ColorSets.ColorSettingsList,u,null,t):this.updateSparkLineValue(u,t,i,n,r,null):h>0&&(v>0||o>0?r?this.updateColorInfo(i,n,"customValue",this.cardJson.ColorSets.ColorSettingsList,u,a,t):this.updateCustomValue(u,t,i,n,a,r,null):this.updateCardWithDefaultValue())}else(n.data==="[]"&&n.columnBindings==="{}"||!ej.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&this.updateCardWithDefaultValue();this.controlContainer.find(".e-dbrd-control-title").css({"text-align":ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.ContainerSettings.TextAlignment)});this.controlContainer.find(".e-dbrd-control-title").css({color:this.cardJson.ContainerSettings.TextColor})}ej.DashboardUtil.updateAction("Card","Link","Link");this.setPropertyElement("ColorSettings","ColorSettings",this.cardJson.ColorSets)}this.isOpenReport&&this.cardJson.SubTitleSettings.Visibility&&this.cardJson.SubTitleSettings.Text!==" "&&this.updateSubHeading(this.cardJson.SubTitleSettings.Visibility);this.updatePropertyItems(v,o,s,c,h);this.isOpenReport=!1;r||(this.cardJson.ContainerSettings.ShowHeader=this.isHeaderVisible,setTimeout(function(){p.hideLoadingIndicator();var n=p.cardItem.data("ejScroller");ej.isNullOrUndefined(n)||n.refresh()},100))}catch(w){this.designPanel.logError({Source:this.cardJson.UniqueName,Error:w,Type:w.name});y=this.cardItem.data("ejWaitingPopup");!ej.isNullOrUndefined(y)&&y.model.showOnInit&&this.hideLoadingIndicator()}},n.prototype.updateColorInfo=function(n,t,i,r,u,f,e){for(var h,o=this.cardJson.Data,c=this.getDataCategoriesInfo(),l=[],s=0;s<o.Containers.length;s++)if(o.Containers[s].Id===c[0].Name||o.Containers[s].Id===c[1].Name||o.Containers[s].Id===c[2].Name)for(h=0;h<o.Containers[s].FieldInfos.length;h++)l.push(o.Containers[s].FieldInfos[h]);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designer.model.serviceUrl+"/GetColorParameters/",{action:"fetchData",data:JSON.stringify({designerAction:"fetchData",fieldInfo:l,dataset:o.Id,request:AjaxRequest.Widget.toString(),valuetype:this.cardJson.PrimaryValueType,colorSet:this.cardJson.ColorSets,controlType:this.controlType})},{fnction:$.proxy(this.updateCardWithColor,this,i,u,n,t,f,e)})},n.prototype.updateCardWithColor=function(n,t,i,r,u,f,e){var s=this,o=!0,h=$(this.controlContainer).find(".e-dbrd-control-header"),c=$(this.controlContainer).find(".e-dbrd-control-sub-header");$(h).remove();$(c).remove();ej.isNullOrUndefined(i)||i.destroy();this.cardElement.remove();ej.isNullOrUndefined(this.cardContent)||(this.cardContent.remove(),this.cardContent=null);this.setContainerHeight(10);switch(n){case"seriesValue":this.updateSeriesValue(t,f,i,r,o,e);break;case"sparkLine":this.updateSparkLineValue(t,f,i,r,o,e);break;case"customValue":this.updateCustomValue(t,f,i,r,u,o,e);break;default:this.updateTargetValue(i,f,r,o,e)}this.cardJson.ContainerSettings.ShowHeader=this.isHeaderVisible;setTimeout(function(){s.hideLoadingIndicator()},100)},n.prototype.setContainerHeight=function(n){this.isHeaderVisible&&(n=this.controlHeader.outerHeight(!0),!ej.isNullOrUndefined(this.cardJson.ContainerSettings.SubTitle)&&this.cardJson.ContainerSettings.SubTitle.trim().length>0?(n+=this.controlSubHeader.outerHeight(!0),this.controlSubHeader.css("display","block")):this.controlSubHeader.css("display","none"));this.contentContainer.css({height:this.isHeaderVisible?"calc(100% - "+n+"px)":"100%"});this.cardItem.css({height:this.isHeaderVisible?"calc(100% - "+n+"px)":"100%"})},n.prototype.updateCustomValue=function(n,t,i,r,u,f,e){var l=[],a=[],v,y,o;f&&(v="data",y="icon",l=JSON.parse(e[y]),a=JSON.parse(e[v]));var h=this.createCardElement(i,t),s=h.key,c=h.Value;for(i=h.cardObj,o=0;o<s.length;o++)ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values[0])||s[o]!==this.dataGroupInfo.Values[0].Values[0].UniqueColumnName||(i.model.actualValue={name:this.columnBinding[s[o]],value:c[o].toString()}),ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values[0])||s[o]!==this.dataGroupInfo.Values[1].Values[0].UniqueColumnName||(i.model.targetValue={name:this.columnBinding[s[o]],value:c[o].toString()}),ej.isNullOrUndefined(this.dataGroupInfo.Values[3].Values[0])||s[o]!==this.dataGroupInfo.Values[3].Values[0].UniqueColumnName||(i.model.additionalValue={value:c[o].toString(),name:this.columnBinding[s[o]],color:this.cardJson.ActualValueForeground.toString(),customText:this.cardJson.ActualValuePrefix!=null&&!ej.isNullOrUndefined(this.cardJson.ActualValuePrefix.toString().trim())?this.cardJson.ActualValuePrefix:"",position:this.cardJson.AdditionalValueAlignment.toString().toLocaleLowerCase()});r.widgetData[0].MeasureFormatting!==null?(i.model.valueRepresentation.currencyCulture=r.widgetData[0].MeasureFormatting.Culture,i.model.valueRepresentation.numberOfDecimals=r.widgetData[0].MeasureFormatting.DecimalPoints,i.model.valueRepresentation.format=r.widgetData[0].MeasureFormatting.FormatType,i.model.valueRepresentation.prefix=r.widgetData[0].MeasureFormatting.Prefix?r.widgetData[0].MeasureFormatting.Prefix:"",i.model.valueRepresentation.suffix=r.widgetData[0].MeasureFormatting.Suffix?r.widgetData[0].MeasureFormatting.Suffix:"",i.model.valueRepresentation.abbreviationType=r.widgetData[0].MeasureFormatting.Unit):i.model.valueRepresentation.abbreviationType="once";this.dataGroupInfo.Values[3].Values.length>0&&this.setAdditionalValueMeasureFormatting(r,i);this.getProperties(i);f&&this.applySeriesCardSettings(this.cardElement,0,a,l);i.redraw();this.titleValue=$(this.cardElement).find(".e-title").html();this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!0);this.cardItem.find(".e-title").length===1&&(this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=this.cardItem.find(".e-title").html());this.setPropertyElement("BasicSettings","TitleValue",this.cardJson.TitleSettings.Text);ej.isNullOrUndefined(this.propertyPanel.headerInput)||this.propertyPanel.headerInput.val(this.cardJson.ContainerSettings.Title)},n.prototype.setAdditionalValueMeasureFormatting=function(n,t){var r=this,i=n.widgetData.filter(function(n){return n.UniqueColumnName===r.dataGroupInfo.Values[3].Values[0].UniqueColumnName})[0];ej.isNullOrUndefined(i)||i.MeasureFormatting==null?t.model.additionalValueRepresentation.abbreviationType="once":(t.model.additionalValueRepresentation.currencyCulture=i.MeasureFormatting.Culture,t.model.additionalValueRepresentation.numberOfDecimals=i.MeasureFormatting.DecimalPoints,t.model.additionalValueRepresentation.format=i.MeasureFormatting.FormatType,t.model.additionalValueRepresentation.prefix=i.MeasureFormatting.Prefix?i.MeasureFormatting.Prefix:"",t.model.additionalValueRepresentation.suffix=i.MeasureFormatting.Suffix?i.MeasureFormatting.Suffix:"",t.model.additionalValueRepresentation.abbreviationType=i.MeasureFormatting.Unit)},n.prototype.createCardElement=function(n,t){var i=Object.keys(t[0]),r=Object.keys(t[0]).map(function(n){return t[0][n]});return this.cardElement=ej.buildTag("div.e-default-card-widget","",{},{id:this.designId+"cardElement"+this.cardJson.UniqueName}),this.cardItem.append(this.cardElement),this.cardElement.ejCard({size:{width:this.cardItem.width(),height:this.cardElement.height()}}),n=this.cardElement.data("ejCard"),{key:i,Value:r,cardObj:n}},n.prototype.updateSparkLineValue=function(n,t,i,r,u,f){var c=[],l=[],a,v,e,y,p;u&&(a="data",v="icon",c=JSON.parse(f[v]),l=JSON.parse(f[a]));var s=this.createCardElement(i,t),o=s.key,h=s.Value;for(i=s.cardObj,e=0;e<o.length;e++)ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values[0])||o[e]!==this.dataGroupInfo.Values[0].Values[0].UniqueColumnName||(i.model.actualValue={name:this.columnBinding[o[e]],value:h[e].toString()}),ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values[0])||o[e]!==this.dataGroupInfo.Values[1].Values[0].UniqueColumnName||(i.model.targetValue={name:this.columnBinding[o[e]],value:h[e].toString()}),ej.isNullOrUndefined(this.dataGroupInfo.Values[3].Values[0])||o[e]!==this.dataGroupInfo.Values[3].Values[0].UniqueColumnName||(i.model.additionalValue={value:h[e].toString(),name:this.columnBinding[o[e]],color:this.cardJson.ActualValueForeground.toString(),customText:this.cardJson.ActualValuePrefix!=null&&!ej.isNullOrUndefined(this.cardJson.ActualValuePrefix.toString().trim())?this.cardJson.ActualValuePrefix:"",position:this.cardJson.AdditionalValueAlignment.toString().toLocaleLowerCase()});r.sparkLineData!=null&&(y=ej.DashboardDesignerUtility.Serialization.enumToString(SparkLineType,this.cardJson.SparklineSettings.Type),p={Data:r.sparkLineData,Type:y,LowValueColor:this.cardJson.SparklineSettings.LowValueColor,HighValueColor:this.cardJson.SparklineSettings.HighValueColor,Opacity:this.cardJson.SparklineSettings.Opacity,ShowMarker:this.cardJson.SparklineSettings.ShowMarker,SparklineName:this.dataGroupInfo.Values[4].Values[0].Field},i.model.sparkLine=p,i.model.hasSparkLine=!0);r.widgetData[0].MeasureFormatting!==null?(i.model.valueRepresentation.currencyCulture=r.widgetData[0].MeasureFormatting.Culture,i.model.valueRepresentation.numberOfDecimals=r.widgetData[0].MeasureFormatting.DecimalPoints,i.model.valueRepresentation.format=r.widgetData[0].MeasureFormatting.FormatType,i.model.valueRepresentation.prefix=r.widgetData[0].MeasureFormatting.Prefix?r.widgetData[0].MeasureFormatting.Prefix:"",i.model.valueRepresentation.suffix=r.widgetData[0].MeasureFormatting.Suffix?r.widgetData[0].MeasureFormatting.Suffix:"",i.model.valueRepresentation.abbreviationType=r.widgetData[0].MeasureFormatting.Unit):i.model.valueRepresentation.abbreviationType="once";this.dataGroupInfo.Values[3].Values.length>0&&this.setAdditionalValueMeasureFormatting(r,i);this.getProperties(i);u&&this.applySeriesCardSettings(this.cardElement,0,l,c);i.redraw();this.titleValue=$(this.cardElement).find(".e-title").html();this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!0);this.cardItem.find(".e-title").length===1&&(this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=this.cardItem.find(".e-title").html());this.setPropertyElement("BasicSettings","TitleValue",this.cardJson.TitleSettings.Text);ej.isNullOrUndefined(this.propertyPanel.headerInput)||this.propertyPanel.headerInput.val(this.cardJson.ContainerSettings.Title)},n.prototype.updateCustomColorSettings=function(){var u,t,o,f,s;ej.isNullOrUndefined(this.cardJson.ColorSets)&&(this.cardJson.ColorSets=new ColorSets);var e=this.getBindedColumns(),r=[],n=e.targetColumns,i=e.rowColumns,h=e.actualColumns,c=function(t){if(n[t].FieldType===FieldType[FieldType.Measures]){var i=l.cardJson.ColorSets.ColorSettingsList.filter(function(i){return i.SelectedColumn.UniqueColumnName===n[t].UniqueColumnName})[0];h.length>0&&!ej.isNullOrUndefined(i)&&!ej.isNullOrUndefined(i.SelectedColumn)?(i.SelectedColumn.SummaryType!==n[t].SummaryType&&(i.SelectedColumn.SummaryType=n[t].SummaryType),r.push(i)):r.push({SelectedColumn:{UniqueColumnName:n[t].UniqueColumnName,Key:n[t].DataId,SelectedColumnType:n[t].FieldType===FieldType[FieldType.Measures]?ColorColumnType.Measure:ColorColumnType.Dimension,SummaryType:n[t].SummaryType},DefaultSettings:null,AdvancedColorSettings:null})}},l=this;for(u=0;u<n.length;u++)c(u);if(this.isColorSupportForText)for(t=0;t<i.length;t++)i[t].FieldType!==FieldType[FieldType.DateTime]&&(o=[],f=this.getExistingColorSettings(i[t].UniqueColumnName),ej.isNullOrUndefined(f)||ej.isNullOrUndefined(f.SelectedColumn)?(s=JSON.stringify(o),r.push({SelectedColumn:{UniqueColumnName:i[t].UniqueColumnName,Key:i[t].DataId,SelectedColumnType:i[t].FieldType===FieldType[FieldType.Measures]?ColorColumnType.Measure:ColorColumnType.Dimension,SummaryType:i[t].SummaryType},DefaultSettings:{DefaultColors:JSON.parse(s)},AdvancedColorSettings:null})):r.push(f));this.cardJson.ColorSets.ColorSettingsList=r;this.cardJson.ColorSets.IsMeasure=!0;this.cardJson.ColorSets.SelectedDatasource=this.dataGroupInfo.DatasetName},n.prototype.getExistingColorSettings=function(n){for(var t=0;t<this.cardJson.ColorSets.ColorSettingsList.length;t++)if(this.cardJson.ColorSets.ColorSettingsList[t].SelectedColumn.UniqueColumnName===n)return this.cardJson.ColorSets.ColorSettingsList[t];return null},n.prototype.updateCardWithDefaultValue=function(){this.cardElement=ej.buildTag("div","",{width:"100%",height:"100%",position:"relative","font-size":"10pt","background-color":"white"},{id:this.designId+"cardElement"+this.cardJson.UniqueName});this.cardItem.append(this.cardElement);this.cardElement.ejCard({actualValue:{color:"#686262",name:"Actual",position:"right",value:"100"},targetValue:{color:"#686262",name:"Target",position:"right",value:"90"},size:{width:this.cardItem.width(),height:this.cardItem.height()},uniformFontSize:this.cardJson.UniformSizing,customVisibility:{compactView:this.cardJson.EnableCompactView},primaryValue:{color:""}});this.cardJson.HasCustomTitle=!1;this.cardJson.TitleSettings.Text=this.cardJson.ContainerSettings.Title=this.cardItem.find(".e-title").html();this.setPropertyElement("BasicSettings","TitleValue",this.cardJson.TitleSettings.Text);!ej.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanel.selectedReportItems.length>0&&this.reportName===this.designPanel.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.cardJson.ContainerSettings.Title)},n.prototype.updateActualValue=function(n,t,i,r){this.cardElement=ej.buildTag("div.e-default-card-widget","",{},{id:this.designId+"cardElement"+this.cardJson.UniqueName});this.cardItem.append(this.cardElement);this.cardElement.ejCard({size:{width:this.cardElement.width(),height:this.cardElement.height()},primaryValue:{color:""}});n=this.cardElement.data("ejCard");n.model.actualValue={name:this.columnBinding[t[0].id],value:Object.keys(i[0]).map(function(n){return i[0][n]}).toString()};r.widgetData[0].MeasureFormatting!==null?(n.model.valueRepresentation.currencyCulture=r.widgetData[0].MeasureFormatting.Culture,n.model.valueRepresentation.numberOfDecimals=r.widgetData[0].MeasureFormatting.DecimalPoints,n.model.valueRepresentation.format=r.widgetData[0].MeasureFormatting.FormatType,n.model.valueRepresentation.prefix=r.widgetData[0].MeasureFormatting.Prefix?r.widgetData[0].MeasureFormatting.Prefix:"",n.model.valueRepresentation.suffix=r.widgetData[0].MeasureFormatting.Suffix?r.widgetData[0].MeasureFormatting.Suffix:"",n.model.valueRepresentation.abbreviationType=r.widgetData[0].MeasureFormatting.Unit):n.model.valueRepresentation.abbreviationType="once";this.getProperties(n);n.redraw();this.titleValue=$(this.cardElement).find(".e-title").html();this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!0);this.cardItem.find(".e-title").length===1&&(this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=this.cardItem.find(".e-title").html());this.setPropertyElement("BasicSettings","TitleValue",this.cardJson.TitleSettings.Text);!ej.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanel.selectedReportItems.length>0&&this.reportName===this.designPanel.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.cardJson.ContainerSettings.Title)},n.prototype.getBindedColumns=function(){var i,r,u,n,t;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values))for(n=0;n<this.dataGroupInfo.Values.length;n++)t=this.getDataCategoriesInfo(),this.dataGroupInfo.Values[n].Name===t[0].Name?i=this.dataGroupInfo.Values[n].Values:this.dataGroupInfo.Values[n].Name===t[1].Name?r=this.dataGroupInfo.Values[n].Values:this.dataGroupInfo.Values[n].Name===t[2].Name&&(u=this.dataGroupInfo.Values[n].Values);return{actualColumns:i,targetColumns:r,rowColumns:u}},n.prototype.updateTargetValue=function(n,t,i,r,u){var s=[],h=[],c,l,f;r&&(c="data",l="icon",s=JSON.parse(u[l]),h=JSON.parse(u[c]));var o=this.createCardElement(n,t),e=o.key,a=o.Value;for(n=o.cardObj,f=0;f<e.length;f++)ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values[0])||e[f]!==this.dataGroupInfo.Values[0].Values[0].UniqueColumnName||(n.model.actualValue={name:this.columnBinding[e[f]],value:a[f].toString()}),ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values[0])||e[f]!==this.dataGroupInfo.Values[1].Values[0].UniqueColumnName||(n.model.targetValue={name:this.columnBinding[e[f]],value:a[f].toString()});i.widgetData[0].MeasureFormatting!==null?(n.model.valueRepresentation.currencyCulture=i.widgetData[0].MeasureFormatting.Culture,n.model.valueRepresentation.numberOfDecimals=i.widgetData[0].MeasureFormatting.DecimalPoints,n.model.valueRepresentation.format=i.widgetData[0].MeasureFormatting.FormatType,n.model.valueRepresentation.prefix=i.widgetData[0].MeasureFormatting.Prefix?i.widgetData[0].MeasureFormatting.Prefix:"",n.model.valueRepresentation.suffix=i.widgetData[0].MeasureFormatting.Suffix?i.widgetData[0].MeasureFormatting.Suffix:"",n.model.valueRepresentation.abbreviationType=i.widgetData[0].MeasureFormatting.Unit):n.model.valueRepresentation.abbreviationType="once";this.getProperties(n);r&&this.applySeriesCardSettings(this.cardElement,0,h,s);n.redraw();this.titleValue=$(this.cardElement).find(".e-title").html();this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!0);this.cardItem.find(".e-title").length===1&&(this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=this.cardItem.find(".e-title").html());this.setPropertyElement("BasicSettings","TitleValue",this.cardJson.TitleSettings.Text);!ej.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanel.selectedReportItems.length>0&&this.reportName===this.designPanel.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.cardJson.ContainerSettings.Title)},n.prototype.updateSeriesValue=function(n,t,i,r,u,f){var e=this,o,s,l,a,v,y,p,h,w,c;for(this.isHeaderVisible=!0,n.controlTitle=this.cardJson.ContainerSettings.Title,this.designPanel.getControlHeader(n,this),this.designPanel.getControlSubHeader(this),o=[],s=[],this.cardItem.hasClass("e-Card-Single")&&this.cardItem.removeClass("e-Card-Single"),l=this.controlHeader.outerHeight(!0),!ej.isNullOrUndefined(this.cardJson.ContainerSettings.SubTitle)&&this.cardJson.ContainerSettings.SubTitle.trim().length>0?(l+=this.controlSubHeader.outerHeight(!0),this.controlSubHeader.css("display","block")):this.controlSubHeader.css("display","none"),a=[],v=[],u&&(y="data",p="icon",a=JSON.parse(f[p]),v=JSON.parse(f[y])),this.contentContainer.css({height:this.isHeaderVisible?"calc(100% - "+l+"px)":"100%"}),h=this.getSizeForCard(t.length),this.cardContent=ej.buildTag("div.cardContent","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"}),this.cardItem.append(this.cardContent),w=function(n){setTimeout(function(){var c,f;for(o=Object.keys(t[n]),s=Object.keys(t[n]).map(function(i){return t[n][i]}),e.cardElement=ej.buildTag("div","",{width:h.width,height:h.height,position:"relative","font-size":"10pt","background-color":"white",float:"left",margin:"10px"},{id:e.designId+"cardElement"+e.cardJson.UniqueName+"_"+n}),e.cardContent.append(e.cardElement),e.cardElement.ejCard({size:{width:h.width,height:h.height},primaryValue:{color:""}}),i=e.cardElement.data("ejCard"),c=null,f=0;f<o.length;f++)ej.isNullOrUndefined(e.dataGroupInfo.Values[0].Values[0])||o[f]!==e.dataGroupInfo.Values[0].Values[0].UniqueColumnName||(i.model.actualValue={name:e.columnBinding[o[f]],value:s[f].toString()}),ej.isNullOrUndefined(e.dataGroupInfo.Values[1].Values[0])||o[f]!==e.dataGroupInfo.Values[1].Values[0].UniqueColumnName||(i.model.targetValue={name:e.columnBinding[o[f]],value:s[f].toString()}),o[f]===e.dataGroupInfo.Values[2].Values[0].UniqueColumnName&&(i.model.customHeader={visible:"true",text:ej.isNullOrUndefined(s[f])?ejDashboardDesigner.dashboardDesigner.locale.dataConfigurationMenuItems.nulldata:s[f],value:s[f]}),ej.isNullOrUndefined(e.dataGroupInfo.Values[3].Values[0])||o[f]!==e.dataGroupInfo.Values[3].Values[0].UniqueColumnName||(i.model.additionalValue={value:s[f].toString(),name:e.columnBinding[o[f]],color:e.cardJson.ActualValueForeground.toString(),customText:e.cardJson.ActualValuePrefix!=null&&!ej.isNullOrUndefined(e.cardJson.ActualValuePrefix.toString().trim())?e.cardJson.ActualValuePrefix:"",position:e.cardJson.AdditionalValueAlignment.toString().toLocaleLowerCase()}),ej.isNullOrUndefined(r.sparkLineData)||o[f]!==e.dataGroupInfo.Values[2].Values[0].UniqueColumnName||(c=r.sparkLineData[s[f].toString()]);if(!ej.isNullOrUndefined(c)){var l=JSON.parse(c),y=ej.DashboardDesignerUtility.Serialization.enumToString(SparkLineType,e.cardJson.SparklineSettings.Type),p={Data:l,Type:y,LowValueColor:e.cardJson.SparklineSettings.LowValueColor,HighValueColor:e.cardJson.SparklineSettings.HighValueColor,Opacity:e.cardJson.SparklineSettings.Opacity,ShowMarker:e.cardJson.SparklineSettings.ShowMarker,SparklineName:e.dataGroupInfo.Values[4].Values[0].Field};i.model.sparkLine=p;i.model.hasSparkLine=!0}r.widgetData[0].MeasureFormatting!==null?(i.model.valueRepresentation.currencyCulture=r.widgetData[0].MeasureFormatting.Culture,i.model.valueRepresentation.numberOfDecimals=r.widgetData[0].MeasureFormatting.DecimalPoints,i.model.valueRepresentation.format=r.widgetData[0].MeasureFormatting.FormatType,i.model.valueRepresentation.prefix=r.widgetData[0].MeasureFormatting.Prefix?r.widgetData[0].MeasureFormatting.Prefix:"",i.model.valueRepresentation.suffix=r.widgetData[0].MeasureFormatting.Suffix?r.widgetData[0].MeasureFormatting.Suffix:"",i.model.valueRepresentation.abbreviationType=r.widgetData[0].MeasureFormatting.Unit):i.model.valueRepresentation.abbreviationType="once";e.dataGroupInfo.Values[3].Values.length>0&&e.setAdditionalValueMeasureFormatting(r,i);e.getProperties(i);u&&e.applySeriesCardSettings(e.cardElement,n,v,a);i.redraw()},100)},c=0;c<t.length;c++)w(c);this.cardJson.HasCustomTitle||(this.cardJson.ContainerSettings.Title=this.cardJson.TitleSettings.Text=this.GenerateHeaderText(this.dataGroupInfo));!ej.isNullOrUndefined(this.propertyPanel.headerInput)&&this.designPanel.selectedReportItems.length>0&&this.reportName===this.designPanel.selectedReportItems[0].attr("name")&&this.propertyPanel.headerInput.val(this.cardJson.ContainerSettings.Title);this.isOpenReport||this.propertyPanel.setTitle(this.cardJson);this.propertyPanel.updateItemVisibility("Card","BasicSettings","TitleValue",!1);this.cardItem.data("ejScroller")&&this.cardItem.ejScroller("destroy");this.cardItem.ejScroller({width:this.cardItem.width(),height:this.cardItem.height(),autoHide:!0,scrollerSize:9,buttonSize:14,cssClass:"e-dbrd-designer-scroller e-dbrd-control"})},n.prototype.GenerateHeaderText=function(){var n="";return this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Values[1].Values.length>0?n=(this.dataGroupInfo.Values[0].Values[0].IsAggregatedExpression===!0?"AGG of ":this.GetAggregationText(this.dataGroupInfo.Values[0].Values[0].SummaryType))+this.dataGroupInfo.Values[0].Values[0].DataField+" vs "+(this.dataGroupInfo.Values[1].Values[0].IsAggregatedExpression===!0?"AGG of ":this.GetAggregationText(this.dataGroupInfo.Values[1].Values[0].SummaryType))+this.dataGroupInfo.Values[1].Values[0].DataField:this.dataGroupInfo.Values[0].Values.length>0?n=(this.dataGroupInfo.Values[0].Values[0].IsAggregatedExpression===!0?"AGG of ":this.GetAggregationText(this.dataGroupInfo.Values[0].Values[0].SummaryType))+this.dataGroupInfo.Values[0].Values[0].DataField:this.dataGroupInfo.Values[1].Values.length>0?n=(this.dataGroupInfo.Values[1].Values[0].IsAggregatedExpression===!0?"AGG of ":this.GetAggregationText(this.dataGroupInfo.Values[1].Values[0].SummaryType))+this.dataGroupInfo.Values[1].Values[0].DataField:this.dataGroupInfo.Values[0].Values.length===0&&this.dataGroupInfo.Values[1].Values.length===0&&(n="Actual vs Target"),n},n.prototype.GetAggregationText=function(n){var t=ej.DashboardDesignerUtility.Serialization.stringtoEnum(SummaryType,n);switch(t){case SummaryType.SUM:return"Sum of ";case SummaryType.COUNT:return"Count of ";case SummaryType.AVG:return"Avg. ";case SummaryType.MAX:return"Max of ";case SummaryType.MIN:return"Min of ";case SummaryType.VAR:return"Variation of ";case SummaryType.COUNTD:return"Distinct Count of ";default:return" "}},n.prototype.updatePropertyItems=function(n,t,i,r,u){if(i!==0&&(n!==0||t!==0)?(this.propertyPanel.updateItemDisable("bool","Card","Filter","ActAsMasterWidget",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleAlign",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleColor",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ShowMaximize",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","CSVExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ExcelExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ImageExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","PDFExport",!0),this.propertyPanel.refreshScroller()):i!==0&&n===0&&t===0&&(this.propertyPanel.updateItemDisable("bool","Card","Filter","ActAsMasterWidget",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleAlign",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleColor",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ShowMaximize",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","CSVExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ExcelExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ImageExport",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","PDFExport",!0),this.propertyPanel.refreshScroller()),i===0&&(this.propertyPanel.updateItemDisable("bool","Card","Filter","ActAsMasterWidget",!0),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleAlign",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ContainerTitleColor",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ShowMaximize",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","CSVExport",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ExcelExport",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","ImageExport",!1),this.propertyPanel.updateItemVisibility("Card","ContainerAppearance","PDFExport",!1),this.propertyPanel.refreshScroller()),n!==0||t!==0){var f=n!==0&&t!==0||n===0&&t===0&&i===0||n===0&&t===0&&i!==0?!0:!1;this.propertyPanel.updateCategoryVisibility("Card","Behavior",!0);this.propertyPanel.updateItemVisibility("Card","Behavior","HighValueGood",f);this.propertyPanel.updateItemVisibility("Card","Behavior","ShowIndicator",f);this.propertyPanel.updateItemVisibility("Card","Behavior","PrimaryValueType",f);this.propertyPanel.updateItemVisibility("Card","Behavior","EnableUniformSizing",!0);this.propertyPanel.updateItemVisibility("Card","Behavior","ShowActualValueVariation",t!==0?!0:!1);this.propertyPanel.updateItemVisibility("Card","Behavior","ShowSecondaryValue",t!==0?!0:!1);this.propertyPanel.updateItemVisibility("Card","Behavior","ShowPrimaryValue",t!==0?!0:!1);this.propertyPanel.updateItemVisibility("Card","Behavior","Indicator",t!==0?!0:!1)}else this.propertyPanel.updateCategoryVisibility("Card","Behavior",!1);u===0||this.cardJson.ShowIndicatorOnly?this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","AdditionalValueAlignment",!0):this.propertyPanel.updateItemDisable("dropdown","Card","Alignment","AdditionalValueAlignment",!1);n!==0&&t!==0||n===0&&t===0&&i===0?this.propertyPanel.updateItemDisable("dropdown","Card","BasicSettings","SecondaryValueType",!1):this.propertyPanel.updateItemDisable("dropdown","Card","BasicSettings","SecondaryValueType",!0);n!==0&&t!==0?this.propertyPanel.updateCategoryVisibility("Card","ColorSettings",!0):this.propertyPanel.updateCategoryVisibility("Card","ColorSettings",!1);(n!==0||t!==0)&&r!==0?this.propertyPanel.updateCategoryVisibility("Card","Sparkline",!0):this.propertyPanel.updateCategoryVisibility("Card","Sparkline",!1);this.cardJson.ShowIndicatorOnly?(this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!0),this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!0),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!0)):(this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowActualValueVariation",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","Indicator",!1),this.propertyPanel.updateItemDisable("bool","Card","Behavior","ShowSecondaryValue",!1))},n.prototype.getColumns=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},n.prototype.getSizeForCard=function(n){var e=$(this.cardItem).width(),r=$(this.cardItem).height(),h=this.dataGroupInfo.Values[2].Values.length,i=h>0?n:1,s=116,t=Math.floor(e/i)<1?1:Math.floor((e-50)/s),u,f,o;i<t&&(t=i);o=Math.ceil(i/t);t=Math.round(e/i);(t>15||t<3)&&(t=10);t>i&&(t=i);do{if(f=e/t-20,u=f*.6,o=Math.ceil(i/t),t<=1){t=1;break}if(f>=s&&(r-u*o)*(100/r)<=45)break;t-=1}while(f<s||(r-u*o)*(100/r)>45);return i===1&&(f=e/t-20,u=r,u>r&&(u=r)),{height:u,width:f}},n.prototype.getProperties=function(n){var i=this.cardJson.TitleSettings.Text,t;n.model.customHeader.visible=this.cardJson.TitleSettings.Visibility;this.cardJson.HasCustomTitle&&this.dataGroupInfo.Values[2].Values.length===0?n.model.customHeader.text=this.cardJson.TitleSettings.Text:this.dataGroupInfo.Values[2].Values.length===0&&(!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values)&&this.dataGroupInfo.Values[1].Values.length>0?i=n.model.actualValue.name+" vs "+n.model.targetValue.name:!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0||!ej.isNullOrUndefined(this.dataGroupInfo.Values[1].Values)&&this.dataGroupInfo.Values[1].Values.length>0?i=this.dataGroupInfo.Values[0].Values.length>0?n.model.actualValue.name:this.dataGroupInfo.Values[1].Values.length>0?n.model.targetValue.name:"":ej.isNullOrUndefined(this.cardJson.TitleSettings.Text)&&this.cardJson.TitleSettings.Text==="Actual vs Target"&&(i=this.cardJson.TitleSettings.Text),n.model.customHeader.text=i);n.model.customHeader.color=this.cardJson.TitleSettings.Color;n.model.headers.visible=this.cardJson.TitleSettings.Visibility;n.model.headers.headerPosition=ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.TitleSettings.Alignment);n.model.subTitle.visible=this.cardJson.SubTitleSettings.Visibility;this.cardJson.SubTitleSettings.Text!==""&&this.cardJson.SubTitleSettings.Text!=="Actual vs Target"&&(n.model.subTitle.text=this.cardJson.SubTitleSettings.Text);n.model.subTitle.color=this.cardJson.SubTitleSettings.Color;n.model.actualValue.position=ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.ValueAlignment).toString().toLocaleLowerCase();n.model.actualValue.color=this.cardJson.ActualValueForeground;n.model.additionalValue.position=ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.AdditionalValueAlignment).toString().toLocaleLowerCase();n.model.primaryValuePosition=ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.PrimaryValueAlignment).toString().toLocaleLowerCase();n.model.secondaryValuePosition=ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,this.cardJson.SecondaryValueAlignment).toString().toLocaleLowerCase();t=this.cardJson.PrimaryValueType.toLowerCase();t=t.replace(/[^A-Z0-9]/ig,"");t==="absolutedifference"&&(t="absolute");n.model.valueRepresentation.variationType=t;ej.isNullOrUndefined(n.model.additionalValueRepresentation)||(n.model.additionalValueRepresentation.variationType=t);n.model.uniformFontSize=this.cardJson.UniformSizing;n.model.customVisibility.compactView=this.cardJson.EnableCompactView;n.model.customVisibility.actualValue=this.cardJson.ShowActualValue;n.model.customVisibility.secondaryValue=this.cardJson.ShowSecondaryValue;n.model.customVisibility.indicator=this.cardJson.ShowIndicator;n.model.customVisibility.primaryValue=this.cardJson.ShowPrimaryValue;n.model.secondaryValueType=this.cardJson.SecondaryValueType==="Variation"||this.cardJson.SecondaryValueType==="variance"?"variance":"target";n.model.higherValueGood=this.cardJson.Direction;n.model.showIndicatorOnly=this.cardJson.ShowIndicatorOnly;n.model.actualValue.customText=this.cardJson.ActualValuePrefix;n.model.targetValue.customText=this.cardJson.TargetValuePrefix},n.prototype.getCardJson=function(){var n=new CardProperties;return n.ContainerSettings.ShowHeader=!1,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.showLoadingIndicator=function(){$("#"+this.designId+"cardItem"+this.cardJson.UniqueName).ejWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){$("#"+this.designId+"cardItem"+this.cardJson.UniqueName).ejWaitingPopup("hide")},n.prototype.cardItemDispose=function(){var n,t;if(ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.cardJson.UniqueName,[this.cardJson],null),n=null,ej.isNullOrUndefined(this.cardContent))n=this.cardElement.data("ejCard"),ej.isNullOrUndefined(n)||n.destroy();else for(t=0;t<this.cardContent.children().length;t++)$("#"+this.designId+"cardElement"+this.cardJson.UniqueName+"_"+t+"_toolTip").remove(),n=$(this.cardContent.children()[t]).data("ejCard"),ej.isNullOrUndefined(n)||n.destroy();this.hideLoadingIndicator();$("#"+this.designer._id+"_"+this.cardJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.cardJson.UniqueName).remove();$("#"+this.designId+"cardElement"+this.cardJson.UniqueName+"_toolTip").remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Card)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.cardJson)&&(this.cardJson=this.getCardJson()),this.cardJson},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(t,i){n.FieldType==="Measures"&&i.textContent.toLowerCase()!=="none"&&i.textContent.toLowerCase()!=="sort"&&$(i).css("display","block");n.FieldType==="Dimensions"&&n.DateTimeFormat==="None"?($(i).find("a").attr("fieldmenuname").toLowerCase()==="sort"||$(i).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters")&&$(i).css("display","block"):n.FieldType==="Dimensions"&&n.DateTimeFormat!=="None"&&$(i).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Ones,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n.prototype.getParameterColumn=function(){return{Value:this.cardJson.ContainerSettings.Title,Id:this.cardJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n}();window.ej.createObject("ej.DashboardDesignerUtility.CardItem",InternalCardReportItem,window);ej.DashboardDesignerUtility.CardItem.prototype.widgetItems();InternalChartProperties=function(){function n(n){this.chartJson=null;this.chartModel=null;this.propertyPanel=null;this.containerProperties=null;this.colorCustomizationSettings=null;this.selectedGridData=null;this.trendLineEdit=!1;this.seriesPalette=[];this.isCategoryAxisTitleChanged=!1;this.isPrimaryAxisTitleChanged=!1;this.colorFields=[];this.isColorSupportForText=!1;this.colorFields=this.getColorFields();this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.chartModel=n;this.chartJson=n.chartJson;this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem");this.colorCustomizationSettings=ejDashboardDesigner.getInstance("ColorCustomization");this.wireEvents()}return n.prototype.getColorFields=function(){return[{Name:WidgetProperty.FillColor,DisplayName:"Fill",ColorPicker:ColorSetColorPickers.GradientColorPicker}]},n.prototype.getContainerInstance=function(){return this.containerProperties},n.prototype.updatePropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.chartJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.chartJson);break;case"Description":this.propertyPanel.setDescription(this.chartJson,i);break;case"ChartType":this.checkColorSettings(i);this.updateChartType(i);break;case"EnableAnimation":this.updateChartAnimation(i);break;case"ShowLegend":this.updateLegendVisibility(i);break;case"LegendPosition":this.updateLegendPosition(i);break;case"ShowValueLabels":this.updateValueLabels(i);break;case"ValueLabelRotation":this.updateValueLabelRotation(i);break;case"ShowValueLabelSuffix":this.updateValueLabelSuffixVisibilty(i);break;case"ValueLabelSuffix":this.updateValueLabelSuffix(i);break;case"CategoryAxis":this.updateCategoryAxisVisibilty(i);break;case"CategoryAxisTitle":this.updateCategoryAxisTitleVisibility(i);break;case"CategoryAxisTitleValue":this.updateCategoryAxisTitleValue(i);break;case"CategoryAxisLabelRotation":this.updateCategoryLabelRotation(i);break;case"PrimaryValueAxis":this.updatePrimaryAxisVisibilty(i);break;case"PrimaryAxisTitle":this.updatePrimaryAxisTitleVisibility(i);break;case"PrimaryAxisTitleValue":this.updatePrimaryAxisTitleValue(i);break;case"LableOverflowMode":this.updateLabelOverFlowMode(i);break;case"CategoryGridLines":this.updateCategoryGridLines(i);break;case"PrimaryValueGridLines":this.updatePrimaryValueGridLines(i);break;case"ShowMarker":this.updateMarkerVisibility(i);break;case"DataLabel":this.chartJson.DataLabel=i;this.updateValueLabelSuffix(this.chartJson.ValueLabelSuffix);break;case"UseDefaultPalette":this.updateDefaultPaletteVisibility(i);break;case"ItemLink":this.UpdateLink(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.chartJson,i);break;case"ColorSet":this.updateColorCustomInfo(i);ej.DashboardDesignerUtility.Serialization.notifyChange();ejDashboardDesigner.editManager.setMergeAction(!1);break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.chartModel.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.chartModel.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"Chart",i));n!=="Series"&&ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-chart-bar",this.dashboardDesigner._id+"_"+this.chartJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"Chart",i);this.propertyPanel.canUpdate=!0},n.prototype.UpdateLink=function(n){this.chartJson.UrlLink.EnableLink=n.EnableLink;this.chartJson.UrlLink.LinkType=n.LinkType;this.chartJson.UrlLink.GridUrlType=n.GridUrlType;this.chartJson.UrlLink.PassingParameters=n.PassingParameters;this.chartJson.UrlLink.UrlPath=n.UrlPath},n.prototype.updateChartType=function(n){var r,u,i,t,o;this.chartModel.itemName=n;r=this.chartModel.isDistributionType(n);u=this.chartModel.getChartType(n);this.chartJson.CategoryGridLines=this.chartModel.isPercentCharts(n)||this.chartModel.isAreaCharts(n);var s=n===ChartTypes.StackedArea.toString()||n===ChartTypes.SplineArea.toString()||n===ChartTypes.Area.toString()||n===ChartTypes.PercentStackedArea.toString()?.5:1,f=this.chartModel.chartElement.find(".e-datavisualization-chart"),h=this.chartModel.isPercentCharts(this.chartJson.ChartType)?!1:this.chartModel.isPercentCharts(n);this.chartJson.ChartType=n;var c=this.chartModel.isPercentCharts(this.chartJson.ChartType),e=this.chartModel.dataGroupBindedColumnInfo(),l=e.valueLength!==0&&e.rowLength===0&&this.chartModel.isCustomColorSettingsApplicable(this.chartJson.ChartType),a=!ej.isNullOrUndefined(this.chartJson.ColorSets)&&this.chartJson.ColorSets.ColorSettingsList.some(function(n){return n.AdvancedColorSettings!==null});for(i=0;i<f.length;i++)t=$(f[i]).data("ejChart"),ej.isNullOrUndefined(t)||(this.chartModel.defaultSeries&&!this.chartModel.isShapeChartType(this.chartJson.ChartType)&&(t.model.series=this.chartModel.getDefaultSeries(n)),this.trendLineUpdate(t),t.option("commonSeriesOptions.type",u),t.option("commonSeriesOptions.opacity",s),h?(t.option("primaryYAxis.labelFormat","{value}%"),t.option("commonSeriesOptions.marker.dataLabel.textPosition","middle"),this.chartModel.dataConfiguration.postDraggedFields()):(this.applyChartProp(c,t),this.updateValueLabelSuffix(this.chartJson.ValueLabelSuffix)));o=this.chartJson.ChartType===ChartTypes.Pyramid.toString()||this.chartJson.ChartType===ChartTypes.Funnel.toString()?!1:!0;this.dashboardDesigner.element.find($("#"+this.chartModel.designPanel.designId+"_trendline_grid_col")).data("ejGrid")!==undefined&&$(this.dashboardDesigner.element.find("#"+this.chartModel.designPanel.designId+"_trendline_grid_col")).data("ejGrid").setModel({dataSource:this.chartJson.TrendLineSettings});this.propertyPanel.updateItemVisibility("Chart","BasicSettings","EnableAnimation",o);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowMarker",r);this.setPropertyElement("ColorSettings","ColorSettings",this.chartJson.ColorSets);this.propertyPanel.updateCategoryVisibility("Chart","ColorSettings",l);this.updateMarkerVisibility(this.chartModel.isDistributionType(this.chartJson.ChartType)?this.chartJson.ShowMarker:!1);a&&this.updateColorCustomInfo(this.chartJson.ColorSets.ColorSettingsList)},n.prototype.trendLineUpdate=function(n){var r=this.chartModel.dataGroupBindedColumnInfo(),i=this.chartModel.isTrendLineSupportChartType(this.chartJson.ChartType)&&r.rowLength===0&&!this.chartJson.IsEnableDrillDown&&r.valueLength>0,t;if(i)this.chartModel.updateTrendLineToSeries(this.chartJson.TrendLineSettings,n.model.series);else for(t=0;t<n.model.series.length;t++)n.model.series[t].trendlines=[];n.redraw();this.propertyPanel.updateCategoryVisibility("Chart","Trendline",i);this.propertyPanel.updateItemVisibility("Chart","Trendline","Trendline",i)},n.prototype.applyChartProp=function(n,t){n?(t.option("series",this.chartModel.getPercentageValueForSeriesPoints(t.model.series)),t.option("primaryYAxis.labelFormat","{value}%"),t.option("commonSeriesOptions.marker.dataLabel.textPosition","middle")):this.chartModel.isShapeChartType(this.chartJson.ChartType)||(t.option("primaryYAxis.labelFormat","{value}"),this.chartModel.isStackedType(this.chartJson.ChartType)?t.option("commonSeriesOptions.marker.dataLabel.textPosition","middle"):t.option("commonSeriesOptions.marker.dataLabel.textPosition","top"))},n.prototype.updateChartAnimation=function(n){var r,t,i;for(this.chartJson.EnableAnimation=n,r=this.chartModel.chartElement.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=$(r[t]).data("ejChart"),ej.isNullOrUndefined(i)||(i.option("commonSeriesOptions.enableAnimation",this.chartJson.EnableAnimation),i.animate())},n.prototype.updateLegendVisibility=function(n){var r,t,i;for(this.chartJson.ShowLegend=n,r=this.chartModel.chartElement.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=$(r[t]).data("ejChart"),ej.isNullOrUndefined(i)||(i.model.legend.visible=this.chartJson.ShowLegend,i.redraw());this.propertyPanel.updateItemVisibility("Chart","BasicSettings","CustomLegend",this.chartJson.ShowLegend&&this.chartJson.CustomLegendBtnVisibilty);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","LegendPosition",!this.chartModel.isShapeChartType(this.chartJson.ChartType)&&this.chartJson.ShowLegend)},n.prototype.updateLegendPosition=function(n){var r,t,i;for(this.chartJson.LegendPosition=n,r=this.chartModel.chartElement.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=$(r[t]).data("ejChart"),ej.isNullOrUndefined(i)||(i.model.legend.position=this.chartJson.LegendPosition,i.redraw())},n.prototype.updateValueLabels=function(n){var r,t,i;for(this.chartJson.ShowValueLabels=n,r=this.chartModel.chartElement.find(".e-datavisualization-chart"),t=0;t<r.length;t++)i=$(r[t]).data("ejChart"),ej.isNullOrUndefined(i)||(i.option("commonSeriesOptions.marker.dataLabel.visible",n),i.redraw());this.chartModel.isShapeChartType(this.chartJson.ChartType)?this.propertyPanel.updateItemVisibility("Chart","BasicSettings","DataLabel",n):this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelRotation",n);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ShowValueLabelSuffix",n);n?this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelSuffix",this.chartJson.ShowValueLabelSuffix):this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelSuffix",n)},n.prototype.updateValueLabelRotation=function(n){var u,i,t,r;for(this.chartJson.ValueLabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),""),u=this.chartModel.chartElement.find(".e-datavisualization-chart"),i=0;i<u.length;i++)if(t=$(u[i]).data("ejChart"),!ej.isNullOrUndefined(t)){for(t.model.commonSeriesOptions.marker.dataLabel.angle=this.chartJson.ValueLabelRotation,r=0;r<t.model.series.length;r++)t.model.series[r].marker.dataLabel.angle=this.chartJson.ValueLabelRotation;t.redraw()}},n.prototype.updateValueLabelSuffixVisibilty=function(n){this.chartJson.ShowValueLabels&&(this.chartJson.ShowValueLabelSuffix=n);this.updateValueLabelSuffix(this.chartJson.ValueLabelSuffix);this.propertyPanel.updateItemVisibility("Chart","BasicSettings","ValueLabelSuffix",n)},n.prototype.updateValueLabelSuffix=function(n){var h=this.chartModel.isShapeChartType(this.chartJson.ChartType),c=this.chartModel.isPercentCharts(this.chartJson.ChartType),e,i,r,o,u,s,f,t;for(h&&this.updateDataLabel(this.chartJson.DataLabel),this.chartJson.ValueLabelSuffix=n,e=this.chartModel.chartElement.find(".e-datavisualization-chart"),i=0;i<e.length;i++)if(r=$(e[i]).data("ejChart"),!ej.isNullOrUndefined(r)){for(o=r.model.series,u=0;u<o.length;u++)for(s=o[u].points,f=0;f<s.length;f++)t=s[f],c?t.text=this.getPercetageValueForPoints(t,t.totalValue):h||(t.text=ej.isNullOrUndefined(t.formattedtext)?t.text:t.formattedtext),this.chartJson.ShowValueLabelSuffix?this.chartModel.dataGroupInfo.Values.length>0&&this.chartModel.dataGroupInfo.Values[0].Name==="YValue"&&this.chartModel.dataGroupInfo.Values[0].Values.length>0?t.text+=" "+n:t.text=t.formattedtext+" "+n:this.chartModel.dataGroupInfo.Values.length>0&&this.chartModel.dataGroupInfo.Values[0].Name==="YValue"&&this.chartModel.dataGroupInfo.Values[0].Values.length>0||(t.text=t.formattedtext);r.redraw()}},n.prototype.updateCategoryAxisVisibilty=function(n){this.chartModel.chartObj.model.primaryXAxis.visible=this.chartJson.Axis.CategoryAxis.IsEnabled=n;this.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisTitle",n);this.propertyPanel.updateItemVisibility("Chart","Axis","LableOverflowMode",n);this.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisLabelRotation",n);this.updateCategoryAxisTitleVisibility(this.chartJson.Axis.CategoryAxis.ShowTitle);this.chartModel.chartObj.redraw()},n.prototype.updateCategoryAxisTitleVisibility=function(n){this.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisTitleValue",n&&this.chartJson.Axis.CategoryAxis.IsEnabled&&!this.chartJson.IsEnableDrillDown);this.chartModel.chartObj.model.primaryXAxis.title.visible=this.chartJson.Axis.CategoryAxis.ShowTitle=n;this.chartModel.chartObj.redraw()},n.prototype.updateCategoryAxisTitleValue=function(n){this.chartModel.dataGroupBindedColumnInfo().columnLength>0?(this.chartJson.Axis.CategoryAxis.Title=n,this.chartModel.chartObj.model.primaryXAxis.title.text=n,this.chartModel.chartObj.redraw(),this.isCategoryAxisTitleChanged=!0):(this.setPropertyElement("Axis","CategoryAxisTitleValue",""),this.isCategoryAxisTitleChanged=!1)},n.prototype.updatePrimaryAxisVisibilty=function(n){this.chartJson.Axis.PrimaryValueAxis.IsEnabled=n;this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisTitle",n);this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisTitleValue",this.chartJson.Axis.PrimaryValueAxis.ShowTitle&&n);this.chartModel.chartObj.model.primaryYAxis.visible=n;this.chartModel.chartObj.redraw()},n.prototype.updatePrimaryAxisTitleVisibility=function(n){this.chartJson.Axis.PrimaryValueAxis.ShowTitle=this.chartModel.chartObj.model.primaryYAxis.title.visible=n;this.propertyPanel.updateItemVisibility("Chart","Axis","PrimaryAxisTitleValue",this.chartJson.Axis.PrimaryValueAxis.IsEnabled&&n);this.chartModel.chartObj.redraw()},n.prototype.updatePrimaryAxisTitleValue=function(n){this.chartModel.dataGroupBindedColumnInfo().valueLength>0?(this.chartModel.chartObj.model.primaryYAxis.title.text=this.chartJson.Axis.PrimaryValueAxis.Title=n,this.chartModel.chartObj.redraw(),this.isPrimaryAxisTitleChanged=!0):(this.setPropertyElement("Axis","PrimaryAxisTitleValue",""),this.isPrimaryAxisTitleChanged=!1)},n.prototype.updateLabelOverFlowMode=function(n){this.chartModel.chartObj.model.primaryXAxis.labelIntersectAction=this.chartJson.Axis.CategoryAxis.LabelOverflowMode=ej.DashboardDesignerUtility.Serialization.enumToString(LabelOverFlowMode,n);this.chartModel.chartObj.redraw()},n.prototype.updateCategoryLabelRotation=function(n){this.chartModel.chartObj.model.primaryXAxis.labelRotation=this.chartJson.Axis.CategoryAxis.LabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),"");this.chartModel.chartObj.redraw()},n.prototype.updateCategoryGridLines=function(n){this.chartModel.chartObj.model.primaryXAxis.majorGridLines.visible=this.chartJson.CategoryGridLines=n;this.chartModel.chartObj.redraw()},n.prototype.updatePrimaryValueGridLines=function(n){this.chartModel.chartObj.model.primaryYAxis.majorGridLines.visible=this.chartJson.PrimaryValueGridLines=n;this.chartModel.chartObj.redraw()},n.prototype.updateMarkerVisibility=function(n){var u,i,t,r;for(this.chartModel.isDistributionType(this.chartJson.ChartType)&&(this.chartJson.ShowMarker=n),u=this.chartModel.chartElement.find(".e-datavisualization-chart"),i=0;i<u.length;i++){for(t=$(u[i]).data("ejChart"),t.model.commonSeriesOptions.marker.visible=n,r=0;r<t.model.series.length;r++)t.model.series[r].marker.visible=n;t.redraw()}},n.prototype.updateDataLabel=function(n){var i,t,r;if(this.chartModel.dataGroupInfo.Values.length>0&&this.chartModel.dataGroupInfo.Values[0].Name==="YValue"&&this.chartModel.dataGroupInfo.Values[0].Values.length>0)for(this.chartJson.DataLabel=n,i=this.chartModel.chartElement.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=$(i[t]).data("ejChart"),ej.isNullOrUndefined(r)||this.updateDataLabelValues(n,r)},n.prototype.updateDefaultPaletteVisibility=function(n){this.chartJson.IsDefaultColorPalette=n;var t=this.getModifiedColorPalette();this.updateColorPaletteToChartWidget(t);this.propertyPanel.updateItemVisibility("Chart","SeriesPalette","ColorPalette",!n);this.propertyPanel.refreshScroller()},n.prototype.getModifiedColorPalette=function(){for(var t,i=[],r=this.chartModel.chartElement.find(".e-datavisualization-chart"),n=0;n<r.length;n++)t=$(r[n]).data("ejChart"),ej.isNullOrUndefined(t)||(i=this.getColorPaletteValue(t.model.series));return i},n.prototype.getColorPaletteValue=function(n){var r=[],i,t;if(this.chartJson.IsDefaultColorPalette){if(r=$.extend(!0,[],this.chartModel.defaultColorPalette),n.length>this.chartModel.defaultColorPalette.length)for(t=this.chartModel.defaultColorPalette.length;t<n.length;t++)r[t]=this.chartModel.defaultColorPalette[t%this.chartModel.defaultColorPalette.length]}else{for(i=0;i<this.chartModel.defaultColorPalette.length;i++)r[i]=ej.isNullOrUndefined(this.chartJson.ColorPaletteModel[i])?this.chartModel.defaultColorPalette[i]:this.chartJson.ColorPaletteModel[i].Value;if(n.length>this.chartModel.defaultColorPalette.length)for(t=this.chartModel.defaultColorPalette.length;t<n.length;t++)r[t]=ej.isNullOrUndefined(this.chartJson.ColorPaletteModel[t])?this.chartModel.defaultColorPalette[t%this.chartModel.defaultColorPalette.length]:this.chartJson.ColorPaletteModel[t].Value}return r},n.prototype.updateColorPaletteModel=function(){var n=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),"ColorPalette","SeriesPalette",-1);this.openColorPalette(null,"Chart_SeriesPalette",n)},n.prototype.updateDataLabelValues=function(n,t){for(var u,f,i,e=t.model.series,r=0;r<t.model.series.length;r++)for(u=e[r].points,f=e[r].total,i=0;i<u.length;i++)ej.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Percentage)===n?t.model.series[r].points[i].text=this.getPercetageValueForPoints(u[i],f).toString():ej.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Value)===n?t.model.series[r].points[i].text=t.model.series[r].points[i].formattedtext.toString():DataLabel.ValueAndPercentage.toString()===n&&(t.model.series[r].points[i].text=t.model.series[r].points[i].formattedtext+"("+this.getPercetageValueForPoints(u[i],f).toString()+")");t.redraw()},n.prototype.renderTrendLines=function(n,t,i){var r=ej.DashboardUtil.getWidgetInstance($(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0])),p,w,nt,e,o;if(ej.isNullOrUndefined(n))o=this.dashboardDesigner.element.find($("#"+this.chartModel.designPanel.designId+"_trendline_grid_col")).data("ejGrid"),ej.isNullOrUndefined(o)||(o.setModel({dataSource:this.chartJson.TrendLineSettings}),this.propertyPanel.updateItemVisibility("Chart","Trendline","Trendline",i.isVisible),r.trendLineEdit=!1,r.selectedGridData=null,r.chartProperties.dashboardDesigner.element.find($("#"+r.designPanel.designId+"_trendline_editicon")).css("opacity","0.5"),r.chartProperties.dashboardDesigner.element.find($("#"+r.designPanel.designId+"_trendline_delicon")).css("opacity","0.5"));else{var f=ej.buildTag("div.e-dashboarddesigner-trendline-container","",{display:ej.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.chartModel.designPanel.designId+"_"+t+"_"+i.name+"_container"}),s=ej.buildTag("div.e-dashboarddesigner-trendline-leftdiv","",{},{id:this.chartModel.designPanel.designId+"_trendlineleft"}),h=ej.buildTag("table.e-designer-table","",{},{unselectable:"on"}),c=ej.buildTag("tr","",{display:"block"}),l=ej.buildTag("td","",{}),tt=ej.buildTag("div.e-dashboarddesigner-trendline-label",this.dashboardDesigner.locale.chartTrendLineDialog.trendline,{},{type:"label"}),a=ej.buildTag("div.e-dashboarddesigner-trendline-rightdiv","",{},{id:this.chartModel.designPanel.designId+"_trendlineright"}),v=ej.buildTag("table.e-designer-table","",{"padding-right":"5px"},{unselectable:"on"}),y=ej.buildTag("tr","",{display:"block"}),u=ej.buildTag("td.e-toolbar","",{border:"none",display:"flex"});this.addDiv=ej.buildTag("div.e-dashboarddesigner-chart-adddiv e-dashboard-trendline-add","",{},{id:this.chartModel.designPanel.designId+"_trendline_addicon"});p=ej.buildTag("span.e-icon e-plus e-designer-add-icon","",{float:"right","font-size":"14px",margin:"3px"},{id:this.chartModel.designPanel.designId+"_add_span",title:this.dashboardDesigner.locale.chartTrendLineDialog.Add});this.editDiv=ej.buildTag("div.e-dashboarddesigner-chart-editdiv e-dashboard-trendline-edit","",{},{id:this.chartModel.designPanel.designId+"_trendline_editicon"});w=ej.buildTag("span.e-reportdesigner-parameter-edit","",{float:"right","font-size":"14px",margin:"3px"},{id:this.chartModel.designPanel.designId+"_edit_span",title:this.dashboardDesigner.locale.chartTrendLineDialog.Edit});this.deleteDiv=ej.buildTag("div.e-dashboarddesigner-chart-deletediv e-dashboard-trendline-delete","",{},{id:this.chartModel.designPanel.designId+"_trendline_delicon"});var it=ej.buildTag("span.e-reportdesigner-toolbar-delete","",{float:"right","font-size":"14px",margin:"3px"},{id:this.chartModel.designPanel.designId+"_del_span",title:this.dashboardDesigner.locale.chartTrendLineDialog.Delete}),b=ej.buildTag("div","",{},{id:this.chartModel.designPanel.designId+"_trendline_grid"}),k=ej.buildTag("table.e-designer-table","",{width:"435px"},{unselectable:"on"}),d=ej.buildTag("tr","",{}),g=ej.buildTag("td","",{},{id:this.chartModel.designPanel.designId+"_trendline_grid_col"}),rt=ej.buildTag("div.e-dashboarddesigner-separator e-horizontal","",{},{id:this.chartModel.designPanel.designId+"_trendline_separator1"}),ut=ej.buildTag("div.e-dashboarddesigner-separator e-horizontal","",{},{id:this.chartModel.designPanel.designId+"_trendline_separator2"});n.append(f);f.append(s);s.append(h);h.append(c);c.append(l);l.append(tt);f.append(a);a.append(v);v.append(y);y.append(u);u.append(this.addDiv);this.addDiv.append(p);u.append(ut);u.append(this.editDiv);this.editDiv.append(w);u.append(rt);u.append(this.deleteDiv);this.deleteDiv.append(it);f.append(b);b.append(k);k.append(d);d.append(g);nt=this.chartJson.TrendLineSettings;e=428/3;g.ejGrid({dataSource:nt,columns:[{field:"Name",headerText:this.dashboardDesigner.locale.chartTrendLineDialog.series,width:e},{field:"LineType",headerText:this.dashboardDesigner.locale.chartTrendLineDialog.type,width:e},{field:"LineColor",headerText:this.dashboardDesigner.locale.chartTrendLineDialog.color,width:e}],height:"200px",allowSelection:!0,allowResizing:!0,allowScrolling:!0,allowPaging:!1,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0},rowSelected:$.proxy(this.gridRowSelected,this),enableAltRow:!1})}},n.prototype.wireEvents=function(){this.dashboardDesigner.element.on("click",".e-dashboard-trendline-add",$.proxy(this.addTrendLine,this));this.dashboardDesigner.element.on("click",".e-dashboard-trendline-edit",$.proxy(this.editTrendLine,this));this.dashboardDesigner.element.on("click",".e-dashboard-trendline-delete",$.proxy(this.deleteTrendLine,this))},n.prototype.unwireEvents=function(){this.dashboardDesigner.element.off("click",".e-dashboard-trendline-add",$.proxy(this.addTrendLine,this));this.dashboardDesigner.element.off("click",".e-dashboard-trendline-edit",$.proxy(this.editTrendLine,this));this.dashboardDesigner.element.off("click",".e-dashboard-trendline-delete",$.proxy(this.deleteTrendLine,this))},n.prototype.addTrendLine=function(){var n=ej.DashboardUtil.getWidgetInstance($(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]));n.trendLineEdit=!1;n.trendLineId=ej.getGuid("");n.chartProperties.dashboardDesigner.element.find($("#"+n.designPanel.designId+"_legendtext_drop")).attr("textEdited","false");ejDashboardDesigner.getInstance("TrendLineWindow").openTrendlineDialog(null,n,"updateTrendLineInfo")},n.prototype.editTrendLine=function(){var n=ej.DashboardUtil.getWidgetInstance($(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]));n.selectedGridData!==null&&(n.trendLineEdit=!0,ejDashboardDesigner.getInstance("TrendLineWindow").openTrendlineDialog(n.selectedGridData,n,"updateTrendLineInfo"))},n.prototype.deleteTrendLine=function(){var n=ej.DashboardUtil.getWidgetInstance($(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]));n.selectedGridData!==null&&(n.selectedTrendlineIndex=n.chartProperties.dashboardDesigner.element.find($("#"+n.designPanel.designId+"_trendline_grid_col")).data("ejGrid").option("selectedRowIndex"),n.selectedTrendlineIndex!==-1&&n.chartJson.TrendLineSettings.splice(n.selectedTrendlineIndex,1),this.updateTrendLineInfo(n.chartJson.TrendLineSettings),n.chartProperties.dashboardDesigner.element.find($("#"+n.designPanel.designId+"_trendline_editicon")).css("opacity","0.5"),n.chartProperties.dashboardDesigner.element.find($("#"+n.designPanel.designId+"_trendline_delicon")).css("opacity","0.5"))},n.prototype.gridRowSelected=function(n){var t=ej.DashboardUtil.getWidgetInstance($(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]));this.dashboardDesigner.element.find($("#"+this.chartModel.designPanel.designId+"_trendline_editicon")).css("opacity","1");this.dashboardDesigner.element.find($("#"+this.chartModel.designPanel.designId+"_trendline_delicon")).css("opacity","1");t.selectedGridData=n.data},n.prototype.updateTrendLineInfo=function(n){var t=ej.DashboardUtil.getWidgetInstance($(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0])),i;if(n.length===undefined)if(t.trendLineEdit)for(i=0;i<t.chartJson.TrendLineSettings.length;i++)t.chartJson.TrendLineSettings[i].Id===n.Id&&(t.chartJson.TrendLineSettings[i]=n);else t.chartJson.TrendLineSettings.push(n);t.trendLineEdit=!1;t.chartProperties.chartModel.updateTrendLineToSeries(t.chartJson.TrendLineSettings,t.chartObj.model.series);t.chartObj.redraw();t.chartProperties.dashboardDesigner.element.find($("#"+t.designPanel.designId+"_trendline_grid_col")).data("ejGrid").setModel({dataSource:t.chartJson.TrendLineSettings});this.propertyPanel.refreshScroller();t.chartProperties.dashboardDesigner.element.find($("#"+t.designPanel.designId+"_trendline_editicon")).css("opacity","0.5");t.chartProperties.dashboardDesigner.element.find($("#"+t.designPanel.designId+"_trendline_delicon")).css("opacity","0.5");t.selectedGridData=null;ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.getPercetageValueForPoints=function(n,t){return parseFloat((n.y*100/t).toFixed(2))+"%"},n.prototype.updateDataGroupPropertyVisibility=function(n,t){this.chartJson.CustomLegendBtnVisibilty=n;this.chartJson.IsColorPaletteCategoryVisible=t;this.propertyPanel.updateItemVisibility("Chart","BasicSettings","CustomLegend",n&&this.chartJson.ShowLegend);this.propertyPanel.updateCategoryVisibility("Chart","SeriesPalette",t&&n);this.setPropertyElement("SeriesPalette","UseDefaultPalette",this.chartJson.IsDefaultColorPalette)},n.prototype.updatePropertyItems=function(n,t){n!==0&&t!==0?this.propertyPanel.updateItemDisable("bool","Chart","Filter","ActAsMasterWidget",!1):this.propertyPanel.updateItemDisable("bool","Chart","Filter","ActAsMasterWidget",!0)},n.prototype.onCustomLegendClick=function(){ejDashboardDesigner.getInstance("CustomLegendSettings").openLegendSettings(this,"updateCustomLegend",this.chartJson.CustomLegendInfo)},n.prototype.updateCustomLegend=function(n){var i,t,r;if(this.chartJson.IsCustomLegend=!0,this.chartJson.CustomLegendInfo=n,this.chartModel.multiplePropertionChart)for(i=this.chartModel.chartElement.find(".e-datavisualization-chart"),t=0;t<i.length;t++)r=$(i[t]).data("ejChart"),this.updateCustomLegendValuesToChartObj(r);else this.updateCustomLegendValuesToChartObj(this.chartModel.chartObj);ej.DashboardDesignerUtility.Serialization.notifyChange();ejDashboardDesigner.editManager.setMergeAction(!1)},n.prototype.updateCustomLegendValuesToChartObj=function(n){var i=this.chartModel.dataGroupBindedColumnInfo(),r,u,e,t,c,o,s,h,f;if(!ej.isNullOrUndefined(n)&&i.valueLength>0&&i.rowLength===0||this.chartModel.isShapeChartType(this.chartJson.ChartType))for(e=n.model.series,t=0;t<e.length;t++)if(this.chartModel.isShapeChartType(this.chartJson.ChartType))for(r=0;r<n.model.series[t].points.length;r++)for(u=0;u<this.chartJson.CustomLegendInfo.GroupValues.Values.length;u++)n.model.series[t].points[r].legendName===this.chartJson.CustomLegendInfo.GroupValues.Values[u].Name&&(n.model.series[t].points[r].x=this.chartJson.CustomLegendInfo.GroupValues.Values[u].Value);else n.model.series[t].name=this.chartJson.CustomLegendInfo.GroupValues.Values[t].Value;else if(!this.chartModel.isShapeChartType(this.chartJson.ChartType)&&!ej.isNullOrUndefined(this.chartModel.chartObj)&&i.valueLength>0&&i.rowLength>0&&this.chartJson.CustomLegendInfo.Type===CustomLegendType.Individual)for(e=n.model.series,t=0;t<e.length;t++)n.model.series[t].name=this.chartJson.CustomLegendInfo.SingleValues[t].Value;else if(!this.chartModel.isShapeChartType(this.chartJson.ChartType)&&!ej.isNullOrUndefined(this.chartModel.chartObj)&&i.valueLength>0&&i.rowLength>0&&this.chartJson.CustomLegendInfo.Type===CustomLegendType.Group){for(c=this.chartJson.CustomLegendInfo.Format,o=[],s=0;s<i.valueLength;s++)for(h=0;h<n.model.series.length/i.valueLength;h++){var l=this.chartJson.CustomLegendInfo.GroupValues.Values[s].Value,a=this.chartJson.CustomLegendInfo.GroupValues.Series[h].Value,v=c.replace(new RegExp("{{:Row}}","g"),a).replace(new RegExp("{{:Value}}","g"),l);o.push(v)}if(n.model.series.length===o.length)for(f=0;f<n.model.series.length;f++)n.model.series[f].name=o[f]}n.redraw()},n.prototype.openColorPalette=function(n,t,i){ejDashboardDesigner.getInstance("ColorPalette").openColorPalette(n,t,i,this,"updateColorPalette",this.chartJson.ColorPaletteModel)},n.prototype.updateColorPalette=function(n){var r=n.textValue,t=n.rowIndex,i=this.getModifiedColorPalette();i[t]=this.chartJson.ColorPaletteModel[t].Value=r;this.chartJson.ColorPaletteModel[t].IsModified=!0;this.updateColorPaletteToChartWidget(i);ej.DashboardDesignerUtility.Serialization.notifyChange();ejDashboardDesigner.editManager.setMergeAction(!1)},n.prototype.updateColorPaletteToChartWidget=function(n){for(var t,i,u=this.chartModel.chartElement.find(".e-datavisualization-chart"),r=0;r<u.length;r++){if(t=$(u[r]).data("ejChart"),!ej.isNullOrUndefined(t))for(t.model.palette=n,i=0;i<t.model.series.length;i++)t.model.series[i].fill=n[i];t.redraw()}},n.prototype.getPropertyGridItems=function(){var t=ej.DashboardUtil.getConfiguredColumns(this.chartModel.dataGroupInfo),i=this.chartModel.dataGroupBindedColumnInfo().rowLength!==0,n=new ej.DashboardDesignerUtility.PropertyGridItem(this.chartJson.FilterSettings,this.chartModel.controlContainer,this.chartModel.controlHeader,this.chartModel.dataGroupInfo,this.chartJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.chartJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.chartJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.chartJson.ContainerSettings.Description,n.propertyGridItems.Type="Chart",n.linkingProperty.Items[0].value=ej.DashboardUtil.getInstance().useExistingLinks(this.chartJson),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"ChartType",displayName:"Chart Type",value:this.chartJson.ChartType,itemType:"dropdown",valueList:this.chartModel.isShapeChartType(this.chartJson.ChartType)?["Pie","Doughnut","Pyramid","Funnel"]:["Bar","Column","Line","Area","Spline","Spline Area","Stacked Column","Stacked Bar","Stacked Area","100% Stacked Column","100% Stacked Area","100% Stacked Bar"]},{name:"EnableAnimation",displayName:"Enable Animation",isVisible:this.chartJson.ChartType===ChartTypes.Pyramid.toString()||this.chartJson.ChartType===ChartTypes.Funnel.toString()?!1:!0,value:this.chartJson.EnableAnimation,itemType:"bool"},{name:"ShowLegend",displayName:"Show Legend",value:ej.isNullOrUndefined(this.chartJson.ShowLegend)?!1:this.chartJson.ShowLegend,itemType:"bool"},{name:"CustomLegend",displayName:"Legend",isVisible:!ej.isNullOrUndefined(this.chartJson.ShowLegend)&&this.chartJson.ShowLegend&&this.chartJson.CustomLegendBtnVisibilty?this.chartJson.CustomLegendBtnVisibilty:!1,itemType:"button",buttonText:"Customize",callbackInstance:this,callbackMethod:"onCustomLegendClick"},{name:"LegendPosition",displayName:"Legend Position",isVisible:!ej.isNullOrUndefined(this.chartJson.ShowLegend)&&this.chartJson.ShowLegend&&!this.chartModel.isShapeChartType(this.chartJson.ChartType),itemType:"dropdown",value:this.chartJson.LegendPosition,valueList:["Top","Left","Right","Bottom"]},{name:"ShowValueLabels",displayName:"Show Value Labels",value:this.chartJson.ShowValueLabels,itemType:"bool"},{name:"ValueLabelRotation",displayName:"Value Label Rotation",isVisible:!this.chartModel.isShapeChartType(this.chartJson.ChartType)&&this.chartJson.ShowValueLabels,itemType:"dropdown",value:this.chartJson.ValueLabelRotation==="None"?"0"+String.fromCharCode(176):this.chartJson.ValueLabelRotation+String.fromCharCode(176),valueList:["-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"DataLabel",displayName:"Data Label",isVisible:this.chartModel.isShapeChartType(this.chartJson.ChartType)&&this.chartJson.ShowValueLabels,itemType:"dropdown",value:this.chartJson.DataLabel,valueList:["Value","Percentage","Value And Percentage"]},{name:"ShowValueLabelSuffix",displayName:"Value Label Suffix",isVisible:this.chartJson.ShowValueLabels,value:this.chartJson.ShowValueLabelSuffix,itemType:"bool"},{name:"ValueLabelSuffix",displayName:"Suffix Value",value:this.chartJson.ValueLabelSuffix,itemType:"string",isVisible:this.chartJson.ShowValueLabels&&this.chartJson.ShowValueLabelSuffix},{name:"ShowMarker",displayName:"Show Marker",value:this.chartJson.ShowMarker,isVisible:this.chartModel.isDistributionType(this.chartJson.ChartType)?!0:!1,itemType:"bool"}]},n.linkingProperty,{CategoryName:"Axis",IsVisible:this.chartModel.isShapeChartType(this.chartJson.ChartType)?!1:!0,Items:[{name:"CategoryAxis",displayName:"Show Category Axis",value:this.chartJson.Axis.CategoryAxis.IsEnabled,itemType:"bool"},{name:"CategoryAxisTitle",displayName:"Show Category Axis Title",isVisible:this.chartJson.Axis.CategoryAxis.IsEnabled,value:this.chartJson.Axis.CategoryAxis.ShowTitle,itemType:"bool"},{name:"CategoryAxisTitleValue",displayName:"Category Axis Title",isVisible:this.chartJson.Axis.CategoryAxis.ShowTitle&&this.chartJson.Axis.CategoryAxis.IsEnabled&&!this.chartJson.IsEnableDrillDown,value:this.chartJson.Axis.CategoryAxis.Title,itemType:"string"},{name:"LableOverflowMode",displayName:"Label Overflow Mode",isVisible:this.chartJson.Axis.CategoryAxis.IsEnabled,value:ej.DashboardDesignerUtility.Serialization.enumToString(LabelOverFlowMode,this.chartJson.Axis.CategoryAxis.LabelOverflowMode),itemType:"dropdown",valueList:["Trim","Hide"]},{name:"CategoryAxisLabelRotation",displayName:"Category Axis Label Rotation",isVisible:this.chartJson.Axis.CategoryAxis.IsEnabled?this.chartJson.Axis.CategoryAxis.IsEnabled:!1,itemType:"dropdown",value:this.chartJson.Axis.CategoryAxis.LabelRotation==="None"?"0"+String.fromCharCode(176):this.chartJson.Axis.CategoryAxis.LabelRotation+String.fromCharCode(176),valueList:["-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"PrimaryValueAxis",displayName:"Show Primary Value Axis",value:this.chartJson.Axis.PrimaryValueAxis.IsEnabled,itemType:"bool"},{name:"PrimaryAxisTitle",displayName:"Show Primary Value Axis Title",isVisible:this.chartJson.Axis.PrimaryValueAxis.IsEnabled,value:this.chartJson.Axis.PrimaryValueAxis.ShowTitle,itemType:"bool"},{name:"PrimaryAxisTitleValue",displayName:"Primary Axis Title Value",isVisible:this.chartJson.Axis.PrimaryValueAxis.ShowTitle&&this.chartJson.Axis.PrimaryValueAxis.IsEnabled,value:this.chartJson.Axis.PrimaryValueAxis.Title,itemType:"string"},]},{CategoryName:"Grid Lines",IsVisible:this.chartModel.isShapeChartType(this.chartJson.ChartType)?!1:!0,Items:[{name:"PrimaryValueGridLines",displayName:"Primary Value Axis",value:this.chartJson.PrimaryValueGridLines,itemType:"bool"},{name:"CategoryGridLines",displayName:"Category Axis",value:this.chartJson.CategoryGridLines,itemType:"bool"}]},{CategoryName:"Trendline",IsVisible:this.chartModel.isTrendLineSupportChartType(this.chartJson.ChartType)&&this.chartModel.dataGroupInfo.Values.length>0&&this.chartModel.dataGroupInfo.Values[0].Values.length>0&&this.chartModel.dataGroupInfo.Values[1].Values.length===1&&this.chartModel.dataGroupInfo.Values[2].Values.length===0,Items:[{name:"Trendline",isVisible:this.chartModel.isTrendLineSupportChartType(this.chartJson.ChartType)&&this.chartModel.dataGroupInfo.Values.length>0&&this.chartModel.dataGroupInfo.Values[0].Values.length>0&&this.chartModel.dataGroupInfo.Values[1].Values.length===1&&this.chartModel.dataGroupInfo.Values[2].Values.length===0,itemType:"object",callbackInstance:this,callbackMethod:"renderTrendLines"},]},{CategoryName:"Series Palette",IsVisible:this.chartJson.IsColorPaletteCategoryVisible,Items:[{name:"UseDefaultPalette",displayName:"Use Default Palette",value:this.chartJson.IsDefaultColorPalette,itemType:"bool"},{name:"ColorPalette",itemType:"object",isVisible:!this.chartJson.IsDefaultColorPalette,callbackInstance:this,callbackMethod:"openColorPalette"}]},{CategoryName:"Color Settings",IsVisible:!ej.isNullOrUndefined(t)&&t.length>0&&!i&&!this.chartModel.isShapeChartType(this.chartJson.ChartType)?!0:!1,Items:[{name:"ColorSettings",callbackInstance:this,callbackMethod:"renderColorSettings",itemType:"object",elementType:"Chart"},]},n.filterSettingsProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.updateColorCustomInfo=function(n){var s,e,u,a,r;this.chartJson.ColorSets.ColorSettingsList=n;var p=this.chartModel.chartElement.find(".e-datavisualization-chart"),t=$(p).data("ejChart"),o=[],i=[],h=[],c="",l="DefaultColors";for(s=0;s<n.length;s++)o.push(n[s].DefaultSettings);for(e=0;e<o.length;e++)ej.isNullOrUndefined(o[e][l][0])||h.push(o[e][l][0].Color);for(u=0;u<t.model.series.length;u++)ej.isNullOrUndefined(h[u])||(t.model.series[u].fill=h[u]);if(this.isAdvanceColorSupported(this.chartJson.ChartType))if(ej.isNullOrUndefined(n[0].AdvancedColorSettings)?t.model.legend.shape="seriesType":i.push(n[0].AdvancedColorSettings),c=i!==null&&i.length>0?"range":"series",t.model.legend.mode=c,t.model.legend.enableMultiRange=!0,t.model.legend.toggleSeriesVisibility=!1,i!==null&&i.length>0)if(a=!0,i[0].IsPercent||a){this.showLoadingIndicator();var v=[],f=this.chartJson.Data,y=this.chartModel.getDataCategoriesInfo();for(r=0;r<f.Containers.length;r++)f.Containers[r].FieldInfos.length>0&&(f.Containers[r].Id===y[0].Name||f.Containers[r].Id===y[1].Name)&&v.push(f.Containers[r].FieldInfos[0]);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/GetColorParameters/",{action:ej.DashboardUtil.DesignerAction.GetMinMax,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.GetMinMax,fieldInfo:v,dataset:f.Id,colorSet:this.chartJson.ColorSets,controlType:"chart"})},{fnction:$.proxy(this.fillColor,this,i,t)})}else t.model.rangeColorMapping=this.getRangeColorMapping(i[0],null),t.redraw();else t.model.rangeColorMapping=[],t.redraw();else this.chartModel.resetChartColorUpdateProperties(),t.redraw()},n.prototype.fillColor=function(n,t,i){var r=JSON.parse(i["minMax"]);t.model.rangeColorMapping=this.getRangeColorMapping(n[0],r);t.redraw();this.hideLoadingIndicator()},n.prototype.checkColorSettings=function(n){var t=this.chartModel.dataGroupBindedColumnInfo(),i=!ej.isNullOrUndefined(this.chartJson.ColorSets)&&this.chartJson.ColorSets.ColorSettingsList.some(function(n){return n.AdvancedColorSettings!==null});t.rowLength===0&&t.valueLength>0&&this.chartModel.isCustomColorSettingsApplicable(this.chartJson.ChartType)&&!this.chartModel.isCustomColorSettingsApplicable(n)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,this.dashboardDesigner.locale.alertWindowMesages.colorSettingsWarningMessage,IconType.information,AlertType.Alert,!1,""):this.isAdvanceColorSupported(this.chartJson.ChartType)&&!this.isAdvanceColorSupported(n)&&i&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,this.dashboardDesigner.locale.alertWindowMesages.colorSettingsAdvanceSettingsWarningMessage,IconType.information,AlertType.Alert,!1,"")},n.prototype.isAdvanceColorSupported=function(n){return n===ChartTypes.Bar.toString()||n===ChartTypes.Column.toString()},n.prototype.getRangeColorMapping=function(n,t){for(var v,h,y=[],i=[],r=0,c=1,f=1e-9,a=0;a<n.Ranges.length;a++){var l=a,e=this.getRangeColors(n.Ranges[l].PropertyColorPair),o=ej.isNullOrUndefined(n.Ranges[l].RangeLabel)?"":n.Ranges[l].RangeLabel,u=[n.Ranges[l].StartRange,n.Ranges[l].EndRange],s=[];ej.isNullOrUndefined(t)?s.push(494065645841247e-338,17976931348623157e292):(v=Object.keys(t[0]),s.push(Number(t[0][v[0]]),Number(t[0][v[1]])));switch(n.Ranges[l].MeasureCondition){case 0:i.push({StartRange:u[r]+f,EndRange:s[c]+f,Colors:e,LegendLabel:o,isLegendVisible:!0});break;case 1:i.push({StartRange:u[r],EndRange:s[c]+f,Colors:e,LegendLabel:o,isLegendVisible:!0});break;case 2:i.push({StartRange:s[r],EndRange:u[r]-f,Colors:e,LegendLabel:o,isLegendVisible:!0});break;case 3:i.push({StartRange:s[r],EndRange:u[r]+f,Colors:e,LegendLabel:o,isLegendVisible:!0});break;case 4:i.push({StartRange:u[r],EndRange:u[r],Colors:e,LegendLabel:o,isLegendVisible:!0});break;case 5:i.push({StartRange:s[r],EndRange:u[r]-f,Colors:e,LegendLabel:o,isLegendVisible:!0});i.push({StartRange:u[r]+f,EndRange:s[c]+f,Colors:e,LegendLabel:o,isLegendVisible:!1});break;case 6:i.push({StartRange:u[r],EndRange:u[c],Colors:e,LegendLabel:o,isLegendVisible:!0});break;case 7:i.push({StartRange:s[r],EndRange:u[r]-f,Colors:e,LegendLabel:o,isLegendVisible:!0});i.push({StartRange:u[c]+f,EndRange:s[c]+f,Colors:e,LegendLabel:o,isLegendVisible:!1})}}for(h=0;h<i.length;h++)y.push({start:i[h].StartRange,end:i[h].EndRange,legendName:i[h].LegendLabel,colors:i[h].Colors,isLegendVisible:i[h].isLegendVisible});return y},n.prototype.getRangeColors=function(n){for(var i=[],t=0;t<n.length;t++)if(n[t].WidgetProperties===0){n[t].RangeColor.IsGradient?i.push(n[t].RangeColor.StartColor,n[t].RangeColor.EndColor):i.push(n[t].RangeColor.StartColor);break}return i},n.prototype.renderColorSettings=function(n,t,i){var r={colorFields:this.colorFields,isBasicEnable:!0,isAdvanceEnable:this.isAdvanceColorSupported(this.chartModel.chartJson.ChartType)?this.chartModel.dataGroupBindedColumnInfo().valueLength>1?!1:!0:!1,columns:this.getColorFieldListName(),widgetInstance:this,datasetId:this.chartModel.dataGroupInfo.DatasetId,dataGroupInfo:this.chartModel.dataGroupInfo};this.colorCustomizationSettings.renderColorSettings(n,t,i,r)},n.prototype.getColorFieldListName=function(){for(var i,t=ej.isNullOrUndefined(this.chartJson.ColorSets)?(new ColorSets).ColorSettingsList:this.chartJson.ColorSets.ColorSettingsList,r=[],u=[],f=[],n=0;n<t.length;n++)i=this.getFieldName(t[n].SelectedColumn.UniqueColumnName),this.isColorSupportForText?this.isMeasure(t[n].SelectedColumn.UniqueColumnName)?u.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName}):f.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName}):r.push({DisplayName:i,UniqueColumnName:t[n].SelectedColumn.UniqueColumnName});return{measureFields:u,dimensionFields:f,columns:r}},n.prototype.isMeasure=function(n){var u=this.chartModel.dataGroupInfo,e=!1,i,t,f,o,r;if(!ej.isNullOrUndefined(u.Values)&&u.Values.length>0)for(i=u.Values,t=0;t<i.length;t++)for(f=0;f<i[t].Values.length;f++)if(o=i[t].Values,r=o.filter(function(t){return t.UniqueColumnName===n}),!ej.isNullOrUndefined(r)&&r.length>0){e=r[0].FieldType===FieldType[FieldType.Measures];break}return e},n.prototype.getFieldName=function(n){var u=this.chartModel.dataGroupInfo,e="",i,t,f,o,r;if(!ej.isNullOrUndefined(u.Values)&&u.Values.length>0)for(i=u.Values,t=0;t<i.length;t++)for(f=0;f<i[t].Values.length;f++)if(o=i[t].Values,r=o.filter(function(t){return t.UniqueColumnName===n}),!ej.isNullOrUndefined(r)&&r.length>0){e=r[0].DataField;break}return e},n.prototype.showLoadingIndicator=function(){this.chartModel.chartElement.find("#"+this.chartModel.designPanel.designId+"chartItem"+this.chartJson.UniqueName).ejWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){this.chartModel.chartElement.find("#"+this.chartModel.designPanel.designId+"chartItem"+this.chartJson.UniqueName).ejWaitingPopup("hide")},n.prototype.destroy=function(){this.unwireEvents()},n}();window.ej.createObject("ej.DashboardDesignerUtility.ChartProperties",InternalChartProperties,window);InternalChartReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.rootCss="e-chart-bar";this.pluginId="";this.itemName="Chart";this.isMasterByDefault=!1;this.menuSettingsIconVisible=!0;this.isOpenReport=!1;this.chartJson=null;this.chartItem=null;this.chartObj=null;this.dataGroupInfo={};this.chartProperties=null;this.propertyPanel=null;this.isHeaderVisible=!0;this.isControlMenuVisible=!1;this.isMaximizeEnable=!1;this.contentContainer=null;this.reportName=null;this.isDataEnabled=!1;this.dataConfiguration=null;this.chartElement=null;this.chartContent=null;this.multiplePropertionChart=!1;this.defaultSeries=!1;this.timerCollection=[];this.defaultColorPalette=["#77A7FB","#E57368","#FBCB43","#34B67A","#F1AB68","#6CC2D9","#195962","#E18878","#1AA27D","#BFAAC7","#89695e","#a5c77f","#f48fb1","#90caf9","#cc4452"];this.dataValues=null;this.isFromDraft=!1;this.chartProperties=new ej.DashboardDesignerUtility.ChartProperties(this);this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.Chart;this.isDataEnabled=!0;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration")}return n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.comparison,GroupId:"1475fcad-99eb-484d-a1af-369ded6937fb",Items:[{id:"cc349998-dd4b-4f7d-be36-f6a8111ee219",widgetName:"Bar",widgetDisplayName:n.itemPanel.widgetTitle.barChart,cssClass:"e-widgeticon e-reportdesigner-bar-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1' ><\/span><span class='path2' ><\/span><span class='path3' ><\/span><span class='path4'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.barChart+" Chart",description:n.itemPanel.widgetDescription.barChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"eea7416d-9391-4fcf-8887-8210fbfc89fe",widgetName:"Column",widgetDisplayName:n.itemPanel.widgetTitle.columnChart,cssClass:"e-widgeticon e-reportdesigner-column-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1' ><\/span><span class='path2' ><\/span><span class='path3' ><\/span><span class='path4'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.columnChart+" Chart",description:n.itemPanel.widgetDescription.columnChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"c24b1107-c86b-45fc-81d5-183e7cd5f7a3",widgetName:"Stacked Bar",widgetDisplayName:n.itemPanel.widgetTitle.stackedBar,cssClass:"e-widgeticon e-reportdesigner-stacked-bar-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span><span class='path4'><\/span><span class='path5'><\/span><span class='path6'><\/span><span class='path7'><\/span><span class='path8'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.stackedBar+" Chart",description:n.itemPanel.widgetDescription.stackedBarDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"05ba514a-2c00-4446-9917-0c8f5c51a16d",widgetName:"Stacked Column",widgetDisplayName:n.itemPanel.widgetTitle.stackedColumn,cssClass:"e-widgeticon e-reportdesigner-stacked-column-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span><span class='path4'><\/span><span class='path5'><\/span><span class='path6'><\/span><span class='path7'><\/span><span class='path8'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.stackedColumn+" Chart",description:n.itemPanel.widgetDescription.stackedColumnDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"98b72fe5-58df-4dfd-93c0-3d91f41f8d37",widgetName:"100% Stacked Bar",widgetDisplayName:n.itemPanel.widgetTitle.percentStackedBar,cssClass:"e-widgeticon e-reportdesigner-percent-stacked-bar-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span><span class='path4'><\/span><span class='path5'><\/span><span class='path6'><\/span><span class='path7'><\/span><span class='path8'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.percentStackedBar+" Chart",description:n.itemPanel.widgetDescription.percentStackedBarDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"118a4240-ceb6-4d33-9527-70d2f0932a4a",widgetName:"100% Stacked Column",widgetDisplayName:n.itemPanel.widgetTitle.percentStackedColumn,cssClass:"e-widgeticon e-reportdesigner-percent-stacked-column-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","comparison"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span><span class='path4'><\/span><span class='path5'><\/span><span class='path6'><\/span><span class='path7'><\/span><span class='path8'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.percentStackedColumn+" Chart",description:n.itemPanel.widgetDescription.percentStackedColumnDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}}]},{GroupName:n.itemPanel.groupItems.proportion,GroupId:"70c9a793-c397-49d7-a103-9832622b2a0a",Items:[{id:"5f14a998-59f1-43a6-b2cb-78b67543e5d3",widgetName:"Pie",widgetDisplayName:n.itemPanel.widgetTitle.pieChart,cssClass:"e-widgeticon e-reportdesigner-pie-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","proportion"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.pieChart+" Chart",description:n.itemPanel.widgetDescription.pieChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"a0a39990-aa4b-4f2c-9a7c-a15b2ba345ab",widgetName:"Doughnut",widgetDisplayName:n.itemPanel.widgetTitle.doughnutChart,cssClass:"e-widgeticon e-reportdesigner-doughnut-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","proportion"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.doughnutChart+" Chart",description:n.itemPanel.widgetDescription.doughnutChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"81f8c0e6-581e-4fcc-b5e2-ea69a01e997f",widgetName:"Pyramid",widgetDisplayName:n.itemPanel.widgetTitle.pyramidChart,cssClass:"e-widgeticon e-reportdesigner-pyramid-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","proportion"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path3'><\/span><span class='path2'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.pyramidChart+" Chart",description:n.itemPanel.widgetDescription.pyramidChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"68863a9e-1361-40ee-bc2b-8dbe019b0608",widgetName:"Funnel",widgetDisplayName:n.itemPanel.widgetTitle.funnelChart,cssClass:"e-widgeticon e-reportdesigner-funnel-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","proportion"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span><span class='path4'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.funnelChart+" Chart",description:n.itemPanel.widgetDescription.funnelChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},]},{GroupName:n.itemPanel.groupItems.distribution,GroupId:"3bd22cb7-55db-40c1-993c-c273b92852b7",Items:[{id:"1aa075-fbce-4590-982c-5026cf9a6aab",widgetName:"Area",widgetDisplayName:n.itemPanel.widgetTitle.areaChart,cssClass:"e-widgeticon e-reportdesigner-area-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],description:n.itemPanel.widgetDescription.areaChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq,widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.areaChart+" Chart",description:n.itemPanel.widgetDescription.areaChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"1ab492d3-e456-490c-aa73-f586988e0843",widgetName:"Stacked Area",widgetDisplayName:n.itemPanel.widgetTitle.stackedArea,cssClass:"e-widgeticon e-reportdesigner-stacked-area-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.stackedArea+" Chart",description:n.itemPanel.widgetDescription.stackedAreaDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"2d847c74-2dd3-46c3-8180-ef152a2022cc",widgetName:"100% Stacked Area",widgetDisplayName:n.itemPanel.widgetTitle.percentStackedArea,cssClass:"e-widgeticon e-reportdesigner-percent-stacked-area-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],description:n.itemPanel.widgetDescription.percentStackedAreaDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq,widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.percentStackedArea+" Chart",description:n.itemPanel.widgetDescription.percentStackedAreaDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"a59691b6-ede1-44df-8e8a-a38a7ac15573",widgetName:"Line",widgetDisplayName:n.itemPanel.widgetTitle.lineChart,cssClass:"e-widgeticon e-reportdesigner-line-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.lineChart+" Chart",description:n.itemPanel.widgetDescription.lineChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},{id:"67c0232a-d802-4d16-a472-42d5ee63097b",widgetName:"Spline",widgetDisplayName:n.itemPanel.widgetTitle.splineChart,cssClass:"e-widgeticon e-reportdesigner-spline-chart",widgetNameSpace:"ej.DashboardDesignerUtility.ChartItem",searchCategory:["chart","distribution"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.splineChart+" Chart",description:n.itemPanel.widgetDescription.splineChartDesc,dataRequirement:n.itemPanel.widgetDataRequirements.chartsDataReq}},]})},n.prototype.render=function(n){this.renderReportItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.chartItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.setReportItemJson(n)},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateChartItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(n){return this.onFieldDragDropped(n)},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.chartProperties.getContainerInstance()},n.prototype.refresh=function(){this.chartRefresh()},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.renderReportItem=function(n){try{this.chartJson.ChartType=n;this.chartJson.IsBasicChartType=this.isCartesianChartType(this.chartJson.ChartType)||this.isShapeChartType(this.chartJson.ChartType)?!0:!1;this.chartJson.CategoryGridLines=this.isPercentCharts(this.chartJson.ChartType)||this.isAreaCharts(this.chartJson.ChartType);var i=this.isDistributionType(this.chartJson.ChartType)?this.chartJson.ShowMarker:!1;this.chartJson.ShowValueLabels=this.isShapeChartType(this.chartJson.ChartType)?!0:this.chartJson.ShowValueLabels;this.chartJson.ShowLegend=this.isShapeChartType(this.chartJson.ChartType)?!1:this.chartJson.ShowLegend;this.renderChartItem();this.setChartType(n);this.chartProperties.updateMarkerVisibility(i);this.chartJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,this.getChartSubTypes())}catch(t){this.designPanel.logError({Source:this.chartJson.UniqueName,Error:t,Type:t.name})}},n.prototype.getChartJson=function(){var n=new ChartProperties;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.setReportItemJson=function(n){this.chartJson=this.chartProperties.chartJson=n},n.prototype.renderChartReportElement=function(n){this.isOpenReport=!0;try{ejDashboardDesigner.editManager.isPerformAction?this.chartJson=this.chartProperties.chartJson=$.extend(!0,{},n):(this.chartJson=this.chartProperties.chartJson=n,this.chartJson.ChartType=this.chartJson.ChartType==="SplineArea"?ChartTypes.SplineArea.toString():this.chartJson.ChartType);this.cellInfo={row:this.chartJson.ContainerSettings.Bounds.Row,column:this.chartJson.ContainerSettings.Bounds.Column,rowSpan:this.chartJson.ContainerSettings.Bounds.RowSpan,colSpan:this.chartJson.ContainerSettings.Bounds.ColumnSpan};this.isFromDraft=!0;this.renderChartItem();this.setChartType(this.chartJson.ChartType);this.chartProperties.updateMarkerVisibility(this.isDistributionType(this.chartJson.ChartType)?this.chartJson.ShowMarker:!1);ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.chartJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderChartItem=function(){this.chartElement=ej.buildTag("div.chartElement e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","background-color":"rgb(255, 255, 255)","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998"},{id:this.designPanel.designId+"chartElement"+this.chartJson.UniqueName});this.chartItem=ej.buildTag("div.chartitem","",{width:"100%",height:"100%",position:"relative","font-size":"10pt","background-color":"white"},{id:this.designPanel.designId+"chartItem"+this.chartJson.UniqueName});this.chartElement.append(this.chartItem);this.contentContainer.append(this.chartElement);this.chartItem.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designPanel.designId+"_designer_waiting_popup e-designer-loader"});this.controlContainer.data("widgetInstance",this)},n.prototype.setChartType=function(n){var t=this.isShapeChartType(this.chartJson.ChartType)?this.getProportionChartElement(this.chartJson):this.getCartesianChartElement(this.chartJson);t.series=this.getDefaultSeries(n);t.width="100%";t.height="100%";t.commonSeriesOptions.type=this.getChartType(n);this.chartItem.ejChart(t);this.chartObj=this.chartItem.data("ejChart");this.updateLegendAndAxisTitleVisibility(this.controlContainer.width(),this.controlContainer.height());this.chartJson.ShowValueLabelSuffix&&this.chartProperties.updateValueLabelSuffix(this.chartJson.ValueLabelSuffix)},n.prototype.getChartType=function(n){var t=null;switch(n){case"Column":t="column";break;case"Stacked Column":t="stackingcolumn";break;case"100% Stacked Column":t="stackingcolumn100";break;case"Bar":t="bar";break;case"Stacked Bar":t="stackingbar";break;case"100% Stacked Bar":t="stackingbar100";break;case"Line":t="line";break;case"Smooth Line":case"Spline":t="spline";break;case"Spline Area":t="splinearea";break;case"Pie":t="pie";break;case"Doughnut":t="doughnut";break;case"Pyramid":t="pyramid";break;case"Funnel":t="funnel";break;case"Area":t="area";break;case"Stacked Area":t="stackingarea";break;case"100% Stacked Area":t="stackingarea100";break;case"Scatter":t="scatter";break;case"Bubble":t="bubble";break;case"Polar":t="polar";break;case"Radar":t="radar";break;default:t="column"}return t},n.prototype.getCartesianChartElement=function(n){return{series:[],isResponsive:!0,primaryXAxis:{title:{font:{size:"10px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},text:n.Axis.CategoryAxis.Title,visible:n.Axis.CategoryAxis.ShowTitle,enableTrim:!0},font:{size:"10px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},visible:n.Axis!==undefined?n.Axis.CategoryAxis.IsEnabled:!0,labelRotation:n.Axis!==undefined?n.Axis.CategoryAxis.LabelRotation!=="None"?n.Axis.CategoryAxis.LabelRotation:0:0,labelIntersectAction:n.Axis!==undefined?n.Axis.CategoryAxis.LabelOverflowMode:"multipleRows",majorGridLines:{visible:n.CategoryGridLines},valueType:"Category"},primaryYAxis:{majorGridLines:{visible:n.PrimaryValueGridLines},title:{font:{size:"10px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},text:n.Axis.PrimaryValueAxis.Title,visible:n.Axis.PrimaryValueAxis.ShowTitle,enableTrim:!0},font:{size:"10px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},visible:n.Axis!==undefined?n.Axis.PrimaryValueAxis.IsEnabled:!0,labelFormat:this.isPercentCharts(this.chartJson.ChartType)?"{value}%":"{value}"},palette:this.defaultColorPalette,commonSeriesOptions:{enableAnimation:n.EnableAnimation,enableSmartLabels:!0,tooltip:{visible:!0},marker:{dataLabel:{font:{size:"9px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},textPosition:this.isPercentCharts(this.chartJson.ChartType)||this.isStackedType(this.chartJson.ChartType)?"middle":"top",horizontalTextAlignment:"middle",angle:n.ShowValueLabels?n.ValueLabelRotation!=="None"?n.ValueLabelRotation:0:0,visible:this.chartJson.ShowValueLabels,enableWrap:!0},shape:"circle",size:{height:6,width:6},enableSmartLabels:!0,labelPosition:this.isPercentCharts(this.chartJson.ChartType)?"inside":"outside",visible:n.ShowMarker}},showTooltip:!0,enableSmartLabels:!0,legend:{visible:n.ShowLegend,shape:"seriesType",position:ej.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,n.LegendPosition),alignment:"Center",font:{size:"12px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"}},toolTipInitialize:$.proxy(this.toolTipForChart,this),axesLabelRendering:$.proxy(this.chartAxisRender,this),legendItemClick:$.proxy(this.chartLegendItemClick,this)}},n.prototype.chartAxisRender=function(n){if(n.data.axis.valueType!=="Category"){var t=new MeasureFormatting;n.data.label.Text=ej.DashboardUtil.formattedText(n.data.label.Text,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,!0)}},n.prototype.getProportionChartElement=function(n){return{series:[],palette:this.defaultColorPalette,commonSeriesOptions:{enableAnimation:n.EnableAnimation,enableSmartLabels:!0,tooltip:{visible:!0},labelPosition:"outside",marker:{dataLabel:{font:{size:"9px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},textPosition:"top",horizontalTextAlignment:"middle",visible:this.chartJson.ShowValueLabels},shape:"circle",size:{height:6,width:6},visible:!1}},title:{font:{size:"13px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular"},visible:!0,textOverflow:"trim"},isResponsive:!0,enableSmartLabels:!0,showTooltip:!0,legend:{visible:n.ShowLegend,shape:"seriesType",position:ej.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Right),alignment:"center",font:{size:"12px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},toggleSeriesVisibility:!1},toolTipInitialize:$.proxy(this.toolTipForChart,this)}},n.prototype.toolTipForChart=function(n){var e=this.dataGroupBindedColumnInfo(),s=e.columnLength,h=e.valueLength,c=e.rowIndex,l=e.columnIndex,u=e.rowLength,i="&nbsp:&nbsp",r="<br/>",f=null,o=this.isShapeChartType(this.chartJson.ChartType),t=o?n.model._visibleSeries[n.data.seriesIndex].visiblePoints[n.data.pointIndex]:n.model._visibleSeries[n.data.seriesIndex]._visiblePoints[n.data.pointIndex];h>0&&s===0&&u===0?f=o?t.legendName+i+(ej.isNullOrUndefined(t.text)?t.y:t.text):n.model._visibleSeries[n.data.seriesIndex].legendName+i+(ej.isNullOrUndefined(t.text)?t.y:t.text):h>0&&s>0&&u===0?f=o?this.dataGroupInfo.Values[l].Values[0].DataField+i+t.legendName+r+n.model._visibleSeries[n.data.seriesIndex].name+i+(ej.isNullOrUndefined(t.text)?t.y:t.text):this.dataGroupInfo.Values[l].Values[0].DataField+i+t.x+r+n.model._visibleSeries[n.data.seriesIndex].legendName+i+(ej.isNullOrUndefined(t.text)?t.y:t.text):h>0&&s===0&&u>0?f=o?this.dataGroupInfo.Values[c].Values[0].DataField+i+n.model._visibleSeries[n.data.seriesIndex].name+r+t.legendName+i+(ej.isNullOrUndefined(t.text)?t.y:t.text):this.dataGroupInfo.Values[c].Values[0].DataField+i+n.model._visibleSeries[n.data.seriesIndex].rowValue+r+n.model._visibleSeries[n.data.seriesIndex].valueFieldColName+i+(ej.isNullOrUndefined(t.text)?t.y:t.text):h>0&&s>0&&u>0&&(f=o?this.dataGroupInfo.Values[c].Values[u-1].DataField+i+n.model._visibleSeries[n.data.seriesIndex].rowValue+r+this.dataGroupInfo.Values[l].Values[0].DataField+i+t.legendName+r+n.model._visibleSeries[n.data.seriesIndex].valueFieldColName+i+(ej.isNullOrUndefined(t.text)?t.y:t.text):this.dataGroupInfo.Values[c].Values[u-1].DataField+i+n.model._visibleSeries[n.data.seriesIndex].rowValue+r+this.dataGroupInfo.Values[l].Values[0].DataField+i+n.model._visibleSeries[n.data.seriesIndex]._visiblePoints[n.data.pointIndex].x+r+n.model._visibleSeries[n.data.seriesIndex].valueFieldColName+i+(ej.isNullOrUndefined(t.text)?t.y:t.text));ej.isNullOrUndefined(f)||(n.data.currentText=f)},n.prototype.getDefaultSeries=function(n){var i,r,u,t,f;this.defaultSeries=!0;var s=this.isStackedType(n)?2:1,h=this.isShapeChartType(n),c=this.chartJson.ChartType===ChartTypes.StackedArea.toString()||this.chartJson.ChartType===ChartTypes.Area.toString()||this.chartJson.ChartType===ChartTypes.PercentStackedArea.toString()||this.chartJson.ChartType===ChartTypes.SplineArea.toString()?.5:1,o=this.isDistributionType(this.chartJson.ChartType),e=[];for(i=0;i<s;i++){if(r=[],u=0,this.isPercentCharts(this.chartJson.ChartType))for(t=3;t<=6;t++)f={x:t+2,y:i===1?t:10-t,formattedtext:t.toString(),text:t.toString(),totalValue:10},r.push(f);else for(t=1;t<=6;t++)u+=o?Math.floor(Math.random()*50)+1:t,f={x:h?t:t,y:o?Math.floor(Math.random()*50)+1:t,formattedtext:t.toString(),text:t.toString(),totalValue:u},r.push(f);e.push({points:r,name:"series"+i,opacity:c,total:u})}return this.isPercentCharts(this.chartJson.ChartType)?this.getPercentageValueForSeriesPoints(e):e},n.prototype.chartRefresh=function(){this.chartObj.redraw()},n.prototype.chartLegendItemClick=function(n){var u,t,c,f,e,r,i;if(!ej.isNullOrUndefined(n)){var h=n.data.legendItem.LegendItem,o=n.model.series,s=o[h.SeriesIndex];if(this.isPercentCharts(this.chartJson.ChartType))for(u=s.points,t=0;t<u.length;t++)if(c=s.points[t].x,s.points[t].y!==0)for(f=h.visibility==="visible"?u[t].totalValue-Math.abs(u[t].y):u[t].totalValue+Math.abs(u[t].y),e=0;e<o.length;e++)for(r=o[e].points,i=0;i<r.length;i++)r[i].x===c&&r[i].y!==0&&(r[i].totalValue=f,r[i].text=this.chartJson.ShowValueLabelSuffix?this.chartProperties.getPercetageValueForPoints(r[i],f)+this.chartJson.ValueLabelSuffix:this.chartProperties.getPercetageValueForPoints(r[i],f));else continue}},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.chartJson,CommandAction.ItemMove,"updatePosition","e-chart-bar")},n.prototype.updateWidgetSize=function(n){if(this.cellInfo=n,this.designPanel.updateWidgetItem(n,this.controlContainer,this.chartJson,CommandAction.ItemResize,"updateSize","e-chart-bar"),this.contentContainer.find(".e-dbrd-control-error").length===1)this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo);else if(this.multiplePropertionChart){var t=this.getSeriesForRenderedCharts();t.length>0&&this.renderMultipleProportionCharts(t)}else this.updateLegendAndAxisTitleVisibility(this.controlContainer.width(),this.controlContainer.height()),this.chartRefresh()},n.prototype.updateLegendAndAxisTitleVisibility=function(n,t){if(!ej.isNullOrUndefined(this.chartObj)){var i=150;this.chartObj.model.primaryYAxis.title.visible=n/this.chartObj.model.yZoomFactor>i?this.chartJson.Axis.PrimaryValueAxis.ShowTitle:!1;this.chartObj.model.primaryXAxis.title.visible=t/this.chartObj.model.yZoomFactor>i?this.chartJson.Axis.CategoryAxis.ShowTitle:!1;this.chartObj.model.legend.visible=t/this.chartObj.model.yZoomFactor>i?this.chartJson.ShowLegend:!1;this.chartRefresh()}},n.prototype.updateItemSize=function(n){if(this.cellInfo=n,this.designPanel.updateWidgetItem(n,this.controlContainer,this.chartJson,CommandAction.ItemResize,"updateItemSize","e-chart-bar"),this.contentContainer.find(".e-dbrd-control-error").length===1)this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo);else if(this.multiplePropertionChart){var t=this.getSeriesForRenderedCharts();t.length>0&&this.renderMultipleProportionCharts(t)}else this.updateLegendAndAxisTitleVisibility(this.controlContainer.width(),this.controlContainer.height()),this.chartRefresh()},n.prototype.getSeriesForRenderedCharts=function(){for(var t,i=this.chartElement.find(".e-datavisualization-chart"),r=[],n=0;n<i.length;n++)t=$(i[n]).data("ejChart"),ej.isNullOrUndefined(t)||r.push(t.model.series[0]);return r},n.prototype.updateReportItemDataGroupInfo=function(n){var i;if(this.dataGroupInfo=n,this.isShapeChartType(this.chartJson.ChartType)||this.chartJson.ChartType===ChartTypes.Bar.toString()||this.chartJson.ChartType===ChartTypes.StackedBar.toString()){var u=this.dataGroupBindedColumnInfo(),t=this.getBindedColumns(),r=n.Values[u.columnIndex].Values;if(n.Values[u.columnIndex].Name==="Column"&&this.isShapeChartType(this.chartJson.ChartType))for(i=0;i<r.length;i++)(ej.isNullOrUndefined(r[i].FilterInfo)||!ej.isNullOrUndefined(r[i].FilterInfo.DimensionFilterInfo)&&ej.isNullOrUndefined(r[i].FilterInfo.DimensionFilterInfo.TopNFilterInfo))&&!r[i].IsShowAllRecords&&n.Values[0].Values.length>0?(r[i].FilterInfo={},r[i].FilterInfo.DimensionFilterInfo={IsAllowFilteringApplied:!1,IsConditionFilteringApplied:!1,IsTopNFilteringApplied:!0,AllowFilterInfo:{IsCheckAll:!0,IsInclude:!0,FilterValues:null},ConditionFilterInfo:{ColumnName:r[i].Field,SummaryType:"Sum",ConditionSummaryType:"Equals",Values:["0"]},TopNFilterInfo:n.Values[0].Values.length>0?{Mode:"Top",NoOfRecords:"5",ColumnName:n.Values[u.valueIndex].Values.length>0?n.Values[u.valueIndex].Values[0].Field:r[i].Field,ColumnId:n.Values[u.valueIndex].Values.length>0?n.Values[u.valueIndex].Values[0].DataId:r[i].DataId,SummaryType:n.Values[u.valueIndex].Values.length>0?n.Values[u.valueIndex].Values[0].SummaryType:"Count",IsBasedOnDateAndTimeField:!1,DateFormat:2}:null}):ej.isNullOrUndefined(r[i].FilterInfo)||ej.isNullOrUndefined(r[i].FilterInfo.DimensionFilterInfo)||ej.isNullOrUndefined(r[i].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||n.Values[0].Values.length!==0||(r[i].FilterInfo=null);this.isShapeChartType(this.chartJson.ChartType)&&!ej.isNullOrUndefined(t.columnValue)&&!ej.isNullOrUndefined(t.yValueColumns)&&t.columnValue.length>0&&t.yValueColumns.length>0&&ej.isNullOrUndefined(t.columnValue[0].CustomSorting)&&(t.columnValue[0].CustomSorting={CustomSortType:CustomSortType.Field,CustomSortOrder:CustomSortOrder.Descending,FieldName:t.yValueColumns[0].Field,FieldId:t.yValueColumns[0].DataId,SummaryType:t.yValueColumns[0].SummaryType});(this.chartJson.ChartType===ChartTypes.Bar.toString()||this.chartJson.ChartType===ChartTypes.StackedBar.toString())&&!ej.isNullOrUndefined(t.columnValue)&&!ej.isNullOrUndefined(t.yValueColumns)&&t.columnValue.length>0&&t.yValueColumns.length>0&&ej.isNullOrUndefined(t.columnValue[0].CustomSorting)&&(t.columnValue[0].CustomSorting={CustomSortType:CustomSortType.Field,CustomSortOrder:CustomSortOrder.Ascending,FieldName:t.yValueColumns[0].Field,FieldId:t.yValueColumns[0].DataId,SummaryType:t.yValueColumns[0].SummaryType})}},n.prototype.isFieldValid=function(n,t,i){return!(t===CategoryType[CategoryType.Non_Numeric]&&(i==="Column"||i==="Row")&&n.toLowerCase()==="true")},n.prototype.updateReportItemData=function(n){var s,h,u,o,c;if(this.dataValues=n,this.contentContainer.find(".e-dbrd-control-error").remove(),this.contentContainer.css({display:"block"}),this.chartJson.IsEnableDrillDown=this.dataGroupBindedColumnInfo().columnLength>1?!0:!1,this.chartElement.show(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none"),ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.chartJson,this.dataGroupInfo),ej.isNullOrUndefined(n.Error)||n.Error)ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo);else{if(s=this.dataGroupInfo.Values.length>1?this.dataGroupInfo.Values[0].Values.length:0,h=this.dataGroupInfo.Values.length>1?this.dataGroupInfo.Values[1].Values.length:0,this.chartProperties.updatePropertyItems(s,h),n.noDataAvailable){this.chartElement.hide();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block");return}var i=this.dataGroupBindedColumnInfo(),f=this.isTrendLineSupportChartType(this.chartJson.ChartType)&&i.rowLength===0&&!this.chartJson.IsEnableDrillDown&&i.valueLength>0&&i.columnLength>0,e=i.valueLength!==0&&i.rowLength===0&&this.isCustomColorSettingsApplicable(this.chartJson.ChartType);if(n.widgetData.Data.length>0){var t=[],l=this.chartJson.ChartType===ChartTypes.StackedArea.toString()||this.chartJson.ChartType===ChartTypes.Area.toString()||this.chartJson.ChartType===ChartTypes.PercentStackedArea.toString()||this.chartJson.ChartType===ChartTypes.SplineArea.toString()?.5:1,a=function(i){var u=JSON.parse(n.widgetData.Data[i]),f;u.opacity=l;ej.isNullOrUndefined(r.chartJson.ColorPaletteModel)||r.isShapeChartType(r.chartJson.ChartType)||(f=r.chartJson.ColorPaletteModel.filter(function(n){return n.Id===u.id&&n.Name===u.legendName}),ej.isNullOrUndefined(f)&&f.length===1&&(u.fill=f[0].Value));t.push(u)},r=this;for(u=0;u<n.widgetData.Data.length;u++)a(u);t.length>0&&(this.defaultSeries=!1,f&&this.updateTrendLineToSeries(this.chartJson.TrendLineSettings,t));o=JSON.parse(n.columnBindings);c=JSON.parse(n.data);this.isShapeChartType(this.chartJson.ChartType)?this.isShapeChartType(this.chartJson.ChartType)&&t.length===1?(this.multiplePropertionChart=!1,this.removeAllProportionChartElement(),this.chartObj.model.series=t,this.chartObj.redraw()):this.isShapeChartType(this.chartJson.ChartType)&&t.length>1&&this.renderMultipleProportionCharts(t):(this.chartObj.model.series=this.isPercentCharts(this.chartJson.ChartType)?this.getPercentageValueForSeriesPoints(t):t,this.updateAxisTitle(o),this.chartObj.redraw());this.updateDisplayColumns(JSON.parse(n.columnBindings));this.chartProperties.updateDataGroupPropertyVisibility(this.dataGroupBindedColumnInfo().valueLength>0?!0:!1,e?!1:!0);this.updateCustomLegendSettingsValue(o,c);this.isShapeChartType(this.chartJson.ChartType)?this.updateSeriesColorPalette():i.rowLength>0?ej.isNullOrUndefined(this.chartJson.ColorSets)||(this.chartJson.ColorSets.ColorSettingsList=[],this.resetChartColorUpdateProperties(),this.updateSeriesColorPalette()):(this.updateCustomColorSettings(),this.isCustomColorSettingsApplicable(this.chartJson.ChartType)&&!ej.isNullOrUndefined(this.chartJson.ColorSets)&&this.chartJson.ColorSets.ColorSettingsList.length>0&&this.chartProperties.updateColorCustomInfo(this.chartJson.ColorSets.ColorSettingsList))}else(n.widgetData.Data.length===0||n.columnBindings==="{}")&&(this.isShapeChartType(this.chartJson.ChartType)&&(this.multiplePropertionChart=!1,this.removeAllProportionChartElement()),this.chartObj.model.series=this.getDefaultSeries(this.chartJson.ChartType),this.resetChartColorUpdateProperties(),this.chartJson.ColorSets=new ColorSets,this.chartObj.option("palette",this.defaultColorPalette),this.isShapeChartType(this.chartJson.ChartType)||this.updateAxisTitle(),this.chartObj.redraw(),this.updateDefaultJsonProperties(),this.chartProperties.updateDataGroupPropertyVisibility(this.dataGroupBindedColumnInfo().valueLength>0?!0:!1,e?!1:!0));this.chartProperties.updateValueLabelSuffix(this.chartJson.ValueLabelSuffix);ej.DashboardUtil.updateAction("Chart","Link","Link");this.chartProperties.setPropertyElement("ColorSettings","ColorSettings",this.chartJson.ColorSets);ej.isNullOrUndefined(this.designer.element.find($("#"+this.designPanel.designId+"_trendline_grid_col")).data("ejGrid"))||this.designer.element.find($("#"+this.designPanel.designId+"_trendline_grid_col")).data("ejGrid").setModel({dataSource:this.chartJson.TrendLineSettings});this.propertyPanel.updateCategoryVisibility("Chart","Trendline",f);this.propertyPanel.updateItemVisibility("Chart","Trendline","Trendline",f);this.propertyPanel.updateCategoryVisibility("Chart","ColorSettings",e);this.isFromDraft=!1;this.isOpenReport=!1}},n.prototype.resetChartColorUpdateProperties=function(){this.chartObj.model.legend.mode="series";this.chartObj.model.legend.enableMultiRange=!1;this.chartObj.model.legend.shape="seriesType";this.chartObj.model.rangeColorMapping=[]},n.prototype.updateTrendLineToSeries=function(n,t){for(var r=function(i){for(var e,f=[],u=n.filter(function(n){return n.UniqueName===t[i].id}),r=0;r<u.length;r++)e={fill:u[r].LineColor,polynomialOrder:u[r].Order,visibility:u[r].LineVisible?"visible":"",type:u[r].LineType,name:u[r].CustomName,dashArray:ejDashboardDesigner.getInstance("TrendLineWindow").getLineStyle(u[r].LineStyle)},f.push(e);t[i].trendlines=f},i=0;i<t.length;i++)r(i)},n.prototype.getPercentageValueForSeriesPoints=function(n){for(var r,t,i=0;i<n.length;i++)for(r=n[i].points,t=0;t<r.length;t++)this.defaultSeries?n[i].points[t].formattedtext=n[i].points[t].text=this.chartProperties.getPercetageValueForPoints(r[t],r[t].totalValue):n[i].points[t].text=this.chartProperties.getPercetageValueForPoints(r[t],r[t].totalValue);return n},n.prototype.updateDefaultJsonProperties=function(){this.chartJson.CustomLegendInfo.SingleValues=[];this.chartJson.CustomLegendInfo.GroupValues.Series=[];this.chartJson.CustomLegendInfo.GroupValues.Values=[];this.chartJson.ColorPalette=this.defaultColorPalette;this.chartJson.ColorPaletteModel=[];this.chartJson.IsDefaultColorPalette=!0;this.chartJson.IsCustomLegend=!1;this.chartJson.TrendLineSettings=[];this.chartJson.ColorSets=new ColorSets},n.prototype.updateDisplayColumns=function(n){var r=[],i,t;if(n)for(i=Object.keys(n),t=0;t<i.length;t++)r.push({DisplayName:n[i[t]],UniqueName:i[t],IsEdited:!1});this.chartJson.DisplayNames=r},n.prototype.renderMultipleProportionCharts=function(n){ejDashboardDesigner.getInstance("DesignPanel").showLoadingIndicator(this.controlContainer);this.multiplePropertionChart?(this.removeAllProportionChartElement(),this.chartItem.remove()):this.chartObj.destroy();this.multiplePropertionChart=!0;this.chartContent=ej.buildTag("div","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"});this.chartElement.append(this.chartContent);this.chartItem.remove();var t=this.getSizeForProportionCharts(this.chartContent,n.length);this.createMultipleProportionCharts(n,t,this.getChartType(this.chartJson.ChartType));this.addScrollerForMultipleCharts(this.chartElement)},n.prototype.addScrollerForMultipleCharts=function(n){var t=this;setTimeout(function(){n.data("ejScroller")&&n.ejScroller("destroy");n.ejScroller({width:n.width(),height:n.height(),autoHide:!0,scrollerSize:9,buttonSize:14,cssClass:"e-dbrd-designer-scroller e-dbrd-control"});t.chartProperties.updateValueLabelSuffix(t.chartJson.ValueLabelSuffix);t.chartProperties.updateDefaultPaletteVisibility(t.chartJson.IsDefaultColorPalette);ejDashboardDesigner.getInstance("DesignPanel").hideLoadingIndicator(t.controlContainer)},0)},n.prototype.getSizeForProportionCharts=function(n,t){var o=0,f=1,s=10,h=15,i=1,r=1,c=t,u=null,e=null,l=$(n).width()-s;for(i=Math.round(l/c),(i>h||i<3)&&(i=10);;){if(u=l/i-s,e=u,r=Math.ceil(c/i),i<=f){i=1;break}if(u<200){i-=f;continue}if(($(n).height()-e*r)*(100/$(n).height())>h){i-=f;continue}break}return r<=o&&(r=1),i<=o&&(i=1),{height:e,width:u}},n.prototype.createMultipleProportionCharts=function(n,t,i){for(var f,e=this,r=this,u=0;u<n.length;u++)f="timer"+u,ej.isNullOrUndefined(this.timerCollection[f])||this.clearTimers(this.timerCollection[f]),this.timerCollection[f]=setTimeout(function(u){var o=$("<div>").attr({id:e.designPanel.designId+"series"+e.chartJson.UniqueName+u}).css({width:t.width,height:t.height-20,float:"left","margin-left":"10px"}),f,s;r.chartContent.append(o);f=r.getProportionChartElement(r.chartJson);f.commonSeriesOptions.type=i;f.series=[n[u]];f.title.responsiveVisibility=!0;ej.isNullOrUndefined(n[u].title)?(f.title.visible=!1,f.title.responsiveVisibility=!1):f.title.text=n[u].title;$(o).ejChart(f);s=$(o).data("ejChart");r.chartProperties.updateCustomLegendValuesToChartObj(s)},0,u)},n.prototype.clearTimers=function(n){clearTimeout(n);n=null},n.prototype.removeAllProportionChartElement=function(){var t,n,i;if(!ej.isNullOrUndefined(this.chartContent)){for(ej.isNullOrUndefined(this.chartElement.data("ejScroller"))||this.chartElement.ejScroller("destroy"),t=this.chartElement.find(".e-datavisualization-chart"),n=0;n<t.length;n++)i=$(t[n]).data("ejChart"),i.destroy();this.chartElement.remove();this.renderChartItem();this.multiplePropertionChart||this.setChartType(this.chartJson.ChartType)}},n.prototype.updateAxisTitle=function(n){var u=this.dataGroupBindedColumnInfo(),i=u.valueLength,f=u.valueIndex,e=u.columnIndex,t,r;i>0&&this.dataGroupInfo.Values[f].Values.length>0?(t=this.dataGroupInfo.Values[e].Values,r=n[this.dataGroupInfo.Values[f].Values[0].UniqueColumnName],this.isFromDraft?(this.chartProperties.isCategoryAxisTitleChanged=t.length>0&&t[0].DataField!==this.chartJson.Axis.CategoryAxis.Title,this.chartProperties.isPrimaryAxisTitleChanged=i!==0&&r!==this.chartJson.Axis.PrimaryValueAxis.Title?i===1?!0:this.chartJson.Axis.PrimaryValueAxis.Title!=="Values"?!0:!1:!1):(t.length===1||t.length===1&&this.chartJson.Axis.CategoryAxis.Title===""||t.length>1?this.categoryAxisTitleUpdateWithDefaultValue(t):t.length===0&&(this.chartObj.model.primaryXAxis.title.text=this.chartJson.Axis.CategoryAxis.Title="",this.chartObj.model.primaryXAxis.title.visible=!1,this.chartProperties.isCategoryAxisTitleChanged=!1),i===1||i>0&&this.chartObj.model.primaryYAxis.title.text===""?this.chartProperties.isPrimaryAxisTitleChanged||(this.chartObj.model.primaryYAxis.title.text=this.chartJson.Axis.PrimaryValueAxis.Title=r):(i>1&&this.chartJson.Axis.PrimaryValueAxis.Title===r||i>1&&this.chartObj.model.primaryYAxis.title.text==="")&&(this.chartProperties.isPrimaryAxisTitleChanged||(this.chartObj.model.primaryYAxis.title.text=this.chartJson.Axis.PrimaryValueAxis.Title="Values"))),this.chartProperties.setPropertyElement("Axis","CategoryAxisTitleValue",this.chartJson.Axis.CategoryAxis.Title),this.chartProperties.setPropertyElement("Axis","PrimaryAxisTitleValue",this.chartJson.Axis.PrimaryValueAxis.Title)):(this.chartObj.model.primaryYAxis.title.text=this.chartJson.Axis.PrimaryValueAxis.Title="",this.chartProperties.setPropertyElement("Axis","PrimaryAxisTitleValue",this.chartJson.Axis.PrimaryValueAxis.Title),this.chartObj.model.primaryXAxis.title.text=this.chartJson.Axis.CategoryAxis.Title="",this.chartProperties.setPropertyElement("Axis","CategoryAxisTitleValue",this.chartJson.Axis.CategoryAxis.Title),this.chartProperties.isCategoryAxisTitleChanged=!1,this.chartProperties.isPrimaryAxisTitleChanged=!1)},n.prototype.categoryAxisTitleUpdateWithDefaultValue=function(n){this.chartProperties.isCategoryAxisTitleChanged||(this.chartObj.model.primaryXAxis.title.text=this.chartJson.Axis.CategoryAxis.Title=n[0].DataField);this.chartObj.model.primaryXAxis.title.visible=this.chartJson.Axis.CategoryAxis.IsEnabled&&this.chartJson.Axis.CategoryAxis.ShowTitle;this.propertyPanel.updateItemVisibility("Chart","Axis","CategoryAxisTitleValue",!this.chartJson.IsEnableDrillDown)},n.prototype.dataGroupBindedColumnInfo=function(){var t=this.dataGroupInfo,i=0,r=0,u=0,f=0,e=0,o=0,n;if(!ej.isNullOrUndefined(t.Values))for(n=0;n<t.Values.length;n++)t.Values[n].Name==="Column"?(i=t.Values[n].Values.length,e=n):t.Values[n].Name==="Row"?(o=t.Values[n].Values.length,u=n):(r=t.Values[n].Values.length,f=n);return{columnLength:i,valueLength:r,rowLength:o,rowIndex:u,valueIndex:f,columnIndex:e}},n.prototype.getBindedColumns=function(){var i=[],r=[],u=[],n,t;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values))for(n=0;n<this.dataGroupInfo.Values.length;n++)t=this.getDataCategoriesInfo(),this.dataGroupInfo.Values[n].Name===t[0].Name?i=this.dataGroupInfo.Values[n].Values:this.dataGroupInfo.Values[n].Name===t[1].Name?r=this.dataGroupInfo.Values[n].Values:this.dataGroupInfo.Values[n].Name===t[2].Name&&(u=this.dataGroupInfo.Values[n].Values);return{yValueColumns:i,columnValue:r,rowColumns:u}},n.prototype.updateCustomLegendSettingsValue=function(n,t){var i=this.dataGroupBindedColumnInfo();i.valueLength>0&&i.rowLength===0||this.isShapeChartType(this.chartJson.ChartType)?(this.chartJson.CustomLegendInfo.GroupValues.Values=this.chartJson.CustomLegendInfo.GroupValues.Series.length>0?[]:this.chartJson.CustomLegendInfo.GroupValues.Values,this.isShapeChartType(this.chartJson.ChartType)?this.isShapeChartType(this.chartJson.ChartType)&&i.valueLength>0&&i.columnLength>0?this.bindProportionChartColumnValueToLegendInfo(t,n):this.isShapeChartType(this.chartJson.ChartType)&&i.valueLength>0&&i.columnLength===0&&this.bindProportionChartMeasuerValueToLegendInfo(t,n):this.bindChartLegendsToLegendInfo(this.chartObj,"Values"),this.chartJson.CustomLegendInfo.SingleValues=[],this.chartJson.CustomLegendInfo.GroupValues.Series=[]):!this.isShapeChartType(this.chartJson.ChartType)&&i.valueLength>0&&i.rowLength>0&&(this.bindChartLegendsToLegendInfo(this.chartObj,"SingleValues"),this.appendGroupInfoForCustomLegendSeries(n,t));this.multiplePropertionChart||this.chartProperties.updateCustomLegendValuesToChartObj(this.chartObj)},n.prototype.bindProportionChartMeasuerValueToLegendInfo=function(n,t){for(var o,u,f,l,h,e,p,w=this.dataGroupBindedColumnInfo(),c=this.dataGroupInfo.Values[w.valueIndex].Values,i=[],a=[],s=[],v=[],r=this.getLegendCategory("Values"),y=0;y<n.length;y++)for(o=0;o<c.length;o++)i.indexOf(t[c[o].UniqueColumnName])===-1&&i.push({Name:t[c[o].UniqueColumnName],Id:c[o].UniqueColumnName});if(r.length>0){for(u=0;u<r.length;u++)for(f=0;f<i.length;f++)i[f].Id===r[u].Id&&s.indexOf(u)===-1&&(i[f].Name===r[u].Name?s.push(u):(r[u].Name=i[f].Name,r[u].Value=r[u].IsModified?r[u].Value:i[f].Name,s.push(u)));s.length>0?this.removedItemsFromLegendSettings(s,r):r=[]}for(l=0;l<r.length;l++)v.push(r[l].Id);for(h=0;h<i.length;h++)v.indexOf(i[h].Id)===-1&&a.push(i[h].Id);for(e=0;e<i.length;e++)a.indexOf(i[e].Id)!==-1&&(p={Name:i[e].Name,Value:i[e].Name,IsModified:!1,Id:i[e].Id},r[r.length]=p);this.chartJson.CustomLegendInfo.GroupValues.Values=r},n.prototype.bindProportionChartColumnValueToLegendInfo=function(n){for(var r,s,h,e,u,v,y=this.dataGroupBindedColumnInfo(),c=this.dataGroupInfo.Values[y.columnIndex].Values,t=[],l=[],o=[],a=[],i=this.getLegendCategory("Values"),f=0;f<n.length;f++)ej.isNullOrUndefined(n[f][c[0].UniqueColumnName])||t.indexOf(n[f][c[0].UniqueColumnName])!==-1||t.push(n[f][c[0].UniqueColumnName].toString());if(i.length>0){for(r=0;r<i.length;r++)for(s=0;s<t.length;s++)t[s]===i[r].Name&&o.indexOf(r)===-1&&o.push(r);o.length>0?this.removedItemsFromLegendSettings(o,i):i=[]}for(h=0;h<i.length;h++)a.push(i[h].Name);for(e=0;e<t.length;e++)a.indexOf(t[e])===-1&&l.push(t[e]);for(u=0;u<t.length;u++)l.indexOf(t[u])!==-1&&(v={Name:t[u],Value:t[u],IsModified:!1,Id:"None"},i[i.length]=v);this.chartJson.CustomLegendInfo.GroupValues.Values=i},n.prototype.bindChartLegendsToLegendInfo=function(n,t){var u=this.getLegendCategory(t),f=[],r,e,i,o;if(u.length>0)if(t==="SingleValues")for(r=0;r<u.length;r++)for(i=0;i<n.model.series.length;i++)n.model.series[i].legendName===u[r].Name&&u[r].IsModified&&f.indexOf(n.model.series[i].legendName)===-1&&f.push(n.model.series[i].legendName);else if(t==="Values")for(r=0;r<u.length;r++)for(i=0;i<n.model.series.length;i++)n.model.series[i].id===u[r].Id&&u[r].IsModified&&f.indexOf(n.model.series[i].id)===-1&&f.push(n.model.series[i].id);for(e=[],i=0;i<n.model.series.length;i++)o={Name:n.model.series[i].legendName,Value:this.getModifiedValusForLegend(u,n.model.series[i],f,t),IsModified:t==="Values"?f.indexOf(n.model.series[i].id)>-1:f.indexOf(n.model.series[i].legendName)>-1,Id:n.model.series[i].id},e.push(o);t==="Values"?this.chartJson.CustomLegendInfo.GroupValues.Values=e:t==="SingleValues"&&(this.chartJson.CustomLegendInfo.SingleValues=e)},n.prototype.getModifiedValusForLegend=function(n,t,i,r){for(var f=t.legendName,u=0;u<n.length;u++)if(r!=="Values"?i.indexOf(n[u].Name)>-1&&n[u].Name===t.legendName:i.indexOf(n[u].Id)>-1&&n[u].Id===t.id){f=n[u].Value;break}return f},n.prototype.removedItemsFromLegendSettings=function(n,t){for(var i,u,e,o=t.length,r=[],f=0;f<n.length;f++)for(i=0;i<o;i++)n[f]!==i&&n.indexOf(i)===-1&&r.indexOf(i)===-1&&r.push(i);for(u=0;u<r.length;u++)e=t[r[u]],t.splice(t.indexOf(e),1)},n.prototype.getLegendCategory=function(n){var t="";switch(n){case"Values":t=this.chartJson.CustomLegendInfo.GroupValues.Values;break;case"SingleValues":t=this.chartJson.CustomLegendInfo.SingleValues;break;case"GroupSeries":t=this.chartJson.CustomLegendInfo.GroupValues.Series}return t},n.prototype.appendGroupInfoForCustomLegendSeries=function(n,t){this.chartJson.CustomLegendInfo.GroupValues.Values=this.chartJson.CustomLegendInfo.GroupValues.Series.length===0?[]:this.chartJson.CustomLegendInfo.GroupValues.Values;var i=this.dataGroupBindedColumnInfo(),r=this.dataGroupInfo.Values[i.valueIndex].Values,u=this.dataGroupInfo.Values[i.rowIndex].Values;this.addLegendItemForGroupValues(n,t,r);this.addLegendItemForGroupSeries(n,t,u)},n.prototype.addLegendItemForGroupValues=function(n,t,i){for(var s,r,h,e=this.getLegendCategory("Values"),o=[],u=[],f=0;f<i.length;f++)u.indexOf(n[i[f].UniqueColumnName])===-1&&u.push({legendName:n[i[f].UniqueColumnName],id:i[f].UniqueColumnName});for(f=0;f<e.length;f++)for(r=0;r<u.length;r++)u[r].id===e[f].Id&&e[f].IsModified&&o.indexOf(u[r].id)===-1&&o.push(u[r].id);for(s=[],r=0;r<u.length;r++)h={Name:u[r].legendName,Value:this.getModifiedValusForLegend(e,u[r],o,"Values"),IsModified:o.indexOf(u.id)>-1,Id:u[r].id},s.push(h);this.chartJson.CustomLegendInfo.GroupValues.Values=s},n.prototype.addLegendItemForGroupSeries=function(n,t,i){for(var f,o,c,r,a,s=[],h=this.getLegendCategory("GroupSeries"),l=[],u=[],e=0;e<t.length;e++)for(f=0;f<i.length;f++)l.indexOf(t[e][i[f].UniqueColumnName])===-1&&(u.push({legendName:t[e][i[f].UniqueColumnName]}),l.push(t[e][i[f].UniqueColumnName]));for(o=0;o<h.length;o++)for(r=0;r<u.length;r++)u[r].legendName===h[o].Name&&h[o].IsModified&&s.indexOf(u[r].legendName)===-1&&s.push(u[r].legendName);for(c=[],r=0;r<u.length;r++)a={Name:u[r].legendName,Value:this.getModifiedValusForLegend(h,u[r],s,"Series"),IsModified:s.indexOf(u[r].legendName)>-1,Id:"None"},c.push(a);this.chartJson.CustomLegendInfo.GroupValues.Series=c},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n=this.chartJson.ChartType==="Bubble"?[{Name:"YValue",DisplayName:"Y Value(s)",CategoryType:CategoryType.Numeric},{Name:"Size",CategoryType:CategoryType.Numeric},{Name:"XValue",DisplayName:"X Value(s)",CategoryType:CategoryType.Numeric}]:[{Name:"YValue",DisplayName:"Value(s)",CategoryType:CategoryType.Numeric}],n.push({Name:"Column",DisplayName:"Column(s)",CategoryType:CategoryType.Non_Numeric}),n.push({Name:"Row",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}),n},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions"}),n},n.prototype.updateSeriesColorPalette=function(){var u=this.dataGroupBindedColumnInfo(),i=[],r=[],n,f,t,e;if(this.isCartesianChartType(this.chartJson.ChartType)){for(u.rowLength>0?i=this.getLegendCategory("SingleValues"):u.valueLength>0?i=this.getLegendCategory("Values"):this.chartJson.ColorPaletteModel=[],n=0;n<i.length;n++)f=!ej.isNullOrUndefined(this.chartJson.ColorPaletteModel[n])&&!ej.isNullOrUndefined(this.chartJson.ColorPaletteModel[n].Value)?this.chartJson.ColorPaletteModel[n].Value:this.defaultColorPalette[n%this.defaultColorPalette.length],r.push({Name:i[n].Name,Value:f,IsModified:!1,Id:i[n].Id});this.chartJson.ColorPaletteModel=r}else{for(t=0;t<this.defaultColorPalette.length;t++)e=!ej.isNullOrUndefined(this.chartJson.ColorPaletteModel[t])&&!ej.isNullOrUndefined(this.chartJson.ColorPaletteModel[t].Value)?this.chartJson.ColorPaletteModel[t].Value:this.defaultColorPalette[t],r.push({Name:"Color"+(t+1),Value:e,IsModified:!1,Id:null});this.chartJson.ColorPaletteModel=r}this.chartProperties.updateColorPaletteModel();this.chartProperties.chartModel=this;this.chartProperties.updateDefaultPaletteVisibility(this.chartJson.IsDefaultColorPalette)},n.prototype.updateCustomColorSettings=function(){var n,h,r,e,t,o,s;ej.isNullOrUndefined(this.chartJson.ColorSets)&&(this.chartJson.ColorSets=new ColorSets);var c=this.getBindedColumns(),i=c.yValueColumns,f=[],u=c.columnValue;for(n=0;n<i.length;n++)i[n].FieldType===FieldType[FieldType.Measures]&&(t=this.getExistingColorSettings(i[n].UniqueColumnName),h=this.defaultColorPalette[n%this.defaultColorPalette.length],ej.isNullOrUndefined(t)||ej.isNullOrUndefined(t.SelectedColumn)?(e=[],e.push({Name:"",Color:h,IsEdited:!1}),o=JSON.stringify(e),f.push({SelectedColumn:{UniqueColumnName:i[n].UniqueColumnName,Key:i[n].DataId,SelectedColumnType:i[n].FieldType===FieldType[FieldType.Measures]?ColorColumnType.Measure:ColorColumnType.Dimension,SummaryType:i[n].SummaryType},DefaultSettings:{DefaultColors:JSON.parse(o)},AdvancedColorSettings:null})):(t.SelectedColumn.SummaryType!==i[n].SummaryType&&(t.SelectedColumn.SummaryType=i[n].SummaryType),t.DefaultSettings.DefaultColors[0].IsEdited||(t.DefaultSettings.DefaultColors[0].Color=h),f.push(t)));if(this.chartProperties.isColorSupportForText)for(r=0;r<u.length;r++)u[r].FieldType!==FieldType[FieldType.DateTime]&&(e=[],t=this.getExistingColorSettings(u[r].UniqueColumnName),ej.isNullOrUndefined(t)||ej.isNullOrUndefined(t.SelectedColumn)?(o=JSON.stringify(e),f.push({SelectedColumn:{UniqueColumnName:u[r].UniqueColumnName,Key:u[r].DataId,SelectedColumnType:u[r].FieldType===FieldType[FieldType.Measures]?ColorColumnType.Measure:ColorColumnType.Dimension,SummaryType:u[r].SummaryType},DefaultSettings:{DefaultColors:JSON.parse(o)},AdvancedColorSettings:null})):f.push(t));s=[];i.length>1&&(s=f.filter(function(n){return n.AdvancedColorSettings!==null}),s.length!==0&&(s[0].AdvancedColorSettings=null));this.chartJson.ColorSets.ColorSettingsList=f;this.chartJson.ColorSets.IsMeasure=!0;this.chartJson.ColorSets.SelectedDatasource=this.dataGroupInfo.DatasetName},n.prototype.getExistingColorSettings=function(n){for(var t=0;t<this.chartJson.ColorSets.ColorSettingsList.length;t++)if(this.chartJson.ColorSets.ColorSettingsList[t].SelectedColumn.UniqueColumnName===n)return this.chartJson.ColorSets.ColorSettingsList[t];return null},n.prototype.updateChartItemPropertyChange=function(n,t,i,r){this.chartProperties.updatePropertyChange(n,t,i,r)},n.prototype.getPropertyGridItems=function(){return this.chartProperties.getPropertyGridItems()},n.prototype.isShapeChartType=function(n){return n===ChartTypes.Pie.toString()||n===ChartTypes.Doughnut.toString()||n===ChartTypes.Pyramid.toString()||n===ChartTypes.Funnel.toString()},n.prototype.isStackedType=function(n){return n===ChartTypes.StackedColumn.toString()||n===ChartTypes.StackedBar.toString()||n===ChartTypes.StackedArea.toString()||n===ChartTypes.PercentStackedColumn.toString()||n===ChartTypes.PercentStackedBar.toString()||n===ChartTypes.PercentStackedArea.toString()},n.prototype.isDistributionType=function(n){return n===ChartTypes.StackedArea.toString()||n===ChartTypes.Area.toString()||n===ChartTypes.PercentStackedArea.toString()||n===ChartTypes.Spline.toString()||n===ChartTypes.SplineArea.toString()||n===ChartTypes.Line.toString()},n.prototype.isCartesianChartType=function(n){return n===ChartTypes.StackedArea.toString()||n===ChartTypes.Area.toString()||n===ChartTypes.PercentStackedArea.toString()||n===ChartTypes.Spline.toString()||n===ChartTypes.SplineArea.toString()||n===ChartTypes.Line.toString()||n===ChartTypes.StackedColumn.toString()||n===ChartTypes.StackedBar.toString()||n===ChartTypes.PercentStackedColumn.toString()||n===ChartTypes.PercentStackedBar.toString()||n===ChartTypes.Column.toString()||n===ChartTypes.Bar.toString()},n.prototype.isTrendLineSupportChartType=function(n){return n===ChartTypes.Bar.toString()||n===ChartTypes.Column.toString()||n===ChartTypes.Area.toString()||n===ChartTypes.Spline.toString()||n===ChartTypes.Line.toString()||n===ChartTypes.SplineArea.toString()},n.prototype.isCustomColorSettingsApplicable=function(n){return!this.isShapeChartType(n)},n.prototype.isPercentCharts=function(n){return n===ChartTypes.PercentStackedArea.toString()||n===ChartTypes.PercentStackedBar.toString()||n===ChartTypes.PercentStackedColumn.toString()},n.prototype.isAreaCharts=function(n){return n===ChartTypes.StackedArea.toString()||n===ChartTypes.Area.toString()||n===ChartTypes.SplineArea.toString()},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.chartJson)&&(this.chartJson=this.chartProperties.chartJson=this.getChartJson()),this.chartJson},n.prototype.chartItemDispose=function(){var t,n,i;if(ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.chartJson.UniqueName,[this.chartJson],null),this.multiplePropertionChart||ej.isNullOrUndefined(this.chartObj))for(t=this.chartElement.find(".e-datavisualization-chart"),n=0;n<t.length;n++)i=$(t[n]).data("ejChart"),ej.isNullOrUndefined(i)||i.destroy();else this.chartObj.destroy(),this.chartObj=null;$("#"+this.designer._id+"_"+this.chartJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.chartJson.UniqueName).remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,this.getChartSubTypes())},n.prototype.getChartSubTypes=function(){var n=this.chartJson.ChartType;switch(n){case"Column":return ActivityLogItemSubTypes.ColumnChart;case"Bar":return ActivityLogItemSubTypes.BarChart;case"Stacked Column":return ActivityLogItemSubTypes.StackedColumnChart;case"Stacked Bar":return ActivityLogItemSubTypes.StackedBarChart;case"100% Stacked Column":return ActivityLogItemSubTypes.PercentageStackedColumnChart;case"100% Stacked Bar":return ActivityLogItemSubTypes.PercentageStackedBarChart;case"Pie":return ActivityLogItemSubTypes.PieChart;case"Doughnut":return ActivityLogItemSubTypes.DoughnutChart;case"Pyramid":return ActivityLogItemSubTypes.PyramidChart;case"Funnel":return ActivityLogItemSubTypes.FunnelChart;case"Area":return ActivityLogItemSubTypes.AreaChart;case"Spline":return ActivityLogItemSubTypes.SplineChart;case"SplineArea":return ActivityLogItemSubTypes.SplineAreaChart;case"Stacked Area":return ActivityLogItemSubTypes.StackedAreaChart;case"Line":return ActivityLogItemSubTypes.AreaChart;case"100% Stacked Area":return ActivityLogItemSubTypes.PercentageStackedAreaChart}},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onFieldDragDropped=function(n){var t;if(ej.isNullOrUndefined(n.droppedItem))return!0;var u=ejDashboardDesigner.getInstance("DashboardDesigner"),f=ej.DashboardUtil,i=!0,r="";if(!ej.isNullOrUndefined(n.fieldType)&&n.fieldType.toLowerCase()==="dimensions")for(t=0;t<this.dataGroupInfo.Values.length;t++)if(r=this.dataGroupInfo.Values[t].Name.toLowerCase()===n.elementCategoryInfo.toLowerCase()?n.elementCategoryInfo.toLowerCase():"",r==="column"&&this.dataGroupInfo.Values[t].Values.length===0){i=!0;break}else r==="column"&&this.dataGroupInfo.Values[t].Values.length===1&&(f.getInstance().alertDialog(u.locale.multiLevelDrillDialog.titleText,u.locale.multiLevelDrillDialog.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:f,dataInfo:{eventInfo:n}}),i=!1);return i},n.prototype.onSettingsIconClick=function(n,t){var r=!0,u=ejDashboardDesigner.getInstance("DataConfiguration"),i;return n.Name==="YValue"&&(this.chartJson.ChartType===ChartTypes.PercentStackedBar.toString()||this.chartJson.ChartType===ChartTypes.PercentStackedColumn.toString()||this.chartJson.ChartType===ChartTypes.PercentStackedArea.toString())&&(r=!1),ej.isNullOrUndefined(this.dataGroupInfo)||u.validateMenuDisable(n,this.dataGroupInfo),n.CategoryType==="Non_Numeric"&&(this.chartJson.ChartType===ChartTypes.Pie.toString()||this.chartJson.ChartType===ChartTypes.Doughnut.toString()||this.chartJson.ChartType===ChartTypes.Pyramid.toString()||this.chartJson.ChartType===ChartTypes.Funnel.toString())&&(t=u.CreateChartMenuItem(this,n,t)),i=this,$.each($(t.element).children(),function(t,r){if(n.FieldType==="Measures"){r.textContent.toLowerCase()!=="none"&&$(r).css("display","block");var u=$(r).find(".e-fieldmenuListIcon");r.textContent.toLowerCase()==="sort"&&i.controlType===ControlType.Chart&&(i.chartJson.ChartType===ChartTypes.Bar||i.chartJson.ChartType===ChartTypes.Pie||i.chartJson.ChartType===ChartTypes.Doughnut||i.chartJson.ChartType===ChartTypes.Pyramid||i.chartType===ChartTypes.Funnel)&&(u.addClass("e-dashboardtick-icon"),u.addClass("e-selectedfieldmenu"))}n.FieldType==="Dimensions"&&n.DateTimeFormat==="None"?($(r).find("a").attr("fieldmenuname").toLowerCase()==="sort"||$(r).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters")&&$(r).css("display","block"):n.FieldType==="Dimensions"&&n.DateTimeFormat!=="None"&&$(r).css("display","block")}),{addFormatOption:r,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Auto,n.FormatType=this.chartJson.ChartType==="100% Stacked Bar"||this.chartJson.ChartType==="100% Stacked Column"||this.chartJson.ChartType==="100% Stacked Area"?DataValueFormat.Percentage:DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n.prototype.getParameterColumn=function(){return{Value:this.chartJson.ContainerSettings.Title,Id:this.chartJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n}();window.ej.createObject("ej.DashboardDesignerUtility.ChartItem",InternalChartReportItem,window);ej.DashboardDesignerUtility.ChartItem.prototype.widgetItems();InternalChoroplethMapReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="ChoroplethMap";this.isMasterByDefault=!1;this.rootCss="e-choroplethmap-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.contentContainer=null;this.dataGroupInfo=null;this.choroplethmapItem=null;this.field=null;this.choroplethMapJson=null;this.dataSource=null;this.isHeaderVisible=!0;this.controlHeader=null;this.shapeDataPath=null;this.dataConfiguration=null;this.reportName=null;this.maxValue=null;this.factor=null;this.strokeThickness=.75;this.strokeColor="#ffffff";this.layerType=null;this.colorvaluepath=null;this.enablegradient=null;this.map=null;this.shapecolor=null;this.hovercolor=null;this.autofill=null;this.from=null;this.to=null;this.enableMouseHover=!0;this.valuepath=null;this.containerProperties=null;this.dataValues=null;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.isDataEnabled=!0;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.controlType=ControlType.ChoroplethMap;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.render=function(n){this.renderChoroplethMapItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.choroplethMapItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.setReportItemJson(n)},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateChoroplethMapItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(n){return this.onFieldDragDropped(n)},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getChoroplethMapContainerInstance()},n.prototype.refresh=function(){this.choroplethmapElement.ejMap("refresh")},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"e08ac19e-c619-4078-a56f-973f4ed083a1",widgetName:"ChoroplethMap",widgetDisplayName:n.itemPanel.widgetTitle.choroplethMap,cssClass:"e-widgeticon e-reportdesigner-widget-choroplethmap",widgetNameSpace:"ej.DashboardDesignerUtility.ChoroplethMapItem",searchCategory:["choroplethmap","relationship"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.choroplethMap,description:n.itemPanel.widgetDescription.choroplethMapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.choroplethMapDataReq}}]})},n.prototype.getChoroplethMapContainerInstance=function(){return this.containerProperties},n.prototype.setReportItemJson=function(n){this.choroplethMapJson=n},n.prototype.renderMapReportElement=function(n){try{this.choroplethMapJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.choroplethMapJson.ContainerSettings.Bounds.Row,column:this.choroplethMapJson.ContainerSettings.Bounds.Column,rowSpan:this.choroplethMapJson.ContainerSettings.Bounds.RowSpan,colSpan:this.choroplethMapJson.ContainerSettings.Bounds.ColumnSpan};this.renderChoroplethMapElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.choroplethMapJson.UniqueName,Error:t,Type:t.name})}},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"ChoroplethMap",i);this.propertyPanel.canUpdate=!0},n.prototype.getPropertyGridItems=function(){var n=new ej.DashboardDesignerUtility.PropertyGridItem(this.choroplethMapJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.choroplethMapJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.choroplethMapJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.choroplethMapJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.choroplethMapJson.ContainerSettings.Description,n.propertyGridItems.Type="ChoroplethMap",n.linkingProperty.Items[0].value=ej.DashboardUtil.getInstance().useExistingLinks(this.choroplethMapJson),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"ShowLegend",displayName:"Show Legend",value:this.choroplethMapJson.ShowLegend,itemType:"bool"},{name:"ShapeData",displayName:"Map",value:this.choroplethMapJson.ShapeData,itemType:"dropdown",valueList:[{text:"Africa",value:"Africa"},{text:"Asia",value:"Asia"},{text:"Australia Territories",value:"Australia_Territories"},{text:"Canada",value:"Canada"},{text:"Europe",value:"Europe"},{text:"France",value:"France"},{text:"Germany",value:"Germany"},{text:"India",value:"India"},{text:"North America",value:"NorthAmerica"},{text:"South America",value:"SouthAmerica"},{text:"United Kingdom",value:"UnitedKingdom"},{text:"USA States",value:"USA_States"},{text:"WorldMap Continent",value:"WorldMap_Continent"},{text:"WorldMap Countries",value:"WorldMap_Countries"}]},{name:"shapePropertyPath",displayName:"Column",value:this.choroplethMapJson.ShapePropertyPath,itemType:"dropdown",valueList:this.getShapePropertyPathValue(window[this.choroplethMapJson.ShapeData])},]},n.linkingProperty,{CategoryName:"Range Color Settings",Items:[{name:"GradientColor",displayName:"Monochromatic",value:"#"+this.choroplethMapJson.MaxColor.substring(3),itemType:"color"}]},n.containerSettingsProperty,n.filterSettingsProperty],n.propertyGridItems},n.prototype.getShapePropertyPathValue=function(n){for(var i=[],r=Object.keys(n["features"][0].properties),t=0;t<r.length;t++)i.push(r[t]);return i},n.prototype.renderChoroplethMapItem=function(){try{this.renderChoroplethMapElement();this.choroplethMapJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ChoroplethMap)}catch(n){this.designPanel.logError({Source:this.choroplethMapJson.UniqueName,Error:n,Type:n.name})}},n.prototype.getChoroplethMapJson=function(){var n=new ChoroplethMapProperties;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.renderChoroplethMapElement=function(){this.choroplethmapItem=ej.buildTag("div.e-choroplethmapitem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"choroplethmapItem"+this.choroplethMapJson.UniqueName});this.choroplethmapElement=ej.buildTag("div.e-choroplethmap-element","",{width:"100%",height:"100%",position:"relative","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"choroplethmapElement"+this.choroplethMapJson.UniqueName});this.contentContainer.append(this.choroplethmapItem);this.controlContainer.data("widgetInstance",this);this.choroplethmapItem.append(this.choroplethmapElement);this.map=this.choroplethmapElement;this.maxValue=30;this.factor=.1;this.layerType="geometry";this.dataSource=[];this.shapeDataPath="Country";this.shapecolor="#E5E5E5";this.hovercolor="gray";this.autofill=!1;this.valuepath="name";this.colorvaluepath="name";this.enablegradient=!0;this.from=1;this.to=10;this.choroplethmapElement.ejMap({zoomSettings:{maxValue:this.maxValue,factor:this.factor},layers:[{layerType:this.layerType,dataSource:this.dataSource,enableMouseHover:this.enableMouseHover,shapeDataPath:this.shapeDataPath,legendSettings:{labelOrientation:"horizontal",mode:"interactive",dockOnMap:!0,dockPosition:"top",position:null},shapePropertyPath:this.choroplethMapJson.ShapePropertyPath,shapeData:window[this.choroplethMapJson.ShapeData],shapeSettings:{fill:this.shapecolor,highlightColor:this.hovercolor,strokeThickness:this.strokeThickness,stroke:this.strokeColor,autoFill:this.autofill,valuePath:this.valuepath,colorValuePath:this.colorvaluepath,enableGradient:this.enablegradient,colorMappings:{rangeColorMapping:[{from:this.from,to:this.to,gradientColors:["#"+this.choroplethMapJson.MinColor.substring(3),"#"+this.choroplethMapJson.MaxColor.substring(3)]}]}}}]})},n.prototype.updateChoroplethMapItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.choroplethMapJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.choroplethMapJson);break;case"Description":this.propertyPanel.setDescription(this.choroplethMapJson,i);break;case"ShapeColor":this.updatePropertyAsync(this.updateShapeColor,i);break;case"HoverColor":this.updatePropertyAsync(this.updateHoverColor,i);break;case"ShapeData":this.updatePropertyAsync(this.updateShapeData,i);break;case"ShowLegend":this.updatePropertyAsync(this.updateShowLegend,i);break;case"shapePropertyPath":this.updatePropertyAsync(this.updateShapePropertyPath,i);break;case"GradientColor":this.updatePropertyAsync(this.updateGradientColors,i);break;case"ItemLink":this.UpdateLink(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.choroplethMapJson,i);break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"ChoroplethMap",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-choroplethmap-item",this.designer._id+"_"+this.choroplethMapJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updatePropertyAsync=function(n,t){var r=this,i;ejDashboardDesigner.getInstance("DesignPanel").showLoadingIndicator(this.controlContainer);i=this;setTimeout(function(){$.proxy(n,i,t).call();ejDashboardDesigner.getInstance("DesignPanel").hideLoadingIndicator(r.controlContainer);ej.DashboardDesignerUtility.Serialization.notifyChange()},0)},n.prototype.UpdateLink=function(n){this.choroplethMapJson.UrlLink.EnableLink=n.EnableLink;this.choroplethMapJson.UrlLink.LinkType=n.LinkType;this.choroplethMapJson.UrlLink.GridUrlType=n.GridUrlType;this.choroplethMapJson.UrlLink.PassingParameters=n.PassingParameters;this.choroplethMapJson.UrlLink.UrlPath=n.UrlPath},n.prototype.updateShapeColor=function(n){if(this.shapecolor=n,!ej.isNullOrUndefined(this.choroplethmapElement)){var t=this.choroplethmapElement.data("ejMap");t.model.layers[0].shapeSettings.fill=n;this.choroplethmapElement.ejMap("refresh")}},n.prototype.updateHoverColor=function(n){var t=this.choroplethmapElement.data("ejMap");t.model.layers[0].shapeSettings.highlightColor=n;this.hovercolor=n;this.choroplethmapElement.ejMap("refresh")},n.prototype.updateShapeData=function(n){var t,i;this.choroplethMapJson.ShapeData=n;ej.isNullOrUndefined(this.choroplethmapElement)&&!ej.isNullOrUndefined(window[n])&&(this.contentContainer.find(".e-map-file-err").remove(),this.renderMapReportElement(this.choroplethMapJson),this.dataConfiguration.postDraggedFields());t=this.choroplethmapElement.data("ejMap");ej.isNullOrUndefined(t)||ej.isNullOrUndefined(window[n])||(t.model.layers[0].shapeData=window[n],this.field=this.getShapePropertyPathValue(window[n]),this.choroplethmapElement.ejMap({baseMapIndex:1}),i=$("#"+this.designId+"_ChoroplethMap_BasicSettings_shapePropertyPath").data("ejDropDownList"),i.setModel({dataSource:this.field}),this.choroplethMapJson.ShapePropertyPath=this.field.indexOf("name")!==-1?"name":this.field[0],this.setPropertyElement("BasicSettings","shapePropertyPath",this.field.indexOf("name")!==-1?"name":this.field[0]));ej.isNullOrUndefined(window[n])&&(ej.isNullOrUndefined(t)||t.destroy(),ej.isNullOrUndefined(this.choroplethmapItem)||this.choroplethmapItem.remove(),this.choroplethmapElement=null,this.designPanel.showMapFileErr(this,this.choroplethMapJson,"ChoroplethMap"))},n.prototype.updateShapePropertyPath=function(n){var t=this.choroplethmapElement.data("ejMap");t.model.layers[0].shapePropertyPath=n;this.choroplethMapJson.ShapePropertyPath=n;this.choroplethmapElement.ejMap("refresh")},n.prototype.updateGradientColors=function(n){var t=this.choroplethmapElement.data("ejMap");t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors[1]=n;t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors[0]=this.ColorLuminance(n,.7);this.choroplethMapJson.MaxColor="#FF"+n.substring(1);this.choroplethMapJson.MinColor="#FF"+t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors[0].substring(1);this.choroplethmapElement.ejMap("refresh")},n.prototype.ColorLuminance=function(n,t){var u,i,r;for(n=String(n).replace(/[^0-9a-f]/gi,""),n.length<6&&(n=n[0]+n[0]+n[1]+n[1]+n[2]+n[2]),t=t||0,u="#",r=0;r<3;r++)i=parseInt(n.substr(r*2,2),16),i=Math.round(Math.min(Math.max(0,i+i*t),255)).toString(16),u+=("00"+i).substr(i.length);return u},n.prototype.updateShowLegend=function(n){this.choroplethMapJson.ShowLegend=n;var t=this.choroplethmapElement.data("ejMap");t.model.layers[0].dataSource.length>0&&(t.model.layers[0].legendSettings.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:n,this.choroplethmapElement.ejMap("refresh"))},n.prototype.updateWidgetSize=function(n){var i=this,t;this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.choroplethMapJson,CommandAction.ItemResize,"updateSize","e-choroplethmap-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):(t=this.choroplethmapElement.data("ejMap"),t.model.layers[0].legendSettings.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:this.choroplethMapJson.ShowLegend,this.updatePropertyAsync(function(){i.choroplethmapElement.ejMap({baseMapIndex:1})},null))},n.prototype.updateItemSize=function(n){var i=this,t;this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.choroplethMapJson,CommandAction.ItemResize,"updateItemSize","e-choroplethmap-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):(t=this.choroplethmapElement.data("ejMap"),t.model.layers[0].legendSettings.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:this.choroplethMapJson.ShowLegend,this.updatePropertyAsync(function(){i.choroplethmapElement.ejMap({baseMapIndex:1})},null))},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.choroplethMapJson,CommandAction.ItemMove,"updatePosition","e-choroplethmap-item")},n.prototype.updateReportItemDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions",SupportedTypes:["e-reportdesigner-dataset-number","e-reportdesigner-dataset-boolean","e-reportdesigner-dataset-char","e-reportdesigner-dataset-string"]}),n},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Value",CategoryType:CategoryType.Numeric,CategoryCount:1}),n.push({Name:"Shape",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}),n},n.prototype.isFieldValid=function(){return!0},n.prototype.updateReportItemData=function(n){var i;this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.choroplethmapItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");var t=this.choroplethmapElement.data("ejMap"),r=null,e=null,u=null,f=null,o=t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0];ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.choroplethMapJson,this.dataGroupInfo);ej.isNullOrUndefined(n.Error)||n.Error?ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):n.noDataAvailable?(this.choroplethmapItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):(ej.isNullOrUndefined(n)||n.data==="[]"||!ej.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?(n.data==="[]"&&n.columnBindings==="{}"||!ej.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(t.model.layers[0].dataSource=this.dataSource,t.model.layers[0].shapeDataPath=this.shapeDataPath,t.model.layers[0].enableMouseHover=!0,t.model.layers[0].shapeSettings.valuePath=this.valuepath,t.model.layers[0].shapeSettings.colorValuePath=this.colorvaluepath,t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors=["#"+this.choroplethMapJson.MinColor.substring(3),"#"+this.choroplethMapJson.MaxColor.substring(3)],t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].from=this.from,t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].to=this.to,t.model.layers[0].legendSettings.showLegend=!1):(r=JSON.parse(n.data),e=JSON.parse(n.columnBindings),u=n.formattedData.formatminvalue,f=n.formattedData.formatmaxvalue,i=this.getColumns(r),i.length>1?(this.generateTooltip(e,i),t.model.layers[0].showTooltip=!0,t.model.layers[0].tooltipTemplate="template"+$(this.choroplethmapElement).attr("id")+"_tooltip",t.model.layers[0].dataSource=r,t.model.layers[0].shapeDataPath=i[1].text,t.model.layers[0].enableMouseHover=!0,t.model.layers[0].shapeSettings.valuePath=i[0].text,t.model.layers[0].shapeSettings.colorValuePath=i[0].text,t.model.layers[0].shapeSettings.enableGradient=!0,t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].from=this.getFromValue(r,i[0].text),t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].to=this.getToValue(r,i[0].text)+1,t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors=["#"+this.choroplethMapJson.MinColor.substring(3),"#"+this.choroplethMapJson.MaxColor.substring(3)],t.model.layers[0].legendSettings.height=18,t.model.layers[0].legendSettings.width=170,t.model.layers[0].legendSettings.type="layers",t.model.layers[0].legendSettings.mode="interactive",t.model.layers[0].legendSettings.dockOnMap=!0,t.model.layers[0].legendSettings.dockPosition="top",t.model.layers[0].legendSettings.position=null,t.model.layers[0].legendSettings.title=this.dataGroupInfo.Values[0].Values[0].Field,t.model.layers[0].legendSettings.leftLabel=u!==null?String(u):String(o.from),t.model.layers[0].legendSettings.rightLabel=f!==null?String(f):String(o.to),t.model.layers[0].legendSettings.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:this.choroplethMapJson.ShowLegend):(t.model.layers[0].dataSource=this.dataSource,t.model.layers[0].shapeDataPath=this.shapeDataPath,t.model.layers[0].enableMouseHover=!0,t.model.layers[0].shapeSettings.valuePath=this.valuepath,t.model.layers[0].shapeSettings.colorValuePath=this.colorvaluepath,t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].gradientColors=["#"+this.choroplethMapJson.MinColor.substring(3),"#"+this.choroplethMapJson.MaxColor.substring(3)],t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].from=this.from,t.model.layers[0].shapeSettings.colorMappings.rangeColorMapping[0].to=this.to,t.model.layers[0].legendSettings.showLegend=!1)),ej.DashboardUtil.updateAction("ChoroplethMap","Link","Link"));this.choroplethmapElement.ejMap("refresh")},n.prototype.generateTooltip=function(n,t){var r,i,f,u;r='<script id="template'+$(this.choroplethmapElement).attr("id")+'_tooltip" type="application/jsrender">';r+='<div style="font-family:Roboto;background:White;border: 1px solid #4D4D4D;border-radius: 7px;margin-right: 25px;min-width: 110px;padding-right: 5px;padding-left: 5px;width: auto;height: auto;">';i=new MeasureFormatting;f="false";this.dataGroupInfo.Values[0].Values[0].MeasureFormatting!==null&&(i=this.dataGroupInfo.Values[0].Values[0].MeasureFormatting,f="true");u="template"+$(this.choroplethmapElement).attr("id")+"_tooltip";u="#"+u;$(u).length>0&&$(u).remove();r+="<p style='color:black;font-size:12px;font-weight:normal;margin-top:10px;'>"+n[t[1].id]+"  : {{:(#data['"+this.dataGroupInfo.Values[1].Values[0].UniqueColumnName+"'])}}<\/P>";r+="<p style='color:black;font-size:12px;font-weight:normal;margin-top:10px;'>"+n[t[0].id]+"  : {{: ~formatTooltip(#data['"+this.dataGroupInfo.Values[0].Values[0].UniqueColumnName+"'], '"+i.Culture+"', '"+i.DecimalPoints+"', '"+i.FormatType+"', '"+i.Prefix+"', '"+i.Suffix+"', '"+i.Unit+"', '"+f+"')}}<\/P>";r+="<\/div><\/script>";$(this.choroplethmapItem).append(r)},n.prototype.getFromValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)r.push(n[i][t]);return u=Math.min.apply(null,r),parseFloat(u.toFixed(2))},n.prototype.getToValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)r.push(n[i][t]);return u=Math.max.apply(null,r),parseFloat(u.toFixed(2))},n.prototype.getColumns=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},n.prototype.choroplethMapItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.choroplethMapJson.UniqueName,[this.choroplethMapJson],null);var n=this.choroplethmapElement.data("ejMap");ej.isNullOrUndefined(n)||n.destroy();$("#"+this.designer._id+"_"+this.choroplethMapJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.choroplethMapJson.UniqueName).remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ChoroplethMap)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.choroplethMapJson)&&(this.choroplethMapJson=this.getChoroplethMapJson()),this.choroplethMapJson},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onFieldDragDropped=function(n){return ej.isNullOrUndefined(n.droppedItem)?!(n.categoryType===CategoryType[CategoryType.Non_Numeric]&&n.fieldType===FieldType[FieldType.Measures]):!0},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Auto,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.getParameterColumn=function(){return{Value:this.choroplethMapJson.ContainerSettings.Title,Id:this.choroplethMapJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(t,i){n.FieldType==="Measures"&&i.textContent.toLowerCase()!=="none"&&i.textContent.toLowerCase()!=="sort"&&$(i).css("display","block");n.FieldType==="Dimensions"&&$(i).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters"&&$(i).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n}();window.ej.createObject("ej.DashboardDesignerUtility.ChoroplethMapItem",InternalChoroplethMapReportItem,window);ej.DashboardDesignerUtility.ChoroplethMapItem.prototype.widgetItems();$.views.helpers({formatTooltip:function(n,t,i,r,u,f,e,o){return ej.DashboardUtil.formattedText(n,t,i,r,u,f,e,o)}});InternalLabelReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="Label";this.isMasterByDefault=!1;this.rootCss="e-label-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.labelJson=null;this.contentContainer=null;this.labelDiv=null;this.labelContent=null;this.labelSelection=null;this.textRange=null;this.isMouseUp=!1;this.previousContent="<p><span><\/span><\/p>";this.isReportItemDrop=!1;this.reportName=null;this.browserInfo=ej.browserInfo();this.editorManager=null;this.toolBar=null;this.undoManager=null;this.rdlParser=null;this.isTextEdit=!1;this.isSelectedText=!1;this.dataGroupInfo=null;this.fontSize="12px";this.fontFamily="Roboto";this.fontColor="#000000";this.fontStyle="Normal";this.textDecoration="None";this.fontWeight="Normal";this.textAlignment="Left";this.textHighlightColor="None";this.containerProperties=null;this.scrollLabelDiv="";this.propertyValue=new TextStyleProperties;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.isDataEnabled=!1;this.rdlParser=ejDashboardDesigner.getInstance("RDLParser");this.undoManager=ejDashboardDesigner.getInstance("UndoManager");this.toolBar=this.designPanel.dashboardDesigner.rptToolbar;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.controlType=ControlType.Label;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.render=function(n){this.renderLabelItem(n)},n.prototype.updateData=function(){},n.prototype.dispose=function(){this.labelIemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.labelJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateLabelItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(){return!0},n.prototype.onSettingsClick=function(){},n.prototype.onSettingsMenuClick=function(){},n.prototype.updateDataGroupInfo=function(){},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getLabelContainerInstance()},n.prototype.refresh=function(){},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(){return null},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.miscellaneous,GroupId:"764ccc8f-f006-46ab-aef5-68973d12d2a6",Items:[{id:"5c5fbab6-55a5-477f-836d-c6d145d06ce9",widgetName:"Label",widgetDisplayName:n.itemPanel.widgetTitle.label,cssClass:"e-widgeticon e-reportdesigner-widget-textbox",widgetNameSpace:"ej.DashboardDesignerUtility.LabelItem",searchCategory:["label","miscellaneous"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.label,description:n.itemPanel.widgetDescription.labelDesc,dataRequirement:n.itemPanel.widgetDataRequirements.labelDataReq}}]})},n.prototype.getLabelContainerInstance=function(){return this.containerProperties},n.prototype.setWidgetJson=function(n){this.labelJson=n},n.prototype.renderLabelItem=function(){try{this.labelJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);this.renderLabelElement();this.isReportItemDrop=!0;ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Label)}catch(n){this.designPanel.logError({Source:this.labelJson.UniqueName,Error:n,Type:n.name})}},n.prototype.renderLabelReportElement=function(n){try{this.labelJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.labelJson.ContainerSettings.Bounds.Row,column:this.labelJson.ContainerSettings.Bounds.Column,rowSpan:this.labelJson.ContainerSettings.Bounds.RowSpan,colSpan:this.labelJson.ContainerSettings.Bounds.ColumnSpan};this.renderLabelElement();this.openLabelItem(this.labelJson);ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer);this.disableLabelEdit();this.isReportItemDrop=!1}catch(t){this.designPanel.logError({Source:this.labelJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderLabelElement=function(){$(this.contentContainer).removeClass("e-dashboardviewer");this.labelDiv=ej.buildTag("div.e-labelitem","",{"box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"labelDiv"+this.labelJson.UniqueName});this.labelContent=ej.buildTag("div.e-label-element","",{id:this.designId+"labelContent"+this.labelJson.UniqueName,spellcheck:"false"});this.scrollLabelDiv=ej.buildTag("div.e-scroll-Label","",{id:this.designId+"scrollDiv"+this.labelJson.UniqueName});this.scrollLabelDiv.css({width:this.labelDiv.width(),height:this.labelDiv.height()});var n=$(document.createElement("p")),t=this.getSpanTag();n.css("margin-top","0px");n.append(t);this.labelContent.append(n);this.contentContainer.append(this.labelDiv);this.controlContainer.data("widgetInstance",this);this.labelDiv.append(this.scrollLabelDiv);this.scrollLabelDiv.append(this.labelContent);this.contentContainer.css({padding:"0px"});this.wireEvents();this.editorManager=new ej.DashboardDesignerUtility.EditorManager(this.labelContent);this.scrollLabelDiv.ejScroller({height:this.labelDiv.height(),width:this.labelDiv.width(),autoHide:!0,enableTouchScroll:!1})},n.prototype.wireEvents=function(){this.labelContent.bind("keydown",$.proxy(this.onKeyDown,this));this.labelContent.bind("keyup",$.proxy(this.onKeyUp,this));this.labelContent.bind(ej.DashboardUtil.MouseEvent.mouseDown,$.proxy(this.onMouseDown,this));this.labelContent.bind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.onMouseUp,this));this.labelContent.bind("focusin",$.proxy(this.onFocusIn,this));this.labelContent.bind("focusout",$.proxy(this.onFocusOut,this))},n.prototype.openLabelItem=function(n){this.openParagraph(n);this.previousContent=this.labelContent[0].innerHTML;this.labelContent.css({"background-color":n.LabelBackgroundColor})},n.prototype.openParagraph=function(n){var o,i,u,f,s,r;if(n.LineCollection.length>0)for(this.labelContent.find("p").remove(),o=n.LineCollection.length,i=0;i<o;i++){for(u=$(document.createElement("p")),f=n.LineCollection[i].LineStyleProperties.LineTextAlignment,u.css({"text-align":f?f:this.textAlignment}),s=n.LineCollection[i].TextCollections[0].Text.length,r=0;r<s;r++){var e=$(document.createElement("span")),t=n.LineCollection[i].TextCollections[0].Text[r].TextStyle,y=t.FontFamily,h=t.FontColor?t.FontColor:this.fontColor,c=t.FontSize,l=t.FontStyle,a=t.FontWeight,v=t.TextDecoration,p=t.TextHighlightColor?t.TextHighlightColor:this.textHighlightColor;e.css({"white-space":"pre-wrap","font-family":y?t.FontFamily:this.fontFamily,color:h?h:this.fontColor,"font-size":c?c:this.fontSize,"font-style":l?this.getFontStyle(l):this.fontStyle,"font-weight":a?this.getFontWeight(a):this.fontWeight,"text-decoration":v?this.getTextDecoration(v):this.textDecoration,"background-color":p,height:this.fontSize});e.text(n.LineCollection[i].TextCollections[0].Text[r].Content);u.append(e)}this.labelContent.append(u)}},n.prototype.onMouseDown=function(){this.controlContainer.hasClass("e-selected-item")===!0&&this.setContentEditable()},n.prototype.onMouseUp=function(n){this.isMouseUp=!0;this.controlContainer.hasClass("e-selected-item")===!0&&this.isTextEdit&&this.textSelectionChange(n);this.isMouseUp=!1},n.prototype.onFocusIn=function(){this.labelContent.attr("contenteditable")==="true"&&(this.isTextEdit=!0,this.setContentEditable())},n.prototype.onFocusOut=function(){this.isTextEdit=!1;this.updateElementFlow();this.saveTextContent(this.previousContent,this.labelContent[0].innerHTML);this.controlContainer.hasClass("e-selected-item")===!1&&this.labelSelection&&this.labelSelection.removeAllRanges()},n.prototype.onKeyDown=function(n){var t,i,r;this.labelContent.find("p:first").css({margin:"0px"});this.labelContent.attr("contenteditable")==="true"&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0);n.ctrlKey&&n.keyCode===66&&(n.preventDefault(),t=this.propertyValue.FontWeight===FontWeight.Bold?FontWeight.Normal:FontWeight.Bold,this.updateSelectedFontWeight(t),this.propertyValue.FontWeight=t);n.ctrlKey&&n.keyCode===73&&(n.preventDefault(),i=this.propertyValue.FontStyle===FontStyle.Italic?FontStyle.Normal:FontStyle.Italic,this.updateSelectedFontStyle(i),this.propertyValue.FontStyle=i);n.ctrlKey&&n.keyCode===85&&(n.preventDefault(),r=this.propertyValue.TextDecoration===TextDecoration.Underline?TextDecoration.None:TextDecoration.Underline,this.updateSelectedTextDecoration(r),this.propertyValue.TextDecoration=r);n.ctrlKey&&n.keyCode===76&&(n.preventDefault(),this.updateSelectedTextHorizontalAlign(TextHorizontalAlignment.Left));n.ctrlKey&&n.keyCode===82&&(n.preventDefault(),this.updateSelectedTextHorizontalAlign(TextHorizontalAlignment.Right));n.ctrlKey&&n.keyCode===69&&(n.preventDefault(),this.updateSelectedTextHorizontalAlign(TextHorizontalAlignment.Center))},n.prototype.onKeyUp=function(n){if(this.labelContent.find("p:first").css({margin:"0px"}),this.textSelectionChange(n),n.keyCode===13&&this.labelSelection.focusNode.nodeName==="P"&&(n.preventDefault(),this.textRange.commonAncestorContainer.tagName==="P"&&$(this.textRange.commonAncestorContainer).prev().length>0&&$(this.textRange.commonAncestorContainer).prev().text().length===0)){var t=$(this.textRange.commonAncestorContainer).prev().html();$(this.textRange.commonAncestorContainer).html(t)}this.updateElementFlow();this.labelContent.attr("contenteditable")==="true"&&(n.stopPropagation?n.stopPropagation():n.cancelBubble=!0);this.scrollerRefresh()},n.prototype.setContentEditable=function(){var t=$(window.top).height()-(this.labelDiv.offset().top+2),i=this.labelDiv.height(),n=this.labelContent[0].scrollHeight+6;n>t?(n=t,this.labelContent.css({"overflow-y":"auto"})):(this.labelContent.css({"overflow-y":"hidden"}),n=n-3,n<i&&(n=i))},n.prototype.scrollerRefresh=function(){if(!ej.isNullOrUndefined(this.scrollLabelDiv)){var n=this.scrollLabelDiv.data("ejScroller");ej.isNullOrUndefined(n)||n.refresh()}},n.prototype.enableLabelEdit=function(){this.labelContent.attr("contenteditable","true").addClass("e-editable-area");var n=this.controlContainer.find(".e-dashboarddesigner-label-editor");!ej.isNullOrUndefined(n)&&n.length>0&&(n.removeClass("e-dashboarddesigner-selection-edit").addClass("e-dashboarddesigner-selection-ok"),n.attr("title",this.dashboardDesigner.locale.designPanel.updateLabel));this.labelContent.focus();this.designPanel.setPropertyPanelItem();this.propertyPanel.isVisible()||this.propertyPanel.showProperty(!0);this.scrollerRefresh()},n.prototype.disableLabelEdit=function(){this.labelContent.attr("contenteditable","false").removeClass("e-editable-area");var n=this.controlContainer.find(".e-dashboarddesigner-label-editor");!ej.isNullOrUndefined(n)&&n.length>0&&(n.removeClass("e-dashboarddesigner-selection-ok").addClass("e-dashboarddesigner-selection-edit"),n.attr("title",this.dashboardDesigner.locale.designPanel.editLabel));this.designPanel.setPropertyPanelItem()},n.prototype.saveTextContent=function(n,t){this.previousContent!==t&&(ejDashboardDesigner.editManager.isPerformAction&&(this.labelContent[0].innerHTML=t),this.saveReportItem(),ejDashboardDesigner.editManager.addCmdAction(CommandAction.TextBoxContentUpdate,"saveTextContent","e-label-item",this.designer._id+"_"+this.labelJson.UniqueName,[t,n],[n,t]),this.previousContent=t)},n.prototype.textSelectionChange=function(n){this.textRange=this.getRange();this.textRange&&(this.isMouseUp?n.which!==3&&this.changePropertyPanelValue():(n.keyCode===37||n.keyCode===38||n.keyCode===39||n.keyCode===40)&&this.changePropertyPanelValue())},n.prototype.changePropertyPanelValue=function(){var n;if(this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=$(i).closest("span");r.length>0?n=r[0].style:this.labelContent.find("span:first-child").length>0?n=this.labelContent.find("span:first-child")[0].style:t&&t.style&&(n=t.style)}n.fontFamily!==this.propertyValue.FontFamily&&(this.propertyValue.FontFamily=n.fontFamily,this.setPropertyElement("BasicSettings","FontFamily",this.getPropertyPanelFontFamily()));n.color!==this.propertyValue.FontColor&&(this.propertyValue.FontColor=n.color,this.setPropertyElement("BasicSettings","FontColor",this.getPropertyPanelFontColor()));this.setPropertyElement("BasicSettings","BackgroundColor",this.getPropertyPanelBackgroundColor());n.backgroundColor!==this.propertyValue.TextHighlightColor&&(this.propertyValue.TextHighlightColor=n.backgroundColor,this.setPropertyElement("BasicSettings","TextHighlightColor",this.getPropertyPanelTextHighlightColor()));n.fontSize!==this.propertyValue.FontSize&&(this.propertyValue.FontSize=n.fontSize,this.setPropertyElement("BasicSettings","FontSize",this.getPropertyPaneltFontSize()));n.fontStyle!==this.propertyValue.FontStyle&&(this.propertyValue.FontStyle=n.fontStyle,this.setPropertyElement("BasicSettings","FontStyle",this.getPropertyPaneltFontStyle()));n.fontWeight!==this.propertyValue.FontWeight&&(this.propertyValue.FontWeight=n.fontWeight,this.setPropertyElement("BasicSettings","FontWeight",this.getPropertyPanelFontWeight()));n.textDecoration!==this.propertyValue.TextDecoration&&(this.propertyValue.TextDecoration=n.textDecoration,this.setPropertyElement("BasicSettings","TextDecoration",this.getPropertyPanelTextDecoration()));this.setPropertyElement("BasicSettings","TextHorizontalAlign",this.getPropertyPanelTextAlignment())},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"Label",i);this.propertyPanel.canUpdate=!0},n.prototype.updateElementFlow=function(){var n,t,u,i,r;if(this.labelContent.find("p").length<1&&this.labelContent.append("<p><span><\/span><\/p>"),this.browserInfo.name!=="msie"&&this.browserInfo.name!=="webkit")if(n=this.labelContent[0].childNodes[0],n.nodeName==="#text"||this.labelContent.find("p:first")&&this.labelContent.find("p:first")[0].childNodes[0].nodeName==="#text")n.nodeName==="#text"?(this.labelContent.find("p:first").find("span:first").length>0?(this.labelContent.find("p:first").find("span:first").text(n.textContent),$(n).remove()):(t=this.getSpanTag(),this.labelContent.find("p:first").append(t),this.labelContent.find("p:first").find("span:first").text(n.textContent),$(n).remove()),this.labelContent.find("p:first")[0].childNodes[0].nodeName==="BR"?$(this.labelContent.find("p:first")[0].childNodes[0]).remove():this.labelContent[0].childNodes[0].nodeName==="BR"&&$(this.labelContent[0].childNodes[0]).remove()):(n=this.labelContent.find("p:first")[0].childNodes[0],this.labelContent.find("p:first").find("span:first").length>0?(this.labelContent.find("p:first").find("span:first").text(n.textContent),$(this.labelContent.find("p:first")[0].childNodes[0]).remove()):(t=this.getSpanTag(),this.labelContent.find("p:first").append(t),this.labelContent.find("p:first").find("span:first").text(n.textContent),$(this.labelContent.find("p:first")[0].childNodes[0]).remove())),this.textRange||(this.textRange=this.getRange()),u=this.labelContent[0].firstChild?this.labelContent[0].firstChild:document.body,this.textRange.setStart(u,1),this.textRange.collapse(!0),this.labelSelection.addRange(this.textRange);else for(i=0;i<this.labelContent[0].childNodes.length;i++)r=this.labelContent[0].childNodes[i],r.tagName==="SPAN"&&this.labelContent.find("p").append($(r));this.scrollLabelDiv.ejScroller({height:this.labelDiv.height(),width:this.labelDiv.width()})},n.prototype.getRange=function(){var n,t,i;return this.labelSelection=window.getSelection?window.getSelection():document.getSelection(),n=null,this.browserInfo.name==="msie"&&this.browserInfo.version==="8.0"?(t=this.saveSelection(),n=this.textRange&&t.offsetLeft===0&&t.offsetTop===0&&t.boundingHeight===0?this.textRange:t):this.labelSelection&&this.labelSelection.rangeCount>0&&this.labelSelection.getRangeAt(0)?n=this.labelSelection.getRangeAt(0):(n=document.createRange(),i=this.labelContent[0].firstChild?this.labelContent[0].firstChild:document.body,n.setStart(i,0),n.setEnd(i,0)),n},n.prototype.getSpanTag=function(){var n=$(document.createElement("span"));return n.css({"white-space":"pre-wrap","font-family":this.fontFamily,color:this.fontColor,"font-size":this.fontSize,"font-style":this.fontStyle,"font-weight":this.fontWeight,"text-decoration":this.textDecoration,"background-color":this.textHighlightColor,height:this.fontSize}),n},n.prototype.saveSelection=function(){var n=null,t;return this.labelSelection&&(this.labelSelection.createRange?n=this.labelSelection.createRange():this.labelSelection.rangeCount>0&&this.labelSelection.getRangeAt(0)?n=this.labelSelection.getRangeAt(0):this.labelSelection.anchorNode&&this.labelSelection.focusNode?(n=document.createRange(),n.setStart(this.labelSelection.anchorNode,this.labelSelection.anchorOffset),n.setEnd(this.labelSelection.focusNode,this.labelSelection.focusOffset),n.collapsed!==this.labelSelection.isCollapsed&&(n.setStart(this.labelSelection.focusNode,this.labelSelection.focusOffset),n.setEnd(this.labelSelection.anchorNode,this.labelSelection.anchorOffset))):(n=document.createRange(),t=this.labelContent[0].firstChild?this.labelContent[0].firstChild:document.body,n.setStart(t,0),n.setEnd(t,0))),n},n.prototype.saveReportItem=function(){for(var n,u,f,t,i=[],r=0;r<this.labelContent[0].childNodes.length;r++)i=this.getParents(this.labelContent[0].childNodes[r],i);if(n=i.length,n>this.labelJson.LineCollection.length)for(u=n-this.labelJson.LineCollection.length,t=0;t<u;t++)this.labelJson.LineCollection.push(new LineProperties);else if(n>0&&n<this.labelJson.LineCollection.length)for(f=this.labelJson.LineCollection.length-n,t=f;t>0;t--)this.labelJson.LineCollection.splice(this.labelJson.LineCollection.length-1,1);this.saveLine(i);ej.DashboardUtil.getInstance().validateAndUpdateParameterColumn();ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.getParents=function(n,t){var u,r,i;if(n.childNodes.length<1&&(n.tagName==="P"||n.tagName==="DIV"))t.push(n);else if(n.tagName==="P"||n.tagName==="DIV"||n.tagName==="LI")if($("p ~ ul").length>0||$("p ~ ol").length>0)for(u=0;u<n.childNodes.length;u++)if(r=n.childNodes[u],r.tagName==="UL"||r.tagName==="OL")for(i=0;i<r.childNodes.length;i++)r.childNodes[i].tagName==="LI"&&t.push(n.childNodes[i]);else t.push(n);else t.push(n);else if(n.tagName==="UL"||n.tagName==="OL")for(i=0;i<n.childNodes.length;i++)n.childNodes[i].tagName==="LI"&&t.push(n.childNodes[i]);return t},n.prototype.saveLine=function(n){for(var o,i,s,h,r,c,l=n.length,u=0;u<l;u++){var f=n[u],t=this.labelJson.LineCollection[u],e=[];for(o=0;o<f.childNodes.length;o++)e=this.getChildrens(f.childNodes[o],e);if(i=e.length,i>t.TextCollections.length)for(t.TextCollections.push(new TextCollectionProperties),s=i-t.TextCollections[0].Text.length,r=0;r<s;r++)t.TextCollections[0].Text.push(new TextProperties);else if(i<t.TextCollections.length)for(h=t.TextCollections[0].Text.length-(i>1?i:1),r=h;r>0;r--)t.TextCollections[0].Text.splice(t.TextCollections[0].Text.length-1,1);t.LineStyleProperties=new LineStyleProperties;c=ej.DashboardUtil.isEmptyString(f.style.textAlign)?this.textAlignment:f.style.textAlign;t.LineStyleProperties.LineTextAlignment=this.getJsonTextAlignment(c);this.saveText(e,t)}},n.prototype.getChildrens=function(n,t){if(n.childNodes.length>0)for(var i=0;i<n.childNodes.length;i++)this.getChildrens(n.childNodes[i],t);else t.push(n);return t},n.prototype.saveText=function(n,t){for(var i,r,f=0;f<n.length;f++){var o=n[f],u=t.TextCollections[0].Text[f],e=[];u.Content=o.textContent;e=this.getChildrenStyle(o,e);u.TextStyle=new TextStyleProperties;e.length>0&&(i=e[0],r={fontColor:ej.DashboardUtil.isEmptyString(i.color)?this.fontColor:i.color,fontFamily:ej.DashboardUtil.isEmptyString(i.fontFamily)?this.fontFamily:i.fontFamily,fontSize:ej.DashboardUtil.isEmptyString(i.fontSize)?this.fontSize:i.fontSize,fontStyle:ej.DashboardUtil.isEmptyString(i.fontStyle)?this.fontStyle:i.fontStyle,fontWeight:ej.DashboardUtil.isEmptyString(i.fontWeight)?this.fontWeight:i.fontWeight,textDecoration:ej.DashboardUtil.isEmptyString(i.textDecoration)?this.textDecoration:i.textDecoration,textHighlightColor:ej.DashboardUtil.isEmptyString(i.backgroundColor)?this.textHighlightColor:i.backgroundColor},u.TextStyle.FontFamily=r.fontFamily,u.TextStyle.FontColor=r.fontColor.search("rgb")!==-1?this.getHexColor(r.fontColor):r.fontColor,u.TextStyle.FontSize=r.fontSize,u.TextStyle.FontStyle=this.getJsonFontStyle(r.fontStyle),u.TextStyle.FontWeight=this.getJsonFontWeight(r.fontWeight),u.TextStyle.TextDecoration=this.getJsonTextDecoration(r.textDecoration),u.TextStyle.TextHighlightColor=r.textHighlightColor==="None"?"None":r.textHighlightColor.search("rgb")!==-1?this.getHexColor(r.textHighlightColor):r.textHighlightColor)}},n.prototype.getHexColor=function(n){return n=n.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i),n&&n.length===4?("#"+("0"+parseInt(n[1],10).toString(16)).slice(-2)+("0"+parseInt(n[2],10).toString(16)).slice(-2)+("0"+parseInt(n[3],10).toString(16)).slice(-2)).toUpperCase():""},n.prototype.getChildrenStyle=function(n,t){if(n.nodeName==="#text"&&n.parentNode.tagName==="SPAN")while(n.parentNode&&n.parentNode.tagName==="SPAN")t.push(n.parentNode.style),n=n.parentNode;else n.tagName==="SPAN"?t.push(n.style):(t.push(n.parentNode.style),n.parentNode.tagName==="EM"||n.parentNode.tagName==="I"?t[0].fontStyle="italic":n.parentNode.tagName==="STRONG"||n.parentNode.tagName==="B"?t[0].fontWeight="bold":n.parentNode.tagName==="U"?t[0].textDecoration="underline":(n.parentNode.tagName==="STRIKE"||n.parentNode.tagName==="S")&&(t[0].textDecoration="line-through"));return t},n.prototype.updateLabelItemPropertyChange=function(n,t,i,r){var u=!1;this.textRange||(this.labelContent.focus(),this.textRange=this.getRange(),this.textRange.setStart(this.labelContent[0].firstChild,0),this.textRange.setEnd(this.labelContent[0].firstChild,0),this.labelSelection.removeAllRanges(),this.labelSelection.addRange(this.textRange));this.isTextEdit=!0;switch(n){case"Name":this.labelJson.UniqueName=i;this.labelJson.Name=i;break;case"FontColor":this.updateSelectedFontColor(i);this.propertyValue.FontColor=i;break;case"BackgroundColor":this.updateSelectedBackgroundColor(i);break;case"TextHighlightColor":i=this.textRange.startOffset===this.textRange.endOffset?"None":i;this.updateSelectedTextHighlightColor(i);this.propertyValue.TextHighlightColor=i;break;case"FontFamily":this.updateSelectedFontFamily(i);this.propertyValue.FontFamily=i;break;case"FontSize":this.updateSelectedFontSize(i);this.propertyValue.FontSize=i;break;case"FontWeight":this.updateSelectedFontWeight(i);this.propertyValue.FontWeight=i;break;case"FontStyle":this.updateSelectedFontStyle(i);this.propertyValue.FontStyle=i;break;case"TextDecoration":this.updateSelectedTextDecoration(i);this.propertyValue.TextDecoration=i;break;case"TextHorizontalAlign":this.updateSelectedTextHorizontalAlign(i);break;default:u=!0}$("#"+this.designId+"LabelContent"+this.labelJson.Name+"span:empty").remove();this.textRange=this.getRange();this.focus();u||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-label-item",this.designer._id+"_"+this.labelJson.UniqueName,[n,i,t,r],[n,t,i,r])},n.prototype.focus=function(){this.labelContent.focus();this.restoreSelection(this.textRange)},n.prototype.restoreSelection=function(n){this.labelSelection||(this.labelSelection=window.getSelection?window.getSelection():document.getSelection());n&&(this.labelSelection?(this.labelSelection.removeAllRanges(),this.labelSelection.addRange(n)):n.select&&n.select())},n.prototype.updateSelectedFontFamily=function(n){this.editorManager.execCommand(ExecCommand.Fontname,n,this.textRange)},n.prototype.updateSelectedFontColor=function(n){this.editorManager.execCommand(ExecCommand.Forecolor,n,this.textRange)},n.prototype.updateSelectedBackgroundColor=function(n){this.labelContent.css({"background-color":n});this.labelJson.LabelBackgroundColor=n},n.prototype.updateSelectedTextHighlightColor=function(n){this.editorManager.execCommand(ExecCommand.Backgroundcolor,n,this.textRange)},n.prototype.updateSelectedFontSize=function(n){this.editorManager.execCommand(ExecCommand.Fontsize,n+"px",this.textRange)},n.prototype.updateSelectedFontStyle=function(n){var t=this.getFontStyle(n);this.editorManager.execCommand(ExecCommand.Fontstyle,t,this.textRange)},n.prototype.updateSelectedFontWeight=function(n){var t=this.getFontWeight(n);this.editorManager.execCommand(ExecCommand.Fontweight,t,this.textRange)},n.prototype.updateSelectedTextDecoration=function(n){var t=this.getTextDecoration(n);this.editorManager.execCommand(ExecCommand.Textdecoration,t,this.textRange)},n.prototype.updateSelectedTextHorizontalAlign=function(n){var t=this.getTextAlignment(n);this.editorManager.execCommand(ExecCommand.TextAlign,t,this.textRange)},n.prototype.getFontStyle=function(n){var t="";switch(n){case"Normal":t="normal";break;case"Italic":t="italic"}return t},n.prototype.getJsonFontWeight=function(n){var t;switch(n){case"normal":t="Normal";break;case"bold":t="Bold";break;default:t="Normal"}return t},n.prototype.getJsonFontStyle=function(n){var t="Default";switch(n){case"italic":t="Italic";break;case"normal":t="Normal";break;default:t="Normal"}return t},n.prototype.getJsonTextDecoration=function(n){var t;switch(n){case"none":t="None";break;case"underline":t="Underline";break;default:t="None"}return t},n.prototype.getTextDecoration=function(n){var t="";switch(n){case"None":t="none";break;case"Underline":t="underline"}return t},n.prototype.getJsonTextAlignment=function(n){var t;switch(n){case"left":t="Left";break;case"right":t="Right";break;case"center":t="Center";break;default:t="Left"}return t},n.prototype.getTextAlignment=function(n){var t="";switch(n){case"Left":t="left";break;case"Right":t="right";break;case"Center":t="center"}return t},n.prototype.getFontWeight=function(n){var t="";switch(n){case"Normal":t="normal";break;case"Bold":t="bold";break;default:t="normal"}return t},n.prototype.getPropertyGridItems=function(){this.isSelectedText=!ej.isNullOrUndefined(this.textRange)&&this.textRange.endOffset-this.textRange.startOffset>0?!0:!1;var n=!this.labelContent.hasClass("e-editable-area");return{Header:this.labelJson.UniqueName,Type:"Label",Items:[{CategoryName:"Basic Settings",Items:[{name:"FontFamily",displayName:"Font Family",value:this.getPropertyPanelFontFamily(),itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames(),isDisable:n},{name:"FontColor",displayName:"Font Color",value:this.getPropertyPanelFontColor(),itemType:"color",isDisable:n},{name:"BackgroundColor",displayName:"Background Color",value:this.getPropertyPanelBackgroundColor(),itemType:"color",isDisable:n},{name:"TextHighlightColor",displayName:"Text Highlight Color",value:this.getPropertyPanelTextHighlightColor(),itemType:"color",isDisable:n},{name:"FontSize",displayName:"Font Size",value:this.getPropertyPaneltFontSize(),minimum:8,maximum:100,unitType:"pixel",itemType:"float",decimalPlaces:0,isDisable:n},{name:"FontStyle",displayName:"Font Style",value:this.getPropertyPaneltFontStyle(),itemType:"dropdown",valueList:["Normal","Italic"],isDisable:n},{name:"FontWeight",displayName:"Font Weight",value:this.getPropertyPanelFontWeight(),itemType:"dropdown",valueList:["Normal","Bold"],isDisable:n},{name:"TextDecoration",displayName:"Text Decoration",value:this.getPropertyPanelTextDecoration(),itemType:"dropdown",valueList:["None","Underline"],isDisable:n},{name:"TextHorizontalAlign",displayName:"Text Horizontal Alignment",value:this.getPropertyPanelTextAlignment(),itemType:"dropdown",valueList:["Left","Center","Right"],isDisable:n}]}]}},n.prototype.getPropertyPanelFontFamily=function(){var n="Roboto";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=$(i).closest("span");r.length>0?n=r.css("font-family"):this.labelContent.find("span:first-child").length>0?n=this.labelContent.find("span:first-child").css("font-family"):t&&t.style&&(n=t.style.fontFamily)}return n=n.replace(/['"]+/g,""),n=ej.DashboardUtil.getFontNames().toString().search(n)!==-1?n:"Roboto",ej.DashboardUtil.isEmptyString(n)?"Roboto":n},n.prototype.getPropertyPanelFontColor=function(){var n="#000000";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=$(i).closest("span");r.length>0?n=r.css("color"):this.labelContent.find("span:first-child").length>0?n=this.labelContent.find("span:first-child").css("color"):t&&t.style&&(n=t.style.color)}return n.search("rgb")!==-1&&(n=this.getHexColor(n)),!ej.isNullOrUndefined(n)&&!ej.DashboardUtil.isEmptyString(n)?n:"#000000"},n.prototype.getPropertyPanelBackgroundColor=function(){var n="#ffffff";return this.labelContent.attr("contenteditable")==="true"&&this.textRange&&(n=$(this.labelContent).css("background-color")),n.search("rgb")!==-1&&(n=this.getHexColor(n)),!ej.isNullOrUndefined(n)&&!ej.DashboardUtil.isEmptyString(n)?n:"#ffffff"},n.prototype.getPropertyPanelTextHighlightColor=function(){var n="#f5ea14";return this.labelContent.attr("contenteditable")==="true"&&this.textRange&&(n=ej.DashboardUtil.isEmptyString(this.propertyValue.TextHighlightColor)?"#f5ea14":this.propertyValue.TextHighlightColor),n.search("rgb")!==-1&&(n=this.getHexColor(n)),n},n.prototype.getPropertyPaneltFontSize=function(){var n=12;if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=$(i).closest("span");r.length>0?n=r.css("font-size"):this.labelContent.find("span:first-child").length>0?n=this.labelContent.find("span:first-child").css("font-size"):t&&t.style&&(n=t.style.fontSize)}return n?n:12},n.prototype.getPropertyPaneltFontStyle=function(){var n="Normal";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=$(i).closest("span");r.length>0?n=this.getJsonFontStyle(r.css("font-style")):this.labelContent.find("span:first-child").length>0?n=this.getJsonFontStyle(this.labelContent.find("span:first-child").css("font-style")):t&&t.style&&(n=this.getJsonFontStyle(t.style.fontStyle))}return n},n.prototype.getPropertyPanelFontWeight=function(){var n="Normal";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=$(i).closest("span");r.length>0?n=this.getJsonFontWeight(r[0].style.fontWeight):this.labelContent.find("span:first-child").length>0?n=this.getJsonFontWeight(this.labelContent.find("span:first-child").css("font-weight")):t&&t.style&&(n=this.getJsonFontWeight(t.style.fontWeight))}return n},n.prototype.getPropertyPanelTextDecoration=function(){var n="None";if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var i=this.textRange.commonAncestorContainer,t=i.parentNode,r=$(i).closest("span");r.length>0?n=this.getJsonTextDecoration(r[0].style.textDecoration):this.labelContent.find("span:first-child").length>0?n=this.getJsonTextDecoration(this.labelContent.find("span:first-child").css("text-decoration")):t&&t.style&&(n=this.getJsonTextDecoration(t.style.textDecoration))}return n},n.prototype.getPropertyPanelTextAlignment=function(){var n="Left",u;if(this.labelContent.attr("contenteditable")==="true"&&this.textRange){var t=this.textRange.commonAncestorContainer,i=t.parentNode,r=$(t).closest("p");r.length>0?n=this.getJsonTextAlignment(r.css("text-align")):i&&(u=$(i).closest("p").css("text-align"),n=this.getJsonTextAlignment(u))}return n},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.labelJson,CommandAction.ItemMove,"updatePosition","e-treemap-item")},n.prototype.updateWidgetSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.labelJson,CommandAction.ItemResize,"updateSize","e-label-item");this.designPanel.updateWidgetSelectionBox(this.labelContent);this.scrollLabelDiv.ejScroller({height:this.labelDiv.height(),width:this.labelDiv.width()})},n.prototype.updateItemSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.labelJson,CommandAction.ItemResize,"updateItemSize","e-label-item");this.designPanel.updateWidgetSelectionBox(this.labelContent);this.scrollLabelDiv.ejScroller({height:this.labelDiv.height(),width:this.labelDiv.width()})},n.prototype.getItemDefaultCategoriesInfo=function(){return[]},n.prototype.getItemDataCategoriesInfo=function(){return[]},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.labelJson)&&(this.labelJson=this.getLabelJson()),this.labelJson},n.prototype.getLabelJson=function(){var n=new LabelProperties;return n.ContainerSettings.ShowHeader=!1,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.labelIemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.labelJson.UniqueName,[this.labelJson],null);this.controlContainer.removeData("widgetInstance").remove();this.editorManager=null;this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Label)},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].hasClass("e-label-item")&&ej.DashboardUtil.getWidgetInstance(this.designPanel.selectedReportItems[0]).disableLabelEdit(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-dashboarddesigner-label-editor e-dashboarddesigner-selection-edit e-moveicon e-toolbarfonticonbasic",2),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n.prototype.getParameterColumn=function(){return{Value:this.designer.element.find("#"+this.designId+"labelDiv"+this.labelJson.UniqueName)[0].innerText,Id:null}},n.prototype.getSettingsInfo=function(){return{className:"e-dashboarddesigner-label-editor e-dashboarddesigner-selection-edit e-moveicon e-toolbarfonticonbasic",pathLength:2}},n}();window.ej.createObject("ej.DashboardDesignerUtility.LabelItem",InternalLabelReportItem,window);ej.DashboardDesignerUtility.LabelItem.prototype.widgetItems(),function(n){n.Normal="Normal";n.Bold="Bold"}(FontWeight||(FontWeight={})),function(n){n.Normal="Normal";n.Italic="Italic"}(FontStyle||(FontStyle={})),function(n){n.Underline="Underline";n.None="None"}(TextDecoration||(TextDecoration={})),function(n){n.Left="Left";n.Right="Right";n.Center="Center"}(TextHorizontalAlignment||(TextHorizontalAlignment={}));InternalListBoxReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="ListBox";this.isMasterByDefault=!0;this.rootCss="e-listbox-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.propertyPanel=null;this.listBoxElement=null;this.listBoxItem=null;this.contentContainer=null;this.listBoxJson=null;this.controlHeader=null;this.reportName=null;this.dataGroupInfo=null;this.dataConfiguration=null;this.containerProperties=null;this.isHeaderVisible=!0;this.dataValues=null;this.masterSlaveConfiguration=null;this.clonedData=null;this.isDefaultRendering=!1;this.allSpecialChar="&ZeroWidthSpace;";this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.ListBox;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.isDataEnabled=!0;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.masterSlaveConfiguration=ejDashboardDesigner.getInstance("MasterSlaveFilter");this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.getWidgetItemContainer=function(){return this.getReportItem()},n.prototype.render=function(n){this.renderListBoxItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.listBoxItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.listBoxJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateListBoxItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(){return!0},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getListBoxContainerInstance()},n.prototype.refresh=function(){var n=this.listBoxElement.data("ejListBox");n.refresh()},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(){return null},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"47b55968-2261-47d0-95ff-67f7a676358b",widgetName:"ListBox",widgetDisplayName:n.itemPanel.widgetTitle.listBox,cssClass:"e-widgeticon e-reportdesigner-widget-listbox",widgetNameSpace:"ej.DashboardDesignerUtility.ListBoxItem",searchCategory:["listbox","filters"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.listBox,description:n.itemPanel.widgetDescription.listBoxDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq}}]})},n.prototype.getListBoxContainerInstance=function(){return this.containerProperties},n.prototype.getPropertyGridItems=function(){var n=new ej.DashboardDesignerUtility.PropertyGridItem(this.listBoxJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.listBoxJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.listBoxJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.listBoxJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.listBoxJson.ContainerSettings.Description,n.propertyGridItems.Type="ListBox",n.filterSettingsProperty.Items[2].isVisible=!1,$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"EnableMultiSelect",displayName:"Enable Multiselect",value:this.listBoxJson.EnableMultiSelection,itemType:"bool"}]},n.filterSettingsProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.renderListBoxItem=function(){try{this.renderListBoxElement();this.listBoxJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ListBox)}catch(n){this.designPanel.logError({Source:this.listBoxJson.UniqueName,Error:n,Type:n.name})}},n.prototype.setWidgetJson=function(n){this.listBoxJson=n},n.prototype.renderListBoxReportElement=function(n){try{this.listBoxJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.listBoxJson.ContainerSettings.Bounds.Row,column:this.listBoxJson.ContainerSettings.Bounds.Column,rowSpan:this.listBoxJson.ContainerSettings.Bounds.RowSpan,colSpan:this.listBoxJson.ContainerSettings.Bounds.ColumnSpan};this.renderListBoxElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.listBoxJson.UniqueName,Error:t,Type:t.name})}},n.prototype.getListBoxJson=function(){var n=new ListBoxProperties;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n.FilterSettings.ActAsMasterWidget=!0,n},n.prototype.renderListBoxElement=function(){var n,t;this.listBoxItem=ej.buildTag("div.e-listboxitem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"listboxitem"+this.listBoxJson.UniqueName});this.listBoxElement=ej.buildTag("ul","",{margin:"0px",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"listboxelement"+this.listBoxJson.UniqueName});this.contentContainer.append(this.listBoxItem);this.controlContainer.data("widgetInstance",this);this.listBoxItem.append(this.listBoxElement);n=this.getDefaultData();this.listBoxElement.ejListBox({dataSource:n.Datasource,fields:n.Fields,showCheckbox:this.listBoxJson.EnableMultiSelection,width:this.listBoxItem.width().toString(),height:this.listBoxItem.height().toString(),checkChange:$.proxy(this.selectionChange,this),select:$.proxy(this.selectionChange,this),change:$.proxy(this.selectionChange,this),create:$.proxy(this.createScrollBar,this)});this.allStateCheck();this.isDefaultRendering&&this.listBoxJson.EnableMultiSelection&&(t=this.listBoxElement.data("ejListBox"),t.checkAll())},n.prototype.getDefaultData=function(){var n=[{itemId:"i1",itemName:"Item1"},{itemId:"i2",itemName:"Item2"},{itemId:"i3",itemName:"Item3"},{itemId:"i4",itemName:"Item4"},{itemId:"i5",itemName:"Item5"},{itemId:"i6",itemName:"Item6"},{itemId:"i7",itemName:"Item7"}];return this.listBoxJson.EnableMultiSelection&&n.unshift({itemId:this.allSpecialChar+"All",itemName:this.allSpecialChar+"All"}),this.isDefaultRendering=!0,{Datasource:n,Fields:{id:"itemId",text:"itemName"}}},n.prototype.allStateCheck=function(n){var t=this.listBoxElement.data("ejListBox"),r=!1,i,u;return!ej.isNullOrUndefined(t)&&this.listBoxJson.EnableMultiSelection&&(ej.isNullOrUndefined(n)||t.getIndexByText(n.text)!==0||n.item.attr("id").indexOf(this.allSpecialChar)===-1?(i=this.listBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]"),i.length===1?(u=i.parent("li"),u.index()===0&&u.attr("id").indexOf(this.allSpecialChar)!==-1?(t.checkItemByIndex(0),this.clearFilter(),r=!0):t.uncheckItemByIndex(0)):i.length>1&&t.uncheckItemByIndex(0)):(this.clearFilter(),n.event.isChecked?t.checkAll():t.unCheckAll(),r=!0)),r},n.prototype.createScrollBar=function(){this.listBoxElement.ejListBox("instance").listContainer.ejScroller({enableTouchScroll:!1,autoHide:!0,cssClass:"e-dbrd-designer-scroller e-dbrd-control",buttonSize:14})},n.prototype.updateListBoxItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.listBoxJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.listBoxJson);break;case"Description":this.propertyPanel.setDescription(this.listBoxJson,i);break;case"EnableMultiSelect":this.updateEnableMultiSelect(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.listBoxJson,i);break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.listBoxItem.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"Line",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-listbox",this.designer._id+"_"+this.listBoxJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updateEnableMultiSelect=function(n){var f=this,t,i,u,e,r,o;this.listBoxJson.EnableMultiSelection=n;t=this.listBoxElement.data("ejListBox");ej.isNullOrUndefined(t)||(i=t.option("dataSource"),u=t.getSelectedItems(),t.option("showCheckbox",n),n?this.isDefaultRendering?(o=this.getDefaultData(),t.option("dataSource",o.Datasource),t.checkAll()):(t.option("dataSource",this.allTextInsertion(i)),t.refresh(),u.length>0?t.checkItemByIndex(t.getIndexByText(u[0].text)):t.checkAll()):(e=this.getColumns(i)[0].text,r=this.isDefaultRendering?t.getListData().filter(function(n){return n.itemName.indexOf(f.allSpecialChar)!==-1}):t.getListData().filter(function(n){return n[e].toString().indexOf(f.allSpecialChar)!==-1}),!ej.isNullOrUndefined(r)&&r.length>0&&(i.splice(r.index,1),t.option("dataSource",i),t.refresh()),this.clearFilter()))},n.prototype.updateWidgetSize=function(n){var i,t;this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.listBoxJson,CommandAction.ItemResize,"updateSize","e-listbox-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):(i=$("#"+this.designId+"listboxelement"+this.listBoxJson.UniqueName+"_container").data("ejScroller"),i.refresh(),t=this.listBoxElement.data("ejListBox"),t&&(t.model.height="100%",t.model.width="100%"),t.refresh())},n.prototype.updateItemSize=function(n){var i,t;this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.listBoxJson,CommandAction.ItemResize,"updateItemSize","e-listbox-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):(i=$("#"+this.designId+"listboxelement"+this.listBoxJson.UniqueName+"_container").data("ejScroller"),i.refresh(),t=this.listBoxElement.data("ejListBox"),t&&(t.model.height="100%",t.model.width="100%"),t.refresh())},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.listBoxJson,CommandAction.ItemMove,"updatePosition","e-listbox-item")},n.prototype.updateReportItemDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions"}),n},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Column",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}),n},n.prototype.isFieldValid=function(n,t,i){return!(t===CategoryType[CategoryType.Non_Numeric]&&i==="Column"&&n.toLowerCase()==="true")},n.prototype.updateReportItemData=function(n){var i,t,r,u;this.dataValues-n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.listBoxItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");i=this.listBoxElement.data("ejListBox");ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.listBoxJson,this.dataGroupInfo);t=null;ej.isNullOrUndefined(n.Error)||n.Error?ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):n.noDataAvailable?(this.listBoxItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):!ej.isNullOrUndefined(n)&&n.data!=="[]"&&ej.isNullOrUndefined(n.isDataSetEmpty)?(t=JSON.parse(n.data),r=this.getColumns(t),i.model.fields.id=r[0].id,i.model.fields.text=r[0].text,t=this.allTextInsertion(t),this.isDefaultRendering=!1):(n.data==="[]"&&n.columnBindings==="{}"||!ej.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(u=this.getDefaultData(),t=u.Datasource,i.model.fields=u.Fields,this.clearFilter(),this.allStateCheck());ej.isNullOrUndefined(t)||(i.option("dataSource",t),this.updateOrRemovedInitialSelection(i),this.allStateCheck(),this.listBoxJson.SelectedFilterValues.length===0&&this.listBoxJson.EnableMultiSelection&&i.checkAll())},n.prototype.allTextInsertion=function(n){if(this.listBoxJson.EnableMultiSelection){var i=this.getColumns(n),r=i[0].text,t={};t[r]=this.allSpecialChar+"All";n.unshift(t)}return n},n.prototype.getColumns=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},n.prototype.getSelectedItems=function(){var r={UnselectedItems:[],SelectedItems:[]},n;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0)for(n=0;n<this.listBoxJson.SelectedFilterValues.length;n++){var t=this.listBoxJson.SelectedFilterValues[n],i=this.dataGroupInfo.Values[0].Values[0],u=i.FieldActualType==="e-reportdesigner-dataset-string"||i.FieldActualType==="e-reportdesigner-dataset-number",o=i.FieldActualType==="e-reportdesigner-dataset-datetime"||i.FieldActualType==="e-reportdesigner-dataset-time",f=u?t.InitialDimensionFilter.Text:t.InitialDateFilter.DisplayDateFilterList,e=u?ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,t.InitialDimensionFilter.DimesnionFilterCondition):ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,t.InitialDateFilter.DateFilterCondition);e===ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude)||e===ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Exclude)?r.UnselectedItems=f:r.SelectedItems=f}return r},n.prototype.selectionChange=function(n){var l=this,v,f,s,y,e;if(this.masterSlaveConfiguration.isValidDataGroupInfo(this.listBoxJson,this.dataGroupInfo)&&!ej.isNullOrUndefined(n.event)){if(e=this.listBoxJson.EnableMultiSelection?n.event.isInteraction:n.isInteraction,e){if(this.allStateCheck(n))return;var i=[],o=this.listBoxElement.data("ejListBox"),t=this.dataGroupInfo.Values[0].Values[0];this.clonedData=$.extend(!0,{},t);var h=t.FieldActualType==="e-reportdesigner-dataset-string"||t.FieldActualType==="e-reportdesigner-dataset-number",c=t.FieldActualType==="e-reportdesigner-dataset-datetime"||t.FieldActualType==="e-reportdesigner-dataset-time",p=h?"e-reportdesigner-dataset-string":t.FieldActualType,r=h?ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include):c?ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include):ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),a=[],u=[];ej.isNullOrUndefined(o)||(v=this.listBoxJson.EnableMultiSelection?o.getCheckedItems():o.getSelectedItems(),f=[],v.forEach(function(n){f.push(n.text)}),this.listBoxJson.EnableMultiSelection?(s=this.getInitialSelectionFilterValues(o,t,r,f),r=s.Action,h?(i=s.FilterInfo,r=i.length>0?r:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),i=i.filter(function(n){return n.indexOf(l.allSpecialChar)===-1})):c&&(u=s.FilterInfo,u=u.length>0?u.filter(function(n){return n.indexOf(l.allSpecialChar)===-1}):u,a=t.DateTimeFormat===ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Default)?this.masterSlaveConfiguration.getDateFilterList(u,!0):u,i={DateFormat:t.DateTimeFormat,DisplayFilterList:u,DateFilterList:a},r=u.length>0?r:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include))):(r=f.length>0?r:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),i=c?i={DateFormat:t.DateTimeFormat,DisplayFilterList:f,DateFilterList:f}:f));y={FilterInfo:i,Action:r,IsStdDateTime:!1};this.listBoxJson.SelectedFilterValues=[this.masterSlaveConfiguration.updateInitialFiltersForFilterControls(t.UniqueColumnName,this.listBoxJson.UniqueName,p,y)];i.length===0?this.clearFilter():this.masterSlaveConfiguration.enableClearFilter(this.controlHeader);ej.DashboardDesignerUtility.Serialization.notifyChange()}}else this.isDefaultRendering&&(e=!ej.isNullOrUndefined(n.event)&&(this.listBoxJson.EnableMultiSelection?n.event.isInteraction:n.isInteraction),e&&this.allStateCheck(n))},n.prototype.getInitialSelectionFilterValues=function(n,t,i,r){var u=[],f,e;return r.length>n.getListData().length/2?(f=this.getExcludedValuesForInitialSelection(n.getListData(),i,r,t),u=f.UnselectedItems,i=f.InitialFilterCondition):(e=n.getCheckedItems(),e.forEach(function(n){u.indexOf(n.text)===-1&&u.push(n.text)}),i=ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include)),{Action:i,FilterInfo:u}},n.prototype.getExcludedValuesForInitialSelection=function(n,t,i,r){var e=[],f,u;for(t=ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude),f=n.filter(function(n){return i.indexOf(n[r.UniqueColumnName])<0}),u=0;u<f.length;u++)e.push(f[u][r.UniqueColumnName]);return{UnselectedItems:e,InitialFilterCondition:t}},n.prototype.updateOrRemovedInitialSelection=function(n){var u,i;if(this.listBoxJson.FilterSettings.ActAsMasterWidget&&!ej.isNullOrUndefined(n)&&this.listBoxJson.SelectedFilterValues.length>0){var r=[],t=this.dataGroupInfo.Values[0].Values[0],e=t.FieldActualType==="e-reportdesigner-dataset-string"||t.FieldActualType==="e-reportdesigner-dataset-number",o=t.FieldActualType==="e-reportdesigner-dataset-datetime"||t.FieldActualType==="e-reportdesigner-dataset-time",f=this.masterSlaveConfiguration.isColumnFilterModified(this.clonedData,t);f?this.clearFilter():(r=this.getSelectedItems(),u=n.model.dataSource,i=[],this.listBoxJson.EnableMultiSelection?(n.unCheckAll(),r.SelectedItems.length>0?i=this.getSelectedIndexValues(r.SelectedItems,[],u,t):r.UnselectedItems.length>0&&(i=this.getSelectedIndexValues([],r.UnselectedItems,u,t)),i.length>0&&n.checkItemsByIndices(i)):(n.unSelectAll(),i=this.getSelectedIndexValues(r.SelectedItems,[],u,t),n.selectItemByIndex(i[0])),i.length===0?this.clearFilter():this.masterSlaveConfiguration.enableClearFilter(this.controlHeader))}},n.prototype.getSelectedIndexValues=function(n,t,i,r){for(var u,e=[],f=0;f<n.length;f++)for(u=0;u<i.length;u++)n[f]===i[u][r.UniqueColumnName].toString()&&e.indexOf(u)===-1&&e.push(u);for(f=0;f<t.length;f++)for(u=0;u<i.length;u++)t[f]!==i[u][r.UniqueColumnName].toString()&&i[u][r.UniqueColumnName].toString().indexOf(this.allSpecialChar)===-1&&e.indexOf(u)===-1&&e.push(u);return e},n.prototype.clearFilter=function(){var t=this.listBoxElement.data("ejListBox"),n;ej.isNullOrUndefined(t)||(t.unSelectAll(),n=ejDashboardDesigner.getInstance("DashboardDesigner"),!ej.isNullOrUndefined(n)&&n.clearmasterFilter&&(n.clearmasterFilter=!1,t.checkAll()));this.masterSlaveConfiguration.disableClearFilter(this.controlHeader);this.listBoxJson.SelectedFilterValues=[];ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.listBoxItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.listBoxJson.UniqueName,[this.listBoxJson],null);var n=this.listBoxElement.data("ejListBox");ej.isNullOrUndefined(n)||n.destroy();$("#"+this.designer._id+"_"+this.listBoxJson.UniqueName).removeData("widgetInstance").remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ListBox)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.listBoxJson)&&(this.listBoxJson=this.getListBoxJson()),this.listBoxJson},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration"),r;return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),r=this,$.each($(t.element).children(),function(n,t){($(t).find("a").attr("fieldmenuname").toLowerCase()==="sort"||$(t).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters")&&$(t).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null,r=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Ones,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n.prototype.getParameterColumn=function(){return{Value:this.listBoxJson.ContainerSettings.Title,Id:this.listBoxJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n}();window.ej.createObject("ej.DashboardDesignerUtility.ListBoxItem",InternalListBoxReportItem,window);ej.DashboardDesignerUtility.ListBoxItem.prototype.widgetItems();InternalRadialGaugeReportItem=function(){function n(){this.rootCss="e-radialgauge-item";this.cellInfo=null;this.controlContainer=null;this.dataGroupInfo=null;this.pluginId="";this.reportName=null;this.itemName="RadialGauge";this.isMasterByDefault=!1;this.menuSettingsIconVisible=!0;this.customGauge=null;this.radialgaugeJson=null;this.contentContainer=null;this.isHeaderVisible=!0;this.controlHeader=null;this.dataConfiguration=null;this.radius=null;this.targetRadius=null;this.seriesWidth=null;this.widgetDataObj=null;this.seriesHeight=null;this.containerProperties=null;this.dataValues=null;this.actualValue=40;this.targetValue=null;this.customMin=0;this.customMax=100;this.maxFormat="";this.hasActual=!1;this.hasTarget=!1;this.hasStart=!1;this.hasEnd=!1;this.hasSeries=!1;this.range="Range 1";this.hasResponsive=!1;this.prevRadius=0;this.isFromProp=!1;this.isRangeUpdated=!1;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.isDataEnabled=!0;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.RadialGauge;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.deviation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051555",Items:[{id:"f48aed7c-c972-43c1-8668-a0c9b89c1809",widgetName:"RadialGauge",widgetDisplayName:n.itemPanel.widgetTitle.gauge,cssClass:"e-widgeticon e-reportdesigner-widget-gauge",widgetNameSpace:"ej.DashboardDesignerUtility.RadialGaugeItem",searchCategory:["gauge","deviation"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.gauge,description:n.itemPanel.widgetDescription.gaugeDesc,dataRequirement:n.itemPanel.widgetDataRequirements.gaugeDataReq}}]})},n.prototype.getrootCss=function(){return this.rootCss},n.prototype.render=function(n){return this.renderRadialGaugeItem(n)},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.getWidgetItemContainer=function(){return this.getReportItem()},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.getContainerInstance=function(){return this.containerProperties},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.refresh=function(){},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.onFieldDragDrop=function(n){return this.onFieldDragDropped(n)},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.renderRadialGaugeReportElement=function(n){try{this.radialgaugeJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.radialgaugeJson.ContainerSettings.Bounds.Row,column:this.radialgaugeJson.ContainerSettings.Bounds.Column,rowSpan:this.radialgaugeJson.ContainerSettings.Bounds.RowSpan,colSpan:this.radialgaugeJson.ContainerSettings.Bounds.ColumnSpan};this.renderRadialGaugeElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.radialgaugeJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderRadialGaugeItem=function(){try{this.renderRadialGaugeElement();this.radialgaugeJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo)}catch(n){this.designPanel.logError({Source:this.radialgaugeJson.UniqueName,Error:n,Type:n.name})}},n.prototype.showLoadingIndicator=function(){$("#"+this.designId+"radialgaugeItem"+this.radialgaugeJson.UniqueName).ejWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){$("#"+this.designId+"radialgaugeItem"+this.radialgaugeJson.UniqueName).ejWaitingPopup("hide")},n.prototype.renderRadialGaugeElement=function(n){n===void 0&&(n=!1);this.radialgaugeItem=ej.buildTag("div.e-radialgaugeitem e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998"},{id:this.designPanel.designId+"Item"+this.radialgaugeJson.UniqueName});this.contentContainer.append(this.radialgaugeItem);this.controlContainer.data("widgetInstance",this);n||this.createRadialGaugeElement()},n.prototype.createRadialGaugeElement=function(){this.radialgaugeElement=ej.buildTag("div.e-radialgauge-element","",{width:"100%",height:"100%","box-sizing":"border-box",position:"relative","font-size":"12px","background-color":"white"},{id:this.designPanel.designId+"Element"+this.radialgaugeJson.UniqueName});this.radialgaugeItem.append(this.radialgaugeElement);ejdashboard.circulargauge.CircularGauge.Inject(ejdashboard.circulargauge.Annotations);ejdashboard.circulargauge.CircularGauge.Inject(ejdashboard.circulargauge.GaugeTooltip);this.seriesWidth=this.contentContainer.width();this.seriesHeight=this.contentContainer.height();this.customGauge=this.createDefaultGauge();this.customGauge.appendTo(this.radialgaugeElement[0])},n.prototype.showTooltip=function(n){var i,u,t,r;if(!ej.isNullOrUndefined(n.tooltip)){if(i=0,ej.isNullOrUndefined(this.widgetDataObj)){n.tooltip.template='<div style="background-color:white;border:1px solid #d3d3d3;padding:1px;"><div style="padding:1px;font-size:12px;color:#666666;font-family:Roboto;">40<\/div><\/div>';return}this.widgetDataObj.length>1&&(u=$(n.gauge.element).attr("id"),i=+u.split("_")[1]);t=JSON.parse(this.dataValues.columnBindings);r='<div style="background-color:white;border:1px solid #d3d3d3;padding:1px;z-index:1000px;"><div style="padding:1px;font-size:12px;color:#666666;font-family:Roboto;">'+(ej.isNullOrUndefined(t.column1)?t.Gauge_Column_0:t.column1)+": "+this.widgetDataObj[i].formattedActualValue+"<\/div>";this.hasTarget&&(r+='<div style="font-size:12px;color:#666666;font-family:Roboto;padding:1px;">'+(ej.isNullOrUndefined(t.column2)?t.Gauge_Column_1:t.column2)+": "+this.widgetDataObj[i].formattedTargetValue+"<\/div>",r+='<div style="font-size:12px;color:#666666;font-family:Roboto;padding:1px;"> Variation : '+this.widgetDataObj[i].varience+"<\/div>",r+='<div style="font-size:12px;color:#666666;font-family:Roboto;padding:1px;"> Percent of Target : '+this.widgetDataObj[i].percentOfVarience+"<\/div>");r+="<\/div>";n.tooltip.template=r}},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"RadialGauge",i);this.propertyPanel.canUpdate=!0},n.prototype.updatePosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.radialgaugeJson,CommandAction.ItemMove,"updatePosition","e-radialgauge-item")},n.prototype.updateSize=function(n){this.updateItemSize(n)},n.prototype.updateItemSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.radialgaugeJson,CommandAction.ItemResize,"updateItemSize","e-radialgauge-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):this.updateControlResizeValue(this.contentContainer.height(),this.contentContainer.width())},n.prototype.updateControlResizeValue=function(n,t){var i,r,u,f;if(this.radialgaugeItem.data("ejScroller")&&this.radialgaugeItem.ejScroller("destroy"),this.radialgaugeItem.css({width:"100%",height:"100%"}),ej.isNullOrUndefined(this.radialgaugeContent))this.seriesWidth=t,this.seriesHeight=n,f=this.getRadialGaugeObj(this.radialgaugeElement[0]),ej.isNullOrUndefined(f)||(this.setMarkerSize(f),this.setResponsiveProperty(f),f.refresh());else{for(i=null,this.radialgaugeContent.css({width:this.radialgaugeItem.width(),height:this.radialgaugeItem.height()}),r=0;r<this.radialgaugeContent.children().length;r++)u=this.getSizeForGauge(this.radialgaugeContent.children().length),$(this.radialgaugeContent.children()[r]).css({width:u.width,height:u.height}),i=this.getRadialGaugeObj(this.radialgaugeContent.children()[r]),this.seriesWidth=u.width,this.seriesHeight=u.height,this.setResponsiveProperty(i),this.setMarkerSize(i),i.refresh();this.radialgaugeItem.ejScroller({width:this.radialgaugeItem.width(),height:this.radialgaugeItem.height(),autoHide:!0,scrollerSize:5})}},n.prototype.setMarkerSize=function(n){for(var i=this.getMarkerSize(),r=n.axes[0].pointers.length,t=0;t<r;t++)(n.axes[0].pointers[t].markerShape==="Triangle"||n.axes[0].pointers[t].markerShape==="InvertedTriangle")&&(n.axes[0].pointers[t].markerWidth=i,n.axes[0].pointers[t].markerHeight=i)},n.prototype.updateNeedlePointerColor=function(n){var r,t,i;if(this.radialgaugeJson.NeedlePointerColor=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshNeedlePointerColor(i,n);else this.refreshNeedlePointerColor(this.radialgaugeElement[0],n)},n.prototype.refreshNeedlePointerColor=function(n,t){var i=this.getRadialGaugeObj(n),u,r;if(!ej.isNullOrUndefined(i))for(u=i.axes[0].pointers.length,r=0;r<u;r++)i.axes[0].pointers[r].type==="Needle"&&(i.axes[0].pointers[r].color=i.axes[0].pointers[r].cap.color=t,i.refresh())},n.prototype.renderGaugeWithRange=function(n,t,i){var u=this.getMarkerSize(),e=this.getNeedleWidth(),f=[],h={type:"Needle",radius:this.radialgaugeJson.NeedlePointerHeight+"%",value:t,color:this.radialgaugeJson.NeedlePointerColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1,duration:1e3},pointerWidth:e,cap:{radius:e/2,color:this.radialgaugeJson.NeedlePointerColor,border:{width:0}}},o,s,r;for(f.push(h),n.axes[0].pointers=[],this.hasActual&&this.hasTarget&&(o={type:"Marker",radius:ej.isNullOrUndefined(i)?"100%":this.getTargetPointerRadius(this.radius,this.rangeWidth),value:i,markerShape:""+this.getTargetPointer(),markerWidth:ej.isNullOrUndefined(i)?0:this.radialgaugeJson.TargetPointer===TargetPointers.Line?this.rangeWidth:u,markerHeight:this.radialgaugeJson.TargetPointer===TargetPointers.Line?2:u,pointerwidth:ej.isNullOrUndefined(i)?0:this.radialgaugeJson.TargetPointer===TargetPointers.Line?this.rangeWidth:u,color:this.radialgaugeJson.TargetPointerColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1}},f.push(o)),n.axes[0].pointers=f,n.axes[0].ranges=[],n.axes[0].ranges.push({start:this.customMin,end:this.customMax,radius:"100%",startWidth:this.rangeWidth,endWidth:this.rangeWidth,color:"#E0E0E0"}),s=this.radialgaugeJson.RangeCollection.length,r=0;r<s;r++)n.axes[0].ranges.push({start:this.radialgaugeJson.RangeCollection[r].Start,end:this.radialgaugeJson.RangeCollection[r].End,radius:"100%",startWidth:this.rangeWidth,endWidth:this.rangeWidth,color:this.radialgaugeJson.RangeCollection[r].Color})},n.prototype.calculateRanges=function(n,t,i){var r;if(!this.isRangeUpdated){var u=i-t,f=u*.33+t,e=u*.66+t,o=i,s=this.radialgaugeJson.RangeCollection.length;for(r=0;r<s;r++)this.radialgaugeJson.RangeCollection[r].Start=r===0?t:r===1?f:e,this.radialgaugeJson.RangeCollection[r].End=r===0?f:r===1?e:o;this.isFromProp=!0;this.updateRangeSelection(this.range);this.isFromProp=!1}},n.prototype.setRangeWidth=function(n,t){var r,i;if(!ej.isNullOrUndefined(n))for(r=n.axes[0].ranges.length,i=0;i<r;i++)n.axes[0].ranges[i].startWidth=t,n.axes[0].ranges[i].endWidth=t},n.prototype.setPointerWidth=function(n,t){var f,i,r,u;if(!ej.isNullOrUndefined(n))for(f=n.axes[0].pointers.length,this.targetRadius=this.getTargetPointerRadius(this.radius,this.rangeWidth),i=0;i<f;i++)r=n.axes[0].pointers[i].type,r==="RangeBar"?n.axes[0].pointers[i].pointerWidth=t:r==="Marker"&&(n.axes[0].pointers[i].radius=this.targetRadius,u=this.getMarkerSize(),n.axes[0].pointers[i].markerWidth=n.axes[0].pointers[i].markerShape==="Rectangle"?t:u,n.axes[0].pointers[i].markerHeight=n.axes[0].pointers[i].markerShape==="Rectangle"?2:u)},n.prototype.getMarkerSize=function(){return this.seriesWidth<150||this.seriesHeight<150?6:this.seriesHeight<400&&this.seriesWidth>150&&this.seriesWidth<250?8:this.seriesWidth>=250&&this.seriesWidth<=400?10:this.seriesWidth>400?12:void 0},n.prototype.updateTargetValue=function(){throw new Error("Method not implemented.");},n.prototype.updateRangeSelection=function(n){this.range=n;this.setPropertyElement("RangeSettings","Start",this.getStartValue());this.setPropertyElement("RangeSettings","End",this.getEndValue());this.setPropertyElement("RangeSettings","RangeColor",this.getRangeColor())},n.prototype.updateStartValue=function(n){var r,t,i;if(this.isFromProp||n===""){n===""&&this.setPropertyElement("RangeSettings","Start",this.getStartValue());return}if(this.isRangeUpdated=!0,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshStartValue(i,n);else this.refreshStartValue(this.radialgaugeElement[0],n)},n.prototype.refreshStartValue=function(n,t){var i=this.getRadialGaugeObj(n),r;this.maxFormat=this.getFormatString(i);r=this.getFormattedRangeValue(t,this.maxFormat);this.range==="Range 1"?i.axes[0].ranges[1].start=this.radialgaugeJson.RangeCollection[0].Start=r:this.range==="Range 3"?this.radialgaugeJson.RangeCollection[2].Start=i.axes[0].ranges[3].start=r:this.radialgaugeJson.RangeCollection[1].Start=i.axes[0].ranges[2].start=r;i.refresh();this.setPropertyElement("RangeSettings","Start",t)},n.prototype.updateEndValue=function(n){var r,t,i;if(this.isFromProp||n===""){n===""&&this.setPropertyElement("RangeSettings","End",this.getEndValue());return}if(this.isRangeUpdated=!0,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshEndValue(i,n);else this.refreshEndValue(this.radialgaugeElement[0],n)},n.prototype.refreshEndValue=function(n,t){var i=this.getRadialGaugeObj(n),r;this.maxFormat=this.getFormatString(i);r=this.getFormattedRangeValue(t,this.maxFormat);this.range==="Range 1"?this.radialgaugeJson.RangeCollection[0].End=i.axes[0].ranges[1].end=r:this.range==="Range 3"?this.radialgaugeJson.RangeCollection[2].End=i.axes[0].ranges[3].end=r:this.radialgaugeJson.RangeCollection[1].End=i.axes[0].ranges[2].end=r;i.refresh();this.setPropertyElement("RangeSettings","End",t)},n.prototype.updateColorValue=function(n){var r,t,i;if(!this.isFromProp)if(this.isRangeUpdated=!0,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshColor(i,n);else this.refreshColor(this.radialgaugeElement[0],n)},n.prototype.refreshColor=function(n,t){var i=this.getRadialGaugeObj(n);this.range==="Range 1"?(this.radialgaugeJson.RangeCollection[0].Color=t,i.axes[0].ranges[1].color=t):this.range==="Range 3"?(this.radialgaugeJson.RangeCollection[2].Color=t,i.axes[0].ranges[3].color=t):(this.radialgaugeJson.RangeCollection[1].Color=t,i.axes[0].ranges[2].color=t);i.refresh()},n.prototype.getScaleOffet=function(n){return this.radialgaugeJson.TicksPosition===TicksPosition.Outside&&this.radialgaugeJson.ScaleLabelPosition===ScaleLabelPosition.Outside?{ticksOffset:0,labelOffset:0}:this.radialgaugeJson.TicksPosition===TicksPosition.Inside&&this.radialgaugeJson.ScaleLabelPosition===ScaleLabelPosition.Inside?{ticksOffset:n,labelOffset:0}:this.radialgaugeJson.TicksPosition===TicksPosition.Outside&&this.radialgaugeJson.ScaleLabelPosition===ScaleLabelPosition.Inside?{ticksOffset:0,labelOffset:n}:this.radialgaugeJson.TicksPosition===TicksPosition.Inside&&this.radialgaugeJson.ScaleLabelPosition===ScaleLabelPosition.Outside?{ticksOffset:n,labelOffset:0}:void 0},n.prototype.getNumberFormat=function(n){switch(n){case"K":return NumberFormat.Thousands;case"M":return NumberFormat.Millions;case"B":return NumberFormat.Billions;default:return NumberFormat.Ones}},n.prototype.getMinAndMax=function(n,t,i,r,u,f){var p,d,s,h,b,k,e,o,l=this.hasActual?this.dataGroupInfo.Values[0].Values[0].MeasureFormatting:this.hasTarget?this.dataGroupInfo.Values[1].Values[0].MeasureFormatting:null,c=l.Unit,a={formattedText:"",formattedValue:0,numberFormat:null},w,y;u>f?(s=this.hasActual?ej.DashboardUtil.formattedValue(u,l,c,!0):a,c=this.getNumberFormat(s.numberFormat),h=this.hasTarget?ej.DashboardUtil.formattedValue(f,l,c,!0):a):(h=this.hasTarget?ej.DashboardUtil.formattedValue(f,l,c,!0):a,c=this.getNumberFormat(h.numberFormat),s=this.hasActual?ej.DashboardUtil.formattedValue(u,l,c,!0):a);p=this.hasStart?ej.DashboardUtil.formattedValue(n,l,c,!0):a;d=this.hasEnd?ej.DashboardUtil.formattedValue(t,l,c,!0):a;b=this.radialgaugeJson.IsCustomMin?ej.DashboardUtil.formattedValue(i,l,c,!0):a;k=this.radialgaugeJson.IsCustomMax?ej.DashboardUtil.formattedValue(r,l,c,!0):a;var nt=ej.isNullOrUndefined(s.numberFormat)?ej.isNullOrUndefined(h.numberFormat)?"":h.numberFormat:s.numberFormat,v=s.formattedValue>h.formattedValue?s.formattedValue:h.formattedValue,g=s.formattedValue<h.formattedValue?s.formattedValue:h.formattedValue;return this.hasStart||this.hasEnd?(w=0,y=0,w=p.formattedValue,y=d.formattedValue,e=s.formattedValue<0?Math.floor(s.formattedValue):0,o=v>0?this.GetEndRangeValue(v):0,this.hasStart&&this.hasEnd?w>y&&(y=y-1):this.hasStart?y=o:this.hasEnd&&(w=e),e=w,o=y,o<=e&&(o=e+1)):this.radialgaugeJson.IsCustomMax||this.radialgaugeJson.IsCustomMin?!this.radialgaugeJson.IsCustomMin&&this.radialgaugeJson.IsCustomMax?(e=v>0?p.formattedValue<0?Math.floor(p.formattedValue):0:this.GetEndRangeValue(g*-1)*-1,o=b.formattedValue):this.radialgaugeJson.IsCustomMin&&!this.radialgaugeJson.IsCustomMax?(e=k.formattedValue,o=v>0?this.GetEndRangeValue(v):0):(e=b.formattedValue,o=k.formattedValue):v>0?(e=p.formattedValue<0?Math.floor(p.formattedValue):0,o=this.GetEndRangeValue(v)):(e=this.GetEndRangeValue(g*-1)*-1,o=0),(e===o||e>o)&&(o=e+.1),e=Math.round(e*1e3)/1e3,o=Math.round(o*1e3)/1e3,{start:e,end:o,actual:s.formattedValue,target:h.formattedValue,numberFormat:nt}},n.prototype.getUnformattedMaxValue=function(n,t){var r=Math.pow(10,3),u=Math.pow(10,6),f=Math.pow(10,9),e=Math.pow(10,5),o=Math.pow(10,7),s=Math.pow(10,12),i=n;switch(t){case"K":return i*r;case"L":return i*e;case"M":return i*u;case"C":return i*o;case"B":return i*f;case"T":return i*s;default:return i}},n.prototype.getFormattedRangeValue=function(n,t){var r=Math.pow(10,3),u=Math.pow(10,6),f=Math.pow(10,9),e=Math.pow(10,5),o=Math.pow(10,7),s=Math.pow(10,12),i=n;switch(t){case"K":return Math.round(i/r);case"L":return Math.round(i/e);case"M":return Math.round(i/u);case"C":return Math.round(i/o);case"B":return Math.round(i/f);case"T":return Math.round(i/s);default:return i}},n.prototype.updatePropertyChange=function(n,t,i,r){var u,f,o,e;switch(n){case"Name":this.radialgaugeJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.radialgaugeJson);break;case"Description":this.propertyPanel.setDescription(this.radialgaugeJson,i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.radialgaugeJson,i);break;case"GaugeType":this.updateGaugeType(i);break;case"ValuePointer":this.updateValuePointer(i);break;case"NeedleValuePointerHeight":this.updateNeedlePointerHeight(i);break;case"TargetPointer":this.updateTargetPointer(i);break;case"TargetPointerColor":this.updateTargetPointerColor(i);break;case"RangeWidth":this.updateRangeWidth(i);break;case"EnableAnimation":this.updateAnimation(i);break;case"Minimum":this.updateMinimumValue(i);break;case"Maximum":this.updateMaximumValue(i);break;case"Target":this.updateTargetValue(i);break;case"RangeBarColor":this.updateRangeColor(i);break;case"NeedlePointerColor":this.updateNeedlePointerColor(i);break;case"Direction":this.updateDirection(i);break;case"ShowValueLabel":this.updateShowValueLabel(i);break;case"ShowScaleLabel":this.updateShowScaleLabel(i);break;case"ShowTicks":this.updateShowTicks(i);break;case"TicksPosition":this.updateTicksPosition(i);break;case"ScaleLabelPosition":this.updateScaleLabelPosition(i);break;case"ValueLabelPosition":this.updateValueLabelPosition(i);break;case"TicksHeight":this.updateTicksHeight(i);break;case"TicksWidth":this.updateTicksWidth(i);break;case"ShowRange":this.updateShowRange(i);break;case"LabelType":this.updateLabelType(i);break;case"ItemLink":this.updateLink(i);break;case"Ranges":this.updateRangeSelection(i);break;case"Start":this.updateStartValue(i);break;case"End":this.updateEndValue(i);break;case"RangeColor":this.updateColorValue(i)}if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)o=u[f],o.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"RadialGauge",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-radialgauge-item",this.designer._id+"_"+this.radialgaugeJson.UniqueName,[n,i,t,r],[n,t,i,r])},n.prototype.updateNeedlePointerHeight=function(n){var r,t,i;if(this.radialgaugeJson.NeedlePointerHeight=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshNeedlePointer(i);else ej.isNullOrUndefined(this.widgetDataObj)?this.refreshNeedlePointer(this.radialgaugeElement[0]):this.refreshNeedlePointer(this.radialgaugeElement[0])},n.prototype.refreshNeedlePointer=function(n){var t=this.getRadialGaugeObj(n),r,i;if(!ej.isNullOrUndefined(t)){for(r=t.axes[0].pointers.length,i=0;i<r;i++)t.axes[0].pointers[i].type==="Needle"&&(t.axes[0].pointers[i].radius=this.radialgaugeJson.NeedlePointerHeight+"%");this.maxFormat=this.getFormatString(t);t.refresh()}},n.prototype.updateTicksPosition=function(n){var f,t,i,r,u;if(this.radialgaugeJson.TicksPosition=ej.DashboardDesignerUtility.Serialization.stringtoEnum(TicksPosition,n),!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialgaugeElement[0]),this.refreshTicks(u),u.refresh()},n.prototype.updateTargetPointerColor=function(n){var r,t,i;if(this.radialgaugeJson.TargetPointerColor=n,!ej.isNullOrUndefined(this.widgetDataObj)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshTargetPointer(i);else this.refreshTargetPointer(this.radialgaugeElement[0])},n.prototype.refreshTargetPointer=function(n){var t=this.getRadialGaugeObj(n),f=this.getTargetPointerRadius(this.radius,this.rangeWidth),u,i,r;if(!ej.isNullOrUndefined(t)){for(u=t.axes[0].pointers.length,i=0;i<u;i++)t.axes[0].pointers[i].type==="Marker"&&t.axes[0].pointers[i].markerShape!=="Needle"&&(t.axes[0].pointers[i].color=this.radialgaugeJson.TargetPointerColor,t.axes[0].pointers[i].markerShape=this.getTargetPointer(),t.axes[0].pointers[i].radius=f,t.axes[0].pointers[i].markerShape==="InvertedTriangle"||t.axes[0].pointers[i].markerShape==="Triangle"?(r=this.getMarkerSize(),t.axes[0].pointers[i].markerWidth=r,t.axes[0].pointers[i].markerHeight=r):t.axes[0].pointers[i].markerShape==="Rectangle"?(t.axes[0].pointers[i].markerWidth=this.rangeWidth,t.axes[0].pointers[i].markerHeight=2):t.axes[0].pointers[i].pointerWidth=this.rangeWidth);this.maxFormat=this.getFormatString(t);t.refresh()}},n.prototype.updateLabelType=function(n){var r,t,i,u,f;if(this.radialgaugeJson.LabelType=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||(u=this.getRadialGaugeObj(i),u.refresh());else f=this.getRadialGaugeObj(this.radialgaugeElement[0]),f.refresh()},n.prototype.updateShowRange=function(n){var r,u,o,f,e,t,i;if(this.radialgaugeJson.ShowRange=n,this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","ValuePointer",!n),this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","RangeBarColor",!n),this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","NeedlePointerColor",this.radialgaugeJson.ValuePointer!==ValuePointers.RangePointer||n),this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","NeedleValuePointerHeight",this.radialgaugeJson.ValuePointer!==ValuePointers.RangePointer||n),this.propertyPanel.updateItemDisable("dropdown",this.controlType.toString(),"RangeSettings","Ranges",!n),this.propertyPanel.updateItemDisable("float",this.controlType.toString(),"RangeSettings","Start",!n),this.propertyPanel.updateItemDisable("float",this.controlType.toString(),"RangeSettings","End",!n),this.propertyPanel.updateItemDisable("color",this.controlType.toString(),"RangeSettings","RangeColor",!n),r=null,u=null,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(o=this.widgetDataObj.length,f=0;f<o;f++)e=$(this.radialgaugeContent[0]).children()[f],ej.isNullOrUndefined(e)||(t=this.getRadialGaugeObj(e),r=t.axes[0].pointers[0].value,u=this.getTargetValue(t),this.maxFormat=this.getFormatString(t),this.customMin=t.axes[0].minimum,this.customMax=t.axes[0].maximum,n?(this.calculateRanges(t,t.axes[0].minimum,t.axes[0].maximum),this.renderGaugeWithRange(t,r,u)):(this.createRange(t),t.axes[0].pointers=this.createPointers(r,u)),t.refresh());else i=this.getRadialGaugeObj(this.radialgaugeElement[0]),this.maxFormat=this.getFormatString(i),r=i.axes[0].pointers[0].value,u=this.getTargetValue(i),this.customMin=i.axes[0].minimum,this.customMax=i.axes[0].maximum,n?(this.calculateRanges(i,i.axes[0].minimum,i.axes[0].maximum),this.renderGaugeWithRange(i,r,u)):(this.createRange(i),i.axes[0].pointers=this.createPointers(r,u)),i.refresh();this.propertyPanel.refreshScroller()},n.prototype.getTargetValue=function(n){for(var i=n.axes[0].pointers.length,t=0;t<i;t++)if(n.axes[0].pointers[t].type==="Marker")return n.axes[0].pointers[t].value},n.prototype.updateTicksWidth=function(n){var f,t,i,r,u;if(this.radialgaugeJson.TicksWidth=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialgaugeElement[0]),this.refreshTicks(u),u.refresh()},n.prototype.refreshTicks=function(n){if(this.seriesWidth>150&&this.seriesHeight>150){var t=this.getScaleOffet(this.rangeWidth);n.axes[0].majorTicks.width=this.radialgaugeJson.ShowTicks?this.radialgaugeJson.TicksWidth:0;n.axes[0].majorTicks.height=this.radialgaugeJson.ShowTicks?this.radialgaugeJson.TicksHeight:0;n.axes[0].labelStyle.font.size=this.getScaleLabelFontSize()+"px";(this.radialgaugeJson.ShowTicks||this.radialgaugeJson.ShowScaleLabel)&&(n.axes[0].majorTicks.position=ej.DashboardDesignerUtility.Serialization.enumToString(TicksPosition,this.radialgaugeJson.TicksPosition),n.axes[0].majorTicks.offset=t.ticksOffset,n.axes[0].labelStyle.position=ej.DashboardDesignerUtility.Serialization.enumToString(ScaleLabelPosition,this.radialgaugeJson.ScaleLabelPosition),n.axes[0].labelStyle.offset=t.labelOffset)}n.axes[0].majorTicks.interval=this.getInterval(n.axes[0].minimum,n.axes[0].maximum);this.maxFormat=this.getFormatString(n);this.setHalfCircleLabel(n)},n.prototype.updateTicksHeight=function(n){var f,t,i,r,u;if(this.radialgaugeJson.TicksHeight=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialgaugeElement[0]),this.refreshTicks(u),u.refresh()},n.prototype.updateValueLabelPosition=function(n){var r,t,i,u,f;if(this.radialgaugeJson.ValueLabelPosition=ej.DashboardDesignerUtility.Serialization.stringtoEnum(ValueLabelPosition,n),!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||(u=this.getRadialGaugeObj(i),u.refresh());else f=this.getRadialGaugeObj(this.radialgaugeElement[0]),f.refresh()},n.prototype.refreshValueLabel=function(n){var i=n.axes[0].annotations.length,t;for(this.maxFormat=this.getFormatString(n),t=0;t<i;t++)if(!ej.isNullOrUndefined(n.axes[0].annotations[t]))switch(n.axes[0].endAngle){case 90:n.axes[0].annotations[t].radius=this.radialgaugeJson.ShowRange||this.radialgaugeJson.ValueLabelPosition!==ValueLabelPosition.Inside||this.radialgaugeJson.ValuePointer!==ValuePointers.RangePointer?"-25%":"0%";break;case 150:n.axes[0].annotations[t].radius=this.radialgaugeJson.ShowRange||this.radialgaugeJson.ValueLabelPosition!==ValueLabelPosition.Inside||this.radialgaugeJson.ValuePointer!==ValuePointers.RangePointer?"-90%":"0%"}},n.prototype.updateScaleLabelPosition=function(n){var f,t,i,r,u;if(this.radialgaugeJson.ScaleLabelPosition=ej.DashboardDesignerUtility.Serialization.stringtoEnum(ScaleLabelPosition,n),!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialgaugeElement[0]),this.refreshTicks(u),u.refresh()},n.prototype.updateShowTicks=function(n){var f,t,i,r,u;if(this.radialgaugeJson.ShowTicks=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialgaugeElement[0]),this.refreshTicks(u),u.refresh();this.propertyPanel.updateItemVisibility(this.controlType.toString(),"ScaleSettings","TicksHeight",n);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"ScaleSettings","TicksWidth",n);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"ScaleSettings","ScaleLabelPosition",this.radialgaugeJson.ShowScaleLabel&&(this.radialgaugeJson.GaugeType!==GaugeTypes.HalfRadialGauge||this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge&&this.radialgaugeJson.ShowTicks)?!0:!1);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"ScaleSettings","TicksPosition",n);this.propertyPanel.refreshScroller()},n.prototype.updateShowScaleLabel=function(n){var f,t,i,r,u;if(this.radialgaugeJson.ShowScaleLabel=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(f=this.widgetDataObj.length,t=0;t<f;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||(r=this.getRadialGaugeObj(i),this.refreshTicks(r),r.refresh());else u=this.getRadialGaugeObj(this.radialgaugeElement[0]),this.refreshTicks(u),u.refresh();this.propertyPanel.updateItemVisibility(this.controlType.toString(),"ScaleSettings","ScaleLabelPosition",n&&(this.radialgaugeJson.GaugeType!==GaugeTypes.HalfRadialGauge||this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge&&this.radialgaugeJson.ShowTicks))},n.prototype.updateShowValueLabel=function(n){var i,r,t,u;if(this.radialgaugeJson.ShowValueLabel=n,i=n?"block":"none",!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)u=$(this.radialgaugeContent[0]).children()[t],this.showValueLabel(u,i);else this.showValueLabel(this.radialgaugeElement[0],i);this.propertyPanel.refreshScroller()},n.prototype.showValueLabel=function(n,t){var i,r,s,u,h,l,f;if(!ej.isNullOrUndefined(n)&&(i=$(n).attr("id"),t=this.seriesWidth<150||this.seriesHeight<150?"none":t,$("#"+i+"_annotation_1").css("display",t),$("#"+i+"_annotation_2").css("display",t),r=this.getRadialGaugeObj(n),!ej.isNullOrUndefined(r.axes[0].annotations[0])&&!ej.isNullOrUndefined(r.axes[0].annotations[0].content)&&r.axes[0].annotations[0].content!=="")){if(this.hasActual&&this.hasTarget){var e=$(r.axes[0].annotations[0].content)[0].innerText,o=this.getFontSizeForAnnotation(e,r),y=Math.min(this.radius/9,14);$("#"+i+"_annotation_1").css("font-size",o+"px");$("#"+i+"_annotation_2").css("font-size",y+"px");s=$("#"+i+"_annotation_2").width();u=$('<span id="textWidth1" style="backgroundColor: white; position:absolute; top: -100px; left: 0; visibility: hidden; whitespace:nowrap; font-size: '+parseInt($("#"+i+"_annotation_2").css("font-size"))+'px">'+$("#"+i+"_annotation_2").html()+"<\/span>");$(n).append(u);h=u.width();$("#"+i+"_annotation_2").css("margin-left",(s-h)/2+"px");$(n).find("#textWidth1").remove()}else if(this.hasActual||this.hasTarget){var c=this.getRadialGaugeObj(n),e=$(c.axes[0].annotations[0].content)[0].innerText,o=this.getFontSizeForAnnotation(e,c);$("#"+i+"_annotation_1").css("font-size",o+"px")}l=$("#"+i+"_annotation_1").width();f=$('<span id="textWidth" style="backgroundColor: white; position:absolute; top: -100px; left: 0; visibility: hidden; whitespace:nowrap; font-size: '+parseInt($("#"+i+"_annotation_1").css("font-size"))+'px">'+$("#"+i+"_annotation_1").html()+"<\/span>");$(n).append(f);var p=f.width(),w=$("#"+i+"_Axis_0_Annotation_0").width(),a=$("#"+i+"_Axis_0_Annotation_0").height(),b=(this.seriesWidth-4)/2-w/2,v=0;v=this.radialgaugeJson.ValuePointer!==ValuePointers.RangePointer||this.radialgaugeJson.ShowRange?this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge?r.midPoint.y+(this.hasSeries?0:this.getNeedleWidth()):(this.seriesHeight-4)/2+this.radius-a:this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge?r.midPoint.y:(this.seriesHeight-4)/2-a/2;$("#"+i+"_Axis_0_Annotation_0").css("left",b+"px");$("#"+i+"_Axis_0_Annotation_0").css("top",v+"px");$("#"+i+"_annotation_1").css("margin-left",(l-p)/2+"px");$(n).find("#textWidth").remove()}},n.prototype.setHalfCircleLabel=function(n){var t;this.radialgaugeJson.ShowScaleLabel&&this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge&&!this.radialgaugeJson.ShowTicks&&this.seriesWidth>150&&this.seriesHeight>150?(t=this.getValueLabelFontSize(),n.axes[0].labelStyle.font.size="0px",n.axes[0].annotations[1].content='<div id="'+this.designPanel.designId+"Element"+this.radialgaugeJson.UniqueName+'_min_label_annotation" style="color:#666666;font-size:'+t+'px;font-family:Roboto;">'+n.axes[0].minimum+this.maxFormat+"<\/div>",n.axes[0].annotations[2].content='<div id="'+this.designPanel.designId+"Element"+this.radialgaugeJson.UniqueName+'_max_label_annotation" style="color:#666666;font-size:'+t+'px;font-family:Roboto;">'+n.axes[0].maximum+this.maxFormat+"<\/div>"):!ej.isNullOrUndefined(n.axes[0].annotations)&&n.axes[0].annotations.length>1&&(t=this.getScaleLabelFontSize(),n.axes[0].labelStyle.font.size=t+"px",n.axes[0].annotations[1].content="",n.axes[0].annotations[2].content="")},n.prototype.setRadius=function(n){var u,t,f,i,e;if(!ej.isNullOrUndefined(n.axes[0].annotations)&&n.axes[0].annotations.length>1&&this.radialgaugeJson.ShowScaleLabel&&this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge&&!this.radialgaugeJson.ShowTicks){u=this.getValueLabelFontSize();t=$('<span id="textWidth1" style="color:#666666; top: -100px; left: 0; visibility: hidden; font-family:Roboto; whitespace:nowrap; font-size: '+u+'px">'+this.customMin+this.maxFormat+"<\/span>");$(n.element).append(t);f=t.width();$(n.element).append(t);i=$('<span id="textWidth2" style="color:#666666; top: -100px; left: 0; visibility: hidden; font-family:Roboto; whitespace:nowrap; font-size: '+u+'px">'+this.customMax+this.maxFormat+"<\/span>");$(n.element).append(i);e=i.width();$(n.element).append(i);$(n.element).find("#textWidth1").remove();$(n.element).find("#textWidth2").remove();var r="currentRadius",o=n.axes[0][r]-f/2,s=n.axes[0][r]-e/2,h=Math.round(o/n.axes[0][r]*100),c=Math.round(s/n.axes[0][r]*100);n.axes[0].annotations[1].radius=h+"%";n.axes[0].annotations[2].radius=c+"%"}},n.prototype.updateValuePointer=function(n){var e,t,u,o;this.radialgaugeJson.ValuePointer=n;var f=this.getRadialGaugeObj(this.radialgaugeElement[0]),i=0,r=0;if(!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(e=this.widgetDataObj.length,t=0;t<e;t++)u=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(u)||(o=this.getRadialGaugeObj(u),r=this.hasActual?ej.DashboardUtil.getFormattedValue(this.widgetDataObj[t].actualValue,this.maxFormat):null,i=this.hasTarget?ej.DashboardUtil.getFormattedValue(this.widgetDataObj[t].targetValue,this.maxFormat):null,this.refreshPointer(o,r,i));else ej.isNullOrUndefined(this.widgetDataObj)?this.refreshPointer(f,this.actualValue,this.targetValue):(r=this.hasActual?ej.DashboardUtil.getFormattedValue(this.widgetDataObj[0].actualValue,this.maxFormat):null,i=this.hasTarget?ej.DashboardUtil.getFormattedValue(this.widgetDataObj[0].targetValue,this.maxFormat):null,this.refreshPointer(f,r,i));this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","NeedleValuePointerHeight",n!==ValuePointers.RangePointer);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","NeedlePointerColor",n!==ValuePointers.RangePointer);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","RangeBarColor",n!==ValuePointers.NeedlePointer);this.propertyPanel.refreshScroller()},n.prototype.refreshPointer=function(n,t,i){var u,r;if(!ej.isNullOrUndefined(n)){for(n.axes[0].pointers=this.createPointers(t,i),u=n.axes[0].ranges.length,r=0;r<u;r++)n.axes[0].ranges[r].startWidth=this.rangeWidth,n.axes[0].ranges[r].endWidth=this.rangeWidth;this.radialgaugeJson.ShowTicks&&this.refreshTicks(n);n.refresh()}},n.prototype.createRangeBar=function(n,t){var i,u,r,f;return this.rangeWidth=this.getRangeWidth(this.radius),i=[],u={type:"RangeBar",value:n,radius:"100%",color:this.radialgaugeJson.RangeColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1,duration:1e3},pointerWidth:this.rangeWidth},i.push(u),ej.isNullOrUndefined(t)||(r=this.getMarkerSize(),f={type:"Marker",radius:ej.isNullOrUndefined(t)?"100%":this.getTargetPointerRadius(this.radius,this.rangeWidth),value:t,markerShape:this.getTargetPointer(),markerWidth:ej.isNullOrUndefined(t)?0:this.radialgaugeJson.TargetPointer===TargetPointers.Line?this.rangeWidth:r,markerHeight:this.radialgaugeJson.TargetPointer===TargetPointers.Line?2:r,color:this.radialgaugeJson.TargetPointerColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1}},i.push(f)),i},n.prototype.createRangeBarWithNeedle=function(n,t){var r,f;this.rangeWidth=this.getRangeWidth(this.radius);var i=[],u=this.getNeedleWidth(),e={type:"RangeBar",value:n,radius:"100%",color:this.radialgaugeJson.RangeColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1,duration:1e3},pointerWidth:this.rangeWidth},o={type:"Needle",radius:this.radialgaugeJson.NeedlePointerHeight+"%",value:n,color:this.radialgaugeJson.NeedlePointerColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1,duration:1e3},pointerWidth:u,cap:{radius:u/2,color:this.radialgaugeJson.NeedlePointerColor,border:{width:0}}};return i.push(e),i.push(o),ej.isNullOrUndefined(t)||(r=this.getMarkerSize(),f={type:"Marker",radius:ej.isNullOrUndefined(t)?"100%":this.getTargetPointerRadius(this.radius,this.rangeWidth),value:t,markerShape:this.getTargetPointer(),markerWidth:ej.isNullOrUndefined(t)?0:this.radialgaugeJson.TargetPointer===TargetPointers.Line?this.rangeWidth:r,markerHeight:this.radialgaugeJson.TargetPointer===TargetPointers.Line?2:r,color:this.radialgaugeJson.TargetPointerColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1}},i.push(f)),i},n.prototype.createNeedlePointerAlone=function(n,t){var r,f;this.rangeWidth=this.getRangeWidth(this.radius);var i=[],u=this.getNeedleWidth(),e={type:"Needle",radius:this.radialgaugeJson.NeedlePointerHeight+"%",value:n,color:this.radialgaugeJson.NeedlePointerColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1,duration:1e3},pointerWidth:u,cap:{radius:u/2,color:this.radialgaugeJson.NeedlePointerColor,border:{width:0}}};return i.push(e),ej.isNullOrUndefined(t)||(r=this.getMarkerSize(),f={type:"Marker",radius:ej.isNullOrUndefined(t)?"100%":this.getTargetPointerRadius(this.radius,this.rangeWidth),value:t,markerShape:this.getTargetPointer(),markerWidth:ej.isNullOrUndefined(t)?0:this.radialgaugeJson.TargetPointer===TargetPointers.Line?this.rangeWidth:r,markerHeight:this.radialgaugeJson.TargetPointer===TargetPointers.Line?2:r,color:this.radialgaugeJson.TargetPointerColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1}},i.push(f)),i},n.prototype.getNeedleWidth=function(){return this.seriesWidth<150||this.seriesHeight<150?4:this.radius*.1},n.prototype.createRange=function(n){n.axes[0].ranges=[{start:this.customMin,end:this.customMax,radius:"100%",startWidth:this.rangeWidth,endWidth:this.rangeWidth,color:"#E0E0E0"}]},n.prototype.getTargetPointer=function(){switch(this.radialgaugeJson.TargetPointer){case TargetPointers.InvertedTriangle:return"InvertedTriangle";case TargetPointers.Line:return"Rectangle";case TargetPointers.Triangle:return"Triangle"}},n.prototype.updateTargetPointer=function(n){var r,t,i;if(this.radialgaugeJson.TargetPointer=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshTargetPointer(i);else this.refreshTargetPointer(this.radialgaugeElement[0])},n.prototype.getRadialGaugeObj=function(n){return ej.isNullOrUndefined(n)?null:ejdashboard.base.getComponent(n,"circulargauge")},n.prototype.updateGaugeType=function(n){var i,u,t,r;if(this.radialgaugeJson.GaugeType=n,i=this.getGaugeAngle(),!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(u=this.widgetDataObj.length,t=0;t<u;t++)r=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(r)||this.refreshGaugeAngle(r,i);else this.refreshGaugeAngle(this.radialgaugeElement[0],i)},n.prototype.refreshGaugeAngle=function(n,t){var i=this.getRadialGaugeObj(n);this.maxFormat=this.getFormatString(i);i.axes[0].startAngle=t.startAngle;i.axes[0].endAngle=t.endAngle;i.moveToCenter=this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge?!0:!1;this.setHalfCircleLabel(i);i.refresh();this.propertyPanel.updateItemVisibility(this.controlType.toString(),"ScaleSettings","ScaleLabelPosition",this.radialgaugeJson.ShowScaleLabel&&(this.radialgaugeJson.GaugeType!==GaugeTypes.HalfRadialGauge||this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge&&this.radialgaugeJson.ShowTicks)?!0:!1)},n.prototype.updateRangeWidth=function(n){var r,t,i;if(this.radialgaugeJson.ScaleWidth=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshRangeWidth(i);else this.refreshRangeWidth(this.radialgaugeElement[0])},n.prototype.refreshRangeWidth=function(n,t,i){var o,u,s,r,f,e;for(t===void 0&&(t=!0),i===void 0&&(i=null),ej.isNullOrUndefined(i)&&(i=this.getRadialGaugeObj(n)),this.maxFormat=this.getFormatString(i),o=i.axes[0].ranges.length,this.rangeWidth=this.getRangeWidth(this.radius),this.targetRadius=this.getTargetPointerRadius(this.radius,this.rangeWidth),this.refreshTicks(i),u=0;u<o;u++)i.axes[0].ranges[u].startWidth=this.rangeWidth,i.axes[0].ranges[u].endWidth=this.rangeWidth;for(s=i.axes[0].pointers.length,r=0;r<s;r++)i.axes[0].pointers[r].type==="RangeBar"?i.axes[0].pointers[r].pointerWidth=this.rangeWidth:i.axes[0].pointers[r].markerShape==="Rectangle"?(i.axes[0].pointers[r].markerWidth=this.rangeWidth,i.axes[0].pointers[r].radius=this.targetRadius):i.axes[0].pointers[r].markerShape==="Triangle"||i.axes[0].pointers[r].markerShape==="InvertedTriangle"?(i.axes[0].pointers[r].radius=this.targetRadius,f=this.getMarkerSize(),i.axes[0].pointers[r].markerWidth=f,i.axes[0].pointers[r].markerHeight=f):i.axes[0].pointers[r].type==="Needle"&&(e=this.getNeedleWidth(),i.axes[0].pointers[r].pointerWidth=e,i.axes[0].pointers[r].cap.radius=e/2);t&&i.refresh()},n.prototype.updateAnimation=function(n){var r,t,i;if(this.radialgaugeJson.EnableAnimation=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshGaugeAnimation(i);else this.refreshGaugeAnimation(this.radialgaugeElement[0])},n.prototype.refreshGaugeAnimation=function(n){var t=this.getRadialGaugeObj(n),r,i;if(!ej.isNullOrUndefined(t)){for(this.maxFormat=this.getFormatString(t),r=t.axes[0].pointers.length,i=0;i<r;i++)t.axes[0].pointers[i].animation.enable=this.radialgaugeJson.EnableAnimation;t.refresh()}},n.prototype.updateRangeColor=function(n){var r,t,i;if(this.radialgaugeJson.RangeColor=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshRangeColor(i,n);else this.refreshRangeColor(this.radialgaugeElement[0],n)},n.prototype.refreshRangeColor=function(n,t){var i=this.getRadialGaugeObj(n),r;ej.isNullOrUndefined(i)||(this.maxFormat=this.getFormatString(i),r=this.getRangeBarPointer(i),ej.isNullOrUndefined(r)||i.axes[0].pointers[r].type!=="RangeBar"||(i.axes[0].pointers[r].color=t,i.refresh()))},n.prototype.getRangeBarPointer=function(n){var i,t,r;if(!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(n.axes[0].pointers))for(i=n.axes[0].pointers.length,t=0;t<i;t++)if(r=n.axes[0].pointers[t],r.type==="RangeBar")return t;return null},n.prototype.updateMinimumValue=function(n){var r,t,i;if(this.isFromProp||n===""||this.radialgaugeJson.MaxValue<=n){this.isFromProp||this.minimumValueChange(this.radialgaugeJson.MinValue);return}if(this.isRangeUpdated=!1,this.radialgaugeJson.IsCustomMin=!0,this.radialgaugeJson.MinValue=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshMinValue(i);else this.refreshMinValue(this.radialgaugeElement[0])},n.prototype.refreshMinValue=function(n){var t=this.getRadialGaugeObj(n),i,r,u;ej.isNullOrUndefined(t)||(this.maxFormat=this.getFormatString(t),i=ej.DashboardUtil.getFormattedValue(this.radialgaugeJson.MinValue,this.maxFormat),i=Math.round(i*1e3)/1e3,t.axes[0].minimum=t.axes[0].ranges[0].start=this.customMin=i,this.radialgaugeJson.ShowRange&&this.radialgaugeJson.IsCustomMin&&(r=t.axes[0].pointers[0].value,u=this.getTargetValue(t),this.maxFormat=this.getFormatString(t),this.customMin=t.axes[0].minimum,this.calculateRanges(t,t.axes[0].minimum,t.axes[0].maximum),this.renderGaugeWithRange(t,r,u)),t.axes[0].majorTicks.interval=this.getInterval(t.axes[0].minimum,t.axes[0].minimum),this.setHalfCircleLabel(t),t.refresh())},n.prototype.updateDirection=function(n){var o,r,u,i,s,f,e,t;if(this.radialgaugeJson.Direction=this.getDirection(n),!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(o=this.widgetDataObj.length,r=0;r<o;r++)u=$(this.radialgaugeContent[0]).children()[r],ej.isNullOrUndefined(u)||(i=this.getRadialGaugeObj(u),s=$(u).attr("id"),ej.isNullOrUndefined(i.axes[0].annotations)||ej.isNullOrUndefined(i.axes[0].annotations[1])||(f=i.axes[0].pointers[0].value,e=this.getTargetValue(i),this.setDirectionColor(s,f,e)));else if(t=this.getRadialGaugeObj(this.radialgaugeElement[0]),!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.axes[0].annotations)&&!ej.isNullOrUndefined(t.axes[0].annotations[1])){var h=$(this.radialgaugeElement[0]).attr("id"),f=t.axes[0].pointers[0].value,e=this.getTargetValue(t);this.setDirectionColor(h,f,e)}},n.prototype.setDirectionColor=function(n,t,i){var r=t-i==0?"#FBCB43":this.radialgaugeJson.Direction===GaugeDirection.HighIsGood&&t>=i?"#34B67A":this.radialgaugeJson.Direction===GaugeDirection.LowIsGood&&t<i?"#34B67A":"#E57368";$("#"+n+"_annotation_2").css("color",r)},n.prototype.getDirection=function(n){switch(n){case"High is Good":return GaugeDirection.HighIsGood;case"Low is Good":return GaugeDirection.LowIsGood}},n.prototype.updateMaximumValue=function(n){var r,t,i;if(this.isFromProp||n===""||this.radialgaugeJson.MinValue>=n){this.isFromProp||this.maximumValueChange(this.radialgaugeJson.MaxValue);return}if(this.isRangeUpdated=!1,this.radialgaugeJson.IsCustomMax=!0,this.radialgaugeJson.MaxValue=n,!ej.isNullOrUndefined(this.widgetDataObj)&&!ej.isNullOrUndefined(this.radialgaugeContent)&&this.widgetDataObj.length>1)for(r=this.widgetDataObj.length,t=0;t<r;t++)i=$(this.radialgaugeContent[0]).children()[t],ej.isNullOrUndefined(i)||this.refreshMaxValue(i);else this.refreshMaxValue(this.radialgaugeElement[0])},n.prototype.refreshMaxValue=function(n){var t=this.getRadialGaugeObj(n),i,r,u;ej.isNullOrUndefined(t)||(this.maxFormat=this.getFormatString(t),i=ej.DashboardUtil.getFormattedValue(this.radialgaugeJson.MaxValue,this.maxFormat),i=Math.round(i*1e3)/1e3,t.axes[0].maximum=t.axes[0].ranges[0].end=this.customMax=i,this.radialgaugeJson.ShowRange&&this.radialgaugeJson.IsCustomMax&&(r=t.axes[0].pointers[0].value,u=this.getTargetValue(t),this.maxFormat=this.getFormatString(t),this.customMax=this.radialgaugeJson.IsCustomMax?i:t.axes[0].maximum,this.calculateRanges(t,t.axes[0].minimum,t.axes[0].maximum),this.renderGaugeWithRange(t,r,u)),t.axes[0].majorTicks.interval=this.getInterval(t.axes[0].minimum,t.axes[0].maximum),this.setHalfCircleLabel(t),t.refresh())},n.prototype.maximumValueChange=function(n){try{this.isFromProp=!0;var t=$("#"+this.designId+"_RadialGauge_BasicSettings_Maximum").data("ejNumericTextbox");t.option("value",n);this.isFromProp=!1}catch(i){}},n.prototype.minimumValueChange=function(n){try{this.isFromProp=!0;var t=$("#"+this.designId+"_RadialGauge_BasicSettings_Minimum").data("ejNumericTextbox");t.option("value",n);this.isFromProp=!1}catch(i){}},n.prototype.defaultGauge=function(n){this.maxFormat="";ej.isNullOrUndefined(this.radialgaugeContent)&&!ej.isNullOrUndefined(n)?(n.axes[0].maximum=this.radialgaugeJson.MaxValue=this.customMax=100,n.axes[0].minimum=this.radialgaugeJson.MinValue=this.customMin=0,n.axes[0].labelStyle.format="",this.radialgaugeJson.ShowRange?(this.calculateRanges(n,0,100),this.renderGaugeWithRange(n,40,null)):(this.createRange(n),n.axes[0].pointers=this.createPointers(40,null)),n.axes[0].majorTicks.interval=this.getInterval(n.axes[0].minimum,n.axes[0].maximum),n.axes[0].annotations=[{content:"",zIndex:0,angle:0},{content:"",angle:-95,radius:"95%",zIndex:0},{content:"",angle:95,radius:"95%",zIndex:0}],n.refresh()):(this.destroy(),this.createRadialGaugeElement());this.maximumValueChange(this.radialgaugeJson.MaxValue);this.minimumValueChange(this.radialgaugeJson.MinValue)},n.prototype.getFormatString=function(n){var t,i;return ej.isNullOrUndefined(this.widgetDataObj)?"":(t=0,this.widgetDataObj.length>1&&(i=$(n.element).attr("id"),t=+i.split("_")[1]),this.widgetDataObj[t].numberFormat)},n.prototype.setResponsiveProperty=function(n){var u,i,f,r,t;if(this.seriesWidth<150||this.seriesHeight<150?(this.hasResponsive=!0,n.axes[0].majorTicks.width=0,n.axes[0].majorTicks.height=0,n.axes[0].labelStyle.font.size="0px",n.axes[0].labelStyle.position="Inside",n.axes[0].majorTicks.position="Inside",n.axes[0].majorTicks.offset=0,n.axes[0].labelStyle.offset=0):this.hasResponsive&&(this.hasResponsive=!1,u=this.getScaleLabelFontSize(),n.axes[0].labelStyle.font.size=u+"px",n.axes[0].majorTicks.width=this.radialgaugeJson.TicksWidth,n.axes[0].majorTicks.height=this.radialgaugeJson.TicksHeight,n.axes[0].labelStyle.position=this.radialgaugeJson.ScaleLabelPosition,n.axes[0].majorTicks.position=this.radialgaugeJson.TicksPosition,i=this.getScaleOffet(this.rangeWidth),n.axes[0].majorTicks.offset=i.ticksOffset,n.axes[0].labelStyle.offset=i.labelOffset),(this.hasResponsive||this.seriesWidth<150||this.seriesHeight<150)&&this.radialgaugeJson.ValuePointer!==ValuePointers.RangePointer)for(f=n.axes[0].pointers.length,r=this.getNeedleWidth(),t=0;t<f;t++)n.axes[0].pointers[t].type==="Needle"&&(n.axes[0].pointers[t].pointerWidth=r,n.axes[0].pointers[t].cap.radius=r/2)},n.prototype.createDefaultGauge=function(){var t;this.actualValue=40;this.customMin=0;this.customMax=100;this.radialgaugeJson.GaugeType===GaugeTypes.Auto&&(this.radialgaugeJson.GaugeType=this.seriesHeight>=this.seriesWidth*.9?GaugeTypes.HorseShoe:GaugeTypes.HalfRadialGauge);t=this.getGaugeAngle();this.radius=this.getRadius(this.seriesWidth,this.seriesHeight);this.rangeWidth=this.getRangeWidth(this.radius);this.targetRadius=this.getTargetPointerRadius(this.radius,this.rangeWidth);var n=this,i=this.getScaleOffet(this.rangeWidth);return new ejdashboard.circulargauge.CircularGauge({width:"100%",height:"100%",loaded:function(t){if(n.showValueLabel(t.gauge.element,n.radialgaugeJson.ShowValueLabel?"block":"none"),n.prevRadius===n.radius&&n.radialgaugeJson.ShowScaleLabel){n.prevRadius=0;return}var i=t.gauge.axes[0]["currentRadius"];(n.radius!==i||t.gauge.axes[0].ranges[0].startWidth!==n.rangeWidth)&&(n.prevRadius===i&&n.radialgaugeJson.ShowScaleLabel&&(i=(n.radius+i)/2,n.radius=i),n.prevRadius=n.radius,n.radius=i,n.refreshRangeWidth(null,!1,t.gauge),n.setRadius(t.gauge),t.gauge.refresh())},tooltip:{enable:!0,enableAnimation:!1},tooltipRender:function(t){n.showTooltip(t)},moveToCenter:this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge?!0:!1,axes:[{annotations:[{content:"",angle:0,radius:"10%",zIndex:"0"},{content:"",angle:-95,radius:"95%",zIndex:"0"},{content:"",angle:95,radius:"95%",zIndex:"0"}],lineStyle:{width:0},startAngle:t.startAngle,endAngle:t.endAngle,radius:"100%",labelStyle:{font:{size:this.getScaleLabelFontSize()+"px"},offset:i.labelOffset},majorTicks:{interval:this.radialgaugeJson.ShowTicks?null:this.customMax-this.customMin,width:this.radialgaugeJson.ShowTicks?this.radialgaugeJson.TicksWidth:0,height:this.radialgaugeJson.ShowTicks?this.radialgaugeJson.TicksHeight:0,offset:i.ticksOffset},minorTicks:{height:0,width:0},minimum:this.customMin,maximum:this.customMax,ranges:[{start:this.customMin,end:this.customMax,radius:"100%",startWidth:this.rangeWidth,endWidth:this.rangeWidth,color:"#E0E0E0"}],pointers:[{type:"RangeBar",value:this.actualValue,radius:"100%",color:this.radialgaugeJson.RangeColor,animation:{enable:this.radialgaugeJson.EnableAnimation?!0:!1,duration:1e3},pointerWidth:this.getRangeWidth(this.radius)}]}]})},n.prototype.updateData=function(n){try{this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});ej.isNullOrUndefined(this.radialgaugeItem)||this.radialgaugeItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");this.updatePropertyItems();this.hasActual=this.hasActualValue();this.hasTarget=this.hasTargetValue();this.hasStart=this.hasStartValue();this.hasEnd=this.hasEndValue();this.hasSeries=this.hasSeriesValue();this.radialgaugeJson.IsColumnBind=this.hasStart||this.hasEnd;this.radialgaugeJson.IsCustomMin=!1;this.radialgaugeJson.IsCustomMax=!1;var t=null;this.isHeaderVisible=!1;this.isRangeUpdated=!1;this.seriesWidth=this.contentContainer.width();this.seriesHeight=this.contentContainer.height();t=this.getRadialGaugeObj(this.radialgaugeElement[0]);this.widgetDataObj=null;ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.radialgaugeJson,this.dataGroupInfo);n.Error?this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):(n.noDataAvailable?(this.radialgaugeItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):(ej.isNullOrUndefined(t)&&(t=this.getRadialGaugeObj(this.radialgaugeElement[0])),n.widgetData.data==="[]"&&n.data==="[]"&&n.columnBindings==="{}"?this.defaultGauge(t):n.data!=="[]"&&(this.widgetDataObj=JSON.parse(n.widgetData.data),this.widgetDataObj.length>0&&this.hasSeries?(this.destroy(),ej.isNullOrUndefined(this.radialgaugeItem)&&this.renderRadialGaugeElement(!0),this.renderSeriesGauge()):this.hasActual||this.hasTarget?(ej.isNullOrUndefined(this.radialgaugeContent)||(this.destroy(),this.renderRadialGaugeElement(),t=this.getRadialGaugeObj(this.radialgaugeElement[0])),this.renderGaugeData(this.widgetDataObj[0],t)):ej.isNullOrUndefined(t)||this.defaultGauge(t))),ej.DashboardUtil.updateAction("RadialGauge","Link","Link"))}catch(i){this.designPanel.logError({Source:this.radialgaugeJson.UniqueName,Error:i,Type:i.name})}},n.prototype.hasActualValue=function(){var t,n;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values))for(t=this.dataGroupInfo.Values.length,n=0;n<t;n++)if(!ej.isNullOrUndefined(this.dataGroupInfo.Values[n])&&this.dataGroupInfo.Values[n].Name==="ActualValue"&&this.dataGroupInfo.Values[n].Values.length>0)return!0;return!1},n.prototype.hasTargetValue=function(){var t,n;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values))for(t=this.dataGroupInfo.Values.length,n=0;n<t;n++)if(!ej.isNullOrUndefined(this.dataGroupInfo.Values[n])&&this.dataGroupInfo.Values[n].Name==="TargetValue"&&this.dataGroupInfo.Values[n].Values.length>0)return!0;return!1},n.prototype.hasStartValue=function(){var t,n;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values))for(t=this.dataGroupInfo.Values.length,n=0;n<t;n++)if(!ej.isNullOrUndefined(this.dataGroupInfo.Values[n])&&this.dataGroupInfo.Values[n].Name==="StartValue"&&this.dataGroupInfo.Values[n].Values.length>0)return!0;return!1},n.prototype.hasEndValue=function(){var t,n;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values))for(t=this.dataGroupInfo.Values.length,n=0;n<t;n++)if(!ej.isNullOrUndefined(this.dataGroupInfo.Values[n])&&this.dataGroupInfo.Values[n].Name==="EndValue"&&this.dataGroupInfo.Values[n].Values.length>0)return!0;return!1},n.prototype.hasSeriesValue=function(){var t,n;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values))for(t=this.dataGroupInfo.Values.length,n=0;n<t;n++)if(!ej.isNullOrUndefined(this.dataGroupInfo.Values[n])&&this.dataGroupInfo.Values[n].Name==="Series"&&this.dataGroupInfo.Values[n].Values.length>0)return!0;return!1},n.prototype.getSeriesCount=function(){var t,n;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values))for(t=this.dataGroupInfo.Values.length,n=0;n<t;n++)if(!ej.isNullOrUndefined(this.dataGroupInfo.Values[n])&&this.dataGroupInfo.Values[n].Name==="Series"&&this.dataGroupInfo.Values[n].Values.length>0)return this.dataGroupInfo.Values[n].Values.length;return 0},n.prototype.renderGaugeData=function(n,t){var h=n.startValue,c=n.endValue,r=n.actualValue,u=n.targetValue,l=n.maximumValue,a=n.minimumValue,i=this.getMinAndMax(h,c,a,l,r,u),e=null,f,o,s;if(!this.hasActual&&this.hasTarget&&(r=u),f=$(t.element).attr("id"),this.hasActual&&this.hasTarget){this.targetRadius=this.getTargetPointerRadius(this.radius,this.rangeWidth);var v=r-u==0?"#FBCB43":this.radialgaugeJson.Direction===GaugeDirection.HighIsGood&&r>=u?"#34B67A":this.radialgaugeJson.Direction===GaugeDirection.LowIsGood&&r<u?"#34B67A":"#E57368",y=r-u==0?"●":!0&&r-u>=0?"▲":!0&&r-u<0?"▼":!1&&r-u>0?"▲":"▼",p=y+"  "+n.formattedVarience+"  ("+n.percentOfVarience+")";this.radialgaugeJson.ShowRange?(this.calculateRanges(t,i.start,i.end),this.renderGaugeWithRange(t,i.actual,i.target)):t.axes[0].pointers=this.createPointers(i.actual,i.target);t.axes[0].annotations=[{content:'<div id="'+f+'_annotation_1" style="color:#666666;font-weight: bold; font-size:'+e+'px;">'+n.formattedActualValue+'<\/div><div id="'+f+'_annotation_2" style="color:'+v+";font-size:"+e+'px;">'+p+"<\/div>",zIndex:0,angle:0,radius:"10%",textStyle:{color:"#666666"}},{content:"",angle:-95,radius:"95%",zIndex:0},{content:"",angle:95,radius:"95%",zIndex:0}]}else o=this.hasActual?i.actual:i.target,s=this.hasActual?n.formattedActualValue:n.formattedTargetValue,this.radialgaugeJson.ShowRange?(this.calculateRanges(t,i.start,i.end),this.renderGaugeWithRange(t,o,null)):t.axes[0].pointers=this.createPointers(o,null),t.axes[0].annotations=[{content:'<div id="'+f+'_annotation_1" style="color:#666666;font-weight: bold; font-size:'+e+'px;">'+s+"<\/div>",zIndex:0,angle:0,radius:"0%",textStyle:{color:"#666666"}},{content:"",angle:-95,radius:"95%",zIndex:0},{content:"",angle:95,radius:"95%",zIndex:0}];this.radialgaugeJson.MinValue=i.start;this.radialgaugeJson.ShowRange?(t.axes[0].minimum=this.customMin=i.start,t.axes[0].maximum=this.customMax=i.end):(t.axes[0].ranges[0].start=t.axes[0].minimum=this.customMin=i.start,t.axes[0].ranges[0].end=t.axes[0].maximum=this.customMax=i.end);t.axes[0].majorTicks.interval=this.getInterval(i.start,i.end);this.isHeaderVisible&&(t.title=n.title,t.titleStyle.fontFamily="Roboto",t.titleStyle.fontWeight="Bold");t.axes[0].labelStyle.format="{value}"+i.numberFormat;this.maxFormat=n.numberFormat=i.numberFormat;this.setHalfCircleLabel(t);try{t.refresh();this.widgetDataObj.length===1&&(this.radialgaugeJson.MaxValue=this.getUnformattedMaxValue(this.customMax,this.maxFormat),this.radialgaugeJson.MinValue=this.getUnformattedMaxValue(this.customMin,this.maxFormat),this.maximumValueChange(this.radialgaugeJson.MaxValue),this.minimumValueChange(this.radialgaugeJson.MinValue),this.radialgaugeJson.ShowRange&&this.calculateRanges(t,t.axes[0].minimum,t.axes[0].maximum))}catch(w){}},n.prototype.createPointers=function(n,t){switch(this.radialgaugeJson.ValuePointer){case ValuePointers.NeedlePointer:return this.createNeedlePointerAlone(n,t);case ValuePointers.RangePointer:return this.createRangeBar(n,t);default:return this.createRangeBarWithNeedle(n,t)}},n.prototype.getFontSizeForAnnotation=function(n){var t=0,i=this.radius,r;return t=i*2,r={height:50,width:t,adjustFont:"width",text:n.ValueLabel},Math.min(i/5,parseInt((this.getOptimumFontSize(r)+"px").replace("px","")))},n.prototype.getOptimumFontSize=function(n){var t=1,i=null;if(n.adjustFont==="both")for(t=1;;)if(i=this.measureText(n.text,n.width,"Bold "+n.height*t+" Roboto"),i.width>n.width||i.height>n.height){if(parseFloat(t.toFixed(2))===.1)return n.height*t;t-=.1}else return Math.min(n.height*t,50);else{if(n.adjustFont==="height")return t=.8,n.height*t;if(n.adjustFont==="width")for(t=.9;;)if(i=this.measureText(n.text,n.width,"Bold "+n.height*t+" Roboto"),i.width>n.width){if(parseFloat(t.toFixed(2))===.1)return n.height*t;t-=.1}else return n.height*t;else return n.height*.9}},n.prototype.measureText=function(n,t,i){var h=$(document).find("#measureTex"),f=n,r=null,e,o,u,v;$("#measureTex").css("display","block");h.length===0?(r=document.createElement("text"),$(r).attr({id:"measureTex"}),document.body.appendChild(r)):r=h[0];var c=null,s=null,l=null,a=null;if(typeof f=="string"&&(f.indexOf("<")>-1||f.indexOf(">")>-1)){for(e=f.split(" "),o=0;o<e.length;o++)e[o].indexOf("<br/>")===-1&&(e[o]=e[o].replace(/[<>]/g,"&"));f=e.join(" ")}return r.innerHTML=f,!ej.isNullOrUndefined(i)&&ej.isNullOrUndefined(i.size)&&(u=i,u=u.split(" "),c=u[0],s=u[1],l=u[2],a=u[3]),ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i.size)&&ej.isNullOrUndefined(s)||(r.style.fontSize=i.size>0?i.size+"px":i.size?i.size:s+"px",r.style.fontStyle&&(r.style.fontStyle=i.fontStyle?i.fontStyle:c),r.style.fontFamily=i.fontFamily?i.fontFamily:l,window.navigator.userAgent.indexOf("MSIE 8.0")===-1&&(r.style.fontWeight=i.fontWeight?i.fontWeight:a)),r.style.backgroundColor="white",r.style.position="absolute",r.style.top=-100,r.style.left=0,r.style.visibility="hidden",r.style.whiteSpace="nowrap",t&&(r.style.maxwidth=t+"px"),v={width:r.offsetWidth,height:r.offsetHeight},$("#measureTex").css("display","none"),v},n.prototype.getMaximumValue=function(n,t){var i=Math.pow(10,3),r=Math.pow(10,5),u=Math.pow(10,6),f=Math.pow(10,7),e=Math.pow(10,9),o=Math.pow(10,12);switch(t){case"K":n=n*i;break;case"L":n=n*r;break;case"M":n=n*u;break;case"C":n=n*f;break;case"B":n=n*e;break;case"T":n=n*o}return n},n.prototype.getInterval=function(n,t){return this.radialgaugeJson.ShowTicks?null:t-n},n.prototype.updatePropertyItems=function(){this.hasActual=this.hasActualValue();this.hasTarget=this.hasTargetValue();this.hasStart=this.hasStartValue();this.hasEnd=this.hasEndValue();this.hasSeries=this.hasSeriesValue();this.propertyPanel.updateItemVisibility(this.controlType.toString(),"BasicSettings","Direction",this.hasActual&&this.hasTarget?!0:!1);this.propertyPanel.updateItemDisable("float",this.controlType.toString(),"BasicSettings","Minimum",this.hasStart?!0:!1);this.propertyPanel.updateItemDisable("float",this.controlType.toString(),"BasicSettings","Maximum",this.hasEnd?!0:!1);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","TargetPointer",this.hasTarget?!0:!1);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"PointerSettings","TargetPointerColor",this.hasTarget?!0:!1);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"ScaleSettings","ScaleLabelPosition",this.radialgaugeJson.ShowScaleLabel&&(this.radialgaugeJson.GaugeType!==GaugeTypes.HalfRadialGauge||this.radialgaugeJson.GaugeType===GaugeTypes.HalfRadialGauge&&this.radialgaugeJson.ShowTicks)?!0:!1);this.propertyPanel.updateItemDisable("bool",this.controlType.toString(),"Filter","ActAsMasterWidget",this.hasSeries&&(this.hasActual||this.hasTarget)?!1:!0)},n.prototype.renderSeriesGauge=function(){var i=null,n,t;for(this.isHeaderVisible=this.widgetDataObj.length>1,this.radialgaugeItem.css({height:"100%"}),n=this.getSizeForGauge(this.widgetDataObj.length),this.radialgaugeContent=ej.buildTag("div.radialgaugeContent","",{width:"100%",height:"100%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"}),this.radialgaugeItem.append(this.radialgaugeContent),t=0;t<this.widgetDataObj.length;t++)this.radialgaugeElement=ej.buildTag("div","",{width:n.width,height:n.height,position:"relative","font-size":"10pt","background-color":"white",float:"left"},{id:this.designId+"Element"+this.radialgaugeJson.UniqueName+"_"+t}),this.widgetDataObj.length>1&&$(this.radialgaugeElement).css({border:"1px solid #d3d3d3",margin:"2px"}),this.radialgaugeContent.append(this.radialgaugeElement),this.seriesWidth=n.width,this.seriesHeight=n.height,this.customGauge=this.createDefaultGauge(),this.customGauge.appendTo(this.radialgaugeElement[0]),i=this.getRadialGaugeObj(this.radialgaugeElement[0]),this.renderGaugeData(this.widgetDataObj[t],i);this.radialgaugeItem.data("ejScroller")&&this.radialgaugeItem.ejScroller("destroy");this.radialgaugeItem.ejScroller({width:this.radialgaugeItem.width(),height:this.radialgaugeItem.height(),autoHide:!0,scrollerSize:5})},n.prototype.getScaleLabelFontSize=function(){return!this.radialgaugeJson.ShowScaleLabel||this.seriesHeight<150||this.seriesWidth<150?0:this.radius<200?12:this.radius<400?16:20},n.prototype.getValueLabelFontSize=function(){return this.radius<100?8:this.radius<200?12:this.radius<400?16:20},n.prototype.getGaugeAngle=function(){if(!ej.isNullOrUndefined(this.radialgaugeJson)){switch(this.radialgaugeJson.GaugeType){case GaugeTypes.HalfRadialGauge:return{startAngle:270,endAngle:90,actualValueRadius:"20%"};case GaugeTypes.FullRadialGauge:return{startAngle:210,endAngle:150,actualValueRadius:"0%"}}return{startAngle:210,endAngle:150,actualValueRadius:"0%"}}},n.prototype.getTargetPointerProp=function(){if(!ej.isNullOrUndefined(this.radialgaugeJson)&&this.radialgaugeJson.TargetPointer===TargetPointers.Line)return{height:2,width:this.rangeWidth}},n.prototype.getRangeWidth=function(n){return n*(this.radialgaugeJson.ScaleWidth/100)},n.prototype.getRadius=function(n,t){return Math.min(n/2,t/2)-20},n.prototype.getTargetPointerRadius=function(n,t){var i=(n-t/2)/n*100;switch(this.radialgaugeJson.TargetPointer){case TargetPointers.InvertedTriangle:i=100;break;case TargetPointers.Triangle:i=(n-t)/n*100}return i+"%"},n.prototype.getSizeForGauge=function(n){var r=$(this.radialgaugeItem).width(),u=$(this.radialgaugeItem).height(),a=this.getSeriesCount(),e=a>0?n:1,f,l;if(e===1)return{height:u,width:r};var o=null,s=null,c={width:250,height:200},t=Math.floor(r/(c.width+6)),i=Math.floor(u/(c.height+6)),h=t*i;if(h>=e){for(;;){if(t===1)break;if(f=Math.floor(e/t),l=Math.floor(e%t),f===0){t--;continue}if(f+=l!==0?1:0,i-f==0)break;if(i-f<0){f--;break}t--}o=Math.floor(r/t);s=Math.floor(u/i)}else h===0?(o=t>0?Math.floor(r/t):r,s=i>0?Math.floor(u/i):u):h>0&&(o=Math.floor(r/t),s=Math.floor(u/i));return{height:s-6,width:o-6}},n.prototype.getValueInPixel=function(n,t){return n/100*t},n.prototype.getDataCategoriesInfo=function(){return[{Name:"ActualValue",DisplayName:"Actual Value",CategoryType:CategoryType.Numeric,CategoryCount:1},{Name:"TargetValue",DisplayName:"Target Value",CategoryType:CategoryType.Numeric,CategoryCount:1},{Name:"StartValue",DisplayName:"Start Value",CategoryType:CategoryType.Numeric,CategoryCount:1},{Name:"EndValue",DisplayName:"End Value",CategoryType:CategoryType.Numeric,CategoryCount:1},{Name:"Series",DisplayName:"Series",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}]},n.prototype.setJson=function(n){this.radialgaugeJson=n},n.prototype.getDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions"}),n},n.prototype.updateDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.getPropertyGridItems=function(){this.hasActual=this.hasActualValue();this.hasTarget=this.hasTargetValue();this.hasStart=this.hasStartValue();this.hasEnd=this.hasEndValue();var n={Header:this.radialgaugeJson.ContainerSettings.Title,SubTitle:this.radialgaugeJson.ContainerSettings.SubTitle,Description:this.radialgaugeJson.ContainerSettings.Description,Type:this.controlType.toString(),Items:[{CategoryName:"Basic Settings",Items:[{name:"GaugeType",displayName:"Types",value:this.radialgaugeJson.GaugeType,valueList:["Half Circle","Horse Shoe"],itemType:"dropdown"},{name:"Minimum",displayName:"Minimum",value:this.radialgaugeJson.MinValue,itemType:"float",minimum:-999999999999,maximum:999999999999,unitType:"pt",isDisable:this.radialgaugeJson.Data.Containers.length>0&&this.hasStart?!0:!1},{name:"Maximum",displayName:"Maximum",value:this.radialgaugeJson.MaxValue,itemType:"float",minimum:-999999999999,maximum:999999999999,unitType:"pt",isDisable:this.radialgaugeJson.Data.Containers.length>0&&this.hasEnd?!0:!1},{name:"Target",displayName:"Target",value:this.radialgaugeJson.CustomTarget,itemType:"float",decimalPlaces:0,minimum:-999999999999,maximum:999999999999,unitType:"pt",isVisible:!1,isDisable:this.radialgaugeJson.Data.Containers.length>0&&(this.hasActual||this.hasTarget)?!0:!1},{name:"Direction",displayName:"Direction",value:this.radialgaugeJson.Direction===GaugeDirection.HighIsGood?"High is Good":"Low is Good",itemType:"dropdown",valueList:["High is Good","Low is Good"],isVisible:this.radialgaugeJson.Data.Containers.length>0?this.hasActual&&this.hasTarget?!0:!1:!1},{name:"EnableAnimation",displayName:"Enable Animation",value:this.radialgaugeJson.EnableAnimation?!0:!1,itemType:"bool"},{name:"ShowValueLabel",displayName:"Show Value Label",value:this.radialgaugeJson.ShowValueLabel?!0:!1,itemType:"bool",isVisible:!1},{name:"ValueLabelPosition",displayName:"Value Label Position",value:ej.DashboardDesignerUtility.Serialization.enumToString(ValueLabelPosition,this.radialgaugeJson.ValueLabelPosition),valueList:["Inside","Outside"],itemType:"dropdown",isVisible:!1}]},{CategoryName:"Pointer Settings",Items:[{name:"ValuePointer",displayName:"Value Pointer",value:this.radialgaugeJson.ValuePointer,valueList:["Range Pointer","Needle Pointer","Range with Needle"],itemType:"dropdown",isVisible:this.radialgaugeJson.ShowRange?!1:!0},{name:"RangeBarColor",displayName:"Range Pointer Color",value:this.radialgaugeJson.RangeColor,itemType:"color",isVisible:!this.radialgaugeJson.ShowRange&&this.radialgaugeJson.ValuePointer!==ValuePointers.NeedlePointer?!0:!1},{name:"NeedlePointerColor",displayName:"Needle Pointer Color",value:this.radialgaugeJson.NeedlePointerColor,itemType:"color",isVisible:this.radialgaugeJson.ShowRange||this.radialgaugeJson.ValuePointer===ValuePointers.RangeWithNeedle||this.radialgaugeJson.ValuePointer===ValuePointers.NeedlePointer?!0:!1},{name:"NeedleValuePointerHeight",displayName:"Needle Pointer Height",value:this.radialgaugeJson.NeedlePointerHeight,itemType:"float",decimalPlaces:0,minimum:20,maximum:100,unitType:"pt",isVisible:this.radialgaugeJson.ShowRange||this.radialgaugeJson.ValuePointer===ValuePointers.RangeWithNeedle||this.radialgaugeJson.ValuePointer===ValuePointers.NeedlePointer?!0:!1},{name:"TargetPointer",displayName:"Target Pointer",value:this.radialgaugeJson.TargetPointer,valueList:["Line","Triangle","Inverted Triangle"],itemType:"dropdown",isVisible:this.radialgaugeJson.Data.Containers.length>0&&this.hasTarget?!0:!1},{name:"TargetPointerColor",isVisible:this.radialgaugeJson.Data.Containers.length>0&&this.hasTarget?!0:!1,displayName:"Target Color",value:this.radialgaugeJson.TargetPointerColor,itemType:"color"}]},{CategoryName:"Scale Settings",Items:[{name:"ShowTicks",displayName:"Show Ticks",value:this.radialgaugeJson.ShowTicks?!0:!1,itemType:"bool"},{name:"TicksPosition",displayName:"Ticks Position",value:ej.DashboardDesignerUtility.Serialization.enumToString(TicksPosition,this.radialgaugeJson.TicksPosition),itemType:"dropdown",valueList:["Inside","Outside"],isVisible:this.radialgaugeJson.ShowTicks?!0:!1},{name:"TicksHeight",displayName:"Ticks Height",value:this.radialgaugeJson.TicksHeight,itemType:"float",decimalPlaces:0,minimum:1,maximum:10,unitType:"pt",isVisible:this.radialgaugeJson.ShowTicks?!0:!1},{name:"TicksWidth",displayName:"Ticks Width",value:this.radialgaugeJson.TicksWidth,itemType:"float",decimalPlaces:0,minimum:1,maximum:5,unitType:"pt",isVisible:this.radialgaugeJson.ShowTicks?!0:!1},{name:"ShowScaleLabel",displayName:"Show Scale Label",value:this.radialgaugeJson.ShowScaleLabel?!0:!1,itemType:"bool"},{name:"ScaleLabelPosition",displayName:"Scale Label Position",value:ej.DashboardDesignerUtility.Serialization.enumToString(ScaleLabelPosition,this.radialgaugeJson.ScaleLabelPosition),itemType:"dropdown",valueList:["Inside","Outside"],isVisible:this.radialgaugeJson.ShowScaleLabel?!0:!1},{name:"RangeWidth",displayName:"Scale Width",value:this.radialgaugeJson.ScaleWidth,itemType:"float",decimalPlaces:0,minimum:1,maximum:60,unitType:"pt",isVisible:!0}]},{CategoryName:"Range Settings",Items:[{name:"ShowRange",displayName:"Show Range",value:this.radialgaugeJson.ShowRange?!0:!1,itemType:"bool"},{name:"Ranges",displayName:"Range",value:this.range,valueList:["Range 1","Range 2","Range 3"],itemType:"dropdown",isDisable:this.radialgaugeJson.ShowRange?!1:!0},{name:"Start",displayName:"Start",value:this.getStartValue(),itemType:"float",minimum:-999999999999,maximum:999999999999,unitType:"pt",isDisable:this.radialgaugeJson.ShowRange?!1:!0},{name:"End",displayName:"End",value:this.getEndValue(),itemType:"float",minimum:-999999999999,maximum:999999999999,unitType:"pt",isDisable:this.radialgaugeJson.ShowRange?!1:!0},{name:"RangeColor",isDisable:this.radialgaugeJson.ShowRange?!1:!0,displayName:"Range Color",value:this.getRangeColor(),itemType:"color"}]},{CategoryName:"Link",Items:[{name:"Link",value:ej.DashboardUtil.getInstance().useExistingLinks(this.radialgaugeJson),category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]}]};return n.Items.push(this.containerProperties.getFilterSettingsItems(this.radialgaugeJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo)),n.Items.push(this.containerProperties.getContainerSettingItems(this.radialgaugeJson.ContainerSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo)),n},n.prototype.getStartValue=function(){return this.range==="Range 1"?this.getUnformattedMaxValue(this.radialgaugeJson.RangeCollection[0].Start,this.maxFormat):this.range==="Range 3"?this.getUnformattedMaxValue(this.radialgaugeJson.RangeCollection[2].Start,this.maxFormat):this.getUnformattedMaxValue(this.radialgaugeJson.RangeCollection[1].Start,this.maxFormat)},n.prototype.getEndValue=function(){return this.range==="Range 1"?this.getUnformattedMaxValue(this.radialgaugeJson.RangeCollection[0].End,this.maxFormat):this.range==="Range 3"?this.getUnformattedMaxValue(this.radialgaugeJson.RangeCollection[2].End,this.maxFormat):this.getUnformattedMaxValue(this.radialgaugeJson.RangeCollection[1].End,this.maxFormat)},n.prototype.getRangeColor=function(){return this.range==="Range 1"?this.radialgaugeJson.RangeCollection[0].Color:this.range==="Range 3"?this.radialgaugeJson.RangeCollection[2].Color:this.radialgaugeJson.RangeCollection[1].Color},n.prototype.updateLink=function(n){this.radialgaugeJson.UrlLink.EnableLink=n.EnableLink;this.radialgaugeJson.UrlLink.LinkType=n.LinkType;this.radialgaugeJson.UrlLink.GridUrlType=n.GridUrlType;this.radialgaugeJson.UrlLink.PassingParameters=n.PassingParameters;this.radialgaugeJson.UrlLink.UrlPath=n.UrlPath},n.prototype.getRadialGaugeJson=function(){var n=new GaugeSettings;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.dispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.radialgaugeJson.UniqueName,[this.radialgaugeJson],null);this.destroy();$("#"+this.designer._id+"_"+this.radialgaugeJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.radialgaugeJson.UniqueName).remove();this.designPanel.selectedReportItems=[]},n.prototype.destroy=function(){var r,n,t,i;if(!ej.isNullOrUndefined(this.radialgaugeContent)&&this.radialgaugeContent.length>0){for(r=this.radialgaugeContent[0].childElementCount,n=0;n<r;n++)t=this.getRadialGaugeObj($(this.radialgaugeContent[0]).children()[n]),ej.isNullOrUndefined(t)||t.destroy();$(this.radialgaugeElement[0]).remove();$(this.radialgaugeContent[0]).remove();this.radialgaugeContent=null}else ej.isNullOrUndefined(this.radialgaugeElement)||(i=this.getRadialGaugeObj(this.radialgaugeElement[0]),ej.isNullOrUndefined(i)||(i.destroy(),$(this.radialgaugeElement[0]).remove()));this.radialgaugeElement=null;this.radialgaugeItem.data("ejScroller")&&(this.radialgaugeItem.ejScroller("destroy"),$(this.radialgaugeItem[0]).remove(),this.radialgaugeItem=null)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.radialgaugeJson)&&(this.radialgaugeJson=this.getRadialGaugeJson()),this.radialgaugeJson},n.prototype.getParameterColumn=function(){return{Value:this.radialgaugeJson.ContainerSettings.Title,Id:this.radialgaugeJson.Data.Id}},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Auto,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(t,i){n.FieldType==="Measures"&&i.textContent.toLowerCase()!=="none"&&i.textContent.toLowerCase()!=="sort..."&&i.textContent.toLowerCase()!=="format..."&&$(i).css("display","block");n.FieldType==="Dimensions"&&n.DateTimeFormat==="None"?($(i).find("a").attr("fieldmenuname").toLowerCase()==="sort"||$(i).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters")&&$(i).css("display","block"):n.FieldType==="Dimensions"&&n.DateTimeFormat!=="None"&&i.textContent.toLowerCase()!=="format..."&&$(i).css("display","block")}),{addFormatOption:!1,ejMenu:t}},n.prototype.onFieldDragDropped=function(){return!0},n.prototype.isFieldValid=function(n,t,i){return!(t===CategoryType[CategoryType.Non_Numeric]&&i==="Series"&&n.toLowerCase()==="true")},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.GetEndRangeValue=function(n){var s=n/10,h=n/100,t=h>=1?h:s>=1?s:n,u=null,f,e,v,o,i,c,l;t<1&&(f=t*10,e=t*100,f>=1?u=!0:e>=1&&(u=!1),t=f<1?e<1?t:e:f);var y=t/20,a=y+t,r=0;if(t>=4&&t<=8)r=Math.ceil(a);else for(v=Math.ceil(a*10),o=this.GetTheConsolitatedList(v),i=0;i<o.length;i++)if(c=i===0?o[i]:r,l=o[i+1],r=Math.abs(c-t)<Math.abs(l-t)?c:l,i===2)break;return u===!0||u===!1?u===!0?r/10:r/100:r*(h>=1?100:s>=1?10:1)},n.prototype.GetTheConsolitatedList=function(n){var t=[];return t.push(Math.ceil(n/8)*8/10),t.push(Math.ceil(n/7)*7/10),t.push(Math.ceil(n/6)*6/10),t.push(Math.ceil(n/5)/2),t},n.prototype.CalculateMinAndMax=function(n,t,i,r){Math.abs(n)>25||Math.abs(t)>25?t=this.CalculateRangeEndValue(n,t,10):(Math.abs(n)<=25||Math.abs(t)<=25)&&(Math.abs(n)>2.5||Math.abs(t)>2.5)?t=this.CalculateRangeEndValue(n,t,5):(Math.abs(n)<=2.5||Math.abs(t)<=2.5)&&(Math.abs(n)>1||Math.abs(t)>1)?t=this.CalculateRangeEndValue(n,t,2.5):(Math.abs(n)<=1||Math.abs(t)<=1)&&(Math.abs(n)>.5||Math.abs(t)>.5)?t=this.CalculateRangeEndValue(n,t,1):(Math.abs(n)<=.5||Math.abs(t)<=.5)&&(t=this.CalculateRangeEndValue(n,t,.5));n===0&&t===0&&(n=0,t=100);i=n;r=t;return[i,r]},n.prototype.CalculateRangeEndValue=function(n,t,i){var r;return t>=0&&n>=0?(r=i-Math.abs((Math.abs(n)-Math.abs(t))%i),r!==i&&(t=Math.round(t+r))):t>=0&&n<=0?(r=i-Math.abs((Math.abs(n)+Math.abs(t))%i),r!==i&&(t=Math.round(t+r))):t<=0&&n<=0?(r=i-Math.abs((Math.abs(n)-Math.abs(t))%i),r!==i&&(t=Math.round(t-r))):t<=0&&n>=0&&(r=i-Math.abs((Math.abs(n)+Math.abs(t))%i),r!==i&&(t=Math.round(t-r))),t%i%10!=0&&(t=t+(i-t%i)),t},n}();window.ej.createObject("ej.DashboardDesignerUtility.RadialGaugeItem",InternalRadialGaugeReportItem,window);ej.DashboardDesignerUtility.RadialGaugeItem.prototype.widgetItems();InternalColorPalette=function(){function n(){this.callMethod="";this.colorCodes=[];var n=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=n._id}return Object.defineProperty(n,"ColorPalette",{get:function(){return(this.colorpalette===null||this.colorpalette===undefined)&&(this.colorpalette=new ej.DashboardDesignerUtility.ColorPalette),this.colorpalette},enumerable:!0,configurable:!0}),n.prototype.openColorPalette=function(n,t,i,r,u,f){var o,e,s,h;if(this.callInstance=r,this.callMethod=u,ej.isNullOrUndefined(n)?($(this.container).empty(),$(this.rootContainer).css("display",ej.isNullOrUndefined(i.isVisible)?f.length>0?"inline-block":"none":i.isVisible?"inline-block":"none")):(this.rootContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control e-color-palette-container","",{display:ej.isNullOrUndefined(i.isVisible)?f.length>0?"inline-block":"none":i.isVisible?"inline-block":"none"},{id:this.id+"_"+t+"_"+i.name+"_container"}),this.container=ej.buildTag("div","",{},{id:this.id+"_"+t+"_"+i.name+"_childContainer"}),n.css({"margin-bottom":"10px"}),n.append(this.rootContainer),this.rootContainer.append(this.container),this.rootContainer.ejScroller({width:430,height:280,autoHide:!0,scrollerSize:9,buttonSize:14})),this.colorCodes=f,o=280,!ej.isNullOrUndefined(this.container)){for(e=0;e<this.colorCodes.length;e++)this.renderRowElement(this.container,this.colorCodes[e],e);s=5;this.colorCodes.length<s&&(h=5,o=o/s*this.colorCodes.length+h)}ej.isNullOrUndefined(this.rootContainer)||this.rootContainer.ejScroller({width:430,height:o,autoHide:!0,scrollerSize:9,buttonSize:14,enableTouchScroll:!1})},n.prototype.renderRowElement=function(n,t,i){var f=ej.buildTag("div","",{width:"100%"},{id:this.id+"_seriespalette__Container"+i}),r=ej.buildTag("div.e-color-palette-row","",{},{id:this.id+"_seriespalette__Label"+i}),e=ej.buildTag("div.e-color-palette-label-wrap","",{}),o=ej.buildTag("div.e-designer-fontfamily e-color-palette-label","",{});o.text(t.Name).attr("title",t.Name);var s=ej.buildTag("div.e-color-palette-color-picker-wrap","",{},{id:this.id+"_seriespalette__LabelValue"+i+"_parent"}),h=ej.buildTag("input.e-dashboarddesigner e-color-palette-input","",{},{id:this.id+"_seriespalette__LabelValue"+i+"_colorpicker"}),c=ej.buildTag("div.e-color-palette-color-textbox-wrap","",{},{id:this.id+"_seriespalette__LabelValue"+i+"_value"}),u=ej.buildTag("input.e-textbox e-designer-content-label e-color-picker-color-textbox","",{},{id:this.id+"_seriespalette__LabelValue"+i,type:"text"});u.val(t.Value);u.bind("focusout",$.proxy(this.textFocusOut,this,i));u.bind("keyup",$.proxy(this.textKeyUp,this,i));n.append(f);f.append(r);r.append(e);e.append(o);r.append(s);s.append(h);r.append(c);c.append(u);h.ejColorPicker({value:t.Value,cssClass:"e-designer-ejwidgets-colorpicker e-designer-content-label",select:$.proxy(this.onValueChange,this,i),width:"35px",height:"26px",modelType:"palette",palette:"basicpalette"})},n.prototype.onValueChange=function(n,t){this.colorCodes[n].Value=t.value;$("#"+this.id+"_seriespalette__LabelValue"+n).val(t.value);var i={rowIndex:n,textValue:t.value,isModified:this.colorCodes[n].IsModifed,id:this.colorCodes[n].Id};ej.DashboardUtil.invokeMethod(this.callInstance,this.callMethod,[i])},n.prototype.textKeyUp=function(n,t){t.keyCode===13&&this.textFocusOut(n,t)},n.prototype.textFocusOut=function(n){var t=$("#"+this.id+"_seriespalette__LabelValue"+n).val(),r=new RegExp("^#+([a-fA-F0-9]{6}|[a-fA-F0-9]{3})$"),i;r.test(t)?(this.colorCodes[n].Value=t,$("#"+this.id+"_seriespalette__LabelValue"+n+"_colorpicker").data("ejColorPicker").setModel({value:this.colorCodes[n].Value}),i={rowIndex:n,textValue:t,isModified:this.colorCodes[n].IsModifed,id:this.colorCodes[n].Id},ej.DashboardUtil.invokeMethod(this.callInstance,this.callMethod,[i])):$("#"+this.id+"_seriespalette__LabelValue"+n).val(this.colorCodes[n].Value)},n}();window.ej.createObject("ej.DashboardDesignerUtility.ColorPalette",InternalColorPalette,window);InternalComboBoxReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="ComboBox";this.isMasterByDefault=!0;this.rootCss="e-combobox-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.comboBoxJson=null;this.contentContainer=null;this.comboBoxItem=null;this.isHeaderVisible=!0;this.controlHeader=null;this.controlSubHeader=null;this.reportName=null;this.dataGroupInfo=null;this.dataConfiguration=null;this.minWidth=0;this.minHeight=0;this.selectedIndices=null;this.containerProperties=null;this.dataValues=null;this.masterSlaveConfiguration=null;this.clonedData=null;this.isDefaultRendering=!1;this.allSpecialChar="&ZeroWidthSpace;";this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.isDataEnabled=!0;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.masterSlaveConfiguration=ejDashboardDesigner.getInstance("MasterSlaveFilter");this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.ComboBox;this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.getWidgetItemContainer=function(){return this.getReportItem()},n.prototype.render=function(n){this.renderComboBoxItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.comboBoxItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.comboBoxJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateComboBoxItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(){return!0},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getComboBoxContainerInstance()},n.prototype.refresh=function(){this.resize()},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(){return null},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"42051973-9edd-42af-a66b-dcf8f8ae0349",widgetName:"ComboBox",widgetDisplayName:n.itemPanel.widgetTitle.comboBox,cssClass:"e-widgeticon e-reportdesigner-widget-checkbox",widgetNameSpace:"ej.DashboardDesignerUtility.ComboBoxItem",searchCategory:["combobox","filters"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.comboBox,description:n.itemPanel.widgetDescription.comboBoxDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq}}]})},n.prototype.getComboBoxContainerInstance=function(){return this.containerProperties},n.prototype.setWidgetJson=function(n){this.comboBoxJson=n},n.prototype.renderComboBoxReportElement=function(n){try{this.comboBoxJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.comboBoxJson.ContainerSettings.Bounds.Row,column:this.comboBoxJson.ContainerSettings.Bounds.Column,rowSpan:this.comboBoxJson.ContainerSettings.Bounds.RowSpan,colSpan:this.comboBoxJson.ContainerSettings.Bounds.ColumnSpan};this.renderComboBoxElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.comboBoxJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderComboBoxItem=function(){try{this.renderComboBoxElement();this.minHeight=this.controlContainer.height();this.minWidth=this.controlContainer.width();this.comboBoxJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ComboBox)}catch(n){this.designPanel.logError({Source:this.comboBoxJson.UniqueName,Error:n.message,Type:n.name})}},n.prototype.renderComboBoxElement=function(){this.comboBoxItem=ej.buildTag("div.e-comboboxitem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"comboBoxItem"+this.comboBoxJson.UniqueName});this.contentContainer.append(this.comboBoxItem);this.controlContainer.data("widgetInstance",this);var n=this.getDefaultData();this.createComboBoxElement(n.Datasource,n.Fields)},n.prototype.getDefaultData=function(){return this.isDefaultRendering=!0,{Datasource:[{itemId:"i1",itemName:"Item1"},{itemId:"i2",itemName:"Item2"},{itemId:"i3",itemName:"Item3"},{itemId:"i4",itemName:"Item4"},{itemId:"i5",itemName:"Item5"},{itemId:"i6",itemName:"Item6"},{itemId:"i7",itemName:"Item7"}],Fields:{id:"itemId",text:"itemName"}}},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.comboBoxJson)&&(this.comboBoxJson=this.getComboBoxJson()),this.comboBoxJson},n.prototype.createComboBoxElement=function(n,t){var r,i;this.comboBoxElement=ej.buildTag("input.e-combobox-element","",{position:"relative","font-size":"12px","background-color":"white"},{id:this.designId+"comboBoxElement"+this.comboBoxJson.UniqueName});this.comboBoxItem.append(this.comboBoxElement);this.comboBoxItem.css("padding","5px");r=25;this.comboBoxElement.ejDropDownList({cssClass:"e-dbrd-control",dataSource:n,fields:t,watermarkText:"All",showCheckbox:this.comboBoxJson.EnableMultiSelection,width:this.comboBoxItem.width().toString(),height:r.toString(),change:$.proxy(this.selectionChange,this)});i=this.contentContainer.innerHeight()/2-(r/2+7.5);i<0&&(i=39.5);this.comboBoxItem.css("padding-top",i+"px");this.resize()},n.prototype.getSelectedItems=function(){var i={UnselectedItems:[],SelectedItems:[]},n;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0)for(n=0;n<this.comboBoxJson.SelectedFilterValues.length;n++){var t=this.comboBoxJson.SelectedFilterValues[n],r=this.dataGroupInfo.Values[0].Values[0],u=r.FieldActualType==="e-reportdesigner-dataset-string"||r.FieldActualType==="e-reportdesigner-dataset-number",f=u?t.InitialDimensionFilter.Text:t.InitialDateFilter.DisplayDateFilterList,e=u?ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,t.InitialDimensionFilter.DimesnionFilterCondition):ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,t.InitialDateFilter.DateFilterCondition);e===ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude)||e===ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Exclude)?i.UnselectedItems=f:i.SelectedItems=f}return i},n.prototype.clearFilter=function(){var n=this.comboBoxElement.data("ejDropDownList")||this.comboBoxElement.data("ejListBox"),t;ej.isNullOrUndefined(n)||(n.pluginName==="ejDropDownList"?(n.uncheckAll(),n.clearText()):(n.unSelectAll(),t=ejDashboardDesigner.getInstance("DashboardDesigner"),!ej.isNullOrUndefined(t)&&t.clearmasterFilter&&(t.clearmasterFilter=!1,n.checkAll())));this.masterSlaveConfiguration.disableClearFilter(this.controlHeader);this.comboBoxJson.SelectFirstItemByDefault=!1;this.comboBoxJson.DefaultSelectedIndices="0";this.setPropertyElement("BasicSettings","DefaultPosition",this.comboBoxJson.DefaultSelectedIndices);this.setPropertyElement("BasicSettings","SelectItemsByIndex",this.comboBoxJson.SelectFirstItemByDefault);this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","DefaultPosition",this.comboBoxJson.SelectFirstItemByDefault);this.comboBoxJson.SelectedFilterValues=[];ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.checkSelectedIndices=function(n){this.comboBoxJson.SelectFirstItemByDefault&&(n.selectItemByIndex(this.comboBoxJson.DefaultSelectedIndices),this.masterSlaveConfiguration.enableClearFilter(this.controlHeader))},n.prototype.selectionChange=function(n){var v=this,f,i,t,u,s,a,o;if(this.masterSlaveConfiguration.isValidDataGroupInfo(this.comboBoxJson,this.dataGroupInfo)&&!this.comboBoxJson.SelectFirstItemByDefault){if(f=this.comboBoxElement.data("ejDropDownList")||this.comboBoxElement.data("ejListBox"),o=f.pluginName==="ejListBox"?!ej.isNullOrUndefined(n.event)&&(this.comboBoxJson.EnableMultiSelection?n.event.isInteraction:n.isInteraction):n.isInteraction,o){if(this.allStateCheck(n))return;i=[];t=this.dataGroupInfo.Values[0].Values[0];this.clonedData=$.extend(!0,{},t);var h=t.FieldActualType==="e-reportdesigner-dataset-string"||t.FieldActualType==="e-reportdesigner-dataset-number",c=t.FieldActualType==="e-reportdesigner-dataset-datetime"||t.FieldActualType==="e-reportdesigner-dataset-time",y=h?"e-reportdesigner-dataset-string":t.FieldActualType,r=h?ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include):c?ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include):ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),l=[],e=[];ej.isNullOrUndefined(f)||(u=this.getSelectedItemsList(f),this.comboBoxJson.EnableMultiSelection?(s=this.getInitialSelectionFilterValues(f,t,r,u),r=s.Action,h?(i=s.FilterInfo,r=i.length>0?r:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),i=i.filter(function(n){return n.indexOf(v.allSpecialChar)===-1})):c&&(e=s.FilterInfo,l=t.DateTimeFormat===ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Default)?this.masterSlaveConfiguration.getDateFilterList(e,!0):e,i={DateFormat:t.DateTimeFormat,DisplayFilterList:e,DateFilterList:l},r=e.length>0?r:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include))):(r=u.length>0?r:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains),i=c?{DateFormat:t.DateTimeFormat,DisplayFilterList:u,DateFilterList:u}:u));a={FilterInfo:i,Action:r,IsStdDateTime:!1};this.comboBoxJson.SelectedFilterValues=[this.masterSlaveConfiguration.updateInitialFiltersForFilterControls(t.UniqueColumnName,this.comboBoxJson.UniqueName,y,a)];i.length===0?this.clearFilter():this.masterSlaveConfiguration.enableClearFilter(this.controlHeader);ej.DashboardDesignerUtility.Serialization.notifyChange()}}else this.isDefaultRendering&&(o=this.comboBoxJson.EnableMultiSelection?n.event.isInteraction:n.isInteraction,o&&this.allStateCheck(n))},n.prototype.getSelectedItemsList=function(n){var t=[],i;switch(n.pluginName){case"ejListBox":i=this.comboBoxJson.EnableMultiSelection?n.getCheckedItems():n.getSelectedItems();$(i).each(function(){t.push(this.text)});break;case"ejDropDownList":t=n.getSelectedItemsID()}return t},n.prototype.getInitialSelectionFilterValues=function(n,t,i){var r=[];return r=this.getSelectedItemsList(n),i=ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Include),{Action:i,FilterInfo:r}},n.prototype.getExcludedValuesForInitialSelection=function(n,t,i,r){var e=[],f,u;for(t=ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Exclude),f=n.filter(function(n){return i.indexOf(n[r.UniqueColumnName])<0}),u=0;u<f.length;u++)e.push(f[u][r.UniqueColumnName]);return{UnselectedItems:e,InitialFilterCondition:t}},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=n;f.name==="DefaultPosition"?this.setValueForDefaultIndexTextBox(u,"ComboBox",i):this.propertyPanel.updatePropertyValue(u,"ComboBox",i);this.propertyPanel.canUpdate=!0},n.prototype.getPropertyGridItems=function(){var i=this.comboBoxElement.data("ejDropDownList")||this.comboBoxElement.data("ejListBox"),t=!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0&&i.pluginName==="ejDropDownList",n=new ej.DashboardDesignerUtility.PropertyGridItem(this.comboBoxJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.comboBoxJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.comboBoxJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.comboBoxJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.comboBoxJson.ContainerSettings.Description,n.propertyGridItems.Type="ComboBox",n.filterSettingsProperty.Items[2].isVisible=!1,$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"EnableMultiSelect",displayName:"Enable Multiselect",value:this.comboBoxJson.EnableMultiSelection,itemType:"bool"},{name:"SelectItemsByIndex",displayName:"Select Items by Index",isVisible:t,value:this.comboBoxJson.SelectFirstItemByDefault,itemType:"bool"},{name:"DefaultPosition",displayName:"Default Positions",isVisible:t&&this.comboBoxJson.SelectFirstItemByDefault,itemType:"object",callbackInstance:this,callbackMethod:"renderDefaultIndex"}]},n.filterSettingsProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.renderDefaultIndex=function(n,t,i){var c,u,l,a;if(ej.isNullOrUndefined(n)){u=$("#"+this.designId+"_"+t+"_"+i.name);u.off("blur",$.proxy(this.defaultIndexFoucusOut,this));u.off("keyup",$.proxy(this.defaultIndexKeyUp,this));u.on("blur",$.proxy(this.defaultIndexFoucusOut,this));u.on("keyup",$.proxy(this.defaultIndexKeyUp,this));u.val(this.comboBoxJson.DefaultSelectedIndices);l=this.comboBoxElement.data("ejDropDownList")||this.comboBoxElement.data("ejListBox");a=!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0&&l.pluginName==="ejDropDownList";this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","DefaultPosition",a&&this.comboBoxJson.SelectFirstItemByDefault)}else{var f=ej.buildTag("div","",{"margin-bottom":"15px",width:"100%",position:"relative",display:ej.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designId+"_"+t+"_"+i.name+"_container"}),s=ej.buildTag("div","",{width:(n.width()-33)*.47+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),e=ej.buildTag("div.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});e.text(i.name);s.append(e);ej.isNullOrUndefined(i.displayName)||e.text(i.displayName);f.append(s);var o=ej.buildTag("div","",{width:(n.width()-33)*.57+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.designId+"_"+t+"_"+i.name+"_parent"}),r=ej.buildTag("input.e-textbox","",{height:"28px",width:"80%",float:"left","box-sizing":"border-box","margin-right":"10px"},{id:this.designId+"_"+t+"_"+i.name,type:"text"}),h=ej.buildTag("div.e-defaultIndex-info","",{height:"28px",width:"35px",float:"left","box-sizing":"border-box","line-height":"28px"},{id:this.designId+"_"+t+"_"+i.name+"description"});r.val(this.comboBoxJson.DefaultSelectedIndices);o.append(r);o.append(h);r.off("blur",$.proxy(this.defaultIndexFoucusOut,this));r.off("keyup",$.proxy(this.defaultIndexKeyUp,this));r.on("blur",$.proxy(this.defaultIndexFoucusOut,this));r.on("keyup",$.proxy(this.defaultIndexKeyUp,this));c=this.getDefaultIndexInfoTemplate();h.ejTooltip({content:c,cssClass:"e-defaultIndex-template",isBalloon:!1});f.append(o);n.append(f);n.addClass("e-default-position-container")}},n.prototype.defaultIndexFoucusOut=function(n){var t=$(n.target).val();this.comboBoxJson.DefaultSelectedIndices!=t&&this.updateDefaultPosition(t)},n.prototype.defaultIndexKeyUp=function(n){if(n.keyCode===13){var t=$(n.target).val();this.comboBoxJson.DefaultSelectedIndices!=t&&this.updateDefaultPosition(t)}},n.prototype.getDefaultIndexInfoTemplate=function(){return'<div class= "e-defaultIndex-info-container"><div class="e-defaultIndex-text-wrapper"><div class = "e-defaultIndexHeader"><b>'+this.designer.locale.DefaultIndexInfo.usage+'<\/b><\/div><div class = "e-defaultIndex-info-text">'+this.designer.locale.DefaultIndexInfo.usageText+'<\/div><\/div><div class="e-defaultIndex-text-wrapper"><div class = "e-defaultIndexHeader"><b>'+this.designer.locale.DefaultIndexInfo.limitation+'<\/b><\/div><div class = "e-defaultIndex-info-text ">'+this.designer.locale.DefaultIndexInfo.limitationText+'<\/div><\/div><div class="e-defaultIndex-text-wrapper"><div class = "e-defaultIndexHeader"><b>'+this.designer.locale.DefaultIndexInfo.syntax+'<\/b><\/div><div class = "e-defaultIndex-info-text">'+this.designer.locale.DefaultIndexInfo.singleNumberSyntax+'<\/div><div class = "e-defaultIndex-info-text">'+this.designer.locale.DefaultIndexInfo.commaSyntax+'<\/div><div class = "e-defaultIndex-info-text">'+this.designer.locale.DefaultIndexInfo.rangeSyntax+"<\/div><\/div><div>"},n.prototype.updateComboBoxItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.comboBoxJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.comboBoxJson);break;case"Description":this.propertyPanel.setDescription(this.comboBoxJson,i);break;case"EnableMultiSelect":this.updateEnableMultiSelect(i);break;case"SelectItemsByIndex":this.updateSelectFirstItemByDefault(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.comboBoxJson,i);break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"ComboBox",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-combobox-item",this.designer._id+"_"+this.comboBoxJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updateEnableMultiSelect=function(n){var t,r,i;this.comboBoxJson.EnableMultiSelection=n;t=this.comboBoxElement.data("ejDropDownList")||this.comboBoxElement.data("ejListBox");r=[];ej.isNullOrUndefined(t)||(t.pluginName==="ejListBox"?this.enableMultiSelectForListbox(n,t):(t.option("showCheckbox",n),n||(i=this.comboBoxJson.SelectFirstItemByDefault,this.clearFilter(),t.pluginName==="ejDropDownList"&&(t.option("watermarkText","All"),i&&(this.comboBoxJson.DefaultSelectedIndices="0",this.comboBoxJson.SelectFirstItemByDefault=i,this.setPropertyElement("BasicSettings","SelectItemsByIndex",this.comboBoxJson.SelectFirstItemByDefault),this.setPropertyElement("BasicSettings","DefaultPosition",this.comboBoxJson.DefaultSelectedIndices),this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","DefaultPosition",this.comboBoxJson.SelectFirstItemByDefault),this.updateDefaultPosition(this.comboBoxJson.DefaultSelectedIndices))))))},n.prototype.enableMultiSelectForListbox=function(n,t){var f=this,i=t.option("dataSource"),e=t.getSelectedItems(),o,r,u;t.option("showCheckbox",n);n?this.isDefaultRendering?(u=this.getDefaultData(),u.Datasource.unshift({itemId:this.allSpecialChar+"All",itemName:this.allSpecialChar+"All"}),t.option("dataSource",u.Datasource),t.checkAll()):(t.option("dataSource",this.allTextInsertion(i)),t.refresh(),e.length>0?t.checkItemByIndex(t.getIndexByText(e[0].text)):t.checkAll()):(o=this.getColumns(i)[0].text,r=this.isDefaultRendering?t.getListData().filter(function(n){return n.itemName.indexOf(f.allSpecialChar)!==-1}):t.getListData().filter(function(n){return n[o].toString().indexOf(f.allSpecialChar)!==-1}),!ej.isNullOrUndefined(r)&&r.length>0&&(i.splice(r.index,1),t.option("dataSource",i),t.refresh()),this.clearFilter())},n.prototype.updateSelectFirstItemByDefault=function(n){this.comboBoxJson.SelectFirstItemByDefault=n;n?(this.comboBoxJson.SelectedFilterValues=[],this.updateDefaultPosition(this.comboBoxJson.DefaultSelectedIndices)):(this.clearFilter(),this.comboBoxJson.DefaultSelectedIndices="0");this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","DefaultPosition",n)},n.prototype.updateDefaultPosition=function(n){var i=this.comboBoxElement.data("ejDropDownList");if(!ej.isNullOrUndefined(i))if(this.comboBoxJson.EnableMultiSelection){var t=[],u=n.replace(/\s/g,""),r=this.checkErr(n);r||(t=this.getSelectedIndicesForMultiSelect(n),t.length===0?(t=this.getSelectedIndicesForMultiSelect(this.comboBoxJson.DefaultSelectedIndices),this.updateDefaultSelectedIndices(i,t)):(this.comboBoxJson.DefaultSelectedIndices=n,this.updateDefaultSelectedIndices(i,t)))}else this.defaultIndexForSingleSelection(n)},n.prototype.defaultIndexForSingleSelection=function(n){var t=this.comboBoxElement.data("ejDropDownList"),i;ej.isNullOrUndefined(t)||(i=new RegExp("^[0-9]*$"),i.test(n)&&n!==""?(parseInt(n)>t.model.dataSource.length?parseInt(this.comboBoxJson.DefaultSelectedIndices)<t.model.dataSource.length&&t.unselectItemByIndex(this.comboBoxJson.DefaultSelectedIndices):(this.comboBoxJson.DefaultSelectedIndices=n,this.updateDefaultSelectedIndices(t,n)),this.comboBoxJson.DefaultSelectedIndices=n):this.updateDefaultSelectedIndices(t,this.comboBoxJson.DefaultSelectedIndices))},n.prototype.checkErr=function(n){var r=n.replace(/\s/g,""),i=new RegExp(/^[0-9-,]+$/),t=new RegExp(/^[,]+$/);return!i.test(n)||t.test(n[0])||t.test(n[n.length-1])?(this.setPropertyElement("BasicSettings","DefaultPosition",this.comboBoxJson.DefaultSelectedIndices),!0):!1},n.prototype.getSelectedIndicesForMultiSelect=function(n){for(var c,f,e,u,i=[],o=new RegExp("^[0-9]*$"),s=n.replace(/\s/g,""),r=s.split(","),h=new RegExp(/[-]/),t=0;t<r.length;t++)if(c=r[t].replace(/\s/g,""),h.test(r[t])){for(f=r[t].split("-"),e=[],u=0;u<f.length;u++)o.test(f[u])&&e.indexOf(f[u])===-1&&e.push(parseInt(f[u]));if(i=this.getRangeIndices(i,e),i.length===0)break}else o.test(r[t])&&i.indexOf(r[t])===-1?i.push(r[t]):(i=this.comboBoxJson.DefaultSelectedIndices.split(","),this.setPropertyElement("BasicSettings","DefaultPosition",this.comboBoxJson.DefaultSelectedIndices));return i},n.prototype.updateDefaultIndex=function(n){this.comboBoxJson.DefaultSelectedIndices="0";this.comboBoxJson.EnableMultiSelection?n.selectItemsByIndices(this.comboBoxJson.DefaultSelectedIndices):n.selectItemByIndex(this.comboBoxJson.DefaultSelectedIndices);this.setPropertyElement("BasicSettings","DefaultPosition",this.comboBoxJson.DefaultSelectedIndices)},n.prototype.updateDefaultSelectedIndices=function(n,t){this.comboBoxJson.EnableMultiSelection?(n.clearText(),n.selectItemsByIndices(t.toString())):n.selectItemByIndex(t);this.setPropertyElement("BasicSettings","DefaultPosition",this.comboBoxJson.DefaultSelectedIndices);this.masterSlaveConfiguration.enableClearFilter(this.controlHeader);ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.getRangeIndices=function(n,t){if(t[0]<=t[1])for(var i=t[0];i<=t[1];i++)n.indexOf(i.toString())===-1&&n.push(i.toString());else n=[];return n},n.prototype.setValueForDefaultIndexTextBox=function(n,t,i){$("#"+this.designId+"_"+t+"_"+n.categoryName+"_"+n.name).val(i)},n.prototype.updateWidgetSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.comboBoxJson,CommandAction.ItemResize,"updateSize","e-combobox-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):this.resize()},n.prototype.updateItemSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.comboBoxJson,CommandAction.ItemResize,"updateItemSize","e-combobox-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):this.resize()},n.prototype.resize=function(){var n=this.comboBoxElement.data("ejDropDownList"),r,u,f,t,e,o,s,i;!ej.isNullOrUndefined(n)&&this.cellInfo.rowSpan>1?(r=n.model.dataSource,u=n.model.fields,n.destroy(),this.comboBoxElement.remove(),this.comboBoxElement=ej.buildTag("ul","",{margin:"0px",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"comboBoxElement"+this.comboBoxJson.UniqueName}),this.comboBoxItem.append(this.comboBoxElement).css("padding","0px"),this.allTextInsertion(r),this.comboBoxElement.ejListBox({dataSource:r,fields:u,allowMultiSelection:this.comboBoxJson.EnableMultiSelection,showCheckbox:this.comboBoxJson.EnableMultiSelection,width:this.comboBoxItem.width().toString(),height:this.comboBoxItem.height().toString(),checkChange:$.proxy(this.selectionChange,this),select:$.proxy(this.selectionChange,this),change:$.proxy(this.selectionChange,this),create:$.proxy(this.createScrollBar,this)}),f=this.comboBoxElement.data("ejListBox"),this.updateOrRemovedInitialSelection(f),this.comboBoxJson.SelectFirstItemByDefault&&this.clearFilter(),this.comboBoxJson.SelectFirstItemByDefault=!1,this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","SelectItemsByIndex",!1)):ej.isNullOrUndefined(n)&&this.cellInfo.rowSpan<=1?(n=this.comboBoxElement.data("ejListBox"),t=n.model.dataSource,e=n.model.fields,ej.isNullOrUndefined(n)||(t=this.removeAllTextFromDs(t,n),n.destroy(),this.comboBoxElement.remove(),this.createComboBoxElement(t,e),o=this.comboBoxElement.data("ejDropDownList"),this.updateOrRemovedInitialSelection(o),this.comboBoxJson.DefaultSelectedIndices="0",!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0].Values)&&this.dataGroupInfo.Values[0].Values.length>0&&this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","SelectItemsByIndex",!0))):ej.isNullOrUndefined(n)?(n=this.comboBoxElement.data("ejListBox"),n.option("height","100%"),n.option("width","100%")):(n.option("width","100%"),n.option("height","25"),s=25,i=this.contentContainer.innerHeight()/2-(s/2+7.5),i<0&&(i=39.5),this.comboBoxItem.css("padding-top",i+"px"))},n.prototype.allTextInsertion=function(n){var t,i,r;return this.comboBoxJson.EnableMultiSelection&&(t={},this.isDefaultRendering?(t.itemId=this.allSpecialChar+"All",t.itemName=this.allSpecialChar+"All"):(i=this.getColumns(n),r=i[0].text,t[r]=this.allSpecialChar+"All"),n.unshift(t)),n},n.prototype.removeAllTextFromDs=function(n,t){var i=this,u=this.getColumns(n)[0].text,r=this.isDefaultRendering?t.getListData().filter(function(n){return n.itemName.indexOf(i.allSpecialChar)!==-1}):t.getListData().filter(function(n){return n[u].toString().indexOf(i.allSpecialChar)!==-1});return ej.isNullOrUndefined(r)||n.splice(r.index,1),n},n.prototype.createScrollBar=function(){this.comboBoxElement.ejListBox("instance").listContainer.ejScroller({enableTouchScroll:!1,autoHide:!1,cssClass:"e-dbrd-designer-scroller e-dbrd-control",buttonSize:14})},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.comboBoxJson,CommandAction.ItemMove,"updatePosition","e-combobox-item")},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions"}),n},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Column",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}),n},n.prototype.isFieldValid=function(n,t,i){return!(t===CategoryType[CategoryType.Non_Numeric]&&i==="Column"&&n.toLowerCase()==="true")},n.prototype.updateReportItemData=function(n){var t,i,f,r,u;this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.comboBoxItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");t=this.comboBoxElement.data("ejDropDownList");ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.comboBoxJson,this.dataGroupInfo);ej.isNullOrUndefined(t)&&(t=this.comboBoxElement.data("ejListBox"));i=null;f={};ej.isNullOrUndefined(n.Error)||n.Error?ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):n.noDataAvailable?(this.comboBoxItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):ej.isNullOrUndefined(n)||n.data==="[]"||!ej.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?(n.data==="[]"&&n.columnBindings==="{}"||!ej.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(u=this.getDefaultData(),i=u.Datasource,t.option("fields",u.Fields),this.clearFilter(),this.allStateCheck()):(i=JSON.parse(n.data),r=this.getColumns(i),t.model.fields.id=r[0].id,t.model.fields.text=r[0].text,this.isDefaultRendering=!1,t.pluginName==="ejListBox"&&(i=this.allTextInsertion(i)),this.propertyPanel.updateItemVisibility("ComboBox","BasicSettings","SelectItemsByIndex",t.pluginName==="ejDropDownList"));ej.isNullOrUndefined(i)||(t.option("dataSource",i),this.updateOrRemovedInitialSelection(t),this.allStateCheck(),this.comboBoxJson.SelectFirstItemByDefault&&this.updateDefaultPosition(this.comboBoxJson.DefaultSelectedIndices),t.pluginName==="ejListBox"&&this.comboBoxJson.SelectedFilterValues.length===0&&this.comboBoxJson.EnableMultiSelection&&t.checkAll())},n.prototype.updateOrRemovedInitialSelection=function(n){var f,e,u,r;if(this.comboBoxJson.FilterSettings.ActAsMasterWidget&&!ej.isNullOrUndefined(n)&&this.comboBoxJson.SelectedFilterValues.length>0){var t=[],i=this.dataGroupInfo.Values[0].Values[0],s=i.FieldActualType==="e-reportdesigner-dataset-string"||i.FieldActualType==="e-reportdesigner-dataset-number",h=i.FieldActualType==="e-reportdesigner-dataset-datetime"||i.FieldActualType==="e-reportdesigner-dataset-time",o=this.masterSlaveConfiguration.isColumnFilterModified(this.clonedData,i);o?this.clearFilter():(t=this.getSelectedItems(),n.pluginName==="ejDropDownList"?(f=n.model.dataSource,e=this.getSelectedIndexValues(t.SelectedItems,[],f,i),n.selectItemByValue(t.SelectedItems),n.unselectItemByValue(t.UnselectedItems),this.masterSlaveConfiguration.enableClearFilter(this.controlHeader),e.length===0&&this.clearFilter()):n.pluginName==="ejListBox"&&(u=n.model.dataSource,r=[],this.comboBoxJson.EnableMultiSelection?(n.unCheckAll(),t.SelectedItems.length>0?r=this.getSelectedIndexValues(t.SelectedItems,[],u,i):t.UnselectedItems.length>0&&(r=this.getSelectedIndexValues([],t.UnselectedItems,u,i)),r.length===0?this.clearFilter():(n.checkItemsByIndices(r),this.masterSlaveConfiguration.enableClearFilter(this.controlHeader))):(n.unSelectAll(),r=this.getSelectedIndexValues(t.SelectedItems,[],u,i),n.selectItemByIndex(r[0]),this.masterSlaveConfiguration.enableClearFilter(this.controlHeader))))}},n.prototype.getSelectedIndexValues=function(n,t,i,r){for(var u,o,e=[],f=0;f<n.length;f++)for(u=0;u<i.length;u++)o=i[u][r.UniqueColumnName].toString(),n[f]===o&&e.indexOf(u)===-1&&e.push(u);for(f=0;f<t.length;f++)for(u=0;u<i.length;u++)o=i[u][r.UniqueColumnName].toString(),n[f]===o&&o.indexOf(this.allSpecialChar)===-1&&e.indexOf(u)===-1&&e.push(u);return e},n.prototype.allStateCheck=function(n){var t=this.comboBoxElement.data("ejListBox"),r=!1,i,u;return!ej.isNullOrUndefined(t)&&this.comboBoxJson.EnableMultiSelection&&(ej.isNullOrUndefined(n)||t.getIndexByText(n.text)!==0||n.item.attr("id").indexOf(this.allSpecialChar)===-1?(i=this.comboBoxElement.find("li .e-chkbox-wrap").filter("[aria-checked = false]"),i.length===1?(u=i.parent("li"),u.index()===0&&u.attr("id").indexOf(this.allSpecialChar)!==-1?(t.checkItemByIndex(0),this.clearFilter(),r=!0):t.uncheckItemByIndex(0)):i.length>1&&t.uncheckItemByIndex(0)):(this.clearFilter(),n.event.isChecked?t.checkAll():t.unCheckAll(),r=!0)),r},n.prototype.getColumns=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},n.prototype.updateReportItemDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.getComboBoxJson=function(){var n=new ComboBoxProperties;return n.FilterSettings.ActAsMasterWidget=!0,n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.comboBoxItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.comboBoxJson.UniqueName,[this.comboBoxJson],null);var n=this.comboBoxElement.data("ejDropDownList"),t=this.comboBoxElement.data("ejListBox");ej.isNullOrUndefined(n)||n.destroy();ej.isNullOrUndefined(t)||t.destroy();$("#"+this.designer._id+"_"+this.comboBoxJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.comboBoxJson.UniqueName).remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.ComboBox)},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration"),r;return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),r=this,$.each($(t.element).children(),function(n,t){($(t).find("a").attr("fieldmenuname").toLowerCase()==="sort"||$(t).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters")&&$(t).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null,r=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Ones,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n.prototype.getParameterColumn=function(){return{Value:this.comboBoxJson.ContainerSettings.Title,Id:this.comboBoxJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n}();window.ej.createObject("ej.DashboardDesignerUtility.ComboBoxItem",InternalComboBoxReportItem,window);ej.DashboardDesignerUtility.ComboBoxItem.prototype.widgetItems();InternalHeatMapReportItem=function(){function n(){this.rootCss="e-heatmap-item";this.cellInfo=null;this.controlContainer=null;this.dataGroupInfo=null;this.pluginId="";this.reportName=null;this.itemName="HeatMap";this.isMasterByDefault=!1;this.menuSettingsIconVisible=!0;this.heatMapJson=null;this.heatmapItem=null;this.isHeaderVisible=!0;this.contentContainer=null;this.containerProperties=null;this.dataValues=null;this.isXAxisTitleChanged=!1;this.isYAxisTitleChanged=!1;this.isFromDraft=!1;this.componentName="heatmap";this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.isDataEnabled=!0;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.HeatMap;this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051555",Items:[{id:"8d3e286f-5057-4267-b5ee-21b2d2985678",widgetName:"HeatMap",widgetDisplayName:n.itemPanel.widgetTitle.heatMap,cssClass:"e-widgeticon e-reportdesigner-widget-heatmap",widgetNameSpace:"ej.DashboardDesignerUtility.HeatMapItem",searchCategory:["heatmap","relationship"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span><span class='path3'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.heatMap,description:n.itemPanel.widgetDescription.heatMapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.heatMapDataReq}}]})},n.prototype.getrootCss=function(){return this.rootCss},n.prototype.render=function(n){return this.renderHeatMapItem(n)},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.getWidgetItemContainer=function(){return this.getReportItem()},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.getContainerInstance=function(){return this.containerProperties},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.updatePosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.heatMapJson,CommandAction.ItemMove,"updatePosition","e-heatmap-item")},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.heatMapJson)&&(this.heatMapJson=this.heatMapJsonItem()),this.heatMapJson},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.renderHeatMapReportElement=function(n){try{this.heatMapJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.isFromDraft=!0;this.cellInfo={row:this.heatMapJson.ContainerSettings.Bounds.Row,column:this.heatMapJson.ContainerSettings.Bounds.Column,rowSpan:this.heatMapJson.ContainerSettings.Bounds.RowSpan,colSpan:this.heatMapJson.ContainerSettings.Bounds.ColumnSpan};this.renderHeatMapElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.heatMapJson.UniqueName,Error:t,Type:t.name})}},n.prototype.refresh=function(){},n.prototype.renderHeatMapItem=function(){try{this.renderHeatMapElement();this.heatMapJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.HeatMap)}catch(n){this.designPanel.logError({Source:this.heatMapJson.UniqueName,Error:n,Type:n.name})}},n.prototype.renderHeatMapElement=function(){this.heatmapItem=ej.buildTag("div.e-heatmapitem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"heatmapItem"+this.heatMapJson.UniqueName});this.heatmapElement=ej.buildTag("div.e-heatmap-element","",{width:"100%",height:"100%",position:"relative","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"heatmapElement"+this.heatMapJson.UniqueName});this.heatmapItem.append(this.heatmapElement);this.contentContainer.append(this.heatmapItem);this.controlContainer.data("widgetInstance",this);this.jsonCellData=[{rowid:"xLabel1",columnid:"yLabel1",value:"77.6"},{rowid:"xLabel1",columnid:"yLabel2",value:"79.4"},{rowid:"xLabel1",columnid:"yLabel3",value:"80.8"},{rowid:"xLabel1",columnid:"yLabel4",value:"86.6"},{rowid:"xLabel1",columnid:"yLabel5",value:"83.7"},{rowid:"xLabel2",columnid:"yLabel1",value:"84.5"},{rowid:"xLabel2",columnid:"yLabel2",value:"82.6"},{rowid:"xLabel2",columnid:"yLabel3",value:"60.6"},{rowid:"xLabel2",columnid:"yLabel4",value:"65.4"},{rowid:"xLabel2",columnid:"yLabel5",value:"70.8"},{rowid:"xLabel3",columnid:"yLabel1",value:"73.8"},{rowid:"xLabel3",columnid:"yLabel2",value:"75.3"},{rowid:"xLabel3",columnid:"yLabel3",value:"77.5"},{rowid:"xLabel3",columnid:"yLabel4",value:"77.6"},{rowid:"xLabel3",columnid:"yLabel5",value:"64.9"},{rowid:"xLabel4",columnid:"yLabel1",value:"52.6"},{rowid:"xLabel4",columnid:"yLabel2",value:"60.8"},{rowid:"xLabel4",columnid:"yLabel3",value:"65.6"},{rowid:"xLabel4",columnid:"yLabel4",value:"52.6"},{rowid:"xLabel4",columnid:"yLabel5",value:"68.5"},{rowid:"xLabel5",columnid:"yLabel1",value:"75.6"},{rowid:"xLabel5",columnid:"yLabel2",value:"55.6"},{rowid:"xLabel5",columnid:"yLabel3",value:"52.3"},{rowid:"xLabel5",columnid:"yLabel4",value:"54.8"},{rowid:"xLabel5",columnid:"yLabel5",value:"51.1"}];var n=new ejdashboard.heatmap.HeatMap({width:"100%",height:"100%",xAxis:{labels:["xLabel1","xLabel2","xLabel3","xLabel4","xLabel5"],title:{text:this.heatMapJson.XAxisSettings.ShowAxisTitle?this.heatMapJson.XAxisSettings.AxisTitle:"",textStyle:{size:"10px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"}},textStyle:{size:this.heatMapJson.XAxisSettings.ShowAxisLabel?"10px":"0px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},labelRotation:this.heatMapJson.XAxisSettings.LabelRotation==="None"?"0":this.heatMapJson.XAxisSettings.LabelRotation,labelIntersectAction:this.heatMapJson.XAxisSettings.LabelIntersectAction,isInversed:this.heatMapJson.XAxisSettings.InversedAxis,opposedPosition:this.heatMapJson.XAxisSettings.OpposedAxis},created:this.createdEvent,tooltipRender:$.proxy(this.tooltipEvent,this),yAxis:{labels:["yLabel1","yLabel2","yLabel3","yLabel4","yLabel5"],textStyle:{size:this.heatMapJson.YAxisSettings.ShowAxisLabel?"10px":"0px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},title:{text:this.heatMapJson.YAxisSettings.ShowAxisTitle?this.heatMapJson.YAxisSettings.AxisTitle:"",textStyle:{size:"10px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"}},isInversed:this.heatMapJson.YAxisSettings.InversedAxis,opposedPosition:this.heatMapJson.YAxisSettings.OpposedAxis},dataSource:{data:this.jsonCellData,isJsonData:!0,adaptorType:"Cell",xDataMapping:"rowid",yDataMapping:"columnid",valueMapping:"value",bubbleDataMapping:{size:"value",color:"value"}},cellSettings:{textStyle:{size:"10px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"},border:{radius:this.heatMapJson.CellSettings.CellRadius,width:this.heatMapJson.CellSettings.CellBorder,color:"white"},showLabel:this.heatMapJson.CellSettings.ShowDataLabel,tileType:this.heatMapJson.CellSettings.TileType},paletteSettings:{palette:[{color:"#"+this.heatMapJson.ColorSettings.MinColor.substring(3)},{color:"#"+this.heatMapJson.ColorSettings.MaxColor.substring(3)}],type:"Gradient"},legendSettings:{visible:this.heatMapJson.LegendSettings.ShowLegend,position:this.heatMapJson.LegendSettings.Position,textStyle:{size:"10px",fontFamily:"Roboto",fontStyle:"Normal",fontWeight:"regular",color:"#636363"}},margin:{left:3,right:3,top:3,bottom:3}});(this.heatmapElement.width()<100||this.heatmapElement.height()<100)&&(n.xAxis.textStyle.size="0px",n.xAxis.title.text="",n.yAxis.title.text="",n.yAxis.textStyle.size="0px",n.legendSettings.visible=!1,n.showTooltip=!1);n.appendTo(this.heatmapElement[0])},n.prototype.getPropertyGridItems=function(){var n={Header:this.heatMapJson.ContainerSettings.Title,SubTitle:this.heatMapJson.ContainerSettings.SubTitle,Description:this.heatMapJson.ContainerSettings.Description,Type:"HeatMap",Items:[{CategoryName:"Cell Settings",Items:[{name:"ShowLabel",displayName:"Show Label",value:this.heatMapJson.CellSettings.ShowDataLabel,itemType:"bool"},{name:"CellRadius",displayName:"Cell Radius",value:this.heatMapJson.CellSettings.CellRadius,itemType:"float",decimalPlaces:0,minimum:0,maximum:10,unitType:"pt"},{name:"CellBorder",displayName:"Cell Border",value:this.heatMapJson.CellSettings.CellBorder,itemType:"float",decimalPlaces:0,minimum:0,maximum:10,unitType:"pt"}]},{CategoryName:"Color Settings",Items:[{name:"MinColor",displayName:"Min Color",value:"#"+this.heatMapJson.ColorSettings.MinColor.substring(3),itemType:"color"},{name:"MaxColor",displayName:"Max Color",itemType:"color",value:"#"+this.heatMapJson.ColorSettings.MaxColor.substring(3)}]},{CategoryName:"Legend Settings",Items:[{name:"ShowLegend",displayName:"Show Legend",value:this.heatMapJson.LegendSettings.ShowLegend,itemType:"bool"},{name:"LegendPosition",displayName:"Position",isVisible:this.heatMapJson.LegendSettings.ShowLegend,value:this.heatMapJson.LegendSettings.Position,itemType:"dropdown",valueList:["Bottom","Left","Right","Top"]}]},{CategoryName:"X-Axis Settings",Items:[{name:"ShowXAxisLabel",displayName:"Show Axis Label",value:this.heatMapJson.XAxisSettings.ShowAxisLabel,itemType:"bool"},{name:"ShowXAxisTitle",displayName:"Show Axis Title",value:this.heatMapJson.XAxisSettings.ShowAxisTitle,itemType:"bool"},{name:"XAxisTitle",displayName:"Axis Title",isVisible:this.heatMapJson.XAxisSettings.ShowAxisTitle,value:this.heatMapJson.XAxisSettings.AxisTitle,itemType:"string"},{name:"XAxisLabelRotation",displayName:"Label Rotation",itemType:"dropdown",isVisible:this.heatMapJson.XAxisSettings.ShowAxisLabel,value:this.heatMapJson.XAxisSettings.LabelRotation==="None"?"0"+String.fromCharCode(176):this.heatMapJson.XAxisSettings.LabelRotation+String.fromCharCode(176),valueList:["-90"+String.fromCharCode(176),"-45"+String.fromCharCode(176),"0"+String.fromCharCode(176),"+45"+String.fromCharCode(176),"+90"+String.fromCharCode(176)]},{name:"XAxisLabelIntersectAction",displayName:"Label Intersect Action",isVisible:this.heatMapJson.XAxisSettings.ShowAxisLabel,value:ej.DashboardDesignerUtility.Serialization.enumToString(LabelIntersectAction,this.heatMapJson.XAxisSettings.LabelIntersectAction),itemType:"dropdown",valueList:["None","Trim"]},{name:"InversedXAxis",displayName:"Inversed Axis",value:this.heatMapJson.XAxisSettings.InversedAxis,itemType:"bool"},{name:"OpposedXAxis",displayName:"Opposed Axis",value:this.heatMapJson.XAxisSettings.OpposedAxis,itemType:"bool"}]},{CategoryName:"Y-Axis Settings",Items:[{name:"ShowYAxisLabel",displayName:"Show Axis Label",value:this.heatMapJson.YAxisSettings.ShowAxisLabel,itemType:"bool"},{name:"ShowYAxisTitle",displayName:"Show Axis Title",value:this.heatMapJson.YAxisSettings.ShowAxisTitle,itemType:"bool"},{name:"YAxisTitle",displayName:"Axis Title",isVisible:this.heatMapJson.YAxisSettings.ShowAxisTitle,value:this.heatMapJson.YAxisSettings.AxisTitle,itemType:"string"},{name:"InversedYAxis",displayName:"Inversed Axis",value:this.heatMapJson.YAxisSettings.InversedAxis,itemType:"bool"},{name:"OpposedYAxis",displayName:"Opposed Axis",value:this.heatMapJson.YAxisSettings.OpposedAxis,itemType:"bool"}]}]};return n.Items.push(this.containerProperties.getFilterSettingsItems(this.heatMapJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo)),n.Items.push(this.containerProperties.getContainerSettingItems(this.heatMapJson.ContainerSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo)),n},n.prototype.tooltipEvent=function(n){n.content=ej.isNullOrUndefined(this.dataValues)||this.heatMapJson.CellSettings.TileType!=="Rect"||ej.isNullOrUndefined(this.dataGroupInfo)||this.dataGroupInfo.Values[0].Values.length===0||this.dataGroupInfo.Values[2].Values.length===0||this.dataGroupInfo.Values[3].Values.length===0?ej.isNullOrUndefined(this.dataValues)||this.heatMapJson.CellSettings.TileType!=="Bubble"||ej.isNullOrUndefined(this.dataGroupInfo)||this.dataGroupInfo.Values[0].Values.length===0||this.dataGroupInfo.Values[1].Values.length===0||this.dataGroupInfo.Values[2].Values.length===0||this.dataGroupInfo.Values[3].Values.length===0?this.heatMapJson.CellSettings.TileType==="Rect"?[n.xLabel+":"+n.value+"<br/>"+n.yLabel+":"+n.value]:[n.xLabel+":"+n.value[1].bubbleData+"<br/>"+n.yLabel+":"+n.value[0].bubbleData]:[this.dataGroupInfo.Values[0].Values[0].Value+":"+n.value[1].bubbleData+"<br/>"+this.dataGroupInfo.Values[1].Values[0].Value+":"+n.value[0].bubbleData+"<br/>"+this.dataGroupInfo.Values[2].Values[0].Value+":"+n.xLabel+"<br/>"+this.dataGroupInfo.Values[3].Values[0].Value+":"+n.yLabel]:[this.dataGroupInfo.Values[0].Values[0].Value+":"+n.value+"<br/>"+this.dataGroupInfo.Values[2].Values[0].Value+":"+n.xValue+"<br/>"+this.dataGroupInfo.Values[3].Values[0].Value+":"+n.yValue]},n.prototype.getDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions"}),n},n.prototype.isFieldValid=function(){return!0},n.prototype.getDataCategoriesInfo=function(){var n=[];return n.push({Name:"Value",DisplayName:"Value",CategoryType:CategoryType.Numeric,Visibility:Visibility.Show,CategoryCount:1}),n.push({Name:"Size",DisplayName:"Size",CategoryType:CategoryType.Numeric,Visibility:Visibility.Show,CategoryCount:1}),n.push({Name:"X-Axis",DisplayName:"X-Axis",CategoryType:CategoryType.Non_Numeric,Visibility:Visibility.Show,CategoryCount:1}),n.push({Name:"Y-Axis",DisplayName:"Y-Axis",CategoryType:CategoryType.Non_Numeric,Visibility:Visibility.Show,CategoryCount:1}),n},n.prototype.setJson=function(n){this.heatMapJson=n},n.prototype.updateData=function(n){this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.heatmapItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");var t=null,i=null;ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.heatMapJson,this.dataGroupInfo);ej.isNullOrUndefined(n.Error)||n.Error?ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):(n.noDataAvailable?(this.heatmapItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):ej.isNullOrUndefined(n)||n.data==="[]"||!ej.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?(n.data==="[]"&&n.columnBindings==="{}"||!ej.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&this.SetDefaultDataSource():(t=JSON.parse(n.data),i=JSON.parse(n.columnBindings),this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Values[2].Values.length>0&&this.dataGroupInfo.Values[3].Values.length>0?(this.UpdateDataSource(t),this.isFromDraft=!1):this.SetDefaultDataSource()),ej.DashboardUtil.updateAction("HeatMap","Link","Link"))},n.prototype.updateDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.updatePropertyData=function(){},n.prototype.updatePropertyChange=function(n,t,i,r){var o,s=!1,u,f,h,e;switch(n){case"Name":this.heatMapJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.heatMapJson);break;case"Description":this.propertyPanel.setDescription(this.heatMapJson,i);break;case"ItemLink":this.UpdateLink(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.heatMapJson,i);break;case"ShowLabel":this.UpdateDataLabelValue(i);break;case"CellRadius":this.UpdateCellRadius(i);break;case"CellBorder":this.UpdateCellBorder(i);break;case"TileType":this.UpdateTileType(i);break;case"ShowXAxisLabel":this.UpdateXAxisLabelVisibility(i);break;case"ShowXAxisTitle":this.UpdateXAxisTitleVisibility(i);break;case"XAxisTitle":this.UpdateXAxisTitleValue(i);break;case"XAxisLabelRotation":this.UpdateXAxisLabelRotation(i);break;case"XAxisLabelIntersectAction":this.UpdateXAxisLabelIntersectAction(i);break;case"InversedXAxis":this.UpdateInversedXAxis(i);break;case"OpposedXAxis":this.UpdateOpposedXAxis(i);break;case"ShowYAxisLabel":this.UpdateYAxisLabelVisibility(i);break;case"ShowYAxisTitle":this.UpdateYAxisTitleVisibility(i);break;case"YAxisTitle":this.UpdateYAxisTitleValue(i);break;case"YAxisLabelRotation":this.UpdateYAxisLabelRotation(i);break;case"YAxisLabelIntersectAction":this.UpdateYAxisLabelIntersectAction(i);break;case"InversedYAxis":this.UpdateInversedYAxis(i);break;case"OpposedYAxis":this.UpdateOpposedYAxis(i);break;case"ShowLegend":this.UpdateShowLegend(i);break;case"LegendPosition":this.UpdateLegendPosition(i);break;case"MinColor":this.UpdateMinColor(i);break;case"MaxColor":this.UpdateMaxColor(i);break;default:s=!0}if(ej.isNullOrUndefined(o)||(t=o),!s){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)h=u[f],h.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"HeatMap",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-heatmap-item",this.designer._id+"_"+this.heatMapJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updateSize=function(n){this.cellInfo=n;var t=this.heatmapElement[0].children.length>0?ejdashboard.base.getComponent(this.heatmapElement[0],"heatmap"):null;this.designPanel.updateWidgetItem(n,this.controlContainer,this.heatMapJson,CommandAction.ItemResize,"updateSize","e-heatmap-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):ej.isNullOrUndefined(t)||this.resize()},n.prototype.updateItemSize=function(n){this.cellInfo=n;var t=this.heatmapElement[0].children.length>0?ejdashboard.base.getComponent(this.heatmapElement[0],"heatmap"):null;this.designPanel.updateWidgetItem(n,this.controlContainer,this.heatMapJson,CommandAction.ItemResize,"updateItemSize","e-heatmap-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):ej.isNullOrUndefined(t)||this.resize()},n.prototype.onFieldDragDrop=function(n){return this.onFieldDragDropped(n)},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.dispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.heatMapJson.UniqueName,[this.heatMapJson],null);var n=this.heatmapElement[0].children.length>0?ejdashboard.base.getComponent(this.heatmapElement[0],"heatmap"):null;ej.isNullOrUndefined(n)||n.destroy();$("#"+this.designer._id+"_"+this.heatMapJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.heatMapJson.UniqueName).remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.HeatMap)},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n.prototype.getParameterColumn=function(){return{Value:this.heatMapJson.ContainerSettings.Title,Id:this.heatMapJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Auto,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.heatMapJsonItem=function(){var n=new HeatMapProperties;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.resize=function(){var n=this.heatmapElement[0].children.length>0?ejdashboard.base.getComponent(this.heatmapElement[0],"heatmap"):null;ej.isNullOrUndefined(n)||(this.heatmapElement.width()<100||this.heatmapElement.height()<100?(n.xAxis.textStyle.size="0px",n.yAxis.textStyle.size="0px",n.xAxis.title.text="",n.yAxis.title.text="",n.legendSettings.visible=!1,n.showTooltip=!1):(n.xAxis.textStyle.size=this.heatMapJson.XAxisSettings.ShowAxisLabel?"10px":"0px",n.yAxis.textStyle.size=this.heatMapJson.YAxisSettings.ShowAxisLabel?"10px":"0px",n.xAxis.title.text=this.heatMapJson.XAxisSettings.ShowAxisTitle?this.heatMapJson.XAxisSettings.AxisTitle:"",n.yAxis.title.text=this.heatMapJson.YAxisSettings.ShowAxisTitle?this.heatMapJson.YAxisSettings.AxisTitle:"",n.legendSettings.visible=this.heatMapJson.LegendSettings.ShowLegend,n.showTooltip=!0),n.width="",n.height="",n.width="100%",n.height="100%")},n.prototype.SetDefaultDataSource=function(){var n=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(n)||(n.dataSource.data=this.jsonCellData,n.dataSource.valueMapping="value",n.dataSource.xDataMapping="rowid",n.dataSource.yDataMapping="columnid",n.dataSource.bubbleDataMapping.size="value",n.dataSource.bubbleDataMapping.color="value",n.xAxis.labels=["xLabel1","xLabel2","xLabel3","xLabel4","xLabel5"],n.yAxis.labels=["yLabel1","yLabel2","yLabel3","yLabel4","yLabel5"],this.heatMapJson.XAxisSettings.AxisTitle=this.dataGroupInfo.Values[3].Values.length>0?this.heatMapJson.XAxisSettings.AxisTitle:"",this.heatMapJson.YAxisSettings.AxisTitle=this.dataGroupInfo.Values[2].Values.length>0?this.heatMapJson.YAxisSettings.AxisTitle:"",this.setPropertyElement("X-AxisSettings","XAxisTitle",this.heatMapJson.XAxisSettings.AxisTitle),this.setPropertyElement("Y-AxisSettings","YAxisTitle",this.heatMapJson.YAxisSettings.AxisTitle),n.xAxis.title.text=this.heatMapJson.XAxisSettings.ShowAxisTitle?this.heatMapJson.XAxisSettings.AxisTitle:"",n.yAxis.title.text=this.heatMapJson.YAxisSettings.ShowAxisTitle?this.heatMapJson.YAxisSettings.AxisTitle:"",n.dataBind())},n.prototype.createdEvent=function(n){ej.isNullOrUndefined(n)||n.heatmap.element.classList.contains("e-heatmap")||n.heatmap.element.classList.add("e-heatmap")},n.prototype.UpdateDataSource=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName),i,f,e;if(!ej.isNullOrUndefined(t)){var r=[],u=[],o=this.dataGroupInfo.Values[0].Values[0].UniqueColumnName,s=this.dataGroupInfo.Values[2].Values[0].Value,h=this.dataGroupInfo.Values[3].Values[0].Value;for(t.dataSource.data=n,t.dataSource.valueMapping=o,t.dataSource.xDataMapping=this.dataGroupInfo.Values[2].Values[0].UniqueColumnName,t.dataSource.yDataMapping=this.dataGroupInfo.Values[3].Values[0].UniqueColumnName,i=0;i<n.length;i++)f=n[i][t.dataSource.xDataMapping],e=n[i][t.dataSource.yDataMapping],r.includes(f)||r.push(f),u.includes(e)||u.push(e);this.dataGroupInfo.Values[1].Values.length>0?(t.cellSettings.tileType="Bubble",this.heatMapJson.CellSettings.TileType="Bubble",t.cellSettings.bubbleType="SizeAndColor",t.dataSource.bubbleDataMapping.size=this.dataGroupInfo.Values[1].Values[0].UniqueColumnName,t.dataSource.bubbleDataMapping.color=o):(t.cellSettings.tileType="Rect",this.heatMapJson.CellSettings.TileType="Rect");this.heatMapJson.XAxisSettings.AxisTitle=this.isFromDraft||this.isXAxisTitleChanged?this.heatMapJson.XAxisSettings.AxisTitle:s;this.heatMapJson.YAxisSettings.AxisTitle=this.isFromDraft||this.isYAxisTitleChanged?this.heatMapJson.YAxisSettings.AxisTitle:h;this.setPropertyElement("X-AxisSettings","XAxisTitle",this.heatMapJson.XAxisSettings.AxisTitle);this.setPropertyElement("Y-AxisSettings","YAxisTitle",this.heatMapJson.YAxisSettings.AxisTitle);this.heatmapElement.width()<100||this.heatmapElement.height()<100?(t.xAxis.title.text="",t.yAxis.title.text=""):(t.xAxis.title.text=this.heatMapJson.XAxisSettings.ShowAxisTitle?this.heatMapJson.XAxisSettings.AxisTitle:"",t.yAxis.title.text=this.heatMapJson.YAxisSettings.ShowAxisTitle?this.heatMapJson.YAxisSettings.AxisTitle:"");t.yAxis.labels=u;t.xAxis.labels=r;t.dataBind()}},n.prototype.setPropertyElement=function(n,t,i,r){var u,f;this.propertyPanel.canUpdate=!1;u=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r);u.isVisible=i;f=$.extend(!0,{},u);f.categoryName=n;this.propertyPanel.updatePropertyValue(f,"HeatMap",i);this.propertyPanel.canUpdate=!0},n.prototype.UpdateLink=function(n){this.heatMapJson.UrlLink.EnableLink=n.EnableLink;this.heatMapJson.UrlLink.LinkType=n.LinkType;this.heatMapJson.UrlLink.GridUrlType=n.GridUrlType;this.heatMapJson.UrlLink.PassingParameters=n.PassingParameters;this.heatMapJson.UrlLink.UrlPath=n.UrlPath},n.prototype.UpdateDataLabelValue=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.cellSettings.showLabel=n);this.heatMapJson.CellSettings.ShowDataLabel=n},n.prototype.UpdateCellRadius=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.cellSettings.border.radius=n);this.heatMapJson.CellSettings.CellRadius=n},n.prototype.UpdateCellBorder=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.cellSettings.border.width=n);this.heatMapJson.CellSettings.CellBorder=n},n.prototype.UpdateTileType=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.cellSettings.tileType=n);this.heatMapJson.CellSettings.TileType=n},n.prototype.UpdateXAxisLabelVisibility=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.xAxis.textStyle.size=n?"10px":"0px");this.heatMapJson.XAxisSettings.ShowAxisLabel=n;this.propertyPanel.updateItemVisibility(this.controlType.toString(),"X-AxisSettings","XAxisLabelRotation",n);this.propertyPanel.updateItemVisibility(this.controlType.toString(),"X-AxisSettings","XAxisLabelIntersectAction",n)},n.prototype.UpdateXAxisTitleVisibility=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.xAxis.title.text=n?this.heatMapJson.XAxisSettings.AxisTitle:"");this.heatMapJson.XAxisSettings.ShowAxisTitle=n;this.propertyPanel.updateItemVisibility(this.controlType.toString(),"X-AxisSettings","XAxisTitle",n)},n.prototype.UpdateXAxisTitleValue=function(n){if(this.dataGroupInfo.Values.length>0&&(this.dataGroupInfo.Values[0].Values.length>0||this.dataGroupInfo.Values[1].Values.length>0||this.dataGroupInfo.Values[2].Values.length>0||this.dataGroupInfo.Values[3].Values.length>0)){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||this.heatMapJson.XAxisSettings.AxisTitle===n||(t.xAxis.title.text=n,this.heatMapJson.XAxisSettings.AxisTitle=n,this.isXAxisTitleChanged=!0)}else this.setPropertyElement("X-AxisSettings","XAxisTitle",""),this.heatMapJson.XAxisSettings.AxisTitle="",this.isXAxisTitleChanged=!1},n.prototype.UpdateMinColor=function(n){this.heatMapJson.ColorSettings.MinColor="#FF"+n.substring(1);var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.paletteSettings.palette[0].color=n)},n.prototype.UpdateMaxColor=function(n){this.heatMapJson.ColorSettings.MaxColor="#FF"+n.substring(1);var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.paletteSettings.palette[1].color=n)},n.prototype.UpdateXAxisLabelRotation=function(n){this.heatMapJson.XAxisSettings.LabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),"");var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.xAxis.labelRotation=this.heatMapJson.XAxisSettings.LabelRotation)},n.prototype.UpdateXAxisLabelIntersectAction=function(n){this.heatMapJson.XAxisSettings.LabelIntersectAction=n;var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.xAxis.labelIntersectAction=this.heatMapJson.XAxisSettings.LabelIntersectAction)},n.prototype.UpdateYAxisLabelIntersectAction=function(n){this.heatMapJson.YAxisSettings.LabelIntersectAction=n;var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.xAxis.labelIntersectAction=this.heatMapJson.XAxisSettings.LabelIntersectAction)},n.prototype.UpdateInversedXAxis=function(n){this.heatMapJson.XAxisSettings.InversedAxis=n;var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.xAxis.isInversed=n)},n.prototype.UpdateOpposedXAxis=function(n){this.heatMapJson.XAxisSettings.OpposedAxis=n;var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.xAxis.opposedPosition=n)},n.prototype.UpdateYAxisLabelVisibility=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.yAxis.textStyle.size=n?"10px":"0px");this.heatMapJson.YAxisSettings.ShowAxisLabel=n;this.propertyPanel.updateItemVisibility(this.controlType.toString(),"Y-AxisSettings","YAxisLabelIntersectAction",n)},n.prototype.UpdateYAxisTitleVisibility=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.yAxis.title.text=n?this.heatMapJson.YAxisSettings.AxisTitle:"");this.heatMapJson.YAxisSettings.ShowAxisTitle=n;this.propertyPanel.updateItemVisibility(this.controlType.toString(),"Y-AxisSettings","YAxisTitle",n)},n.prototype.UpdateYAxisTitleValue=function(n){if(this.dataGroupInfo.Values.length>0&&(this.dataGroupInfo.Values[0].Values.length>0||this.dataGroupInfo.Values[1].Values.length>0||this.dataGroupInfo.Values[2].Values.length>0||this.dataGroupInfo.Values[3].Values.length>0)){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||this.heatMapJson.YAxisSettings.AxisTitle===n||(t.yAxis.title.text=n,this.heatMapJson.YAxisSettings.AxisTitle=n,this.isYAxisTitleChanged=!0)}else this.setPropertyElement("Y-AxisSettings","YAxisTitle",""),this.heatMapJson.YAxisSettings.AxisTitle="",this.isYAxisTitleChanged=!1},n.prototype.UpdateYAxisLabelRotation=function(n){this.heatMapJson.YAxisSettings.LabelRotation=n.replace(new RegExp(String.fromCharCode(176),"g"),"");var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.yAxis.labelRotation=this.heatMapJson.YAxisSettings.LabelRotation)},n.prototype.UpdateInversedYAxis=function(n){this.heatMapJson.YAxisSettings.InversedAxis=n;var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.yAxis.isInversed=n)},n.prototype.UpdateOpposedYAxis=function(n){this.heatMapJson.YAxisSettings.OpposedAxis=n;var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.yAxis.opposedPosition=n)},n.prototype.UpdateShowLegend=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.legendSettings.visible=n);this.heatMapJson.LegendSettings.ShowLegend=n;this.propertyPanel.updateItemVisibility(this.controlType.toString(),"LegendSettings","LegendPosition",n)},n.prototype.UpdateLegendPosition=function(n){var t=ejdashboard.base.getComponent(this.heatmapElement[0],this.componentName);ej.isNullOrUndefined(t)||(t.legendSettings.position=n);this.heatMapJson.LegendSettings.Position=n},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(t,i){n.FieldType==="Measures"&&i.textContent.toLowerCase()!=="none"&&i.textContent.toLowerCase()!=="sort..."&&i.textContent.toLowerCase()!=="format..."&&$(i).css("display","block");n.FieldType==="Dimensions"&&n.DateTimeFormat==="None"?($(i).find("a").attr("fieldmenuname").toLowerCase()==="sort"||$(i).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters")&&$(i).css("display","block"):n.FieldType==="Dimensions"&&n.DateTimeFormat!=="None"&&i.textContent.toLowerCase()!=="format..."&&$(i).css("display","block")}),{addFormatOption:!1,ejMenu:t}},n.prototype.onFieldDragDropped=function(n){return ej.isNullOrUndefined(n.droppedItem)?!(n.categoryType===CategoryType[CategoryType.Non_Numeric]&&n.fieldType===FieldType[FieldType.Measures]):!0},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n}();window.ej.createObject("ej.DashboardDesignerUtility.HeatMapItem",InternalHeatMapReportItem,window);ej.DashboardDesignerUtility.HeatMapItem.prototype.widgetItems();var Settings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.Settings";this.MasterSlaveFilterActions=[]}return n}(),MasterSlaveFilterAction=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.MasterSlaveFilterAction";this.FilterActions=[]}return n}(),FilterAction=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.FilterAction";this.Slaves=[];this.FilterCases=[]}return n}(),FilterShell=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.FilterShell";this.SourceColumn=new ColumnAliasPair;this.TargetColumn=new ColumnAliasPair}return n}(),ColumnAliasPair=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.MasterSlaveFilter.ColumnAliasPair"}return n}(),FilterActionScheme;(function(n){n[n.All=0]="All";n[n.Selected=1]="Selected"})(FilterActionScheme||(FilterActionScheme={}));InternalMasterSlaveFilterSerializationHelper=function(){function n(){this.filterObject=null;this.nonMasterFilterWidgets=["label","image"];this.nonSlaveFilterWidgets=[];this.filterObject=ejDashboardDesigner.getInstance("FilterConfigurationInfo")}return Object.defineProperty(n,"MasterSlaveFilter",{get:function(){return(this.masterSlaveFilter===null||this.masterSlaveFilter===undefined)&&(this.masterSlaveFilter=new ej.DashboardDesignerUtility.MasterSlaveFilterConfiguration),this.masterSlaveFilter},enumerable:!0,configurable:!0}),n.prototype.getFilterConfigurationInfoInstance=function(){return this.filterObject},n.prototype.getMastetFilterWidgets=function(){var n=this;return ej.DashboardUtil.getAllWidgets().filter(function(t){return n.canUseAsMasterWidget(t)})},n.prototype.canUseAsMasterWidget=function(n){var t=n.controlType.toLowerCase(),i=!1;return t==="card"&&(i=this.canUseCardAsMaster(n.dataGroupInfo),!i)?!1:this.nonMasterFilterWidgets.indexOf(t)===-1},n.prototype.canUseCardAsMaster=function(n){return!ej.isNullOrUndefined(n)&&n.Values.length>0&&!ej.isNullOrUndefined(n.Values[2])&&!ej.isNullOrUndefined(n.Values[2].Values)&&n.Values[2].Values.length>0},n.prototype.getSlaveFilterWidgets=function(){var n=this;return ej.DashboardUtil.getAllWidgets().filter(function(t){return n.canUseAsSlaveWidget(t.controlType)})},n.prototype.canUseAsSlaveWidget=function(n){return this.nonSlaveFilterWidgets.indexOf(n.toLowerCase())===-1},n.prototype.GetWidgetCollectionsFromContainer=function(){for(var u,t,f,i=this.getMastetFilterWidgets(),e=this.getWidgetList(),r=[],n=0;n<i.length;n++)i[n].getReportItemJson().FilterSettings.ActAsMasterWidget&&r.push(i[n]);for(u=new FilterConfigurationModel,t=0;t<r.length;t++)f=this.generateMasterInformation(r[t],e),u.MastersCollection.push(f);return u},n.prototype.getWidgetList=function(){for(var i,t=this.getSlaveFilterWidgets(),r=[],n=0;n<t.length;n++)t[n].controlType.toLowerCase()!=="label"&&t[n].getReportItemJson().FilterSettings.IgnoreFilterActions||(i=new WidgetInfo,i.ID=t[n].reportName,i.Name=t[n].getReportItemJson().ContainerSettings.Title,r.push(i));return r},n.prototype.generateMasterInformation=function(n,t){var i=new Widgetcollection,r=new ProfileInfo,f=[],u=new ProfileManager;return r.FilterCondition=this.getFilterCondition(n),r.Name=n.getReportItemJson().ContainerSettings.Title+"(generated)",r.Option=!1,f=this.getSlaveWidgetList(t,n.reportName),u.ProfileInfo=r,u.WidgetInfo=f,i.MasterInfo.ID=n.reportName,i.MasterInfo.Name=n.getReportItemJson().ContainerSettings.Title,i.ProfileManager.push(u),i},n.prototype.getSlaveWidgetList=function(n,t){for(var i=$.extend(!0,[],n),r=0;r<i.length;r++)i[r].ID===t&&i.splice(r,1);return i},n.prototype.getFilterCondition=function(n){for(var t,r,s,f=[],i=n.supportedColumnsForFiltering(),e=ejDashboardDesigner.getInstance("DataSet").datasets,o=[],u=0;u<e.length;u++)n.dataGroupInfo.DatasetId!==e[u].Id&&o.push(e[u]);for(t=0;t<i.length;t++)r=new FilterCondition,r.SourceColumn.ID=i[t].DataId,r.SourceColumn.Name=i[t].DataField,r.TargetColumn.ID=i[t].DataId,r.TargetColumn.Name=i[t].DataField,r.DataSource.ID=n.dataGroupInfo.DatasetId,r.DataSource.Name=n.dataGroupInfo.DatasetName,s=this.getFieldType(i[t].DataField,i[t].Name),f.push(r),this.GetMatchedFieldFromOtherDataSets(o,i[t].DataField,s,f);return f},n.prototype.GetMatchedFieldFromOtherDataSets=function(n,t,i,r){for(var f,u,e,o=0;o<n.length;o++)for(f=n[o].Fields,u=0;u<f.length;u++)t===f[u].DataField&&i.toLowerCase()===f[u].TypeName.toLowerCase()&&(e=new FilterCondition,e.SourceColumn.ID=f[u].DataField,e.SourceColumn.Name=f[u].DataField,e.TargetColumn.ID=f[u].DataField,e.TargetColumn.Name=f[u].DataField,e.DataSource.ID=n[o].Id,e.DataSource.Name=n[o].Name,r.push(e))},n.prototype.getFieldType=function(n,t){for(var u,i,f=ejDashboardDesigner.getInstance("DataSet").datasets,r=0;r<f.length;r++)if(t===f[r].Id)for(u=f[r].Fields,i=0;i<u.length;i++)if(n===u[i].DataField)return u[i].TypeName;return null},n.prototype.ActAsMasterPropertyChangeInFilterConfigInfo=function(n,t){var u=ejDashboardDesigner.getInstance("DesignPanel"),i=u.selectedReportItems.length>0?ej.DashboardUtil.getWidgetInstance(u.selectedReportItems[0]):t,e=this.getWidgetList(),f,r;if(this.filterObject.FilterConfigurationModel!=null){if(n)f=this.generateMasterInformation(i,e),this.filterObject.FilterConfigurationModel.MastersCollection.push(f),this.showOrHideClearFilterIcon(i.controlHeader,n);else{for(r=0;r<this.filterObject.FilterConfigurationModel.MastersCollection.length;r++)i.reportName===this.filterObject.FilterConfigurationModel.MastersCollection[r].MasterInfo.ID&&this.filterObject.FilterConfigurationModel.MastersCollection.splice(r,1);n||i.controlHeader.parents(".e-dbrd-control-container").attr("controlType")!==ej.DashboardDesignerUtility.Serialization.enumToString(WidgetType,WidgetType.Filter)||i.clearFilter();this.showOrHideClearFilterIcon(i.controlHeader,n)}this.masterSlaveFilterSerializer(this.filterObject.FilterConfigurationModel.MastersCollection)}else n||i.controlHeader===null||i.controlHeader.parents(".e-dbrd-control-container").attr("controlType")!==ej.DashboardDesignerUtility.Serialization.enumToString(WidgetType,WidgetType.Filter)||i.clearFilter(),this.showOrHideClearFilterIcon(i.controlHeader,n)},n.prototype.RefreshMasterSlaveTitle=function(){var t,u,i,s,n,o,f,e,r;if(this.filterObject.FilterConfigurationModel!==null)for(t=this.GetAllWidgetInstanceFromContainer(),u=this.filterObject.FilterConfigurationModel.MastersCollection,i=0;i<u.length;i++)for(s=u[i].MasterInfo.ID,n=0;n<t.length;n++)for(s===t[n].reportName&&(this.filterObject.FilterConfigurationModel.MastersCollection[i].MasterInfo.Name=t[n].getReportItemJson().ContainerSettings.Title),o=u[i].ProfileManager,f=0;f<o.length;f++)for(e=o[f].WidgetInfo,r=0;r<e.length;r++)e[r].ID===t[n].reportName&&(e[r].Name=t[n].getReportItemJson().ContainerSettings.Title)},n.prototype.IgnoreFilterActionPropertyChange=function(n){var c=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0],r=ej.DashboardUtil.getWidgetInstance(c),s,o,t,e,u,i,f,h;if(this.filterObject.FilterConfigurationModel!=null){if(n){for(o=this.filterObject.FilterConfigurationModel.MastersCollection,t=0;t<o.length;t++)if(e=o[t].MasterInfo,r.reportName!==e.ID)for(u=o[t].ProfileManager,i=0;i<u.length;i++)for(f=0;f<u[i].WidgetInfo.length;f++)h=u[i].WidgetInfo[f].ID,r.reportName===h&&u[i].WidgetInfo.splice(f,1)}else for(t=0;t<this.filterObject.FilterConfigurationModel.MastersCollection.length;t++)if(e=this.filterObject.FilterConfigurationModel.MastersCollection[t].MasterInfo,r.reportName!==e.ID&&this.canUseAsSlaveWidget(r.controlType))for(s={ID:r.reportName,Name:r.getReportItemJson().ContainerSettings.Title},i=0;i<this.filterObject.FilterConfigurationModel.MastersCollection[t].ProfileManager.length;i++)this.filterObject.FilterConfigurationModel.MastersCollection[t].ProfileManager[i].WidgetInfo.push(s);this.masterSlaveFilterSerializer(this.filterObject.FilterConfigurationModel.MastersCollection)}},n.prototype.GetAllWidgetInstanceFromContainer=function(){for(var r,t=[],u=ejDashboardDesigner.getInstance("DesignPanel").designCanvas,i=u.find(".e-reportitem"),n=0;n<i.length;n++)r=ej.DashboardUtil.getWidgetInstance($(i[n])),t.push(r);return t},n.prototype.RemoveSelectedWidgetFromFilterObject=function(){var i=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0],t=ej.DashboardUtil.getWidgetInstance(i),n;ej.isNullOrUndefined(this.filterObject.FilterConfigurationModel)||(n=this.filterObject.FilterConfigurationModel.MastersCollection,this.removeFromMasterList(n,t),this.removeFromSlaveList(n,t),this.masterSlaveFilterSerializer(this.filterObject.FilterConfigurationModel.MastersCollection))},n.prototype.removeFromMasterList=function(n,t){for(var r,i=0;i<n.length;i++)if(r=n[i].MasterInfo,t.reportName===r.ID){this.filterObject.FilterConfigurationModel.MastersCollection.splice(i,1);break}},n.prototype.removeFromSlaveList=function(n,t){for(var e,u,i,f,o,r=0;r<n.length;r++)if(e=n[r].MasterInfo,t.reportName!==e.ID)for(u=n[r].ProfileManager,i=0;i<u.length;i++)for(f=0;f<u[i].WidgetInfo.length;f++)if(o=u[i].WidgetInfo[f].ID,t.reportName===o){u[i].WidgetInfo.splice(f,1);break}},n.prototype.RefreshFilterSettings=function(){this.filterObject.FilterConfigurationModel==null&&this.filterObject.setFilterConfiguration(this.GetWidgetCollectionsFromContainer());this.masterSlaveFilterSerializer(this.filterObject.FilterConfigurationModel.MastersCollection)},n.prototype.MasterSlaveFilterDeSerializer=function(n){var s,w,e,l,a,o,f,h,v,r,i,u,y,c,p,t;if(!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(n.MasterFilterInfo)){for(s=n.MasterFilterInfo.MasterSlaveFilterActions,w=new FilterConfigurationModel,e=0;e<s.length;e++){for(l=new Widgetcollection,a=new MasterInfo,t=0;t<n.Widgets.length;t++)n.Widgets[t].UniqueName===s[e].MasterControlName&&(a.Name=n.Widgets[t].ContainerSettings.Title);for(a.ID=s[e].MasterControlName,o=s[e].FilterActions,f=0;f<o.length;f++){for(h=new ProfileInfo,v=new ProfileManager,h.Option=o[f].IsFilterCasesCustomized,h.Name=o[f].FilterActionName,r=o[f].FilterCases,i=0;i<r.length;i++)u=new FilterCondition,u.SourceColumn.Name=r[i].SourceColumn.Caption,u.SourceColumn.ID=r[i].SourceColumn.Caption,u.TargetColumn.ID=r[i].TargetColumn.Caption,u.TargetColumn.Name=r[i].TargetColumn.Caption,u.DataSource.ID=r[i].TargetDataSource,u.DataSource.Name=r[i].TargetDataSourceName,h.FilterCondition.push(u);for(y=o[f].Slaves,c=0;c<y.length;c++){for(p=new WidgetInfo,t=0;t<n.Widgets.length;t++)n.Widgets[t].UniqueName===y[c]&&(p.Name=n.Widgets[t].ContainerSettings.Title);p.ID=y[c];v.WidgetInfo.push(p)}v.ProfileInfo=h;l.ProfileManager.push(v)}l.MasterInfo=a;w.MastersCollection.push(l)}return w}},n.prototype.masterSlaveFilterSerializer=function(n,t){var o,i,s,r,f,h,u,e,c;if(t===void 0&&(t=!0),o=new Settings,!ej.isNullOrUndefined(n)){for(i=0;i<n.length;i++){for(s=new MasterSlaveFilterAction,s.MasterControlName=n[i].MasterInfo.ID,r=0;r<n[i].ProfileManager.length;r++){for(f=new FilterAction,f.FilterActionName=n[i].ProfileManager[r].ProfileInfo.Name,f.IsFilterCasesCustomized=n[i].ProfileManager[r].ProfileInfo.Option,h=0;h<n[i].ProfileManager[r].WidgetInfo.length;h++)f.Slaves.push(n[i].ProfileManager[r].WidgetInfo[h].ID);for(u=0;u<n[i].ProfileManager[r].ProfileInfo.FilterCondition.length;u++)e=new FilterShell,e.SourceColumn.Caption=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].SourceColumn.Name,e.TargetColumn.Caption=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].TargetColumn.Name,e.TargetDataSource=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].DataSource.ID,e.TargetDataSourceName=n[i].ProfileManager[r].ProfileInfo.FilterCondition[u].DataSource.Name,f.FilterCases.push(e);s.FilterActions.push(f)}o.MasterSlaveFilterActions.push(s)}o!==null&&t&&(c=ejDashboardDesigner.getInstance("DashboardDesigner"),ej.DashboardUtil.getInstance().doAjaxPost("POST",c.model.serviceUrl+"/NotifyPropertyChange",{data:JSON.stringify({FilterConfigurationJson:o})},{fnction:$.proxy(function(n){n.Status||console.info(n.Message)},this)}))}return o},n.prototype.updateInitialFiltersForFilterControls=function(n,t,i,r){var u=new SelectedFilterValue,e=new InitialDimensionFilter,o=new InitialMeasureFilter,f=new InitialDateFilter;u.UniqueColumnName=n;u.ReportName=t;u.IsStdDateTime=r.IsStdDateTime;switch(i){case"e-reportdesigner-dataset-string":e.DimesnionFilterCondition=r.Action;e.Text=r.FilterInfo;break;case"e-reportdesigner-dataset-number":o.MeasureFilterCondition=r.Action;o.Values=r.FilterInfo;break;case"e-reportdesigner-dataset-datetime":case"e-reportdesigner-dataset-time":f.DateFilterCondition=r.Action;f.DisplayDateFilterList=r.FilterInfo.DisplayFilterList;f.DateFilterList=r.FilterInfo.DateFilterList;f.DateFilterType=ej.isNullOrUndefined(r.FilterInfo.DateFilterType)?f.DateFilterType:r.FilterInfo.DateFilterType;f.DateFormat=r.FilterInfo.DateFormat}return u.InitialDimensionFilter=e,u.InitialMeasureFilter=o,u.InitialDateFilter=f,u},n.prototype.getDateFilterList=function(n,t){for(var u,f,e=t?ejDashboardDesigner.StdDateTimeFormat:ejDashboardDesigner.StdDateFormat,r=[],i=0;i<n.length;i++)u=ej.parseDate(n[i],e),f=ej.format(u,ejDashboardDesigner.ServerDateTimeFormat),r.push(f);return r},n.prototype.enableClearFilter=function(n){n.find(".e-remove-control-filter").removeClass("e-remove-control-filter-disable").addClass("e-remove-control-filter-enable")},n.prototype.disableClearFilter=function(n){n.find(".e-remove-control-filter").removeClass("e-remove-control-filter-enable").addClass("e-remove-control-filter-disable")},n.prototype.showOrHideClearFilterIcon=function(n,t){var i,r,u;n!==null&&(i=10,t?(n.find(".e-dbrd-controlIcon-container").css("display","block"),n.find(".e-remove-control-filter").css("display","block"),r=n.find(".e-dbrd-control-title-wrapper").css("justify-content"),u=ej.DashboardDesignerUtility.Serialization.enumToString(TextAlignment,TextAlignment.Center),r!==u.toLowerCase()&&(i=n.find(".e-dbrd-controlIcon-container").outerWidth(!0)+10)):(n.find(".e-remove-control-filter").css("display","none"),n.find(".e-dbrd-controlIcon-container").css("display","none")),n.find(".e-dbrd-control-title-wrapper").css({width:"calc(100% - "+i+"px)"}))},n.prototype.isValidDataGroupInfo=function(n,t){return n.FilterSettings.ActAsMasterWidget&&!ej.isNullOrUndefined(t.Values)&&!ej.isNullOrUndefined(t.Values[0])&&!ej.isNullOrUndefined(t.Values[0].Values)&&t.Values[0].Values.length>0},n.prototype.isColumnFilterModified=function(n,t){return!ej.isNullOrUndefined(n)&&(n.DataId!==t.DataId||ej.isNullOrUndefined(n.FilterInfo)&&!ej.isNullOrUndefined(t.FilterInfo)||n.SummaryType!==t.SummaryType||n.DateTimeFormat!==t.DateTimeFormat)?!0:!1},n}();ej.createObject("ej.DashboardDesignerUtility.MasterSlaveFilterConfiguration",InternalMasterSlaveFilterSerializationHelper,window);InternalMeasureFilter=function(){function n(){this.filterDialog=null;this.columnNameTag=null;this.measureFilterInfo=null;this.rightTextBoxDiv=null;this.measureItemTable=null;this.textDiv=null;this.targetMethod=null;this.targetInstance=null;this.applyButton=null;this.resetButton=null;this.columnName=null;this.uniqueColumnName=null;this.isKpiFilter=!1;this.measureItemDropObj=null;this.id=ejDashboardDesigner.getInstance("DashboardDesigner")._id;this.renderMeasureFilterDialog()}return Object.defineProperty(n,"MeasureFilter",{get:function(){return(this.measureFilter===null||this.measureFilter===undefined)&&(this.measureFilter=new ej.DashboardDesignerUtility.MeasureFilter),this.measureFilter},enumerable:!0,configurable:!0}),n.prototype.renderMeasureFilterDialog=function(){var n=ejDashboardDesigner.getInstance("DashboardDesigner").locale.measureFilterWindow,i=this.filterDialog=ej.buildTag("div.e-userselect","",{},{id:this.id+"_measure_filter"}),o=ej.buildTag("div","",{}),s=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"5px 0px 10px"},{}),h=$("<tr><\/tr>"),c=ej.buildTag("td","",{width:"50px"},{}),rt=ej.buildTag("editLabel.e-designer-fontfamily",n.columnLabelText,{"font-size":"12px","font-weight":"600"},{type:"label"}),l=ej.buildTag("td","",{},{}),ut=this.columnNameTag=ej.buildTag("span.e-designer-fontfamily","",{"font-size":"12px"},{id:this.id+"_measure_filter_columnName"}),r,a,f,t,it;l.append(ut);c.append(rt);h.append(c).append(l);s.append(h);r=ej.buildTag("div","",{width:"75px","padding-left":"4px"});a=ej.buildTag("editLabel.e-designer-fontfamily",n.rangeLabelText,{"font-size":"12px","font-weight":"600"},{type:"label"});r.append(a);var v=this.measureItemTable=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"5px 0px 15px"},{}),y=$("<tr><\/tr>"),p=ej.buildTag("td","",{},{}),u=ej.buildTag("input","",{},{type:"text",id:this.id+"_measure_filter_rangedrop"});p.append(u);f=ej.buildTag("td","",{"padding-left":"8px"},{});t=ej.buildTag("input","",{},{type:"text",id:this.id+"_measure_filter_text1"});f.append(t);var w=ej.buildTag("td","",{width:"30px"},{}),b=this.textDiv=ej.buildTag("div","",{padding:"0px 5px",display:"none"}),ft=ej.buildTag("editLabel.e-designer-fontfamily",n.andLabelText,{"font-size":"12px"},{type:"label"}),k=ej.buildTag("td","",{width:"90px",height:"28px"},{}),d=this.rightTextBoxDiv=ej.buildTag("div","",{display:"none"},{id:this.id+"_measure_filter_rightbox_div"}),e=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_measure_filter_text2"});k.append(d);d.append(e);b.append(ft);w.append(b);var g=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_measure_filter_cancel"}),nt=this.applyButton=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_measure_filter_ok"}),tt=this.resetButton=ej.buildTag("button.disabled e-dbrd-hand-cursor","",{"margin-left":"2px"},{id:this.id+"_measure_filter_reset"});y.append(p,f,w,k);v.append(y);o.append(s,r,v);i.append(o);$(document.body).append(i);i.ejDialog({title:n.measureFilterTitle,width:"auto",height:"auto",minWidth:240,minHeight:150,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});it=$("#"+this.id+"_measure_filter_foot");it.append(tt).append(g).append(nt);tt.ejButton({text:n.resetBtnText,showRoundedCorner:!0,cssClass:"e-dashboarddesigner-reset-btn",size:"mini",click:$.proxy(this.resetMeasureFilterValues,this)});nt.ejButton({text:n.applyBtnText,showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.applyFilterValues,this)});g.ejButton({text:n.cancelBtnText,showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.closeMeasureFilter,this)});u.ejDropDownList({width:"160px",height:"28px",dataSource:this.measureItemList(),fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,popupWidth:"170px",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changeMeasureItem,this)});t.ejNumericTextbox({showSpinButton:!1,decimalPlaces:2,value:0,width:"90px",height:"28px",showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-content-label",create:$.proxy(this.onTextBoxCreate,this,t)});e.ejNumericTextbox({showSpinButton:!1,decimalPlaces:2,value:0,width:"90px",height:"28px",showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-content-label",create:$.proxy(this.onTextBoxCreate,this,e)});this.measureItemDropObj=u.data("ejDropDownList");ej.DashboardUtil.buttonEnable(this.applyButton,!1)},n.prototype.onTextBoxCreate=function(n){var t=this;n.keyup($.proxy(function(n){t.changeTextBoxValue($(n.target),$(n.target).val())},this))},n.prototype.changeTextBoxValue=function(n,t){this.applyButton.hasClass("e-disable")&&ej.DashboardUtil.buttonEnable(this.applyButton,!0);(ej.isNullOrUndefined(t)||this.filterDialog.find("#"+this.id+"_measure_filter_text1").val()===""||this.filterDialog.find("#"+this.id+"_measure_filter_text2").val()==="")&&ej.DashboardUtil.buttonEnable(this.applyButton,!1);(ej.isNullOrUndefined(t)||parseFloat(t)===0)&&n.data("ejNumericTextbox").setModel({value:0});ej.DashboardUtil.buttonEnable(this.resetButton,!0)},n.prototype.changeMeasureItem=function(n){var t=n.value;this.applyButton.hasClass("e-disable")&&ej.DashboardUtil.buttonEnable(this.applyButton,!0);(this.filterDialog.find("#"+this.id+"_measure_filter_text1").val()===""||this.filterDialog.find("#"+this.id+"_measure_filter_text2").val()==="")&&ej.DashboardUtil.buttonEnable(this.applyButton,!1);t==="Between"||t==="Not Between"?this.enableTextElement(!0):this.enableTextElement(!1);ej.DashboardUtil.buttonEnable(this.resetButton,!0)},n.prototype.enableTextElement=function(n){n?(this.textDiv.css("display","block"),this.rightTextBoxDiv.css("display","block")):(this.textDiv.css("display","none"),this.rightTextBoxDiv.css("display","none"))},n.prototype.disableFilterButton=function(n,t){t?n.css("opacity","0.5").attr("disabled","disabled"):n.css("opacity","1").removeAttr("disabled")},n.prototype.populateFilterInfo=function(n){var i=n.Conditions,r=n.Values,f=r.length,e=i==="Between"||i==="Not Between",t,u;for(this.enableTextElement(e),t=0;t<f;t++)u=this.measureItemTable.find("#"+this.id+"_measure_filter_text"+(t+1)),u.data("ejNumericTextbox").setModel({value:r[t]})},n.prototype.updateFilterInfo=function(n){this.columnNameTag.text(this.columnName);var t=n.Conditions;this.measureItemDropObj.selectItemByValue(t);this.populateFilterInfo(n);ej.DashboardUtil.buttonEnable(this.resetButton,!0);ej.DashboardUtil.buttonEnable(this.applyButton,!1)},n.prototype.resetMeasureFilterValues=function(){this.measureItemDropObj.selectItemsByIndices(0);this.enableTextElement(!1);var n=this.measureItemTable.find("#"+this.id+"_measure_filter_text1"),t=this.measureItemTable.find("#"+this.id+"_measure_filter_text2");n.data("ejNumericTextbox").setModel({value:0});t.data("ejNumericTextbox").setModel({value:0});ej.DashboardUtil.buttonEnable(this.resetButton,!1);this.isKpiFilter?ej.DashboardUtil.buttonEnable(this.applyButton,!0):ej.DashboardUtil.buttonEnable(this.applyButton,!1)},n.prototype.getFilterValue=function(){var r=[],i=this.measureItemDropObj.getSelectedValue(),n=this.createMeasureFilter(),u,t;for(n.Conditions=this.resetButton.hasClass("e-disable")?"":i,u=i==="Between"||i==="Not Between"?2:1,t=0;t<u;t++){var e=this.measureItemTable.find("#"+this.id+"_measure_filter_text"+(t+1)),f=e.data("ejNumericTextbox").getValue(),o=ej.isNullOrUndefined(f)?0:f;r.push(o)}return n.Values=this.resetButton.hasClass("e-disable")?[]:r,n.UniqueColumnName=this.uniqueColumnName,n.ColumnName=this.columnName,n},n.prototype.applyFilterValues=function(){var n=this.getFilterValue();ej.isNullOrUndefined(this.targetInstance)||(ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[n]),this.closeMeasureFilter())},n.prototype.openMeasureFilter=function(n,t,i,r,u,f){this.resetMeasureFilter();this.isKpiFilter=f;this.targetInstance=n;this.targetMethod=t;this.measureFilterInfo=u;this.columnName=r;this.uniqueColumnName=i;this.filterDialog.data("ejDialog").open();!ej.isNullOrUndefined(u)&&u.Values.length>0?this.updateFilterInfo(u):(ej.isNullOrUndefined(this.columnName)||this.columnNameTag.text(this.columnName),this.resetMeasureFilterValues())},n.prototype.resetMeasureFilter=function(){this.columnNameTag.text("");this.measureFilterInfo=null;this.columnName=null;this.uniqueColumnName=null},n.prototype.closeMeasureFilter=function(){this.filterDialog.data("ejDialog").close()},n.prototype.createMeasureFilter=function(){return{Conditions:"Equals",Values:[]}},n.prototype.measureItemList=function(){return[{text:"Equals",value:"Equals"},{text:"Does Not Equal",value:"Does Not Equal"},{text:"Less Than",value:"Less Than"},{text:"Greater Than",value:"Greater Than"},{text:"Less Than or Equal To",value:"Less Than or Equal To"},{text:"Greater Than Or Equal To",value:"Greater Than Or Equal To"},{text:"Between",value:"Between"},{text:"Not Between",value:"Not Between"}]},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_measure_filter"));$("#"+this.id+"_measure_filter").length>0&&$("#"+this.id+"_measure_filter").remove()},n}();window.ej.createObject("ej.DashboardDesignerUtility.MeasureFilter",InternalMeasureFilter,window);InternalMultiSelectionComboBox=function(){function n(){this.waterMarkText="Search";this.listFieldName="text";this.ajaxRequestCollection=[];this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id}return Object.defineProperty(n,"MultiSelectionComboBox",{get:function(){return(this.multiSelectionComboBox===null||this.multiSelectionComboBox===undefined)&&(this.multiSelectionComboBox=new ej.DashboardDesignerUtility.MultiSelectionComboBox),this.multiSelectionComboBox},enumerable:!0,configurable:!0}),n.prototype.resetMultiSelection=function(n){$("#"+n+"_popup_container").remove();$("#"+n+"_multi_select_dropDown_text").empty()},n.prototype.renderMultiSelectionComboBox=function(n,t,i,r){var f,e,u;this.resetMultiSelection(t);f=ej.buildTag("div.e-multiselect-dropdown-item","",{border:"0.5px solid #cecece","border-radius":"2px",width:n.width(),height:"24px",cursor:"pointer","background-color":"white",display:"block"},{id:t+"_multi_select_dropDown"});e="All";ej.isNullOrUndefined(r)||ej.isNullOrUndefined(r.filterInfo)||(u=r.filterInfo.AllowFilterInfo,e=ej.isNullOrUndefined(u)||ej.isNullOrUndefined(u.FilterValues)||u.IsCheckAll?"All":u.FilterValues.toString());var s=ej.buildTag("div",e,{"border-style":"none",width:n.width()-38,height:"100%","padding-left":"5px","line-height":"24px",float:"left","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden"},{id:t+"_multi_select_dropDown_text"}),o=ej.buildTag("div","",{display:"inline-block",width:"33px",height:"100%"},{}),h=ej.buildTag("span.e-designer-ejwidgets-updown e-icon e-arrow-sans-down","",{color:"#666666",padding:"5px 10px"});o.append(h);f.append(s).append(o);f.bind("click",$.proxy(this.showPopupContainer,this,n,t,i,r));n.append(f);this.renderPopupContainer(t)},n.prototype.renderPopupContainer=function(n){var u=ej.buildTag("div.e-multiselect-popup-container e-dashboarddesigner","",{"min-width":"230px",height:"270px",position:"absolute",border:"1px solid #dddddd","background-color":"white","border-radius":"3px",display:"none","z-index":"10100"},{id:n+"_popup_container"}),f=ej.buildTag("table","",{width:"100%",padding:"5px 10px"},{}),e=ej.buildTag("tr","",{},{}),o=ej.buildTag("td","",{width:"50%"},{}),s=ej.buildTag("td","",{width:"50%"},{}),h=ej.buildTag("input","",{},{type:"checkbox",id:n+"_popup_container_Check_Box"}),d=ej.buildTag("label",this.dashboardDesigner.locale.dialogText.checkAll,{"margin-left":"10px","font-size":"14px"},{"for":n+"_popup_container_Check_Box"}),t,i,r;this.renderSearchPanel(s,n);o.append(h).append(d);e.append(o).append(s);f.append(e);t=ej.buildTag("div.e-multiselect-waiting-popup","",{height:"150px","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"1010",padding:"5px 10px"},{id:n+"_popup_container_list_Box_div"});i=ej.buildTag("ul","",{},{id:n+"_popup_container_list_Box"});t.append(i);var c=ej.buildTag("table","",{width:"100%",padding:"5px 10px","border-bottom":"1px solid #dddddd"},{}),l=ej.buildTag("tr","",{},{}),a=ej.buildTag("td","",{width:"50%"},{}),v=ej.buildTag("td","",{width:"50%"},{}),y=ej.buildTag("input","",{"margin-left":"2px"},{type:"radio",name:"filtercondition",id:n+"_popup_container_list_Box_radio1"}),g=ej.buildTag("label","Include",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":n+"_popup_container_list_Box_radio1",type:"label"}),p=ej.buildTag("input","",{"margin-left":"2px"},{type:"radio",name:"filtercondition",id:n+"_popup_container_list_Box_radio2"}),nt=ej.buildTag("label","Exclude",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":n+"_popup_container_list_Box_radio2",type:"label"});c.append(l);l.append(a).append(v);a.append(y).append(g);v.append(p).append(nt);var w=ej.buildTag("div.e-footerbar.e-dialog.e-js","",{width:"100%",height:"45px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",padding:"10px 5px"},{}),b=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:n+"_popup_container_ok_btn"}),k=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:n+"_popup_container_cancel_btn"});w.append(k).append(b);u.append(f).append(t).append(c).append(w);$(document.body).append(u);r=this.dashboardDesigner.locale.dialogOptions;b.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-okbtn",text:r.applyButtonText,click:$.proxy(this.updatePopupContainerInformation,this,n)});k.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-cancelbtn",text:r.cancelButtonText,click:$.proxy(this.closePopupContainer,this,n)});h.ejCheckBox({width:"100%",change:$.proxy(this.updateCheckItemCheckChange,this,n)});i.ejListBox({dataSource:[{text:""}],fields:{value:this.listFieldName},showCheckbox:!0,width:"100%",height:"100%",cssClass:"e-dbrd-control"});y.ejRadioButton({checked:!0,size:"small",cssClass:"e-designer-radio",change:$.proxy(this.updateListCondition,this,n)});p.ejRadioButton({size:"small",cssClass:"e-designer-radio",change:$.proxy(this.updateListCondition,this,n)});t.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"})},n.prototype.renderSearchPanel=function(n,t){var i=ej.buildTag("div","",{width:"107px",height:"16px",float:"right","margin-top":"3px"},{id:t+"_popup_container_searchPanel"}),r=ej.buildTag("input.e-reportdesigner-designer-search-dataassign","",{"border-radius":"5px","padding-left":"5px",color:"lightgrey","font-size":"11px",float:"left",width:"100px",height:"15px",border:"1px solid lightGray","font-style":"italic"},{id:t+"_popup_container_searchBox"}),u;r.val(this.waterMarkText);u=ej.buildTag("div","",{},{id:t+"_popup_container_searchIcon","class":"e-icon e-search e-designer-popup-container-search-icon"});i.append(r);i.append(u);n.append(i);r.bind("focus",$.proxy(this.onSearchFocus,this,t))},n.prototype.showPopupContainer=function(n,t,i,r){var c=this.getMultiSelectionComboBox(t),l=c.attr("data-fieldValue"),e=c.attr("data-fieldText"),o=this.dateFormats(c.attr("data-dateFormat")),f=this.getPopupContainer(t),a=f.height(),y=this.getPopupListBox(t),p=y.data("ejListBox"),w=f.css("display")==="block",s=n.offset(),v=s.left+parseFloat(n.css("padding-left")),u,h;n.width()<245&&(v=s.left+parseFloat(n.css("padding-left"))-(246-n.width()));var b=window.innerHeight-(s.top+n.height()),k=b>a,d=k?s.top+n.height()+2:s.top-a-4;f.css({left:v,top:d,display:w?"none":"block","z-index":ej.getMaxZindex()});this.updateDropDownIcon(f,t);u=this.getPopupListBoxDiv(t);f.css("display")==="block"?(ej.isNullOrUndefined(r)?ej.isNullOrUndefined(o)?ej.isNullOrUndefined(u.attr("data-fieldText"))||u.attr("data-fieldText")!==e?(h=[{Id:l,Name:e,SummaryType:"None",FieldType:"Dimensions"}],this.ajaxRequestCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getData,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getData,fieldInfo:h,dataset:i,filterType:"InitialFilter"})},{fnction:$.proxy(this.setFieldInformation,this,t,e,o),indicator:[$.proxy(this.showLoadingIndicator,this,t),$.proxy(this.hideLoadingIndicator,this,t)]}))):this.setPopupValues(t):ej.isNullOrUndefined(u.attr("data-fieldText"))||u.attr("data-fieldText")!==e||ej.isNullOrUndefined(u.attr("data-dateField"))||u.attr("data-dateField")!==o?(h=[{Id:l,Name:e,SummaryType:"None",FieldType:"Dimensions",DateTimeFormat:o}],this.ajaxRequestCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getData,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getData,fieldInfo:h,dataset:i,filterType:"InitialFilter"})},{fnction:$.proxy(this.setFieldInformation,this,t,e,o),indicator:[$.proxy(this.showLoadingIndicator,this,t),$.proxy(this.hideLoadingIndicator,this,t)]}))):this.setPopupValues(t):ej.isNullOrUndefined(u.attr("data-isLoaded"))?this.getFieldValues(t,r):this.setPopupValues(t),$(".e-multiselect-popup-container-visible").length>0&&this.updatePopupContainerVisibility($(".e-multiselect-popup-container-visible")),f.addClass("e-multiselect-popup-container-visible")):(f.removeClass("e-multiselect-popup-container-visible"),this.hideLoadingIndicator(t));p._refreshScroller()},n.prototype.getFieldValues=function(n,t){var i=[];i.push({Id:t.fieldInfo.DataId,Name:t.fieldInfo.Field,SummaryType:t.fieldInfo.SummaryType,FieldType:t.fieldInfo.FieldType,MeasureFormatting:t.fieldInfo.MeasureFormatting,DateTimeFormat:t.fieldInfo.DateTimeFormat,FilterInfo:null,UniqueColumnName:t.fieldInfo.UniqueColumnName});ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getData,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getData,fieldInfo:i,dataset:t.fieldInfo.Name})},{fnction:$.proxy(this.setFilter,this,t,n),indicator:[$.proxy(this.showLoadingIndicator,this,n),$.proxy(this.hideLoadingIndicator,this,n)]})},n.prototype.setFilter=function(n,t,i){var r=JSON.parse(i.data),f=this.getPopupListBox(t).data("ejListBox"),u;this.listFieldName=n.fieldInfo.UniqueColumnName;r=this.getDataSource(r);f.setModel({dataSource:r,fields:{value:this.listFieldName}});this.getPopupListBoxDiv(t).attr("data-isLoaded","loaded");u=!ej.isNullOrUndefined(n.filterInfo)&&!ej.isNullOrUndefined(n.filterInfo.AllowFilterInfo)?n.filterInfo.AllowFilterInfo:null;this.populateMultiSelectionItem(t,u);this.setPopupValues(t)},n.prototype.getDataSource=function(n){for(var i=function(t){n[t][Object.keys(n[t])]=Object.keys(n[t].valueOf()).map(function(i){return n[t].valueOf()[i].toString()})},t=0;t<n.length;t++)i(t);return n},n.prototype.setFieldInformation=function(n,t,i,r){var u=JSON.parse(r.data),e,o,f;if(!ej.isNullOrUndefined(u)&&u.length>0){e=this.getPopupListBox(n).data("ejListBox");for(o in u[0])this.listFieldName=o;u=this.getDataSource(u);e.setModel({dataSource:u,fields:{value:this.listFieldName}});f=this.getPopupListBoxDiv(n);ej.isNullOrUndefined(i)||f.attr("data-dateField",i);f.attr("data-fieldText",t);this.setPopupValues(n)}},n.prototype.setPopupValues=function(n){var t=this.getPopupCheckBox(n),r=this.getPopupListBox(n),i=r.data("ejListBox"),u=this.getPopupRadioButton1(n),f;ej.isNullOrUndefined(t.attr("IsSelectAll"))||t.attr("IsSelectAll")==="true"?(t.data("ejCheckBox").setModel({enableTriState:!1}),t.data("ejCheckBox").setModel({checkState:"checked",checked:!0}),i.checkAll(),i.setModel({checkChange:$.proxy(this.updateListItemCheckChange,this,n)})):!ej.isNullOrUndefined(r.data("Filters"))&&i.listitems.length>r.data("Filters").length&&(t.data("ejCheckBox").setModel({enableTriState:!0,checkState:"indeterminate"}),i.checkItemsByIndices(this.getCheckedItemIndices(i.listitems,r.data("Filters"))));f=ej.isNullOrUndefined(u.attr("Condition"))||u.attr("Condition")==="Include";f?u.data("ejRadioButton").setModel({checked:f}):this.getPopupRadioButton2(n).data("ejRadioButton").setModel({checked:!0})},n.prototype.getCheckedItemIndices=function(n,t){for(var r=[],i=0;i<n.length;i++)t.indexOf(n[i][this.listFieldName].toString())!==-1&&r.push(i);return r},n.prototype.getPopupContainerInformation=function(n){var t=this.getPopupCheckBox(n),i=this.getPopupListBox(n),r=this.getPopupRadioButton1(n);return{IsCheckAll:ej.isNullOrUndefined(t.attr("IsSelectAll"))||t.attr("IsSelectAll")==="true",IsInclude:ej.isNullOrUndefined(r.attr("Condition"))||r.attr("Condition")==="Include",FilterValues:ej.isNullOrUndefined(i.data("Filters"))?null:i.data("Filters")}},n.prototype.showLoadingIndicator=function(n){this.getPopupListBoxDiv(n).ejWaitingPopup("show");this.getPopupCheckBox(n).data("ejCheckBox").disable();this.getPopupRadioButton1(n).data("ejRadioButton").disable();this.getPopupRadioButton2(n).data("ejRadioButton").disable();this.setItemEnable(n,!1);this.getPopupSearchPanel(n).children().prop("disabled",!0)},n.prototype.hideLoadingIndicator=function(n){this.getPopupListBoxDiv(n).ejWaitingPopup("hide");this.getPopupCheckBox(n).data("ejCheckBox").enable();this.getPopupRadioButton1(n).data("ejRadioButton").enable();this.getPopupRadioButton2(n).data("ejRadioButton").enable();this.setItemEnable(n,!0);this.getPopupSearchPanel(n).children().prop("disabled",!1)},n.prototype.populateMultiSelectionItem=function(n,t){if(ej.isNullOrUndefined(t))this.getComboBoxTextField(n).text("All"),this.getPopupCheckBox(n).attr("IsSelectAll","true"),this.getPopupRadioButton1(n).attr("Condition","Include"),this.getPopupListBox(n).data("Filters",null);else{var i=t.IsCheckAll||ej.isNullOrUndefined(t.FilterValues)?"All":t.FilterValues.toString();this.getComboBoxTextField(n).text(i);this.getPopupCheckBox(n).attr("IsSelectAll",t.IsCheckAll);this.getPopupRadioButton1(n).attr("Condition",t.IsInclude?"Include":"Exclude");this.getPopupListBox(n).data("Filters",t.FilterValues)}},n.prototype.onSearchFocus=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n);t.addClass("e-focus");t.val()===this.waterMarkText&&t.val("");t.css("color","grey");t.bind("keyup",$.proxy(this.onSearchText,this,n));t.bind("blur",$.proxy(this.onSearchBlur,this,n));this.getSearchIcon(i,n).bind("click",$.proxy(this.onSearchCloseClick,this,n))},n.prototype.onSearchText=function(n,t){var r=this.getPopupSearchPanel(n),f;if(t.keyCode!==13){var e=this.getSearchTextBox(r,n),u=e.val(),i=this.getPopupListBox(n);u.length>0?(this.getSearchIcon(r,n).addClass("e-close_01").removeClass("e-search"),f=this.filterItems(i.data("ejListBox").model.dataSource,u,n),i.ejListBox("hideAllItems"),i.ejListBox("showItemsByIndices",f)):i.ejListBox("showAllItems")}},n.prototype.onSearchBlur=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n),r=t.val();t.removeClass("e-focus");r.length===0&&this.clearSearchText(i,n,t)},n.prototype.clearSearchText=function(n,t,i){this.getSearchIcon(n,t).addClass("e-search").removeClass("e-close_01");i.val(this.waterMarkText);this.getPopupListBox(t).ejListBox("showAllItems");i.css("color","lightgrey")},n.prototype.onSearchCloseClick=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n),r=this.getSearchIcon(i,n);t.removeClass("e-focus");t.val(this.waterMarkText);t.css("color","lightgrey");this.getPopupListBox(n).ejListBox("showAllItems");r.addClass("e-search").removeClass("e-close_01");t.unbind("keyup",$.proxy(this.onSearchText,this));r.unbind("click",$.proxy(this.onSearchCloseClick,this));t.unbind("blur",$.proxy(this.onSearchBlur,this))},n.prototype.filterItems=function(n,t){for(var r=[],i=0;i<n.length;i++)(t===""||n[i][this.listFieldName][0].toLowerCase().startsWith(t.toLowerCase()))&&r.push(i);return r},n.prototype.updateCheckItemCheckChange=function(n,t){if(t.isInteraction){var r=this.getPopupCheckBox(n).data("ejCheckBox"),i=this.getPopupListBox(n).data("ejListBox");i.setModel({checkChange:null});r.setModel({enableTriState:!1});t.isChecked?(i.checkAll(),this.setItemEnable(n,this.getPopupRadioButton1(n).data("ejRadioButton").model.checked)):(i.uncheckAll(),this.setItemEnable(n,!1));i.setModel({checkChange:$.proxy(this.updateListItemCheckChange,this,n)})}},n.prototype.updateListItemCheckChange=function(n,t){if(t.isInteraction){var i=this.getPopupCheckBox(n).data("ejCheckBox"),r=this.getPopupListBox(n).data("ejListBox");r.getCheckedItems().length<1?(this.setItemEnable(n,!1),i.setModel({checkState:"check",checked:!1})):r.getCheckedItems().length===r.listitems.length?(this.setItemEnable(n,this.getPopupRadioButton1(n).data("ejRadioButton").model.checked),i.setModel({enableTriState:!1}),i.setModel({checkState:"check",checked:!0})):(this.setItemEnable(n,!0),i.setModel({enableTriState:!0,checkState:"indeterminate"}))}},n.prototype.updateListCondition=function(n){var t=this.getPopupListBox(n).data("ejListBox"),i=t.getCheckedItems();i.length<1||i.length===t.listitems.length&&this.getPopupRadioButton2(n).data("ejRadioButton").model.checked?this.setItemEnable(n,!1):this.setItemEnable(n,!0)},n.prototype.setItemEnable=function(n,t){var i=this.getPopupOkButton(n);ej.DashboardUtil.buttonEnable(i,t)},n.prototype.updatePopupContainerInformation=function(n){var u,o;this.clearSearchList(n);var t=this.getPopupContainer(n),f=this.getComboBoxTextField(n),i=this.getPopupCheckBox(n),r=this.getPopupListBox(n),e=r.data("ejListBox");t.css("display","none");this.updateDropDownIcon(t,n);i.data("ejCheckBox").model.checked||e.getCheckedItems().length===e.listitems.length?(f.text("All"),i.attr("IsSelectAll","true"),r.data("Filters",null)):(u=this.getListBoxCheckedItems(n),f.text(u.toString()),i.attr("IsSelectAll","false"),r.data("Filters",u),$("#"+n).find(".e-error-tip").css("display","none"));o=this.getPopupRadioButton1(n).data("ejRadioButton").model.checked?"Include":"Exclude";this.getPopupRadioButton1(n).attr("Condition",o);t.removeClass("e-multiselect-popup-container-visible")},n.prototype.clearSearchList=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n),r=t.val();r.length!==0&&r!==this.waterMarkText&&(t.removeClass("e-focus"),this.clearSearchText(i,n,t))},n.prototype.closePopupContainer=function(n){var t,i;this.clearSearchList(n);t=this.getPopupContainer(n);t.css("display","none");t.removeClass("e-multiselect-popup-container-visible");this.updateDropDownIcon(t,n);i=this.getPopupListBoxDiv(n).data("ejWaitingPopup");i.model.showOnInit&&this.killPendingRequest()},n.prototype.hideMultiSelectionWaitingPopup=function(){var n=this,t=$(".e-multiselect-popup-container:visible").find(".e-multiselect-waiting-popup");t.each(function(t,i){$(i).length>0&&$(i).data("ejWaitingPopup").model.showOnInit&&n.killPendingRequest()})},n.prototype.killPendingRequest=function(){if(this.ajaxRequestCollection.length>0)for(var n=0;n<this.ajaxRequestCollection.length;n++)this.ajaxRequestCollection[n].readyState<4&&this.ajaxRequestCollection[n].abort();this.ajaxRequestCollection=[]},n.prototype.isMultiSelectionPopupLoading=function(){var n=!1,t=$(".e-multiselect-popup-container:visible").find(".e-multiselect-waiting-popup");return t.each(function(t,i){$(i).length>0&&$(i).data("ejWaitingPopup").model.showOnInit&&(n=!0)}),n},n.prototype.getListBoxCheckedItems=function(n){for(var i=[],r=this.getPopupListBox(n).data("ejListBox").getCheckedItems(),t=0;t<r.length;t++)i.push(r[t].text);return i},n.prototype.updatePopupContainerVisibility=function(n){if(!ej.isNullOrUndefined(n)&&n.length>0){n.css("display","none");var t=n.attr("id").replace(/_popup_container/g,"");this.updateDropDownIcon(n,t)}},n.prototype.updateDropDownIcon=function(n,t){var i=this.getMultiSelectionComboBox(t);n.css("display")==="block"?i.find(".e-designer-ejwidgets-updown").removeClass("e-arrow-sans-down").addClass("e-arrow-sans-up"):i.find(".e-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down")},n.prototype.getMultiSelectionComboBox=function(n){return $("#"+n+"_multi_select_dropDown")},n.prototype.getComboBoxTextField=function(n){return $("#"+n+"_multi_select_dropDown_text")},n.prototype.getPopupContainer=function(n){return $("#"+n+"_popup_container")},n.prototype.getPopupListBoxDiv=function(n){return $("#"+n+"_popup_container_list_Box_div")},n.prototype.getPopupCheckBox=function(n){return $("#"+n+"_popup_container_Check_Box")},n.prototype.getPopupSearchPanel=function(n){return $("#"+n+"_popup_container_searchPanel")},n.prototype.getSearchTextBox=function(n,t){return n.find("#"+t+"_popup_container_searchBox")},n.prototype.getSearchIcon=function(n,t){return n.find("#"+t+"_popup_container_searchIcon")},n.prototype.getPopupListBox=function(n){return $("#"+n+"_popup_container_list_Box")},n.prototype.getPopupRadioButton1=function(n){return $("#"+n+"_popup_container_list_Box_radio1")},n.prototype.getPopupRadioButton2=function(n){return $("#"+n+"_popup_container_list_Box_radio2")},n.prototype.getPopupOkButton=function(n){return $("#"+n+"_popup_container_ok_btn")},n.prototype.getPopupCancelButton=function(n){return $("#"+n+"_popup_container_cancel_btn")},n.prototype.dateFormats=function(n){var t;switch(n){case"Date Time":t=DateTimeFormat.Default;break;case"Date Hour":t=DateTimeFormat.DateHour;break;case"Month Year":t=DateTimeFormat.MonthYear;break;case"Week Year":t=DateTimeFormat.WeekYear;break;case"Quarter Year":t=DateTimeFormat.QuarterYear;break;case"Day Month Year":t=DateTimeFormat.DayMonthYear;break;case"Month Day Year":t=DateTimeFormat.MonthDayYear;break;case"Day of Week":t=DateTimeFormat.DayOfWeek;break;case"Week of Year":t=DateTimeFormat.WeekOfYear;break;case"Hours":t=DateTimeFormat.Hour;break;case"Minutes":t=DateTimeFormat.Minute;break;case"Seconds":t=DateTimeFormat.Second;break;default:t=n}return t},n}();window.ej.createObject("ej.DashboardDesignerUtility.MultiSelectionComboBox",InternalMultiSelectionComboBox,window);InternalMySQLDataSource=function(){function n(){this.lastServerName="";this.connectionType="";this.defaultPort="3306";this.itemType="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.dashboardDesigner._id;this.field={id:"id",text:"text",value:"value"};this.isPostBackServer=!1;this.dataSourceLocale=this.dashboardDesigner.locale.dataSource;this.extractionMode=ej.DashboardDesignerUtility.Serialization.enumToString(ExtractionMode,ExtractionMode.Live)}return Object.defineProperty(n,"MySQLDataSource",{get:function(){return(this.mysqldataSource===null||this.mysqldataSource===undefined)&&(this.mysqldataSource=new ej.DashboardDesignerUtility.MySQLDataSource),this.mysqldataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n,"MySQLReconnectDataSource",{get:function(){return(this.mysqlReconnectDataSource===null||this.mysqlReconnectDataSource===undefined)&&(this.mysqlReconnectDataSource=new ej.DashboardDesignerUtility.MySQLDataSource),this.mysqlReconnectDataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n,t,i){this.connectionType=t;this.itemType=i;n.find("#"+this.id+this.connectionType+"_mysql_datasource").length>0?this.resetConfiguration():(this.mysqlConfig=ej.buildTag("div.e-designer-basic-panel","",{},{id:this.id+this.connectionType+"_mysql_datasource"}),n.append(this.mysqlConfig),this.targetTag=n,this.renderBasicPanel());this.showConfiguration(!0)},n.prototype.renderBasicPanel=function(){var t=this.getRefreshSettingsJson(),n;this.basicPanel=ej.buildTag("div.e-designer-basic-panel","",{},{id:this.id+this.connectionType+"_mysql_basicpanel"});n=ej.buildTag("table.e-designer-dsconfig-table div.e-designer-basic-config-table","",{},{unselectable:"on",id:this.id+this.connectionType+"_mysql_basic_config"});this.mysqlConfig.append(this.basicPanel);this.basicPanel.append(n);this.datasource.renderTextBoxItem(this.dataSourceLocale.serverNameText,this.id+this.connectionType+"_mysql_servername",!1,n,426);this.datasource.renderNumericItem(this.dataSourceLocale.port,this.id+this.connectionType+"_mysql_port",n,null,this,this.dsName,!0,"439px");this.datasource.renderTextBoxItem(this.dataSourceLocale.userName,this.id+this.connectionType+"_mysql_username",!1,n,426);this.datasource.renderTextBoxItem(this.dataSourceLocale.passWord,this.id+this.connectionType+"_mysql_passwd",!0,n,426);this.datasource.renderCheckboxItem(this.dataSourceLocale.savePassWord,this.id+this.connectionType+"_mysql_save_password",n,null,this,"right");ej.isNullOrUndefined(this.connectionType)||this.connectionType==="_editConnection"||this.connectionType==="_newConnection"||this.renderExtractionMode(this.dataSourceLocale.mode,this.id+this.connectionType+"_mysql_extract_mode",n,426);this.datasource.renderExtractModeMessageItem(this.dashboardDesigner.locale.dataSource.extractModeMessage.replace("{0}","50000"),this.id+this.connectionType+"_mysql_extract_message",n);this.datasource.renderAccordionItem(this.dataSourceLocale.dataBaseText,this.id+this.connectionType+"_mysql_dbname",n,this.mysqlDBfocus,null,this);this.datasource.renderDropDownItem("Refresh Settings",this.id+this.connectionType+"_mysql_refresh",n,t,this.field,"0");this.mysqlServer=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_servername");this.mysqlUsrName=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_username");this.refreshIntervel=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_refresh");this.mysqlDatabase=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_dbname");this.mariadbDatabase=this.targetTag.find("#"+this.id+this.connectionType+"_mariadb_dbname");this.memsqlDatabase=this.targetTag.find("#"+this.id+this.connectionType+"_memsql_dbname");this.mysqlPasswrd=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_passwd");this.mysqlPasswrdTag=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_passwd_tr");this.mysqlUsrNameTag=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_username_tr");this.refreshIntervelTag=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_refresh_tr");this.extractMessageTag=$("#"+this.id+this.connectionType+"_mysql_extract_message_tr");this.ejMySqlDbAutoComp=this.mysqlDatabase.data("ejAutocomplete");this.mysqlSavePasswrdTag=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_save_password_tr");this.ejMySqlSavePasswrd=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_save_password").data("ejCheckBox");this.portData=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_port").data("ejNumericTextbox");this.portData.option("value",this.defaultPort);this.port=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_port");this.portTag=this.targetTag.find("#"+this.id+this.connectionType+"_mysql_port_tr");this.wiredEvents();this.dsNameId=this.id+"_datasource_dsname";this.dsName=this.targetTag.find("#"+this.dsNameId).val();this.refreshIntervelTag.css("display","none");this.extractMessageTag.css("display","none")},n.prototype.renderExtractionMode=function(n,t,i){var r=$("<tr id="+t+"_tr/>"),u=$("<td unselectable='on'/>");r.append(u);i.append(r);var s=ej.buildTag("label.editLabel e-designer-title-label e-designer-extract-mode-label",n,{},{id:this.id+this.connectionType+"_mysql_basicpanel_extractMode"}),f=ej.buildTag("div.e-designer-extract-mode-radiobutton","",{},{id:this.id+this.connectionType+"_mysql_basicpanel_extractMode"}),e=ej.buildTag("div.e-designer-extract-mode-radiobutton-live-extract","",{},{id:this.id+this.connectionType+"_mysql_basicpanel_extractMode_live"}),o=ej.buildTag("div.e-designer-extract-mode-radiobutton-live-extract","",{},{id:this.id+this.connectionType+"_mysql_basicpanel_extractMode_extract"});f.append(e,o);u.append(s,f);this.renderRadioItem(this.dashboardDesigner.locale.dataSource.live,this.id+this.connectionType+"_mysql_extract_mode_live","extractmode",e,!0);this.renderRadioItem(this.dashboardDesigner.locale.dataSource.extract,this.id+this.connectionType+"_mysql_extract_mode_extract","extractmode",o,!1)},n.prototype.renderRadioItem=function(n,t,i,r,u){var f=ej.buildTag("input","",{},{type:"radio",name:i,id:t});r.append(f);f.ejRadioButton({checked:u,change:$.proxy(this.extractModeChange,this,n),text:n})},n.prototype.extractModeChange=function(n,t){var i=t.model.text===this.dashboardDesigner.locale.dataSource.live?ExtractionMode.Live:ExtractionMode.Extract;this.extractionMode=ej.DashboardDesignerUtility.Serialization.enumToString(ExtractionMode,i);this.extractionMode.toLowerCase()===this.dashboardDesigner.locale.dataSource.live.toLowerCase()?(this.refreshIntervelTag.css("display","none"),this.extractMessageTag.css("display","none")):(this.refreshIntervelTag.css("display","table-row"),this.extractMessageTag.css("display","table-row"));this.datasource.updateDSConfigContainer()},n.prototype.inputFocus=function(n,t){t.keyCode!==9&&this.hideValidationMsg($(t.currentTarget).attr("id"))},n.prototype.unWiredEvents=function(){this.mysqlUsrName.off("focusin",$.proxy(this.onUserFocusIn,this));this.mysqlUsrName.off("focusout",$.proxy(this.onUserFocusOut,this));this.mysqlPasswrd.off("focusin",$.proxy(this.onUserFocusIn,this));this.mysqlPasswrd.off("focusout",$.proxy(this.onUserFocusOut,this));this.mysqlServer.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mysqlUsrName.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mysqlDatabase.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mariadbDatabase.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.memsqlDatabase.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mysqlPasswrd.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.port.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mysqlServer.off("focusin",$.proxy(this.mysqlServerFocusIn,this));this.mysqlServer.off("focusout",$.proxy(this.mysqlServerFocusOut,this));this.port.off("focusin",$.proxy(this.onPortFocusIn,this));this.port.off("focusout",$.proxy(this.onPortFocusOut,this))},n.prototype.destroy=function(){this.unWiredEvents()},n.prototype.onUserFocusIn=function(){this.mysqlUserName=this.mysqlUsrName.val();this.mysqlPassword=this.mysqlPasswrd.val()},n.prototype.getRefreshSettingsJson=function(){var t=ejDashboardDesigner.getInstance("DashboardDesigner").previewFeaturesJson,n=ej.DashboardUtil.getInstance().GetPreviewFeatureValue(t,PreviewFeatureName.RefreshSettings);return ej.isNullOrUndefined(n)?[{id:"never",text:"Never",value:"Never"},{id:"1hours",text:"1 Hour",value:"OneHours"},{id:"6hours",text:"6 Hours",value:"SixHours"},{id:"12hours",text:"12 Hours",value:"TwelveHours"},{id:"24hours",text:"24 Hours",value:"TwentyFourHours"},{id:"1week",text:"1 Week",value:"OneWeek"},{id:"1month",text:"1 Month",value:"OneMonth"}]:n},n.prototype.onUserFocusOut=function(){var n=this.mysqlUsrName.val(),t=this.mysqlPasswrd.val();(this.mysqlUserName!==n||this.mysqlPassword!==t)&&this.ejMySqlDbAutoComp.setModel({dataSource:[]})},n.prototype.onPortFocusIn=function(){this.mysqlPort=this.port.val()},n.prototype.onPortFocusOut=function(){var n=this.port.val();this.mysqlPort!==n&&this.ejMySqlDbAutoComp.setModel({dataSource:[]})},n.prototype.wiredEvents=function(){this.mysqlUsrName.on("focusin",$.proxy(this.onUserFocusIn,this));this.mysqlUsrName.on("focusout",$.proxy(this.onUserFocusOut,this));this.mysqlPasswrd.on("focusin",$.proxy(this.onUserFocusIn,this));this.mysqlPasswrd.on("focusout",$.proxy(this.onUserFocusOut,this));this.mysqlServer.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mysqlUsrName.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mysqlDatabase.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mysqlPasswrd.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.port.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.mysqlServer.on("focusin",$.proxy(this.mysqlServerFocusIn,this));this.mysqlServer.on("focusout",$.proxy(this.mysqlServerFocusOut,this));this.port.on("focusin",$.proxy(this.onPortFocusIn,this));this.port.on("focusout",$.proxy(this.onPortFocusOut,this))},n.prototype.editConfiguration=function(n,t){if(t.ConnectionProperties.DataProvider==="MariaDB"?this.renderConfiguration(n,"_editConnection","e-mariadb"):t.ConnectionProperties.DataProvider==="MemSQL"?this.renderConfiguration(n,"_editConnection","e-memsql"):this.renderConfiguration(n,"_editConnection"),t){var i=null;i=ej.isNullOrUndefined(t.ConnectionProperties.ConnectString)?t.ConnectionProperties.ConnectionString:t.ConnectionProperties.ConnectString;t.ConnectionProperties.IsDesignState||(this.mysqlUsrName.val(t.ConnectionProperties.UserName),this.portData.option("value",t.ConnectionProperties.Port),t.ConnectionProperties.DataProvider==="MariaDB"?this.mariadbDatabase.val(t.ConnectionProperties.Database):t.ConnectionProperties.DataProvider==="MemSQL"?this.memsqlDatabase.val(t.ConnectionProperties.Database):this.ejMySqlDbAutoComp.setModel({value:t.ConnectionProperties.Database}),this.mysqlServer.val(t.ConnectionProperties.ServerName),this.ejMySqlDbAutoComp.setModel({value:t.ConnectionProperties.Database}),ej.isNullOrUndefined(t.Mode)||(this.setExtractMode(t.Mode),t.Mode.toLowerCase()!=="extract"||ej.isNullOrUndefined(t.RefreshInterval)||this.setRefreshInterval(t.RefreshInterval)))}this.hideValidationMsg()},n.prototype.setRefreshInterval=function(n){this.refreshIntervel.data("ejDropDownList").selectItemByValue(n)},n.prototype.setExtractMode=function(n){var t=this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_mysql_extract_mode_"+n.toLowerCase()).data("ejRadioButton");t.option("checked",!0);ej.isNullOrUndefined(n)||(this.extractionMode=n)},n.prototype.hideValidationMsg=function(n){(ej.isNullOrUndefined(this.mysqlServer)||this.mysqlServer.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.mysqlServer.attr("id"),!1);(ej.isNullOrUndefined(this.mysqlDatabase)||this.mysqlDatabase.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.mysqlDatabase.attr("id"),!1);(ej.isNullOrUndefined(this.mariadbDatabase)||this.mariadbDatabase.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.mariadbDatabase.attr("id"),!1);(ej.isNullOrUndefined(this.memsqlDatabase)||this.memsqlDatabase.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.memsqlDatabase.attr("id"),!1);(ej.isNullOrUndefined(this.mysqlUsrName)||this.mysqlUsrName.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.mysqlUsrName.attr("id"),!1);(ej.isNullOrUndefined(this.mysqlPasswrd)||this.mysqlPasswrd.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.mysqlPasswrd.attr("id"),!1);(ej.isNullOrUndefined(this.port)||this.port.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.port.attr("id"),!1)},n.prototype.resetConfiguration=function(){var n,t;this.hideValidationMsg();this.mysqlUsrName.val("");this.mysqlPasswrd.val("");this.mariadbDatabase.val("");this.memsqlDatabase.val("");this.portData.option("value",this.defaultPort);this.targetTag.find("#"+this.id+this.connectionType+"_mysql_servername").val("");this.ejMySqlDbAutoComp.clearText();this.ejMySqlSavePasswrd.setModel({checked:!1});this.ejMySqlDbAutoComp.setModel({value:"",dataSource:[]});this.lastServerName="";n=this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_mysql_extract_mode_live").data("ejRadioButton");ej.isNullOrUndefined(n)||n.option("checked",!0);t=this.refreshIntervel.data("ejDropDownList");ej.isNullOrUndefined(t)||t.selectItemByValue("Never")},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.ServerName=t.ServerName;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName=t.Username;n.ConnectionProperties.PassWord=t.Password;n.ConnectionProperties.Prompt="";n.ConnectionProperties.Port=t.Port;n.ConnectionProperties.Database=t.Database;n.SecurityType=t.SecurityType;n.Name=t.Name;n.ServerName=t.ServerName;n.RefreshInterval=t.RefreshInterval;n.Mode=t.Mode;n.Mode.toLowerCase()!=="live"||ej.isNullOrUndefined(n.ExtractionParams)||(n.ExtractionParams=null)},n.prototype.UpdateDataSourceInfo=function(n,t){this.UpdateDSInfo(n,t)},n.prototype.getDatabaseVal=function(){var n=this.ejMySqlDbAutoComp.getValue();return n?n:this.targetTag.find("#"+this.id+this.connectionType+"_mysql_dbname").val()},n.prototype.getServerVal=function(){return this.targetTag.find("#"+this.id+this.connectionType+"_mysql_servername").val()},n.prototype.getDatasourceInfo=function(n,t){var i=!0,f="",e="",r="",o="",u="",s=!0,h="Integrated",c="Never";return(this.hideValidationMsg(t),this.basicPanel.is(":visible")&&(e=this.getServerVal(),r=this.getDatabaseVal(),u=this.portData.option("value"),e.length===0&&(this.mysqlServer.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.mysqlServer.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyServerName),i=!1),r.length===0&&(this.mysqlDatabase.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.mysqlDatabase.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyDatabaseName),i=!1),r.length===0&&(this.mariadbDatabase.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.mariadbDatabase.attr("id"),!0,this.dataSourceLocale.specifyDatabaseName),i=!1),r.length===0&&(this.memsqlDatabase.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.memsqlDatabase.attr("id"),!0,this.dataSourceLocale.specifyDatabaseName),i=!1),(this.port.attr("id")===t||ej.isNullOrUndefined(t))&&(ej.isNullOrUndefined(u)||u.length===0)&&(this.datasource.showValidationMsg(this.port.attr("id"),!0,this.dataSourceLocale.specifyPortNumber),i=!1),this.dashboardDesigner.dashboardMode!==DashboardMode.Local&&(f=this.mysqlUsrName.val(),o=this.mysqlPasswrd.val(),h="DataBase",s=!1,f.length===0&&(this.mysqlUsrName.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.mysqlUsrName.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyUserName),i=!1),o.length===0&&(this.mysqlPasswrd.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.mysqlPasswrd.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyPassword),i=!1)),this.extractionMode.toLowerCase()!=="live"&&(c=this.refreshIntervel.data("ejDropDownList").getSelectedValue())),i)?{Name:n,ServerName:e,Provider:this.itemType==="e-mariadb"?"MariaDB":this.itemType==="e-memsql"?"MemSQL":"MySQL",IsIntegrated:s,Port:u,SecurityType:h,IsDesignState:!1,Username:f,Password:o,Database:r,Mode:this.extractionMode,RefreshInterval:c}:null},n.prototype.showConfiguration=function(n){this.mysqlConfig.css("display",n?"table-row":"none");this.mysqlConfig.children().show()},n.prototype.mysqlDBfocus=function(n){var t,i,o;if(!(n.model.dataSource&&n.model.dataSource.length>0)&&!this.isPostBackDB&&(t=this.getServerVal(),i=this.portData.option("value"),t)){var r="",u="",f=!0,e="Integrated";this.isPostBackDB=!0;this.dashboardDesigner.dashboardMode!==DashboardMode.Local&&(r=this.mysqlUsrName.val(),u=this.mysqlPasswrd.val(),f=!1,e="DataBase");o={Name:"",ServerName:t,Provider:this.itemType==="e-mariadb"?"MariaDB":this.itemType==="e-memsql"?"MemSQL":"MySQL",IsIntegrated:f,Port:i,SecurityType:e,Username:ej.DashboardUtil.encryptData(r),Password:ej.DashboardUtil.encryptData(u),ConnectionString:ej.DashboardUtil.encryptData("Data Source="+t+";"),Mode:this.extractionMode};ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.dataBases,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.dataBases,datasource:o})},{fnction:$.proxy(this.loadMySqlDB,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!0)}},n.prototype.loadMySqlDB=function(n){var u,i,r,t;if(n.Error)u=ej.isNullOrUndefined(n.Message)?n.Message:n.Message.replace("Sf_Exception - ",""),ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.alertDialog,u,IconType.errors,AlertType.Alert,!1,null);else if(n&&n!=="Not Found"){for(i=[],r=JSON.parse(n),t=0;t<r.length;t++)i.push(r[t].DataBase);this.ejMySqlDbAutoComp.setModel({dataSource:i});this.ejMySqlDbAutoComp.open()}this.isPostBackDB=!1},n.prototype.mysqlServerFocusIn=function(){this.lastServerName=this.getServerVal()},n.prototype.mysqlServerFocusOut=function(){var n=this.getServerVal();this.lastServerName!==n&&this.ejMySqlDbAutoComp.setModel({dataSource:[]})},n.prototype.showLoadingIndicator=function(){$("#"+this.id+this.connectionType+"_mysql_dbname_dropdown>span").removeClass("e-search");$("#"+this.id+this.connectionType+"_mysql_dbname_dropdown>span").addClass("e-load").addClass("e-input");$("#"+this.id+this.connectionType+"_mysql_dbname_dropdown>span").css("background-position","center")},n.prototype.hideLoadingIndicator=function(){$("#"+this.id+this.connectionType+"_mysql_dbname_dropdown>span").removeClass("e-input").removeClass("e-load");$("#"+this.id+this.connectionType+"_mysql_dbname_dropdown>span").addClass("e-search")},n}();window.ej.createObject("ej.DashboardDesignerUtility.MySQLDataSource",InternalMySQLDataSource,window);InternalODATADataSource=function(){function n(){this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.dashboardDesigner._id}return Object.defineProperty(n,"ODATADataSource",{get:function(){return(this.odatadataSource===null||this.odatadataSource===undefined)&&(this.odatadataSource=new ej.DashboardDesignerUtility.ODATADataSource),this.odatadataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n){n.find("#"+this.id+"_odata_datasource").length>0?this.resetConfiguration():(this.odataConfig=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_odata_datasource"}),n.append(this.odataConfig),this.renderOdataPanel());this.showConfiguration(!0)},n.prototype.renderOdataPanel=function(){this.odataPanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_odata_Panel"});var n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+"_odata_config"});this.odataConfig.append(this.odataPanel);this.odataPanel.append(n);this.datasource.renderTextArea("Connection String",this.id+"_odata_conStr",n);this.conncString=$("#"+this.id+"_odata_conStr")},n.prototype.editConfiguration=function(n){this.renderConfiguration(this.datasource.configTable);this.hideValidationMsg();this.conncString.val(n.ConnectionProperties.ConnectString)},n.prototype.showConfiguration=function(n){this.odataConfig.css("display",n?"table-row":"none");this.odataConfig.children().show()},n.prototype.hideValidationMsg=function(){this.datasource.showValidationMsg(this.conncString.attr("id"),!1)},n.prototype.resetConfiguration=function(){this.conncString.val("");this.hideValidationMsg()},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName="";n.ConnectionProperties.PassWord="";n.ConnectionProperties.Prompt="";n.SecurityType=t.SecurityType},n.prototype.getDatasourceInfo=function(n){var t=!0;return(this.hideValidationMsg(),this.conncString.val().length===0&&(this.datasource.showValidationMsg(this.conncString.attr("id"),!0,"Specify the Connection string"),t=!1),t)?{Name:n,Provider:"OData",IsIntegrated:!1,SecurityType:"None",Username:"",Password:"",ConnectionString:this.conncString.val()}:null},n}();window.ej.createObject("ej.DashboardDesignerUtility.ODATADataSource",InternalODATADataSource,window);InternalODBCDataSource=function(){function n(){this.dataSource=ejDashboardDesigner.getInstance("DataSource");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.isOdbcPostBack=!1;this.sqlWinUserName=null;this.isDsnConn=!1;this.isEdit=!1;this.odbcDb=null;this.filePath=null;this.isSqlPostBack=!1;this.isSqlPostBackDB=!1;this.isOracPostBackDb=!1;this.id=this.dashboardDesigner._id;this.dataSourceLocale=this.dashboardDesigner.locale.dataSource}return Object.defineProperty(n,"ODBCDataSource",{get:function(){return ej.isNullOrUndefined(this.odbcdataSource)&&(this.odbcdataSource=new ej.DashboardDesignerUtility.ODBCDataSource),this.odbcdataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n){n.find("#"+this.id+"_odbc_datasource").length>0?this.resetConfigs():(this.odbcConfig=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_odbc_datasource"}),n.append(this.odbcConfig),this.renderBasicPanel(),this.renderAdvcPanel());this.showConfiguration(!0)},n.prototype.renderBasicPanel=function(){this.basicPanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_odbc_basicpanel"});this.basicConfigTable=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+"_odbc_basic_config"});this.odbcConfig.append(this.basicPanel);this.basicPanel.append(this.basicConfigTable);this.renderDbSpec();this.changedSpecification({text:"DSN"})},n.prototype.renderAdvcPanel=function(){this.advancePanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_odbc_advancepanel"});var n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+"_odbc_advance_config"}),t=this.dataSourceLocale.authentication,i=this.dataSourceLocale.promptText,r=this.dataSourceLocale.noneText,u=[{id:t.toLowerCase(),text:t,value:t},{id:i.toLowerCase(),text:i,value:i},{id:r.toLowerCase(),text:r,value:r}];this.odbcConfig.append(this.advancePanel);this.advancePanel.append(n);this.dataSource.renderTextArea("Connection String",this.id+"_odbc_advanceConStr",n);this.dataSource.renderDropDownItem("Authentication Type",this.id+"_odbc_adv_authtype",n,u,{id:"id",text:"text",value:"value"},"0");this.dataSource.renderTextBoxItem("Prompt Text",this.id+"_odbc_adv_prompt",!1,n,426);this.dataSource.renderTextBoxItem("Username",this.id+"_odbc_adv_usr",!1,n,426);this.dataSource.renderTextBoxItem("Password",this.id+"_odbc_adv_pswd",!0,n,426);$("#"+this.id+"_odbc_adv_authtype")&&(this.ejAdvcAuthDrpdwn=$("#"+this.id+"_odbc_adv_authtype").data("ejDropDownList"),this.ejAdvcAuthDrpdwn.model.change=$.proxy(this.changedAdvcAuthentication,this));this.advcPromptCont=$("#"+this.id+"_odbc_adv_prompt");this.advcPromptTag=$("#"+this.id+"_odbc_adv_prompt_tr");this.advcUsrName=$("#"+this.id+"_odbc_adv_usr");this.advcUsrNameTag=$("#"+this.id+"_odbc_adv_usr_tr");this.advcPasswd=$("#"+this.id+"_odbc_adv_pswd");this.advcPasswdTag=$("#"+this.id+"_odbc_adv_pswd_tr");this.advcOdbcConStr=$("#"+this.id+"_odbc_advanceConStr");this.changedAdvcAuthentication({text:this.dataSourceLocale.authentication})},n.prototype.renderDbSpec=function(){this.dataSource.renderDropDownItem("Connection Type",this.id+"_odbc_specificationtype",this.basicConfigTable,[{id:"dsn",text:"DSN",value:"Dsn"},{id:"driver",text:"Driver",value:"Driver"},{id:"constr",text:"Connection String",value:"connectionstring"}],{id:"id",text:"text",value:"value"},"0");this.dataSource.renderAccordionItem("DSN Name",this.id+"_odbc_dbname",this.basicConfigTable,this.odbcDbFocus,null,this);this.dataSource.renderTextBoxItem("Driver",this.id+"_odbc_driver",!1,this.basicConfigTable,426);this.renderFileUpload(this.basicConfigTable,".mdb, .accdb");this.dataSource.renderTextArea("Connection String",this.id+"_odbc_constr",this.basicConfigTable);this.odbcConType=$("#"+this.id+"_odbc_specificationtype");this.odbcDatabase=$("#"+this.id+"_odbc_dbname");this.odbcDbTag=$("#"+this.id+"_odbc_dbname_tr");this.dsnDriver=$("#"+this.id+"_odbc_driver");this.dsnDriverTag=$("#"+this.id+"_odbc_driver_tr");this.odbcConStr=$("#"+this.id+"_odbc_constr");this.odbcConStrTag=$("#"+this.id+"_odbc_constr_tr");this.dsnDriverTag.css("display","table-row");this.odbcDbTag.find(".editLabel").length>0&&this.odbcDbTag.find(".editLabel").addClass("odbcDbLabel");this.odbcConType&&(this.ejSpecDrpdwn=this.odbcConType.data("ejDropDownList"),this.ejSpecDrpdwn.model.change=$.proxy(this.changedSpecification,this));this.odbcDatabase&&(this.ejOdbcDbAutoComp=this.odbcDatabase.data("ejAutocomplete"),this.ejOdbcDbAutoComp.model.change=$.proxy(this.changedOdbcDatabase,this))},n.prototype.renderFileUpload=function(n,t){var f=this.filePathTag=ej.buildTag("tr","",{display:"table-row"},{id:this.id+"_odbc_filepath_tr"}),e=ej.buildTag("td","",{},{unselectable:"on"}),i,h,r;f.append(e);n.append(f);i=ej.buildTag("table","",{},{unselectable:"on"});i.append(this.dataSource.getRowCaption("File Name",this.id+"_odbc_filepath"));var u=ej.buildTag("tr","",{},{}),o=ej.buildTag("td","",{},{id:this.id+"_odbc_filepath_td"}),s=ej.buildTag("td","",{},{});u.append(o);u.append(s);i.append(u);e.append(i);h=this.filePathText=ej.buildTag("input.e-designer-textcontent e-designer-content-label","",{height:"24px",width:"177px"},{edittype:"stringedit",disabled:"disabled",id:this.id+"_odbc_filepath",type:"text"});o.append(h);r=ej.buildTag("div","",{},{id:this.id+"_odbc_fileupload"});s.append(r);r.ejUploadbox({saveUrl:this.dashboardDesigner.model.serviceUrl+"/UploadReportAction",autoUpload:!0,showFileDetails:!1,height:"30px",width:"37px",buttonText:{browse:"..."},extensionsAllow:t,success:$.proxy(this.uploadComplete,this),beforeSend:$.proxy(this.beforeUpload,this),dialogAction:{closeOnComplete:!0}});this.ejFileUpload=r.data("ejUploadbox")},n.prototype.renderSqlConfig=function(n){var i,r,t;if(n.find("#"+this.id+"_odbc_sqlconfig_table").length>0)this.resetConfig("sql");else{i=this.sqlConfigTag=ej.buildTag("tr","",{},{id:this.id+"_odbc_sqlconfig_tr"});r=ej.buildTag("td","",{},{unselectable:"on"});i.append(r);n.append(i);t=ej.buildTag("table","",{width:"100%","margin-left":"-3px"},{unselectable:"on",id:this.id+"_odbc_sqlconfig_table"});r.append(t);var u=this.dataSourceLocale.windowsText,f=this.dataSourceLocale.sqlServerText,e=[{id:u.toLowerCase(),text:u,value:u},{id:f.toLowerCase(),text:f,value:f}];this.dataSource.renderAccordionItem("Server Name",this.id+"_odbc_sql_servername",t,this.sqlServerFocus,null,this);this.dataSource.renderDropDownItem("Authentication Type",this.id+"_Sql_authenticationtype",t,e,{id:"id",text:"text",value:"value"},"0");this.dataSource.renderTextBoxItem("Username",this.id+"_odbc_sql_username",!1,t,426);this.dataSource.renderTextBoxItem("Password",this.id+"_odbc_sql_password",!0,t,426);this.dataSource.renderAccordionItem("Database",this.id+"_odbc_sql_dbname",t,this.sqlDbfocus,null,this);this.sqlSerName=$("#"+this.id+"_odbc_sql_servername");this.sqlUsrName=$("#"+this.id+"_odbc_sql_username");this.sqlPasswd=$("#"+this.id+"_odbc_sql_password");this.sqlDbName=$("#"+this.id+"_odbc_sql_dbname");this.sqlAuthType=$("#"+this.id+"_Sql_authenticationtype");this.ejSqlAutoComp=this.sqlSerName.data("ejAutocomplete");this.ejSqlDbAutoComp=this.sqlDbName.data("ejAutocomplete");this.sqlAuthType&&(this.ejSqlAuthDrpdwn=this.sqlAuthType.data("ejDropDownList"),this.ejSqlAuthDrpdwn.model.change=$.proxy(this.changedSQLAuthentication,this))}this.changedSQLAuthentication({text:this.dataSourceLocale.windowsText})},n.prototype.renderMySqlConfig=function(n){var i,r,t;n.find("#"+this.id+"_odbc_mysqlconfig_table").length>0?this.resetConfig("mysql"):(i=this.mySqlConfigTag=ej.buildTag("tr","",{},{id:this.id+"_odbc_mysqlconfig_tr"}),r=ej.buildTag("td","",{},{unselectable:"on"}),i.append(r),n.append(i),t=ej.buildTag("table","",{width:"100%","margin-left":"-3px"},{unselectable:"on",id:this.id+"_odbc_mysqlconfig_table"}),r.append(t),this.dataSource.renderTextBoxItem("Server Name",this.id+"_odbc_mysql_servername",!1,t,426),this.dataSource.renderTextBoxItem("Port",this.id+"_odbc_mysql_portno",!1,t,426),this.dataSource.renderTextBoxItem("Username",this.id+"_odbc_mysql_username",!1,t,426),this.dataSource.renderTextBoxItem("Password",this.id+"_odbc_mysql_password",!0,t,426),this.dataSource.renderTextBoxItem("Database",this.id+"_odbc_mysql_dbname",!1,t,426),this.mySqlSerName=$("#"+this.id+"_odbc_mysql_servername"),this.mySqlPortNo=$("#"+this.id+"_odbc_mysql_portno"),this.mySqlUsrName=$("#"+this.id+"_odbc_mysql_username"),this.mySqlPasswd=$("#"+this.id+"_odbc_mysql_password"),this.mySqlDbName=$("#"+this.id+"_odbc_mysql_dbname"))},n.prototype.renderPSqlConfig=function(n){var t;if(n.find("#"+this.id+"_odbc_postsqlconfig_table").length>0)this.resetConfig("postsql");else{var i=this.pSqlConfigTag=ej.buildTag("tr","",{},{id:this.id+"_odbc_postsqlconfig_tr"}),r=ej.buildTag("td","",{},{unselectable:"on"});i.append(r);n.append(i);t=ej.buildTag("table","",{width:"100%","margin-left":"-3px"},{unselectable:"on",id:this.id+"_odbc_postsqlconfig_table"});r.append(t);this.dataSource.renderTextBoxItem("Server Name",this.id+"_odbc_postsql_servername",!1,t,426);this.dataSource.renderDropDownItem("SSL Mode",this.id+"_odbc_postsql_ssltype",t,[{id:"ssl_disable",text:"disable",value:"disable"},{id:"ssl_allow",text:"allow",value:"allow"},{id:"ssl_prefer",text:"prefer",value:"prefer"},{id:"ssl_require",text:"require",value:"require"},{id:"ssl_verify-ca",text:"verify-ca",value:"verify-ca"},{id:"ssl_verify-full",text:"verify-full",value:"verify-full"}],{id:"id",text:"text",value:"value"},"0");this.dataSource.renderTextBoxItem("Port",this.id+"_odbc_postsql_portno",!1,t,426);this.dataSource.renderTextBoxItem("Username",this.id+"_odbc_postsql_username",!1,t,426);this.dataSource.renderTextBoxItem("Password",this.id+"_odbc_postsql_password",!0,t,426);this.dataSource.renderTextBoxItem("Database",this.id+"_odbc_postsql_dbname",!1,t,426);this.pSqlSerName=$("#"+this.id+"_odbc_postsql_servername");this.pSqlPortNo=$("#"+this.id+"_odbc_postsql_portno");this.pSqlUsrName=$("#"+this.id+"_odbc_postsql_username");this.pSqlPasswd=$("#"+this.id+"_odbc_postsql_password");this.pSqlDbName=$("#"+this.id+"_odbc_postsql_dbname");this.ejPSqlSslDrpdwn=$("#"+this.id+"_odbc_postsql_ssltype").data("ejDropDownList")}},n.prototype.renderOracConfig=function(n){var i,r,t;n.find("#"+this.id+"_odbc_oracleconfig_table").length>0?this.resetConfig("oracle"):(i=this.oracConfigTag=ej.buildTag("tr","",{},{id:this.id+"_odbc_oracleconfig_tr"}),r=ej.buildTag("td","",{},{unselectable:"on"}),i.append(r),n.append(i),t=ej.buildTag("table","",{width:"100%","margin-left":"-3px"},{unselectable:"on",id:this.id+"_odbc_oracleconfig_table"}),r.append(t),this.dataSource.renderTextBoxItem("Server Name",this.id+"_odbc_oracle_servername",!1,t,426),this.dataSource.renderTextBoxItem("Username",this.id+"_odbc_oracle_username",!1,t,426),this.dataSource.renderTextBoxItem("Password",this.id+"_odbc_oracle_password",!0,t,426),this.dataSource.renderAccordionItem("Database",this.id+"_odbc_oracle_dbname",t,this.oracleDbfocus,null,this),this.oracSerName=$("#"+this.id+"_odbc_oracle_servername"),this.oracUsrName=$("#"+this.id+"_odbc_oracle_username"),this.oracPasswd=$("#"+this.id+"_odbc_oracle_password"),this.oracDbName=$("#"+this.id+"_odbc_oracle_dbname"),this.ejOracDbAutoComp=this.oracDbName.data("ejAutocomplete"))},n.prototype.changedSpecification=function(n){this.isEdit=!1;this.resetOdbcDbConfig();this.isDsnConn=n.text.toLowerCase()==="dsn";this.odbcDatabase.val("");this.ejOdbcDbAutoComp.model.value="";this.ejOdbcDbAutoComp.setModel({dataSource:[]});n.text==="Connection String"?(this.odbcConStr.val(""),this.odbcDbTag.css("display","none"),this.odbcConStrTag.css("display","table-row")):(this.odbcDbTag.css("display","table-row"),this.odbcConStrTag.css("display","none"),!ej.isNullOrUndefined(this.odbcDb)&&(this.odbcDb.DsnNames.length>0||this.odbcDb.OdbcDrivers.length>0)&&this.loadOdbcDb(this.odbcDb),this.odbcDbTag.find(".odbcDbLabel")[0].innerHTML=this.isDsnConn?"DSN Name":n.text);this.hideValidationMsgs();this.dataSource.updateEJComponentSize();this.dataSource.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.changedOdbcDatabase=function(n){var t,i=$("#"+this.id+"_adv_authenticationtype").data("ejDropDownList");if(this.resetOdbcDbConfig(),this.hideValidationMsg("dbfile"),this.odbcDb!==null&&(t=this.isDsnConn?this.odbcDb.DsnNames.filter(function(t){return t.Name.toLowerCase()===n.value.toLowerCase()})[0]:this.odbcDb.OdbcDrivers.filter(function(t){return t.Name.toLowerCase()===n.value.toLowerCase()})[0]),t){this.isDsnConn&&(this.dsnDriverTag.css("display","table-row"),this.dsnDriver.val(t.DSNDriverName?t.DSNDriverName:"").prop("disabled","disabled"));switch(this.getDBType()){case"dbfile":this.filePathTag.css("display","table-row");this.filePathText.val("Upload database file").prop("disabled","disabled");this.ejFileUpload.setModel({extensionsAllow:t.FileExtension?t.FileExtension:".mdb, .accdb"});this.isDsnConn&&t.DSNFilePath&&this.filePathText.val(t.DSNFilePath.substr(t.DSNFilePath.lastIndexOf("\\")+1));break;case"sql":this.renderSqlConfig(this.basicConfigTable);this.sqlConfigTag.css("display","table-row");this.isDsnConn&&(t.DSNServerName&&this.ejSqlAutoComp.setModel({value:t.DSNServerName}),t.DSNDatabase&&this.ejSqlDbAutoComp.setModel({value:t.DSNDatabase}),t.IsIntegrated&&(this.ejSqlAuthDrpdwn.setModel({value:this.dataSourceLocale.windowsText}),this.sqlUsrName.val(this.sqlWinUserName)));break;case"mysql":this.renderMySqlConfig(this.basicConfigTable);this.mySqlConfigTag.css("display","table-row");this.isDsnConn&&(t.DSNServerName&&this.mySqlSerName.val(t.DSNServerName),t.DSNDatabase&&this.mySqlDbName.val(t.DSNDatabase),t.DSNUid&&this.mySqlUsrName.val(t.DSNUid),t.DSNPwd&&this.mySqlPasswd.val(t.DSNPwd),t.DSNPort&&this.mySqlPortNo.val(t.DSNPort));i.setModel({value:this.dataSourceLocale.sqlServerText});break;case"postsql":this.renderPSqlConfig(this.basicConfigTable);this.pSqlConfigTag.css("display","table-row");this.isDsnConn&&(t.DSNServerName&&this.pSqlSerName.val(t.DSNServerName),t.DSNDatabase&&this.pSqlDbName.val(t.DSNDatabase),t.DSNUid&&this.pSqlUsrName.val(t.DSNUid),t.DSNPwd&&this.pSqlPasswd.val(t.DSNPwd),t.DSNPort&&this.pSqlPortNo.val(t.DSNPort),t.DSNSslMode&&this.ejPSqlSslDrpdwn.setModel({value:t.DSNSslMode}));i.setModel({value:this.dataSourceLocale.sqlServerText});break;case"oracle":this.renderOracConfig(this.basicConfigTable);this.oracConfigTag.css("display","table-row");this.isDsnConn&&(t.DSNServerName&&this.oracSerName.val(t.DSNServerName),t.DSNDatabase&&this.oracDbName.val(t.DSNDatabase),t.DSNUid&&this.oracUsrName.val(t.DSNUid),t.DSNPwd&&this.oracPasswd.val(t.DSNPwd));i.setModel({value:this.dataSourceLocale.sqlServerText})}}else this.dataSource.showValidationMsg(this.odbcDatabase.attr("id"),!0,"Selected database is not available");this.dataSource.updateEJComponentSize();this.dataSource.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.changedSQLAuthentication=function(n){this.sqlUsrName.val("");this.sqlPasswd.val("");this.dataSource.showValidationMsg(this.sqlUsrName.attr("id"),!1);this.dataSource.showValidationMsg(this.sqlPasswd.attr("id"),!1);$("#"+this.id+"_adv_authenticationtype").data("ejDropDownList").setModel({value:n.text});n.text===this.dataSourceLocale.windowsText?(this.sqlUsrName.val(this.sqlWinUserName).prop("disabled","disabled"),this.sqlPasswd.prop("disabled","disabled")):(this.sqlUsrName.val("").removeAttr("disabled"),this.sqlPasswd.removeAttr("disabled"));this.ejSqlDbAutoComp.setModel({dataSource:[]});this.dataSource.updateEJComponentSize();this.dataSource.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.changedAdvcAuthentication=function(n){this.hideValidationMsg("odbc-advc");this.advcPromptTag.css("display","none");this.advcUsrNameTag.css("display","none");this.advcPasswdTag.css("display","none");n.text===this.dataSourceLocale.authentication?(this.advcUsrNameTag.css("display","table-row"),this.advcPasswdTag.css("display","table-row")):n.text===this.dataSourceLocale.promptText&&(this.advcPromptTag.css("display","table-row"),this.advcUsrNameTag.css("display","table-row"),this.advcPasswdTag.css("display","table-row"));this.dataSource.updateEJComponentSize();this.dataSource.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.odbcDbFocus=function(n){this.dataSource.showValidationMsg(this.odbcDatabase.attr("id"),!1);n.model.dataSource&&n.model.dataSource.length>0||this.isOdbcPostBack||(this.isOdbcPostBack=!0,ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.loadODBCDrivers,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.loadODBCDrivers})},{fnction:$.proxy(this.loadOdbcDb,this),indicator:[$.proxy(this.showLoadingIndicator,$("#"+this.odbcDatabase.attr("id"))),$.proxy(this.hideLoadingIndicator,$("#"+this.odbcDatabase.attr("id")))]}))},n.prototype.loadOdbcDb=function(n){var i=ejDashboardDesigner.getInstance("DashboardDesigner"),r,t;if(!this.odbcDb&&n.OdbcDB&&(this.odbcDb=n.OdbcDB),n&&typeof n!="object"&&n.indexOf("Sf_Exception")!==-1)ej.DashboardUtil.getInstance().alertDialog(i.locale.alertDialogTitle.odbcDataSource,i.locale.errorMessage.failedToConnectDataSource,IconType.errors,AlertType.Alert,!1,n,{height:200});else if(this.odbcDb&&(this.odbcDb.DsnNames.length>0||this.odbcDb.OdbcDrivers.length>0)){if(r=[],!this.sqlWinUserName&&n.WinUserName&&(this.sqlWinUserName=n.WinUserName),this.odbcDb.DsnNames.length===0&&this.isDsnConn?this.dataSource.showValidationMsg(this.odbcDatabase.attr("id"),!0,i.locale.dataSource.dsnNotAvailable):this.odbcDb.OdbcDrivers.length===0&&this.dataSource.showValidationMsg(this.odbcDatabase.attr("id"),!0,i.locale.dataSource.dsnDriversNotAvailable),this.odbcDb)if(Object.keys(this.odbcDb).length>0&&this.odbcDb.DsnNames.length>0&&this.isDsnConn)for(this.dataSource.showValidationMsg(this.odbcDatabase.attr("id"),!1),t=0;t<this.odbcDb.DsnNames.length;t++)r.push({text:this.odbcDb.DsnNames[t].Name,category:this.odbcDb.DsnNames[t].DSNCategory});else if(Object.keys(this.odbcDb).length>0&&this.odbcDb.OdbcDrivers.length>0&&!this.isDsnConn)for(this.dataSource.showValidationMsg(this.odbcDatabase.attr("id"),!1),t=0;t<this.odbcDb.OdbcDrivers.length;t++)r.push(this.odbcDb.OdbcDrivers[t].Name);this.ejOdbcDbAutoComp.setModel({dataSource:r});this.isDsnConn&&(this.ejOdbcDbAutoComp.model.fields.groupBy="category");this.isEdit&&this.setOdbcDatasource()}else this.ejSpecDrpdwn.setModel({value:"connectionstring"});this.isOdbcPostBack=!1},n.prototype.sqlServerFocus=function(n){if(!(n.model.dataSource&&n.model.dataSource.length>0)&&!this.isSqlPostBack){this.isSqlPostBack=!0;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.serverInstance,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.serverInstance,datasource:{Name:"",Provider:"SQL",IsIntegrated:!0,SecurityType:"Integrated",Username:"",Password:"",ConnectionString:""}})},{fnction:$.proxy(this.loadSqlServers,this),indicator:[$.proxy(this.showLoadingIndicator,$("#"+this.sqlSerName.attr("id"))),$.proxy(this.hideLoadingIndicator,$("#"+this.sqlSerName.attr("id")))]})}},n.prototype.loadSqlServers=function(n){var i,r,t;if(n&&n!=="Not Found"){for(i=[],r=JSON.parse(n),t=0;t<r.length;t++)i.push(r[t].ServerName);this.ejSqlAutoComp.setModel({dataSource:i})}this.isSqlPostBack=!1},n.prototype.sqlDbfocus=function(n){var t,e;if(!(n.model.dataSource&&n.model.dataSource.length>0)&&!this.isSqlPostBackDB&&(t=this.sqlSerName.val(),t)){var i="",r="",u=!0,f="Integrated";this.ejSqlAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.sqlServerText&&(i=this.sqlUsrName.val(),r=this.sqlPasswd.val(),u=!1,f="DataBase");this.isSqlPostBackDB=!0;e={Name:"",Provider:"SQL",IsIntegrated:u,SecurityType:f,Username:ej.DashboardUtil.encryptData(i),Password:ej.DashboardUtil.encryptData(r),ConnectionString:ej.DashboardUtil.encryptData("Data Source="+t+";")};ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.dataBases,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.dataBases,datasource:e})},{fnction:$.proxy(this.loadSqlDb,this),indicator:[$.proxy(this.showLoadingIndicator,$("#"+this.sqlDbName.attr("id"))),$.proxy(this.hideLoadingIndicator,$("#"+this.sqlDbName.attr("id")))]})}},n.prototype.loadSqlDb=function(n){var i,r,t;if(n&&n!=="Not Found"){for(i=[],r=JSON.parse(n),t=0;t<r.length;t++)i.push(r[t].DataBase);this.ejSqlDbAutoComp.setModel({dataSource:i})}this.isSqlPostBackDB=!1},n.prototype.oracleDbfocus=function(n){var t,i;n.model.dataSource&&n.model.dataSource.length>0||this.isOracPostBackDb||(t=this.oracSerName.val(),t&&(this.isOracPostBackDb=!0,i={Name:"",Provider:"Oracle",IsIntegrated:!0,Username:ej.DashboardUtil.encryptData(this.oracUsrName.val()),Password:ej.DashboardUtil.encryptData(this.oracPasswd.val()),ConnectionString:ej.DashboardUtil.encryptData("Data Source="+t)},ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.dataBases,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.dataBases,datasource:i})},{fnction:$.proxy(this.loadOracleDb,this),indicator:[$.proxy(this.showLoadingIndicator,$("#"+this.oracDbName.attr("id"))),$.proxy(this.hideLoadingIndicator,$("#"+this.oracDbName.attr("id")))]})))},n.prototype.loadOracleDb=function(n){var i,r,t;if(n&&n!=="Not Found"){for(i=[],r=JSON.parse(n),t=0;t<r.length;t++)i.push(r[t].DataBase);this.ejOracDbAutoComp.setModel({dataSource:i})}this.isOracPostBackDb=!1},n.prototype.beforeUpload=function(n){var t={reportDesignerToken:this.dashboardDesigner.authenticationToken,serviceAuthorizationToken:this.dashboardDesigner.model.serviceAuthorizationToken};this.dashboardDesigner.triggerEvents("ajaxBeforeLoad",t);n.xhr.setRequestHeader("reportDesignerToken",t.reportDesignerToken);n.xhr.setRequestHeader("serviceAuthorizationToken",t.serviceAuthorizationToken);this.dashboardDesigner.authenticationToken=t.reportDesignerToken},n.prototype.uploadComplete=function(n){this.filePathText.val(n.files.name);this.filePath=ej.DashboardUtil.getCacheFolder(this.dashboardDesigner.authenticationToken)+n.files.name;this.hideValidationMsg("dbfile")},n.prototype.resetOdbcDbConfig=function(){this.basicPanel.length>0&&this.basicPanel.is(":visible")&&(this.dsnDriverTag&&this.dsnDriverTag.is(":visible")&&this.dsnDriverTag.css("display","none"),this.filePathTag&&this.filePathTag.is(":visible")&&this.filePathTag.css("display","none"),this.sqlConfigTag&&this.sqlConfigTag.is(":visible")&&this.sqlConfigTag.css("display","none"),this.mySqlConfigTag&&this.mySqlConfigTag.is(":visible")&&this.mySqlConfigTag.css("display","none"),this.pSqlConfigTag&&this.pSqlConfigTag.is(":visible")&&this.pSqlConfigTag.css("display","none"),this.oracConfigTag&&this.oracConfigTag.is(":visible")&&this.oracConfigTag.css("display","none"))},n.prototype.resetConfigs=function(){this.basicPanel.length>0&&this.basicPanel.is(":visible")?(this.resetConfig("dbfile"),this.sqlConfigTag&&this.resetConfig("sql"),this.mySqlConfigTag&&this.resetConfig("mysql"),this.pSqlConfigTag&&this.resetConfig("postsql"),this.oracConfigTag&&this.resetConfig("oracle")):this.resetConfig("odbc-advc")},n.prototype.resetConfig=function(n){switch(n){case"dbfile":this.hideValidationMsg("dbfile");this.filePath=null;this.dsnDriver.val("");this.odbcConStr.val("");this.ejOdbcDbAutoComp.model.value="";this.odbcDbTag.find(".odbcDbLabel")[0].innerHTML="DSN Name";this.ejSpecDrpdwn.setModel({value:"Dsn"});this.ejOdbcDbAutoComp.setModel({dataSource:[]});break;case"sql":this.hideValidationMsg("sql");this.sqlUsrName.val("");this.sqlPasswd.val("");this.ejSqlAutoComp.setModel({value:"",dataSource:[]});this.ejSqlDbAutoComp.setModel({value:"",dataSource:[]});this.ejSqlAuthDrpdwn.setModel({value:this.dataSourceLocale.windowsText});break;case"mysql":this.hideValidationMsg("mysql");this.mySqlSerName.val("");this.mySqlPortNo.val("");this.mySqlUsrName.val("");this.mySqlPasswd.val("");this.mySqlDbName.val("");break;case"postsql":this.hideValidationMsg("postsql");this.pSqlSerName.val("");this.pSqlPortNo.val("");this.pSqlUsrName.val("");this.pSqlPasswd.val("");this.pSqlDbName.val("");this.ejPSqlSslDrpdwn.setModel({value:"disable"});break;case"oracle":this.hideValidationMsg("oracle");this.oracSerName.val("");this.oracUsrName.val("");this.oracPasswd.val("");this.oracDbName.val("");this.ejOracDbAutoComp.setModel({value:"",dataSource:[]});break;case"odbc-advc":this.advcOdbcConStr.val("");this.advcPromptCont.val("");this.advcUsrName.val("");this.advcPasswd.val("");this.hideValidationMsg("odbc-advc");this.ejAdvcAuthDrpdwn.setModel({value:this.dataSourceLocale.authentication})}},n.prototype.hideValidationMsgs=function(){this.basicPanel.length>0&&this.basicPanel.is(":visible")?(this.hideValidationMsg("dbfile"),this.sqlConfigTag&&this.hideValidationMsg("sql"),this.mySqlConfigTag&&this.hideValidationMsg("mysql"),this.pSqlConfigTag&&this.hideValidationMsg("postsql"),this.oracConfigTag&&this.hideValidationMsg("oracle")):this.hideValidationMsg("odbc-advc")},n.prototype.hideValidationMsg=function(n){switch(n){case"dbfile":this.dataSource.showValidationMsg(this.odbcDatabase.attr("id"),!1);this.dataSource.showValidationMsg(this.filePathText.attr("id"),!1);this.dataSource.showValidationMsg(this.odbcConStr.attr("id"),!1);break;case"sql":this.dataSource.showValidationMsg(this.sqlSerName.attr("id"),!1);this.dataSource.showValidationMsg(this.sqlUsrName.attr("id"),!1);this.dataSource.showValidationMsg(this.sqlPasswd.attr("id"),!1);this.dataSource.showValidationMsg(this.sqlDbName.attr("id"),!1);break;case"mysql":this.dataSource.showValidationMsg(this.mySqlSerName.attr("id"),!1);this.dataSource.showValidationMsg(this.mySqlPortNo.attr("id"),!1);this.dataSource.showValidationMsg(this.mySqlUsrName.attr("id"),!1);this.dataSource.showValidationMsg(this.mySqlPasswd.attr("id"),!1);this.dataSource.showValidationMsg(this.mySqlDbName.attr("id"),!1);break;case"postsql":this.dataSource.showValidationMsg(this.pSqlSerName.attr("id"),!1);this.dataSource.showValidationMsg(this.pSqlPortNo.attr("id"),!1);this.dataSource.showValidationMsg(this.pSqlUsrName.attr("id"),!1);this.dataSource.showValidationMsg(this.pSqlPasswd.attr("id"),!1);this.dataSource.showValidationMsg(this.pSqlDbName.attr("id"),!1);break;case"oracle":this.dataSource.showValidationMsg(this.oracSerName.attr("id"),!1);this.dataSource.showValidationMsg(this.oracUsrName.attr("id"),!1);this.dataSource.showValidationMsg(this.oracPasswd.attr("id"),!1);this.dataSource.showValidationMsg(this.oracDbName.attr("id"),!1);break;case"odbc-advc":this.dataSource.showValidationMsg(this.advcOdbcConStr.attr("id"),!1);this.dataSource.showValidationMsg(this.advcPromptCont.attr("id"),!1);this.dataSource.showValidationMsg(this.advcUsrName.attr("id"),!1);this.dataSource.showValidationMsg(this.advcPasswd.attr("id"),!1)}},n.prototype.showLoadingIndicator=function(){$("#"+this[0].id+"_dropdown").addClass("e-load");$("#"+this[0].id+"_dropdown>span").removeClass("e-arrow-sans-down")},n.prototype.hideLoadingIndicator=function(){$("#"+this[0].id+"_dropdown").removeClass("e-load");$("#"+this[0].id+"_dropdown>span").addClass("e-arrow-sans-down")},n.prototype.editConfiguration=function(n){if(this.renderConfiguration(this.dataSource.configTable),n)if(this.basicPanel.length>0&&this.basicPanel.is(":visible")){var t=void 0;this.isEdit=!0;this.showConfiguration(!0);this.conStrArgs=this.dataSource.getConStringArgs(n.ConnectionProperties.ConnectString);t="isIntegrated";this.conStrArgs[t]=n.ConnectionProperties.IntegratedSecurity;t="UserName";this.conStrArgs[t]=n.ConnectionProperties.UserName;t="PassWord";this.conStrArgs[t]=n.ConnectionProperties.PassWord;t="constr";this.conStrArgs[t]=n.ConnectionProperties.ConnectString;this.odbcDb?this.loadOdbcDb(this.odbcDb):this.odbcDbFocus(this.ejOdbcDbAutoComp)}else n.ConnectionProperties.ConnectString.length>0&&this.advcOdbcConStr.val(n.ConnectionProperties.ConnectString),this.advcUsrName.val(n.ConnectionProperties.UserName),this.advcPasswd.val(n.ConnectionProperties.PassWord),n.ConnectionProperties.IntegratedSecurity||n.SecurityType!==0&&n.SecurityType!=="None"?!n.ConnectionProperties.IntegratedSecurity&&(!ej.isNullOrUndefined(n.ConnectionProperties.UserName)&&n.ConnectionProperties.UserName.length>0||!ej.isNullOrUndefined(n.ConnectionProperties.PassWord)&&n.ConnectionProperties.PassWord.length>0)?this.ejAdvcAuthDrpdwn.setModel({value:this.dataSourceLocale.authentication}):n.ConnectionProperties.IntegratedSecurity||!ej.isNullOrUndefined(n.ConnectionProperties.Prompt)&&(ej.isNullOrUndefined(n.ConnectionProperties.Prompt)||n.ConnectionProperties.Prompt.length!==0)||n.SecurityType!==2&&n.SecurityType!=="DataBase"?n.ConnectionProperties.IntegratedSecurity||(this.ejAdvcAuthDrpdwn.setModel({value:this.dataSourceLocale.promptText}),this.advcPromptCont.val(!ej.isNullOrUndefined(n.ConnectionProperties.Prompt)&&n.ConnectionProperties.Prompt.length>0?n.ConnectionProperties.Prompt:"Specify the Username and Password for Data Source: "+n.Name)):this.ejAdvcAuthDrpdwn.setModel({value:this.dataSourceLocale.authentication}):this.ejAdvcAuthDrpdwn.setModel({value:this.dataSourceLocale.noneText})},n.prototype.setOdbcDatasource=function(){var n,t;if(this.isEdit=!1,this.conStrArgs.dsn?(n=this.conStrArgs.dsn.value,this.ejSpecDrpdwn.setModel({value:this.conStrArgs.dsn.field}),this.ejOdbcDbAutoComp.setModel({value:this.conStrArgs.dsn.value})):this.conStrArgs.driver&&(n=this.conStrArgs.driver.value.search("{")!==-1||this.conStrArgs.driver.value.search("}")!==-1?this.trimString(this.conStrArgs.driver.value,["{","}"]):this.conStrArgs.driver.value,this.ejSpecDrpdwn.setModel({value:this.conStrArgs.driver.field}),this.ejOdbcDbAutoComp.setModel({value:n})),this.conStrArgs.constr&&this.conStrArgs.uid&&this.conStrArgs.pwd||this.isSupOdbcDb(n.toLowerCase()))this.resetConfig("dbfile"),this.ejSpecDrpdwn.setModel({value:"connectionstring"}),this.odbcConStr.val(this.conStrArgs.constr);else switch(this.getDBType()){case"dbfile":this.conStrArgs.dbq&&this.conStrArgs.dbq.value&&(t=this.conStrArgs.dbq.value.indexOf("\\")>0?this.conStrArgs.dbq.value.substr(this.conStrArgs.dbq.value.lastIndexOf("\\")+1):ej.DashboardUtil.getFileName(this.conStrArgs.dbq.value),this.filePathText.val(t),this.filePath=this.conStrArgs.dbq.value);break;case"sql":this.conStrArgs.server&&this.conStrArgs.server.value&&this.ejSqlAutoComp.setModel({value:this.conStrArgs.server.value});this.conStrArgs.database&&this.conStrArgs.database.value&&this.ejSqlDbAutoComp.setModel({value:this.conStrArgs.database.value});this.conStrArgs.isIntegrated?this.ejSqlAuthDrpdwn.setModel({value:this.dataSourceLocale.windowsText}):(this.ejSqlAuthDrpdwn.setModel({value:this.dataSourceLocale.sqlServerText}),this.sqlUsrName.val(this.conStrArgs.UserName),this.sqlPasswd.val(this.conStrArgs.PassWord));break;case"mysql":this.conStrArgs.server&&this.conStrArgs.server.value&&this.mySqlSerName.val(this.conStrArgs.server.value);this.conStrArgs.database&&this.conStrArgs.database.value&&this.mySqlDbName.val(this.conStrArgs.database.value);this.conStrArgs.UserName&&this.mySqlUsrName.val(this.conStrArgs.UserName);this.conStrArgs.PassWord&&this.mySqlPasswd.val(this.conStrArgs.PassWord);this.conStrArgs.port&&this.conStrArgs.port.value&&this.mySqlPortNo.val(this.conStrArgs.port.value);break;case"postsql":this.conStrArgs.server&&this.conStrArgs.server.value&&this.pSqlSerName.val(this.conStrArgs.server.value);this.conStrArgs.database&&this.conStrArgs.database.value&&this.pSqlDbName.val(this.conStrArgs.database.value);this.conStrArgs.UserName&&this.pSqlUsrName.val(this.conStrArgs.UserName);this.conStrArgs.PassWord&&this.pSqlPasswd.val(this.conStrArgs.PassWord);this.conStrArgs.port&&this.conStrArgs.port.value&&this.pSqlPortNo.val(this.conStrArgs.port.value);this.conStrArgs.sslmode&&this.conStrArgs.sslmode.value&&this.ejPSqlSslDrpdwn.setModel({value:this.conStrArgs.sslmode.value});break;case"oracle":this.conStrArgs.server&&this.conStrArgs.server.value?this.oracSerName.val(this.conStrArgs.server.value):this.conStrArgs.dbq&&this.conStrArgs.dbq.value&&this.oracSerName.val(this.conStrArgs.dbq.value);this.conStrArgs.database&&this.conStrArgs.database.value&&this.oracDbName.val(this.conStrArgs.database.value);this.conStrArgs.UserName&&this.oracUsrName.val(this.conStrArgs.UserName);this.conStrArgs.PassWord&&this.oracPasswd.val(this.conStrArgs.PassWord)}},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName="";n.ConnectionProperties.PassWord="";n.ConnectionProperties.Prompt="";n.SecurityType=t.SecurityType;this.advancePanel.length>0&&this.advancePanel.is(":visible")&&(this.ejAdvcAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.authentication?(n.ConnectionProperties.UserName=t.Username,n.ConnectionProperties.PassWord=t.Password):this.ejAdvcAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText&&(n.ConnectionProperties.Prompt=!ej.isNullOrUndefined(this.advcPromptCont)&&this.advcPromptCont.val().length>0?this.advcPromptCont.val():"Specify the Username and Password for Data Source: "+n.Name))},n.prototype.getDatasourceInfo=function(n){var t=!1,i="DataBase",r,u,f;if(this.hideValidationMsg("odbc-advc"),this.validateConnection())if(this.basicPanel.length>0&&this.basicPanel.is(":visible")){r=this.ejOdbcDbAutoComp.getValue();switch(this.getDBType()){case"dbfile":return{Name:n,Provider:"ODBC",IsIntegrated:t,SecurityType:i,Username:"",Password:"",ConnectionString:this.buildDbFileConn(r)};case"sql":return u="",f="",this.ejSqlAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.sqlServerText?(u=this.sqlUsrName.val(),f=this.sqlPasswd.val()):this.ejSqlAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.windowsText&&(t=!0,i="Integrated"),{Name:n,Provider:"ODBC",IsIntegrated:t,SecurityType:i,Username:u,Password:f,ConnectionString:this.buildSqlConn(r)};case"mysql":return{Name:n,Provider:"ODBC",IsIntegrated:t,SecurityType:i,Username:this.mySqlUsrName.val(),Password:this.mySqlPasswd.val(),ConnectionString:this.buildMySqlConn(r)};case"postsql":return{Name:n,Provider:"ODBC",IsIntegrated:t,SecurityType:i,Username:this.pSqlUsrName.val(),Password:this.pSqlPasswd.val(),ConnectionString:this.buildPSqlConn(r)};case"oracle":return{Name:n,Provider:"ODBC",IsIntegrated:t,SecurityType:i,Username:this.oracUsrName.val(),Password:this.oracPasswd.val(),ConnectionString:this.buildOracleConn(r)};case"constr":return{Name:n,Provider:"ODBC",IsIntegrated:t,SecurityType:"None",Username:"",Password:"",ConnectionString:this.odbcConStr.val()}}}else return u="",f="",this.ejAdvcAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText||this.ejAdvcAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.authentication?(u=this.advcUsrName.val(),f=this.advcPasswd.val()):this.ejAdvcAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.noneText&&(i="None"),{Name:n,Provider:"ODBC",IsIntegrated:t,SecurityType:i,Username:u,Password:f,ConnectionString:this.advcOdbcConStr.val()};return null},n.prototype.validateConnection=function(){var n=!0,i,r,t,u;if(this.basicPanel.length>0&&this.basicPanel.is(":visible"))if(i=this.getDBType(),r=this.odbcDatabase.val(),ej.isNullOrUndefined(r)||r.length===0&&i!=="constr")this.dataSource.showValidationMsg(this.odbcDatabase.attr("id"),!0,"Select the DSN/driver"),n=!1;else switch(i){case"dbfile":t=this.filePathText.val();(ej.isNullOrUndefined(t)||t.length===0||t==="Upload database file")&&(this.dataSource.showValidationMsg(this.filePathText.attr("id"),!0,"Database file is not available"),n=!1);break;case"sql":var f=this.sqlSerName.val(),e=this.sqlDbName.val(),o=this.sqlUsrName.val(),s=this.sqlPasswd.val();(ej.isNullOrUndefined(f)||f.length===0)&&(this.dataSource.showValidationMsg(this.sqlSerName.attr("id"),!0,"Select the SQL server instance"),n=!1);(ej.isNullOrUndefined(e)||e.length===0)&&(this.dataSource.showValidationMsg(this.sqlDbName.attr("id"),!0,"Select the SQL Database"),n=!1);this.ejSqlAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.sqlServerText&&((ej.isNullOrUndefined(o)||o.length===0)&&(this.dataSource.showValidationMsg(this.sqlUsrName.attr("id"),!0,"Specify the Username"),n=!1),(ej.isNullOrUndefined(s)||s.length===0)&&(this.dataSource.showValidationMsg(this.sqlPasswd.attr("id"),!0,"Specify the Password"),n=!1));break;case"mysql":var h=this.mySqlSerName.val(),c=this.mySqlDbName.val(),l=this.mySqlUsrName.val(),a=this.mySqlPasswd.val(),v=this.mySqlPortNo.val();(ej.isNullOrUndefined(h)||h.length===0)&&(this.dataSource.showValidationMsg(this.mySqlSerName.attr("id"),!0,"Specify the MYSQL server instance"),n=!1);(ej.isNullOrUndefined(c)||c.length===0)&&(this.dataSource.showValidationMsg(this.mySqlDbName.attr("id"),!0,"Specify the MYSQL Database"),n=!1);(ej.isNullOrUndefined(l)||l.length===0)&&(this.dataSource.showValidationMsg(this.mySqlUsrName.attr("id"),!0,"Specify the Username"),n=!1);(ej.isNullOrUndefined(a)||a.length===0)&&(this.dataSource.showValidationMsg(this.mySqlPasswd.attr("id"),!0,"Specify the Password"),n=!1);(ej.isNullOrUndefined(v)||v.length===0)&&(this.dataSource.showValidationMsg(this.mySqlPortNo.attr("id"),!0,"Specify the port number"),n=!1);break;case"postsql":var y=this.pSqlSerName.val(),p=this.pSqlDbName.val(),w=this.pSqlUsrName.val(),b=this.pSqlPasswd.val(),k=this.pSqlPortNo.val();(ej.isNullOrUndefined(y)||y.length===0)&&(this.dataSource.showValidationMsg(this.pSqlSerName.attr("id"),!0,"Specify the PostSQL server instance"),n=!1);(ej.isNullOrUndefined(p)||p.length===0)&&(this.dataSource.showValidationMsg(this.pSqlDbName.attr("id"),!0,"Specify the PostSQL Database"),n=!1);(ej.isNullOrUndefined(w)||w.length===0)&&(this.dataSource.showValidationMsg(this.pSqlUsrName.attr("id"),!0,"Specify the Username"),n=!1);(ej.isNullOrUndefined(b)||b.length===0)&&(this.dataSource.showValidationMsg(this.pSqlPasswd.attr("id"),!0,"Specify the Password"),n=!1);(ej.isNullOrUndefined(k)||k.length===0)&&(this.dataSource.showValidationMsg(this.pSqlPortNo.attr("id"),!0,"Specify the port number"),n=!1);break;case"oracle":var d=this.oracSerName.val(),g=this.oracDbName.val(),nt=this.oracUsrName.val(),tt=this.oracPasswd.val();(ej.isNullOrUndefined(d)||d.length===0)&&(this.dataSource.showValidationMsg(this.oracSerName.attr("id"),!0,"Specify the Oracle server instance"),n=!1);(ej.isNullOrUndefined(g)||g.length===0)&&(this.dataSource.showValidationMsg(this.oracDbName.attr("id"),!0,"Specify the Oracle Database"),n=!1);(ej.isNullOrUndefined(nt)||nt.length===0)&&(this.dataSource.showValidationMsg(this.oracUsrName.attr("id"),!0,"Specify the Username"),n=!1);(ej.isNullOrUndefined(tt)||tt.length===0)&&(this.dataSource.showValidationMsg(this.oracPasswd.attr("id"),!0,"Specify the Password"),n=!1);break;case"constr":u=this.odbcConStr.val();(ej.isNullOrUndefined(u)||u.length===0)&&(this.dataSource.showValidationMsg(this.odbcConStr.attr("id"),!0,"Specify the connection string"),n=!1)}else this.advcOdbcConStr.val().length===0&&(this.dataSource.showValidationMsg(this.advcOdbcConStr.attr("id"),!0,"Specify the connection string"),n=!1),this.ejAdvcAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText&&this.advcPromptCont.val().length===0&&(this.dataSource.showValidationMsg(this.advcPromptCont.attr("id"),!0,"Specify the prompt text"),n=!1),(this.ejAdvcAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText||this.ejAdvcAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.authentication)&&(this.advcUsrName.val().length===0&&(this.dataSource.showValidationMsg(this.advcUsrName.attr("id"),!0,"Specify the Username"),n=!1),this.advcPasswd.val().length===0&&(this.dataSource.showValidationMsg(this.advcPasswd.attr("id"),!0,"Specify the Password"),n=!1));return this.dataSource.updateEJComponentSize(),this.dataSource.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer")),n},n.prototype.buildDbFileConn=function(n){var t;return this.isDsnConn?(t="Dsn="+n,this.isDefaultValChanged("")&&!ej.isNullOrUndefined(this.filePath)&&(t="Dsn="+n+";DBQ="+this.filePath)):t="Driver="+n+";DBQ="+this.filePath,t},n.prototype.buildSqlConn=function(n){var t,i=this.ejSqlAutoComp.getValue(),r=this.ejSqlDbAutoComp.getValue();return this.isDsnConn?(t="Dsn="+n,this.isDefaultValChanged("server")&&this.isDefaultValChanged("database")?t+=";Server="+i+";Database="+r:this.isDefaultValChanged("server")?t+=";Server="+i:this.isDefaultValChanged("database")&&(t+=";Database="+r)):t="Driver="+n+";Server="+i+";Database="+r,t},n.prototype.buildMySqlConn=function(n){var t,i=this.mySqlSerName.val(),r=this.mySqlDbName.val(),u=this.mySqlPortNo.val();return this.isDsnConn?(t="Dsn="+n,this.isDefaultValChanged("port")?t+=";Server="+i+";Database="+r+";port="+u:this.isDefaultValChanged("server")&&this.isDefaultValChanged("database")?t+=";Server="+i+";Database="+r:this.isDefaultValChanged("server")?t+=";Server="+i:this.isDefaultValChanged("database")&&(t+=";Database="+r)):t="Driver="+n+";Server="+i+";Database="+r+";port="+u,t},n.prototype.buildPSqlConn=function(n){var t,i=this.pSqlSerName.val(),r=this.pSqlDbName.val(),u=this.pSqlPortNo.val(),f=this.ejPSqlSslDrpdwn.getSelectedValue();return this.isDsnConn?(t="Dsn="+n,this.isDefaultValChanged("sslmode")?t+=";Server="+i+";Database="+r+";port="+u+";sslmode="+f:this.isDefaultValChanged("port")?t+=";Server="+i+";Database="+r+";port="+u:this.isDefaultValChanged("server")&&this.isDefaultValChanged("database")?t+=";Server="+i+";Database="+r:this.isDefaultValChanged("server")?t+=";Server="+i:this.isDefaultValChanged("database")&&(t+=";Database="+r)):t="Driver="+n+";Server="+i+";Database="+r+";port="+u+";sslmode="+f,t},n.prototype.buildOracleConn=function(n){var t,i=this.oracSerName.val(),r=this.oracDbName.val();return this.isDsnConn?(t="Dsn="+n,this.isDefaultValChanged("server")&&this.isDefaultValChanged("database")?t+=";Server="+i+";Database="+r:this.isDefaultValChanged("server")?t+=";Server="+i:this.isDefaultValChanged("database")&&(t+=";Database="+r)):t="Driver="+n+";Dbq="+i+";Database="+r,t},n.prototype.showConfiguration=function(n){this.odbcConfig.css("display",n?"table-row":"none");this.odbcConfig.children().show();this.showBasicPanel(!n)},n.prototype.showBasicPanel=function(n){n?(this.basicPanel.css("display","table-row"),this.advancePanel.css("display","none")):(this.basicPanel.css("display","none"),this.advancePanel.css("display","table-row"))},n.prototype.getDBType=function(){var i=this,n=this.odbcDatabase.val().toLowerCase(),t;return(this.odbcDb!==null&&this.isDsnConn&&(t=this.odbcDb.DsnNames.filter(function(n){return n.Name.toLowerCase()===i.odbcDatabase.val().toLowerCase()})[0],n=t?t.DSNDriverName.toLowerCase():""),this.odbcConType.val()==="connectionstring")?"constr":n.search("sql server")!==-1?"sql":n.search("mysql")!==-1?"mysql":n.search("postgresql")!==-1?"postsql":n.search("oracle")!==-1?"oracle":n?"dbfile":void 0},n.prototype.isDefaultValChanged=function(n){var r=this,t,i=!1;if(this.odbcDb!==null){t=this.odbcDb.DsnNames.filter(function(n){return n.Name===r.ejOdbcDbAutoComp.getValue()})[0];switch(this.getDBType()){case"dbfile":i=this.filePathText.val()!==(ej.isNullOrUndefined(t.DSNFilePath)?null:t.DSNFilePath.substr(t.DSNFilePath.lastIndexOf("\\")+1));break;case"sql":i=n==="server"?this.ejSqlAutoComp.getValue()!==t.DSNServerName:this.ejSqlDbAutoComp.getValue()!==t.DSNDatabase;break;case"mysql":i=n==="port"?this.mySqlPortNo.val()!==t.DSNPort:n==="server"?this.mySqlSerName.val()!==t.DSNServerName:this.mySqlDbName.val()!==t.DSNDatabase;break;case"postsql":i=n==="sslmode"?this.ejPSqlSslDrpdwn.getSelectedValue()!==t.DSNSslMode:n==="port"?this.pSqlPortNo.val()!==t.DSNPort:n==="server"?this.pSqlSerName.val()!==t.DSNServerName:this.pSqlDbName.val()!==t.DSNDatabase;break;case"oracle":i=n==="server"?this.oracSerName.val()!==t.DSNServerName:this.ejOracDbAutoComp.getValue()!==t.DSNDatabase}}return i},n.prototype.isSupOdbcDb=function(n){return!ej.isNullOrUndefined(this.odbcDb)&&(this.isDsnConn&&this.odbcDb.DsnNames.filter(function(t){return t.Name.toLowerCase()===n})[0]||this.odbcDb.OdbcDrivers.filter(function(t){return t.Name.toLowerCase()===n})[0])?!1:!0},n.prototype.trimString=function(n,t){for(var i=0;i<t.length;i++)n=n.replace(t[i],"");return n},n}();window.ej.createObject("ej.DashboardDesignerUtility.ODBCDataSource",InternalODBCDataSource,window);InternalOLEDBDataSource=function(){function n(){this.datasource=ejDashboardDesigner.getInstance("DataSource");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.dataSourceLocale=this.dashboardDesigner.locale.dataSource}return Object.defineProperty(n,"OLEDBDataSource",{get:function(){return(this.oledbdataSource===null||this.oledbdataSource===undefined)&&(this.oledbdataSource=new ej.DashboardDesignerUtility.OLEDBDataSource),this.oledbdataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n){n.find("#"+this.id+"_oledb_datasource").length>0?this.resetConfiguration():(this.oleDbConfig=ej.buildTag("div","",{width:"100%",height:"100%",display:"table-row"},{id:this.id+"_oledb_datasource"}),n.append(this.oleDbConfig),this.renderOleDbPanel(),this.changedAuthentication({text:this.dataSourceLocale.authentication}));this.showConfiguration(!0)},n.prototype.renderOleDbPanel=function(){this.oleDbPanel=ej.buildTag("div","",{width:"100%",height:"100%",display:"table-row"},{id:this.id+"_oledb_panel"});var n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+"_oledb_config"}),t=this.dataSourceLocale.authentication,i=this.dataSourceLocale.promptText,r=this.dataSourceLocale.noneText,u=[{id:t.toLowerCase(),text:t,value:t},{id:i.toLowerCase(),text:i,value:i},{id:r.toLowerCase(),text:r,value:r}];this.oleDbConfig.append(this.oleDbPanel);this.oleDbPanel.append(n);this.datasource.renderTextArea("Connection String",this.id+"_oledb_conStr",n);this.datasource.renderDropDownItem("Authentication Type",this.id+"_oledb_authtype",n,u,{id:"id",text:"text",value:"value"},"0");this.datasource.renderTextBoxItem("Prompt Text",this.id+"_oledb_prompt",!1,n,426);this.datasource.renderTextBoxItem("Username",this.id+"_oledb_usr",!1,n,426);this.datasource.renderTextBoxItem("Password",this.id+"_oledb_pswd",!0,n,426);$("#"+this.id+"_oledb_authtype")&&(this.ejAuthDrpdwn=$("#"+this.id+"_oledb_authtype").data("ejDropDownList"),this.ejAuthDrpdwn.model.change=$.proxy(this.changedAuthentication,this));this.promptTag=$("#"+this.id+"_oledb_prompt_tr");this.conncString=$("#"+this.id+"_oledb_conStr");this.promptCont=$("#"+this.id+"_oledb_prompt");this.userName=$("#"+this.id+"_oledb_usr");this.passWord=$("#"+this.id+"_oledb_pswd");this.userNameTag=$("#"+this.id+"_oledb_usr_tr");this.passWordTag=$("#"+this.id+"_oledb_pswd_tr")},n.prototype.changedAuthentication=function(n){this.hideValidationMsg();this.promptTag.css("display","none");this.userNameTag.css("display","none");this.passWordTag.css("display","none");(n.text===this.dataSourceLocale.authentication||n.text===this.dataSourceLocale.promptText)&&(this.userNameTag.css("display","table-row"),this.passWordTag.css("display","table-row"));n.text===this.dataSourceLocale.promptText&&this.promptTag.css("display","table-row");this.datasource.updateEJComponentSize();this.datasource.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.editConfiguration=function(n){this.hideValidationMsg();this.renderConfiguration(this.datasource.configTable);this.conncString.val(n.ConnectionProperties.ConnectString);this.userName.val(n.ConnectionProperties.UserName);this.passWord.val(n.ConnectionProperties.PassWord);n.ConnectionProperties.IntegratedSecurity||n.SecurityType!==0&&n.SecurityType!=="None"?!n.ConnectionProperties.IntegratedSecurity&&(!ej.isNullOrUndefined(n.ConnectionProperties.UserName)&&n.ConnectionProperties.UserName.length>0||!ej.isNullOrUndefined(n.ConnectionProperties.PassWord)&&n.ConnectionProperties.PassWord.length>0)?this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.authentication}):n.ConnectionProperties.IntegratedSecurity||!ej.isNullOrUndefined(n.ConnectionProperties.Prompt)&&(ej.isNullOrUndefined(n.ConnectionProperties.Prompt)||n.ConnectionProperties.Prompt.length!==0)||n.SecurityType!==2&&n.SecurityType!=="DataBase"?n.ConnectionProperties.IntegratedSecurity||(this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.promptText}),this.promptCont.val(!ej.isNullOrUndefined(n.ConnectionProperties.Prompt)&&n.ConnectionProperties.Prompt.length>0?n.ConnectionProperties.Prompt:"Specify the Username and Password for DataSource: "+n.Name)):this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.authentication}):this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.noneText})},n.prototype.showConfiguration=function(n){this.oleDbConfig.css("display",n?"table-row":"none")},n.prototype.hideValidationMsg=function(){this.datasource.showValidationMsg(this.conncString.attr("id"),!1);this.datasource.showValidationMsg(this.promptCont.attr("id"),!1);this.datasource.showValidationMsg(this.userName.attr("id"),!1);this.datasource.showValidationMsg(this.passWord.attr("id"),!1)},n.prototype.resetConfiguration=function(){this.conncString.val("");this.promptCont.val("");this.userName.val("");this.passWord.val("");this.hideValidationMsg();this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.authentication})},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName="";n.ConnectionProperties.PassWord="";n.ConnectionProperties.Prompt="";n.SecurityType=t.SecurityType;this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.authentication?(n.ConnectionProperties.UserName=t.Username,n.ConnectionProperties.PassWord=t.Password):this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText&&(n.ConnectionProperties.Prompt=!ej.isNullOrUndefined(this.promptCont)&&this.promptCont.val().length>0?this.promptCont.val():"Specify the Username and Password for Data Source: "+n.Name)},n.prototype.getDatasourceInfo=function(n){var t=!0,i="",r="",u="None";return(this.hideValidationMsg(),this.conncString.val().length===0&&(this.datasource.showValidationMsg(this.conncString.attr("id"),!0,"Specify the connection string"),t=!1),this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText&&this.promptCont.val().length===0&&(this.datasource.showValidationMsg(this.promptCont.attr("id"),!0,"Specify the Prompt Text"),t=!1),(this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText||this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.authentication)&&(i=this.userName.val(),r=this.passWord.val(),i.length===0&&(this.datasource.showValidationMsg(this.userName.attr("id"),!0,"Specify the User Name"),t=!1),r.length===0&&(this.datasource.showValidationMsg(this.passWord.attr("id"),!0,"Specify the Password"),t=!1),u="DataBase"),t)?{Name:n,Provider:"OLEDB",IsIntegrated:!1,SecurityType:u,Username:i,Password:r,ConnectionString:this.conncString.val()}:null},n}();window.ej.createObject("ej.DashboardDesignerUtility.OLEDBDataSource",InternalOLEDBDataSource,window);InternalORACLEDataSource=function(){function n(){this.lastServerName="";this.defaultPort="1521";this.connectionType="";this.datasource=ejDashboardDesigner.getInstance("DataSource");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.dataSourceLocale=this.dashboardDesigner.locale.dataSource;this.field={id:"id",text:"text",value:"value"};this.extractionMode=ej.DashboardDesignerUtility.Serialization.enumToString(ExtractionMode,ExtractionMode.Live)}return Object.defineProperty(n,"ORACLEDataSource",{get:function(){return(this.oracleDataSource===null||this.oracleDataSource===undefined)&&(this.oracleDataSource=new ej.DashboardDesignerUtility.ORACLEDataSource),this.oracleDataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n,"ORACLEReconnectDataSource",{get:function(){return(this.oracleReconnectDataSource===null||this.oracleReconnectDataSource===undefined)&&(this.oracleReconnectDataSource=new ej.DashboardDesignerUtility.ORACLEDataSource),this.oracleReconnectDataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n,t){this.connectionType=t;n.find("#"+this.id+this.connectionType+"_oracle_datasource").length>0?this.resetConfiguration():(this.oracleConfig=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType+"_oracle_datasource"}),n.append(this.oracleConfig),this.renderBasicPanel());this.showConfiguration(!0)},n.prototype.renderBasicPanel=function(){var t=this.getRefreshSettingsJson(),n;this.basicPanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType+"_oracle_basicpanel"});n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+this.connectionType+"_oracle_basic_config"});this.oracleConfig.append(this.basicPanel);this.basicPanel.append(n);this.datasource.renderTextBoxItem("Server Name",this.id+this.connectionType+"_oracle_servername",!1,n,426);this.datasource.renderTextBoxItem("Service Instance Name",this.id+this.connectionType+"_oracle_service",!1,n,426,null,null,null,"Optional");this.datasource.renderNumericItem("Port",this.id+this.connectionType+"_oracle_port",n,null,this,this.dsName,!0,"439px");this.datasource.renderTextBoxItem("Username",this.id+this.connectionType+"_oracle_username",!1,n,426);this.datasource.renderTextBoxItem("Password",this.id+this.connectionType+"_oracle_passwd",!0,n,426);this.renderExtractionMode(this.dataSourceLocale.mode,this.id+this.connectionType+"_oracle_extrat_mode",n,426);this.datasource.renderExtractModeMessageItem(this.dashboardDesigner.locale.dataSource.extractModeMessage.replace("{0}","50000"),this.id+this.connectionType+"_oracle_extract_message",n);this.datasource.renderAccordionItem("Database",this.id+this.connectionType+"_oracle_dbname",n,this.oracleDBfocus,null,this);this.datasource.renderDropDownItem("Refresh Settings",this.id+this.connectionType+"_oracle_refresh",n,t,this.field,"0");this.oracleServer=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_servername");this.oracleService=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_service");this.oracleUsrName=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_username");this.oracleDatabase=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_dbname");this.oraclePasswrd=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_passwd");this.refreshIntervel=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_refresh");this.oraclePasswrdTag=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_passwd_tr");this.oracleUsrNameTag=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_username_tr");this.refreshIntervelTag=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_refresh_tr");this.extractMessageTag=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_extract_message_tr");this.portData=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_port").data("ejNumericTextbox");this.portData.option("value",this.defaultPort);this.port=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_port");this.portTag=this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_port_tr");this.ejOracleDbAutoComp=this.oracleDatabase.data("ejAutocomplete");this.dsNameId=this.id+this.connectionType+"_datasource_dsname";this.dsName=this.oracleConfig.find("#"+this.dsNameId).val();this.wiredEvents();this.oraclePasswrd.parent("#"+this.id+this.connectionType+"_oracle_dbname_wrapper").css("width","433px");this.refreshIntervelTag.css("display","none");this.extractMessageTag.css("display","none")},n.prototype.renderExtractionMode=function(n,t,i){var r=$("<tr id="+t+"_tr/>"),u=$("<td unselectable='on'/>");r.append(u);i.append(r);var s=ej.buildTag("label.editLabel e-designer-title-label",n,{width:"100px",height:"100%",float:"left","box-sizing":"border-box","padding-left":"5px"},{id:this.id+this.connectionType+"_oracle_basicpanel_extractMode"}),f=ej.buildTag("div","",{width:"calc(100% - 100px)",height:"100%",float:"right"},{id:this.id+this.connectionType+"_oracle_basicpanel_extractMode"}),e=ej.buildTag("div","",{width:"50%",height:"100%",float:"left"},{id:this.id+this.connectionType+"_oracle_basicpanel_extractMode_live"}),o=ej.buildTag("div","",{width:"50%",height:"100%",float:"left"},{id:this.id+this.connectionType+"_oracle_basicpanel_extractMode_extract"});f.append(e,o);u.append(s,f);this.renderRadioItem(this.dashboardDesigner.locale.dataSource.live,this.id+this.connectionType+"_oracle_extract_mode_live","extractmode",e,!0);this.renderRadioItem(this.dashboardDesigner.locale.dataSource.extract,this.id+this.connectionType+"_oracle_extract_mode_extract","extractmode",o,!1)},n.prototype.renderRadioItem=function(n,t,i,r,u){var f=ej.buildTag("input","",{},{type:"radio",name:i,id:t});r.append(f);f.ejRadioButton({checked:u,change:$.proxy(this.extractModeChange,this,n),text:n})},n.prototype.extractModeChange=function(n,t){var i=t.model.text===this.dashboardDesigner.locale.dataSource.live?ExtractionMode.Live:ExtractionMode.Extract;this.extractionMode=ej.DashboardDesignerUtility.Serialization.enumToString(ExtractionMode,i);this.extractionMode.toLowerCase()==="live"?(this.refreshIntervelTag.css("display","none"),this.extractMessageTag.css("display","none")):(this.refreshIntervelTag.css("display","table-row"),this.extractMessageTag.css("display","table-row"));this.datasource.updateDSConfigContainer()},n.prototype.getRefreshSettingsJson=function(){var t=ejDashboardDesigner.getInstance("DashboardDesigner").previewFeaturesJson,n=ej.DashboardUtil.getInstance().GetPreviewFeatureValue(t,PreviewFeatureName.RefreshSettings);return ej.isNullOrUndefined(n)?[{id:"never",text:"Never",value:"Never"},{id:"1hours",text:"1 Hour",value:"OneHours"},{id:"6hours",text:"6 Hours",value:"SixHours"},{id:"12hours",text:"12 Hours",value:"TwelveHours"},{id:"24hours",text:"24 Hours",value:"TwentyFourHours"},{id:"1week",text:"1 Week",value:"OneWeek"},{id:"1month",text:"1 Month",value:"OneMonth"}]:n},n.prototype.inputFocus=function(n,t){var i=ej.isNullOrUndefined(t)?null:$(t.currentTarget).attr("id");this.hideValidationMsg(i)},n.prototype.onUserFocusIn=function(){this.oldOracleUserName=this.oracleUsrName.val();this.oldOraclePassword=this.oraclePasswrd.val()},n.prototype.onUserFocusOut=function(){var n=this.oracleUsrName.val(),t=this.oraclePasswrd.val();(this.oldOracleUserName!==n||this.oldOraclePassword!==t)&&this.ejOracleDbAutoComp.setModel({dataSource:[]})},n.prototype.onPortFocusIn=function(){this.oraclePort=this.port.val()},n.prototype.onPortFocusOut=function(){var n=this.port.val();this.oraclePort!==n&&this.ejOracleDbAutoComp.setModel({dataSource:[]})},n.prototype.wiredEvents=function(){this.oracleUsrName.on("focusin",$.proxy(this.onUserFocusIn,this));this.oracleUsrName.on("focusout",$.proxy(this.onUserFocusOut,this));this.oraclePasswrd.on("focusin",$.proxy(this.onUserFocusIn,this));this.oraclePasswrd.on("focusout",$.proxy(this.onUserFocusOut,this));this.oracleService.on("focusin",$.proxy(this.oracleServerFocusIn,this));this.oracleService.on("focusout",$.proxy(this.oracleServerFocusOut,this));this.oracleServer.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oracleService.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oracleUsrName.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oracleDatabase.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oraclePasswrd.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.port.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oracleServer.on("focusin",$.proxy(this.oracleServerFocusIn,this));this.oracleServer.on("focusout",$.proxy(this.oracleServerFocusOut,this));this.port.on("focusin",$.proxy(this.onPortFocusIn,this));this.port.on("focusout",$.proxy(this.onPortFocusOut,this))},n.prototype.unWiredEvents=function(){this.oracleUsrName.off("focusin",$.proxy(this.onUserFocusIn,this));this.oracleUsrName.off("focusout",$.proxy(this.onUserFocusOut,this));this.oraclePasswrd.off("focusin",$.proxy(this.onUserFocusIn,this));this.oraclePasswrd.off("focusout",$.proxy(this.onUserFocusOut,this));this.oracleService.off("focusin",$.proxy(this.oracleServerFocusIn,this));this.oracleService.off("focusout",$.proxy(this.oracleServerFocusOut,this));this.oracleServer.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oracleService.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oracleUsrName.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oracleDatabase.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oraclePasswrd.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.port.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.oracleServer.off("focusin",$.proxy(this.oracleServerFocusIn,this));this.oracleServer.off("focusout",$.proxy(this.oracleServerFocusOut,this));this.port.off("focusin",$.proxy(this.onPortFocusIn,this));this.port.off("focusout",$.proxy(this.onPortFocusOut,this))},n.prototype.destroy=function(){this.unWiredEvents()},n.prototype.hideValidationMsg=function(n){(ej.isNullOrUndefined(this.oracleServer)||this.oracleServer.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.oracleServer.attr("id"),!1);(ej.isNullOrUndefined(this.oracleDatabase)||this.oracleDatabase.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.oracleDatabase.attr("id"),!1);(ej.isNullOrUndefined(this.oracleUsrName)||this.oracleUsrName.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.oracleUsrName.attr("id"),!1);(ej.isNullOrUndefined(this.oraclePasswrd)||this.oraclePasswrd.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.oraclePasswrd.attr("id"),!1);(ej.isNullOrUndefined(this.port)||this.port.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.port.attr("id"),!1)},n.prototype.resetConfiguration=function(){var n,t;this.hideValidationMsg();this.oracleServer.val("");this.oracleService.val("");this.oracleUsrName.val("");this.oraclePasswrd.val("");this.portData.option("value",this.defaultPort);this.ejOracleDbAutoComp.clearText();this.ejOracleDbAutoComp.setModel({value:"",dataSource:[]});this.lastServerName="";n=this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_oracle_extract_mode_live").data("ejRadioButton");ej.isNullOrUndefined(n)||n.option("checked",!0);t=this.refreshIntervel.data("ejDropDownList");ej.isNullOrUndefined(t)||t.selectItemByValue("Never")},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.ServerName=t.ServerName;n.ConnectionProperties.UserName=t.Username;n.ConnectionProperties.PassWord=t.Password;n.ConnectionProperties.DSNName=t.DSNName;n.ConnectionProperties.Driver=t.Driver;n.ConnectionProperties.Database=t.Database;n.ConnectionProperties.Service=t.Service;n.ConnectionProperties.Port=t.Port;n.SecurityType=t.SecurityType;n.ServerName=t.ServerName;n.RefreshInterval=t.RefreshInterval;n.Mode=t.Mode;n.Mode.toLowerCase()!=="live"||ej.isNullOrUndefined(n.ExtractionParams)||(n.ExtractionParams=null)},n.prototype.UpdateDataSourceInfo=function(n,t){this.UpdateDSInfo(n,t)},n.prototype.editConfiguration=function(n,t){this.renderConfiguration(n,"_editConnection");t&&(t.ConnectionProperties.IsDesignState||(this.oracleUsrName.val(t.ConnectionProperties.UserName),this.portData.option("value",t.ConnectionProperties.Port),this.oracleServer.val(t.ConnectionProperties.ServerName),t.ConnectionProperties.Database&&this.ejOracleDbAutoComp.setModel({value:t.ConnectionProperties.Database}),ej.isNullOrUndefined(t.Mode)||(this.setExtractMode(t.Mode),t.Mode.toLowerCase()!=="extract"||ej.isNullOrUndefined(t.RefreshInterval)||this.setRefreshInterval(t.RefreshInterval))));this.hideValidationMsg()},n.prototype.setRefreshInterval=function(n){this.refreshIntervel.data("ejDropDownList").selectItemByValue(n)},n.prototype.setExtractMode=function(n){var t=this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_oracle_extract_mode_"+n.toLowerCase()).data("ejRadioButton");t.option("checked",!0);ej.isNullOrUndefined(n)||(this.extractionMode=n)},n.prototype.showConfiguration=function(n){this.oracleConfig.css("display",n?"table-row":"none");this.oracleConfig.children().show()},n.prototype.getDatabaseVal=function(){var n=this.ejOracleDbAutoComp.getValue();return n?n:this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_dbname").val()},n.prototype.oracleServerFocusIn=function(){this.lastServerName=this.oracleServer.val();this.lastServiceName=this.oracleService.val()},n.prototype.oracleServerFocusOut=function(){var n=this.oracleServer.val(),t=this.oracleService.val();(this.lastServerName!==n||this.lastServiceName!==t)&&this.ejOracleDbAutoComp.setModel({dataSource:[]})},n.prototype.getDatasourceInfo=function(n,t,i){var r=!0,u="",f="",e=!0,o="Integrated";this.hideValidationMsg(i);var s="Never",h=this.oracleServer.val(),l=this.oracleService.val(),c=this.getDatabaseVal(),a=this.portData.option("value");return(h.length===0&&(this.oracleServer.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.oracleServer.attr("id"),!0,"Specify the server name"),r=!1),c.length===0&&(this.oracleDatabase.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.oracleDatabase.attr("id"),!0,"Specify the database name"),r=!1),u=this.oracleUsrName.val(),f=this.oraclePasswrd.val(),o="DataBase",e=!1,u.length===0&&(this.oracleUsrName.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.oracleUsrName.attr("id"),!0,"Specify the Username"),r=!1),f.length===0&&(this.oraclePasswrd.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.oraclePasswrd.attr("id"),!0,"Specify the Password"),r=!1),this.extractionMode.toLowerCase()!=="live"&&(s=this.refreshIntervel.data("ejDropDownList").getSelectedValue()),r)?{Name:n,Provider:"Oracle",IsIntegrated:e,SecurityType:o,IsDesignState:!1,Database:c,Service:l,Username:u,Password:f,Port:a,ServerName:h,Mode:this.extractionMode,RefreshInterval:s}:null},n.prototype.oracleDBfocus=function(n){var e;if(!(n.model.dataSource&&n.model.dataSource.length>0)&&!this.isPostBackDB){var t=this.oracleServer.val(),o=this.oracleService.val(),s=this.portData.option("value");if(t){var i="",r="",u=!0,f="Integrated";i=this.oracleUsrName.val();r=this.oraclePasswrd.val();u=!1;f="DataBase";this.isPostBackDB=!0;e={Provider:"Oracle",IsIntegrated:u,SecurityType:f,Service:o,IsDesignState:!1,Parameters:null,Headers:null,Username:ej.DashboardUtil.encryptData(i),Password:ej.DashboardUtil.encryptData(r),Port:s,ServerName:t,Mode:this.extractionMode};ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.dataBases,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.dataBases,datasource:e})},{fnction:$.proxy(this.loadoracleDB,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!0)}}},n.prototype.showLoadingIndicator=function(){this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_dbname_dropdown>span").removeClass("e-search");this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_dbname_dropdown>span").addClass("e-load").addClass("e-input");this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_dbname_dropdown>span").css("background-position","center")},n.prototype.hideLoadingIndicator=function(){this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_dbname_dropdown>span").removeClass("e-input").removeClass("e-load");this.oracleConfig.find("#"+this.id+this.connectionType+"_oracle_dbname_dropdown>span").addClass("e-search")},n.prototype.loadoracleDB=function(n){var u,i,r,t;if(n.Error)u=ej.isNullOrUndefined(n.Message)?n.Message:n.Message.replace("Sf_Exception - ",""),ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.alertDialog,u,IconType.errors,AlertType.Alert,!1,null);else if(n&&n!=="Not Found"){for(i=[],r=JSON.parse(n),t=0;t<r.length;t++)i.push(r[t].DataBase);this.ejOracleDbAutoComp.setModel({dataSource:i});this.ejOracleDbAutoComp.open()}this.isPostBackDB=!1},n}();window.ej.createObject("ej.DashboardDesignerUtility.ORACLEDataSource",InternalORACLEDataSource,window);InternalParameter=function(){function n(){this.id=null;this.cultureFormat="en-US";this.parameters=[];this.isEdit=!1;this.paramUlTag=null;this.creationUI=null;this.designerTag=null;this.configMenuTag=null;this.availParamTag=null;this.defParamTag=null;this.drpDwnDtType=null;this.drpDwnVisible=null;this.listContainer=null;this.bodyContainer=null;this.newParamContainer=null;this.nullTag=null;this.multiValTag=null;this.allowBlank=null;this.assignDialog=null;this.id=ejDashboardDesigner.getInstance("DashboardDesigner")._id;this.rdlParser=ejDashboardDesigner.getInstance("RDLParser");this.parameters=this.rdlParser.rdlJsonObj.ReportParameters;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner")}return Object.defineProperty(n,"Parameter",{get:function(){return ej.isNullOrUndefined(this.reportParameter)&&(this.reportParameter=new ej.DashboardDesignerUtility.Parameter),this.reportParameter},enumerable:!0,configurable:!0}),n.prototype.isLoaded=function(){return!ej.isNullOrUndefined(this.targetTag)},n.prototype.updateParameterJSON=function(){this.parameters=this.rdlParser.rdlJsonObj.ReportParameters},n.prototype.renderContainer=function(n){this.targetTag=n;var t=ej.buildTag("div.e-reportdesigner-designer-configuration","",{width:"100%",height:"100%"},{id:this.id+"_param_Container"});this.targetTag.append(t);this.renderParameterPanel(t)},n.prototype.isConfigWizard=function(){return this.designerTag.is(":visible")?!0:!1},n.prototype.showParameter=function(n,t){$("#"+this.id+"_param_Container").css("display",n?"block":"none");n&&this.designerTag.is(":visible")&&(this.creationUI.css("display","block"),this.designerTag.css("display","none"));t.isParameter&&(this.updateSize(),t.isParameter=!1)},n.prototype.renderParameterPanel=function(n){var t=this.creationUI=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{width:"100%",height:"100%",display:"block",position:"relative","background-color":"white"},{id:this.id+"_parameterList"}),i=this.designerTag=ej.buildTag("div","",{width:"100%",height:"100%",display:"none","background-color":"white"},{id:this.id+"_createParameter"});n.append(t);n.append(i);this.renderParameterList(t);this.renderNewParameter(i);this.populateReportParameters();this.updateSize()},n.prototype.renderParameterList=function(n){var i=ej.buildTag("div","",{width:"100%",height:"35px",display:"block",overflow:"hidden"},{id:this.id+"_param_Hdr_Container"}),t=this.bodyContainer=ej.buildTag("div.e-lv e-js e-parentlv e-designer-hint-newparameter e-dbrd-designer-scroller e-dbrd-control","",{width:"100%",display:"block","margin-left":"1px","background-color":"white"},{id:this.id+"_paramBdy_Container"}),r=ej.buildTag("div","",{width:"100%",height:"63px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_param_Footr_Container"}),o=ej.buildTag("span.e-designer-header e-designer-cursor","PARAMETERS",{padding:"8.5px 7px 7px 0px",overflow:"hidden",display:"inline-block"}),s=ej.buildTag("span.e-designer-header-icon e-reportdesigner-configuration-parameters e-designer-cursor","",{display:"inline-block",float:"left",padding:"7px 11px"},{}),u=ej.buildTag("div","",{},{}),f=this.listContainer=ej.buildTag("div.e-list-container e-js e-widget e-reportdesigner-dataset","",{"border-top-width":"1px",padding:"0px 3px"},{id:this.id+"_div_paramList"}),h=this.paramUlTag=ej.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"}),c=ej.buildTag("div.e-designer-new-btn-footer","",{margin:"8px","margin-bottom":"12px"}),e=ej.buildTag("button.e-designer-newparam-btn e-designer-button e-dbrd-hand-cursor","NEW PARAMETER",{"padding-right":"3px"},{id:this.id+"_btn_New_Param"});i.append(o);i.append(s);r.append(c);f.append(h);u.append(f);t.append(u);r.append(e);n.append(i);n.append(t);n.append(r);e.ejButton({showRoundedCorner:!1,contentType:ej.ContentType.TextAndImage,prefixIcon:"e-icon e-plus",size:"small",click:$.proxy(this.parameterSelection,this,"New")});t.ejScroller({scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});this.renderContextMenu(t)},n.prototype.renderContextMenu=function(n){var t=this.configMenuTag=ej.buildTag("ul.e-designer-menu","",{},{id:this.id+"_param_dsConfigMenu"});t.append("<li><a class='e-reportdesigner-menu-list'>Edit<\/a><\/li>");t.append("<li><a class='e-reportdesigner-menu-list'>Delete<\/a><\/li>");n.append(t);t.ejMenu({menuType:ej.MenuType.ContextMenu,openOnClick:!1,ontextMenuTarget:this.creationUI,width:100,click:$.proxy(this.contextMenuClick,this)})},n.prototype.renderNewParameter=function(n){var i=ej.buildTag("div","",{width:"100%",height:"30px",display:"block",overflow:"hidden","background-color":"white"},{id:this.id+"_create_Hdr_Container"}),r=this.newParamContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{width:"100%",display:"block","background-color":"white"},{id:this.id+"_createParam_Bdy_Container"}),u=ej.buildTag("div","",{},{}),t=ej.buildTag("div","",{width:"100%",height:"63px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_create_param_Footr"}),h=ej.buildTag("span.e-designer-header e-designer-cursor","NEW PARAMETER",{overflow:"hidden",display:"inline-block",padding:"8.5px 7px 7px 0px"},{id:this.id+"_span_text_header"}),c=ej.buildTag("span.e-designer-header-icon e-reportdesigner-configuration-parameters e-designer-cursor","",{display:"inline-block",float:"left",padding:"7px 11px",cursor:"auto"},{}),l=ej.buildTag("div.e-designer-new-btn-footer","",{margin:"8px","margin-bottom":"9px"}),f=ej.buildTag("div","",{width:"50%",height:"100%",display:"block",overflow:"none",float:"left"},{}),e=ej.buildTag("div","",{width:"50%",height:"100%",display:"block",overflow:"none",float:"left"},{}),o=ej.buildTag("button.e-designer-content e-designer-button e-designer-connect-btn e-designer-savebtn e-dbrd-hand-cursor","Save",{},{id:this.id+"_param_btn_Save"}),s=ej.buildTag("button.e-designer-content e-designer-button e-designer-back-btn e-designer-savebtn e-dbrd-hand-cursor","Cancel",{},{id:this.id+"_param_btn_cancel"});i.append(h);i.append(c);t.append(l);r.append(u);t.append(f);t.append(e);f.append(o);e.append(s);n.append(i);n.append(r);n.append(t);this.populateNewParameter(u);o.ejButton({showRoundedCorner:!1,contentType:ej.ContentType.TextAndImage,prefixIcon:"e-shrink",size:"small",click:$.proxy(this.onSaveParameter,this)});s.ejButton({showRoundedCorner:!1,contentType:ej.ContentType.TextAndImage,prefixIcon:"e-reply",size:"small",click:$.proxy(this.onCancelParameter,this,!0)});r.ejScroller({scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.populateNewParameter=function(n){var i=ej.buildTag("div","",{width:"100%",display:"inline-block",height:"auto"},{id:this.id+"_basic_panel_div"}),t=ej.buildTag("table.e-designer-param-table","",{"margin-left":"7px","margin-bottom":"6px",width:"100%"},{unselectable:"on",id:this.id+"_basic_panel_table"});this.renderTextBoxItem("Name",this.id+"_param_name",t,this.getValidParameter());this.renderTextBoxItem("Prompt",this.id+"_param_prompt",t,this.getValidParameter());this.renderDropDownList("Data Type",this.id+"_param_dataType",t,[{name:"String"},{name:"Boolean"},{name:"DateTime"},{name:"Integer"},{name:"Float"}],0);this.renderCheckboxItem("Allow blank value ('')",this.id+"_param_blnkVal",t,"3px 0px 5px 5px");this.renderCheckboxItem("Allow null value",this.id+"_param_nullVal",t,"5px 0px 5px 5px");this.renderCheckboxItem("Allow multiple values",this.id+"_param_multVal",t,"5px 0px 5px 5px");this.renderDropDownList("Visibility",this.id+"_param_visibilty",t,[{name:"Visible"},{name:"Hidden"},{name:"Internal"}],0);var r=ej.buildTag("tr","",{},{}),u=ej.buildTag("td","",{"padding-top":"10px"},{}),f=ej.buildTag("a.e-designer-fontfamily","Assign Value >>",{"font-size":"12px","font-weight":"600",margin:"3px","margin-top":"4px","margin-left":"5px",color:"#3a99fb"},{href:"javascript:void(0);",color:"#0B0080",id:this.id+"_param_assign_values"});n.append(i);i.append(t);t.append(r);r.append(u);u.append(f);f.bind("click",$.proxy(this.openAssignDialog,this));this.drpDwnDtType=$("#"+this.id+"_param_dataType");this.drpDwnVisible=$("#"+this.id+"_param_visibilty");this.nullTag=$("#"+this.id+"_param_nullVal");this.allowBlank=$("#"+this.id+"_param_blnkVal");this.multiValTag=$("#"+this.id+"_param_multVal");this.drpDwnDtType.data("ejDropDownList").setModel({change:$.proxy(this.onDropDownChange,this)})},n.prototype.getLabelCaption=function(n,t){var i=ej.buildTag("tr","",{}),u=ej.buildTag("td","",{}),f=ej.buildTag("label.editLabel e-designer-title-label",n,{}),r;return u.append(f),i.append(u),r=ej.buildTag("td","",{"padding-right":"18px"},{id:t+"_error_icon_td"}),ej.DashboardUtil.renderErrIndictor(r,this.id),i.append(r),i},n.prototype.renderTextBoxItem=function(n,t,i,r){var o=ej.buildTag("tr","",{},{id:t+"_tr"}),s=ej.buildTag("td","",{}),u,f,e,h;o.append(s);i.append(o);u=ej.buildTag("table","",{width:"100%"},{unselectable:"on"});s.append(u);u.append(this.getLabelCaption(n,t));f=ej.buildTag("tr","",{});e=ej.buildTag("td","",{},{colspan:"2",id:t+"_td"});u.append(f);f.append(e);h=ej.buildTag("input.e-textbox e-designer-textbox-border e-designer-content-label","",{height:"25px",width:"216px"},{edittype:"stringedit",id:t,type:"text",value:r});e.append(h)},n.prototype.renderDropDownList=function(n,t,i,r,u){var c=ej.buildTag("tr","",{},{id:t+"_tr"}),l=ej.buildTag("td","",{}),f,e,o,s,h;c.append(l);i.append(c);f=ej.buildTag("table","",{width:"100%"},{unselectable:"on"});l.append(f);f.append(this.getLabelCaption(n,t));e=ej.buildTag("tr","",{});o=ej.buildTag("td","",{"padding-bottom":"5px"},{colspan:"2",id:t+"_td"});f.append(e);e.append(o);s=ej.buildTag("div","",{float:"left",margin:"1px","margin-top":"0px"},{id:t+"_parameter_li"});h=ej.buildTag("input","",{},{id:t});s.append(h);o.append(s);h.ejDropDownList({dataSource:r,fields:{text:"name"},selectedIndex:u,width:"228px",height:"28px",showRoundedCorner:!0,cssClass:"e-reportdesigner-dataset-selection  e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control"})},n.prototype.renderCheckboxItem=function(n,t,i,r){var f=ej.buildTag("tr","",{id:t+"_tr"}),e=ej.buildTag("td","",{align:"left",padding:r},{}),u;f.append(e);i.append(f);u=ej.buildTag("input","",{},{type:"checkbox",id:t});e.append(u);u.ejCheckBox({cssClass:"e-designer-param-assign e-designer-param-checktxt",text:n})},n.prototype.renderRadioItem=function(n,t,i,r,u){var f=ej.buildTag("td","",{}),e;f.css("width","119px");u.append(f);e=ej.buildTag("input","",{},{type:"radio",name:i,id:t});f.append(e);e.ejRadioButton({checked:r,change:$.proxy(this.changeOptions,this,n),text:n})},n.prototype.renderAvailableParameters=function(){var r=$("#"+this.id+"_assign_parent_div"),n=this.availParamTag=ej.buildTag("div.e-reportdesigner-designer-parameters","",{width:"100%",display:"block"},{id:this.id+"_availParameters"}),i=ej.buildTag("table.e-designer-param-table","",{"margin-top":"6px","margin-left":"6px"},{unselectable:"on"}),t;n.append(i);t=ej.buildTag("tr","",{});i.append(t);this.renderRadioItem("None",this.id+"_avail_none","avail",!0,t);this.renderRadioItem("Specify Value",this.id+"_avail_specify","avail",!1,t);this.renderRadioItem("Query Value",this.id+"_avail_qury","avail",!1,t);this.renderNoneFields(n,this.id+"_avail_none_container","avail");this.renderSetValuePanel(n,this.id+"_avail_val_container","avail");this.renderQueryPanel(n,this.id+"_avail_qury_container","avail");r.append(n)},n.prototype.renderQueryPanel=function(n,t,i){for(var tt,r,it,u,v,e,y=ejDashboardDesigner.getInstance("DataSet").datasets,p=[],ot=i==="avail"?"available":"default",c=0;c<y.length;c++)p.push({name:y[c].Name});var l=ej.buildTag("div","",{width:"auto",height:"100%",display:"none",overflow:"auto","margin-left":"8px"},{id:t}),w=ej.buildTag("div","",{},{}),b=ej.buildTag("table.e-designer-param-table","",{width:"100%"},{unselectable:"on"}),k=ej.buildTag("tr","",{"padding-top":"10px"},{}),d=ej.buildTag("td","",{},{}),st=ej.buildTag("Label.e-designer-add-label","Choose the dataSet and fields for the "+ot+" values :",{},{type:"label"}),g=ej.buildTag("div","",{height:"250px",width:"581px",overflow:"auto"},{}),nt=ej.buildTag("div","",{}),a=ej.buildTag("table.e-designer-param-table","",{width:"100%"},{}),o=ej.buildTag("tr","",{},{}),s=ej.buildTag("td","",{},{});i==="avail"?s.css({width:"52px"}):s.css({width:"25px"});tt=ej.buildTag("Label.e-designer-fontfamily","Dataset",{"font-size":"12px","font-color":"#303541","font-weight":"600"},{type:"label"});r=ej.buildTag("td","",{"padding-left":"19px"},{});i==="avail"?r.css({width:"52px"}):r.css({width:"66px"});it=ej.buildTag("Label.e-designer-fontfamily","Value Field",{"font-size":"12px","font-color":"#303541","font-weight":"600"},{type:"label"});u=ej.buildTag("td","",{},{});i==="avail"?u.css({width:"46px","padding-left":"20px"}):u.css({width:"46px","padding-left":"15px"});var ht=ej.buildTag("Label.e-designer-fontfamily","Label Field",{"font-size":"12px","font-color":"#303541","font-weight":"600"},{type:"label"}),f=ej.buildTag("tr","",{},{}),h=ej.buildTag("td","",{},{});i==="avail"?h.css("width","20px"):h.css("width","6px");v=ej.buildTag("input","",{},{type:"text",id:this.id+"_"+i+"_qury_dtset"});e=ej.buildTag("td","",{"padding-left":"19px"},{});i==="avail"?e.css({width:"20px"}):e.css({width:"290px"});var rt=ej.buildTag("input","",{},{type:"text",id:this.id+"_"+i+"_qury_dtsetVal"}),ut=ej.buildTag("td","",{"padding-left":"19px"},{}),ft=ej.buildTag("input","",{},{type:"text",id:this.id+"_"+i+"_qury_dtsetLbl"}),et=ej.buildTag("td","",{"padding-top":"1px"},{id:this.id+"_"+i+"_param_query_td"});ej.DashboardUtil.renderErrIndictor(et,this.id);n.append(l);l.append(w);w.append(b);b.append(k);k.append(d);d.append(st);l.append(g);g.append(nt);nt.append(a);a.append(o);o.append(s);s.append(tt);o.append(r);r.append(it);a.append(f);f.append(h);h.append(v);f.append(e);e.append(rt);i.toLowerCase()==="avail"&&(o.append(u),u.append(ht),f.append(ut),ut.append(ft));f.append(et);v.ejDropDownList({dataSource:p,fields:{text:"name"},enabled:!0,width:"162px",height:"26px",change:$.proxy(this.onValueChange,this,i),cssClass:"e-reportdesigner-dataset-selection e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",watermarkText:"Choose Dataset Value",showRoundedCorner:!0});rt.ejDropDownList({dataSource:[],fields:{text:"name"},enabled:!1,width:"162px",height:"26px",showRoundedCorner:!0,cssClass:"e-reportdesigner-dataset-selection e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",watermarkText:"Choose Value"});ft.ejDropDownList({dataSource:[],fields:{text:"name"},enabled:!1,width:"162px",height:"26px",showRoundedCorner:!0,cssClass:"e-reportdesigner-dataset-selection e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",watermarkText:"Choose Label"})},n.prototype.renderSetValuePanel=function(n,t,i){var l=i==="avail"?"available":"default",u=ej.buildTag("div","",{width:"auto",height:"100%",display:"none","margin-top":"0px",overflow:"auto","margin-left":"12px"},{id:t}),o=ej.buildTag("div","",{},{}),s=ej.buildTag("table","",{},{}),f=ej.buildTag("tr","",{"padding-top":"10px"},{}),h=ej.buildTag("td","",{width:"520px"},{}),a=ej.buildTag("Label.e-designer-add-label","Add the "+l+" values for parameters:",{},{type:"label"}),r=ej.buildTag("div","",{cursor:"pointer",float:"right"},{}),c=ej.buildTag("td","",{},{}),v=ej.buildTag("span.e-chk-image e-icon e-plus e-designer-add-icon","",{},{id:this.id+"_"+i+"_add_span"}),y=ej.buildTag("span.e-btntxt e-designer-add-btn ","ADD",{},{}),e=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control e-designer-border-dialog","",{margin:"0px 0px 4px 0px",height:"250px",width:"571px",padding:"5px 0px"},{id:this.id+"_"+i+"_val_parent"}),p=ej.buildTag("div.e-items","",{},{id:this.id+"_"+i+"_container_div"});n.append(u);u.append(o);o.append(s);s.append(f);f.append(h);h.append(a);f.append(c);c.append(r);r.append(v);r.append(y);u.append(e);e.append(p);e.ejScroller({height:"250px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});r.bind("click",$.proxy(this.renderSetValueFields,this,i))},n.prototype.renderSetValueFields=function(n){var k=$("#"+this.id+"_"+n+"_container_div"),u=$("#"+this.id+"_"+n+"_val_parent"),d="e-reportdesigner-parameter-"+n+"-row",t=ej.getGuid(this.id+"_row_"),g=ejDashboardDesigner.getInstance("DragOnDrop"),f=ej.buildTag("div","",{padding:"4px"},{id:t,rowId:t,"class":d+" e-drag-row"}),c,s,l,b;k.append(f);var a=ej.buildTag("table.e-designer-table-dialog","",{width:"100%"},{}),i=ej.buildTag("tr","",{height:"36px"},{}),v=ej.buildTag("td","",{width:"12px"},{}),y=ej.buildTag("div.e-widgeticons e-reportdesigner-double-drag e-draggable e-js e-pinch e-assign-value e-designer-double-drag","",{display:"inline-block","line-height":"2"},{id:t+"_"+n+"_iconspan"}),e=ej.buildTag("td","",{width:"60px"},{id:t+"_"+n+"_lbl_txtCol"}),r=ej.buildTag("input.e-textbox e-designer-textbox-border e-designer-border ","",{height:"20px"},{type:"text",id:t+"_"+n+"_lbl_txt"}),h=ej.buildTag("td","",{width:"20px","padding-left":"14px"},{});n.toLowerCase()==="avail"?ej.DashboardUtil.txtWaterMark(r,"Label"):ej.DashboardUtil.txtWaterMark(r,"Choose Default Value");n.toLowerCase()==="avail"?r.css("width","167px"):r.css("width","200px");n.toLowerCase()==="avail"?e.css("width","60px"):e.css("width","20px");n.toLowerCase()==="avail"?h.css("padding-right","0px"):h.css("padding-right","241px");f.append(a);a.append(i);i.append(v);v.append(y);i.append(e);e.append(r);i.append(h);var p=ej.buildTag("td","",{width:"60px","padding-right":"5px"},{}),w=ej.buildTag("span.e-chk-image e-icon e-cross-circle e-designer-delete-icon","",{cursor:"default","padding-top":"4px"},{id:t+"_"+n+"_del_icon"}),o=ej.buildTag("td","",{},{});return n.toLowerCase()==="avail"?o.css({width:"60px","padding-left":"4px"}):o.css({width:"60px","padding-left":"28px"}),c=ej.buildTag("input.e-textbox e-designer-textbox-border e-designer-border","",{height:"20px",width:"167px"},{type:"text",id:t+"_"+n+"_value_txt"}),ej.DashboardUtil.txtWaterMark(c,"Value"),s=ej.buildTag("td.e-reportdesigner-box-sizing","",{width:"20px",display:"none","padding-left":"14px","padding-right":"47px","margin-top":"1px"},{id:t+"_"+n+"_txtCol_exp"}),l=ej.buildTag("td","",{"padding-top":"1px",width:"50px"},{id:t+"_param_error_td"}),ej.DashboardUtil.renderErrIndictor(l,this.id),n.toLowerCase()==="avail"&&(i.append(o),o.append(c),i.append(s)),n.toLowerCase()==="avail"?s.css({display:"inline-block"}):s.css({display:"none"}),i.append(l),i.append(p),p.append(w),w.bind("click",$.proxy(this.deleteRow,this,f,u)),g.initializeSortable(y,f,this.id+"_assign_dialog",this.id+"_"+n+"_val_parent"),b=$("#"+this.id+"_"+n+"_container_div").height(),u.height()>b?u.find(".e-content").removeClass("e-content"):this.scrollerRefresh(u),t},n.prototype.renderNoneFields=function(n,t){var i=ej.buildTag("div","",{border:"1px solid white","border-radius":"2px",margin:"0px 0px 0px 12px",height:"274px",width:"584px",padding:"5px 0px",display:"block"},{id:t});n.append(i)},n.prototype.renderDefaultParameters=function(){var r=$("#"+this.id+"_assign_parent_div"),n=this.defParamTag=ej.buildTag("div.e-reportdesigner-designer-parameters","",{width:"auto",display:"none"},{id:this.id+"_defParameters"}),i=ej.buildTag("table.e-designer-param-table","",{"margin-top":"6px","margin-left":"6px"},{unselectable:"on"}),t;n.append(i);t=ej.buildTag("tr","",{});i.append(t);this.renderRadioItem("None",this.id+"_def_none","def",!0,t);this.renderRadioItem("Specify Value",this.id+"_def_specify","def",!1,t);this.renderRadioItem("Query Value",this.id+"_def_qury","def",!1,t);this.renderNoneFields(n,this.id+"_def_none_container","def");this.renderSetValuePanel(n,this.id+"_def_val_container","def");this.renderQueryPanel(n,this.id+"_def_qury_container","def");r.append(n)},n.prototype.renderAssignDialog=function(){var i=this.assignDialog=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{height:"auto"},{title:"Parameter",id:this.id+"_assign_dialog"}),r=ej.buildTag("div","",{width:"100%"},{id:this.id+"_assign_parent_div"}),n=ej.buildTag("ul","",{},{}),t=ej.buildTag("li","",{width:"127px",height:"30px","list-style":"none"},{}),h=ej.buildTag("a.e-designer-param-assign e-designer-param-tab","Available Value",{},{href:"#"+this.id+"_assign_parent_div"}),f=ej.buildTag("li","",{height:"30px","list-style":"none"},{}),c=ej.buildTag("a.e-designer-param-assign e-designer-param-tab","Default Value",{},{href:"#"+this.id+"_assign_parent_div"}),e=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_assign_btn_cancel"}),o=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_param_btn_ok"}),s,u;i.append(r);r.append(n);n.append(t);t.append(h);n.append(f);f.append(c);$(document.body).append(i);i.ejDialog({width:"auto",minWidth:600,height:"auto",minHeight:410,enableResize:!1,showOnInit:!1,showHeader:!0,enableModal:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",showFooter:!0,close:$.proxy(ej.DashboardUtil.closeDialog,this)});r.ejTab({itemActive:$.proxy(this.onTabActive,this)});s=$("#"+this.id+"_assign_dialog_foot");s.append(e).append(o);u=this.dashboardDesigner.locale.dialogOptions;o.ejButton({showRoundedCorner:!1,size:"mini",text:u.okButtonText,click:$.proxy(this.saveDialogValues,this,!0)});e.ejButton({showRoundedCorner:!1,size:"mini",text:u.cancelButtonText,click:$.proxy(this.closeDialog,this,!0)});this.renderAvailableParameters();this.renderDefaultParameters();n.css("height",t.height()+parseInt(t.css("border-bottom-width"),10))},n.prototype.contextMenuClick=function(n){var t=this.configMenuTag.attr("parameter");switch(n.text){case"Edit":this.editParameter(t);break;case"Delete":ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.parameter,this.dashboardDesigner.locale.dataSource.deleteReportParam+t+this.dashboardDesigner.locale.dataSource.questionmark,IconType.information,AlertType.Alert,!1,"",{dataInfo:{name:t},instance:this,method:"deletConfirmation"})}},n.prototype.deletConfirmation=function(n,t){n&&!ej.isNullOrUndefined(t)&&this.removeParameter(t.name)},n.prototype.onValueChange=function(n,t){var u=ejDashboardDesigner.getInstance("DataSet").datasets,r,f,i;for(n.toLowerCase()==="avail"?(r=$("#"+this.id+"_avail_qury_dtsetVal").data("ejDropDownList"),f=$("#"+this.id+"_avail_qury_dtsetLbl").data("ejDropDownList")):n.toLowerCase()==="def"&&(r=$("#"+this.id+"_def_qury_dtsetVal").data("ejDropDownList")),i=0;i<u.length;i++)if(u[i].Name===t.selectedText){ej.isNullOrUndefined(r)||(r.setModel({fields:{id:"Name",text:"Name",value:"Name"}}),r.setModel({dataSource:u[i].Fields,enabled:!0}));ej.isNullOrUndefined(f)||(f.setModel({fields:{id:"Name",text:"Name",value:"Name"}}),f.setModel({dataSource:u[i].Fields,enabled:!0}));break}},n.prototype.parameterSelection=function(){this.resetParamUI();$("#"+this.id+"_span_text_header").text("NEW PARAMETER");this.creationUI.css("display","none");this.designerTag.css("display","block");$("#"+this.id+"_param_name").val(this.getValidParameter());$("#"+this.id+"_param_prompt").val(this.getValidParameter());this.parameter=this.createParameter();this.scrollerRefresh(this.newParamContainer);this.updateControlSize()},n.prototype.onDropDownChange=function(n){var t=this.drpDwnDtType.data("ejDropDownList").getSelectedValue();n.isInteraction&&((ej.isNullOrUndefined(this.parameter)||ej.isNullOrUndefined(this.parameter.DefaultValue))&&ej.isNullOrUndefined(this.parameter.ValidValues)||t!==this.getDataType(this.parameter.DataType)&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.parameter,this.dashboardDesigner.locale.parameterMessages.changeParameter,IconType.warning,AlertType.Confirm,!1,"",{instance:this,method:"discardValue"}));t==="String"?this.allowBlank.data("ejCheckBox").enable():this.allowBlank.data("ejCheckBox").disable()},n.prototype.discardValue=function(n){if(n){var t=this.drpDwnDtType.data("ejDropDownList").getSelectedValue();this.parameter.ValidValues=null;this.parameter.DefaultValue=null;this.parameter.DataType=this.getDataTypeVal(t)}else this.drpDwnDtType.data("ejDropDownList").selectItemByText(this.getDataType(this.parameter.DataType))},n.prototype.changeSelection=function(n,t){n&&(t.toLowerCase()==="allownull"?this.nullTag.data("ejCheckBox").setModel({checked:this.parameter.Nullable}):this.allowBlank.data("ejCheckBox").setModel({checked:this.parameter.AllowBlank}),this.onSaveParameter())},n.prototype.resetParamUI=function(){$("#"+this.id+"_param_name").val("");$("#"+this.id+"_param_prompt").val("");this.parameterItem=this.isEdit?this.parameterItem:null;this.isEdit?this.drpDwnDtType.data("ejDropDownList").setModel({selectedIndex:-1}):this.drpDwnDtType.data("ejDropDownList").setModel({selectedIndex:0});this.drpDwnVisible.data("ejDropDownList").setModel({selectedIndex:0});this.allowBlank.data("ejCheckBox").setModel({checked:!1});this.nullTag.data("ejCheckBox").setModel({checked:!1});this.multiValTag.data("ejCheckBox").setModel({checked:!1});this.hideValidationMsg();!ej.isNullOrUndefined(this.assignDialog)&&this.assignDialog.data("ejDialog")&&this.resetDialogValues()},n.prototype.hideValidationMsg=function(){this.renderValidation(this.id+"_param_name",!1);this.renderValidation(this.id+"_param_prompt",!1)},n.prototype.onSaveParameter=function(){if(this.validateParamFields()){this.parameter.Name=$("#"+this.id+"_param_name").val();this.parameter.Prompt=$("#"+this.id+"_param_prompt").val();var t=this.drpDwnDtType.data("ejDropDownList").option("itemValue"),n=this.drpDwnVisible.data("ejDropDownList").model.value;this.parameter.DataType=this.getDataTypeVal(t);this.parameter.AllowBlank=t.toLowerCase()==="string"?this.allowBlank.data("ejCheckBox").model.checked:!1;n==="Hidden"?this.parameter.Hidden=!0:n==="Visible"?this.parameter.Hidden=!1:n==="Internal"&&(this.parameter.Hidden=!0,this.parameter.Prompt=null);this.parameter.Nullable=this.nullTag.data("ejCheckBox").model.checked;this.parameter.MultiValue=this.multiValTag.data("ejCheckBox").model.checked;this.creationUI.css("display","block");this.designerTag.css("display","none");this.scrollerRefresh(this.bodyContainer);this.scrollerRefresh(this.newParamContainer);this.isEdit?this.updateParameter(this.parameterItem,this.parameter):this.addParameter(this.parameter);this.isEdit=!1}else return},n.prototype.onCancelParameter=function(){this.creationUI.css("display","block");this.designerTag.css("display","none");this.closeDialog();this.isEdit=!1},n.prototype.updateSize=function(){if(this.isLoaded()){$("#"+this.id+"_param_Container").height($("#"+this.id+"_designerConfigurationPanel").height());var n=$("#"+this.id+"_param_Container").height()-($("#"+this.id+"_param_Hdr_Container").height()+$("#"+this.id+"_param_Footr_Container").height()),t=$("#"+this.id+"_param_Container").height()-($("#"+this.id+"_create_Hdr_Container").height()+$("#"+this.id+"_create_param_Footr").height());this.bodyContainer.height(n);this.newParamContainer.height(t);this.bodyContainer.data("ejScroller")&&(this.bodyContainer.data("ejScroller").setModel({height:n+"px"}),this.bodyContainer.data("ejScroller").refresh());this.newParamContainer.data("ejScroller")&&(this.newParamContainer.data("ejScroller").setModel({height:t+"px"}),this.newParamContainer.data("ejScroller").refresh());this.updateControlSize()}},n.prototype.updateControlSize=function(){$("#"+this.id+"_basic_panel_div").height()>this.newParamContainer.height()?($("#"+this.id+"_param_name").css("width","208px"),$("#"+this.id+"_param_prompt").css("width","208px"),this.drpDwnDtType.data("ejDropDownList").setModel({width:"218px"}),this.drpDwnVisible.data("ejDropDownList").setModel({width:"218px"})):($("#"+this.id+"_param_name").css("width","216px"),$("#"+this.id+"_param_prompt").css("width","216px"),this.drpDwnDtType.data("ejDropDownList").setModel({width:"228px"}),this.drpDwnVisible.data("ejDropDownList").setModel({width:"228px"}))},n.prototype.changeOptions=function(n){var t=$("#"+this.id+"_avail_val_container"),i=$("#"+this.id+"_avail_qury_container"),r=$("#"+this.id+"_def_val_container"),u=$("#"+this.id+"_def_qury_container"),f=$("#"+this.id+"_def_none_container"),e=$("#"+this.id+"_avail_none_container");n.toLowerCase()==="specify value"&&$("#"+this.id+"_avail_specify").data("ejRadioButton").model.checked?(t.css("display","block"),i.css("display","none"),e.css("display","none")):n.toLowerCase()==="query value"&&$("#"+this.id+"_avail_qury").data("ejRadioButton").model.checked?(i.css("display","block"),t.css("display","none"),e.css("display","none")):n.toLowerCase()==="none"&&$("#"+this.id+"_avail_none").data("ejRadioButton").model.checked&&(t.css("display","none"),i.css("display","none"),e.css("display","block"));n.toLowerCase()==="specify value"&&$("#"+this.id+"_def_specify").data("ejRadioButton").model.checked?(r.css("display","block"),u.css("display","none"),f.css("display","none")):n.toLowerCase()==="query value"&&$("#"+this.id+"_def_qury").data("ejRadioButton").model.checked?(u.css("display","block"),r.css("display","none"),f.css("display","none")):n.toLowerCase()==="none"&&$("#"+this.id+"_def_none").data("ejRadioButton").model.checked&&(r.css("display","none"),u.css("display","none"),f.css("display","block"))},n.prototype.onTabActive=function(n){var t,i;n.activeHeader.innerText==="Available Value"?(this.availParamTag.css("display","block"),this.defParamTag.css("display","none"),t=$("#"+this.id+"_avail_val_parent"),i=$("#"+this.id+"_avail_container_div").height()):n.activeHeader.innerText==="Default Value"&&(this.availParamTag.css("display","none"),this.defParamTag.css("display","block"),t=$("#"+this.id+"_def_val_parent"),i=$("#"+this.id+"_def_container_div").height());t.height()>i?t.find(".e-content").removeClass("e-content"):this.scrollerRefresh(t)},n.prototype.validateParameter=function(n){for(var t=0;t<this.parameters.length;t++)if(this.parameters[t].Name===n)return!1;return!0},n.prototype.getValidParameter=function(){for(var t="ReportParameter",i="ReportParameter1",n=0;n<=this.parameters.length;n++)if(this.validateParameter(t+(n+1))){i=t+(n+1);break}return i},n.prototype.validateParamFields=function(){var n=$("#"+this.id+"_param_name").val(),t=$("#"+this.id+"_param_prompt").val(),i=$("#"+this.id+"_def_container_div .e-reportdesigner-parameter-def-row"),r=this.drpDwnVisible.data("ejDropDownList").model.value,u=this.nullTag.data("ejCheckBox").model.checked,f=this.parameter.Nullable,e=this.allowBlank.data("ejCheckBox").model.checked,o=this.parameter.AllowBlank;if(n.length===0||t.length===0)return this.renderValidation(this.id+"_param_name",n.length===0,"Please enter the name"),r!=="Internal"?(this.renderValidation(this.id+"_param_prompt",t.length===0,"Please enter the value"),!1):(this.renderValidation(this.id+"_param_prompt",!1),!0);if(this.validateParameter(n)||this.isEdit)if(/^[a-zA-Z0-9-_]*$/.test(n)){if(this.nullTag.data("ejCheckBox").isChecked()&&this.multiValTag.data("ejCheckBox").isChecked())return ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.parameter,this.dashboardDesigner.locale.parameterMessages.multilevelCannotIncludeNull,IconType.warning,AlertType.Alert,!1,""),!1;if(i.length>1&&!$("#"+this.id+"_param_multVal").data("ejCheckBox").model.checked)return ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.parameter,this.dashboardDesigner.locale.parameterMessages.multipleValues,IconType.warning,AlertType.Alert,!1,""),!1;if(!this.parameter.Nullable||u===f||ej.isNullOrUndefined(this.parameter.ValidValues)||!ej.isNullOrUndefined(this.parameter.DefaultValue)){if(this.parameter.AllowBlank&&e!==o&&!(ej.isNullOrUndefined(this.parameter.ValidValues)||!ej.isNullOrUndefined(this.parameter.DefaultValue)))return ej.DashboardUtil.getInstance().alertDialog("Parameter",this.dashboardDesigner.locale.parameterMessages.blankCheck,IconType.warning,AlertType.Confirm,!1,"",{method:"changeSelection",instance:this,dataInfo:"allowblank"}),!1}else return ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.parameter,this.dashboardDesigner.locale.parameterMessages.nullCheck,IconType.warning,AlertType.Confirm,!1,"",{method:"changeSelection",instance:this,dataInfo:"allownull"}),!1}else return this.renderValidation(this.id+"_param_name",!0,this.dashboardDesigner.locale.parameterMessages.nameHasSpecialChar),!1;else return this.renderValidation(this.id+"_param_name",!0,"The name "+n+" already exists"),!1;return!0},n.prototype.validateExpValue=function(n){if(ej.DashboardUtil.contains(n,"[",!0)||ej.DashboardUtil.contains(n,"]",!0)){if(/^-?\[(?=.*[a-zA-Z])[a-zA-Z0-9@]{1,1000}\]$/.test(n)){if(ej.DashboardUtil.contains(n,"@",!0)&&n.indexOf("@")!==1)return!1}else return!1;return!0}},n.prototype.validateQueryValues=function(n,t){var i="",r=$("#"+this.id+"_"+t+"_qury_dtset_container"),u=$("#"+this.id+"_"+t+"_qury_dtsetVal_container");return ej.isNullOrUndefined(n)||(ej.isNullOrUndefined(n.dataSetName)?(i+="Dataset field is required. ",this.updateHighlighter(r,!0)):this.updateHighlighter(r,!1),!ej.isNullOrUndefined(n.dataSetName)&&ej.isNullOrUndefined(n.valueFieldName)?(i+="Value field is required. ",this.updateHighlighter(u,!0)):this.updateHighlighter(u,!1)),i},n.prototype.validateParamValues=function(n,t,i,r){var f=this.drpDwnDtType.data("ejDropDownList").option("itemValue"),o=this.nullTag.data("ejCheckBox").isChecked(),u="",e;return ej.isNullOrUndefined(n)||(n==="\\"?u+="The entered value in the "+t+" field is not a valid token syntax.":ej.DashboardUtil.contains(n,"[",!0)||ej.DashboardUtil.contains(n,"]",!0)?this.validateExpValue(n)||(u+="The entered value in the "+t+" field is not a valid token syntax."):t.toLowerCase()==="value"&&(n==="(Null)"&&o===!1&&(u+="In "+t+" field, A null value was specified. The parameter does not allow null values."),f.toLowerCase()==="string"?n!==""||this.allowBlank.data("ejCheckBox").isChecked()||(u+="The "+t+" field is blank. The parameter does not allow blank values."):f.toLowerCase()==="boolean"?u+=n.toLowerCase()==="true"||n.toLowerCase()==="false"?"":"Value is not a boolean value. ":f.toLowerCase()==="integer"?(e=/^-?[0-9]*[1-9][0-9]*$/,e.test(n)||(u+="Value is not an integer. ")):f.toLowerCase()==="float"?(e=/^[0-9]+(\.)?[0-9]*$/,e.test(n)||(u+="Value is not a float. ")):f.toLowerCase()==="datetime"&&(u+=n.toLowerCase()==="invalid format"?"Value is an invalid date format.":"")),ej.isNullOrUndefined(u)||u.length!==0?(r.removeClass("e-designer-textbox-border").addClass("e-designer-border"),this.updateHighlighter(r,!0)):(this.updateHighlighter(r,!1),r.addClass("e-designer-textbox-border").addClass("e-designer-border"))),u},n.prototype.updateHighlighter=function(n,t){t?n.addClass("e-designer-error").addClass("e-designer-error-radius"):n.removeClass("e-designer-error").removeClass("e-designer-error-radius")},n.prototype.getDateValue=function(n){for(var i=["dd/MM/yyyy","M/d/yyyy","M/d/yy","MM/dd/yy","MM/dd/yyyy","yyyy-MM-dd","dd-MMM-yy","dddd,MMMM d,yyyy","MMMM d,yyyy","dddd,d MMMM,yyyy","d MMMM,yyyy","d MMMM yyyy","MMMM dd yyyy","dd-MMM-yyyy","MMM dd yyyy","dd-MM-yyyy","ddd MMM d yyyy","d/M/yy"],t=0;t<i.length;t++)if(ej.parseDate(n,i[t],this.cultureFormat))return ej.parseDate(n,i[t],this.cultureFormat).toDateString();return"Invalid format"},n.prototype.populateReportParameters=function(){if(this.paramUlTag.empty(),this.parameters=this.rdlParser.rdlJsonObj.ReportParameters,!ej.isNullOrUndefined(this.parameters)&&this.parameters.length>0)for(var n=0;n<this.parameters.length;n++)this.getAppendItem(this.parameters[n].Name,this.getDataType(this.parameters[n].DataType));this.showParameterHint()},n.prototype.updateParameter=function(n,t){if(this.updateItem(n,t),!ej.isNullOrUndefined(this.parameters)&&this.parameters.length>0)for(var i=0;i<this.parameters.length;i++)if(this.parameters[i].Name===n.Name){this.parameters[i]=t;break}ejDashboardDesigner.editManager.addCmdAction(CommandAction.ParameterEdit,"updateParameter","Parameter","",[t,n],[n,t])},n.prototype.updateItem=function(n,t){var i=n.Name,r=t.Name,u,f,e;n.DataType!==t.DataType&&(u=this.getDataTypeStyle(this.getDataType(n.DataType)),f=this.getDataTypeStyle(this.getDataType(t.DataType)),$("#"+this.id+"_li_param"+i).find(".e-designer-datatype-icon").removeClass(u),$("#"+this.id+"_li_param"+r).find(".e-designer-datatype-icon").addClass(f));e=$("#"+this.id+"_designerConfigurationPanel").width()-84;$("#"+this.id+"_li_param"+i).unbind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableEdit,this,i));$("#"+this.id+"_li_param"+i).unbind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableEdit,this,i));$("#"+this.id+"_li_param"+i).find(".e-title-tip").unbind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(ej.DashboardUtil.getInstance().tagOverTip,this,i));$("#"+this.id+"_li_param"+i).find(".e-title-tip").unbind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(ej.DashboardUtil.getInstance().tagOutTip,this,i));$("#"+this.id+"_li_param"+i+" .e-chk-image").unbind("click",$.proxy(this.editParameterItem,this,i));$("#"+this.id+"_li_param"+i+" .e-list-text").text(r);$("#"+this.id+"_param_"+i).unbind("click",$.proxy(this.editParameterItem,this,i));$("#"+this.id+"_li_param"+i).attr("name",r);$("#"+this.id+"_li_param"+i).attr("id",this.id+"_li_param"+r);$("#"+this.id+"_param_"+i).attr("id",this.id+"_param_"+r);$("#"+this.id+"_li_param"+r).bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableEdit,this,r));$("#"+this.id+"_li_param"+r).bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableEdit,this,r));$("#"+this.id+"_li_param"+r+" .e-chk-image").bind("click",$.proxy(this.editParameterItem,this,r));$("#"+this.id+"_param_"+r).bind("click",$.proxy(this.editParameterItem,this,r));ej.DashboardUtil.textWidth(r,"segoe ui 12px")>=e?$("#"+this.id+"_li_param"+r).find(".e-designer-param-text").addClass("e-title-tip"):$("#"+this.id+"_li_param"+r).find(".e-designer-param-text").removeClass("e-title-tip")},n.prototype.addParameters=function(n){for(var i,r,t=0;t<n.length;t++)if(this.isExistParameter(n[t]))for(i=0;i<n.length;i++)for(r=0;r<this.parameters.length;r++)this.parameters[r].Name===n[i].Name&&this.updateParameter(this.parameters[i],n[i]);else this.parameters.push(n[t]),this.isLoaded()&&(this.getAppendItem(n[t].Name,this.getDataType(n[t].DataType)),this.updateContainerBorder(),this.showParameterHint()),ejDashboardDesigner.editManager.addCmdAction(CommandAction.ParametersAdd,"removeParameters","Parameter","",[n,n.length-1],[n])},n.prototype.removeParameters=function(n){var r=[],i,t;if(!ej.isNullOrUndefined(n)&&n.length>0)for(i=0;i<n.length;i++)if(!ej.isNullOrUndefined(this.parameters)&&this.parameters.length>0)for(t=this.parameters.length-1;t>=0;t--)if(this.parameters[t].Name===n[i].Name){r.push(this.parameters[t]);this.isLoaded()&&(this.paramUlTag.find("#"+this.id+"_li_param"+this.parameters[t].Name).remove(),this.updateContainerBorder(),this.scrollerRefresh(this.bodyContainer),this.showParameterHint());this.parameters.splice(t,1);break}ejDashboardDesigner.editManager.addCmdAction(CommandAction.ParametersDelete,"addParameters","Parameter","",[n],[r])},n.prototype.isExistParameter=function(n){for(var t=0;t<this.parameters.length;t++)if(this.parameters[t].Name===n.Name)return!0;return!1},n.prototype.addParameter=function(n){this.parameters.push(n);this.getAppendItem(n.Name,this.getDataType(n.DataType));this.updateContainerBorder();ejDashboardDesigner.editManager.addCmdAction(CommandAction.ParameterAdd,"removeParameter","Parameter","",[n,this.parameters.length-1],[n.Name]);this.showParameterHint()},n.prototype.editParameter=function(n){$("#"+this.id+"_span_text_header").text("EDIT PARAMETER");for(var t=0;t<this.parameters.length;t++)if(this.parameters[t].Name===n){this.isEdit=!0;this.resetParamUI();this.parameterItem=$.extend(!0,{},this.parameters[t]);this.parameter=$.extend(!0,{},this.parameters[t]);this.setParamValues(this.parameter);break}},n.prototype.setParamValues=function(n){this.creationUI.css("display","none");this.designerTag.css("display","block");this.scrollerRefresh(this.newParamContainer);this.updateControlSize();$("#"+this.id+"_param_name").val(n.Name);$("#"+this.id+"_param_prompt").val(n.Prompt);this.drpDwnDtType.data("ejDropDownList").setModel({selectedIndex:n.DataType});n.Hidden===!1?this.drpDwnVisible.data("ejDropDownList").selectItemByText("Visible"):n.Hidden===!0&&n.Prompt===null?this.drpDwnVisible.data("ejDropDownList").selectItemByText("Internal"):this.drpDwnVisible.data("ejDropDownList").selectItemByText("Hidden");this.allowBlank.data("ejCheckBox").setModel({checked:n.AllowBlank});this.nullTag.data("ejCheckBox").setModel({checked:n.Nullable});this.multiValTag.data("ejCheckBox").setModel({checked:n.MultiValue})},n.prototype.insertParameter=function(n,t){t===0?this.parameters.unshift(n):this.parameters.splice(t,0,n);this.getAppendItem(n.Name,this.getDataType(this.parameters[t].DataType),t);this.showParameterHint()},n.prototype.removeParameter=function(n){var t,i;if($("#"+this.id+"_li_param"+n).remove(),this.updateContainerBorder(),!ej.isNullOrUndefined(this.parameters)&&this.parameters.length>0)for(t=0;t<this.parameters.length;t++)if(this.parameters[t].Name===n){i=$.extend(!0,{},this.parameters[t]);ejDashboardDesigner.editManager.addCmdAction(CommandAction.ParameterDelete,"insertParameter","Parameter","",[this.parameters[t].Name],[i,t]);this.parameters.splice(t,1);break}this.scrollerRefresh(this.bodyContainer);this.showParameterHint()},n.prototype.enableEdit=function(n){this.paramUlTag.find("#"+this.id+"_param_"+n).css("display","block")},n.prototype.disableEdit=function(n){this.paramUlTag.find("#"+this.id+"_param_"+n).css("display","none")},n.prototype.editParameterItem=function(n){var i=$("#"+this.id+"_param_"+n),r=i.offset(),t=this.configMenuTag.data("ejMenu");t.element.attr("parameter",n);t.element.is(":visible")?t.hide():t.show(r.left-this.configMenuTag.width(),r.top+i.height(),this.creationUI,n)},n.prototype.populateDialogValues=function(n){var u,t;if(!ej.isNullOrUndefined(n.DefaultValue)){var r=n.DefaultValue.DataSetReference,f=$("#"+this.id+"_def_qury_dtset").data("ejDropDownList"),e=$("#"+this.id+"_def_qury_dtsetVal").data("ejDropDownList"),i=n.DefaultValue.Values;if(!ej.isNullOrUndefined(r)){for($("#"+this.id+"_def_qury").data("ejRadioButton").setModel({checked:!0}),t=0;t<f.model.dataSource.length;t++)if(r.DataSetName===f.model.dataSource[t].name){f.setModel({selectedIndex:t});break}for(t=0;t<e.model.dataSource.length;t++)if(r.ValueField===e.model.dataSource[t].Name){e.setModel({selectedIndex:t});break}}if(!ej.isNullOrUndefined(i)&&i.length>0)for($("#"+this.id+"_def_specify").data("ejRadioButton").setModel({checked:!0}),t=0;t<i.length;t++)u=this.renderSetValueFields("def"),this.updateValues(u,i[t],"Defaultvalues")}if(!ej.isNullOrUndefined(n.ValidValues)){var r=n.ValidValues.DataSetReference,i=n.ValidValues.ParameterValues,o=$("#"+this.id+"_avail_qury_dtset").data("ejDropDownList"),s=$("#"+this.id+"_avail_qury_dtsetVal").data("ejDropDownList"),h=$("#"+this.id+"_avail_qury_dtsetLbl").data("ejDropDownList");if(!ej.isNullOrUndefined(i)&&i.length>0)for($("#"+this.id+"_avail_specify").data("ejRadioButton").setModel({checked:!0}),t=0;t<i.length;t++)u=this.renderSetValueFields("avail"),this.updateValues(u,i[t],"Availablevalues");if(!ej.isNullOrUndefined(r)){for($("#"+this.id+"_avail_qury").data("ejRadioButton").setModel({checked:!0}),t=0;t<o.model.dataSource.length;t++)if(r.DataSetName===o.model.dataSource[t].name){o.setModel({selectedIndex:t});break}for(t=0;t<s.model.dataSource.length;t++)if(r.ValueField===s.model.dataSource[t].Name){s.setModel({selectedIndex:t});break}for(t=0;t<h.model.dataSource.length;t++)if(r.LabelField===h.model.dataSource[t].Name){h.setModel({selectedIndex:t});break}}}},n.prototype.updateTextFieldVal=function(n,t,i,r,u,f){var e=!0,o="white";!n.isExp&&t?(u.val(n.exp),u.attr("e-filter-exp",i),o="white",e=!0):i.startsWith("=")&&n.isExp?(u.attr("e-param-exp",i),o="black",e=!1):(u.val(i),o="white",e=!0);e?u.removeAttr("disabled"):u.attr("disabled","true");f.css("background-color",o)},n.prototype.updateValues=function(n,t,i){var r,u,f;i.toLowerCase()==="availablevalues"&&(r=$("#"+n+"_avail_lbl_txt"),u=$("#"+n+"_avail_value_txt"),r.removeClass("e-designer-txtmark"),u.removeClass("e-designer-txtmark"));i.toLowerCase()==="defaultvalues"&&(f=$("#"+n+"_def_lbl_txt"),f.removeClass("e-designer-txtmark"))},n.prototype.renderValidation=function(n,t,i){var r=$("#"+n+"_error_icon_td"),u=$("#"+n+"_td").find(".e-designer-content-label");t?(ej.DashboardUtil.showErrIndictor(r,!0,i),u.addClass("e-designer-error")):(ej.DashboardUtil.showErrIndictor(r,!1),u.removeClass("e-designer-error"));$("#"+this.id+"_createParam_Bdy_Container").data("ejScroller")&&$("#"+this.id+"_createParam_Bdy_Container").data("ejScroller").refresh()},n.prototype.getAppendItem=function(n,t,i){var o=$("#"+this.id+"_designerConfigurationPanel").width()-84,r=ej.buildTag("li.e-user-select e-list e-state-default e-list-check e-draggable e-parameter e-reportdesigner-tree-list e-reportdesigner-param-list","",{padding:"0px","list-style":"none",height:"35px"},{id:this.id+"_li_param"+n,name:n}),s=ej.buildTag("span.e-widgeticons e-reportdesigner-double-drag e-draggable e-js e-pinch e-designer-dragabble-icon","",{padding:"6.5px 5px",display:"inline-block",float:"left"},{id:this.id+"_drag_"+n}),h=ej.buildTag("span.e-query-datatype e-designer-datatype-icon e-designer-cursor "+this.getDataTypeStyle(t),"",{display:"inline-block",float:"left",padding:"3px 2px"},{id:this.id+"_type_"+n,datatype:this.getDataTypeStyle(t)}),u=ej.buildTag("a.e-chevron-right_01 e-remove-shadow","",{padding:"5px 0px"}),f,e;r.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableEdit,this,n));r.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableEdit,this,n));f=ej.buildTag("span.e-list-text e-rel e-designer-param-text e-designer-li-text "+(ej.DashboardUtil.textWidth(n,"segoe ui 12px")>=o?"e-title-tip":""),n,{width:o+"px","padding-left":"5px",margin:"4px 0px"},{name:n});u.append(s);u.append(h);u.append(f);f.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableEdit,this,n));f.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableEdit,this,n));e=ej.buildTag("span.e-designer-content-icon e-reportdesigner-single-drag e-designer-click","",{display:"none",float:"right","margin-right":"5px","padding-top":"5px"},{id:this.id+"_param_"+n,"e-target":this.id+"_param_dsConfigMenu"});u.append(e);r.append(u);e.bind("click",$.proxy(this.editParameterItem,this,n));ej.isNullOrUndefined(i)?this.paramUlTag.append(r):i===0?(this.paramUlTag.prepend(r),r.css({"border-bottom":"1px solid #DBDBDB"})):this.listContainer.find("ul>li:nth-child("+i+")").after(r);ejDashboardDesigner.getInstance("DragOnDrop").initializeParameterDraggable(r);this.updateContainerBorder();this.bodyContainer.height()>this.listContainer.height()?this.bodyContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.bodyContainer)},n.prototype.getDragElement=function(n,t){var i=ej.buildTag("div","",{border:"0.5px solid #EDF1F4",background:"#EDF1F4",margin:"6px",height:"25px","border-radius":"1px","z-index":"50","white-space":"nowrap",overflow:"hidden"},{id:this.id+"_"+n+"_div"}),u=ej.buildTag("div","",{"margin-right":"3px","margin-left":"15px","margin-top":"2.5px","margin-bottom":"2.5px",float:"left"},{id:this.id+"_dataseticon","class":t}),r=ej.buildTag("span.e-designer-fontfamily","",{overflow:"hidden","font-size":"12px",display:"inline-block","white-space":"nowrap","text-overflow":"ellipsis","margin-left":"2px","margin-top":"3px",width:"120px","vertical-align":"middle"},{id:this.id+"_"+n+"_text"});return r.text(n),i.append(u),i.append(r),i},n.prototype.updateContainerBorder=function(){this.listContainer.css("border-top-width",this.listContainer.find(" li").length===0?"0px":"1px")},n.prototype.getDataTypeStyle=function(n){var t="e-reportdesigner-dataset-misc";return n.toLowerCase()==="datetime"?t="e-reportdesigner-dataset-datetime":n.toLowerCase()==="time"?t="e-reportdesigner-dataset-time":n.toLowerCase()==="integer"||n.toLowerCase()==="float"?t="e-reportdesigner-dataset-number":n.toLowerCase()==="boolean"?t="e-reportdesigner-dataset-boolean":n.toLowerCase()==="string"&&(t="e-reportdesigner-dataset-string"),t},n.prototype.getValues=function(n){var t=n.val(),i,r,u,f;return n.hasClass("e-designer-txtmark")?i="":this.validateExpValue(t)?(r=t.indexOf("@"),u=t.indexOf("]"),r!==-1&&u!==-1&&(f=t.substring(r+1,u),t=f,i="=Parameters!"+t+".Value")):i=t,i},n.prototype.saveDialogValues=function(){var i=this,u={},r={},t="",n,f=!1,e=!1,c,o,y,s,h;if(n=$.extend(!0,{},this.parameter),n.Name=$("#"+this.id+"_param_name").val(),n.Prompt=$("#"+this.id+"_param_prompt").val(),n.DataType=this.getDataTypeVal(this.drpDwnDtType.data("ejDropDownList").getSelectedValue()),n.Nullable=this.nullTag.data("ejCheckBox").model.checked,n.AllowBlank=this.allowBlank.data("ejCheckBox").model.checked,$("#"+this.id+"_avail_specify").data("ejRadioButton").model.checked)c=$("#"+this.id+"_avail_container_div .e-reportdesigner-parameter-avail-row"),o=[],c.each(function(n,r){var s=$(r).attr("id"),l=$("#"+s+"_avail_lbl_txt"),a=$("#"+s+"_avail_value_txt"),c,e={},h,u;e.__type="Syncfusion.RDL.DOM.ParameterValue";e.Label=i.getValues(l);c=i.getValues(a);h=l.attr("e-param-exp");e.Label=!ej.isNullOrUndefined(h)&&h.length>0?h:i.getValues(l);c=i.getValues(a);u=a.attr("e-param-exp");e.Value=i.drpDwnDtType.data("ejDropDownList").getSelectedValue().toLowerCase()==="datetime"?!ej.isNullOrUndefined(u)&&u.length>0?u:i.getDateValue(c):!ej.isNullOrUndefined(u)&&u.length>0?u:c;o.push(e);(ej.isNullOrUndefined(h)||h.length===0)&&(t+=i.validateParamValues(e.Label,"label","(Available)",$("#"+s+"_avail_lbl_txt")));(ej.isNullOrUndefined(u)||u.length===0)&&(t+=i.validateParamValues(e.Value,"value","(Available)",$("#"+s+"_avail_value_txt")));ej.isNullOrUndefined(t)||t.length===0?ej.DashboardUtil.showErrIndictor($("#"+s+"_param_error_td"),!1,t):(ej.DashboardUtil.showErrIndictor($("#"+s+"_param_error_td"),!0,t),t="",f=!0)}),n.ValidValues=this.createValidValues(),n.ValidValues.DataSetReference=null,n.ValidValues.ParameterValues=o;else if($("#"+this.id+"_avail_qury").data("ejRadioButton").model.checked){var l=$("#"+this.id+"_avail_qury_dtset").data("ejDropDownList").model.value,a=$("#"+this.id+"_avail_qury_dtsetVal").data("ejDropDownList").model.value,v=$("#"+this.id+"_avail_qury_dtsetLbl").data("ejDropDownList").model.value;n.ValidValues=this.createValidValues();n.ValidValues.ParameterValues=[];n.ValidValues.DataSetReference.DataSetName=l;n.ValidValues.DataSetReference.ValueField=a;n.ValidValues.DataSetReference.LabelField=v;r.dataSetName=l;r.valueFieldName=a;r.labelFieldName=v;t+=this.validateQueryValues(r,"avail");ej.isNullOrUndefined(t)||t.length===0?ej.DashboardUtil.showErrIndictor($("#"+this.id+"_avail_param_query_td"),!1,t):(ej.DashboardUtil.showErrIndictor($("#"+this.id+"_avail_param_query_td"),!0,t),t="",f=!0)}else $("#"+this.id+"_avail_none").data("ejRadioButton").model.checked&&(n.ValidValues=null);$("#"+this.id+"_def_specify").data("ejRadioButton").model.checked?(y=$("#"+this.id+"_def_container_div .e-reportdesigner-parameter-def-row"),n.DefaultValue=this.createDefaultValues(),n.DefaultValue.DataSetReference=null,y.each(function(r,u){var o=$(u).attr("id"),c=$("#"+o+"_def_lbl_txt"),h=i.getValues(c),f=c.attr("e-param-exp"),s;i.drpDwnDtType.data("ejDropDownList").getSelectedValue().toLowerCase()==="datetime"?(s=i.getDateValue(h),n.DefaultValue.Values.push(!ej.isNullOrUndefined(f)&&f.length>0?f:s)):(s=h,n.DefaultValue.Values.push(!ej.isNullOrUndefined(f)&&f.length>0?f:h));(ej.isNullOrUndefined(f)||f.length===0)&&(t+=i.validateParamValues(s,"value","(Default)",$("#"+o+"_def_lbl_txt")));ej.isNullOrUndefined(t)||t.length===0?ej.DashboardUtil.showErrIndictor($("#"+o+"_param_error_td"),!1,t):(ej.DashboardUtil.showErrIndictor($("#"+o+"_param_error_td"),!0,t),t="",e=!0)})):$("#"+this.id+"_def_qury").data("ejRadioButton").model.checked?(s=$("#"+this.id+"_def_qury_dtsetVal").data("ejDropDownList").model.value,h=$("#"+this.id+"_def_qury_dtset").data("ejDropDownList").model.value,n.DefaultValue=this.createDefaultValues(),n.DefaultValue.ParameterValues=[],n.DefaultValue.DataSetReference.DataSetName=h,n.DefaultValue.DataSetReference.ValueField=s,u.dataSetName=h,u.valueFieldName=s,t+=this.validateQueryValues(u,"def"),ej.isNullOrUndefined(t)||t.length===0?ej.DashboardUtil.showErrIndictor($("#"+this.id+"_def_param_query_td"),!1,t):(ej.DashboardUtil.showErrIndictor($("#"+this.id+"_def_param_query_td"),!0,t),t="",e=!0)):$("#"+this.id+"_def_none").data("ejRadioButton").model.checked&&(n.DefaultValue=null);f||e||(this.parameter=n,n={},this.closeDialog())},n.prototype.updateAvailableDataset=function(){var t=ejDashboardDesigner.getInstance("DataSet").datasets,i=[],n;if(t.length===0)$("#"+this.id+"_avail_qury").data("ejRadioButton").disable(),$("#"+this.id+"_def_qury").data("ejRadioButton").disable();else{for(n=0;n<t.length;n++)i.push({name:t[n].Name});$("#"+this.id+"_avail_qury").data("ejRadioButton").enable();$("#"+this.id+"_def_qury").data("ejRadioButton").enable();$("#"+this.id+"_avail_qury_dtset").data("ejDropDownList").setModel({dataSource:i});$("#"+this.id+"_def_qury_dtset").data("ejDropDownList").setModel({dataSource:i})}},n.prototype.openAssignDialog=function(){ej.isNullOrUndefined(this.assignDialog)&&$("#"+this.id+"_assign_dialog").length===0&&this.renderAssignDialog();this.resetDialogValues();this.updateAvailableDataset();this.assignDialog.data("ejDialog").open();this.populateDialogValues(this.parameter)},n.prototype.closeDialog=function(){$("#"+this.id+"_avail_val_container").css("display","none");$("#"+this.id+"_avail_qury_container").css("display","none");$("#"+this.id+"_def_val_container").css("display","none");$("#"+this.id+"_def_qury_container").css("display","none");ej.isNullOrUndefined(this.assignDialog)||$("#"+this.id+"_assign_dialog").length===0||this.assignDialog.data("ejDialog").close()},n.prototype.resetDialogValues=function(){var n=$("#"+this.id+"_assign_parent_div").data("ejTab");$("#"+this.id+"_avail_container_div").empty();$("#"+this.id+"_def_container_div").empty();$("#"+this.id+"_def_qury_dtset").data("ejDropDownList").setModel({selectedIndex:-1});$("#"+this.id+"_def_qury_dtsetVal").data("ejDropDownList").setModel({selectedIndex:-1});$("#"+this.id+"_avail_qury_dtset").data("ejDropDownList").setModel({selectedIndex:-1});$("#"+this.id+"_avail_qury_dtsetVal").data("ejDropDownList").setModel({selectedIndex:-1});$("#"+this.id+"_avail_qury_dtsetLbl").data("ejDropDownList").setModel({selectedIndex:-1});$("#"+this.id+"_avail_none").data("ejRadioButton").setModel({checked:!0});$("#"+this.id+"_def_none").data("ejRadioButton").setModel({checked:!0});ej.isNullOrUndefined(n)||(n.option("enabledItemIndex",[1]),n.option("selectedItemIndex")===1&&n.option("selectedItemIndex",0));this.updateHighlighter($("#"+this.id+"_avail_qury_dtset_container"),!1);this.updateHighlighter($("#"+this.id+"_avail_qury_dtsetVal_container"),!1);this.updateHighlighter($("#"+this.id+"_def_qury_dtset_container"),!1);this.updateHighlighter($("#"+this.id+"_def_qury_dtsetVal_container"),!1);ej.DashboardUtil.showErrIndictor($("#"+this.id+"_avail_param_query_td"),!1);ej.DashboardUtil.showErrIndictor($("#"+this.id+"_def_param_query_td"),!1);this.scrollerRefresh($("#"+this.id+"_avail_val_parent"));this.scrollerRefresh($("#"+this.id+"_def_val_parent"))},n.prototype.deleteRow=function(n,t){n.remove();this.scrollerRefresh(t)},n.prototype.showParameterHint=function(){this.listContainer.find("li").length>0?this.bodyContainer.removeClass("e-designer-hint-newparameter"):this.bodyContainer.addClass("e-designer-hint-newparameter")},n.prototype.getDataType=function(n){return n===0?"String":n===1?"Boolean":n===2?"DateTime":n===3?"Integer":n===4?"Float":void 0},n.prototype.getDataTypeVal=function(n){return n.toLowerCase()==="string"?DataTypes.String:n.toLowerCase()==="boolean"?DataTypes.Boolean:n.toLowerCase()==="datetime"?DataTypes.DateTime:n.toLowerCase()==="integer"?DataTypes.Integer:n.toLowerCase()==="float"?DataTypes.Float:void 0},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n.prototype.createParameter=function(){return{__type:"Syncfusion.RDL.DOM.ReportParameter",Name:"",Prompt:"",DataType:0,Hidden:!1,AllowBlank:!1,Nullable:!1,MultiValue:!1,ValidValues:null,DefaultValue:null,UsedInQuery:0}},n.prototype.createValidValues=function(){return{__type:"Syncfusion.RDL.DOM.ValidValues",ParameterValues:[],DataSetReference:{__type:"Syncfusion.RDL.DOM.DataSetReference",DataSetName:null,ValueField:null,LabelField:null}}},n.prototype.createDefaultValues=function(){return{__type:"Syncfusion.RDL.DOM.DefaultValue",Values:[],DataSetReference:{__type:"Syncfusion.RDL.DOM.DataSetReference",DataSetName:null,ValueField:null}}},n}();window.ej.createObject("ej.DashboardDesignerUtility.Parameter",InternalParameter,window);InternalPivotGridReportItem=function(){function n(){this.gridJson=null;this.contentContainer=null;this.minimumWidth=60;this.minimumHeight=30;this.showHeader=!0;this.headerBackColor="#77a7fb";this.headerFontFamily="Arial";this.headerFontColor="White";this.headerFontSize="10pt";this.headerFontStyle="Default";this.headerFontWeight="Default";this.headerTextDecoration="Default";this.headerTextAlign="Left";this.headerPaddingLeft="4pt";this.headerPaddingRight="2pt";this.headerPaddingTop="2pt";this.headerPaddingBottom="2pt";this.contentBorderWidth="1pt";this.contentBorderStyle="Solid";this.contentBorderColor="lightgrey";this.contentBackColor="Transparent";this.contentFontFamily="Arial";this.contentFontColor="Black";this.contentFontSize="10pt";this.contentFontStyle="Default";this.contentFontWeight="Default";this.contentTextDecoration="Default";this.contentTextAlign="Left";this.contentPaddingLeft="4pt";this.contentPaddingRight="2pt";this.contentPaddingTop="2pt";this.contentPaddingBottom="2pt";this.columnSummaryBorderColor="lightgrey";this.columnSummaryBorderStyle="Solid";this.columnSummaryBorderWidth="1pt";this.columnSummaryBackColor="lightgrey";this.columnSummaryFontFamily="Arial";this.columnSummaryFontColor="Black";this.columnSummaryFontSize="10pt";this.columnSummaryFontStyle="Default";this.columnSummaryFontWeight="Default";this.columnSummaryTextDecoration="Default";this.columnSummaryTextAlign="Left";this.columnSummaryPaddingLeft="4pt";this.columnSummaryPaddingRight="2pt";this.columnSummaryPaddingTop="2pt";this.columnSummaryPaddingBottom="2pt";this.tableSummaryColumnBorderColor="lightgrey";this.tableSummaryColumnBorderStyle="Solid";this.tableSummaryColumnBorderWidth="1pt";this.tableSummaryColumnBackColor="lightgrey";this.tableSummaryColumnFontFamily="Arial";this.tableSummaryColumnFontColor="Black";this.tableSummaryColumnFontSize="10pt";this.tableSummaryColumnFontStyle="Default";this.tableSummaryColumnFontWeight="Default";this.tableSummaryColumnTextDecoration="Default";this.tableSummaryColumnTextAlign="Left";this.tableSummaryColumnPaddingLeft="4pt";this.tableSummaryColumnPaddingRight="2pt";this.tableSummaryColumnPaddingTop="2pt";this.tableSummaryColumnPaddingBottom="2pt";this.columnGroupBorderColor="lightgrey";this.columnGroupBorderStyle="Solid";this.columnGroupBorderWidth="1pt";this.columnGroupBackColor="white";this.columnGroupFontFamily="Arial";this.columnGroupFontColor="Black";this.columnGroupFontSize="10pt";this.columnGroupFontStyle="Default";this.columnGroupFontWeight="Default";this.columnGroupTextDecoration="Default";this.columnGroupTextAlign="Left";this.columnGroupPaddingLeft="4pt";this.columnGroupPaddingRight="2pt";this.columnGroupPaddingTop="2pt";this.columnGroupPaddingBottom="2pt";this.cornerCellBorderColor="lightgrey";this.cornerCellBorderWidth="1pt";this.cornerCellBorderStyle="Solid";this.cornerCellBackColor="Transparent";this.cornerCellFontFamily="Arial";this.cornerCellFontColor="Black";this.cornerCellFontSize="10pt";this.cornerCellFontStyle="Default";this.cornerCellFontWeight="Default";this.cornerCellTextDecoration="Default";this.cornerCellTextAlign="Left";this.cornerCellPaddingLeft="4pt";this.cornerCellPaddingRight="2pt";this.cornerCellPaddingTop="2pt";this.cornerCellPaddingBottom="2pt";this.rowGroupBorderColor="lightgrey";this.rowGroupBorderStyle="Solid";this.rowGroupBorderWidth="1pt";this.rowGroupBackColor="white";this.rowGroupFontFamily="Arial";this.rowGroupFontColor="Black";this.rowGroupFontSize="10pt";this.rowGroupFontStyle="Default";this.rowGroupFontWeight="Default";this.rowGroupTextDecoration="Default";this.rowGroupTextAlign="Left";this.rowGroupPaddingLeft="4pt";this.rowGroupPaddingRight="2pt";this.rowGroupPaddingTop="2pt";this.rowGroupPaddingBottom="2pt";this.rowSummaryBorderColor="lightgrey";this.rowSummaryBorderStyle="Solid";this.rowSummaryBorderWidth="1pt";this.rowSummaryBackColor="lightgrey";this.rowSummaryFontFamily="Arial";this.rowSummaryFontColor="Black";this.rowSummaryFontSize="10pt";this.rowSummaryFontStyle="Default";this.rowSummaryFontWeight="Default";this.rowSummaryTextDecoration="Default";this.rowSummaryTextAlign="Left";this.rowSummaryPaddingLeft="4pt";this.rowSummaryPaddingRight="2pt";this.rowSummaryPaddingTop="2pt";this.rowSummaryPaddingBottom="2pt";this.tableSummaryRowBorderColor="lightgrey";this.tableSummaryRowBorderStyle="Solid";this.tableSummaryRowBorderWidth="1pt";this.tableSummaryRowBackColor="lightgrey";this.tableSummaryRowFontFamily="Arial";this.tableSummaryRowFontColor="Black";this.tableSummaryRowFontSize="10pt";this.tableSummaryRowFontStyle="Default";this.tableSummaryRowFontWeight="Default";this.tableSummaryRowTextDecoration="Default";this.tableSummaryRowTextAlign="Left";this.tableSummaryRowPaddingLeft="4pt";this.tableSummaryRowPaddingRight="2pt";this.tableSummaryRowPaddingTop="2pt";this.tableSummaryRowPaddingBottom="2pt";this.tableSummaryColumns=[];this.tableSummaryRows=[];this.horizontalGridLine=!0;this.verticalGridLine=!0;this.columnWidth="1.04in";this.columnWidths=[];this.rowHeights=[];this.rowHeight="0.265in";this.rowName="";this.rowsName="";this.columnName="";this.columnsName="";this.cornerLabel="";this.enableSummaryRow=!0;this.enableSummaryColumn=!0;this.enableTableSummaryRow=!0;this.enableTableSummaryColumn=!0;this.columns=[];this.rows=[];this.lastColumnGroupMembers=[];this.isColumnSettingsEnabled=!1;this.isRowSettingsEnabled=!1;this.summaryValueIndex=0;this.summaryValueName="";this.summaryColumnValueIndex=0;this.summaryColumnValueName="";this.selectedColumnIndex=0;this.selectedColumnSettingsIndex=0;this.selectedRowIndex=0;this.selectedRowSettingsIndex=0;this.dataGroupInfo=null;this.gridWidth="0";this.gridHeight="0";this.isEmptyColumn=!1;this.reportName=null;this.cellInfo=null;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.designId=this.designPanel.dashboardDesigner._id;this.isDataEnabled=!0;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.designerInstance=ejDashboardDesigner.getInstance("DashboardDesigner")}return n.prototype.getrootCss=function(){return this.rootClass},n.prototype.render=function(n){this.renderGridItem(n)},n.prototype.updateData=function(){throw new Error("Method not implemented.");},n.prototype.setWidgetJson=function(){throw new Error("Method not implemented.");},n.prototype.getPropertyItems=function(){throw new Error("Method not implemented.");},n.prototype.getWidgetItemContainer=function(){throw new Error("Method not implemented.");},n.prototype.getWidgetJson=function(){throw new Error("Method not implemented.");},n.prototype.getDefaultCategoriesInfo=function(){throw new Error("Method not implemented.");},n.prototype.isMasterByDefault=function(){return!1},n.prototype.renderGridReportElement=function(n){try{this.gridJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.renderGridElement();this.deserializeReportItem(n);ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.gridJson.Name,Error:t,Type:t.name})}},n.prototype.renderGridItem=function(){try{this.columns.push(this.createColumn());this.rows.push(this.createRow());this.selectedColumnIndex=0;this.gridJson=this.getGridJson();this.gridJson.Name=this.reportName;this.renderGridElement();this.gridJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo)}catch(n){this.designPanel.logError({Source:this.gridJson.Name,Error:n,Type:n.name})}},n.prototype.createTableCell=function(n){return ej.buildTag("td.e-reportdesigner-grid-cell","",{padding:"2pt","padding-left":"4pt",margin:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Margin)?"0px":n.Margin,border:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Border)?"1px solid #dddddd":n.Border,"background-color":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Background)?"white":n.Background,"font-family":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.FontFamily)?"Roboto":n.FontFamily,color:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Color)?"black":n.Color,"font-size":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.FontSize)?"10pt":n.FontSize,"box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","text-align":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.TextAlign)?"left":n.TextAlign,"vertical-align":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.VerticalAlign)?"middle":n.VerticalAlign},{rowSpan:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.RowSpan)?"1":n.RowSpan,colSpan:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.ColSpan)?"1":n.ColSpan})},n.prototype.createTableCellHeader=function(n){return ej.buildTag("th.e-reportdesigner-grid-cell","",{padding:"2pt","padding-left":"4pt",margin:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Margin)?"0px":n.Margin,border:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Border)?"1px solid #dddddd":n.Border,"background-color":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Background)?"white":n.Background,"font-family":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.FontFamily)?"Segoe UI":n.FontFamily,color:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Color)?"black":n.Color,"font-size":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.FontSize)?"10pt":n.FontSize,"box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","text-align":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.TextAlign)?"left":n.TextAlign,"vertical-align":ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.VerticalAlign)?"middle":n.VerticalAlign},{rowSpan:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.RowSpan)?"1":n.RowSpan,colSpan:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.ColSpan)?"1":n.ColSpan,id:ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.Id)?"":n.Id})},n.prototype.renderGridElement=function(){var n,r,i,t;for(this.gridItem=ej.buildTag("div.e-pivotgriditem","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"gridItem"+this.gridJson.Name}),this.tableElement=ej.buildTag("table.e-reportdesigner-grid-table","",{width:"100%",height:"100%","font-size":"10pt","background-color":"white"},{id:this.designId+"tableElement"+this.gridJson.Name,cellspacing:"0",cellpadding:"0"}),this.contentContainer.append(this.gridItem),this.gridItem.append(this.tableElement),this.controlContainer.data("widgetInstance",this),n=0;n<=1;n++){for(r=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"}),i=1;i<=2;i++)t=void 0,n===0||n===1&&i===1?(t=this.createTableCellHeader(),n===0&&i===2?t.text("Columns"):n===1&&t.text("Rows")):(t=this.createTableCell(),n>0&&t.text("Datas")),r.append(t);this.tableElement.append(r)}this.controlContainer.css("width",2*ej.DashboardUtil.getPixelVal(this.columnWidth)+4+"px");this.updateCurrentSize();this.tableRows=this.tableElement.find("tr")},n.prototype.updateCurrentSize=function(){this.gridWidth=this.controlContainer.css("width");this.gridHeight=this.controlContainer.css("height")},n.prototype.validateHorizontalGridLines=function(n){return n.Style.TopBorder===null&&n.Style.BottomBorder===null?!0:n.Style.TopBorder!==null&&n.Style.BottomBorder!==null?n.Style.TopBorder.Style==="None"&&n.Style.BottomBorder.Style==="None"?!1:!0:void 0},n.prototype.validateVerticalGridLines=function(n){return n.Style.LeftBorder===null&&n.Style.RightBorder===null?!0:n.Style.LeftBorder!==null&&n.Style.RightBorder!==null?n.Style.LeftBorder.Style==="None"&&n.Style.RightBorder.Style==="None"?!1:!0:void 0},n.prototype.validateGridLines=function(){var i=!1,r=!1,u=[],n;(this.dataGroupInfo.Values.length===0||this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Columns.length!==0)&&(u=this.getCellReportItems("TablixCorner"));var f=this.getCellReportItems("TablixBody"),e=this.getCellReportItems("TablixColumnGroup"),o=this.getCellReportItems("TablixRowGroup"),t=$.merge($.merge($.merge(u,f),e),o);for(n=0;n<t.length;n++)i=this.validateHorizontalGridLines(t[n]),r=this.validateVerticalGridLines(t[n]);this.horizontalGridLine=i;this.verticalGridLine=r;this.updateGridLines()},n.prototype.deserializeReportItem=function(n){if(this.deserializeGrid(n),n.Style){var t={};this.deserializeGridBorder(n.Style,t);this.gridItem.css(t)}this.tableRows=this.tableElement.find("tr");this.updateVisibility();this.validateGridLines()},n.prototype.deserializeGridBorder=function(n,t){n.Border&&this.openBorder(n.Border,"",t);n.LeftBorder&&this.openBorder(n.LeftBorder,"-left",t);n.TopBorder&&this.openBorder(n.TopBorder,"-top",t);n.RightBorder&&this.openBorder(n.RightBorder,"-right",t);n.BottomBorder&&this.openBorder(n.BottomBorder,"-bottom",t)},n.prototype.openBorder=function(n,t,i){n&&(n.Color&&(i["border"+t+"-color"]=n.Color),n.Style&&(n.Style==="Default"||n.Style==="None"?(i["border"+t+"-style"]="none",this.controlContainer.css("border"+t+"-style","dotted")):(i["border"+t+"-style"]=n.Style.toLowerCase(),this.controlContainer.css("border"+t+"-style","none"))),n.Width&&n.Width.size&&(i["border"+t+"-width"]=n.Width.size))},n.prototype.getDataCategoriesInfo=function(){for(var t,r=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo"),i=["Value"],n=0;n<i.length;n++)t=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createValueInfo"),t.Name=i[n].replace(" ",""),t.DisplayName=i[n],r.Values.push(t);return r},n.prototype.updateGridSize=function(){var t,n,i;if(this.dataGroupInfo.Rows.length>0||this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Values.length>0){for($(this.tableElement).find("colgroup").remove(),t=ej.buildTag("colgroup","",{}),n=0;n<this.columnWidths.length;n++)i=ej.buildTag("col","",{width:this.columnWidths[n]+"px"}),t.append(i);t.prependTo(this.tableElement);this.updateGridWidth(!0);this.updateGridHeight(!0);this.tableElement.css("table-layout","fixed");this.propertyPanel.canUpdate=!1;this.gridJson.Width.size=ej.DashboardUtil.getUnitVal(ej.DashboardUtil.getSizeVal(this.controlContainer.css("width")),"in");this.setPropertyElement("Width","Position",ej.DashboardUtil.getPixelVal(this.gridJson.Width.size),-1);this.gridJson.Height.size=ej.DashboardUtil.getUnitVal(ej.DashboardUtil.getSizeVal(this.controlContainer.css("height")),"in");this.setPropertyElement("Height","Position",ej.DashboardUtil.getPixelVal(this.gridJson.Height.size),-1);this.propertyPanel.canUpdate=!0}},n.prototype.updateDataGroupInfo=function(n,t){this.dataGroupInfo=n;(t.columnUpdate||t.rowUpdate||t.valueUpdate||t.update)&&(this.isEmptyColumn=this.dataGroupInfo.Columns.length===0&&this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0?!0:!1,this.updateColumnDatas(),this.updateRowDatas(),this.renderTable(n),this.updateVisibility(),this.getDataColumns(),this.getDataRows(),n.Columns.length>0&&this.renderSummaryTableColumn(),n.Rows.length>0&&this.renderSummaryTableRow(),this.updateMaximumColumnWidth(),this.updateMaximumRowHeight(),this.updateGridSize(),this.updateGridLines(),this.dataGroupInfo.Columns.length===0&&this.dataGroupInfo.Rows.length===0&&(this.dataGroupInfo.Values.length===0||this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length===0)&&(this.updateWidth(2*ej.DashboardUtil.getPixelVal(this.columnWidth)+4),this.updateHeight(2*ej.DashboardUtil.getPixelVal(this.rowHeight)+4)),this.designPanel.updateWidgetSelectionBox(this.controlContainer));this.gridJson.Filters=this.dataGroupInfo.Filters;this.gridJson.SortExpressions=this.dataGroupInfo.SortExpressions;this.gridJson.TablixRowHierarchy.TablixMembers.length>0&&(this.isEmptyColumn?this.updateFilters(this.dataGroupInfo.Rows,this.gridJson.TablixRowHierarchy.TablixMembers[1],0):this.updateFilters(this.dataGroupInfo.Rows,this.gridJson.TablixRowHierarchy.TablixMembers[0],0));this.gridJson.TablixColumnHierarchy.TablixMembers.length>0&&(this.isEmptyColumn?this.updateFilters(this.dataGroupInfo.Rows,this.gridJson.TablixRowHierarchy.TablixMembers[1],0):this.updateFilters(this.dataGroupInfo.Columns,this.gridJson.TablixColumnHierarchy.TablixMembers[0],0))},n.prototype.updatePropertyData=function(){},n.prototype.updateFilters=function(n,t,i){n.length>0&&(i===0?(t.Group.GroupExpressions=n[i].GroupExpressions,t.Group.Filters=n[i].Filters,t.SortExpressions=n[i].SortExpressions):i<n.length&&this.updateFilters(n,t.TablixMembers[0],i+1))},n.prototype.updateVisibility=function(){this.propertyPanel.updateItemVisibility("PivotGrid","BasicSettings","Filter",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","BasicSettings","Sort",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateCategoryVisibility("PivotGrid","Column Group Settings",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateCategoryVisibility("PivotGrid","Row Group Settings",this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateCategoryVisibility("PivotGrid","Summary Settings",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateCategoryVisibility("PivotGrid","Column Settings",this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length);this.propertyPanel.updateCategoryVisibility("PivotGrid","Row Settings",this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateCategoryVisibility("PivotGrid","Corner Cell Settings",this.dataGroupInfo.Columns.length>0);(this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0)&&this.getSummaryValue();this.propertyPanel.updateItemVisibility("PivotGrid","Appearance","HeaderVisibility",!this.isEmptyColumn);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumn",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnBackgroundColor",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnBorder",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnFont",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnFontStyleRoot",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnTextDecoration",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnTextAlign",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnPadding",this.dataGroupInfo.Columns.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumns",this.dataGroupInfo.Columns.length>0);$("#TableSummaryColumns_Container").css("display",this.dataGroupInfo.Columns.length>0?"block":"none");$("#TableSummaryRows_Container").css("display",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0?"block":"none");this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRow",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowBackgroundColor",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowBorder",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowFont",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowFontStyleRoot",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowTextDecoration",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowTextAlign",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowPadding",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRows",this.dataGroupInfo.Rows.length>0&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","CornerCellSettings","CornerBackgroundColor",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","CornerCellSettings","CornerFont",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","CornerCellSettings","CornerFontStyleRoot",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","CornerCellSettings","CornerTextDecoration",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","CornerCellSettings","CornerTextAlign",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","CornerCellSettings","CornerPadding",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.propertyPanel.updateItemVisibility("PivotGrid","CornerCellSettings","CornerLabel",this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0);this.columnName===""&&(this.enableColumnBasicSettings(!1),this.enableColumnHeaderSettings(!1),this.enableColumnSummarySettings(!1));this.rowName===""&&(this.enableRowBasicSettings(!1),this.enableRowHeaderSettings(!1),this.enableRowSummarySettings(!1))},n.prototype.updateColumnDatas=function(){this.isColumnSettingsEnabled=!1;this.selectedColumnIndex=0;var n=$("#"+this.designId+"_PivotGrid_ColumnGroupSettings_Column").data("ejDropDownList"),t=this.getColumns();ej.isNullOrUndefined(n)||(n.option("dataSource",t),this.columnName!==""&&(this.selectedColumnIndex=t.indexOf(this.columnName),this.selectedColumnIndex!==-1?(n.option("selectedIndex",this.selectedColumnIndex),this.updateColumn(this.columnName)):(this.columnName="",this.selectedColumnIndex=0)));this.populateColumnSettings(t)},n.prototype.updateRowDatas=function(){this.isRowSettingsEnabled=!1;this.selectedRowIndex=0;var n=$("#"+this.designId+"_PivotGrid_RowGroupSettings_RowName").data("ejDropDownList"),t=this.getRows();ej.isNullOrUndefined(n)||(n.option("dataSource",t),this.rowName!==""&&(this.selectedRowIndex=t.indexOf(this.rowName),this.selectedRowIndex!==-1?(n.option("selectedIndex",this.selectedRowIndex),this.updateRowName(this.rowName)):(this.rowName="",this.selectedRowIndex=0)));this.populateRowSettings(t)},n.prototype.populateRowSettings=function(n){for(var f,r,t,u=[],i=0;i<n.length;i++){for(f=!0,r=0;r<this.rows.length;r++)if(this.dataGroupInfo.Rows[i].Field===this.rows[r].Field){u.push(this.rows[r]);f=!1;break}f&&(t=this.createRow(),t.Name=n[i],t.Label=this.dataGroupInfo.Rows[i].Field,t.Field=this.dataGroupInfo.Rows[i].Field,t.HeaderBackColor=this.rowGroupBackColor,t.HeaderFontFamily=this.rowGroupFontFamily,t.HeaderFontSize=this.rowGroupFontSize,t.HeaderFontColor=this.rowGroupFontColor,t.HeaderFontStyle=this.rowGroupFontStyle,t.HeaderFontWeight=this.rowGroupFontWeight,t.HeaderPaddingLeft=this.rowGroupPaddingLeft,t.HeaderPaddingRight=this.rowGroupPaddingRight,t.HeaderPaddingTop=this.rowGroupPaddingTop,t.HeaderPaddingBottom=this.rowGroupPaddingBottom,t.SummaryBackColor=this.columnSummaryBackColor,t.SummaryFontFamily=this.columnSummaryFontFamily,t.SummaryFontSize=this.columnSummaryFontSize,t.SummaryFontColor=this.columnSummaryFontColor,t.SummaryFontStyle=this.columnSummaryFontStyle,t.SummaryFontWeight=this.columnSummaryFontWeight,t.SummaryPaddingLeft=this.columnSummaryPaddingLeft,t.SummaryPaddingRight=this.columnSummaryPaddingRight,t.SummaryPaddingTop=this.columnSummaryPaddingTop,t.SummaryPaddingBottom=this.columnSummaryPaddingBottom,t.enableSummaryRow=this.enableSummaryRow,t.Format="",t.FormatType="",t.ActionInfo="",u.push(t))}this.rows=u},n.prototype.populateColumnSettings=function(n){for(var f,r,t,u=[],i=0;i<n.length;i++){for(f=!0,r=0;r<this.columns.length;r++)if(this.dataGroupInfo.Columns[i].Field===this.columns[r].Field){u.push(this.columns[r]);f=!1;break}f&&(t=this.createColumn(),t.Name=n[i],t.Label=this.dataGroupInfo.Columns[i].Field,t.Field=this.dataGroupInfo.Columns[i].Field,t.HeaderBackColor=this.columnGroupBackColor,t.HeaderFontFamily=this.columnGroupFontFamily,t.HeaderFontSize=this.columnGroupFontSize,t.HeaderFontColor=this.columnGroupFontColor,t.HeaderFontStyle=this.columnGroupFontStyle,t.HeaderFontWeight=this.columnGroupFontWeight,t.HeaderPaddingLeft=this.columnGroupPaddingLeft,t.HeaderPaddingRight=this.columnGroupPaddingRight,t.HeaderPaddingTop=this.columnGroupPaddingTop,t.HeaderPaddingBottom=this.columnGroupPaddingBottom,t.SummaryBackColor=this.columnSummaryBackColor,t.SummaryFontFamily=this.columnSummaryFontFamily,t.SummaryFontSize=this.columnSummaryFontSize,t.SummaryFontColor=this.columnSummaryFontColor,t.SummaryFontStyle=this.columnSummaryFontStyle,t.SummaryFontWeight=this.columnSummaryFontWeight,t.SummaryPaddingLeft=this.columnSummaryPaddingLeft,t.SummaryPaddingRight=this.columnSummaryPaddingRight,t.SummaryPaddingTop=this.columnSummaryPaddingTop,t.SummaryPaddingBottom=this.columnSummaryPaddingBottom,t.enableSummaryColumn=this.enableSummaryColumn,t.Width="",t.Format="",t.FormatType="",t.ActionInfo="",u.push(t))}this.columns=u},n.prototype.updateDefaultTableJson=function(){var t,n;for(this.gridJson.TablixBody.TablixColumns=[],this.gridJson.TablixBody.TablixRows=[],this.gridJson.TablixColumnHierarchy.TablixMembers=[],this.gridJson.TablixRowHierarchy.TablixMembers=[],this.gridJson.DataSetName="",n=0;n<3;n++)this.gridJson.TablixBody.TablixColumns.push(this.createTablixColumn()),this.gridJson.TablixColumnHierarchy.TablixMembers.push(this.createTablixMember());for(t=0;t<=1;t++)for(this.gridJson.TablixBody.TablixRows.push(this.createTablixRow()),t===0?this.gridJson.TablixRowHierarchy.TablixMembers.push(this.createTablixMember()):this.gridJson.TablixRowHierarchy.TablixMembers.push(this.createTablixMemberGroup()),n=0;n<3;n++)t===0?this.gridJson.TablixBody.TablixRows[t].TablixCells.push(this.createTablixCell(n*2+1,"",!0)):this.gridJson.TablixBody.TablixRows[t].TablixCells.push(this.createTablixCell(n*2+2,"",!1))},n.prototype.populateTablixCorners=function(){for(var u,r,n,t,i=0;i<this.gridJson.TablixCorner.TablixCornerRows.length;i++){if(u=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"}),i===0&&i!==this.gridJson.TablixCorner.TablixCornerRows.length-1)n=this.gridJson.TablixCorner.TablixCornerRows[i].TablixCornerCells[0],t=void 0,t=this.createTableCellHeader({RowSpan:n.CellContents.RowSpan,ColSpan:n.CellContents.ColSpan}),this.cornerLabel=n.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value,t.text(n.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value),this.setCornerElementStyle(t,n.CellContents.ReportItem),n.CellContents.RowSpan===this.gridJson.TablixCorner.TablixCornerRows.length&&(this.showHeader=!1),u.append(t);else if(i===this.gridJson.TablixCorner.TablixCornerRows.length-1)for(r=0;r<this.gridJson.TablixCorner.TablixCornerRows[i].TablixCornerCells.length;r++)n=this.gridJson.TablixCorner.TablixCornerRows[i].TablixCornerCells[r],t=void 0,t=this.createTableCellHeader({Background:"#77a7fb",Color:"white"}),t.text(this.showHeader?n.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value:this.dataGroupInfo.Rows[r].Field),this.setHeaderElementStyle(t,n.CellContents.ReportItem),u.append(t);this.tableElement.append(u)}},n.prototype.populateRowInfo=function(n,t){if(!ej.isNullOrUndefined(n.TablixHeader)){var i=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createRowInfo");i.Value=n.TablixHeader.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value;i.Name=this.gridJson.DataSetName;i.Field=n.Group.Name;i.DataField=this.dataConfiguration.getDataField(i.Field);i.GroupName=n.Group.Name;i.GroupExpressions=n.Group.GroupExpressions;i.SortExpressions=n.SortExpressions;i.Filters=n.Group.Filters;t.push(i)}n.TablixMembers.length>0&&this.populateRowInfo(n.TablixMembers[0],t)},n.prototype.populateColumnInfo=function(n,t){var r,f,u,i;if(ej.isNullOrUndefined(n.TablixHeader)||(r=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createColumnInfo"),r.Value=n.TablixHeader.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value,r.Name=this.gridJson.DataSetName,r.Field=n.Group.Name,r.DataField=this.dataConfiguration.getDataField(r.Field),r.GroupName=n.Group.Name,r.GroupExpressions=n.Group.GroupExpressions,r.SortExpressions=n.SortExpressions,r.Filters=n.Group.Filters,t.push(r)),n.TablixMembers.length>0)if(n.TablixMembers[0].TablixMembers.length>0)this.populateColumnInfo(n.TablixMembers[0],t);else for(u=0;u<n.TablixMembers.length;u++)i=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataValueInfo"),i.Value=this.gridJson.TablixBody.TablixRows[0].TablixCells[u].CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value,i.Name=this.gridJson.DataSetName,i.Field=n.TablixMembers[u].TablixHeader.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value,i.DataField=this.dataConfiguration.getDataField(i.Field),this.dataGroupInfo.Values[0].Values.push(i);else for(f=t.length===0?this.gridJson.TablixBody.TablixRows[0].TablixCells.length:t.length,u=0;u<f;u++)i=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataValueInfo"),i.Value=this.gridJson.TablixBody.TablixRows[0].TablixCells[u].CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value,i.Name=this.gridJson.DataSetName,i.Field=this.gridJson.TablixBody.TablixRows[0].TablixCells[u].CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value,i.DataField=this.dataConfiguration.getDataField(i.Field),this.dataGroupInfo.Values[0].Values.push(i)},n.prototype.validateDisabledRowSummaries=function(n,t){var i=0;return i=i+n.TablixMembers.length>1?0:1,n.TablixMembers.length<=1&&(this.rows[t].enableSummaryRow=!1),n.TablixMembers.length>0&&n.TablixMembers[0].TablixMembers.length>0&&(i=i+this.validateDisabledRowSummaries(n.TablixMembers[0],t+1)),i},n.prototype.validateDisabledColumnSummaries=function(n,t){var i=0;return n.TablixMembers.length>0&&n.TablixMembers[0].TablixMembers.length>0&&(i=i+n.TablixMembers.length>1?0:1,n.TablixMembers.length<=1&&(this.columns[t].enableSummaryColumn=!1),i=i+this.validateDisabledColumnSummaries(n.TablixMembers[0],t+1)),i},n.prototype.deserializeGrid=function(n){var i,r,e,o,t,f,u,s;for(this.tableElement.empty(),this.columnName="",this.rowName="",i=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo"),i.Filters=n.Filters,i.SortExpressions=n.SortExpressions,this.dataGroupInfo=i,ej.isNullOrUndefined(this.gridJson.TablixCorner)||this.populateTablixCorners(),r=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createValueInfo"),r.Name="Value",r.DisplayName="Value",this.dataGroupInfo.Values.push(r),this.populateColumnInfo(this.gridJson.TablixColumnHierarchy.TablixMembers[0],this.dataGroupInfo.Columns),this.isEmptyColumn=this.dataGroupInfo.Columns.length===0&&this.gridJson.TablixRowHierarchy.TablixMembers.length>1&&!ej.isNullOrUndefined(this.gridJson.TablixRowHierarchy.TablixMembers[1].Group)&&this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0?!0:!1,this.isEmptyColumn?this.populateRowInfo(this.gridJson.TablixRowHierarchy.TablixMembers[1],this.dataGroupInfo.Rows):this.populateRowInfo(this.gridJson.TablixRowHierarchy.TablixMembers[0],this.dataGroupInfo.Rows),e=this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0?this.dataGroupInfo.Values[0].Values.length:1,this.updateColumnDatas(),this.updateRowDatas(),this.dataGroupInfo.Columns.length>0?(o=this.validateDisabledColumnSummaries(this.gridJson.TablixColumnHierarchy.TablixMembers[0],0),this.gridJson.TablixBody.TablixColumns.length===(this.dataGroupInfo.Columns.length-o)*e&&(this.enableTableSummaryColumn=!1)):this.enableTableSummaryColumn=!1,this.dataGroupInfo.Rows.length>0?(t=0,this.isEmptyColumn&&this.dataGroupInfo.Rows.length>1?t=this.validateDisabledRowSummaries(this.gridJson.TablixRowHierarchy.TablixMembers[1],0):this.isEmptyColumn||(t=this.validateDisabledRowSummaries(this.gridJson.TablixRowHierarchy.TablixMembers[0],0)),this.gridJson.TablixBody.TablixRows.length===this.dataGroupInfo.Rows.length-t&&(this.enableTableSummaryRow=!1),this.isEmptyColumn&&this.gridJson.TablixBody.TablixRows.length===this.dataGroupInfo.Rows.length+1-t&&(this.enableTableSummaryRow=!1)):this.enableTableSummaryRow=!1,this.renderColumnGroups(this.dataGroupInfo,!1),this.renderColumnHeader(this.dataGroupInfo,!1),this.renderRowGroups(this.dataGroupInfo,!1),this.renderDatas(this.dataGroupInfo,!1),this.isColumnSettingsEnabled=this.dataGroupInfo.Columns.length>0,f=ej.buildTag("colgroup","",{}),u=0;u<this.columnWidths.length;u++)s=ej.buildTag("col","",{width:this.columnWidths[u]+"px"}),f.append(s);f.prependTo(this.tableElement);this.updateGridWidth(!1);this.updateGridHeight(!1);this.tableElement.css("table-layout","fixed")},n.prototype.renderRowGroups=function(n,t,i){var w,r,u,b,a,v,y,p,l,e,f,s;if(n.Rows.length>0){var h=!1,o=ej.isNullOrUndefined(i)?this.isEmptyColumn?0:n.Columns.length+1:n.Columns.length+1+n.Rows.length,c=n.Values.length>0&&n.Values.length===0||n.Values.length===0?n.Columns.length+1+n.Rows.length:n.Columns.length+1+n.Rows.length+1;for(this.isEmptyColumn&&(!t&&n.Rows.length>1?(w=this.validateDisabledRowSummaries(this.gridJson.TablixRowHierarchy.TablixMembers[1],0),c=n.Rows.length-w+(this.enableTableSummaryRow?1:0)):c=n.Rows.length+(this.enableTableSummaryRow?1:0)),t||this.enableTableSummaryRow||this.isEmptyColumn||(c=n.Values.length>0&&n.Values.length===0||n.Values.length===0?n.Columns.length+1+n.Rows.length:n.Columns.length+1+this.gridJson.TablixBody.TablixRows.length),e=void 0,r=0;r<n.Rows.length;r++)for(u=o;u<c;u++)if(r===0&&(e=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"})),this.tableRows=this.tableElement.find("tr"),u===o?(f=void 0,f=this.createTableCellHeader({RowSpan:n.Values.length>0&&n.Values[0].Values.length>0?n.Rows.length-r:"1"}),f.text("[ "+n.Rows[r].Value.split("!")[1].split(".")[0]+" ]"),r===0?t&&(this.gridJson.TablixRowHierarchy.TablixMembers.push(this.createTablixMemberGroup()),this.populateTablixMember(this.gridJson.TablixRowHierarchy.TablixMembers[0],n.Rows[r],0),this.setRowElementStyleFromData(f,!1,0),this.gridJson.TablixRowHierarchy.TablixMembers[0].TablixHeader=this.createTablixHeader(u.toString()+r.toString(),n.Rows[r].Value,!0,{BackColor:"white",FontColor:"black"})):t&&(this.setTablixRowHeader(r,u,this.gridJson.TablixRowHierarchy.TablixMembers[0],this.createTablixHeader(u.toString()+r.toString(),n.Rows[r].Value,!0,{BackColor:"white",FontColor:"black"}),n.Rows[r],0),this.setRowElementStyleFromData(f,!1,r)),r===0?(e.append(f),h=!0):u<this.tableRows.length&&$(this.tableRows[this.isEmptyColumn&&!t?u+1:u]).append(f),t||(r===0?this.isEmptyColumn?(this.setRowElementStyle(f,this.gridJson.TablixRowHierarchy.TablixMembers[1].TablixHeader.CellContents.ReportItem,!1,r),this.columnWidths.push(ej.DashboardUtil.getPixelVal(this.gridJson.TablixRowHierarchy.TablixMembers[1].TablixHeader.Size.size))):(this.setRowElementStyle(f,this.gridJson.TablixRowHierarchy.TablixMembers[0].TablixHeader.CellContents.ReportItem,!1,r),this.columnWidths.push(ej.DashboardUtil.getPixelVal(this.gridJson.TablixRowHierarchy.TablixMembers[0].TablixHeader.Size.size))):u<this.tableRows.length&&(b=r+1,this.rowName="Row "+b,this.isEmptyColumn?(this.setRowElementStyle(f,this.getTablixRowMember(this.gridJson.TablixRowHierarchy.TablixMembers[1],1).TablixHeader.CellContents.ReportItem,!1,r),this.columnWidths.push(ej.DashboardUtil.getPixelVal(this.getTablixRowMember(this.gridJson.TablixRowHierarchy.TablixMembers[1],1).TablixHeader.Size.size))):(this.setRowElementStyle(f,this.getTablixRowMember(this.gridJson.TablixRowHierarchy.TablixMembers[0],1).TablixHeader.CellContents.ReportItem,!1,r),this.columnWidths.push(ej.DashboardUtil.getPixelVal(this.getTablixRowMember(this.gridJson.TablixRowHierarchy.TablixMembers[0],1).TablixHeader.Size.size))),this.rowName="")),u=(ej.isNullOrUndefined(i)?o:n.Columns.length+1)+n.Rows.length-r-1):n.Values.length>0&&n.Values[0].Values.length>0&&(f=void 0,f=this.createTableCellHeader({Background:"#f9f9f9"}),f.text(u===(ej.isNullOrUndefined(i)?o:n.Columns.length+1)+n.Rows.length-r?"Total":""),r===0?t&&(this.gridJson.TablixRowHierarchy.TablixMembers.push(this.createTablixMember()),this.setTableSummaryRowElementStyleFromData(f),this.gridJson.TablixRowHierarchy.TablixMembers[1].TablixHeader=this.createTablixHeader(u.toString()+r.toString(),u===(ej.isNullOrUndefined(i)?o:n.Columns.length+1)+n.Rows.length-r?"Total":"",!0,{BackColor:"#f9f9f9"})):u!==(this.isEmptyColumn?n.Rows.length:n.Columns.length+n.Rows.length+1)?t&&(this.setTablixRowSummaryHeader({startIndex:0,colIndex:r,rowIndex:u},this.getTablixRowSummaryHeader({startIndex:0,colIndex:r,rowIndex:u},this.gridJson.TablixRowHierarchy.TablixMembers[0]),this.createTablixHeader(u.toString()+r.toString(),u===(ej.isNullOrUndefined(i)?o:n.Columns.length+1)+n.Rows.length-r?"Total":"",!0,{BackColor:"#f9f9f9"}),null,u===(ej.isNullOrUndefined(i)?o:n.Columns.length+1)+n.Rows.length-r?1:0),this.setRowElementStyleFromData(f,!0,r-1)):t&&(this.setTablixLastColumnHeader(r,this.gridJson.TablixRowHierarchy.TablixMembers[1],this.createTablixHeader(u.toString()+r.toString(),u===(ej.isNullOrUndefined(i)?o:n.Columns.length+1)+n.Rows.length-r?"Total":"",!0,{BackColor:"#f9f9f9"})),this.setTableSummaryRowElementStyleFromData(f)),ej.isNullOrUndefined(i)?(r===0?e.append(f):u<this.tableRows.length&&$(this.tableRows[this.isEmptyColumn&&!t?u+1:u]).append(f),t||(a=this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers.length>2:this.gridJson.TablixRowHierarchy.TablixMembers.length>1,r===0&&a?this.isEmptyColumn?this.setTableSummaryRowElementStyle(f,this.gridJson.TablixRowHierarchy.TablixMembers[2].TablixHeader.CellContents.ReportItem):this.setTableSummaryRowElementStyle(f,this.gridJson.TablixRowHierarchy.TablixMembers[1].TablixHeader.CellContents.ReportItem):u!==n.Columns.length+n.Rows.length+1&&u<this.tableRows.length?(this.rowName="Row "+r,v=this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),v.TablixMembers.length>1?this.setRowElementStyle(f,v.TablixMembers[1].TablixHeader.CellContents.ReportItem,!0,r-1):this.addSummaryRow(this.rows[r-1].enableSummaryRow,r-1,!1),this.rowName=""):u<this.tableRows.length&&a&&(this.rowName="Row 1",this.setTableSummaryRowElementStyle(f,this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[2]:this.gridJson.TablixRowHierarchy.TablixMembers[1],1).TablixHeader.CellContents.ReportItem),this.rowName=""))):u>=this.tableRows.length-1&&e.append(f)),r===0)if(ej.isNullOrUndefined(i))if(this.tableElement.append(e),h&&n.Values.length>0&&n.Values[0].Values.length>0){for(y=0;y<n.Rows.length-r-1;y++)p=void 0,p=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"}),this.tableElement.append(p);h=!1}else h=!1;else u>=this.tableRows.length&&(this.tableElement.append(e),this.tableRows=this.tableElement.find("tr"),this.tableRows.length!==this.rowHeights.length&&this.rowHeights.push(this.rowHeights[this.rowHeights.length-1]));if(!t)for(l=0;l<this.gridJson.TablixBody.TablixColumns.length;l++)this.columnWidths.push(ej.DashboardUtil.getPixelVal(this.gridJson.TablixBody.TablixColumns[l].Width.size))}else e=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"}),f=void 0,f=this.createTableCellHeader({RowSpan:this.dataGroupInfo.Columns.length>0?this.dataGroupInfo.Columns.length:1}),f.text("Rows"),t&&(this.gridJson.TablixRowHierarchy.TablixMembers.push(this.createTablixMemberGroup()),this.populateTablixMember(this.gridJson.TablixRowHierarchy.TablixMembers[0],{EmptyField:"RowGroup"},0),this.gridJson.TablixRowHierarchy.TablixMembers[0].TablixHeader=this.createTablixHeader("RowGroup","",!0,{BackColor:"white",FontColor:"black"})),e.append(f),this.tableElement.append(e);if(n.Rows.length===1&&t)for(s=0;s<this.gridJson.TablixRowHierarchy.TablixMembers.length;s++)s>1?this.gridJson.TablixRowHierarchy.TablixMembers[s].KeepWithGroup=1:this.gridJson.TablixRowHierarchy.TablixMembers[s].TablixMembers.push(this.createTablixMember());this.tableRows=this.tableElement.find("tr")},n.prototype.getTablixColumnSummaryHeader=function(n,t){if(n.startIndex!==n.rowIndex)return n.startIndex++,n.startIndex===n.rowIndex&&n.colIndex===1||n.startIndex===this.dataGroupInfo.Columns.length-n.colIndex?t.TablixMembers.length>1?t.TablixMembers[1]:t:this.getTablixColumnSummaryHeader(n,t.TablixMembers[0])},n.prototype.setTablixColumnSummaryHeader=function(n,t,i,r){return t.TablixMembers.length>0&&ej.isNullOrUndefined(t.Group)?this.setTablixColumnSummaryHeader(n,t.TablixMembers[0],i,r):(t.TablixMembers.push(this.createTablixMember()),ej.isNullOrUndefined(r)||this.populateTablixMember(t.TablixMembers[t.TablixMembers.length-1],r),t.TablixMembers[t.TablixMembers.length-1].TablixHeader=i,t.TablixMembers[t.TablixMembers.length-1])},n.prototype.setTablixColumnHeader=function(n,t,i,r,u){return n>0?(i.TablixMembers.length===0?(i.TablixMembers.push(this.createTablixMemberGroup()),ej.isNullOrUndefined(u)||this.populateTablixMember(i.TablixMembers[i.TablixMembers.length-1],u),n=0):n--,this.setTablixColumnHeader(n,t,i.TablixMembers[0],r,u)):(i.TablixHeader=r,i)},n.prototype.setTablixLastColumnHeader=function(n,t,i){return n>0?(t.TablixMembers.length===0&&t.TablixMembers.push(this.createTablixMember()),n--,this.setTablixLastColumnHeader(n,t.TablixMembers[0],i)):(t.TablixHeader=i,t)},n.prototype.getTablixRowSummaryHeader=function(n,t){if(n.startIndex!==n.colIndex)return n.startIndex++,(n.startIndex===n.colIndex&&n.rowIndex===this.isEmptyColumn?1:this.dataGroupInfo.Columns.length+2)||n.startIndex===this.dataGroupInfo.Rows.length+1+this.dataGroupInfo.Columns.length-n.rowIndex?t.TablixMembers.length>1?t.TablixMembers[1]:t:this.getTablixRowSummaryHeader(n,t.TablixMembers[0])},n.prototype.setTablixRowSummaryHeader=function(n,t,i,r,u){return t.TablixMembers.length>0&&ej.isNullOrUndefined(t.Group)?this.setTablixColumnSummaryHeader(n,t.TablixMembers[0],i,r):(t.TablixMembers.push(this.createTablixMember()),ej.isNullOrUndefined(r)||this.populateTablixMember(t.TablixMembers[t.TablixMembers.length-1],r,u),t.TablixMembers[t.TablixMembers.length-1].TablixHeader=i,t.TablixMembers[t.TablixMembers.length-1])},n.prototype.setTablixRowHeader=function(n,t,i,r,u,f){n>0?(i.TablixMembers.length===0?(i.TablixMembers.push(this.createTablixMemberGroup()),this.populateTablixMember(i.TablixMembers[i.TablixMembers.length-1],u,f),n=0):n--,this.setTablixRowHeader(n,t,i.TablixMembers[0],r,u,f)):i.TablixHeader=r},n.prototype.setTablixHeader=function(n,t,i,r){n>0?(i.TablixMembers.length===0&&(i.TablixMembers.push(this.createTablixMember()),i.TablixMembers[0].KeepWithGroup=2),n--,this.setTablixHeader(n,t,i.TablixMembers[0],r)):i.TablixHeader=r},n.prototype.populateLastColumnMembers=function(n){for(var t=0;t<n.TablixMembers.length;t++)n.TablixMembers[t].TablixMembers.length>0?this.populateLastColumnMembers(n.TablixMembers[t]):this.lastColumnGroupMembers.push(n)},n.prototype.populateTablixMember=function(n,t,i){ej.isNullOrUndefined(t)||(ej.isNullOrUndefined(t.EmptyField)?(n.Group.Name=t.GroupName,n.Group.GroupExpressions=t.GroupExpressions,n.Group.Filters=t.Filters,n.SortExpressions=t.SortExpressions):n.Group.Name=t.EmptyField);n.KeepWithGroup=ej.isNullOrUndefined(i)?0:i},n.prototype.validateSummary=function(n){var t=$("#"+n);return ej.isNullOrUndefined(t)||t.length===0?!0:!1},n.prototype.renderColumnGroups=function(n,t,i){var s=n.Values.length>0&&n.Values[0].Values.length>0?(n.Columns.length+1)*n.Values[0].Values.length:1,o,e,r,u,v,h,c,l,f,a;if(t)for(u=ej.isNullOrUndefined(i)?0:i;u<s;u++)this.gridJson.TablixBody.TablixColumns.push(this.createTablixColumn()),!ej.isNullOrUndefined(i)&&this.columnWidths.length<this.gridJson.TablixBody.TablixColumns.length&&this.columnWidths.push(this.columnWidths[u-1]);else this.enableTableSummaryColumn||(s=n.Values.length>0?this.gridJson.TablixBody.TablixColumns.length*n.Values[0].Values.length:this.gridJson.TablixBody.TablixColumns.length);for(e=n.Values.length>0&&n.Values[0].Values.length>0?n.Values[0].Values.length:1,this.tableRows=this.tableElement.find("tr"),r=0;r<n.Columns.length;r++)for(u=ej.isNullOrUndefined(i)?0:i;u<s;u++)u===0?(f=void 0,ej.isNullOrUndefined(i)&&(f=this.createTableCellHeader({ColSpan:n.Values.length>0&&n.Values[0].Values.length>0?(n.Columns.length-r)*e:1}),ejDashboardDesigner.getInstance("DataConfiguration").validateExpression(n.Columns[r].Name,n.Columns[r].Value,!1)?f.text("<Expression>"):f.text("[ "+n.Columns[r].Value.split("!")[1].split(".")[0]+" ]")),r===0?t&&(this.gridJson.TablixColumnHierarchy.TablixMembers.push(this.createTablixMemberGroup()),o=this.gridJson.TablixColumnHierarchy.TablixMembers[0],this.populateTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],n.Columns[r]),this.setColumnElementStyleFromData(f,!1,0),this.gridJson.TablixColumnHierarchy.TablixMembers[0].TablixHeader=this.createTablixHeader(r.toString()+u.toString(),n.Columns[r].Value,!0,{BackColor:"white",FontColor:"black"})):t&&(o=this.setTablixColumnHeader(r,u,this.gridJson.TablixColumnHierarchy.TablixMembers[0],this.createTablixHeader(r.toString()+u.toString(),n.Columns[r].Value,!0,{BackColor:"white",FontColor:"black"}),n.Columns[r]),this.setColumnElementStyleFromData(f,!1,r)),ej.isNullOrUndefined(i)&&r<this.tableRows.length&&($(this.tableRows[r]).append(f),t||(r===0?(this.setColumnElementStyle(f,this.gridJson.TablixColumnHierarchy.TablixMembers[0].TablixHeader.CellContents.ReportItem,!1,r),this.rowHeights.push(ej.DashboardUtil.getPixelVal(this.gridJson.TablixColumnHierarchy.TablixMembers[0].TablixHeader.Size.size)+2*ej.DashboardUtil.getPixelVal("2pt"))):(v=r+1,this.columnName="Column "+v,h=this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1).TablixHeader,this.setColumnElementStyle(f,h.CellContents.ReportItem,!1,r),this.rowHeights.push(ej.DashboardUtil.getPixelVal(h.Size.size)+2*ej.DashboardUtil.getPixelVal("2pt")),this.columnName=""))),t&&r===this.dataGroupInfo.Columns.length-1&&(this.lastColumnGroupMembers.length>u?this.lastColumnGroupMembers[u]=o:this.lastColumnGroupMembers.push(o)),u=(n.Values.length>0&&n.Values[0].Values.length>0?(n.Columns.length-r)*e:n.Columns.length-r)-1):n.Values.length>0&&n.Values[0].Values.length>0&&(f=void 0,c=this.validateSummary("summaryColumn_"+r.toString()+(this.dataGroupInfo.Rows.length+u).toString()),(ej.isNullOrUndefined(i)||c)&&(f=this.createTableCellHeader({ColSpan:e,Id:"summaryColumn_"+r.toString()+(this.dataGroupInfo.Rows.length+u).toString()}),f.text(Math.floor(u/e)===n.Columns.length-r?"Total":"")),r===0?t&&(this.gridJson.TablixColumnHierarchy.TablixMembers.push(this.createTablixMember()),o=this.gridJson.TablixColumnHierarchy.TablixMembers[1],this.setTableSummaryColumnElementStyleFromData(f),this.gridJson.TablixColumnHierarchy.TablixMembers[1].TablixHeader=this.createTablixHeader(r.toString()+u.toString(),u===n.Columns.length*e-r?"Total":"",!0,{BackColor:"#f9f9f9"})):u!==n.Columns.length*e?t&&(o=this.setTablixColumnSummaryHeader({startIndex:0,rowIndex:r,colIndex:Math.floor(u/e)},this.getTablixColumnSummaryHeader({startIndex:0,rowIndex:r,colIndex:Math.floor(u/e)},this.gridJson.TablixColumnHierarchy.TablixMembers[0]),this.createTablixHeader(r.toString()+u.toString(),u===n.Columns.length*e-r?"Total":"",!0,{BackColor:"#f9f9f9"}),null),this.setColumnElementStyleFromData(f,!0,r-1)):t&&(o=this.setTablixLastColumnHeader(r,this.gridJson.TablixColumnHierarchy.TablixMembers[1],this.createTablixHeader(r.toString()+u.toString(),u===n.Columns.length*e-r?"Total":"",!0,{BackColor:"#f9f9f9"})),this.setTableSummaryColumnElementStyleFromData(f)),t&&r===this.dataGroupInfo.Columns.length-1&&(this.lastColumnGroupMembers.length>u?this.lastColumnGroupMembers[u]=o:this.lastColumnGroupMembers.push(o)),(ej.isNullOrUndefined(i)||c)&&r<this.tableRows.length&&($(this.tableRows[r]).append(f),t||(r===0?this.setTableSummaryColumnElementStyle(f,this.gridJson.TablixColumnHierarchy.TablixMembers[1].TablixHeader.CellContents.ReportItem):u!==n.Columns.length?(this.columnName="Column "+r,l=this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),l.TablixMembers.length>1?this.setColumnElementStyle(f,l.TablixMembers[1].TablixHeader.CellContents.ReportItem,!0,r-1):this.addSummaryColumn(this.columns[r-1].enableSummaryColumn,r-1,!1),this.columnName=""):(this.columnName="Column 1",this.setTableSummaryColumnElementStyle(f,this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[1],1).TablixHeader.CellContents.ReportItem),this.columnName=""))),u=u+e-1);if(t||this.populateLastColumnMembers(this.gridJson.TablixColumnHierarchy),n.Columns.length===0)if(f=void 0,f=this.createTableCellHeader(),f.text("Columns"),$(this.tableRows[0]).append(f),t&&n.Values.length>0&&n.Values[0].Values.length>0)for(a=0;a<n.Values[0].Values.length;a++)this.gridJson.TablixColumnHierarchy.TablixMembers.push(this.createTablixMember());else t&&(this.gridJson.TablixColumnHierarchy.TablixMembers.push(this.createTablixMemberGroup()),this.populateTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],{EmptyField:"ColumnGroup"}),this.gridJson.TablixColumnHierarchy.TablixMembers[0].TablixHeader=this.createTablixHeader("ColumnGroup","",!0,{BackColor:"white",FontColor:"black"}));this.tableRows=this.tableElement.find("tr")},n.prototype.renderCornerRows=function(n){for(var f,r,i,t,u=0;u<n.Columns.length;u++)f=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"}),u===0&&(t=void 0,t=this.createTableCellHeader({RowSpan:n.Columns.length,ColSpan:n.Rows.length===0?1:n.Rows.length}),t.text(this.cornerLabel),f.append(t),this.setCornerCellElementStyleFromData(t)),this.tableElement.append(f);if(r=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"}),this.dataGroupInfo.Rows.length===0){if(this.dataGroupInfo.Columns.length===0)t=void 0,t=this.createTableCellHeader(),t.text(""),r.append(t),this.tableElement.append(r),this.gridJson.TablixCorner.TablixCornerRows.push(this.createTablixCornerRow(!1,1,1,1));else if(n.Columns.length>0&&n.Values.length>0&&n.Values[0].Values.length>0){for(this.gridJson.TablixCorner.TablixCornerRows.push(this.createTablixCornerRow(!1,n.Columns.length,1,n.Columns.length)),i=0;i<1;i++)t=void 0,t=this.createTableCellHeader({Background:"#77a7fb",Color:"white"}),t.text(""),r.append(t),this.gridJson.TablixCorner.TablixCornerRows[n.Columns.length].TablixCornerCells[i]=this.createTablixCornerCell(!1,n.Columns.length,i,1,1),this.setHeaderElementStyleFromData(t),this.gridJson.TablixCorner.TablixCornerRows[n.Columns.length].TablixCornerCells[i].CellContents.ReportItem=this.createReportItem("_CC"+n.Columns.length.toString()+i,"",!0,{BackColor:"#77a7fb",FontColor:"white"});this.tableElement.append(r)}this.tableRows=this.tableElement.find("tr")}else{for(this.gridJson.TablixCorner.TablixCornerRows.push(this.createTablixCornerRow(!1,n.Columns.length,n.Rows.length,n.Columns.length)),i=0;i<this.dataGroupInfo.Rows.length;i++)t=void 0,t=this.createTableCellHeader({Background:"#77a7fb",Color:"white"}),t.text(n.Rows[i].Field),r.append(t),this.gridJson.TablixCorner.TablixCornerRows[n.Columns.length].TablixCornerCells[i]=this.createTablixCornerCell(!1,n.Columns.length,i,1,1),this.setHeaderElementStyleFromData(t),this.gridJson.TablixCorner.TablixCornerRows[n.Columns.length].TablixCornerCells[i].CellContents.ReportItem=this.createReportItem("_CC"+n.Columns.length.toString()+i,n.Rows[i].Field,!0,{BackColor:"#77a7fb",FontColor:"white"});this.tableElement.append(r)}this.tableRows=this.tableElement.find("tr")},n.prototype.populateCornerCellHeader=function(){this.gridJson.TablixCorner.TablixCornerRows.push(this.createTablixCornerRow(!1,this.dataGroupInfo.Columns.length,this.dataGroupInfo.Rows.length,this.dataGroupInfo.Columns.length));for(var n=0;n<this.dataGroupInfo.Rows.length;n++)this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells[n]=this.createTablixCornerCell(!1,this.dataGroupInfo.Columns.length,n,1,1),this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells[n].CellContents.ReportItem=this.createReportItem("_CC"+this.dataGroupInfo.Columns.length.toString()+n,this.dataGroupInfo.Rows[n].Field,!0,{BackColor:"#77a7fb",FontColor:"white"})},n.prototype.populateColumnHeaders=function(){var r=this.dataGroupInfo.Values.length>0?this.gridJson.TablixBody.TablixColumns.length*this.dataGroupInfo.Values[0].Values.length:this.gridJson.TablixBody.TablixColumns.length,n,t,i;if(this.dataGroupInfo.Values.length>0&&(this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Values[0].Values.length>1))for(n=0,t=0,i=0;i<r;i++)t===this.dataGroupInfo.Values[0].Values.length&&(n++,t=0),this.lastColumnGroupMembers.length>0&&this.lastColumnGroupMembers[n].TablixMembers.length<this.dataGroupInfo.Values[0].Values.length&&(this.lastColumnGroupMembers[n].TablixMembers.push(this.createTablixMember()),this.lastColumnGroupMembers[n].TablixMembers[this.lastColumnGroupMembers[n].TablixMembers.length-1].TablixHeader=this.createTablixHeader(this.dataGroupInfo.Columns.length.toString()+i.toString(),this.dataGroupInfo.Values[0].Values[t].Field,!0,{BackColor:"#77a7fb",FontColor:"white"}),this.setHeaderReportStyle(this.lastColumnGroupMembers[n].TablixMembers[this.lastColumnGroupMembers[n].TablixMembers.length-1].TablixHeader.CellContents.ReportItem)),t++},n.prototype.renderColumnHeader=function(n,t,i){var c,l,o,e,a,s,v,h,u,r,f;if(this.tableRows=this.tableElement.find("tr"),c=n.Values.length>0?(n.Columns.length+1)*n.Values[0].Values.length:1,t||this.enableTableSummaryColumn||(c=this.gridJson.TablixBody.TablixColumns.length),l=n.Values.length>0&&n.Values[0].Values.length>0?n.Values[0].Values.length:1,n.Values.length>0&&n.Values[0].Values.length>0&&n.Columns.length>0)for(u=ej.isNullOrUndefined(i)?0:Math.floor(i/l),o=0,r=ej.isNullOrUndefined(i)?0:i;r<c;r++)e=void 0,a=this.validateSummary("summaryColumn_"+this.dataGroupInfo.Columns.length.toString()+(this.dataGroupInfo.Rows.length+r).toString()),(ej.isNullOrUndefined(i)||a)&&(e=this.createTableCellHeader({Background:"#77a7fb",Color:"white",Id:"summaryColumn_"+this.dataGroupInfo.Columns.length.toString()+(this.dataGroupInfo.Rows.length+r).toString()})),o===n.Values[0].Values.length&&(u++,o=0),t&&this.lastColumnGroupMembers.length>0&&this.lastColumnGroupMembers[u].TablixMembers.length<n.Values[0].Values.length&&(this.lastColumnGroupMembers[u].TablixMembers.push(this.createTablixMember()),this.lastColumnGroupMembers[u].TablixMembers[this.lastColumnGroupMembers[u].TablixMembers.length-1].TablixHeader=this.createTablixHeader(n.Columns.length.toString()+r.toString(),n.Values[0].Values[o].Field,!0,{BackColor:"#77a7fb",FontColor:"white"}),this.setHeaderElementStyleFromData(e)),(ej.isNullOrUndefined(i)||a)&&(e.text(n.Values[0].Values[o].Field),$(this.tableRows[n.Columns.length]).append(e),t||(r<n.Values[0].Values.length?(s=this.getTablixMemberHeader(this.gridJson.TablixColumnHierarchy.TablixMembers[0],r),this.setHeaderElementStyle(e,ej.isNullOrUndefined(s)?null:s.CellContents.ReportItem),r!==0||ej.isNullOrUndefined(s)||this.rowHeights.push(ej.DashboardUtil.getPixelVal(this.getTablixMemberHeader(this.gridJson.TablixColumnHierarchy.TablixMembers[0],r).Size.size)+2*ej.DashboardUtil.getPixelVal("2pt"))):r>=n.Columns.length*n.Values[0].Values.length?(s=this.getTablixMemberHeader(this.gridJson.TablixColumnHierarchy.TablixMembers[1],r-n.Columns.length*n.Values[0].Values.length),this.setHeaderElementStyle(e,ej.isNullOrUndefined(s)?null:s.CellContents.ReportItem)):(v=this.getTablixMemberSummaryHeader(this.gridJson.TablixColumnHierarchy.TablixMembers[0],0,u-1,o),this.setHeaderElementStyle(e,ej.isNullOrUndefined(v)?null:v.CellContents.ReportItem)))),o++;else if(n.Columns.length===0&&n.Values.length>0&&n.Values[0].Values.length>0&&this.dataGroupInfo.Rows.length>0){for(h=void 0,h=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"}),this.tableElement.append(h),$(h).insertBefore($(this.tableRows[0])),this.tableRows=this.tableElement.find("tr"),t?this.gridJson.TablixBody.TablixRows.push(this.createTablixRow()):this.rowHeights.push(ej.DashboardUtil.getPixelVal(this.gridJson.TablixBody.TablixRows[0].Height.size)+2*ej.DashboardUtil.getPixelVal("2pt")),u=0;u<n.Rows.length;u++)f=this.createTableCellHeader({Background:"#77a7fb",Color:"white"}),f.text(n.Rows[u].Field),t?u===0?(this.gridJson.TablixRowHierarchy.TablixMembers.splice(0,0,this.createTablixMember()),this.gridJson.TablixRowHierarchy.TablixMembers[0].TablixHeader=this.createTablixHeader("header_row0"+u.toString(),n.Rows[u].Field,!0,{BackColor:"#77a7fb",FontColor:"white"}),this.setHeaderElementStyleFromData(f)):(this.setTablixLastColumnHeader(u,this.gridJson.TablixRowHierarchy.TablixMembers[0],this.createTablixHeader("header_row0"+u.toString(),n.Rows[u].Field,!0,{BackColor:"#77a7fb",FontColor:"white"})),this.setHeaderElementStyleFromData(f)):this.setHeaderElementStyle(f,this.gridJson.TablixBody.TablixRows[0].TablixCells[0].CellContents.ReportItem),$(this.tableRows[0]).append(f);for(r=0;r<l;r++)f=this.createTableCellHeader({Background:"#77a7fb",Color:"white"}),f.text(n.Values[0].Values[r].Field),t?(this.gridJson.TablixBody.TablixRows[0].TablixCells.push(this.createTablixCell("_header_0"+r.toString(),n.Values[0].Values[r].Field,!0,{BackColor:"#77a7fb",FontColor:"white"})),this.setHeaderElementStyleFromData(f)):this.setHeaderElementStyle(f,this.gridJson.TablixBody.TablixRows[0].TablixCells[r].CellContents.ReportItem),$(this.tableRows[0]).append(f)}$(this.tableRows[this.dataGroupInfo.Columns.length]).css("display",this.showHeader?"table-row":"none");this.isEmptyColumn||this.gridJson.TablixCorner.TablixCornerRows.length!==n.Columns.length||(this.showHeader=!1)},n.prototype.renderDatas=function(n,t,i,r){var s,h,e,c,l,y,u,p,f;if(n.Values.length>0&&n.Values[0].Values.length){this.tableRows=this.tableElement.find("tr");var o=n.Values[0].Values.length,a=n.Rows.length+1+(this.isEmptyColumn?1:0),v=n.Columns.length+1;if(t||(this.enableTableSummaryRow||(a=this.gridJson.TablixBody.TablixRows.length),this.enableTableSummaryColumn||this.isEmptyColumn||(v=this.gridJson.TablixBody.TablixColumns.length)),s=ej.isNullOrUndefined(i)?0:i,h=0,ej.isNullOrUndefined(r))for(e=this.isEmptyColumn?1:0;e<a;e++)for(t?ej.isNullOrUndefined(i)&&this.gridJson.TablixBody.TablixRows.push(this.createTablixRow()):this.gridJson.TablixBody.TablixRows.length>e&&this.rowHeights.push(ej.DashboardUtil.getPixelVal(this.gridJson.TablixBody.TablixRows[e].Height.size)+2*ej.DashboardUtil.getPixelVal("2pt")),s=ej.isNullOrUndefined(i)?0:i,h=0,u=ej.isNullOrUndefined(i)?0:i;u<v*o;u++)e===(this.isEmptyColumn?1:0)&&u<o?(ej.isNullOrUndefined(i)&&(f=this.createTableCell(),ejDashboardDesigner.getInstance("DataConfiguration").validateExpression(n.Values[0].Values[u].Name,n.Values[0].Values[u].Value,!0)?f.text("<Expression>"):f.text("[ "+n.Values[0].Values[u].Value.split("!")[1].split(".")[0]+" ]"),$(this.tableRows[e+n.Columns.length+(this.isEmptyColumn||!this.showHeader?0:1)]).append(f),t?this.setContentElementStyleFromData(f):this.setContentElementStyle(f,this.gridJson.TablixBody.TablixRows[e].TablixCells[u].CellContents.ReportItem)),t&&(n.Columns.length!==0||this.isEmptyColumn||(u===0?(this.gridJson.TablixColumnHierarchy.TablixMembers[0].TablixHeader=this.createTablixHeader("0"+u.toString(),n.Values[0].Values[u].Field,!0,{BackColor:"#77a7fb",FontColor:"white"}),c=$(this.tableRows[0]).find("th"),$(c[c.length-1]).text(n.Values[0].Values[u].Field),$(c[c.length-1]).css({"background-color":"#77a7fb",color:"white"})):(l=this.createTableCellHeader({Background:"#77a7fb",Color:"white"}),l.text(n.Values[0].Values[u].Field),this.gridJson.TablixColumnHierarchy.TablixMembers.push(this.createTablixMember()),this.gridJson.TablixColumnHierarchy.TablixMembers[u].TablixHeader=this.createTablixHeader("0"+u.toString(),n.Values[0].Values[u].Field,!0,{BackColor:"#77a7fb",FontColor:"white"}),$(this.tableRows[0]).append(l))),this.gridJson.TablixBody.TablixRows[e].TablixCells.push(this.createTablixCell("_data_"+e.toString()+u.toString(),n.Values[0].Values[u].Value,!0)))):(h=1,f=void 0,y=this.validateSummary("summaryColumn_"+(e+n.Columns.length+1).toString()+(this.dataGroupInfo.Rows.length+u).toString()),(ej.isNullOrUndefined(i)||y)&&(f=this.createTableCellHeader({Background:"#f9f9f9",Id:"summaryColumn_"+(e+n.Columns.length+1).toString()+(this.dataGroupInfo.Rows.length+u).toString()}),ejDashboardDesigner.getInstance("DataConfiguration").validateExpression(n.Values[0].Values[u%o].Name,n.Values[0].Values[u%o].Value,!0)?f.text("<Expression>"):f.text("[ "+n.Values[0].Values[u%o].Value+" ]"),$(this.tableRows[e+n.Columns.length+(this.isEmptyColumn||!this.showHeader?0:1)]).append(f),h===o&&(s++,h=0),t?e===0?u<n.Columns.length*o?this.setColumnElementStyleFromData(f,!0,this.dataGroupInfo.Columns.length-(s+1)):this.setTableSummaryColumnElementStyleFromData(f):e<this.dataGroupInfo.Rows.length?this.setRowElementStyleFromData(f,!0,this.dataGroupInfo.Rows.length-(e+1)):this.setTableSummaryRowElementStyleFromData(f):e<this.gridJson.TablixBody.TablixRows.length?this.setElementStyle(f,this.gridJson.TablixBody.TablixRows[e].TablixCells[u].CellContents.ReportItem,s):this.setElementStyle(f,this.gridJson.TablixBody.TablixRows[this.gridJson.TablixBody.TablixRows.length-1].TablixCells[u].CellContents.ReportItem,s),h++),t&&e<this.gridJson.TablixBody.TablixRows.length&&this.gridJson.TablixBody.TablixRows[e].TablixCells.push(this.createTablixCell("_data_"+e.toString()+u.toString(),n.Values[0].Values[u%o].Value,!0,{BackColor:"#f9f9f9"})));else for(t&&this.gridJson.TablixBody.TablixRows.push(this.createTablixRow()),s=ej.isNullOrUndefined(i)?0:i,h=0,u=0;u<(n.Columns.length+1)*o;u++)f=void 0,p=$(this.tableRows[r+n.Columns.length+1]).find("th").length-1<u+n.Rows.length,(ej.isNullOrUndefined(i)||p)&&(f=this.createTableCellHeader({Background:"#f9f9f9",Id:"summaryColumn_"+(r+n.Columns.length+1).toString()+(this.dataGroupInfo.Rows.length+u).toString()}),f.text(n.Values[0].Values[u%o].Value),$(this.tableRows[r+n.Columns.length+1]).append(f),h===o&&(s++,h=0),t?r===0?u<n.Columns.length*o?this.setColumnElementStyleFromData(f,!0,this.dataGroupInfo.Columns.length-(s+1)):this.setTableSummaryColumnElementStyleFromData(f):r<this.dataGroupInfo.Rows.length?this.setRowElementStyleFromData(f,!0,this.dataGroupInfo.Rows.length-(r+1)):this.setTableSummaryRowElementStyleFromData(f):this.setElementStyle(f,this.gridJson.TablixBody.TablixRows[r].TablixCells[u].CellContents.ReportItem,s),h++),t&&this.gridJson.TablixBody.TablixRows[r].TablixCells.push(this.createTablixCell("_data_"+r.toString()+u.toString(),n.Values[0].Values[u%o].Value,!0,{BackColor:"#f9f9f9"}))}else(n.Values.length>0&&n.Values[0].Values.length===0||n.Values.length===0)&&(f=void 0,f=this.createTableCellHeader({RowSpan:this.dataGroupInfo.Rows.length>0?n.Columns.length===0?this.dataGroupInfo.Rows.length:this.dataGroupInfo.Rows.length+1:1,ColSpan:this.dataGroupInfo.Columns.length>0&&n.Values.length>0&&n.Values[0].Values.length>0?this.dataGroupInfo.Columns.length+1:1}),f.text("Datas"),t&&(this.gridJson.TablixBody.TablixRows.push(this.createTablixRow()),this.gridJson.TablixBody.TablixRows[0].TablixCells.push(this.createTablixCell("_emptyData","",!0))),$(this.tableRows[n.Columns.length>0?n.Columns.length:n.Columns.length+1]).append(f));this.tableRows=this.tableElement.find("tr")},n.prototype.setTablixMemberHeader=function(n,t,i){n.TablixMembers.length>0&&(n.TablixMembers[0].TablixMembers.length>0?this.setTablixMemberHeader(n.TablixMembers[0],t,i):n.TablixMembers[t].TablixHeader.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=i)},n.prototype.setTablixRowGroupHeader=function(n,t,i,r){t!==i?this.setTablixRowGroupHeader(n.TablixMembers[0],t+1,i,r):n.TablixHeader.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=r},n.prototype.setTablixMemberSummaryHeader=function(n,t,i,r,u){t!==i?this.setTablixMemberSummaryHeader(n.TablixMembers[0],t+1,i,r,u):this.setTablixMemberHeader(n.TablixMembers[1],r,u)},n.prototype.getTablixMemberHeader=function(n,t){if(n.TablixMembers.length>0)return n.TablixMembers[0].TablixMembers.length>0?this.getTablixMemberHeader(n.TablixMembers[0],t):n.TablixMembers[t].TablixHeader},n.prototype.getTablixMemberSummaryHeader=function(n,t,i,r){return t!==i?this.getTablixMemberSummaryHeader(n.TablixMembers[0],t+1,i,r):n.TablixMembers.length>1?this.getTablixMemberHeader(n.TablixMembers[1],r):null},n.prototype.getTablixMemberSize=function(n,t){if(t===0)return n.TablixHeader.Size.size;for(var i=0;i<n.TablixMembers.length;i++)return this.getTablixMemberSize(n.TablixMembers[i],t-1)},n.prototype.setTablixMemberSize=function(n,t,i){if(t===0)ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.TablixHeader)||(n.TablixHeader.Size.size=i);else for(var r=0;r<n.TablixMembers.length;r++)this.setTablixMemberSize(n.TablixMembers[r],t-1,i)},n.prototype.renderTable=function(n){var t,u,r,i;if(this.tableElement.empty(),this.lastColumnGroupMembers=[],n.Rows.length>0||n.Columns.length>0||n.Values.length>0&&n.Values[0].Values.length>0)this.controlContainer.css("height",2*ej.DashboardUtil.getPixelVal(this.rowHeight)+4+"px"),this.controlContainer.css("width",2*ej.DashboardUtil.getPixelVal(this.columnWidth)+4+"px"),this.tableElement.css("table-layout","auto"),this.gridJson.TablixBody.TablixColumns=[],this.gridJson.TablixBody.TablixRows=[],this.gridJson.TablixColumnHierarchy.TablixMembers=[],this.gridJson.TablixRowHierarchy.TablixMembers=[],n.Values.length===0||n.Values.length>0&&n.Values[0].Values.length===0||n.Values.length>0&&n.Values[0].Values.length>0&&(n.Columns.length!==0||n.Rows.length===0)?(this.gridJson.TablixCorner={__type:"Syncfusion.RDL.DOM.TablixCorner",TablixCornerRows:[]},this.gridJson.TablixCorner.TablixCornerRows=this.createTablixCornerRows(n.Rows.length===0?n.Values.length>0&&n.Values[0].Values.length>0?1:n.Rows.length:n.Rows.length,n.Columns.length)):delete this.gridJson.TablixCorner,(n.Values.length===0||n.Values.length>0&&n.Values[0].Values.length===0||n.Values.length>0&&n.Values[0].Values.length>0&&(n.Columns.length!==0||n.Rows.length===0))&&this.renderCornerRows(n),this.renderColumnGroups(n,!0),this.renderRowGroups(n,!0),this.renderColumnHeader(n,!0),this.renderDatas(n,!0),this.gridJson.DataSetName=n.Values.length>0&&n.Values[0].Values.length>0?n.Values[0].Values[0].Name:n.Columns.length>0?n.Columns[0].Name:n.Rows.length>0?n.Rows[0].Name:"";else{for(this.updateDefaultTableJson(),t=0;t<=1;t++){for(u=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle"},{vAlign:"top"}),r=1;r<=2;r++)i=void 0,t===0||t===1&&r===1?(i=this.createTableCellHeader(),t===0&&r===2?i.text("Columns"):t===1&&i.text("Rows")):(i=this.createTableCell(),t>0&&i.text("Datas")),u.append(i);this.tableElement.append(u)}this.controlContainer.css("height",2*ej.DashboardUtil.getPixelVal(this.rowHeight)+4+"px");this.controlContainer.css("width",2*ej.DashboardUtil.getPixelVal(this.columnWidth)+4+"px");this.updateCurrentSize()}this.tableRows=this.tableElement.find("tr")},n.prototype.updateGridHeight=function(n){var f,u,e,o,s,i,r,t;for(this.tableRows=$(this.tableElement).find("tr"),t=0;t<this.tableRows.length;t++){for(f=$(this.tableRows[t]).find("th"),u=t,i=0;i<f.length;i++){for(u=t,e=0,o=0;o<parseInt($(f[i]).attr("rowspan"),10);o++)e=e+this.rowHeights[u],u++;$(f[i])[0].style.height=e+"px"}for(s=$(this.tableRows[t]).find("td"),i=0;i<s.length;i++)$(s[i])[0].style.height=this.rowHeights[u]+"px"}if(n)for(t=0;t<this.tableRows.length;t++)if(t<this.rowHeights.length)if(t<this.dataGroupInfo.Columns.length+1&&this.dataGroupInfo.Columns.length>0)for(i=0;i<this.gridJson.TablixColumnHierarchy.TablixMembers.length;i++)this.setTablixMemberSize(this.gridJson.TablixColumnHierarchy.TablixMembers[i],t,ej.DashboardUtil.getUnitVal(this.rowHeights[t],"in"));else this.gridJson.TablixBody.TablixRows.length>t-(this.dataGroupInfo.Columns.length+1)&&t-(this.dataGroupInfo.Columns.length+1)>=0&&(this.isEmptyColumn&&t<this.gridJson.TablixBody.TablixRows.length?this.gridJson.TablixBody.TablixRows[t].Height.size=ej.DashboardUtil.getUnitVal(this.rowHeights[t],"in"):this.isEmptyColumn||(this.gridJson.TablixBody.TablixRows[t-(this.dataGroupInfo.Columns.length+1)].Height.size=ej.DashboardUtil.getUnitVal(this.rowHeights[t],"in")));for(r=0,t=0;t<this.rowHeights.length;t++)r=r+this.rowHeights[t];return Math.round(r+this.getBorderHeight())+"px"!==this.controlContainer.css("height")&&this.controlContainer.css("height",r+this.getBorderHeight()+"px"),this.updateCurrentSize(),r},n.prototype.updateGridWidth=function(n){var f,r,u,i,t;for(this.tableRows=$(this.tableElement).find("tr"),f=$(this.tableElement).find("col"),t=0;t<f.length;t++)$(f[t])[0].style.width=this.columnWidths[t]+"px";if(n)for(r=this.dataGroupInfo.Rows.length===0?1:this.dataGroupInfo.Rows.length,t=0;t<this.dataGroupInfo.Rows.length+this.gridJson.TablixBody.TablixColumns.length;t++)if(t<this.columnWidths.length)if(t<this.dataGroupInfo.Rows.length)for(u=0;u<this.gridJson.TablixRowHierarchy.TablixMembers.length;u++)this.setTablixMemberSize(this.gridJson.TablixRowHierarchy.TablixMembers[u],t,ej.DashboardUtil.getUnitVal(this.columnWidths[t],"in"));else this.gridJson.TablixBody.TablixColumns.length>t-r&&t-r>=0&&(this.gridJson.TablixBody.TablixColumns[t-r].Width.size=ej.DashboardUtil.getUnitVal(this.columnWidths[t],"in"));for(i=0,t=0;t<this.columnWidths.length;t++)i=i+this.columnWidths[t];return Math.round(i+this.getBorderWidth())+"px"!==this.controlContainer.css("width")&&this.controlContainer.css("width",i+this.getBorderWidth()+"px"),this.updateCurrentSize(),i},n.prototype.updateHeightValues=function(n,t){this.dataGroupInfo.Columns.length===0&&this.dataGroupInfo.Rows.length===0&&n>0&&t>this.rowHeights[0]-2*ej.DashboardUtil.getPixelVal("2pt")&&(t=this.rowHeights[0]-2*ej.DashboardUtil.getPixelVal("2pt"));this.rowHeights.length>n&&t>this.rowHeights[n]?this.rowHeights[n]=t+2*ej.DashboardUtil.getPixelVal("2pt"):this.rowHeights.length<=n&&this.rowHeights.push(t+2*ej.DashboardUtil.getPixelVal("2pt"))},n.prototype.updateMaximumRowHeight=function(){var t,i,r,n,u;for(this.rowHeights=[],this.tableRows=$(this.tableElement).find("tr"),t=0;t<this.tableRows.length;t++){for(i=$(this.tableRows[t]).find("th"),n=0;n<i.length;n++)i.length>n&&parseInt($(i[n]).attr("rowspan"),10)===1&&(u=this.validateHeight($(i[n]).height()),this.updateHeightValues(t,u));for(r=$(this.tableRows[t]).find("td"),n=0;n<r.length;n++)r.length>n&&parseInt($(r[n]).attr("rowspan"),10)===1&&(u=this.validateHeight($(r[n]).height()),this.updateHeightValues(t,u))}},n.prototype.validateHeight=function(n){return n<this.minimumHeight?this.minimumHeight:n},n.prototype.validateWidth=function(n){return n<this.minimumWidth?this.minimumWidth:n},n.prototype.updateMaximumColumnWidth=function(){var i,r,u,f,n,t;for(this.columnWidths=[],this.tableRows=$(this.tableElement).find("tr"),i=this.dataGroupInfo.Columns.length;i<this.tableRows.length;i++){for(r=$(this.tableRows[i]).find("th"),n=0;n<r.length;n++)r.length>n&&parseInt($(r[n]).attr("colspan"),10)===1&&(t=this.validateWidth($(r[n]).width()),this.columnWidths.length>n&&t>this.columnWidths[n]?this.columnWidths[n]=t+ej.DashboardUtil.getPixelVal("4pt")+ej.DashboardUtil.getPixelVal("2pt"):this.columnWidths.length<=n&&this.columnWidths.push(t+ej.DashboardUtil.getPixelVal("4pt")+ej.DashboardUtil.getPixelVal("2pt")));for(u=$(this.tableRows[i]).find("td"),f=this.dataGroupInfo.Rows.length>0?this.dataGroupInfo.Rows.length:1,n=0;n<u.length;n++)u.length>n&&parseInt($(u[n]).attr("colspan"),10)===1&&(t=this.validateWidth($(u[n]).width()),this.columnWidths.length>n+f&&t>this.columnWidths[n+f]?this.columnWidths[n+f]=t+ej.DashboardUtil.getPixelVal("4pt")+ej.DashboardUtil.getPixelVal("2pt"):this.columnWidths.length<=n+f&&this.columnWidths.push(t+ej.DashboardUtil.getPixelVal("4pt")+ej.DashboardUtil.getPixelVal("2pt")))}},n.prototype.updatePropertyChange=function(n,t,i,r){var u,f,h,c,l,a,v,e,o,y,s;switch(n){case"Name":this.gridJson.Name=i;break;case"Description":this.propertyPanel.setDescription(this.gridJson,i);break;case"Hidden":this.updateGridVisibility(i);break;case"Left":this.updateLeftPosition(i);break;case"Top":this.updateTopPosition(i);break;case"Height":this.updateHeight(i);break;case"Width":this.updateWidth(i);break;case"ColumnSelectedFormat":this.updateColumnFormat(i);break;case"RowSelectedFormat":this.updateRowFormat(i);break;case"ColumnActionLink":this.updateColumnActionInfo(i);break;case"RowActionLink":this.updateRowActionInfo(i);break;case"BorderColorDefault":this.gridJson.Style.Border||(this.gridJson.Style.Border=this.createBorder(""));this.updateBorderColor(this.gridJson.Style.Border,i,"");break;case"BorderColorLeft":this.gridJson.Style.LeftBorder||(this.gridJson.Style.LeftBorder=this.createBorder("Left"));this.updateBorderColor(this.gridJson.Style.LeftBorder,i,"-left");break;case"BorderColorRight":this.gridJson.Style.RightBorder||(this.gridJson.Style.RightBorder=this.createBorder("Right"));this.updateBorderColor(this.gridJson.Style.RightBorder,i,"-right");break;case"BorderColorTop":this.gridJson.Style.TopBorder||(this.gridJson.Style.TopBorder=this.createBorder("Top"));this.updateBorderColor(this.gridJson.Style.TopBorder,i,"-top");break;case"BorderColorBottom":this.gridJson.Style.BottomBorder||(this.gridJson.Style.BottomBorder=this.createBorder("Bottom"));this.updateBorderColor(this.gridJson.Style.BottomBorder,i,"-bottom");break;case"BorderWidthDefault":this.gridJson.Style.Border||(this.gridJson.Style.Border=this.createBorder(""));this.updateBorderWidth(this.gridJson.Style.Border,i,"");break;case"BorderWidthLeft":this.gridJson.Style.LeftBorder||(this.gridJson.Style.LeftBorder=this.createBorder("Left"));this.updateBorderWidth(this.gridJson.Style.LeftBorder,i,"-left");break;case"BorderWidthRight":this.gridJson.Style.RightBorder||(this.gridJson.Style.RightBorder=this.createBorder("Right"));this.updateBorderWidth(this.gridJson.Style.RightBorder,i,"-right");break;case"BorderWidthTop":this.gridJson.Style.TopBorder||(this.gridJson.Style.TopBorder=this.createBorder("Top"));this.updateBorderWidth(this.gridJson.Style.TopBorder,i,"-top");break;case"BorderWidthBottom":this.gridJson.Style.BottomBorder||(this.gridJson.Style.BottomBorder=this.createBorder("Bottom"));this.updateBorderWidth(this.gridJson.Style.BottomBorder,i,"-bottom");break;case"BorderStyleDefault":this.gridJson.Style.Border||(this.gridJson.Style.Border=this.createBorder(""));this.updateBorderStyle(this.gridJson.Style.Border,i,"");break;case"BorderStyleLeft":this.gridJson.Style.LeftBorder||(this.gridJson.Style.LeftBorder=this.createBorder("Left"));this.updateBorderStyle(this.gridJson.Style.LeftBorder,i,"-left");break;case"BorderStyleRight":this.gridJson.Style.RightBorder||(this.gridJson.Style.RightBorder=this.createBorder("Right"));this.updateBorderStyle(this.gridJson.Style.RightBorder,i,"-right");break;case"BorderStyleTop":this.gridJson.Style.TopBorder||(this.gridJson.Style.TopBorder=this.createBorder("Top"));this.updateBorderStyle(this.gridJson.Style.TopBorder,i,"-top");break;case"BorderStyleBottom":this.gridJson.Style.BottomBorder||(this.gridJson.Style.BottomBorder=this.createBorder("Bottom"));this.updateBorderStyle(this.gridJson.Style.BottomBorder,i,"-bottom");break;case"BreakLocation":this.gridJson.PageBreak||(this.gridJson.PageBreak=this.createPageBreak());this.gridJson.PageBreak.BreakLocation=i;break;case"Disabled":this.gridJson.PageBreak||(this.gridJson.PageBreak=this.createPageBreak());this.gridJson.PageBreak.Disabled=i;this.propertyPanel.updateItemVisibility("PivotGrid","PageBreak","BreakLocation",$.parseJSON(i));this.propertyPanel.updateItemVisibility("PivotGrid","PageBreak","ResetPageNumber",$.parseJSON(i));this.propertyPanel.refreshScroller();break;case"ResetPageNumber":this.gridJson.PageBreak||(this.gridJson.PageBreak=this.createPageBreak());this.gridJson.PageBreak.ResetPageNumber=i;break;case"PageName":this.gridJson.PageName=i;break;case"RepeatColumnHeaders":this.gridJson.RepeatColumnHeaders=i;break;case"RepeatRowHeaders":this.gridJson.RepeatRowHeaders=i;break;case"KeepTogether":this.gridJson.KeepToGether=i;break;case"NoRowsMessage":this.gridJson.NoRowsMessage=i;break;case"NoRowFontFamily":this.gridJson.Style.FontFamily=i;break;case"NoRowFontColor":this.gridJson.Style.Color=i;break;case"NoRowFontSize":this.gridJson.Style.FontSize=this.getDomSize(i);break;case"NoRowFontStyle":this.gridJson.Style.FontStyle=i;break;case"NoRowFontWeight":this.gridJson.Style.FontWeight=i;break;case"NoRowTextDecoration":this.gridJson.Style.TextDecoration=i;break;case"NoRowTextAlign":this.gridJson.Style.TextAlign=i;break;case"NoRowVerticalAlign":this.gridJson.Style.VerticalAlign=i;break;case"NoRowPaddingLeft":this.gridJson.Style.PaddingLeft=this.getDomSize(i+"pt");break;case"NoRowPaddingRight":this.gridJson.Style.PaddingRight=this.getDomSize(i+"pt");break;case"NoRowPaddingTop":this.gridJson.Style.PaddingTop=this.getDomSize(i+"pt");break;case"NoRowPaddingBottom":this.gridJson.Style.PaddingBottom=this.getDomSize(i+"pt");break;case"HeaderVisibility":this.updateHeaderVisibility(i);break;case"HeaderBackgroundColor":this.updateHeaderBackgroundColor(i);break;case"HeaderFontFamily":this.updateHeaderFontFamily(i);break;case"HeaderFontColor":this.updateHeaderFontColor(i);break;case"HeaderFontSize":this.updateHeaderFontSize(i);break;case"HeaderFontStyle":this.updateHeaderFontStyle(i);break;case"HeaderFontWeight":this.updateHeaderFontWeight(i);break;case"HeaderTextDecoration":this.updateHeaderTextDecoration(i);break;case"HeaderTextAlign":this.updateHeaderTextAlignment(i);break;case"HeaderPaddingLeft":this.updateHeaderPadding(i,"-left");break;case"HeaderPaddingRight":this.updateHeaderPadding(i,"-right");break;case"HeaderPaddingTop":this.updateHeaderPadding(i,"-top");break;case"HeaderPaddingBottom":this.updateHeaderPadding(i,"-bottom");break;case"CellBorderColor":this.updateContentBorderColor(i);break;case"CellBorderStyle":this.updateContentBorderStyle(i);break;case"CellBorderWidth":this.updateContentBorderWidth(i);break;case"BackgroundColor":this.updateContentBackgroundColor(i);break;case"ContentFontFamily":this.updateContentFontFamily(i);break;case"ContentFontColor":this.updateContentFontColor(i);break;case"ContentFontSize":this.updateContentFontSize(i);break;case"ContentFontStyle":this.updateContentFontStyle(i);break;case"ContentFontWeight":this.updateContentFontWeight(i);break;case"ContentTextDecoration":this.updateContentTextDecoration(i);break;case"ContentTextAlign":this.updateContentTextAlignment(i);break;case"ContentPaddingLeft":this.updateContentPadding(i,"-left");break;case"ContentPaddingRight":this.updateContentPadding(i,"-right");break;case"ContentPaddingTop":this.updateContentPadding(i,"-top");break;case"ContentPaddingBottom":this.updateContentPadding(i,"-bottom");break;case"HorizontalGridLine":this.updateHorizontalGridLine(i);break;case"VerticalGridLine":this.updateVerticalGridLine(i);break;case"TableSummaryValue":this.setSummaryValue(i);f=$("#"+this.designId+"_PivotGrid_SummarySettings_TableSummaryValue").data("ejDropDownList");ej.isNullOrUndefined(f)||(r.valueList=f.option("dataSource"));break;case"SummaryValue":this.setColumnSummaryValue(i);h=$("#"+this.designId+"_PivotGrid_ColumnGroupSettings_SummaryValue").data("ejDropDownList");ej.isNullOrUndefined(f)||(r.valueList=h.option("dataSource"));break;case"Column":u=this.updateColumn(i);c=$("#"+this.designId+"_PivotGrid_ColumnGroupSettings_Column").data("ejDropDownList");ej.isNullOrUndefined(f)||(r.valueList=c.option("dataSource"));break;case"ColumnHeaderBorderColor":u=this.updateColumnGroupBorderColor(i);break;case"ColumnHeaderBorderStyle":u=this.updateColumnGroupBorderStyle(i);break;case"ColumnHeaderBorderWidth":u=this.updateColumnGroupBorderWidth(i);break;case"ColumnHeaderBackgroundColor":u=this.updateColumnGroupBackgroundColor(i);break;case"ColumnHeaderFontFamily":u=this.updateColumnGroupFontFamily(i);break;case"ColumnHeaderFontColor":u=this.updateColumnGroupFontColor(i);break;case"ColumnHeaderFontSize":u=this.updateColumnGroupFontSize(i);break;case"ColumnHeaderFontStyle":u=this.updateColumnGroupFontStyle(i);break;case"ColumnHeaderFontWeight":u=this.updateColumnGroupFontWeight(i);break;case"ColumnHeaderTextDecoration":u=this.updateColumnGroupTextDecoration(i);break;case"ColumnHeaderTextAlign":u=this.updateColumnGroupTextAlign(i);break;case"ColumnHeaderPaddingLeft":u=this.updateColumnGroupPadding(i,"-left");break;case"ColumnHeaderPaddingRight":u=this.updateColumnGroupPadding(i,"-right");break;case"ColumnHeaderPaddingTop":u=this.updateColumnGroupPadding(i,"-top");break;case"ColumnHeaderPaddingBottom":u=this.updateColumnGroupPadding(i,"-bottom");break;case"TableSummaryColumn":this.updateTableSummaryColumn(i);break;case"TableSummaryRow":this.updateTableSummaryRow(i);break;case"TableSummaryColumnBorderColor":u=this.updateColumnGroupSummaryBorderColor(i,!0);break;case"TableSummaryColumnBorderStyle":u=this.updateColumnGroupSummaryBorderStyle(i,!0);break;case"TableSummaryColumnBorderWidth":u=this.updateColumnGroupSummaryBorderWidth(i,!0);break;case"TableSummaryColumnBackgroundColor":u=this.updateColumnGroupSummaryBackgroundColor(i,!0);break;case"TableSummaryColumnFontFamily":u=this.updateColumnGroupSummaryFontFamily(i,!0);break;case"TableSummaryColumnFontColor":u=this.updateColumnGroupSummaryFontColor(i,!0);break;case"TableSummaryColumnFontSize":u=this.updateColumnGroupSummaryFontSize(i,!0);break;case"TableSummaryColumnFontStyle":u=this.updateColumnGroupSummaryFontStyle(i,!0);break;case"TableSummaryColumnFontWeight":u=this.updateColumnGroupSummaryFontWeight(i,!0);break;case"TableSummaryColumnTextDecoration":u=this.updateColumnGroupSummaryTextDecoration(i,!0);break;case"TableSummaryColumnTextAlign":u=this.updateColumnGroupSummaryTextAlign(i,!0);break;case"TableSummaryColumnPaddingLeft":u=this.updateColumnGroupSummaryPadding(i,"-left",!0);break;case"TableSummaryColumnPaddingRight":u=this.updateColumnGroupSummaryPadding(i,"-right",!0);break;case"TableSummaryColumnPaddingTop":u=this.updateColumnGroupSummaryPadding(i,"-top",!0);break;case"TableSummaryColumnPaddingBottom":u=this.updateColumnGroupSummaryPadding(i,"-bottom",!0);break;case"ColumnGroupSummaryBorderColor":u=this.updateColumnGroupSummaryBorderColor(i);break;case"ColumnGroupSummaryBorderStyle":u=this.updateColumnGroupSummaryBorderStyle(i);break;case"ColumnGroupSummaryBorderWidth":u=this.updateColumnGroupSummaryBorderWidth(i);break;case"ColumnGroupSummaryBackgroundColor":u=this.updateColumnGroupSummaryBackgroundColor(i);break;case"ColumnGroupSummaryFontFamily":u=this.updateColumnGroupSummaryFontFamily(i);break;case"ColumnGroupSummaryFontColor":u=this.updateColumnGroupSummaryFontColor(i);break;case"ColumnGroupSummaryFontSize":u=this.updateColumnGroupSummaryFontSize(i);break;case"ColumnGroupSummaryFontStyle":u=this.updateColumnGroupSummaryFontStyle(i);break;case"ColumnGroupSummaryFontWeight":u=this.updateColumnGroupSummaryFontWeight(i);break;case"ColumnGroupSummaryTextDecoration":u=this.updateColumnGroupSummaryTextDecoration(i);break;case"ColumnGroupSummaryTextAlign":u=this.updateColumnGroupSummaryTextAlign(i);break;case"ColumnGroupSummaryPaddingLeft":u=this.updateColumnGroupSummaryPadding(i,"-left");break;case"ColumnGroupSummaryPaddingRight":u=this.updateColumnGroupSummaryPadding(i,"-right");break;case"ColumnGroupSummaryPaddingTop":u=this.updateColumnGroupSummaryPadding(i,"-top");break;case"ColumnGroupSummaryPaddingBottom":u=this.updateColumnGroupSummaryPadding(i,"-bottom");break;case"RowHeaderBorderColor":u=this.updateRowGroupBorderColor(i);break;case"RowHeaderBorderStyle":u=this.updateRowGroupBorderStyle(i);break;case"RowHeaderBorderWidth":u=this.updateRowGroupBorderWidth(i);break;case"RowHeaderBackgroundColor":u=this.updateRowGroupBackgroundColor(i);break;case"RowHeaderFontFamily":u=this.updateRowGroupFontFamily(i);break;case"RowHeaderFontColor":u=this.updateRowGroupFontColor(i);break;case"RowHeaderFontSize":u=this.updateRowGroupFontSize(i);break;case"RowHeaderFontStyle":u=this.updateRowGroupFontStyle(i);break;case"RowHeaderFontWeight":u=this.updateRowGroupFontWeight(i);break;case"RowHeaderTextDecoration":u=this.updateRowGroupTextDecoration(i);break;case"RowHeaderTextAlign":u=this.updateRowGroupTextAlign(i);break;case"RowHeaderPaddingLeft":u=this.updateRowGroupPadding(i,"-left");break;case"RowHeaderPaddingRight":u=this.updateRowGroupPadding(i,"-right");break;case"RowHeaderPaddingTop":u=this.updateRowGroupPadding(i,"-top");break;case"RowHeaderPaddingBottom":u=this.updateRowGroupPadding(i,"-bottom");break;case"TableSummaryRowBorderColor":u=this.updateRowGroupSummaryBorderColor(i,!0);break;case"TableSummaryRowBorderStyle":u=this.updateRowGroupSummaryBorderStyle(i,!0);break;case"TableSummaryRowBorderWidth":u=this.updateRowGroupSummaryBorderWidth(i,!0);break;case"TableSummaryRowBackgroundColor":u=this.updateRowGroupSummaryBackgroundColor(i,!0);break;case"TableSummaryRowFontFamily":u=this.updateRowGroupSummaryFontFamily(i,!0);break;case"TableSummaryRowFontColor":u=this.updateRowGroupSummaryFontColor(i,!0);break;case"TableSummaryRowFontSize":u=this.updateRowGroupSummaryFontSize(i,!0);break;case"TableSummaryRowFontStyle":u=this.updateRowGroupSummaryFontStyle(i,!0);break;case"TableSummaryRowFontWeight":u=this.updateRowGroupSummaryFontWeight(i,!0);break;case"TableSummaryRowTextDecoration":u=this.updateRowGroupSummaryTextDecoration(i,!0);break;case"TableSummaryRowTextAlign":u=this.updateRowGroupSummaryTextAlign(i,!0);break;case"TableSummaryRowPaddingLeft":u=this.updateRowGroupSummaryPadding(i,"-left",!0);break;case"TableSummaryRowPaddingRight":u=this.updateRowGroupSummaryPadding(i,"-right",!0);break;case"TableSummaryRowPaddingTop":u=this.updateRowGroupSummaryPadding(i,"-top",!0);break;case"TableSummaryRowPaddingBottom":u=this.updateRowGroupSummaryPadding(i,"-bottom",!0);break;case"RowSummaryBorderColor":u=this.updateRowGroupSummaryBorderColor(i);break;case"RowSummaryBorderStyle":u=this.updateRowGroupSummaryBorderStyle(i);break;case"RowSummaryBorderWidth":u=this.updateRowGroupSummaryBorderWidth(i);break;case"RowSummaryBackgroundColor":u=this.updateRowGroupSummaryBackgroundColor(i);break;case"RowSummaryFontFamily":u=this.updateRowGroupSummaryFontFamily(i);break;case"RowSummaryFontColor":u=this.updateRowGroupSummaryFontColor(i);break;case"RowSummaryFontSize":u=this.updateRowGroupSummaryFontSize(i);break;case"RowSummaryFontStyle":u=this.updateRowGroupSummaryFontStyle(i);break;case"RowSummaryFontWeight":u=this.updateRowGroupSummaryFontWeight(i);break;case"RowSummaryTextDecoration":u=this.updateRowGroupSummaryTextDecoration(i);break;case"RowSummaryTextAlign":u=this.updateRowGroupSummaryTextAlign(i);break;case"RowSummaryPaddingLeft":u=this.updateRowGroupSummaryPadding(i,"-left");break;case"RowSummaryPaddingRight":u=this.updateRowGroupSummaryPadding(i,"-right");break;case"RowSummaryPaddingTop":u=this.updateRowGroupSummaryPadding(i,"-top");break;case"RowSummaryPaddingBottom":u=this.updateRowGroupSummaryPadding(i,"-bottom");break;case"Columns":u=this.updateColumns(i);l=$("#"+this.designId+"_PivotGrid_ColumnSettings_Columns").data("ejDropDownList");ej.isNullOrUndefined(f)||(r.valueList=l.option("dataSource"));break;case"Rows":u=this.updateRows(i);a=$("#"+this.designId+"_PivotGrid_RowSettings_Rows").data("ejDropDownList");ej.isNullOrUndefined(f)||(r.valueList=a.option("dataSource"));break;case"ColumnTitle":this.updateColumnHeader(i);break;case"CornerBorderColor":this.updateCornerBorderColor(i);break;case"CornerBorderStyle":this.updateCornerBorderStyle(i);break;case"CornerBorderWidth":this.updateCornerBorderWidth(i);break;case"CornerBackgroundColor":this.updateCornerBackgroundColor(i);break;case"CornerFontFamily":this.updateCornerFontFamily(i);break;case"CornerFontColor":this.updateCornerFontColor(i);break;case"CornerFontSize":this.updateCornerFontSize(i);break;case"CornerFontStyle":this.updateCornerFontStyle(i);break;case"CornerFontWeight":this.updateCornerFontWeight(i);break;case"CornerTextDecoration":this.updateCornerTextDecoration(i);break;case"CornerTextAlign":this.updateCornerTextAlign(i);break;case"CornerPaddingLeft":this.updateCornerPadding(i,"-left");break;case"CornerPaddingRight":this.updateCornerPadding(i,"-right");break;case"CornerPaddingTop":this.updateCornerPadding(i,"-top");break;case"CornerPaddingBottom":this.updateCornerPadding(i,"-bottom");break;case"CornerLabel":this.updateCornerLabel(i);break;case"ColumnWidth":u=this.updateColumnWidth(i);break;case"RowName":u=this.updateRowName(i);v=$("#"+this.designId+"_PivotGrid_RowGroupSettings_RowName").data("ejDropDownList");ej.isNullOrUndefined(f)||(r.valueList=v.option("dataSource"));break;case"RowHeight":u=this.updateRowHeight(i);break;case"SummaryRow":this.updateSummaryRow(i);break;case"SummaryColumn":this.updateSummaryColumn(i)}if(ej.isNullOrUndefined(u)||(t=u),ejDashboardDesigner.editManager.isPerformAction&&(e=this.designPanel.selectedReportItems,e.length>0))for(o=0;o<e.length;o++)y=e[o],y.attr("id")===this.controlContainer.attr("id")&&(s=$.extend(!0,{},r),s.categoryName=r.categoryName,s.valueList=r.valueList,this.propertyPanel.updatePropertyValue(s,"PivotGrid",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-pivotgrid-item",this.gridJson.Name,[n,i,t,r],[n,t,i,r])},n.prototype.updateGridVisibility=function(n){this.gridJson.Visibility?this.gridJson.Visibility.Hidden=!n:this.gridJson.Visibility={Hidden:!n}},n.prototype.updateLeftPosition=function(n){this.gridJson.Left.size=ej.DashboardUtil.getUnitVal(n,"in");this.controlContainer.css("left",n)},n.prototype.updateTopPosition=function(n){this.gridJson.Top.size=ej.DashboardUtil.getUnitVal(n,"in");this.controlContainer.css("top",n)},n.prototype.updateWidth=function(n){var i,t;for(this.gridJson.Width.size=ej.DashboardUtil.getUnitVal(n,"in"),this.columnWidths.length===0&&this.updateMaximumColumnWidth(),i=(n-parseInt(this.gridWidth,10))/this.columnWidths.length,this.controlContainer.css("width",Math.round(n+this.getBorderWidth())),this.updateCurrentSize(),t=0;t<this.columnWidths.length;t++)this.columnWidths[t]=this.columnWidths[t]+i;this.updateGridWidth(!0);this.designPanel.updateWidgetSelectionBox(this.controlContainer)},n.prototype.updateRowHeight=function(n){var t;return t=this.setRowHeight(n),this.designPanel.updateWidgetSelectionBox(this.controlContainer),t},n.prototype.updateColumnWidth=function(n){var t;return t=this.setColumnWidth(n),this.designPanel.updateWidgetSelectionBox(this.controlContainer),t},n.prototype.updateHeight=function(n){var i,t;for(n<this.minimumHeight*this.tableRows.length&&(n=this.minimumHeight*this.tableRows.length+this.getBorderHeight()),this.gridJson.Height.size=ej.DashboardUtil.getUnitVal(n,"in"),this.rowHeights.length===0&&this.updateMaximumRowHeight(),i=this.rowHeights.length>0?n/this.rowHeights.length:n/2,this.controlContainer.css("height",Math.round(n+this.getBorderHeight())),this.updateCurrentSize(),t=0;t<this.rowHeights.length;t++)this.rowHeights[t]=i;this.updateGridHeight(!0);this.designPanel.updateWidgetSelectionBox(this.controlContainer)},n.prototype.updateBorderColor=function(n,t,i){n.Color=t;this.gridItem.css("border"+i+"-color",ej.isNullOrUndefined(t)?"transparent":t)},n.prototype.updateBorderWidth=function(n,t,i){n.Width?n.Width.size=t+"pt":n.Width={__type:"Syncfusion.RDL.DOM.Size",size:t+"pt"};this.gridItem.css("border"+i+"-width",(t>0?t:1).toString()+"pt")},n.prototype.updateBorderStyle=function(n,t,i){n.Style=t;t==="Default"||t==="None"?(this.gridItem.css("border"+i+"-style","none"),this.controlContainer.css("border-style","dotted")):(this.gridItem.css("border"+i+"-style",t.toLowerCase()),this.controlContainer.css("border-style","none"))},n.prototype.updateHeaderVisibility=function(n){if(this.showHeader=n,this.columnName!==""&&(this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderBackgroundColor",this.showHeader),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderFont",this.showHeader),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderFontStyleRoot",this.showHeader),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderTextDecoration",this.showHeader),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderTextAlign",this.showHeader),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderPadding",this.showHeader)),this.propertyPanel.updateItemVisibility("PivotGrid","Appearance","HeaderBackgroundColor",n),this.propertyPanel.refreshScroller(),this.dataGroupInfo.Rows.length>0)if(n)this.populateCornerCellHeader(),this.populateColumnHeaders();else{this.gridJson.TablixCorner.TablixCornerRows=this.gridJson.TablixCorner.TablixCornerRows.slice(0,-1);for(var t=0;t<this.lastColumnGroupMembers.length;t++)this.lastColumnGroupMembers[t].TablixMembers=[]}$(this.tableRows[this.dataGroupInfo.Columns.length]).css("display",n?"table-row":"none");this.getDataRows()},n.prototype.updateColumnActionInfo=function(n){this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"ActionInfo",n),this.columns[this.selectedColumnIndex].ActionInfo=n,this.updateColumnGroupFontColor("#0000FF"),this.updateColumnGroupTextDecoration("Underline"))},n.prototype.updateRowActionInfo=function(n){this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.gridJson.TablixRowHierarchy.TablixMembers[1],1),"ActionInfo",n),this.rows[this.selectedRowIndex].ActionInfo=n,this.updateRowGroupFontColor("#0000FF"),this.updateRowGroupTextDecoration("Underline"))},n.prototype.updateColumnFormat=function(n){this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"Format",n),this.columns[this.selectedColumnIndex].Format=n.format,this.columns[this.selectedColumnIndex].FormatType=n.format)},n.prototype.updateRowFormat=function(n){this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.gridJson.TablixRowHierarchy.TablixMembers[1],1),"Format",n),this.rows[this.selectedRowIndex].Format=n.format,this.rows[this.selectedRowIndex].FormatType=n.format)},n.prototype.getTablixMember=function(n,t){return parseFloat(this.columnName.split(" ")[1])===t?n:n.TablixMembers.length>0?this.getTablixMember(n.TablixMembers[0],t+1):null},n.prototype.getTablixRowMember=function(n,t){return parseFloat(this.rowName.split(" ")[1])===t?n:n.TablixMembers.length>0?this.getTablixRowMember(n.TablixMembers[0],t+1):null},n.prototype.updateSummaryColumnCells=function(n,t,i){i===0?ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.TablixHeader)||(n.TablixHeader.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=t):this.updateSummaryColumnCells(n.TablixMembers[0],t,i-1)},n.prototype.updateSummaryColumnDataCells=function(n,t,i){var r=this.dataGroupInfo.Values.length>0?this.dataGroupInfo.Values[0].Values.length:1;ej.isNullOrUndefined(this.gridJson.TablixBody.TablixRows[t-this.dataGroupInfo.Columns.length].TablixCells[this.dataGroupInfo.Columns.length*r+this.summaryColumnValueIndex-(ej.isNullOrUndefined(i)?0:i*r)])||(this.gridJson.TablixBody.TablixRows[t-this.dataGroupInfo.Columns.length].TablixCells[this.dataGroupInfo.Columns.length*r+this.summaryColumnValueIndex-(ej.isNullOrUndefined(i)?0:i*r)].CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=n)},n.prototype.updateSummaryDataCells=function(n,t,i){var r=this.dataGroupInfo.Values.length>0?this.dataGroupInfo.Values[0].Values.length:1;ej.isNullOrUndefined(this.gridJson.TablixBody.TablixRows[t-this.dataGroupInfo.Columns.length].TablixCells[this.dataGroupInfo.Columns.length*r+this.summaryValueIndex-(ej.isNullOrUndefined(i)?0:i*r)])||(this.gridJson.TablixBody.TablixRows[t-this.dataGroupInfo.Columns.length].TablixCells[this.dataGroupInfo.Columns.length*r+this.summaryValueIndex-(ej.isNullOrUndefined(i)?0:i*r)].CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=n)},n.prototype.updateSummaryRowDataCells=function(n,t){ej.isNullOrUndefined(this.gridJson.TablixBody.TablixRows[this.gridJson.TablixBody.TablixRows.length-1].TablixCells[t-this.dataGroupInfo.Rows.length])||(this.gridJson.TablixBody.TablixRows[this.gridJson.TablixBody.TablixRows.length-1].TablixCells[t-this.dataGroupInfo.Rows.length].CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=n)},n.prototype.getSummaryColumnCells=function(n,t,i,r,u){if(i===0){if(ej.isNullOrUndefined(t)||ej.isNullOrUndefined(t.TablixHeader)||n.push(t.TablixHeader.CellContents.ReportItem),!ej.isNullOrUndefined(t)&&t.TablixMembers.length>0)return this.getSummaryColumnCells(n,t.TablixMembers[0],i,r,u)}else return this.getSummaryColumnCells(n,t.TablixMembers[1],i-1,r,u);return!u&&n.length>this.dataGroupInfo.Columns.length-(r+1)&&(n=n.slice(0,-1)),n},n.prototype.getSummaryDataCells=function(n){for(var i=[],r=this.dataGroupInfo.Values.length>0?this.dataGroupInfo.Values[0].Values.length:1,t=0;t<this.gridJson.TablixBody.TablixRows.length;t++)ej.isNullOrUndefined(this.gridJson.TablixBody.TablixRows[t].TablixCells[n*r+this.summaryValueIndex])||i.push(this.gridJson.TablixBody.TablixRows[t].TablixCells[n*r+this.summaryValueIndex].CellContents.ReportItem);return i},n.prototype.getSummaryDataRowCells=function(n){var i=[],t;if(this.gridJson.TablixBody.TablixRows.length>1)for(t=0;t<this.gridJson.TablixBody.TablixRows[n].TablixCells.length;t++)ej.isNullOrUndefined(this.gridJson.TablixBody.TablixRows[n].TablixCells[t])||i.push(this.gridJson.TablixBody.TablixRows[n].TablixCells[t].CellContents.ReportItem);return i},n.prototype.setRowElementStyleFromData=function(n,t,i){$(n).css({"background-color":t?this.rows[i].SummaryBackColor:this.rows[i].HeaderBackColor,"border-color":t?this.rows[i].SummaryBorderColor:this.rows[i].HeaderBorderColor,"border-style":t?this.rows[i].SummaryBorderStyle:this.rows[i].HeaderBorderStyle,"border-width":t?this.rows[i].SummaryBorderWidth:this.rows[i].HeaderBorderWidth,"border-top-color":t?this.rows[i].SummaryBorderColor:this.rows[i].HeaderBorderColor,"border-top-style":t?this.rows[i].SummaryBorderStyle:this.rows[i].HeaderBorderStyle,"border-top-width":t?this.rows[i].SummaryBorderWidth:this.rows[i].HeaderBorderWidth,"border-left-color":t?this.rows[i].SummaryBorderColor:this.rows[i].HeaderBorderColor,"border-left-style":t?this.rows[i].SummaryBorderStyle:this.rows[i].HeaderBorderStyle,"border-left-width":t?this.rows[i].SummaryBorderWidth:this.rows[i].HeaderBorderWidth,"border-right-color":t?this.rows[i].SummaryBorderColor:this.rows[i].HeaderBorderColor,"border-right-style":t?this.rows[i].SummaryBorderStyle:this.rows[i].HeaderBorderStyle,"border-right-width":t?this.rows[i].SummaryBorderWidth:this.rows[i].HeaderBorderWidth,"border-bottom-color":t?this.rows[i].SummaryBorderColor:this.rows[i].HeaderBorderColor,"border-bottom-style":t?this.rows[i].SummaryBorderStyle:this.rows[i].HeaderBorderStyle,"border-bottom-width":t?this.rows[i].SummaryBorderWidth:this.rows[i].HeaderBorderWidth,"font-family":t?this.rows[i].SummaryFontFamily:this.rows[i].HeaderFontFamily,color:t?this.rows[i].SummaryFontColor:this.rows[i].HeaderFontColor,"font-size":t?this.rows[i].SummaryFontSize:this.rows[i].HeaderFontSize,"font-style":t?this.rows[i].SummaryFontStyle:this.rows[i].HeaderFontStyle,"font-weight":t?this.rows[i].SummaryFontWeight:this.rows[i].HeaderFontWeight,"text-decoration":t?this.rows[i].SummaryTextDecoration:this.rows[i].HeaderTextDecoration,"text-align":t?this.rows[i].SummaryTextAlign:this.rows[i].HeaderTextAlign,"padding-left":t?this.rows[i].SummaryPaddingLeft:this.rows[i].HeaderPaddingLeft,"padding-right":t?this.rows[i].SummaryPaddingRight:this.rows[i].HeaderPaddingRight,"padding-top":t?this.rows[i].SummaryPaddingTop:this.rows[i].HeaderPaddingTop,"padding-bottom":t?this.rows[i].SummaryPaddingBottom:this.rows[i].HeaderPaddingBottom})},n.prototype.setColumnElementStyleFromData=function(n,t,i){$(n).css({"background-color":t?this.columns[i].SummaryBackColor:this.columns[i].HeaderBackColor,"border-color":t?this.columns[i].SummaryBorderColor:this.columns[i].HeaderBorderColor,"border-style":t?this.columns[i].SummaryBorderStyle:this.columns[i].HeaderBorderStyle,"border-width":t?this.columns[i].SummaryBorderWidth:this.columns[i].HeaderBorderWidth,"border-top-color":t?this.columns[i].SummaryBorderColor:this.columns[i].HeaderBorderColor,"border-top-style":t?this.columns[i].SummaryBorderStyle:this.columns[i].HeaderBorderStyle,"border-top-width":t?this.columns[i].SummaryBorderWidth:this.columns[i].HeaderBorderWidth,"border-left-color":t?this.columns[i].SummaryBorderColor:this.columns[i].HeaderBorderColor,"border-left-style":t?this.columns[i].SummaryBorderStyle:this.columns[i].HeaderBorderStyle,"border-left-width":t?this.columns[i].SummaryBorderWidth:this.columns[i].HeaderBorderWidth,"border-right-color":t?this.columns[i].SummaryBorderColor:this.columns[i].HeaderBorderColor,"border-right-style":t?this.columns[i].SummaryBorderStyle:this.columns[i].HeaderBorderStyle,"border-right-width":t?this.columns[i].SummaryBorderWidth:this.columns[i].HeaderBorderWidth,"border-bottom-color":t?this.columns[i].SummaryBorderColor:this.columns[i].HeaderBorderColor,"border-bottom-style":t?this.columns[i].SummaryBorderStyle:this.columns[i].HeaderBorderStyle,"border-bottom-width":t?this.columns[i].SummaryBorderWidth:this.columns[i].HeaderBorderWidth,"font-family":t?this.columns[i].SummaryFontFamily:this.columns[i].HeaderFontFamily,color:t?this.columns[i].SummaryFontColor:this.columns[i].HeaderFontColor,"font-size":t?this.columns[i].SummaryFontSize:this.columns[i].HeaderFontSize,"font-style":t?this.columns[i].SummaryFontStyle:this.columns[i].HeaderFontStyle,"font-weight":t?this.columns[i].SummaryFontWeight:this.columns[i].HeaderFontWeight,"text-decoration":t?this.columns[i].SummaryTextDecoration:this.columns[i].HeaderTextDecoration,"text-align":t?this.columns[i].SummaryTextAlign:this.columns[i].HeaderTextAlign,"padding-left":t?this.columns[i].SummaryPaddingLeft:this.columns[i].HeaderPaddingLeft,"padding-right":t?this.columns[i].SummaryPaddingRight:this.columns[i].HeaderPaddingRight,"padding-top":t?this.columns[i].SummaryPaddingTop:this.columns[i].HeaderPaddingTop,"padding-bottom":t?this.columns[i].SummaryPaddingBottom:this.columns[i].HeaderPaddingBottom})},n.prototype.setCornerCellElementStyleFromData=function(n){$(n).css({"background-color":this.cornerCellBackColor,"border-color":this.cornerCellBorderColor,"border-style":this.cornerCellBorderStyle,"border-width":this.cornerCellBorderWidth,"border-top-color":this.cornerCellBorderColor,"border-top-style":this.cornerCellBorderStyle,"border-top-width":this.cornerCellBorderWidth,"border-left-color":this.cornerCellBorderColor,"border-left-style":this.cornerCellBorderStyle,"border-left-width":this.cornerCellBorderWidth,"border-right-color":this.cornerCellBorderColor,"border-right-style":this.cornerCellBorderStyle,"border-right-width":this.cornerCellBorderWidth,"border-bottom-color":this.cornerCellBorderColor,"border-bottom-style":this.cornerCellBorderStyle,"border-bottom-width":this.cornerCellBorderWidth,"font-family":this.cornerCellFontFamily,color:this.cornerCellFontColor,"font-size":this.cornerCellFontSize,"font-style":this.cornerCellFontStyle,"font-weight":this.cornerCellFontWeight,"text-decoration":this.cornerCellTextDecoration,"text-align":this.cornerCellTextAlign,"padding-left":this.cornerCellPaddingLeft,"padding-right":this.cornerCellPaddingRight,"padding-top":this.cornerCellPaddingTop,"padding-bottom":this.cornerCellPaddingBottom})},n.prototype.setTableSummaryRowElementStyleFromData=function(n){$(n).css({"background-color":this.tableSummaryRowBackColor,"border-color":this.tableSummaryRowBorderColor,"border-style":this.tableSummaryRowBorderStyle,"border-width":this.tableSummaryRowBorderWidth,"border-top-color":this.tableSummaryRowBorderColor,"border-top-style":this.tableSummaryRowBorderStyle,"border-top-width":this.tableSummaryRowBorderWidth,"border-left-color":this.tableSummaryRowBorderColor,"border-left-style":this.tableSummaryRowBorderStyle,"border-left-width":this.tableSummaryRowBorderWidth,"border-right-color":this.tableSummaryRowBorderColor,"border-right-style":this.tableSummaryRowBorderStyle,"border-right-width":this.tableSummaryRowBorderWidth,"border-bottom-color":this.tableSummaryRowBorderColor,"border-bottom-style":this.tableSummaryRowBorderStyle,"border-bottom-width":this.tableSummaryRowBorderWidth,"font-family":this.tableSummaryRowFontFamily,color:this.tableSummaryRowFontColor,"font-size":this.tableSummaryRowFontSize,"font-style":this.tableSummaryRowFontStyle,"font-weight":this.tableSummaryRowFontWeight,"text-decoration":this.tableSummaryRowTextDecoration,"text-align":this.tableSummaryRowTextAlign,"padding-left":this.tableSummaryRowPaddingLeft,"padding-right":this.tableSummaryRowPaddingRight,"padding-top":this.tableSummaryRowPaddingTop,"padding-bottom":this.tableSummaryRowPaddingBottom})},n.prototype.setTableSummaryColumnElementStyleFromData=function(n){$(n).css({"background-color":this.tableSummaryColumnBackColor,"border-color":this.tableSummaryColumnBorderColor,"border-style":this.tableSummaryColumnBorderStyle,"border-width":this.tableSummaryColumnBorderWidth,"border-top-color":this.tableSummaryColumnBorderColor,"border-top-style":this.tableSummaryColumnBorderStyle,"border-top-width":this.tableSummaryColumnBorderWidth,"border-left-color":this.tableSummaryColumnBorderColor,"border-left-style":this.tableSummaryColumnBorderStyle,"border-left-width":this.tableSummaryColumnBorderWidth,"border-right-color":this.tableSummaryColumnBorderColor,"border-right-style":this.tableSummaryColumnBorderStyle,"border-right-width":this.tableSummaryColumnBorderWidth,"border-bottom-color":this.tableSummaryColumnBorderColor,"border-bottom-style":this.tableSummaryColumnBorderStyle,"border-bottom-width":this.tableSummaryColumnBorderWidth,"font-family":this.tableSummaryColumnFontFamily,color:this.tableSummaryColumnFontColor,"font-size":this.tableSummaryColumnFontSize,"font-style":this.tableSummaryColumnFontStyle,"font-weight":this.tableSummaryColumnFontWeight,"text-decoration":this.tableSummaryColumnTextDecoration,"text-align":this.tableSummaryColumnTextAlign,"padding-left":this.tableSummaryColumnPaddingLeft,"padding-right":this.tableSummaryColumnPaddingRight,"padding-top":this.tableSummaryColumnPaddingTop,"padding-bottom":this.tableSummaryColumnPaddingBottom})},n.prototype.setContentElementStyleFromData=function(n){$(n).css({"background-color":this.contentBackColor,"border-color":this.contentBorderColor,"border-style":this.contentBorderStyle,"border-width":this.contentBorderWidth,"border-top-color":this.contentBorderColor,"border-top-style":this.contentBorderStyle,"border-top-width":this.contentBorderWidth,"border-left-color":this.contentBorderColor,"border-left-style":this.contentBorderStyle,"border-left-width":this.contentBorderWidth,"border-right-color":this.contentBorderColor,"border-right-style":this.contentBorderStyle,"border-right-width":this.contentBorderWidth,"border-bottom-color":this.contentBorderColor,"border-bottom-style":this.contentBorderStyle,"border-bottom-width":this.contentBorderWidth,"font-family":this.contentFontFamily,color:this.contentFontColor,"font-size":this.contentFontSize,"font-style":this.contentFontStyle,"font-weight":this.contentFontWeight,"text-decoration":this.contentTextDecoration,"text-align":this.contentTextAlign,"padding-left":this.contentPaddingLeft,"padding-right":this.contentPaddingRight,"padding-top":this.contentPaddingTop,"padding-bottom":this.contentPaddingBottom})},n.prototype.setHeaderElementStyleFromData=function(n){$(n).css({"background-color":this.headerBackColor,"font-family":this.headerFontFamily,color:this.headerFontColor,"font-size":this.headerFontSize,"font-style":this.headerFontStyle,"font-weight":this.headerFontWeight,"text-decoration":this.headerTextDecoration,"text-align":this.headerTextAlign,"padding-left":this.headerPaddingLeft,"padding-right":this.headerPaddingRight,"padding-top":this.headerPaddingTop,"padding-bottom":this.headerPaddingBottom})},n.prototype.setHeaderReportStyle=function(n){n.Style.BackgroundColor=this.headerBackColor;n.Paragraphs[0].TextRuns[0].Style.FontFamily=this.headerFontFamily;n.Paragraphs[0].TextRuns[0].Style.Color=this.headerFontColor;n.Paragraphs[0].TextRuns[0].Style.FontSize=this.headerFontSize;n.Paragraphs[0].TextRuns[0].Style.FontStyle=this.headerFontStyle;n.Paragraphs[0].TextRuns[0].Style.FontWeight=this.headerFontWeight;n.Paragraphs[0].TextRuns[0].Style.TextDecoration=this.headerTextDecoration;n.Paragraphs[0].Style.TextAlign=this.headerTextAlign;n.Style.PaddingLeft.size=this.headerPaddingLeft;n.Style.PaddingRight.size=this.headerPaddingRight;n.Style.PaddingTop.size=this.headerPaddingTop;n.Style.PaddingBottom.size=this.headerPaddingBottom},n.prototype.updateElementStyle=function(n,t){$(n).css({"background-color":t.Style.BackgroundColor,"border-color":t.Style.Border.Color,"border-style":t.Style.Border.Style,"border-width":ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size,"border-top-color":t.Style.TopBorder.Color,"border-top-style":t.Style.TopBorder.Style,"border-top-width":ej.isNullOrUndefined(t.Style.TopBorder.Width)?"0pt":t.Style.TopBorder.Width.size,"border-left-color":t.Style.LeftBorder.Color,"border-left-style":t.Style.LeftBorder.Style,"border-left-width":ej.isNullOrUndefined(t.Style.LeftBorder.Width)?"0pt":t.Style.LeftBorder.Width.size,"border-right-color":t.Style.RightBorder.Color,"border-right-style":t.Style.RightBorder.Style,"border-right-width":ej.isNullOrUndefined(t.Style.RightBorder.Width)?"0pt":t.Style.RightBorder.Width.size,"border-bottom-color":t.Style.BottomBorder.Color,"border-bottom-style":t.Style.BottomBorder.Style,"border-bottom-width":ej.isNullOrUndefined(t.Style.BottomBorder.Width)?"0pt":t.Style.BottomBorder.Width.size,"font-family":t.Paragraphs[0].TextRuns[0].Style.FontFamily,color:t.Paragraphs[0].TextRuns[0].Style.Color,"font-size":t.Paragraphs[0].TextRuns[0].Style.FontSize,"font-style":this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle),"font-weight":this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight),"text-decoration":this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration),"text-align":this.getTextAlign(t.Paragraphs[0].Style.TextAlign),"padding-left":t.Style.PaddingLeft.size,"padding-right":t.Style.PaddingRight.size,"padding-top":t.Style.PaddingTop.size,"padding-bottom":t.Style.PaddingBottom.size})},n.prototype.setHeaderElementStyle=function(n,t){ej.isNullOrUndefined(t)?$(n).css({display:"none"}):(this.updateElementStyle(n,t),this.headerBackColor=t.Style.BackgroundColor,this.headerFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily,this.headerFontColor=t.Paragraphs[0].TextRuns[0].Style.Color,this.headerFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize,this.headerFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle),this.headerFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight),this.headerTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration),this.headerTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign),this.headerPaddingLeft=t.Style.PaddingLeft.size,this.headerPaddingRight=t.Style.PaddingRight.size,this.headerPaddingTop=t.Style.PaddingTop.size,this.headerPaddingBottom=t.Style.PaddingBottom.size)},n.prototype.setContentElementStyle=function(n,t){this.updateElementStyle(n,t);this.contentBackColor=t.Style.BackgroundColor;this.contentBorderColor=t.Style.Border.Color;this.contentBorderStyle=t.Style.Border.Style;this.contentBorderWidth=ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size;this.contentFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily;this.contentFontColor=t.Paragraphs[0].TextRuns[0].Style.Color;this.contentFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize;this.contentFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle);this.contentFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight);this.contentTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration);this.contentTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign);this.contentPaddingLeft=t.Style.PaddingLeft.size;this.contentPaddingRight=t.Style.PaddingRight.size;this.contentPaddingTop=t.Style.PaddingTop.size;this.contentPaddingBottom=t.Style.PaddingBottom.size},n.prototype.setCornerElementStyle=function(n,t){this.updateElementStyle(n,t);this.cornerCellBackColor=t.Style.BackgroundColor;this.cornerCellBorderColor=t.Style.Border.Color;this.cornerCellBorderStyle=t.Style.Border.Style;this.cornerCellBorderWidth=ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size;this.cornerCellFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily;this.cornerCellFontColor=t.Paragraphs[0].TextRuns[0].Style.Color;this.cornerCellFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize;this.cornerCellFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle);this.cornerCellFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight);this.cornerCellTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration);this.cornerCellTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign);this.cornerCellPaddingLeft=t.Style.PaddingLeft.size;this.cornerCellPaddingRight=t.Style.PaddingRight.size;this.cornerCellPaddingTop=t.Style.PaddingTop.size;this.cornerCellPaddingBottom=t.Style.PaddingBottom.size},n.prototype.setTableSummaryRowElementStyle=function(n,t){this.updateElementStyle(n,t);this.tableSummaryRowBackColor=t.Style.BackgroundColor;this.tableSummaryRowBorderColor=t.Style.Border.Color;this.tableSummaryRowBorderStyle=t.Style.Border.Style;this.tableSummaryRowBorderWidth=ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size;this.tableSummaryRowFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily;this.tableSummaryRowFontColor=t.Paragraphs[0].TextRuns[0].Style.Color;this.tableSummaryRowFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize;this.tableSummaryRowFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle);this.tableSummaryRowFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight);this.tableSummaryRowTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration);this.tableSummaryRowTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign);this.tableSummaryRowPaddingLeft=t.Style.PaddingLeft.size;this.tableSummaryRowPaddingRight=t.Style.PaddingRight.size;this.tableSummaryRowPaddingTop=t.Style.PaddingTop.size;this.tableSummaryRowPaddingBottom=t.Style.PaddingBottom.size},n.prototype.setTableSummaryColumnElementStyle=function(n,t){this.updateElementStyle(n,t);this.tableSummaryColumnBackColor=t.Style.BackgroundColor;this.tableSummaryColumnBorderColor=t.Style.Border.Color;this.tableSummaryColumnBorderStyle=t.Style.Border.Style;this.tableSummaryColumnBorderWidth=ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size;this.tableSummaryColumnFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily;this.tableSummaryColumnFontColor=t.Paragraphs[0].TextRuns[0].Style.Color;this.tableSummaryColumnFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize;this.tableSummaryColumnFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle);this.tableSummaryColumnFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight);this.tableSummaryColumnTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration);this.tableSummaryColumnTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign);this.tableSummaryColumnPaddingLeft=t.Style.PaddingLeft.size;this.tableSummaryColumnPaddingRight=t.Style.PaddingRight.size;this.tableSummaryColumnPaddingTop=t.Style.PaddingTop.size;this.tableSummaryColumnPaddingBottom=t.Style.PaddingBottom.size},n.prototype.setElementStyle=function(n,t,i){ej.isNullOrUndefined(i)||this.dataGroupInfo.Columns.length-(i+1)<this.columns.length&&i<this.columns.length&&$(n).css("display",this.columns[this.dataGroupInfo.Columns.length-(i+1)].enableSummaryColumn?"table-cell":"none");this.updateElementStyle(n,t)},n.prototype.setColumnElementStyle=function(n,t,i,r){this.updateElementStyle(n,t);i?(this.columns[r].enableSummaryColumn||this.addSummaryColumn(!1,r,!1),this.columns[r].SummaryBackColor=t.Style.BackgroundColor,this.columns[r].SummaryBorderColor=t.Style.Border.Color,this.columns[r].SummaryBorderStyle=t.Style.Border.Style,this.columns[r].SummaryBorderWidth=ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size,this.columns[r].SummaryFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily,this.columns[r].SummaryFontColor=t.Paragraphs[0].TextRuns[0].Style.Color,this.columns[r].SummaryFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize,this.columns[r].SummaryFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle),this.columns[r].SummaryFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight),this.columns[r].SummaryTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration),this.columns[r].SummaryTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign),this.columns[r].SummaryPaddingLeft=t.Style.PaddingLeft.size,this.columns[r].SummaryPaddingRight=t.Style.PaddingRight.size,this.columns[r].SummaryPaddingTop=t.Style.PaddingTop.size,this.columns[r].SummaryPaddingBottom=t.Style.PaddingBottom.size):(this.columns[r].HeaderBackColor=t.Style.BackgroundColor,this.columns[r].HeaderBorderColor=t.Style.Border.Color,this.columns[r].HeaderBorderStyle=t.Style.Border.Style,this.columns[r].HeaderBorderWidth=ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size,this.columns[r].HeaderFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily,this.columns[r].HeaderFontColor=t.Paragraphs[0].TextRuns[0].Style.Color,this.columns[r].HeaderFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize,this.columns[r].HeaderFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle),this.columns[r].HeaderFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight),this.columns[r].HeaderTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration),this.columns[r].HeaderTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign),this.columns[r].HeaderPaddingLeft=t.Style.PaddingLeft.size,this.columns[r].HeaderPaddingRight=t.Style.PaddingRight.size,this.columns[r].HeaderPaddingTop=t.Style.PaddingTop.size,this.columns[r].HeaderPaddingBottom=t.Style.PaddingBottom.size)},n.prototype.setRowElementStyle=function(n,t,i,r){this.updateElementStyle(n,t);i?(this.rows[r].enableSummaryRow||this.addSummaryRow(!1,r,!1),this.rows[r].SummaryBackColor=t.Style.BackgroundColor,this.rows[r].SummaryBorderColor=t.Style.Border.Color,this.rows[r].SummaryBorderStyle=t.Style.Border.Style,this.rows[r].SummaryBorderWidth=ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size,this.rows[r].SummaryFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily,this.rows[r].SummaryFontColor=t.Paragraphs[0].TextRuns[0].Style.Color,this.rows[r].SummaryFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize,this.rows[r].SummaryFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle),this.rows[r].SummaryFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight),this.rows[r].SummaryTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration),this.rows[r].SummaryTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign),this.rows[r].SummaryPaddingLeft=t.Style.PaddingLeft.size,this.rows[r].SummaryPaddingRight=t.Style.PaddingRight.size,this.rows[r].SummaryPaddingTop=t.Style.PaddingTop.size,this.rows[r].SummaryPaddingBottom=t.Style.PaddingBottom.size):(this.rows[r].HeaderBackColor=t.Style.BackgroundColor,this.rows[r].HeaderBorderColor=t.Style.Border.Color,this.rows[r].HeaderBorderStyle=t.Style.Border.Style,this.rows[r].HeaderBorderWidth=ej.isNullOrUndefined(t.Style.Border.Width)?"0pt":t.Style.Border.Width.size,this.rows[r].HeaderFontFamily=t.Paragraphs[0].TextRuns[0].Style.FontFamily,this.rows[r].HeaderFontColor=t.Paragraphs[0].TextRuns[0].Style.Color,this.rows[r].HeaderFontSize=t.Paragraphs[0].TextRuns[0].Style.FontSize,this.rows[r].HeaderFontStyle=this.getFontStyle(t.Paragraphs[0].TextRuns[0].Style.FontStyle),this.rows[r].HeaderFontWeight=this.getFontWeight(t.Paragraphs[0].TextRuns[0].Style.FontWeight),this.rows[r].HeaderTextDecoration=this.getTextDecoration(t.Paragraphs[0].TextRuns[0].Style.TextDecoration),this.rows[r].HeaderTextAlign=this.getTextAlign(t.Paragraphs[0].Style.TextAlign),this.rows[r].HeaderPaddingLeft=t.Style.PaddingLeft.size,this.rows[r].HeaderPaddingRight=t.Style.PaddingRight.size,this.rows[r].HeaderPaddingTop=t.Style.PaddingTop.size,this.rows[r].HeaderPaddingBottom=t.Style.PaddingBottom.size)},n.prototype.setReportItem=function(n,t,i,r){switch(t){case"BackColor":n.Style.BackgroundColor=i;break;case"BorderColor":n.Style.Border.Color=i;break;case"BorderStyle":n.Style.Border.Style=i;break;case"BorderWidth":n.Style.Border.Width?n.Style.Border.Width.size=i+"pt":n.Style.Border.Width={__type:"Syncfusion.RDL.DOM.Size",size:i+"pt"};break;case"FontFamily":n.Paragraphs[0].TextRuns[0].Style.FontFamily=i;break;case"FontColor":n.Paragraphs[0].TextRuns[0].Style.Color=i;break;case"FontSize":n.Paragraphs[0].TextRuns[0].Style.FontSize=this.getDomSize(i);break;case"FontStyle":n.Paragraphs[0].TextRuns[0].Style.FontStyle=i;break;case"FontWeight":n.Paragraphs[0].TextRuns[0].Style.FontWeight=i;break;case"TextDecoration":n.Paragraphs[0].TextRuns[0].Style.TextDecoration=i;break;case"TextAlign":n.Paragraphs[0].Style.TextAlign=i;break;case"Padding":switch(r){case"-left":n.Style.PaddingLeft.size=i+"pt";break;case"-right":n.Style.PaddingRight.size=i+"pt";break;case"-top":n.Style.PaddingTop.size=i+"pt";break;case"-bottom":n.Style.PaddingBottom.size=i+"pt"}break;case"Format":n.Paragraphs[0].TextRuns[0].Style.Format=i.format;n.Paragraphs[0].TextRuns[0].Style.FormatType=i.formatType;break;case"ActionInfo":n.Paragraphs[0].TextRuns[0].ActionInfo=i;break;case"Visibility":n.Visibility?n.Visibility.Hidden=!$.parseJSON(i):n.Visibility={Hidden:!$.parseJSON(i)}}},n.prototype.updateGroupHeaderValues=function(n,t,i,r){var u,f,e;if(ej.isNullOrUndefined(n.length))this.setReportItem(n.TablixHeader.CellContents.ReportItem,t,i,r);else for(u=0;u<n.length;u++)for(f=0;f<n[u].TablixMembers.length;f++)ej.isNullOrUndefined(n[u].TablixMembers[f].TablixHeader.CellContents)||(e=n[u].TablixMembers[f].TablixHeader.CellContents.ReportItem,this.setReportItem(e,t,i,r))},n.prototype.setGroupValue=function(n,t,i,r){var u;if(ej.isNullOrUndefined(n.CellContents)?ej.isNullOrUndefined(n.TablixHeader)||ej.isNullOrUndefined(n.TablixHeader.CellContents)||(u=n.TablixHeader.CellContents.ReportItem):u=n.CellContents.ReportItem,!ej.isNullOrUndefined(u))switch(t){case"BackColor":u.Style.BackgroundColor=i;break;case"BorderColor":u.Style.Border.Color=i;break;case"BorderStyle":u.Style.Border.Style=i;break;case"BorderWidth":u.Style.Border.Width?u.Style.Border.Width.size=i+"pt":u.Style.Border.Width={__type:"Syncfusion.RDL.DOM.Size",size:i+"pt"};break;case"FontFamily":u.Paragraphs[0].TextRuns[0].Style.FontFamily=i;break;case"FontColor":u.Paragraphs[0].TextRuns[0].Style.Color=i;break;case"FontSize":u.Paragraphs[0].TextRuns[0].Style.FontSize=this.getDomSize(i);break;case"FontStyle":u.Paragraphs[0].TextRuns[0].Style.FontStyle=i;break;case"FontWeight":u.Paragraphs[0].TextRuns[0].Style.FontWeight=i;break;case"TextDecoration":u.Paragraphs[0].TextRuns[0].Style.TextDecoration=i;break;case"TextAlign":u.Paragraphs[0].Style.TextAlign=i;break;case"Padding":switch(r){case"-left":u.Style.PaddingLeft.size=i+"pt";break;case"-right":u.Style.PaddingRight.size=i+"pt";break;case"-top":u.Style.PaddingTop.size=i+"pt";break;case"-bottom":u.Style.PaddingBottom.size=i+"pt"}}},n.prototype.updateGroupSummaryValues=function(n,t,i,r,u,f){if(i===0)(!t||t&&n.TablixMembers.length>0)&&this.setGroupValue(n,r,u,f),n.TablixMembers.length>i&&this.updateGroupSummaryValues(n.TablixMembers[i],t,i,r,u);else if(i===1)for(var e=0;e<n.TablixMembers.length;e++)e>0&&this.setGroupValue(n.TablixMembers[i],r,u,f)},n.prototype.updateColumnGroupBorderColor=function(n){var i,t,r;return i=this.columns[this.selectedColumnIndex].HeaderBorderColor,this.columnGroupBorderColor=n,this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"BorderColor",n),this.columns[this.selectedColumnIndex].HeaderBorderColor=ej.isNullOrUndefined(n)?"transparent":n),t=parseInt(this.columnName.split(" ")[1],10)-1,r=$(this.tableRows[t]).children(),$(r[t===0?1:0]).css("border-color",ej.isNullOrUndefined(n)?"transparent":n),this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),i},n.prototype.updateColumnGroupBorderStyle=function(n){var i,t,r;return i=this.columns[this.selectedColumnIndex].HeaderBorderStyle,this.columnGroupBorderStyle=n,this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"BorderStyle",n),this.columns[this.selectedColumnIndex].HeaderBorderStyle=n),t=parseInt(this.columnName.split(" ")[1],10)-1,r=$(this.tableRows[t]).children(),$(r[t===0?1:0]).css("border-style",n.toLowerCase()),this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),i},n.prototype.updateColumnGroupBorderWidth=function(n){var i,t,r;return i=this.columns[this.selectedColumnIndex].HeaderBorderWidth,this.columnGroupBorderWidth=n,this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"BorderWidth",n),this.columns[this.selectedColumnIndex].HeaderBorderWidth=n+"pt"),t=parseInt(this.columnName.split(" ")[1],10)-1,r=$(this.tableRows[t]).children(),$(r[t===0?1:0]).css("border-width",n+"pt"),this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),i},n.prototype.updateColumnGroupBackgroundColor=function(n){var i,t,r;return i=this.columns[this.selectedColumnIndex].HeaderBackColor,this.columnGroupBackColor=n,this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"BackColor",n),this.columns[this.selectedColumnIndex].HeaderBackColor=ej.isNullOrUndefined(n)?"transparent":n),t=parseInt(this.columnName.split(" ")[1],10)-1,r=$(this.tableRows[t]).children(),$(r[t===0?1:0]).css("background-color",ej.isNullOrUndefined(n)?"transparent":n),this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),i},n.prototype.updateColumnGroupFontFamily=function(n){var i,t,r;return i=this.columns[this.selectedColumnIndex].HeaderFontFamily,this.columnGroupFontFamily=n,this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"FontFamily",n),this.columns[this.selectedColumnIndex].HeaderFontFamily=n),t=parseInt(this.columnName.split(" ")[1],10)-1,r=$(this.tableRows[t]).children(),$(r[t===0?1:0]).css("font-family",n),this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),i},n.prototype.updateColumnGroupFontColor=function(n){var i,t,r;return i=this.columns[this.selectedColumnIndex].HeaderFontColor,this.columnGroupFontColor=n,this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"FontColor",n),this.columns[this.selectedColumnIndex].HeaderFontColor=n),t=parseInt(this.columnName.split(" ")[1],10)-1,r=$(this.tableRows[t]).children(),$(r[t===0?1:0]).css("color",n),this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),i},n.prototype.updateColumnGroupFontSize=function(n){var i,t,r;return i=this.columns[this.selectedColumnIndex].HeaderFontSize,this.columnGroupFontSize=n,this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"FontSize",n),this.columns[this.selectedColumnIndex].HeaderFontSize=n),t=parseInt(this.columnName.split(" ")[1],10)-1,r=$(this.tableRows[t]).children(),$(r[t===0?1:0]).css("font-size",n),this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),i},n.prototype.updateColumnGroupFontStyle=function(n){var r,t,i;r=this.columns[this.selectedColumnIndex].HeaderFontStyle;this.columnGroupFontStyle=n;this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"FontStyle",n),this.columns[this.selectedColumnIndex].HeaderFontStyle=n);t=parseInt(this.columnName.split(" ")[1],10)-1;i=$(this.tableRows[t]).children();switch(n){case"Default":$(i[t===0?1:0]).css("font-style","");break;case"Normal":$(i[t===0?1:0]).css("font-style","normal");break;case"Italic":$(i[t===0?1:0]).css("font-style","italic")}return this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),r},n.prototype.updateColumnGroupFontWeight=function(n){var r,t,i;r=this.columns[this.selectedColumnIndex].HeaderFontWeight;this.columnGroupFontWeight=n;this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"FontWeight",n),this.columns[this.selectedColumnIndex].HeaderFontWeight=n);t=parseInt(this.columnName.split(" ")[1],10)-1;i=$(this.tableRows[t]).children();switch(n){case"Default":$(i[t===0?1:0]).css("font-weight","");break;case"Normal":$(i[t===0?1:0]).css("font-weight","normal");break;case"Thin":$(i[t===0?1:0]).css("font-weight","200");break;case"ExtraLight":$(i[t===0?1:0]).css("font-weight","300");break;case"Light":$(i[t===0?1:0]).css("font-weight","400");break;case"Medium":$(i[t===0?1:0]).css("font-weight","500");break;case"SemiBold":$(i[t===0?1:0]).css("font-weight","600");break;case"Bold":$(i[t===0?1:0]).css("font-weight","bold");break;case"ExtraBold":$(i[t===0?1:0]).css("font-weight","800");break;case"Heavy":$(i[t===0?1:0]).css("font-weight","900")}return this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),r},n.prototype.updateColumnGroupTextDecoration=function(n){var r,t,i;r=this.columns[this.selectedColumnIndex].HeaderTextDecoration;this.columnGroupTextDecoration=n;this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"TextDecoration",n),this.columns[this.selectedColumnIndex].HeaderTextDecoration=n);t=parseInt(this.columnName.split(" ")[1],10)-1;i=$(this.tableRows[t]).children();switch(n){case"Default":$(i[t===0?1:0]).css("text-decoration","");break;case"None":$(i[t===0?1:0]).css("text-decoration","none");break;case"Underline":$(i[t===0?1:0]).css("text-decoration","underline");break;case"Overline":$(i[t===0?1:0]).css("text-decoration","overline");break;case"LineThrough":$(i[t===0?1:0]).css("text-decoration","line-through")}return this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),r},n.prototype.updateColumnGroupTextAlign=function(n){var r,t,i;r=this.columns[this.selectedColumnIndex].HeaderTextAlign;this.columnGroupTextAlign=n;this.dataGroupInfo.Columns.length>0&&(this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"TextAlign",n),this.columns[this.selectedColumnIndex].HeaderTextAlign=n);t=parseInt(this.columnName.split(" ")[1],10)-1;i=$(this.tableRows[t]).children();switch(n){case"Default":case"General":$(i[t===0?1:0]).css("text-align","");break;case"Left":$(i[t===0?1:0]).css("text-align","left");break;case"Center":$(i[t===0?1:0]).css("text-align","center");break;case"Right":$(i[t===0?1:0]).css("text-align","right")}return this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),r},n.prototype.updateColumnGroupPadding=function(n,t){var i,r,u;if(this.dataGroupInfo.Columns.length>0)switch(t){case"-left":i=this.columns[this.selectedColumnIndex].HeaderPaddingLeft;this.columnGroupPaddingLeft=n+"pt";this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"Padding",n,t);this.columns[this.selectedColumnIndex].HeaderPaddingLeft=n+"pt";break;case"-right":i=this.columns[this.selectedColumnIndex].HeaderPaddingRight;this.columnGroupPaddingRight=n+"pt";this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"Padding",n,t);this.columns[this.selectedColumnIndex].HeaderPaddingRight=n+"pt";break;case"-top":i=this.columns[this.selectedColumnIndex].HeaderPaddingTop;this.columnGroupPaddingTop=n+"pt";this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"Padding",n,t);this.columns[this.selectedColumnIndex].HeaderPaddingTop=n+"pt";break;case"-bottom":i=this.columns[this.selectedColumnIndex].HeaderPaddingBottom;this.columnGroupPaddingBottom=n+"pt";this.updateGroupHeaderValues(this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],1),"Padding",n,t);this.columns[this.selectedColumnIndex].HeaderPaddingBottom=n+"pt"}return r=parseInt(this.columnName.split(" ")[1],10)-1,u=$(this.tableRows[r]).children(),$(u[r===0?1:0]).css("padding"+t,n+"pt"),this.updateColumnHeaderSettings(this.columns[this.selectedColumnIndex].Name),i},n.prototype.updateColumnGroupSummaryBorderColor=function(n,t){var o,f,u,i,r,e;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryBorderColor,this.columnSummaryBorderColor=n):(o=this.tableSummaryColumnBorderColor,this.tableSummaryColumnBorderColor=n),f=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"BorderColor",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"BorderColor",n),i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(r=0;r<f;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[i].TablixCells[this.dataGroupInfo.Columns.length*f-u*f-r],"BorderColor",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryBorderColor=ej.isNullOrUndefined(n)?"transparent":n)}for(i=0;i<this.tableRows.length;i++)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)e=$(this.tableRows[i]).children(),i>=u&&i!==this.dataGroupInfo.Columns.length&&i>this.dataGroupInfo.Columns.length?$(e[e.length-1-u*f-r]).css("border-color",ej.isNullOrUndefined(n)?"transparent":n):i>=u&&i!==this.dataGroupInfo.Columns.length&&$(e[e.length-1-u]).css("border-color",ej.isNullOrUndefined(n)?"transparent":n);return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryBorderStyle=function(n,t){var o,f,u,i,r,e;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryBorderStyle,this.columnSummaryBorderStyle=n):(o=this.tableSummaryColumnBorderStyle,this.tableSummaryColumnBorderStyle=n),f=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"BorderStyle",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"BorderStyle",n),i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(r=0;r<f;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[i].TablixCells[this.dataGroupInfo.Columns.length*f-u*f-r],"BorderStyle",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryBorderStyle=n)}for(i=0;i<this.tableRows.length;i++)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)e=$(this.tableRows[i]).children(),i>=u&&i!==this.dataGroupInfo.Columns.length&&i>this.dataGroupInfo.Columns.length?$(e[e.length-1-u*f-r]).css("border-style",n):i>=u&&i!==this.dataGroupInfo.Columns.length&&$(e[e.length-1-u]).css("border-style",n);return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryBorderWidth=function(n,t){var o,f,u,i,r,e;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryBorderWidth,this.columnSummaryBorderWidth=n+"pt"):(o=this.tableSummaryColumnBorderWidth,this.tableSummaryColumnBorderWidth=n+"pt"),f=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"BorderWidth",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"BorderWidth",n),i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(r=0;r<f;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[i].TablixCells[this.dataGroupInfo.Columns.length*f-u*f-r],"BorderWidth",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryBorderWidth=n+"pt")}for(i=0;i<this.tableRows.length;i++)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)e=$(this.tableRows[i]).children(),i>=u&&i!==this.dataGroupInfo.Columns.length&&i>this.dataGroupInfo.Columns.length?$(e[e.length-1-u*f-r]).css("border-width",n+"pt"):i>=u&&i!==this.dataGroupInfo.Columns.length&&$(e[e.length-1-u]).css("border-width",n+"pt");return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryBackgroundColor=function(n,t){var o,f,u,i,r,e;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryBackColor,this.columnSummaryBackColor=n):(o=this.tableSummaryColumnBackColor,this.tableSummaryColumnBackColor=n),f=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"BackColor",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"BackColor",n),i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(r=0;r<f;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[i].TablixCells[this.dataGroupInfo.Columns.length*f-u*f-r],"BackColor",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryBackColor=ej.isNullOrUndefined(n)?"transparent":n)}for(i=0;i<this.tableRows.length;i++)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)e=$(this.tableRows[i]).children(),i>=u&&i!==this.dataGroupInfo.Columns.length&&i>this.dataGroupInfo.Columns.length?$(e[e.length-1-u*f-r]).css("background-color",ej.isNullOrUndefined(n)?"transparent":n):i>=u&&i!==this.dataGroupInfo.Columns.length&&$(e[e.length-1-u]).css("background-color",ej.isNullOrUndefined(n)?"transparent":n);return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryFontFamily=function(n,t){var o,f,u,i,r,e;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryFontFamily,this.columnSummaryFontFamily=n):(o=this.tableSummaryColumnFontFamily,this.tableSummaryColumnFontFamily=n),f=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"FontFamily",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"FontFamily",n),i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(r=0;r<f;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[i].TablixCells[this.dataGroupInfo.Columns.length*f-u*f-r],"FontFamily",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryFontFamily=n)}for(i=0;i<this.tableRows.length;i++)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)e=$(this.tableRows[i]).children(),i>=u&&i!==this.dataGroupInfo.Columns.length&&i>this.dataGroupInfo.Columns.length?$(e[e.length-1-u*f-r]).css("font-family",n):i>=u&&i!==this.dataGroupInfo.Columns.length&&$(e[e.length-1-u]).css("font-family",n);return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryFontColor=function(n,t){var o,f,u,i,r,e;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryFontColor,this.columnSummaryFontColor=n):(o=this.tableSummaryColumnFontColor,this.tableSummaryColumnFontColor=n),f=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"FontColor",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"FontColor",n),i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(r=0;r<f;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[i].TablixCells[this.dataGroupInfo.Columns.length*f-u*f-r],"FontColor",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryFontColor=n)}for(i=0;i<this.tableRows.length;i++)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)e=$(this.tableRows[i]).children(),i>=u&&i!==this.dataGroupInfo.Columns.length&&i>this.dataGroupInfo.Columns.length?$(e[e.length-1-u*f-r]).css("color",n):i>=u&&i!==this.dataGroupInfo.Columns.length&&$(e[e.length-1-u]).css("color",n);return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryFontSize=function(n,t){var o,f,u,i,r,e;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryFontSize,this.columnSummaryFontSize=n):(o=this.tableSummaryColumnFontSize,this.tableSummaryColumnFontSize=n),f=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"FontSize",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"FontSize",n),i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(r=0;r<f;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[i].TablixCells[this.dataGroupInfo.Columns.length*f-u*f-r],"FontSize",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryFontSize=n)}for(i=0;i<this.tableRows.length;i++)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)e=$(this.tableRows[i]).children(),i>=u&&i!==this.dataGroupInfo.Columns.length&&i>this.dataGroupInfo.Columns.length?$(e[e.length-1-u*f-r]).css("font-size",n):i>=u&&i!==this.dataGroupInfo.Columns.length&&$(e[e.length-1-u]).css("font-size",n);return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryFontStyle=function(n,t){var o,e,u,i,f,r;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryFontStyle,this.columnSummaryFontStyle=n):(o=this.tableSummaryColumnFontStyle,this.tableSummaryColumnFontStyle=n),e=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"FontStyle",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"FontStyle",n),i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(f=0;f<e;f++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[i].TablixCells[this.dataGroupInfo.Columns.length*e-u*e-f],"FontStyle",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryFontStyle=n)}for(i=0;i<this.tableRows.length;i++)for(f=0;f<this.dataGroupInfo.Values[0].Values.length;f++)if(r=$(this.tableRows[i]).children(),i>=u&&i!==this.dataGroupInfo.Columns.length&&i>this.dataGroupInfo.Columns.length)switch(n){case"Default":$(r[r.length-1-u*e-f]).css("font-style","");break;case"Normal":$(r[r.length-1-u*e-f]).css("font-style","normal");break;case"Italic":$(r[r.length-1-u*e-f]).css("font-style","italic")}else if(i>=u&&i!==this.dataGroupInfo.Columns.length)switch(n){case"Default":$(r[r.length-1-u]).css("font-style","");break;case"Normal":$(r[r.length-1-u]).css("font-style","normal");break;case"Italic":$(r[r.length-1-u]).css("font-style","italic")}return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryFontWeight=function(n,t){var o,f,r,e,u,i;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryFontWeight,this.columnSummaryFontWeight=n):(o=this.tableSummaryColumnFontWeight,this.tableSummaryColumnFontWeight=n),f=this.dataGroupInfo.Values[0].Values.length,r=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"FontWeight",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"FontWeight",n),e=0;e<this.gridJson.TablixBody.TablixRows.length;e++)for(u=0;u<f;u++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[e].TablixCells[this.dataGroupInfo.Columns.length*f-r*f-u],"FontWeight",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryFontWeight=n)}for(e=0;e<this.tableRows.length;e++)for(u=0;u<this.dataGroupInfo.Values[0].Values.length;u++)if(i=$(this.tableRows[e]).children(),e>=r&&e!==this.dataGroupInfo.Columns.length&&e>this.dataGroupInfo.Columns.length)switch(n){case"Default":$(i[i.length-1-r*f-u]).css("font-weight","");break;case"Normal":$(i[i.length-1-r*f-u]).css("font-weight","normal");break;case"Thin":$(i[i.length-1-r*f-u]).css("font-weight","200");break;case"ExtraLight":$(i[i.length-1-r*f-u]).css("font-weight","300");break;case"Light":$(i[i.length-1-r*f-u]).css("font-weight","400");break;case"Medium":$(i[i.length-1-r*f-u]).css("font-weight","500");break;case"SemiBold":$(i[i.length-1-r*f-u]).css("font-weight","600");break;case"Bold":$(i[i.length-1-r*f-u]).css("font-weight","bold");break;case"ExtraBold":$(i[i.length-1-r*f-u]).css("font-weight","800");break;case"Heavy":$(i[i.length-1-r*f-u]).css("font-weight","900")}else if(e>=r&&e!==this.dataGroupInfo.Columns.length)switch(n){case"Default":$(i[i.length-1-r]).css("font-weight","");break;case"Normal":$(i[i.length-1-r]).css("font-weight","normal");break;case"Thin":$(i[i.length-1-r]).css("font-weight","200");break;case"ExtraLight":$(i[i.length-1-r]).css("font-weight","300");break;case"Light":$(i[i.length-1-r]).css("font-weight","400");break;case"Medium":$(i[i.length-1-r]).css("font-weight","500");break;case"SemiBold":$(i[i.length-1-r]).css("font-weight","600");break;case"Bold":$(i[i.length-1-r]).css("font-weight","bold");break;case"ExtraBold":$(i[i.length-1-r]).css("font-weight","800");break;case"Heavy":$(i[i.length-1-r]).css("font-weight","900")}return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryTextDecoration=function(n,t){var o,e,r,u,f,i;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryTextDecoration,this.columnSummaryTextDecoration=n):(o=this.tableSummaryColumnTextDecoration,this.tableSummaryColumnTextDecoration=n),e=this.dataGroupInfo.Values[0].Values.length,r=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"TextDecoration",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"TextDecoration",n),u=0;u<this.gridJson.TablixBody.TablixRows.length;u++)for(f=0;f<e;f++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[u].TablixCells[this.dataGroupInfo.Columns.length*e-r*e-f],"TextDecoration",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryTextDecoration=n)}for(u=0;u<this.tableRows.length;u++)for(f=0;f<this.dataGroupInfo.Values[0].Values.length;f++)if(i=$(this.tableRows[u]).children(),u>=r&&u!==this.dataGroupInfo.Columns.length&&u>this.dataGroupInfo.Columns.length)switch(n){case"Default":$(i[i.length-1-r*e-f]).css("text-decoration","");break;case"None":$(i[i.length-1-r*e-f]).css("text-decoration","none");break;case"Underline":$(i[i.length-1-r*e-f]).css("text-decoration","underline");break;case"Overline":$(i[i.length-1-r*e-f]).css("text-decoration","overline");break;case"LineThrough":$(i[i.length-1-r*e-f]).css("text-decoration","line-through")}else if(u>=r&&u!==this.dataGroupInfo.Columns.length)switch(n){case"Default":$(i[i.length-1-r]).css("text-decoration","");break;case"None":$(i[i.length-1-r]).css("text-decoration","none");break;case"Underline":$(i[i.length-1-r]).css("text-decoration","underline");break;case"Overline":$(i[i.length-1-r]).css("text-decoration","overline");break;case"LineThrough":$(i[i.length-1-r]).css("text-decoration","line-through")}return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryTextAlign=function(n,t){var o,e,u,r,f,i;if(ej.isNullOrUndefined(t)?(o=this.columns[this.selectedColumnIndex].SummaryTextAlign,this.columnSummaryTextAlign=n):(o=this.tableSummaryColumnTextAlign,this.tableSummaryColumnTextAlign=n),e=this.dataGroupInfo.Values[0].Values.length,u=t?0:parseInt(this.columnName.split(" ")[1],10),this.dataGroupInfo.Columns.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"TextAlign",n):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"TextAlign",n),r=0;r<this.gridJson.TablixBody.TablixRows.length;r++)for(f=0;f<e;f++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[r].TablixCells[this.dataGroupInfo.Columns.length*e-u*e-f],"TextAlign",n);ej.isNullOrUndefined(t)&&(this.columns[this.selectedColumnIndex].SummaryTextAlign=n)}for(r=0;r<this.tableRows.length;r++)for(f=0;f<this.dataGroupInfo.Values[0].Values.length;f++)if(i=$(this.tableRows[r]).children(),r>=u&&r!==this.dataGroupInfo.Columns.length&&r>this.dataGroupInfo.Columns.length)switch(n){case"Default":case"General":$(i[i.length-1-u*e-f]).css("text-align","");break;case"Left":$(i[i.length-1-u*e-f]).css("text-align","left");break;case"Center":$(i[i.length-1-u*e-f]).css("text-align","center");break;case"Right":$(i[i.length-1-u*e-f]).css("text-align","right")}else if(r>=u&&r!==this.dataGroupInfo.Columns.length)switch(n){case"Default":case"General":$(i[i.length-1-u]).css("text-align","");break;case"Left":$(i[i.length-1-u]).css("text-align","left");break;case"Center":$(i[i.length-1-u]).css("text-align","center");break;case"Right":$(i[i.length-1-u]).css("text-align","right")}return ej.isNullOrUndefined(t)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),o},n.prototype.updateColumnGroupSummaryPadding=function(n,t,i){var e,f=this.dataGroupInfo.Values[0].Values.length,o=i?0:parseInt(this.columnName.split(" ")[1],10),r,u,s;if(this.dataGroupInfo.Columns.length>0)switch(t){case"-left":for(ej.isNullOrUndefined(i)?(e=this.columns[this.selectedColumnIndex].SummaryPaddingLeft,this.columnSummaryPaddingLeft=n+"pt"):(e=this.tableSummaryColumnPaddingLeft,this.tableSummaryColumnPaddingLeft=n+"pt"),i?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"Padding",n,t):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"Padding",n,t),r=0;r<this.gridJson.TablixBody.TablixRows.length;r++)for(u=0;u<f;u++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[r].TablixCells[this.dataGroupInfo.Columns.length*f-o*f-u],"Padding",n,t);ej.isNullOrUndefined(i)&&(this.columns[this.selectedColumnIndex].SummaryPaddingLeft=n+"pt");break;case"-right":for(ej.isNullOrUndefined(i)?(e=this.columns[this.selectedColumnIndex].SummaryPaddingRight,this.columnSummaryPaddingRight=n+"pt"):(e=this.tableSummaryColumnPaddingRight,this.tableSummaryColumnPaddingRight=n+"pt"),i?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"Padding",n,t):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"Padding",n,t),r=0;r<this.gridJson.TablixBody.TablixRows.length;r++)for(u=0;u<f;u++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[r].TablixCells[this.dataGroupInfo.Columns.length*f-o*f-u],"Padding",n,t);ej.isNullOrUndefined(i)&&(this.columns[this.selectedColumnIndex].SummaryPaddingRight=n+"pt");break;case"-top":for(ej.isNullOrUndefined(i)?(e=this.columns[this.selectedColumnIndex].SummaryPaddingLeft,this.columnSummaryPaddingLeft=n+"pt"):(e=this.tableSummaryColumnPaddingLeft,this.tableSummaryColumnPaddingLeft=n+"pt"),i?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"Padding",n,t):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"Padding",n,t),r=0;r<this.gridJson.TablixBody.TablixRows.length;r++)for(u=0;u<f;u++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[r].TablixCells[this.dataGroupInfo.Columns.length*f-o*f-u],"Padding",n,t);ej.isNullOrUndefined(i)&&(this.columns[this.selectedColumnIndex].SummaryPaddingTop=n+"pt");break;case"-bottom":for(ej.isNullOrUndefined(i)?(e=this.columns[this.selectedColumnIndex].SummaryPaddingBottom,this.columnSummaryPaddingBottom=n+"pt"):(e=this.tableSummaryColumnPaddingBottom,this.tableSummaryColumnPaddingBottom=n+"pt"),i?this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[1],!0,0,"Padding",n,t):this.updateGroupSummaryValues(this.gridJson.TablixColumnHierarchy.TablixMembers[0],!0,1,"Padding",n,t),r=0;r<this.gridJson.TablixBody.TablixRows.length;r++)for(u=0;u<f;u++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[r].TablixCells[this.dataGroupInfo.Columns.length*f-o*f-u],"Padding",n,t);ej.isNullOrUndefined(i)&&(this.columns[this.selectedColumnIndex].SummaryPaddingBottom=n+"pt")}for(r=0;r<this.tableRows.length;r++)for(u=0;u<this.dataGroupInfo.Values[0].Values.length;u++)s=$(this.tableRows[r]).children(),r>=o&&r!==this.dataGroupInfo.Columns.length&&r>this.dataGroupInfo.Columns.length?$(s[s.length-1-o*f-u]).css("padding"+t,n+"pt"):r>=o&&r!==this.dataGroupInfo.Columns.length&&$(s[s.length-1-o]).css("padding"+t,n+"pt");return ej.isNullOrUndefined(i)&&this.updateColumnSummarySettings(this.columns[this.selectedColumnIndex].Name),e},n.prototype.updateRowGroupBorderColor=function(n){var t,i,r;return t=this.rows[this.selectedRowIndex].HeaderBorderColor,this.rowGroupBorderColor=n,this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"BorderColor",n),this.rows[this.selectedRowIndex].HeaderBorderColor=ej.isNullOrUndefined(n)?"transparent":n),i=parseInt(this.rowName.split(" ")[1],10)-1,r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),$(r[i]).css("border-color",ej.isNullOrUndefined(n)?"transparent":n),this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),t},n.prototype.updateRowGroupBorderStyle=function(n){var t,i,r;return t=this.rows[this.selectedRowIndex].HeaderBorderStyle,this.rowGroupBorderStyle=n,this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"BorderStyle",n),this.rows[this.selectedRowIndex].HeaderBorderStyle=n),i=parseInt(this.rowName.split(" ")[1],10)-1,r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),$(r[i]).css("border-style",n.toLowerCase()),this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),t},n.prototype.updateRowGroupBorderWidth=function(n){var t,i,r;return t=this.rows[this.selectedRowIndex].HeaderBorderWidth,this.rowGroupBorderWidth=n,this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"BorderWidth",n),this.rows[this.selectedRowIndex].HeaderBorderWidth=n+"pt"),i=parseInt(this.rowName.split(" ")[1],10)-1,r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),$(r[i]).css("border-width",n+"pt"),this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),t},n.prototype.updateRowGroupBackgroundColor=function(n){var t,i,r;return t=this.rows[this.selectedRowIndex].HeaderBackColor,this.rowGroupBackColor=n,this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"BackColor",n),this.rows[this.selectedRowIndex].HeaderBackColor=ej.isNullOrUndefined(n)?"transparent":n),i=parseInt(this.rowName.split(" ")[1],10)-1,r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),$(r[i]).css("background-color",ej.isNullOrUndefined(n)?"transparent":n),this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),t},n.prototype.updateRowGroupFontFamily=function(n){var t,i,r;return t=this.rows[this.selectedRowIndex].HeaderFontFamily,this.rowGroupFontFamily=n,this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"FontFamily",n),this.rows[this.selectedRowIndex].HeaderFontFamily=n),i=parseInt(this.rowName.split(" ")[1],10)-1,r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),$(r[i]).css("font-family",n),this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),t},n.prototype.updateRowGroupFontColor=function(n){var t,i,r;return t=this.rows[this.selectedRowIndex].HeaderFontColor,this.rowGroupFontColor=n,this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"FontColor",n),this.rows[this.selectedRowIndex].HeaderFontColor=n),i=parseInt(this.rowName.split(" ")[1],10)-1,r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),$(r[i]).css("color",n),this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),t},n.prototype.updateRowGroupFontSize=function(n){var t,i,r;return t=this.rows[this.selectedRowIndex].HeaderFontSize,this.rowGroupFontSize=n,this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"FontSize",n),this.rows[this.selectedRowIndex].HeaderFontSize=n),i=parseInt(this.rowName.split(" ")[1],10)-1,r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),$(r[i]).css("font-size",n),this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),t},n.prototype.updateRowGroupFontStyle=function(n){var r,t,i;r=this.rows[this.selectedRowIndex].HeaderFontStyle;this.rowGroupFontStyle=n;this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"FontStyle",n),this.rows[this.selectedRowIndex].HeaderFontStyle=n);t=parseInt(this.rowName.split(" ")[1],10)-1;i=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children();switch(n){case"Default":$(i[t]).css("font-style","");break;case"Normal":$(i[t]).css("font-style","normal");break;case"Italic":$(i[t]).css("font-style","italic")}return this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupFontWeight=function(n){var r,t,i;r=this.rows[this.selectedRowIndex].HeaderFontWeight;this.rowGroupFontWeight=n;this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"FontWeight",n),this.rows[this.selectedRowIndex].HeaderFontWeight=n);t=parseInt(this.rowName.split(" ")[1],10)-1;i=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children();switch(n){case"Default":$(i[t]).css("font-weight","");break;case"Normal":$(i[t]).css("font-weight","normal");break;case"Thin":$(i[t]).css("font-weight","200");break;case"ExtraLight":$(i[t]).css("font-weight","300");break;case"Light":$(i[t]).css("font-weight","400");break;case"Medium":$(i[t]).css("font-weight","500");break;case"SemiBold":$(i[t]).css("font-weight","600");break;case"Bold":$(i[t]).css("font-weight","bold");break;case"ExtraBold":$(i[t]).css("font-weight","800");break;case"Heavy":$(i[t]).css("font-weight","900")}return this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupTextDecoration=function(n){var r,t,i;r=this.rows[this.selectedRowIndex].HeaderTextDecoration;this.rowGroupTextDecoration=n;this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"TextDecoration",n),this.rows[this.selectedRowIndex].HeaderTextDecoration=n);t=parseInt(this.rowName.split(" ")[1],10)-1;i=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children();switch(n){case"Default":$(i[t]).css("text-decoration","");break;case"None":$(i[t]).css("text-decoration","none");break;case"Underline":$(i[t]).css("text-decoration","underline");break;case"Overline":$(i[t]).css("text-decoration","overline");break;case"LineThrough":$(i[t]).css("text-decoration","line-through")}return this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupTextAlign=function(n){var r,t,i;r=this.rows[this.selectedRowIndex].HeaderTextAlign;this.rowGroupTextAlign=n;this.dataGroupInfo.Rows.length>0&&(this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"TextAlign",n),this.rows[this.selectedRowIndex].HeaderTextAlign=n);t=parseInt(this.rowName.split(" ")[1],10)-1;i=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children();switch(n){case"Default":case"General":$(i[t]).css("text-align","");break;case"Left":$(i[t]).css("text-align","left");break;case"Center":$(i[t]).css("text-align","center");break;case"Right":$(i[t]).css("text-align","right")}return this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupPadding=function(n,t){var i,r,u;if(this.dataGroupInfo.Rows.length>0)switch(t){case"-left":i=this.rows[this.selectedRowIndex].HeaderPaddingLeft;this.rowGroupPaddingLeft=n+"pt";this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"Padding",n,t);this.rows[this.selectedRowIndex].HeaderPaddingLeft=n+"pt";break;case"-right":i=this.rows[this.selectedRowIndex].HeaderPaddingRight;this.rowGroupPaddingRight=n+"pt";this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"Padding",n,t);this.rows[this.selectedRowIndex].HeaderPaddingRight=n+"pt";break;case"-top":i=this.rows[this.selectedRowIndex].HeaderPaddingTop;this.rowGroupPaddingTop=n+"pt";this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"Padding",n,t);this.rows[this.selectedRowIndex].HeaderPaddingTop=n+"pt";break;case"-bottom":i=this.rows[this.selectedRowIndex].HeaderPaddingBottom;this.rowGroupPaddingBottom=n+"pt";this.updateGroupHeaderValues(this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],1),"Padding",n,t);this.rows[this.selectedRowIndex].HeaderPaddingBottom=n+"pt"}return r=parseInt(this.rowName.split(" ")[1],10)-1,u=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),$(u[r]).css("padding"+t,n+"pt"),this.updateRowHeaderSettings(this.rows[this.selectedRowIndex].Name),i},n.prototype.updateRowGroupSummaryBorderColor=function(n,t){var r,f,i;t?(r=this.tableSummaryRowBorderColor,this.tableSummaryRowBorderColor=n):(r=this.rows[this.selectedRowIndex].SummaryBorderColor,this.rowSummaryBorderColor=n);var u=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"BorderColor",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"BorderColor",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[i],"BorderColor",n);t||(this.rows[this.selectedRowIndex].SummaryBorderColor=ej.isNullOrUndefined(n)?"transparent":n)}for(f=$(this.tableRows[this.tableRows.length-1-u]).children(),i=0;i<f.length;i++)$(f[i]).css("border-color",ej.isNullOrUndefined(n)?"transparent":n);return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupSummaryBorderStyle=function(n,t){var r,f,i;t?(r=this.tableSummaryRowBorderStyle,this.tableSummaryRowBorderStyle=n):(r=this.rows[this.selectedRowIndex].SummaryBorderStyle,this.rowSummaryBorderStyle=n);var u=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"BorderStyle",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"BorderStyle",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[i],"BorderStyle",n);t||(this.rows[this.selectedRowIndex].SummaryBorderStyle=n)}for(f=$(this.tableRows[this.tableRows.length-1-u]).children(),i=0;i<f.length;i++)$(f[i]).css("border-style",n);return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupSummaryBorderWidth=function(n,t){var r,f,i;t?(r=this.tableSummaryRowBorderWidth,this.tableSummaryRowBorderWidth=n+"pt"):(r=this.rows[this.selectedRowIndex].SummaryBorderWidth,this.rowSummaryBorderWidth=n+"pt");var u=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"BorderWidth",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"BorderWidth",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[i],"BorderWidth",n);t||(this.rows[this.selectedRowIndex].SummaryBorderWidth=n+"pt")}for(f=$(this.tableRows[this.tableRows.length-1-u]).children(),i=0;i<f.length;i++)$(f[i]).css("border-width",n+"pt");return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupSummaryBackgroundColor=function(n,t){var r,f,i;t?(r=this.tableSummaryRowBackColor,this.tableSummaryRowBackColor=n):(r=this.rows[this.selectedRowIndex].SummaryBackColor,this.rowSummaryBackColor=n);var u=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"BackColor",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"BackColor",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[i],"BackColor",n);t||(this.rows[this.selectedRowIndex].SummaryBackColor=ej.isNullOrUndefined(n)?"transparent":n)}for(f=$(this.tableRows[this.tableRows.length-1-u]).children(),i=0;i<f.length;i++)$(f[i]).css("background-color",ej.isNullOrUndefined(n)?"transparent":n);return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupSummaryFontFamily=function(n,t){var r,f,i;t?(r=this.tableSummaryRowFontFamily,this.tableSummaryRowFontFamily=n):(r=this.rows[this.selectedRowIndex].SummaryFontFamily,this.rowSummaryFontFamily=n);var u=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"FontFamily",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"FontFamily",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[i],"FontFamily",n);t||(this.rows[this.selectedRowIndex].SummaryFontFamily=n)}for(f=$(this.tableRows[this.tableRows.length-1-u]).children(),i=0;i<f.length;i++)$(f[i]).css("font-family",n);return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupSummaryFontColor=function(n,t){var r,f,i;t?(r=this.tableSummaryRowFontColor,this.tableSummaryRowFontColor=n):(r=this.rows[this.selectedRowIndex].SummaryFontColor,this.rowSummaryFontColor=n);var u=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"FontColor",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"FontColor",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[i],"FontColor",n);t||(this.rows[this.selectedRowIndex].SummaryFontColor=n)}for(f=$(this.tableRows[this.tableRows.length-1-u]).children(),i=0;i<f.length;i++)$(f[i]).css("color",n);return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupSummaryFontSize=function(n,t){var r,f,i;t?(r=this.tableSummaryRowFontSize,this.tableSummaryRowFontSize=n):(r=this.rows[this.selectedRowIndex].SummaryFontSize,this.rowSummaryFontSize=n);var u=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"FontSize",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"FontSize",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[i],"FontSize",n);t||(this.rows[this.selectedRowIndex].SummaryFontSize=n)}for(f=$(this.tableRows[this.tableRows.length-1-u]).children(),i=0;i<f.length;i++)$(f[i]).css("font-size",n);return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),r},n.prototype.updateRowGroupSummaryFontStyle=function(n,t){var u,r,i;t?(u=this.tableSummaryRowFontStyle,this.tableSummaryRowFontStyle=n):(u=this.rows[this.selectedRowIndex].SummaryFontStyle,this.rowSummaryFontStyle=n);var f=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"FontStyle",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"FontStyle",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-f].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-f].TablixCells[i],"FontStyle",n);t||(this.rows[this.selectedRowIndex].SummaryFontStyle=n)}for(r=$(this.tableRows[this.tableRows.length-1-f]).children(),i=0;i<r.length;i++)switch(n){case"Default":$(r[i]).css("font-style","");break;case"Normal":$(r[i]).css("font-style","normal");break;case"Italic":$(r[i]).css("font-style","italic")}return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),u},n.prototype.updateRowGroupSummaryFontWeight=function(n,t){var u,r,i;t?(u=this.tableSummaryRowFontWeight,this.tableSummaryRowFontWeight=n):(u=this.rows[this.selectedRowIndex].SummaryFontWeight,this.rowSummaryFontWeight=n);var f=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"FontWeight",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"FontWeight",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-f].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-f].TablixCells[i],"FontWeight",n);t||(this.rows[this.selectedRowIndex].SummaryFontWeight=n)}for(r=$(this.tableRows[this.tableRows.length-1-f]).children(),i=0;i<r.length;i++)switch(n){case"Default":$(r[i]).css("font-weight","");break;case"Normal":$(r[i]).css("font-weight","normal");break;case"Thin":$(r[i]).css("font-weight","200");break;case"ExtraLight":$(r[i]).css("font-weight","300");break;case"Light":$(r[i]).css("font-weight","400");break;case"Medium":$(r[i]).css("font-weight","500");break;case"SemiBold":$(r[i]).css("font-weight","600");break;case"Bold":$(r[i]).css("font-weight","bold");break;case"ExtraBold":$(r[i]).css("font-weight","800");break;case"Heavy":$(r[i]).css("font-weight","900")}return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),u},n.prototype.updateRowGroupSummaryTextDecoration=function(n,t){var u,r,i;t?(u=this.tableSummaryRowTextDecoration,this.tableSummaryRowTextDecoration=n):(u=this.rows[this.selectedRowIndex].SummaryTextDecoration,this.rowSummaryTextDecoration=n);var f=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(t?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"TextDecoration",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"TextDecoration",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-f].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-f].TablixCells[i],"TextDecoration",n);t||(this.rows[this.selectedRowIndex].SummaryTextDecoration=n)}for(r=$(this.tableRows[this.tableRows.length-1-f]).children(),i=0;i<r.length;i++)switch(n){case"Default":$(r[i]).css("text-decoration","");break;case"None":$(r[i]).css("text-decoration","none");break;case"Underline":$(r[i]).css("text-decoration","underline");break;case"Overline":$(r[i]).css("text-decoration","overline");break;case"LineThrough":$(r[i]).css("text-decoration","line-through")}return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),u},n.prototype.updateRowGroupSummaryTextAlign=function(n,t){var f,r,i;t?(f=this.tableSummaryRowTextAlign,this.tableSummaryRowTextAlign=n):(f=this.rows[this.selectedRowIndex].SummaryTextAlign,this.rowSummaryTextAlign=n);var u=t?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length;if(this.dataGroupInfo.Rows.length>0){for(u===0?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"TextAlign",n):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"TextAlign",n),i=0;i<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;i++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[i],"TextAlign",n);t||(this.rows[this.selectedRowIndex].SummaryTextAlign=n)}for(r=$(this.tableRows[this.tableRows.length-1-u]).children(),i=0;i<r.length;i++)switch(n){case"Default":case"General":$(r[i]).css("text-align","");break;case"Left":$(r[i]).css("text-align","left");break;case"Center":$(r[i]).css("text-align","center");break;case"Right":$(r[i]).css("text-align","right")}return t||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),f},n.prototype.updateRowGroupSummaryPadding=function(n,t,i){var f,u=i?0:parseInt(this.rowName.split(" ")[1],10),e=this.isEmptyColumn?1:0,o=this.isEmptyColumn?this.dataGroupInfo.Rows.length+1:this.dataGroupInfo.Rows.length,s,r;if(this.dataGroupInfo.Rows.length>0)switch(t){case"-left":for(i?(f=this.tableSummaryRowPaddingLeft,this.tableSummaryRowPaddingLeft=n+"pt"):(f=this.rows[this.selectedRowIndex].SummaryPaddingLeft,this.rowSummaryPaddingLeft=n+"pt"),i?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"Padding",n,t):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"Padding",n,t),r=0;r<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[r],"Padding",n,t);i||(this.rows[this.selectedRowIndex].SummaryPaddingLeft=n+"pt");break;case"-right":for(i?(f=this.tableSummaryRowPaddingRight,this.tableSummaryRowPaddingRight=n+"pt"):(f=this.rows[this.selectedRowIndex].SummaryPaddingRight,this.rowSummaryPaddingRight=n+"pt"),i?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"Padding",n,t):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"Padding",n,t),r=0;r<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[r],"Padding",n,t);i||(this.rows[this.selectedRowIndex].SummaryPaddingRight=n+"pt");break;case"-top":for(i?(f=this.tableSummaryRowPaddingTop,this.tableSummaryRowPaddingTop=n+"pt"):(f=this.rows[this.selectedRowIndex].SummaryPaddingTop,this.rowSummaryPaddingTop=n+"pt"),u===0?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"Padding",n,t):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"Padding",n,t),r=0;r<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[r],"Padding",n,t);i||(this.rows[this.selectedRowIndex].SummaryPaddingTop=n+"pt");break;case"-bottom":for(i?(f=this.tableSummaryRowPaddingBottom,this.tableSummaryRowPaddingBottom=n+"pt"):(f=this.rows[this.selectedRowIndex].SummaryPaddingBottom,this.rowSummaryPaddingBottom=n+"pt"),i?this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e+1],!1,0,"Padding",n,t):this.updateGroupSummaryValues(this.gridJson.TablixRowHierarchy.TablixMembers[e],!1,1,"Padding",n,t),r=0;r<this.gridJson.TablixBody.TablixRows[o-u].TablixCells.length;r++)this.setGroupValue(this.gridJson.TablixBody.TablixRows[o-u].TablixCells[r],"Padding",n,t);i||(this.rows[this.selectedRowIndex].SummaryPaddingBottom=n+"pt")}for(s=$(this.tableRows[this.tableRows.length-1-u]).children(),r=0;r<s.length;r++)$(s[r]).css("padding"+t,n+"pt");return i||this.updateRowSummarySettings(this.rows[this.selectedRowIndex].Name),f},n.prototype.updateCornerBorderColor=function(n){var t,i;this.cornerCellBorderColor=n;this.gridJson.TablixCorner.TablixCornerRows.length>0&&(t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0],t.CellContents.ReportItem.Style.Border.Color=n,i=$(this.tableRows[0]).find("th"),this.setElementStyle(i[0],t.CellContents.ReportItem))},n.prototype.updateCornerBorderStyle=function(n){var t,i;this.cornerCellBorderStyle=n;this.gridJson.TablixCorner.TablixCornerRows.length>0&&(t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0],t.CellContents.ReportItem.Style.Border.Style=n,i=$(this.tableRows[0]).find("th"),this.setElementStyle(i[0],t.CellContents.ReportItem))},n.prototype.updateCornerBorderWidth=function(n){var t,i;this.cornerCellBorderWidth=n;this.gridJson.TablixCorner.TablixCornerRows.length>0&&(t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0],t.CellContents.ReportItem.Style.Border.Width?t.CellContents.ReportItem.Style.Border.Width.size=n+"pt":t.CellContents.ReportItem.Style.Border.Width={__type:"Syncfusion.RDL.DOM.Size",size:n+"pt"},i=$(this.tableRows[0]).find("th"),this.setElementStyle(i[0],t.CellContents.ReportItem))},n.prototype.updateCornerBackgroundColor=function(n){var t,i;this.cornerCellBackColor=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Style.BackgroundColor=n;i=$(this.tableRows[0]).find("th");this.setElementStyle(i[0],t.CellContents.ReportItem)},n.prototype.updateCornerFontFamily=function(n){var t,i;this.cornerCellFontFamily=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Style.FontFamily=n;i=$(this.tableRows[0]).find("th");this.setElementStyle(i[0],t.CellContents.ReportItem)},n.prototype.updateCornerFontColor=function(n){var t,i;this.cornerCellFontColor=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Style.Color=n;i=$(this.tableRows[0]).find("th");this.setElementStyle(i[0],t.CellContents.ReportItem)},n.prototype.updateCornerFontSize=function(n){var t,i;this.cornerCellFontSize=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Style.FontSize=n;i=$(this.tableRows[0]).find("th");this.setElementStyle(i[0],t.CellContents.ReportItem)},n.prototype.updateCornerFontStyle=function(n){var t,i;this.cornerCellFontStyle=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Style.FontStyle=this.getFontStyle(n);i=$(this.tableRows[0]).find("th");this.setElementStyle(i[0],t.CellContents.ReportItem)},n.prototype.updateCornerFontWeight=function(n){var t,i;this.cornerCellFontWeight=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Style.FontWeight=this.getFontWeight(n);i=$(this.tableRows[0]).find("th");this.setElementStyle(i[0],t.CellContents.ReportItem)},n.prototype.updateCornerTextDecoration=function(n){var t,i;this.cornerCellTextDecoration=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Style.TextDecoration=this.getTextDecoration(n);i=$(this.tableRows[0]).find("th");this.setElementStyle(i[0],t.CellContents.ReportItem)},n.prototype.updateCornerTextAlign=function(n){var t,i;this.cornerCellTextAlign=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Style.TextAlign=this.getTextAlign(n);i=$(this.tableRows[0]).find("th");this.setElementStyle(i[0],t.CellContents.ReportItem)},n.prototype.updateCornerPadding=function(n,t){var i=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0],r;if(this.dataGroupInfo.Rows.length>0)switch(t){case"-left":this.cornerCellPaddingLeft=n+"pt";i.CellContents.ReportItem.Style.PaddingLeft.size=n+"pt";break;case"-right":this.cornerCellPaddingRight=n+"pt";i.CellContents.ReportItem.Style.PaddingRight.size=n+"pt";break;case"-top":this.cornerCellPaddingTop=n+"pt";i.CellContents.ReportItem.Style.PaddingTop.size=n+"pt";break;case"-bottom":this.cornerCellPaddingBottom=n+"pt";i.CellContents.ReportItem.Style.PaddingBottom.size=n+"pt"}r=$(this.tableRows[0]).find("th");this.setElementStyle(r[0],i.CellContents.ReportItem)},n.prototype.updateCornerLabel=function(n){var t,i;this.cornerLabel=n;t=this.gridJson.TablixCorner.TablixCornerRows[0].TablixCornerCells[0];t.CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=n;i=$(this.tableRows[0]).find("th");$(i[0]).text(n)},n.prototype.updateColumnHeaderValues=function(n,t,i,r){for(var u,f=0;f<n.length;f++)if(!ej.isNullOrUndefined(n[f].CellContents)){u=n[f].CellContents.ReportItem;switch(t){case"BackColor":u.Style.BackgroundColor=i;break;case"FontFamily":u.Paragraphs[0].TextRuns[0].Style.FontFamily=i;break;case"FontColor":u.Paragraphs[0].TextRuns[0].Style.Color=i;break;case"FontSize":u.Paragraphs[0].TextRuns[0].Style.FontSize=this.getDomSize(i);break;case"FontStyle":u.Paragraphs[0].TextRuns[0].Style.FontStyle=i;break;case"FontWeight":u.Paragraphs[0].TextRuns[0].Style.FontWeight=i;break;case"TextDecoration":u.Paragraphs[0].TextRuns[0].Style.TextDecoration=i;break;case"TextAlign":u.Paragraphs[0].Style.TextAlign=i;break;case"Padding":switch(r){case"-left":u.Style.PaddingLeft.size=i+"pt";break;case"-right":u.Style.PaddingRight.size=i+"pt";break;case"-top":u.Style.PaddingTop.size=i+"pt";break;case"-bottom":u.Style.PaddingBottom.size=i+"pt"}break;case"Visibility":u.Visibility?u.Visibility.Hidden=!$.parseJSON(i):u.Visibility={Hidden:!$.parseJSON(i)}}}},n.prototype.updateHeaderBackgroundColor=function(n){var i,t;for(this.headerBackColor=n,this.dataGroupInfo.Rows.length>0&&(this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"BackColor",n),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"BackColor",n)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"BackColor",n),this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"BackColor",n)),i=$(this.tableRows[this.dataGroupInfo.Columns.length]).children(),t=0;t<i.length;t++)$(i[t]).css("background-color",ej.isNullOrUndefined(n)?"transparent":n)},n.prototype.updateHeaderFontFamily=function(n){var i,t;for(this.headerFontFamily=n,this.dataGroupInfo.Rows.length>0&&(this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"FontFamily",n),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"FontFamily",n)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"FontFamily",n),this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"FontFamily",n)),i=$(this.tableRows[this.dataGroupInfo.Columns.length]).children(),t=0;t<i.length;t++)$(i[t]).css("font-family",n)},n.prototype.updateHeaderFontColor=function(n){var i,t;for(this.headerFontColor=n,this.dataGroupInfo.Rows.length>0&&(this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"FontColor",n),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"FontColor",n)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"FontColor",n),this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"FontColor",n)),i=$(this.tableRows[this.dataGroupInfo.Columns.length]).children(),t=0;t<i.length;t++)$(i[t]).css("color",ej.isNullOrUndefined(n)?"transparent":n)},n.prototype.updateHeaderFontSize=function(n){var i,t;for(this.headerFontSize=n,this.dataGroupInfo.Rows.length>0&&(this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"FontSize",n),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"FontSize",n)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"FontSize",n),this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"FontSize",n)),i=$(this.tableRows[this.dataGroupInfo.Columns.length]).children(),t=0;t<i.length;t++)$(i[t]).css("font-size",n)},n.prototype.updateHeaderFontStyle=function(n){var i,t;for(this.headerFontStyle=n,this.dataGroupInfo.Rows.length>0&&(this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"FontStyle",n),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"FontStyle",n)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"FontStyle",n),this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"FontStyle",n)),i=$(this.tableRows[this.dataGroupInfo.Columns.length]).children(),t=0;t<i.length;t++)switch(n){case"Default":$(i[t]).css("font-style","");break;case"Normal":$(i[t]).css("font-style","normal");break;case"Italic":$(i[t]).css("font-style","italic")}},n.prototype.updateHeaderFontWeight=function(n){var i,t;for(this.headerFontWeight=n,this.dataGroupInfo.Rows.length>0&&(this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"FontWeight",n),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"FontWeight",n)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"FontWeight",n),this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"FontWeight",n)),i=$(this.tableRows[this.dataGroupInfo.Columns.length]).children(),t=0;t<i.length;t++)switch(n){case"Default":$(i[t]).css("font-weight","");break;case"Normal":$(i[t]).css("font-weight","normal");break;case"Thin":$(i[t]).css("font-weight","200");break;case"ExtraLight":$(i[t]).css("font-weight","300");break;case"Light":$(i[t]).css("font-weight","400");break;case"Medium":$(i[t]).css("font-weight","500");break;case"SemiBold":$(i[t]).css("font-weight","600");break;case"Bold":$(i[t]).css("font-weight","bold");break;case"ExtraBold":$(i[t]).css("font-weight","800");break;case"Heavy":$(i[t]).css("font-weight","900")}},n.prototype.updateHeaderTextDecoration=function(n){var i,t;for(this.headerTextDecoration=n,this.dataGroupInfo.Rows.length>0&&(this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"TextDecoration",n),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"TextDecoration",n)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"TextDecoration",n),this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"TextDecoration",n)),i=$(this.tableRows[this.dataGroupInfo.Columns.length]).children(),t=0;t<i.length;t++)switch(n){case"Default":$(i[t]).css("text-decoration","");break;case"None":$(i[t]).css("text-decoration","none");break;case"Underline":$(i[t]).css("text-decoration","underline");break;case"Overline":$(i[t]).css("text-decoration","overline");break;case"LineThrough":$(i[t]).css("text-decoration","line-through")}},n.prototype.updateHeaderTextAlignment=function(n){var i,t;for(this.headerTextAlign=n,this.dataGroupInfo.Rows.length>0&&(this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"TextAlign",n),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"TextAlign",n)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"TextAlign",n),this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"TextAlign",n)),i=$(this.tableRows[this.dataGroupInfo.Columns.length]).children(),t=0;t<i.length;t++)switch(n){case"Default":case"General":$(i[t]).css("text-align","");break;case"Left":$(i[t]).css("text-align","left");break;case"Center":$(i[t]).css("text-align","center");break;case"Right":$(i[t]).css("text-align","right")}},n.prototype.updateHeaderPadding=function(n,t){if(this.dataGroupInfo.Rows.length>0){switch(t){case"-left":this.headerPaddingLeft=n+"pt";break;case"-right":this.headerPaddingRight=n+"pt";break;case"-top":this.headerPaddingTop=n+"pt";break;case"-bottom":this.headerPaddingBottom=n+"pt"}this.isEmptyColumn?(this.updateGroupHeaderValues(this.gridJson.TablixRowHierarchy.TablixMembers[0],"Padding",n,t),this.updateColumnHeaderValues(this.gridJson.TablixBody.TablixRows[0].TablixCells,"Padding",n,t)):this.updateColumnHeaderValues(this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells,"Padding",n,t);this.dataGroupInfo.Columns.length>0&&this.updateGroupHeaderValues(this.lastColumnGroupMembers,"Padding",n,t)}},n.prototype.updateContentBorderStyle=function(n){this.contentBorderStyle=n;this.setContentBorderStyle(n)},n.prototype.updateContentBorderWidth=function(n){this.contentBorderWidth=n;this.setContentBorderWidth(n)},n.prototype.updateContentBorderColor=function(n){this.contentBorderColor=n;this.setContentBorderColor(n)},n.prototype.updateContentBackgroundColor=function(n){this.contentBackColor=n;this.setContentBackgroundColor(n)},n.prototype.updateContentFontFamily=function(n){this.contentFontFamily=n;this.setContentFontFamily(n)},n.prototype.updateContentFontColor=function(n){this.contentFontColor=n;this.setContentFontColor(n)},n.prototype.updateContentFontSize=function(n){this.contentFontSize=n;this.setContentFontSize(n)},n.prototype.updateContentFontStyle=function(n){this.contentFontStyle=n;this.setContentFontStyle(n)},n.prototype.updateContentFontWeight=function(n){this.contentFontWeight=n;this.setContentFontWeight(n)},n.prototype.updateContentTextDecoration=function(n){this.contentTextDecoration=n;this.setContentTextDecoration(n)},n.prototype.updateContentTextAlignment=function(n){this.contentTextAlign=n;this.setContentTextAlign(n)},n.prototype.updateContentPadding=function(n,t){switch(t){case"-left":this.contentPaddingLeft=n+"pt";break;case"-right":this.contentPaddingRight=n+"pt";break;case"-top":this.contentPaddingTop=n+"pt";break;case"-bottom":this.contentPaddingBottom=n+"pt"}this.setContentPadding(n,t)},n.prototype.updateCellBorderLines=function(n){for(var t=0;t<n.length;t++)n[t].Style.TopBorder=this.createBorder("Top"),n[t].Style.BottomBorder=this.createBorder("Bottom"),n[t].Style.LeftBorder=this.createBorder("Left"),n[t].Style.RightBorder=this.createBorder("Right"),n[t].Style.TopBorder.Style=this.horizontalGridLine?"Solid":"None",n[t].Style.BottomBorder.Style=this.horizontalGridLine?"Solid":"None",n[t].Style.LeftBorder.Style=this.verticalGridLine?"Solid":"None",n[t].Style.RightBorder.Style=this.verticalGridLine?"Solid":"None"},n.prototype.getCellGroupReportItems=function(n){for(var r,i=[],t=0;t<n.length;t++)ej.isNullOrUndefined(n[t].TablixHeader)||ej.isNullOrUndefined(n[t].TablixHeader.CellContents)||i.push(n[t].TablixHeader.CellContents.ReportItem),n[t].TablixMembers.length>0&&(r=this.getCellGroupReportItems(n[t].TablixMembers),i=$.merge(i,r));return i},n.prototype.getCellReportItems=function(n){var r=[],u,i,f,t;switch(n){case"TablixCorner":for(i=0;i<this.gridJson.TablixCorner.TablixCornerRows.length;i++)for(u=this.gridJson.TablixCorner.TablixCornerRows[i].TablixCornerCells,t=0;t<u.length;t++)ej.isNullOrUndefined(u[t].CellContents)||r.push(u[t].CellContents.ReportItem);break;case"TablixBody":for(i=0;i<this.gridJson.TablixBody.TablixRows.length;i++)for(f=this.gridJson.TablixBody.TablixRows[i].TablixCells,t=0;t<f.length;t++)r.push(f[t].CellContents.ReportItem);break;case"TablixColumnGroup":r=this.getCellGroupReportItems(this.gridJson.TablixColumnHierarchy.TablixMembers);break;case"TablixRowGroup":r=this.getCellGroupReportItems(this.gridJson.TablixRowHierarchy.TablixMembers)}return r},n.prototype.updateGridLines=function(){var i,t,n;for((this.dataGroupInfo.Values.length===0||this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Columns.length!==0)&&this.updateCellBorderLines(this.getCellReportItems("TablixCorner")),this.updateCellBorderLines(this.getCellReportItems("TablixBody")),this.updateCellBorderLines(this.getCellReportItems("TablixColumnGroup")),this.updateCellBorderLines(this.getCellReportItems("TablixRowGroup")),i=0;i<this.tableRows.length;i++)for(t=$(this.tableRows[i]).children(),n=0;n<t.length;n++)$(t[n]).css("border-bottom-style",this.horizontalGridLine?"Solid":"None"),$(t[n]).css("border-top-style",this.horizontalGridLine?"Solid":"None"),$(t[n]).css("border-left-style",this.verticalGridLine?"Solid":"None"),$(t[n]).css("border-right-style",this.verticalGridLine?"Solid":"None")},n.prototype.updateHorizontalGridLine=function(n){this.horizontalGridLine=n;this.updateGridLines()},n.prototype.updateVerticalGridLine=function(n){this.verticalGridLine=n;this.updateGridLines()},n.prototype.addTableSummaryRow=function(n){n?($(this.tableRows[this.dataGroupInfo.Columns.length+(this.showHeader?1:0)+this.dataGroupInfo.Rows.length]).css("display","table-row"),this.renderRowGroups(this.dataGroupInfo,!0,this.dataGroupInfo.Columns.length),this.renderDatas(this.dataGroupInfo,!0,0,this.dataGroupInfo.Rows.length)):($(this.tableRows[this.tableRows.length-1]).css("display","none"),this.gridJson.TablixBody.TablixRows=this.gridJson.TablixBody.TablixRows.slice(0,-1),this.gridJson.TablixRowHierarchy.TablixMembers=this.gridJson.TablixRowHierarchy.TablixMembers.slice(0,-1));this.tableRows=this.tableElement.find("tr")},n.prototype.addTableSummaryColumn=function(n){var i,t,r;if(n){for(i=this.dataGroupInfo.Values.length>0?this.dataGroupInfo.Values[0].Values.length:1,t=0;t<this.dataGroupInfo.Columns.length+1+this.dataGroupInfo.Rows.length+1;t++)if(t>=this.dataGroupInfo.Columns.length)for(r=0;r<=i;r++)$("#summaryColumn_"+t.toString()+(this.dataGroupInfo.Rows.length+this.dataGroupInfo.Columns.length*i+r).toString()).css("display","table-cell");else $("#summaryColumn_"+t.toString()+(this.dataGroupInfo.Rows.length+this.dataGroupInfo.Columns.length*i).toString()).css("display","table-cell");this.renderColumnGroups(this.dataGroupInfo,!0,this.dataGroupInfo.Columns.length*i);this.renderColumnHeader(this.dataGroupInfo,!0,this.dataGroupInfo.Columns.length*i);this.renderDatas(this.dataGroupInfo,!0,this.dataGroupInfo.Columns.length*this.dataGroupInfo.Values[0].Values.length)}else{for(i=this.dataGroupInfo.Values.length>0?this.dataGroupInfo.Values[0].Values.length:1,t=0;t<this.dataGroupInfo.Columns.length+1+this.dataGroupInfo.Rows.length+1;t++)if(t>=this.dataGroupInfo.Columns.length){if(this.dataGroupInfo.Values.length>0)for(r=0;r<=i;r++)$("#summaryColumn_"+t.toString()+(this.dataGroupInfo.Rows.length+this.dataGroupInfo.Columns.length*i+r).toString()).css("display","none")}else $("#summaryColumn_"+t.toString()+(this.dataGroupInfo.Rows.length+this.dataGroupInfo.Columns.length*i).toString()).css("display","none");this.gridJson.TablixBody.TablixColumns=this.gridJson.TablixBody.TablixColumns.slice(0,-1);this.gridJson.TablixColumnHierarchy.TablixMembers=this.gridJson.TablixColumnHierarchy.TablixMembers.slice(0,-1);this.lastColumnGroupMembers=this.lastColumnGroupMembers.slice(0,-1)}this.tableRows=this.tableElement.find("tr")},n.prototype.addSummaryRow=function(n,t,i){var r,u,f;if(n){for($(this.tableRows[this.tableRows.length-1-(t+1)]).css("display","table-row"),r=0;r<=t;r++)u=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).find("th"),$(u[r]).attr("rowspan",parseInt($(u[r]).attr("rowspan"),10)+1);i&&(this.renderRowGroups(this.dataGroupInfo,!0,this.dataGroupInfo.Columns.length),this.renderDatas(this.dataGroupInfo,!0,0,this.dataGroupInfo.Rows.length))}else{for($(this.tableRows[this.tableRows.length-1-(t+1)]).css("display","none"),r=0;r<=t;r++)u=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).find("th"),$(u[r]).attr("rowspan",parseInt($(u[r]).attr("rowspan"),10)-1);i&&(f=this.getTablixRowMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],t+1),f.TablixMembers=f.TablixMembers.slice(0,-1),this.enableTableSummaryColumn?this.gridJson.TablixBody.TablixRows.splice(this.gridJson.TablixBody.TablixRows.length-1-(t+1),1):this.gridJson.TablixBody.TablixRows.splice(this.gridJson.TablixBody.TablixRows.length-1-t,1))}this.tableRows=this.tableElement.find("tr")},n.prototype.addSummaryColumn=function(n,t,i){var f,u,e,o,r;if(n){for(f=this.dataGroupInfo.Values.length>0?this.dataGroupInfo.Values[0].Values.length:1,u=t+1;u<this.dataGroupInfo.Columns.length+1+this.dataGroupInfo.Rows.length+1;u++)if(u>=this.dataGroupInfo.Columns.length)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)$("#summaryColumn_"+u.toString()+(this.dataGroupInfo.Rows.length+(this.dataGroupInfo.Columns.length-(t+1))*f+r).toString()).css("display","table-cell");else $("#summaryColumn_"+u.toString()+(this.dataGroupInfo.Rows.length+(this.dataGroupInfo.Columns.length-(t+1))*f).toString()).css("display","table-cell");for(r=0;r<=t;r++)e=$(this.tableRows[r]).find("th"),$(e[r===0?1:0]).attr("colspan",parseInt($(e[r===0?1:0]).attr("colspan"),10)+1);i&&(this.renderColumnGroups(this.dataGroupInfo,!0,this.dataGroupInfo.Columns.length),this.renderColumnHeader(this.dataGroupInfo,!0,this.dataGroupInfo.Columns.length*this.dataGroupInfo.Values[0].Values.length),this.renderDatas(this.dataGroupInfo,!0,this.dataGroupInfo.Columns.length*this.dataGroupInfo.Values[0].Values.length))}else{for(f=this.dataGroupInfo.Values.length>0?this.dataGroupInfo.Values[0].Values.length:1,u=t+1;u<this.dataGroupInfo.Columns.length+1+this.dataGroupInfo.Rows.length+1;u++)if(u>=this.dataGroupInfo.Columns.length){if(this.dataGroupInfo.Values.length>0)for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)$("#summaryColumn_"+u.toString()+(this.dataGroupInfo.Rows.length+(this.dataGroupInfo.Columns.length-(t+1))*f+r).toString()).css("display","none")}else $("#summaryColumn_"+u.toString()+(this.dataGroupInfo.Rows.length+(this.dataGroupInfo.Columns.length-(t+1))*f).toString()).css("display","none");for(r=0;r<=t;r++)e=$(this.tableRows[r]).find("th"),$(e[r===0?1:0]).attr("colspan",parseInt($(e[r===0?1:0]).attr("colspan"),10)-1);if(i)for(o=this.getTablixMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],t+1),ej.isNullOrUndefined(o)||(o.TablixMembers=o.TablixMembers.slice(0,-1)),r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)this.gridJson.TablixBody.TablixColumns.splice((this.dataGroupInfo.Columns.length-(t+1))*this.dataGroupInfo.Values[0].Values.length,1)}this.tableRows=this.tableElement.find("tr")},n.prototype.updateSummaryRow=function(n){this.rows[this.selectedRowIndex].enableSummaryRow=$.parseJSON(n);this.addSummaryRow($.parseJSON(n),this.selectedRowIndex,!0);$("#SummaryRows_Container").css("display",n.toString()==="true"?"block":"none");this.renderSummaryRow();this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowGroupSummaryBackgroundColor",this.rows[this.selectedRowIndex].enableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowGroupSummaryFont",this.rows[this.selectedRowIndex].enableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowGroupSummaryFontStyleRoot",this.rows[this.selectedRowIndex].enableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowGroupSummaryTextDecoration",this.rows[this.selectedRowIndex].enableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowGroupSummaryTextAlign",this.rows[this.selectedRowIndex].enableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowGroupSummaryPadding",this.rows[this.selectedRowIndex].enableSummaryRow);this.propertyPanel.refreshScroller();this.designPanel.updateWidgetSelectionBox(this.controlContainer);this.getDataRows();this.updateGridLines()},n.prototype.updateSummaryColumn=function(n){this.columns[this.selectedColumnIndex].enableSummaryColumn=$.parseJSON(n);this.addSummaryColumn($.parseJSON(n),this.selectedColumnIndex,!0);$("#SummaryColumns_Container").css("display",n.toString()==="true"?"block":"none");this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryBackgroundColor",this.columns[this.selectedColumnIndex].enableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryFont",this.columns[this.selectedColumnIndex].enableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryFontStyleRoot",this.columns[this.selectedColumnIndex].enableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryTextDecoration",this.columns[this.selectedColumnIndex].enableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryTextAlign",this.columns[this.selectedColumnIndex].enableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryPadding",this.columns[this.selectedColumnIndex].enableSummaryColumn);this.propertyPanel.refreshScroller();this.designPanel.updateWidgetSelectionBox(this.controlContainer);this.getDataColumns();this.updateGridLines()},n.prototype.setPropertyElement=function(n,t,i,r){var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),n,t,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=t;this.propertyPanel.updatePropertyValue(u,"PivotGrid",i)},n.prototype.updateRowName=function(n){var t;return this.isRowSettingsEnabled=!0,n!==""?(this.selectedRowIndex=this.getColumnIndex(n),this.rows[this.selectedRowIndex].Name=n,this.rows[this.selectedRowIndex].Label===""&&(this.rows[this.selectedRowIndex].Label=this.dataGroupInfo.Rows[this.selectedRowIndex].Field),this.enableRowBasicSettings(!0),this.enableRowHeaderSettings(!0),this.selectedRowIndex===this.dataGroupInfo.Rows.length-1?(this.enableRowSummarySettings(!1),$("#SummaryRows_Container").css("display","none"),this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","SummaryRow",!1)):(this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","SummaryRow",!0),this.enableRowSummarySettings(this.getRowSettings(n,"SummaryRow")),this.getRowSettings(n,"SummaryRow")&&($("#SummaryRows_Container").css("display","block"),this.renderSummaryRow())),this.updateRowHeaderSettings(n),this.updateRowSummarySettings(n)):(this.enableRowBasicSettings(!1),this.enableRowHeaderSettings(!1),this.enableRowSummarySettings(!1),this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","SummaryRow",!1)),t=this.rowName,this.rowName=n,this.propertyPanel.refreshScroller(),t},n.prototype.renderSummaryTableColumn=function(){$("#TableSummaryColumns_summaryGrid").empty();this.tableSummaryColumns=this.getSummaryTableColumns();this.renderSummaryColumnDetails(this.tableSummaryColumns,"TableSummaryColumns")},n.prototype.renderSummaryColumn=function(){$("#SummaryColumns_summaryGrid").empty();this.dataGroupInfo.Columns.length>1&&(this.columns[this.selectedColumnIndex].SummaryColumns=this.getSummaryColumns(),this.renderSummaryColumnDetails(this.columns[this.selectedColumnIndex].SummaryColumns,"SummaryColumns"))},n.prototype.renderSummaryTableRow=function(){$("#TableSummaryRows_summaryGrid").empty();this.tableSummaryRows=this.getSummaryTableRows();this.renderSummaryColumnDetails(this.tableSummaryRows,"TableSummaryRows")},n.prototype.renderSummaryRow=function(){$("#SummaryRows_summaryGrid").empty();this.dataGroupInfo.Rows.length>1&&(this.rows[this.selectedRowIndex].SummaryRows=this.getSummaryRows(),this.renderSummaryColumnDetails(this.rows[this.selectedRowIndex].SummaryRows,"SummaryRows"))},n.prototype.renderSummaryColumnDetails=function(n,t){for(var u,f,r,i=0;i<=n.length;i++){u=ej.buildTag("tr","",{padding:"0px",margin:"0px","text-align":"left","vertical-align":"middle",height:"30px"},{vAlign:"top",id:i===0?t+"_Header":t+"_"+(i-1)});u.on("mouseover",$.proxy(this.summaryTableRowHover,this));u.on("mouseout",$.proxy(this.summaryTableRowLeave,this));for(f=0;f<2;f++)r=void 0,i===0?(r=this.createTableCellHeader({Background:"#fbfbfb"}),r.text(f===0?"Column":"Expression")):(r=this.createTableCell({Background:"Transparent"}),r.text(f===0?n[i-1].Column:n[i-1].Expression)),u.append(r);$("#"+t+"_summaryGrid").append(u)}},n.prototype.summaryTableRowHover=function(n){var t=$(n.currentTarget).attr("id");t!=="summaryRowHeader"&&($("#"+t+"_Expression").css("visibility","visible"),$(n.currentTarget).css("background-color","#f9f9f9"))},n.prototype.summaryTableRowLeave=function(n){var t=$(n.currentTarget).attr("id");t!=="summaryRowHeader"&&($("#"+t+"_Expression").css("visibility","hidden"),$(n.currentTarget).css("background-color","white"))},n.prototype.renderSummaryTableColumns=function(n,t){var i,r,u;ej.isNullOrUndefined(n)?$("#"+t.name+"_Container").css("display",t.isVisible?"block":"none"):(i=ej.buildTag("div","",{margin:"15px","margin-top":"15px",display:t.isVisible?"block":"none"},{id:t.name+"_Container"}),r=ej.buildTag("div","",{"margin-bottom":"10px","margin-top":"10px","font-weight":"600"},{id:t.name+"_Label"}),r.text(t.displayName),i.append(r),n.append(i),u=ej.buildTag("table.e-reportdesigner-grid-table","",{width:"100%",height:"100%","font-size":"10pt"},{id:t.name+"_summaryGrid",cellspacing:"0",cellpadding:"0"}),i.append(u));switch(t.name){case"TableSummaryColumns":this.renderSummaryTableColumn();break;case"TableSummaryRows":this.renderSummaryTableRow();break;case"SummaryColumns":this.renderSummaryColumn();break;case"SummaryRows":this.renderSummaryRow()}},n.prototype.enableRowBasicSettings=function(n){if(n){var t={value:this.getSelectedRowTextActionInfo(),name:"RowLink",displayName:"Link",isVisible:n,itemType:"link",category:"RowAction",categoryName:"RowGroupSettings"},i=ejDashboardDesigner.getInstance("ReportAction");i.renderAction(null,"PivotGrid_RowGroupSettings",t)}this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSelectedFormat",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowAction",n)},n.prototype.enableColumnBasicSettings=function(n){if(n){var t={value:this.getSelectedColumnTextActionInfo(),name:"ColumnLink",displayName:"Link",isVisible:n,itemType:"link",category:"ColumnAction",categoryName:"ColumnGroupSettings"},i=ejDashboardDesigner.getInstance("ReportAction");i.renderAction(null,"PivotGrid_ColumnGroupSettings",t)}this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnSelectedFormat",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnAction",n)},n.prototype.enableColumnHeaderSettings=function(n){this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderBackgroundColor",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderBorder",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderFont",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderFontStyleRoot",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderTextDecoration",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderTextAlign",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnHeaderPadding",n)},n.prototype.enableRowHeaderSettings=function(n){this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowHeaderBackgroundColor",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowHeaderBorder",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowHeaderFont",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowHeaderFontStyleRoot",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowHeaderTextDecoration",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowHeaderTextAlign",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowHeaderPadding",n)},n.prototype.enableColumnSummarySettings=function(n){this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>1&&n&&this.dataGroupInfo.Columns.length>1?this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","SummaryValue",n):this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","SummaryValue",!1);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryBackgroundColor",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryBorderColor",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryBorderStyle",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryBorderWidth",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryFont",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryFontStyleRoot",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryTextDecoration",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryTextAlign",n);this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","ColumnGroupSummaryPadding",n)},n.prototype.enableRowSummarySettings=function(n){this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSummaryBackgroundColor",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSummaryBorderColor",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSummaryBorderStyle",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSummaryBorderWidth",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSummaryFont",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSummaryFontStyleRoot",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSummaryTextDecoration",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","RowSummaryTextAlign",n);this.propertyPanel.updateItemVisibility("PivotGrid","RowGroupSettings","ColumnGroupSummaryPadding",n)},n.prototype.updateColumnBasicSettings=function(n){n!==""&&(this.propertyPanel.canUpdate=!1,this.setPropertyElement("ColumnWidth","ColumnGroupSettings",this.getColumnSettings(n,"Width")),this.propertyPanel.canUpdate=!0)},n.prototype.updateRowHeaderSettings=function(n){n!==""&&(this.propertyPanel.canUpdate=!1,this.setPropertyElement("RowHeaderBackgroundColor","RowGroupSettings",this.getRowSettings(n,"HeaderBackColor")),this.setPropertyElement("RowHeaderWidth","RowGroupSettings",this.getRowSettings(n,"HeaderWidth")),this.setPropertyElement("RowHeaderBackgroundColor","RowGroupSettings",this.getRowSettings(n,"HeaderBackColor")),this.setPropertyElement("RowHeaderBorderColor","RowGroupSettings",this.getRowSettings(n,"HeaderBorderColor")),this.setPropertyElement("RowHeaderBorderWidth","RowGroupSettings",this.getRowSettings(n,"HeaderBorderWidth")),this.setPropertyElement("RowHeaderBorderStyle","RowGroupSettings",this.getRowSettings(n,"HeaderBorderStyle")),this.setPropertyElement("RowHeaderFontFamily","RowGroupSettings",this.getRowSettings(n,"HeaderFontFamily")),this.setPropertyElement("RowHeaderFontSize","RowGroupSettings",this.getRowSettings(n,"HeaderFontSize")),this.setPropertyElement("RowHeaderFontColor","RowGroupSettings",this.getRowSettings(n,"HeaderFontColor")),this.setPropertyElement("RowHeaderFontStyle","RowGroupSettings",this.getRowSettings(n,"HeaderFontStyle")),this.setPropertyElement("RowHeaderFontWeight","RowGroupSettings",this.getRowSettings(n,"HeaderFontWeight")),this.setPropertyElement("RowHeaderTextDecoration","RowGroupSettings",this.getRowSettings(n,"HeaderTextDecoration")),this.setPropertyElement("RowHeaderTextAlign","RowGroupSettings",this.getRowSettings(n,"HeaderTextAlign")),this.setPropertyElement("RowHeaderPaddingLeft","RowGroupSettings",this.getRowSettings(n,"HeaderPaddingLeft")),this.setPropertyElement("RowHeaderPaddingTop","RowGroupSettings",this.getRowSettings(n,"HeaderPaddingTop")),this.setPropertyElement("RowHeaderPaddingBottom","RowGroupSettings",this.getRowSettings(n,"HeaderPaddingBottom")),this.setPropertyElement("RowHeaderPaddingRight","RowGroupSettings",this.getRowSettings(n,"HeaderPaddingRight")),this.propertyPanel.canUpdate=!0)},n.prototype.updateColumnHeaderSettings=function(n){n!==""&&(this.propertyPanel.canUpdate=!1,this.setPropertyElement("ColumnHeaderBackgroundColor","ColumnGroupSettings",this.getColumnSettings(n,"HeaderBackColor")),this.setPropertyElement("ColumnHeaderWidth","ColumnGroupSettings",this.getColumnSettings(n,"Width")),this.setPropertyElement("ColumnHeaderBackgroundColor","ColumnGroupSettings",this.getColumnSettings(n,"HeaderBackColor")),this.setPropertyElement("ColumnHeaderBorderColor","ColumnGroupSettings",this.getColumnSettings(n,"HeaderBorderColor")),this.setPropertyElement("ColumnHeaderBorderWidth","ColumnGroupSettings",this.getColumnSettings(n,"HeaderBorderWidth")),this.setPropertyElement("ColumnHeaderBorderStyle","ColumnGroupSettings",this.getColumnSettings(n,"HeaderBorderStyle")),this.setPropertyElement("ColumnHeaderFontFamily","ColumnGroupSettings",this.getColumnSettings(n,"HeaderFontFamily")),this.setPropertyElement("ColumnHeaderFontSize","ColumnGroupSettings",this.getColumnSettings(n,"HeaderFontSize")),this.setPropertyElement("ColumnHeaderFontColor","ColumnGroupSettings",this.getColumnSettings(n,"HeaderFontColor")),this.setPropertyElement("ColumnHeaderFontStyle","ColumnGroupSettings",this.getColumnSettings(n,"HeaderFontStyle")),this.setPropertyElement("ColumnHeaderFontWeight","ColumnGroupSettings",this.getColumnSettings(n,"HeaderFontWeight")),this.setPropertyElement("ColumnHeaderTextDecoration","ColumnGroupSettings",this.getColumnSettings(n,"HeaderTextDecoration")),this.setPropertyElement("ColumnHeaderTextAlign","ColumnGroupSettings",this.getColumnSettings(n,"HeaderTextAlign")),this.setPropertyElement("ColumnHeaderPaddingLeft","ColumnGroupSettings",this.getColumnSettings(n,"HeaderPaddingLeft")),this.setPropertyElement("ColumnHeaderPaddingTop","ColumnGroupSettings",this.getColumnSettings(n,"HeaderPaddingTop")),this.setPropertyElement("ColumnHeaderPaddingBottom","ColumnGroupSettings",this.getColumnSettings(n,"HeaderPaddingBottom")),this.setPropertyElement("ColumnHeaderPaddingRight","ColumnGroupSettings",this.getColumnSettings(n,"HeaderPaddingRight")),this.propertyPanel.canUpdate=!0)},n.prototype.updateColumnSummarySettings=function(n){n!==""&&(this.propertyPanel.canUpdate=!1,this.setPropertyElement("SummaryColumn","ColumnGroupSettings",this.getColumnSettings(n,"SummaryColumn")),this.setPropertyElement("ColumnGroupSummaryBackgroundColor","ColumnGroupSettings",this.getColumnSettings(n,"SummaryBackColor")),this.setPropertyElement("SummaryColumn","ColumnGroupSettings",this.getColumnSettings(n,"SummaryColumn")),this.setPropertyElement("ColumnGroupSummaryBorderColor","ColumnGroupSettings",this.getColumnSettings(n,"SummaryBorderColor")),this.setPropertyElement("ColumnGroupSummaryBorderStyle","ColumnGroupSettings",this.getColumnSettings(n,"SummaryBorderStyle")),this.setPropertyElement("ColumnGroupSummaryBorderWidth","ColumnGroupSettings",this.getColumnSettings(n,"SummaryBorderWidth")),this.setPropertyElement("ColumnGroupSummaryBackgroundColor","ColumnGroupSettings",this.getColumnSettings(n,"SummaryBackColor")),this.setPropertyElement("ColumnGroupSummaryFontFamily","ColumnGroupSettings",this.getColumnSettings(n,"SummaryFontFamily")),this.setPropertyElement("ColumnGroupSummaryFontSize","ColumnGroupSettings",this.getColumnSettings(n,"SummaryFontSize")),this.setPropertyElement("ColumnGroupSummaryFontColor","ColumnGroupSettings",this.getColumnSettings(n,"SummaryFontColor")),this.setPropertyElement("ColumnGroupSummaryFontStyle","ColumnGroupSettings",this.getColumnSettings(n,"SummaryFontStyle")),this.setPropertyElement("ColumnGroupSummaryFontWeight","ColumnGroupSettings",this.getColumnSettings(n,"SummaryFontWeight")),this.setPropertyElement("ColumnGroupSummaryTextDecoration","ColumnGroupSettings",this.getColumnSettings(n,"SummaryTextDecoration")),this.setPropertyElement("ColumnGroupSummaryTextAlign","ColumnGroupSettings",this.getColumnSettings(n,"SummaryTextAlign")),this.setPropertyElement("ColumnGroupSummaryPaddingLeft","ColumnGroupSettings",this.getColumnSettings(n,"SummaryPaddingLeft")),this.setPropertyElement("ColumnGroupSummaryPaddingTop","ColumnGroupSettings",this.getColumnSettings(n,"SummaryPaddingTop")),this.setPropertyElement("ColumnGroupSummaryPaddingBottom","ColumnGroupSettings",this.getColumnSettings(n,"SummaryPaddingBottom")),this.setPropertyElement("ColumnGroupSummaryPaddingRight","ColumnGroupSettings",this.getColumnSettings(n,"SummaryPaddingRight")),this.propertyPanel.canUpdate=!0)},n.prototype.updateRowSummarySettings=function(n){n!==""&&(this.propertyPanel.canUpdate=!1,this.setPropertyElement("RowSummaryBackgroundColor","RowGroupSettings",this.getRowSettings(n,"SummaryBackColor")),this.setPropertyElement("SummaryRow","RowGroupSettings",this.getRowSettings(n,"SummaryRow")),this.setPropertyElement("RowSummaryWidth","RowGroupSettings",this.getRowSettings(n,"SummaryWidth")),this.setPropertyElement("RowSummaryBorderColor","RowGroupSettings",this.getRowSettings(n,"SummaryBorderColor")),this.setPropertyElement("RowSummaryBorderStyle","RowGroupSettings",this.getRowSettings(n,"SummaryBorderStyle")),this.setPropertyElement("RowSummaryBorderWidth","RowGroupSettings",this.getRowSettings(n,"SummaryBorderWidth")),this.setPropertyElement("RowSummaryBackgroundColor","RowGroupSettings",this.getRowSettings(n,"SummaryBackColor")),this.setPropertyElement("RowSummaryFontFamily","RowGroupSettings",this.getRowSettings(n,"SummaryFontFamily")),this.setPropertyElement("RowSummaryFontSize","RowGroupSettings",this.getRowSettings(n,"SummaryFontSize")),this.setPropertyElement("RowSummaryFontColor","RowGroupSettings",this.getRowSettings(n,"SummaryFontColor")),this.setPropertyElement("RowSummaryFontStyle","RowGroupSettings",this.getRowSettings(n,"SummaryFontStyle")),this.setPropertyElement("RowSummaryFontWeight","RowGroupSettings",this.getRowSettings(n,"SummaryFontWeight")),this.setPropertyElement("RowSummaryTextDecoration","RowGroupSettings",this.getRowSettings(n,"SummaryTextDecoration")),this.setPropertyElement("RowSummaryTextAlign","RowGroupSettings",this.getRowSettings(n,"SummaryTextAlign")),this.setPropertyElement("RowSummaryPaddingLeft","RowGroupSettings",this.getRowSettings(n,"SummaryPaddingLeft")),this.setPropertyElement("RowSummaryPaddingTop","RowGroupSettings",this.getRowSettings(n,"SummaryPaddingTop")),this.setPropertyElement("RowSummaryPaddingBottom","RowGroupSettings",this.getRowSettings(n,"SummaryPaddingBottom")),this.setPropertyElement("RowSummaryPaddingRight","RowGroupSettings",this.getRowSettings(n,"SummaryPaddingRight")),this.propertyPanel.canUpdate=!0)},n.prototype.updateTableSummaryColumn=function(n){this.enableTableSummaryColumn=$.parseJSON(n);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnBackgroundColor",this.enableTableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnBorder",this.enableTableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnFont",this.enableTableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnFontStyleRoot",this.enableTableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnTextDecoration",this.enableTableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnTextAlign",this.enableTableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumnPadding",this.enableTableSummaryColumn);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryColumns",this.enableTableSummaryColumn);this.addTableSummaryColumn(this.enableTableSummaryColumn);$("#TableSummaryColumns_Container").css("display",n.toString()==="true"?"block":"none");this.renderSummaryTableColumn();this.getDataColumns();this.updateGridSize();this.designPanel.updateWidgetSelectionBox(this.controlContainer);this.updateGridLines();this.propertyPanel.refreshScroller()},n.prototype.updateTableSummaryRow=function(n){this.enableTableSummaryRow=$.parseJSON(n);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowBackgroundColor",this.enableTableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowBorder",this.enableTableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowFont",this.enableTableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowFontStyleRoot",this.enableTableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowTextDecoration",this.enableTableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowTextAlign",this.enableTableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRowPadding",this.enableTableSummaryRow);this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryRows",this.enableTableSummaryRow);this.addTableSummaryRow(this.enableTableSummaryRow);$("#TableSummaryRows_Container").css("display",n.toString()==="true"?"block":"none");this.renderSummaryTableRow();this.getDataRows();this.updateGridLines();this.propertyPanel.refreshScroller()},n.prototype.getColumnSize=function(){return this.selectedColumnSettingsIndex>=this.dataGroupInfo.Rows.length?this.gridJson.TablixBody.TablixColumns[this.selectedColumnSettingsIndex-this.dataGroupInfo.Rows.length].Width.size:this.getTablixMemberSize(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],this.selectedColumnSettingsIndex)},n.prototype.getMemberIndex=function(){return Math.floor((this.selectedColumnSettingsIndex-this.dataGroupInfo.Rows.length)/this.dataGroupInfo.Values[0].Values.length)-1},n.prototype.setColumnHeader=function(n){var t,i,r;this.selectedColumnSettingsIndex>=this.dataGroupInfo.Rows.length?this.isEmptyColumn?this.gridJson.TablixBody.TablixRows[0].TablixCells[this.selectedColumnSettingsIndex-this.dataGroupInfo.Rows.length].CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=n:this.selectedColumnSettingsIndex<this.dataGroupInfo.Rows.length+this.dataGroupInfo.Values[0].Values.length?this.setTablixMemberHeader(this.gridJson.TablixColumnHierarchy.TablixMembers[0],this.selectedColumnSettingsIndex-this.dataGroupInfo.Rows.length,n):this.selectedColumnSettingsIndex<this.dataGroupInfo.Rows.length+this.dataGroupInfo.Columns.length*this.dataGroupInfo.Values[0].Values.length?(t=this.getMemberIndex(),i=this.selectedColumnSettingsIndex-this.dataGroupInfo.Rows.length-(t+1)*this.dataGroupInfo.Values[0].Values.length,this.setTablixMemberSummaryHeader(this.gridJson.TablixColumnHierarchy.TablixMembers[0],0,t,i,n)):(t=this.getMemberIndex(),i=this.selectedColumnSettingsIndex-this.dataGroupInfo.Rows.length-(t+1)*this.dataGroupInfo.Values[0].Values.length,this.setTablixMemberHeader(this.gridJson.TablixColumnHierarchy.TablixMembers[1],i,n)):ej.isNullOrUndefined(this.gridJson.TablixCorner)?this.setTablixRowGroupHeader(this.gridJson.TablixRowHierarchy.TablixMembers[0],0,this.selectedColumnSettingsIndex,n):this.gridJson.TablixCorner.TablixCornerRows[this.dataGroupInfo.Columns.length].TablixCornerCells[this.selectedColumnSettingsIndex].CellContents.ReportItem.Paragraphs[0].TextRuns[0].Value=n;r=$(this.tableRows[this.dataGroupInfo.Columns.length]).find("th");$(r[this.selectedColumnSettingsIndex]).text(n)},n.prototype.getColumnHeader=function(){var n=$(this.tableRows[this.dataGroupInfo.Columns.length]).find("th");return $(n[this.selectedColumnSettingsIndex]).text()},n.prototype.updateColumnHeader=function(n){this.setColumnHeader(n)},n.prototype.updateColumns=function(n){var t;return n!==""?(this.selectedColumnSettingsIndex=this.getColumnIndex(n),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnSettings","ColumnTitle",!0),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnSettings","ColumnWidth",!0),this.propertyPanel.canUpdate=!1,this.setPropertyElement("ColumnWidth","ColumnSettings",this.columnWidths[this.selectedColumnSettingsIndex],-1),this.setPropertyElement("ColumnTitle","ColumnSettings",this.getColumnHeader(),-1),this.propertyPanel.canUpdate=!0):(this.propertyPanel.updateItemVisibility("PivotGrid","ColumnSettings","ColumnTitle",!1),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnSettings","ColumnWidth",!1)),t=this.columnsName,this.columnsName=n,this.propertyPanel.refreshScroller(),t},n.prototype.updateRows=function(n){var t;return n!==""?(this.selectedRowSettingsIndex=this.getColumnIndex(n),this.propertyPanel.updateItemVisibility("PivotGrid","RowSettings","RowHeight",!0),this.propertyPanel.canUpdate=!1,this.setPropertyElement("RowHeight","RowSettings",this.rowHeights[this.selectedRowSettingsIndex],-1),this.propertyPanel.canUpdate=!0):this.propertyPanel.updateItemVisibility("PivotGrid","RowSettings","RowHeight",!1),t=this.rowsName,this.rowsName=n,this.propertyPanel.refreshScroller(),t},n.prototype.setSummaryValue=function(n){n!==""&&(this.summaryValueIndex=this.getColumnIndex(n),this.summaryValueName=n,this.renderSummaryTableColumn())},n.prototype.setColumnSummaryValue=function(n){n!==""&&(this.summaryColumnValueIndex=this.getColumnIndex(n),this.summaryColumnValueName=n,this.renderSummaryColumn())},n.prototype.updateColumn=function(n){var t;return this.isColumnSettingsEnabled=!0,n!==""?(this.selectedColumnIndex=this.getColumnIndex(n),this.columns[this.selectedColumnIndex].Name=n,this.columns[this.selectedColumnIndex].Label===""&&(this.columns[this.selectedColumnIndex].Label=this.dataGroupInfo.Columns[this.selectedColumnIndex].Field),this.enableColumnBasicSettings(!0),this.enableColumnHeaderSettings(!0),this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?(this.enableColumnSummarySettings(!1),$("#SummaryColumns_Container").css("display","none"),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","SummaryColumn",!1)):(this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","SummaryColumn",!0),this.enableColumnSummarySettings(this.getColumnSettings(n,"SummaryColumn")),this.getColumnSettings(n,"SummaryColumn")&&($("#SummaryColumns_Container").css("display","block"),this.renderSummaryColumn())),this.updateColumnBasicSettings(n),this.updateColumnHeaderSettings(n),this.updateColumnSummarySettings(n)):(this.enableColumnBasicSettings(!1),this.enableColumnHeaderSettings(!1),this.enableColumnSummarySettings(!1),this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","SummaryColumn",!1)),t=this.columnName,this.columnName=n,this.propertyPanel.refreshScroller(),t},n.prototype.setContentBorderStyle=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Style.Border.Style=n,$(r[this.dataGroupInfo.Rows.length+t]).css("border-style",n.toLowerCase())},n.prototype.setContentBorderWidth=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Style.Border.Width?i.Style.Border.Width.size=n+"pt":i.Style.Border.Width={__type:"Syncfusion.RDL.DOM.Size",size:n+"pt"},$(r[this.dataGroupInfo.Rows.length+t]).css("border-width",(parseInt(n,10)>0?n:1).toString()+"pt")},n.prototype.setContentBorderColor=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Style.Border.Color=n,$(r[this.dataGroupInfo.Rows.length+t]).css("border-color",n)},n.prototype.setContentBackgroundColor=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Style.BackgroundColor=n,$(r[this.dataGroupInfo.Rows.length+t]).css("background-color",n)},n.prototype.setContentFontFamily=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Paragraphs[0].TextRuns[0].Style.FontFamily=n,$(r[this.dataGroupInfo.Rows.length+t]).css("font-family",n)},n.prototype.setContentFontColor=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Paragraphs[0].TextRuns[0].Style.Color=n,$(r[this.dataGroupInfo.Rows.length+t]).css("color",n)},n.prototype.setContentFontSize=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Paragraphs[0].TextRuns[0].Style.FontSize=this.getDomSize(n),$(r[this.dataGroupInfo.Rows.length+t]).css("font-size",n)},n.prototype.setContentFontStyle=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Paragraphs[0].TextRuns[0].Style.FontStyle=n,$(r[this.dataGroupInfo.Rows.length+t]).css("font-style",n)},n.prototype.setContentFontWeight=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Paragraphs[0].TextRuns[0].Style.FontWeight=n,$(r[this.dataGroupInfo.Rows.length+t]).css("font-weight",n)},n.prototype.setContentTextDecoration=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Paragraphs[0].TextRuns[0].Style.TextDecoration=n,$(r[this.dataGroupInfo.Rows.length+t]).css("text-decoration",n)},n.prototype.setContentTextAlign=function(n){var r=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.gridJson.TablixBody.TablixRows[0].TablixCells[t].CellContents.ReportItem,i.Paragraphs[0].Style.TextAlign=n,$(r[this.dataGroupInfo.Rows.length+t]).css("text-align",n)},n.prototype.setContentPadding=function(n,t){var u=$(this.tableRows[this.dataGroupInfo.Columns.length+1]).children(),i,r;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0)for(i=0;i<this.dataGroupInfo.Values[0].Values.length;i++){r=this.gridJson.TablixBody.TablixRows[0].TablixCells[i].CellContents.ReportItem;switch(t){case"-left":r.Style.PaddingLeft.size=n;break;case"-right":r.Style.PaddingRight.size=n;break;case"-top":r.Style.PaddingTop.size=n;break;case"-bottom":r.Style.PaddingBottom.size=n}$(u[this.dataGroupInfo.Rows.length+i]).css("padding"+t,n)}},n.prototype.setColumnWidth=function(n){var i=this.columnWidths[this.selectedColumnSettingsIndex],t;return this.columnWidths[this.selectedColumnSettingsIndex]=n,this.tableRows=this.tableElement.find("tr"),t=this.updateGridWidth(!0),this.gridJson.Width.size=ej.DashboardUtil.getUnitVal(t+"px","in"),this.propertyPanel.canUpdate=!1,this.setPropertyElement("Width","Position",ej.DashboardUtil.getPixelVal(this.gridJson.Width.size),-1),this.propertyPanel.canUpdate=!0,i},n.prototype.setRowHeight=function(n){var i=this.rowHeights[this.selectedRowSettingsIndex],t;return this.rowHeights[this.selectedRowSettingsIndex]=n,this.tableRows=this.tableElement.find("tr"),t=this.updateGridHeight(!0),this.gridJson.Height.size=ej.DashboardUtil.getUnitVal(t+"px","in"),this.propertyPanel.canUpdate=!1,this.setPropertyElement("Height","Position",ej.DashboardUtil.getPixelVal(this.gridJson.Height.size),-1),this.propertyPanel.canUpdate=!0,i},n.prototype.updatePosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.gridJson,CommandAction.ItemMove,"updatePosition","e-pivotgrid-item")},n.prototype.getBorderHeight=function(){var t=this.tableElement.find("tr"),n=this.getTableCells(t);return parseFloat(this.controlContainer.css("border-top-width"))+parseFloat(this.controlContainer.css("border-bottom-width"))+(ej.isNullOrUndefined(n)?0:parseFloat($(n[0]).css("border-bottom-width"))+parseFloat($(n[0]).css("border-top-width")))},n.prototype.getBorderWidth=function(){var t=this.tableElement.find("tr"),n=this.getTableCells(t);return parseFloat(this.controlContainer.css("border-left-width"))+parseFloat(this.controlContainer.css("border-right-width"))+(ej.isNullOrUndefined(n)?0:parseFloat($(n[0]).css("border-left-width"))+parseFloat($(n[0]).css("border-right-width")))},n.prototype.getTableCells=function(n){for(var i,t=n.length-1;t>=0;t--)if(i=$(n[t]).find("th"),i.length>0)return i;return null},n.prototype.updateSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.gridJson,CommandAction.ItemResize,"updateSize","e-pivotgrid-item")},n.prototype.updateItemSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.gridJson,CommandAction.ItemResize,"updateItemSize","e-pivotgrid-item")},n.prototype.getDomSize=function(n){return{__type:"Syncfusion.RDL.DOM.Size",size:n}},n.prototype.getFontStyle=function(n){var t="";switch(n){case"Default":t="";break;case"Normal":t="normal";break;case"Italic":t="italic"}return t},n.prototype.getFontWeight=function(n){var t="";switch(n){case"Normal":t="normal";break;case"Thin":t="200";break;case"ExtraLight":t="300";break;case"Light":t="400";break;case"Medium":t="500";break;case"SemiBold":t="600";break;case"Bold":t="bold";break;case"ExtraBold":t="800";break;case"Heavy":t="900";break;default:t=""}return t},n.prototype.getTextDecoration=function(n){var t="none";switch(n){case"Default":t="";break;case"None":t="none";break;case"Underline":t="underline";break;case"Overline":t="overline";break;case"LineThrough":t="line-through"}return t},n.prototype.getTextAlign=function(n){var t="";switch(n){case"Default":case"General":t="";break;case"Left":t="left";break;case"Center":t="center";break;case"Right":t="right"}return t},n.prototype.createBorder=function(n){return{__type:"Syncfusion.RDL.DOM."+n+"Border",Color:"LightGrey",Style:n===""?"None":null,Width:{__type:"Syncfusion.RDL.DOM.Size",size:"1pt"}}},n.prototype.createPageBreak=function(){return{__type:"Syncfusion.RDL.DOM.PageBreak",BreakLocation:"None",Disabled:!1,ResetPageNumber:!1}},n.prototype.createSort=function(n){return{__type:"Syncfusion.RDL.DOM.SortExpression",Value:ej.isNullOrUndefined(n)?"":n,Direction:"Ascending"}},n.prototype.createGroup=function(n){return{__type:"Syncfusion.RDL.DOM.GroupExpression",Value:ej.isNullOrUndefined(n)?"":n}},n.prototype.createTablixMemberGroup=function(n){return{__type:"Syncfusion.RDL.DOM.TablixMember",Group:{__type:"Syncfusion.RDL.DOM.Group",Name:"Details",DocumentMapLabel:null,GroupExpressions:[{__type:"Syncfusion.RDL.DOM.GroupExpression",Value:""}],DomainScope:null,PageBreak:null,Filters:[],Variables:[],Parent:null,DataElementName:null,DataElementOutput:0,DocumentMapLabelLocID:null,PageName:null},SortExpressions:[],TablixHeader:null,TablixMembers:ej.isNullOrUndefined(n)||n-1==0&&n>=0?[]:[this.createTablixMemberGroup(n-1)],CustomProperties:[],FixedData:!1,Visibility:null,HideIfNoRows:!1,KeepWithGroup:0,RepeatOnNewPage:!1,DataElementName:null,DataElementOutput:0,KeepTogether:!1}},n.prototype.createTablixCell=function(n,t,i,r){return{__type:"Syncfusion.RDL.DOM.TablixCell",CellContents:{__type:"Syncfusion.RDL.DOM.CellContents",ReportItem:this.createReportItem(n,t,i,r),ColSpan:1,RowSpan:1},DataElementName:null,DataElementOutput:0}},n.prototype.createTablixCornerRow=function(n,t,i,r){return{__type:"Syncfusion.RDL.DOM.TablixCornerRow",TablixCornerCells:this.createTablixCornerCells(n,t,i,r)}},n.prototype.createTablixCornerCells=function(n,t,i,r){for(var f=[],u=0;u<i;u++)f.push(this.createTablixCornerCell(u===0&&!n?n:!0,t,u,i,r));return i===0&&f.push(this.createTablixCornerCell(n,t,0,i,r)),f},n.prototype.createTablixCornerCell=function(n,t,i,r,u){return n?{__type:"Syncfusion.RDL.DOM.TablixCornerCell"}:{__type:"Syncfusion.RDL.DOM.TablixCornerCell",CellContents:{__type:"Syncfusion.RDL.DOM.CellContents",ReportItem:this.createReportItem("_CC"+t.toString()+i,"",!0),ColSpan:r>0?r:1,RowSpan:u>0?u:1}}},n.prototype.createTablixCornerRows=function(n,t){for(var r=[],i=0;i<t;i++)i===0?r.push(this.createTablixCornerRow(!1,i,n,t)):r.push(this.createTablixCornerRow(!0,i,n,t));return r},n.prototype.createReportItem=function(n,t,i,r){return{__type:"Syncfusion.RDL.DOM.TextBox",CanGrow:!0,CanShrink:!1,IsNoRowMessage:!1,DataElementStyle:0,HideDuplicates:null,KeepTogether:!0,Paragraphs:[{__type:"Syncfusion.RDL.DOM.Paragraph",TextRuns:[{__type:"Syncfusion.RDL.DOM.TextRun",InternalLabel:null,Label:null,Value:t,Style:{__type:"Syncfusion.RDL.DOM.Style",BackgroundColor:"Transparent",FontFamily:"Arial",FontSize:{__type:"Syncfusion.RDL.DOM.Size",size:"10pt"},FontWeight:"Default",BackgroundGradientType:"None",BackgroundGradientEndColor:null,FontStyle:"Default",Format:null,FormatType:null,TextDecoration:"Default",TextAlign:"Left",VerticalAlign:"Middle",Color:ej.isNullOrUndefined(r)?"Black":ej.isNullOrUndefined(r.FontColor)?"Black":r.FontColor,PaddingLeft:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingRight:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingTop:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingBottom:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},LineHeight:{__type:"Syncfusion.RDL.DOM.Size",size:"0"},Direction:"Default",WritingMode:"Default",Language:null,Calendar:0,NumeralLanguage:null,TextEffect:0,BackgroundHatchType:0,ShadowColor:null,Border:null,TopBorder:null,BottomBorder:null,LeftBorder:null,RightBorder:null,BackgroundImage:null,NumeralVariant:null,ShadowOffset:null},ActionInfo:null,ToolTip:null,MarkupType:0}],LeftIndent:null,RightIndent:null,HangingIndent:null,Style:{__type:"Syncfusion.RDL.DOM.Style",BackgroundColor:"Transparent",FontFamily:"Arial",FontSize:{__type:"Syncfusion.RDL.DOM.Size",size:"10pt"},FontWeight:"Default",BackgroundGradientType:"None",BackgroundGradientEndColor:null,FontStyle:"Default",Format:null,FormatType:null,TextDecoration:"Default",TextAlign:"Default",VerticalAlign:"Default",Color:null,PaddingLeft:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingRight:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingTop:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingBottom:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},LineHeight:{__type:"Syncfusion.RDL.DOM.Size",size:"0"},Direction:"Default",WritingMode:"Default",Language:null,Calendar:0,NumeralLanguage:null,TextEffect:0,BackgroundHatchType:0,ShadowColor:null,Border:null,TopBorder:null,BottomBorder:null,LeftBorder:null,RightBorder:null,BackgroundImage:null,NumeralVariant:null,ShadowOffset:null},ListStyle:0,ListLevel:0,SpaceBefore:null,SpaceAfter:null}],ToggleImage:null,UserSort:null,Text:null,Left:{__type:"Syncfusion.RDL.DOM.Size",size:"0in"},Top:{__type:"Syncfusion.RDL.DOM.Size",size:"0in"},Name:"Textbox"+n,Value:null,ActionInfo:null,Height:null,Width:null,ZIndex:0,Visibility:null,LabelLocID:null,ToolTip:null,DocumentMapLabel:null,Bookmark:null,RepeatWith:null,CustomProperties:[],DataElementName:null,DataElementOutput:0,Style:{__type:"Syncfusion.RDL.DOM.Style",BackgroundColor:ej.isNullOrUndefined(r)?"Transparent":ej.isNullOrUndefined(r.BackColor)?"Transparent":r.BackColor,FontFamily:"Arial",FontSize:{__type:"Syncfusion.RDL.DOM.Size",size:"10pt"},FontWeight:"Default",BackgroundGradientType:"None",BackgroundGradientEndColor:null,FontStyle:"Default",Format:null,FormatType:null,TextDecoration:"Default",TextAlign:"Left",VerticalAlign:"Middle",Color:null,PaddingLeft:{__type:"Syncfusion.RDL.DOM.Size",size:"4pt"},PaddingRight:{__type:"Syncfusion.RDL.DOM.Size",size:"2pt"},PaddingTop:{__type:"Syncfusion.RDL.DOM.Size",size:"2pt"},PaddingBottom:{__type:"Syncfusion.RDL.DOM.Size",size:"2pt"},LineHeight:{__type:"Syncfusion.RDL.DOM.Size",size:"0"},Direction:"Default",WritingMode:"Default",Language:null,Calendar:0,NumeralLanguage:null,TextEffect:0,BackgroundHatchType:0,ShadowColor:null,Border:{__type:"Syncfusion.RDL.DOM.Border",Color:"LightGrey",Style:"Solid",Width:{__type:"Syncfusion.RDL.DOM.Size",size:"1pt"}},TopBorder:null,BottomBorder:null,LeftBorder:null,RightBorder:null,BackgroundImage:null,NumeralVariant:null,ShadowOffset:null}}},n.prototype.createTablixColumn=function(){return{__type:"Syncfusion.RDL.DOM.TablixColumn",Width:{__type:"Syncfusion.RDL.DOM.Size",size:"1.042in"}}},n.prototype.createTablixRow=function(){return{__type:"Syncfusion.RDL.DOM.TablixRow",Height:{__type:"Syncfusion.RDL.DOM.Size",size:"0.500in"},TablixCells:[]}},n.prototype.createTablixHeader=function(n,t,i,r){return{__type:"Syncfusion.RDL.DOM.TablixHeader",CellContents:{__type:"Syncfusion.RDL.DOM.CellContents",ReportItem:this.createReportItem(n,t,i,r),ColSpan:1,RowSpan:1},Size:{__type:"Syncfusion.RDL.DOM.Size",size:"0.500in"}}},n.prototype.createTablixMember=function(){return{__type:"Syncfusion.RDL.DOM.TablixMember",Group:null,SortExpressions:[],TablixHeader:null,TablixMembers:[],CustomProperties:[],FixedData:!1,Visibility:null,HideIfNoRows:!1,KeepWithGroup:0,RepeatOnNewPage:!1,DataElementName:null,DataElementOutput:0,KeepTogether:!1}},n.prototype.getColumns=function(){var n,t,i;for(this.isColumnSettingsEnabled=!1,n=[],t=0;t<this.dataGroupInfo.Columns.length;t++)n.push("Group "+(t+1));return i=$("#"+this.designId+"_PivotGrid_ColumnGroupSettings_Column").data("ejDropDownList"),ej.isNullOrUndefined(i)||i.option("dataSource",n),n},n.prototype.getSummaryValue=function(){var n=[],t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>1){for(this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryValue",!0),t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)n.push("Value "+(t+1));i=$("#"+this.designId+"_PivotGrid_SummarySettings_TableSummaryValue").data("ejDropDownList");ej.isNullOrUndefined(i)||(i.option("dataSource",n),i.option("selectedIndex",0),this.summaryValueName=n[0])}else this.propertyPanel.updateItemVisibility("PivotGrid","SummarySettings","TableSummaryValue",!1);return n},n.prototype.getColumnSummaryValue=function(){var n=[],t,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>1&&this.dataGroupInfo.Columns.length>1){for(this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","SummaryValue",this.enableSummaryColumn),t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)n.push("Value "+(t+1));i=$("#"+this.designId+"_PivotGrid_ColumnGroupSettings_SummaryValue").data("ejDropDownList");ej.isNullOrUndefined(i)||(i.option("dataSource",n),i.option("selectedIndex",0),this.summaryColumnValueName=n[0])}else this.propertyPanel.updateItemVisibility("PivotGrid","ColumnGroupSettings","SummaryValue",!1);return n},n.prototype.getDataColumns=function(){var t=[],n,i;if(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0){for(n=0;n<this.dataGroupInfo.Rows.length+this.dataGroupInfo.Values[0].Values.length*(this.dataGroupInfo.Columns.length+1);n++)t.push("Column "+(n+1));i=$("#"+this.designId+"_PivotGrid_ColumnSettings_Columns").data("ejDropDownList");ej.isNullOrUndefined(i)||i.option("dataSource",t)}return t},n.prototype.getDataRows=function(){var t=[],r=this.isEmptyColumn?1:this.dataGroupInfo.Columns.length+2,n,i;if(this.dataGroupInfo.Rows.length>0){for(n=0;n<this.dataGroupInfo.Rows.length+r;n++)t.push("Row "+(n+1));i=$("#"+this.designId+"_PivotGrid_RowSettings_Rows").data("ejDropDownList");ej.isNullOrUndefined(i)||i.option("dataSource",t)}return t},n.prototype.getRows=function(){var n,t,i;for(this.isRowSettingsEnabled=!1,n=[],t=0;t<this.dataGroupInfo.Rows.length;t++)n.push("Group "+(t+1));return i=$("#"+this.designId+"_PivotGrid_RowGroupSettings_RowName").data("ejDropDownList"),ej.isNullOrUndefined(i)||i.option("dataSource",n),n},n.prototype.getColumnIndex=function(n){return parseFloat(n.split(" ")[1])-1},n.prototype.getColumnSettings=function(n,t){for(var i=0;i<this.columns.length;i++)if(this.columns[i].Name===n||n==="")switch(t){case"Label":return this.columns[i].Label;case"Field":return this.columns[i].Field;case"Visibility":return this.columns[i].Visibility;case"HeaderBackColor":return this.columns[i].HeaderBackColor;case"HeaderBorderColor":return this.columns[i].HeaderBorderColor;case"HeaderBorderStyle":return this.columns[i].HeaderBorderStyle;case"HeaderBorderWidth":return this.columns[i].HeaderBorderWidth;case"HeaderFontFamily":return this.columns[i].HeaderFontFamily;case"HeaderFontColor":return this.columns[i].HeaderFontColor;case"HeaderFontSize":return this.columns[i].HeaderFontSize;case"HeaderFontStyle":return this.columns[i].HeaderFontStyle;case"HeaderFontWeight":return this.columns[i].HeaderFontWeight;case"HeaderTextDecoration":return this.columns[i].HeaderTextDecoration;case"HeaderTextAlign":return this.columns[i].HeaderTextAlign;case"HeaderPaddingLeft":return this.columns[i].HeaderPaddingLeft;case"HeaderPaddingTop":return this.columns[i].HeaderPaddingTop;case"HeaderPaddingRight":return this.columns[i].HeaderPaddingRight;case"HeaderPaddingBottom":return this.columns[i].HeaderPaddingBottom;case"SummaryBackColor":return this.columns[i].SummaryBackColor;case"SummaryBorderColor":return this.columns[i].SummaryBorderColor;case"SummaryBorderStyle":return this.columns[i].SummaryBorderStyle;case"SummaryBorderWidth":return this.columns[i].SummaryBorderWidth;case"SummaryFontFamily":return this.columns[i].SummaryFontFamily;case"SummaryFontColor":return this.columns[i].SummaryFontColor;case"SummaryFontSize":return this.columns[i].SummaryFontSize;case"SummaryFontStyle":return this.columns[i].SummaryFontStyle;case"SummaryFontWeight":return this.columns[i].SummaryFontWeight;case"SummaryTextDecoration":return this.columns[i].SummaryTextDecoration;case"SummaryTextAlign":return this.columns[i].SummaryTextAlign;case"SummaryPaddingLeft":return this.columns[i].SummaryPaddingLeft;case"SummaryPaddingTop":return this.columns[i].SummaryPaddingTop;case"SummaryPaddingRight":return this.columns[i].SummaryPaddingRight;case"SummaryPaddingBottom":return this.columns[i].SummaryPaddingBottom;case"Width":return this.columns[i].Width;case"Height":return this.columns[i].Height;case"SummaryColumn":return this.columns[i].enableSummaryColumn;case"SummaryColumns":return this.columns[i].SummaryColumns;case"Format":return this.columns[i].Format;case"FormatType":return this.columns[i].FormatType;case"ActionInfo":return this.columns[i].ActionInfo}},n.prototype.getRowSettings=function(n,t){for(var i=0;i<this.rows.length;i++)if(this.rows[i].Name===n||n==="")switch(t){case"Label":return this.rows[i].Label;case"Field":return this.rows[i].Field;case"Visibility":return this.rows[i].Visibility;case"HeaderBackColor":return this.rows[i].HeaderBackColor;case"HeaderBorderColor":return this.rows[i].HeaderBorderColor;case"HeaderBorderStyle":return this.rows[i].HeaderBorderStyle;case"HeaderBorderWidth":return this.rows[i].HeaderBorderWidth;case"HeaderFontFamily":return this.rows[i].HeaderFontFamily;case"HeaderFontColor":return this.rows[i].HeaderFontColor;case"HeaderFontSize":return this.rows[i].HeaderFontSize;case"HeaderFontStyle":return this.rows[i].HeaderFontStyle;case"HeaderFontWeight":return this.rows[i].HeaderFontWeight;case"HeaderTextDecoration":return this.rows[i].HeaderTextDecoration;case"HeaderTextAlign":return this.rows[i].HeaderTextAlign;case"HeaderPaddingLeft":return this.rows[i].HeaderPaddingLeft;case"HeaderPaddingTop":return this.rows[i].HeaderPaddingTop;case"HeaderPaddingRight":return this.rows[i].HeaderPaddingRight;case"HeaderPaddingBottom":return this.rows[i].HeaderPaddingBottom;case"SummaryBackColor":return this.rows[i].SummaryBackColor;case"SummaryBorderWidth":return this.rows[i].SummaryBorderWidth;case"SummaryBorderColor":return this.rows[i].SummaryBorderColor;case"SummaryBorderStyle":return this.rows[i].SummaryBorderStyle;case"SummaryFontFamily":return this.rows[i].SummaryFontFamily;case"SummaryFontColor":return this.rows[i].SummaryFontColor;case"SummaryFontSize":return this.rows[i].SummaryFontSize;case"SummaryFontStyle":return this.rows[i].SummaryFontStyle;case"SummaryFontWeight":return this.rows[i].SummaryFontWeight;case"SummaryTextDecoration":return this.rows[i].SummaryTextDecoration;case"SummaryTextAlign":return this.rows[i].SummaryTextAlign;case"SummaryPaddingLeft":return this.rows[i].SummaryPaddingLeft;case"SummaryPaddingTop":return this.rows[i].SummaryPaddingTop;case"SummaryPaddingRight":return this.rows[i].SummaryPaddingRight;case"SummaryPaddingBottom":return this.rows[i].SummaryPaddingBottom;case"Width":return this.rows[i].Width;case"Height":return this.rows[i].Height;case"SummaryRow":return this.rows[i].enableSummaryRow;case"SummaryRows":return this.rows[i].SummaryRows;case"Format":return this.rows[i].Format;case"FormatType":return this.rows[i].FormatType;case"ActionInfo":return this.rows[i].ActionInfo}},n.prototype.createColumn=function(){return{Name:"",Label:"",Field:"",HeaderBackColor:"white",HeaderBorderColor:"lightgrey",HeaderBorderStyle:"Solid",HeaderBorderWidth:"1pt",HeaderFontFamily:"Arial",HeaderFontColor:"Black",HeaderFontSize:"10pt",HeaderFontStyle:"Default",HeaderFontWeight:"Default",HeaderTextDecoration:"Default",HeaderTextAlign:"Left",HeaderPaddingLeft:"4pt",HeaderPaddingTop:"2pt",HeaderPaddingRight:"2pt",HeaderPaddingBottom:"2pt",SummaryBorderColor:"lightgrey",SummaryBorderStyle:"Solid",SummaryBorderWidth:"1pt",SummaryBackColor:"lightgrey",SummaryFontFamily:"Arial",SummaryFontColor:"Black",SummaryFontSize:"10pt",SummaryFontStyle:"Default",SummaryFontWeight:"Default",SummaryTextDecoration:"Default",SummaryTextAlign:"Left",SummaryPaddingLeft:"4pt",SummaryPaddingTop:"2pt",SummaryPaddingRight:"2pt",SummaryPaddingBottom:"2pt",Visibility:!0,Width:"1.0598in",Height:"0.265in",enableSummaryColumn:!0,SummaryColumns:[],Format:"",FormatType:"",ActionInfo:""}},n.prototype.createRow=function(){return{Name:"",Label:"",Field:"",HeaderBackColor:"white",HeaderBorderColor:"lightgrey",HeaderBorderStyle:"Solid",HeaderBorderWidth:"1pt",HeaderFontFamily:"Arial",HeaderFontColor:"Black",HeaderFontSize:"10pt",HeaderFontStyle:"Default",HeaderFontWeight:"Default",HeaderTextDecoration:"Default",HeaderTextAlign:"Left",HeaderPaddingLeft:"4pt",HeaderPaddingTop:"2pt",HeaderPaddingRight:"2pt",HeaderPaddingBottom:"2pt",SummaryBackColor:"Transparent",SummaryBorderColor:"lightgrey",SummaryBorderStyle:"Solid",SummaryBorderWidth:"1pt",SummaryFontFamily:"Arial",SummaryFontColor:"Black",SummaryFontSize:"10pt",SummaryFontStyle:"Default",SummaryFontWeight:"Default",SummaryTextDecoration:"Default",SummaryTextAlign:"Left",SummaryPaddingLeft:"4pt",SummaryPaddingTop:"2pt",SummaryPaddingRight:"2pt",SummaryPaddingBottom:"2pt",Visibility:!0,Width:"1.0598in",Height:"0.265in",enableSummaryRow:!0,SummaryRows:[],Format:"",FormatType:"",ActionInfo:""}},n.prototype.getSummaryTableRows=function(){var t=[],i,r,n;if(this.gridJson.TablixRowHierarchy.TablixMembers.length>1){for(i=this.getSummaryColumnCells([],this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[2]:this.gridJson.TablixRowHierarchy.TablixMembers[1],0,this.selectedRowIndex,!0),n=0;n<i.length;n++)t.push({Column:"Column"+(n+1).toString(),Expression:i[n].Paragraphs[0].TextRuns[0].Value});for(r=this.getSummaryDataRowCells(this.dataGroupInfo.Rows.length),n=0;n<r.length;n++)t.push({Column:"Column"+(n+1+this.dataGroupInfo.Rows.length).toString(),Expression:r[n].Paragraphs[0].TextRuns[0].Value})}return t},n.prototype.getSummaryRows=function(){var t=[],i,r,n;if(this.gridJson.TablixRowHierarchy.TablixMembers.length>0){for(i=this.getSummaryColumnCells([],this.getSummaryMember(this.isEmptyColumn?this.gridJson.TablixRowHierarchy.TablixMembers[1]:this.gridJson.TablixRowHierarchy.TablixMembers[0],this.selectedRowIndex),0,this.selectedRowIndex,!0),n=0;n<i.length;n++)t.push({Column:"Column"+(n+this.selectedRowIndex+2).toString(),Expression:i[n].Paragraphs[0].TextRuns[0].Value});for(r=this.getSummaryDataRowCells(this.dataGroupInfo.Rows.length-(this.selectedRowIndex+1)),n=0;n<r.length;n++)t.push({Column:"Column"+(n+1+this.dataGroupInfo.Rows.length+1).toString(),Expression:r[n].Paragraphs[0].TextRuns[0].Value})}return t},n.prototype.getSummaryTableColumns=function(){var t=[],i,r,n;if(this.gridJson.TablixColumnHierarchy.TablixMembers.length>0){for(i=this.getSummaryColumnCells([],this.gridJson.TablixColumnHierarchy.TablixMembers[1],0,this.selectedColumnIndex,!1),n=0;n<i.length;n++)t.push({Column:"Row"+(n+1).toString(),Expression:i[n].Paragraphs[0].TextRuns[0].Value});for(r=this.getSummaryDataCells(this.dataGroupInfo.Columns.length),n=0;n<r.length;n++)t.push({Column:"Row"+(n+1+this.dataGroupInfo.Columns.length+1).toString(),Expression:r[n].Paragraphs[0].TextRuns[0].Value})}return t},n.prototype.getSummaryMember=function(n,t){return t===0?n.TablixMembers[1]:this.getSummaryMember(n.TablixMembers[0],t-1)},n.prototype.getSummaryColumns=function(){var t=[],i,r,n;if(this.gridJson.TablixColumnHierarchy.TablixMembers.length>0){for(i=this.getSummaryColumnCells([],this.getSummaryMember(this.gridJson.TablixColumnHierarchy.TablixMembers[0],this.selectedColumnIndex),0,this.selectedColumnIndex,!1),n=0;n<i.length;n++)t.push({Column:"Row"+(n+this.selectedColumnIndex+2).toString(),Expression:i[n].Paragraphs[0].TextRuns[0].Value});for(r=this.getSummaryDataCells(this.dataGroupInfo.Columns.length-(this.selectedColumnIndex+1)),n=0;n<r.length;n++)t.push({Column:"Row"+(n+1+this.dataGroupInfo.Columns.length+1).toString(),Expression:r[n].Paragraphs[0].TextRuns[0].Value})}return t},n.prototype.validateField=function(n){for(var r,u,f,e=this.gridJson.DataSetName,i=ejDashboardDesigner.getInstance("DataSet").datasets,t=0;t<i.length;t++)if(i[t].Id===e){for(r=0;r<i[t].Fields.length;r++)for(u=0;u<this.dataGroupInfo.Columns.length;u++)if(f=ej.DashboardUtil.getDatasetTypeIcon(i[t].Fields[r].TypeName),f==="e-reportdesigner-dataset-number"&&i[t].Fields[r].Name===n)return!0;break}},n.prototype.getValidColumnSpans=function(n){for(var t=[],i=0,r=n;r<this.dataGroupInfo.Columns.length;r++)t.push(i+1),i++;return t},n.prototype.getSelectedRowTextFormat=function(){var n;return this.selectedRowIndex<this.rows.length&&(n={format:this.rows[this.selectedRowIndex].Format,formatType:this.rows[this.selectedRowIndex].FormatType}),n},n.prototype.getSelectedRowTextActionInfo=function(){var n;return this.selectedColumnIndex<this.rows.length&&(n=this.rows[this.selectedColumnIndex].ActionInfo),n},n.prototype.getSelectedColumnTextFormat=function(){var n;return this.selectedColumnIndex<this.columns.length&&(n={format:this.columns[this.selectedColumnIndex].Format,formatType:this.columns[this.selectedColumnIndex].FormatType}),n},n.prototype.getSelectedColumnTextActionInfo=function(){var n;return this.selectedColumnIndex<this.columns.length&&(n=this.columns[this.selectedColumnIndex].ActionInfo),n},n.prototype.getPropertyGridItems=function(){return{Header:this.gridJson.Name,Type:"PivotGrid",Items:[{CategoryName:"Basic Settings",Items:[{name:"HorizontalGridLine",displayName:"Horizontal Grid Line",value:this.horizontalGridLine,itemType:"bool"},{name:"VerticalGridLine",displayName:"Vertical Grid Line",value:this.verticalGridLine,itemType:"bool"},{name:"Filter",displayName:"Filters",itemType:"filters",isVisible:this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0},{name:"Sort",displayName:"Sorts",itemType:"sorts",isVisible:this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0}]},{CategoryName:"Summary Settings",IsVisible:this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Rows.length>0,Items:[{name:"TableSummaryColumn",displayName:"Enable Summary Column",value:this.enableTableSummaryColumn,isVisible:this.dataGroupInfo.Columns.length,itemType:"bool"},{name:"TableSummaryColumnBackgroundColor",displayName:"Summary Column Style",value:this.tableSummaryColumnBackColor,isVisible:this.enableTableSummaryColumn,itemType:"color",childItems:[{name:"TableSummaryColumnFont",displayName:"Font",itemType:"font",isVisible:this.enableTableSummaryColumn,items:[{name:"TableSummaryColumnFontFamily",displayName:"None",value:this.tableSummaryColumnFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"TableSummaryColumnFontColor",displayName:"None",value:this.tableSummaryColumnFontColor,itemType:"color"},{name:"TableSummaryColumnFontSize",displayName:"None",value:this.tableSummaryColumnFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"TableSummaryColumnFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",isVisible:this.enableTableSummaryColumn,items:[{name:"TableSummaryColumnFontStyle",displayName:"None",value:this.tableSummaryColumnFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"TableSummaryColumnFontWeight",displayName:"None",value:this.tableSummaryColumnFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"TableSummaryColumnTextDecoration",displayName:"Text Decoration",value:this.tableSummaryColumnTextDecoration,isVisible:this.enableTableSummaryColumn,itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"TableSummaryColumnTextAlign",displayName:"Text Alignment",value:this.tableSummaryColumnTextAlign,isVisible:this.enableTableSummaryColumn,itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"TableSummaryColumnPadding",displayName:"Padding",itemType:"padding",isVisible:this.enableTableSummaryColumn,items:[{name:"TableSummaryColumnPaddingLeft",displayName:"Left",value:this.tableSummaryColumnPaddingLeft,unitType:"pt",itemType:"float"},{name:"TableSummaryColumnPaddingRight",displayName:"Right",value:this.tableSummaryColumnPaddingRight,unitType:"pt",itemType:"float"},{name:"TableSummaryColumnPaddingTop",displayName:"Top",value:this.tableSummaryColumnPaddingTop,unitType:"pt",itemType:"float"},{name:"TableSummaryColumnPaddingBottom",displayName:"Bottom",value:this.tableSummaryColumnPaddingBottom,unitType:"pt",itemType:"float"}]}]},{name:"TableSummaryColumnBorder",displayName:"Summary Column Border",isVisible:this.enableTableSummaryColumn,itemType:"border",items:[{name:"TableSummaryColumnBorderStyle",displayName:"None",value:this.tableSummaryColumnBorderStyle,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"TableSummaryColumnBorderColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.tableSummaryColumnBorderColor),itemType:"color"},{name:"TableSummaryColumnBorderWidth",displayName:"None",value:ej.DashboardUtil.getSizeVal(this.tableSummaryColumnBorderWidth),unitType:"pt",itemType:"float"}]},{name:"TableSummaryValue",displayName:"Choose Summary",value:this.summaryValueName,itemType:"dropdown",valueList:this.getSummaryValue(),isVisible:this.enableTableSummaryColumn},{name:"TableSummaryColumns",displayName:"Summary Columns",value:"",isVisible:this.enableTableSummaryColumn,itemType:"summarygrid"},{name:"TableSummaryRow",displayName:"Enable Summary Row",value:this.enableTableSummaryRow,isVisible:this.dataGroupInfo.Rows.length,itemType:"bool"},{name:"TableSummaryRowBackgroundColor",displayName:"Summary Row Style",value:this.tableSummaryRowBackColor,isVisible:this.enableTableSummaryRow,itemType:"color",childItems:[{name:"TableSummaryRowFont",displayName:"Font",itemType:"font",isVisible:this.enableTableSummaryRow,items:[{name:"TableSummaryRowFontFamily",displayName:"None",value:this.tableSummaryRowFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"TableSummaryRowFontColor",displayName:"None",value:this.tableSummaryRowFontColor,itemType:"color"},{name:"TableSummaryRowFontSize",displayName:"None",value:this.tableSummaryRowFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"TableSummaryRowFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",isVisible:this.enableTableSummaryRow,items:[{name:"TableSummaryRowFontStyle",displayName:"None",value:this.tableSummaryRowFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"TableSummaryRowFontWeight",displayName:"None",value:this.tableSummaryRowFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"TableSummaryRowTextDecoration",displayName:"Text Decoration",value:this.tableSummaryRowTextDecoration,isVisible:this.enableTableSummaryRow,itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"TableSummaryRowTextAlign",displayName:"Text Alignment",value:this.tableSummaryRowTextAlign,isVisible:this.enableTableSummaryRow,itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"TableSummaryRowPadding",displayName:"Padding",itemType:"padding",isVisible:this.enableTableSummaryRow,items:[{name:"TableSummaryRowPaddingLeft",displayName:"Left",value:this.tableSummaryRowPaddingLeft,unitType:"pt",itemType:"float"},{name:"TableSummaryRowPaddingRight",displayName:"Right",value:this.tableSummaryRowPaddingRight,unitType:"pt",itemType:"float"},{name:"TableSummaryRowPaddingTop",displayName:"Top",value:this.tableSummaryRowPaddingTop,unitType:"pt",itemType:"float"},{name:"TableSummaryRowPaddingBottom",displayName:"Bottom",value:this.tableSummaryRowPaddingBottom,unitType:"pt",itemType:"float"}]}]},{name:"TableSummaryRowBorder",displayName:"Summary Row Border",isVisible:this.enableTableSummaryRow,itemType:"border",items:[{name:"TableSummaryRowBorderStyle",displayName:"None",value:this.tableSummaryRowBorderStyle,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"TableSummaryRowBorderColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.tableSummaryRowBorderColor),itemType:"color"},{name:"TableSummaryRowBorderWidth",displayName:"None",value:ej.DashboardUtil.getSizeVal(this.tableSummaryRowBorderWidth),unitType:"pt",itemType:"float"}]},{name:"TableSummaryRows",displayName:"Summary Rows",value:"",isVisible:this.enableTableSummaryRow,itemType:"summarygrid"}]},{CategoryName:"Column Group Settings",IsVisible:this.dataGroupInfo.Columns.length>0,Items:[{name:"Column",displayName:"Choose Column Group",value:this.columnName,itemType:"dropdown",valueList:this.getColumns()},{name:"ColumnLink",displayName:"Link",isVisible:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"link",category:"ColumnAction"},{name:"ColumnHeaderBackgroundColor",displayName:"Cell Style",value:ej.DashboardUtil.getColorCode(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderBackColor"):this.createColumn().HeaderBackColor),isVisible:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"color",childItems:[{name:"ColumnHeaderFont",displayName:"Font",itemType:"font",isVisible:this.isColumnSettingsEnabled||this.columnName!=="",items:[{name:"ColumnHeaderFontFamily",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderFontFamily"):this.createColumn().HeaderFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"ColumnHeaderFontColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderFontColor"):this.createColumn().HeaderFontColor),itemType:"color"},{name:"ColumnHeaderFontSize",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderFontSize"):this.createColumn().HeaderFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"ColumnHeaderFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",isVisible:this.isColumnSettingsEnabled||this.columnName!=="",items:[{name:"ColumnHeaderFontStyle",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderFontStyle"):this.createColumn().HeaderFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"ColumnHeaderFontWeight",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderFontWeight"):this.createColumn().HeaderFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"ColumnHeaderTextDecoration",displayName:"Text Decoration",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderTextDecoration"):this.createColumn().HeaderTextDecoration,isVisible:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"ColumnHeaderTextAlign",displayName:"Text Alignment",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderTextAlign"):this.createColumn().HeaderTextAlign,isVisible:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"ColumnHeaderPadding",displayName:"Padding",itemType:"padding",isVisible:this.isColumnSettingsEnabled||this.columnName!=="",items:[{name:"ColumnHeaderPaddingLeft",displayName:"Left",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderPaddingLeft"):this.createColumn().HeaderPaddingLeft),unitType:"pt",itemType:"float"},{name:"ColumnHeaderPaddingRight",displayName:"Right",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderPaddingRight"):this.createColumn().HeaderPaddingRight),unitType:"pt",itemType:"float"},{name:"ColumnHeaderPaddingTop",displayName:"Top",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderPaddingTop"):this.createColumn().HeaderPaddingTop),unitType:"pt",itemType:"float"},{name:"ColumnHeaderPaddingBottom",displayName:"Bottom",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderPaddingBottom"):this.createColumn().HeaderPaddingBottom),unitType:"pt",itemType:"float"}]}]},{name:"ColumnHeaderBorder",displayName:"Cell Border",isVisible:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"border",items:[{name:"ColumnHeaderBorderStyle",displayName:"None",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderBorderStyle"):this.createColumn().HeaderBorderStyle),itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"ColumnHeaderBorderColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderBorderColor"):this.createColumn().HeaderBorderColor),itemType:"color"},{name:"ColumnHeaderBorderWidth",displayName:"None",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"HeaderBorderWidth"):this.createColumn().HeaderBorderWidth),unitType:"pt",itemType:"float"}]},{name:"SummaryColumn",displayName:"Enable Summary Column",value:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?this.enableSummaryColumn:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryColumn"):this.enableSummaryColumn,isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"bool"},{name:"SummaryValue",displayName:"Choose Summary",value:this.summaryColumnValueName,itemType:"dropdown",valueList:this.getColumnSummaryValue(),isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!==""},{name:"SummaryColumns",displayName:"Summary Columns",value:"",isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"summarygrid"},{name:"ColumnGroupSummaryBackgroundColor",displayName:"Summary Style",value:ej.DashboardUtil.getColorCode(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryBackColor"):this.createColumn().SummaryBackColor),isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"color",childItems:[{name:"ColumnGroupSummaryFont",displayName:"Font",itemType:"font",isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",items:[{name:"ColumnGroupSummaryFontFamily",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryFontFamily"):this.createColumn().SummaryFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"ColumnGroupSummaryFontColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryFontColor"):this.createColumn().SummaryFontColor),itemType:"color"},{name:"ColumnGroupSummaryFontSize",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryFontSize"):this.createColumn().SummaryFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"ColumnGroupSummaryFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",items:[{name:"ColumnGroupSummaryFontStyle",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryFontStyle"):this.createColumn().SummaryFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"ColumnGroupSummaryFontWeight",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryFontWeight"):this.createColumn().SummaryFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"ColumnGroupSummaryTextDecoration",displayName:"Text Decoration",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryTextDecoration"):this.createColumn().SummaryTextDecoration,isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"ColumnGroupSummaryTextAlign",displayName:"Text Alignment",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryTextAlign"):this.createColumn().SummaryTextAlign,isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"ColumnGroupSummaryPadding",displayName:"Padding",itemType:"padding",isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",items:[{name:"ColumnGroupSummaryPaddingLeft",displayName:"Left",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryPaddingLeft"):this.createColumn().SummaryPaddingLeft),unitType:"pt",itemType:"float"},{name:"ColumnGroupSummaryPaddingRight",displayName:"Right",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryPaddingRight"):this.createColumn().SummaryPaddingRight),unitType:"pt",itemType:"float"},{name:"ColumnGroupSummaryPaddingTop",displayName:"Top",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryPaddingTop"):this.createColumn().SummaryPaddingTop),unitType:"pt",itemType:"float"},{name:"ColumnGroupSummaryPaddingBottom",displayName:"Bottom",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryPaddingBottom"):this.createColumn().SummaryPaddingBottom),unitType:"pt",itemType:"float"}]}]},{name:"ColumnGroupSummaryBorder",displayName:"Summary Border",isVisible:this.selectedColumnIndex===this.dataGroupInfo.Columns.length-1?!1:this.isColumnSettingsEnabled||this.columnName!=="",itemType:"border",items:[{name:"ColumnGroupSummaryBorderStyle",displayName:"None",value:this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryBorderStyle"):this.createColumn().SummaryBorderStyle,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"ColumnGroupSummaryBorderColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryBorderColor"):this.createColumn().SummaryBorderColor),itemType:"color"},{name:"ColumnGroupSummaryBorderWidth",displayName:"None",value:ej.DashboardUtil.getSizeVal(this.selectedColumnIndex<this.columns.length?this.getColumnSettings(this.columns[this.selectedColumnIndex].Name,"SummaryBorderWidth"):this.createColumn().SummaryBorderWidth),unitType:"pt",itemType:"float"}]}]},{CategoryName:"Row Group Settings",IsVisible:this.dataGroupInfo.Rows.length>0,Items:[{name:"RowName",displayName:"Choose Row Group",value:this.rowName,itemType:"dropdown",valueList:this.getRows()},{name:"RowLink",displayName:"Link",isVisible:this.isRowSettingsEnabled||this.rowName!=="",itemType:"link",category:"RowAction"},{name:"RowHeaderBackgroundColor",displayName:"Cell Style",value:ej.DashboardUtil.getColorCode(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderBackColor"):this.createRow().HeaderBackColor),isVisible:this.isRowSettingsEnabled||this.rowName!=="",itemType:"color",childItems:[{name:"RowHeaderFont",displayName:"Font",itemType:"font",isVisible:this.isRowSettingsEnabled||this.rowName!=="",items:[{name:"RowHeaderFontFamily",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderFontFamily"):this.createRow().HeaderFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"RowHeaderFontColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderFontColor"):this.createRow().HeaderFontColor),itemType:"color"},{name:"RowHeaderFontSize",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderFontSize"):this.createRow().HeaderFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"RowHeaderFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",isVisible:this.isRowSettingsEnabled||this.rowName!=="",items:[{name:"RowHeaderFontStyle",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderFontStyle"):this.createRow().HeaderFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"RowHeaderFontWeight",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderFontWeight"):this.createRow().HeaderFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"RowHeaderTextDecoration",displayName:"Text Decoration",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderTextDecoration"):this.createRow().HeaderTextDecoration,isVisible:this.isRowSettingsEnabled||this.rowName!=="",itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"RowHeaderTextAlign",displayName:"Text Alignment",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderTextAlign"):this.createRow().HeaderTextAlign,isVisible:this.isRowSettingsEnabled||this.rowName!=="",itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"RowHeaderPadding",displayName:"Padding",itemType:"padding",isVisible:this.isRowSettingsEnabled||this.rowName!=="",items:[{name:"RowHeaderPaddingLeft",displayName:"Left",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderPaddingLeft"):this.createRow().HeaderPaddingLeft),unitType:"pt",itemType:"float"},{name:"RowHeaderPaddingRight",displayName:"Right",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderPaddingRight"):this.createRow().HeaderPaddingRight),unitType:"pt",itemType:"float"},{name:"RowHeaderPaddingTop",displayName:"Top",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderPaddingTop"):this.createRow().HeaderPaddingTop),unitType:"pt",itemType:"float"},{name:"RowHeaderPaddingBottom",displayName:"Bottom",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderPaddingBottom"):this.createRow().HeaderPaddingBottom),unitType:"pt",itemType:"float"}]}]},{name:"RowHeaderBorder",displayName:"Cell Border",isVisible:this.isRowSettingsEnabled||this.rowName!=="",itemType:"border",items:[{name:"RowHeaderBorderStyle",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderBorderStyle"):this.createRow().HeaderBorderStyle,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"RowHeaderBorderColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderBorderColor"):this.createRow().HeaderBorderColor),itemType:"color"},{name:"RowHeaderBorderWidth",displayName:"None",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"HeaderBorderWidth"):this.createRow().HeaderBorderWidth),unitType:"pt",itemType:"float"}]},{name:"SummaryRow",displayName:"Enable Summary Row",value:this.selectedRowIndex===this.dataGroupInfo.Rows.length-1?this.enableSummaryRow:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryRow"):this.enableSummaryRow,isVisible:this.selectedRowIndex===this.dataGroupInfo.Rows.length-1?!1:this.isRowSettingsEnabled||this.rowName!=="",itemType:"bool"},{name:"SummaryRows",displayName:"Summary Rows",value:"",isVisible:this.selectedRowIndex===this.dataGroupInfo.Rows.length-1?!1:this.isRowSettingsEnabled||this.rowName!=="",itemType:"summarygrid"},{name:"RowSummaryBackgroundColor",displayName:"Summary Style",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryBackColor"):this.createRow().SummaryBackColor,isVisible:this.selectedRowIndex===this.dataGroupInfo.Rows.length-1?!1:this.isRowSettingsEnabled||this.rowName!=="",itemType:"color",childItems:[{name:"RowSummaryFont",displayName:"Font",itemType:"font",items:[{name:"RowSummaryFontFamily",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryFontFamily"):this.createRow().SummaryFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"RowSummaryFontColor",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryFontColor"):this.createRow().SummaryFontColor,itemType:"color"},{name:"RowSummaryFontSize",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryFontSize"):this.createRow().SummaryFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"RowSummaryFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",items:[{name:"RowSummaryFontStyle",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryFontStyle"):this.createRow().SummaryFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"RowSummaryFontWeight",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryFontWeight"):this.createRow().SummaryFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"RowSummaryTextDecoration",displayName:"Text Decoration",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryTextDecoration"):this.createRow().SummaryTextDecoration,itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"RowSummaryTextAlign",displayName:"Text Align",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryTextAlign"):this.createRow().SummaryTextAlign,itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"RowSummaryPadding",displayName:"Padding",itemType:"padding",items:[{name:"RowSummaryPaddingLeft",displayName:"Left",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryPaddingLeft"):this.createRow().SummaryPaddingLeft),unitType:"pt",itemType:"float"},{name:"RowSummaryPaddingRight",displayName:"Right",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryPaddingRight"):this.createRow().SummaryPaddingRight),unitType:"pt",itemType:"float"},{name:"RowSummaryPaddingTop",displayName:"Top",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryPaddingTop"):this.createRow().SummaryPaddingTop),unitType:"pt",itemType:"float"},{name:"RowSummaryPaddingBottom",displayName:"Bottom",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryPaddingBottom"):this.createRow().SummaryPaddingBottom),unitType:"pt",itemType:"float"}]}]},{name:"RowSummaryBorder",displayName:"Summary Border",isVisible:this.selectedRowIndex===this.dataGroupInfo.Rows.length-1?!1:this.isRowSettingsEnabled||this.rowName!=="",itemType:"border",items:[{name:"RowSummaryBorderStyle",displayName:"None",value:this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryBorderStyle"):this.createRow().SummaryBorderStyle,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"RowSummaryBorderColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryBorderColor"):this.createRow().SummaryBorderColor),itemType:"color"},{name:"RowSummaryBorderWidth",displayName:"None",value:ej.DashboardUtil.getSizeVal(this.selectedRowIndex<this.rows.length?this.getRowSettings(this.rows[this.selectedRowIndex].Name,"SummaryBorderWidth"):this.createRow().SummaryBorderWidth),unitType:"pt",itemType:"float"}]}]},{CategoryName:"Column Settings",IsVisible:this.dataGroupInfo.Values.length>0,Items:[{name:"Columns",displayName:"Choose Column",value:this.columnsName,itemType:"dropdown",valueList:this.getDataColumns()},{name:"ColumnTitle",displayName:"Header",value:this.getColumnHeader(),isVisible:this.columnsName!=="",itemType:"label"},{name:"ColumnWidth",displayName:"Width",value:ej.DashboardUtil.getPixelVal(this.columnWidth),unitType:"in",isVisible:this.columnsName!=="",itemType:"float",minimum:this.minimumWidth,maximum:1e3}]},{CategoryName:"Row Settings",IsVisible:this.dataGroupInfo.Columns.length>0||this.dataGroupInfo.Values.length,Items:[{name:"Rows",displayName:"Choose Row",value:this.rowsName,itemType:"dropdown",valueList:this.getDataRows()},{name:"RowHeight",displayName:"Height",value:ej.DashboardUtil.getPixelVal(this.rowHeight),unitType:"in",isVisible:this.rowsName!=="",itemType:"float",minimum:this.minimumHeight,maximum:500}]},{CategoryName:"Appearance",Items:[{name:"HeaderVisibility",displayName:"Show Header",value:this.showHeader,isVisible:!this.isEmptyColumn,itemType:"bool"},{name:"HeaderBackgroundColor",displayName:"Header Style",value:this.headerBackColor,itemType:"color",childItems:[{name:"HeaderFont",displayName:"Font",itemType:"font",items:[{name:"HeaderFontFamily",displayName:"None",value:this.headerFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"HeaderFontColor",displayName:"None",value:this.headerFontColor,itemType:"color"},{name:"HeaderFontSize",displayName:"None",value:this.headerFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"HeaderFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",items:[{name:"HeaderFontStyle",displayName:"None",value:this.headerFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"HeaderFontWeight",displayName:"None",value:this.headerFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"HeaderTextDecoration",displayName:"Text Decoration",value:this.headerTextDecoration,itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"HeaderTextAlign",displayName:"Text Align",value:this.headerTextAlign,itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"HeaderPadding",displayName:"Padding",itemType:"padding",items:[{name:"HeaderPaddingLeft",displayName:"Left",value:ej.DashboardUtil.getSizeVal(this.headerPaddingLeft),unitType:"pt",itemType:"float"},{name:"HeaderPaddingRight",displayName:"Right",value:ej.DashboardUtil.getSizeVal(this.headerPaddingRight),unitType:"pt",itemType:"float"},{name:"HeaderPaddingTop",displayName:"Top",value:ej.DashboardUtil.getSizeVal(this.headerPaddingTop),unitType:"pt",itemType:"float"},{name:"HeaderPaddingBottom",displayName:"Bottom",value:ej.DashboardUtil.getSizeVal(this.headerPaddingBottom),unitType:"pt",itemType:"float"}]}]},{name:"Border",displayName:"Border",itemType:"border",items:[{name:"BorderStyleDefault",displayName:"None",value:this.gridJson.Style.Border?this.gridJson.Style.Border.Style:"Solid",itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"BorderColorDefault",displayName:"None",value:this.gridJson.Style.Border&&this.gridJson.Style.Border.Color?this.gridJson.Style.Border.Color:"Transparent",itemType:"color"},{name:"BorderWidthDefault",displayName:"None",value:this.gridJson.Style.Border&&this.gridJson.Style.Border.Width?ej.DashboardUtil.getSizeVal(this.gridJson.Style.Border.Width.size):1,unitType:"pt",itemType:"float"}],childItems:[{name:"LeftBorder",displayName:"Left",itemType:"border",items:[{name:"BorderStyleLeft",displayName:"None",value:this.gridJson.Style.LeftBorder?this.gridJson.Style.LeftBorder.Style:null,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"BorderColorLeft",displayName:"None",value:this.gridJson.Style.LeftBorder&&this.gridJson.Style.LeftBorder.Color?this.gridJson.Style.LeftBorder.Color:"Transparent",itemType:"color"},{name:"BorderWidthLeft",displayName:"None",value:this.gridJson.Style.LeftBorder&&this.gridJson.Style.LeftBorder.Width?ej.DashboardUtil.getSizeVal(this.gridJson.Style.LeftBorder.Width.size):0,unitType:"pt",itemType:"float"}]},{name:"RightBorder",displayName:"Right",itemType:"border",items:[{name:"BorderStyleRight",displayName:"Right",value:this.gridJson.Style.RightBorder?this.gridJson.Style.RightBorder.Style:null,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"BorderColorRight",displayName:"Right",value:this.gridJson.Style.RightBorder&&this.gridJson.Style.RightBorder.Color?this.gridJson.Style.RightBorder.Color:"Transparent",itemType:"color"},{name:"BorderWidthRight",displayName:"Right",value:this.gridJson.Style.RightBorder&&this.gridJson.Style.RightBorder.Width?ej.DashboardUtil.getSizeVal(this.gridJson.Style.RightBorder.Width.size):0,unitType:"pt",itemType:"float"}]},{name:"TopBorder",displayName:"Top",itemType:"border",items:[{name:"BorderStyleTop",displayName:"Top",value:this.gridJson.Style.TopBorder?this.gridJson.Style.TopBorder.Style:null,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"BorderColorTop",displayName:"Top",value:this.gridJson.Style.TopBorder&&this.gridJson.Style.TopBorder.Color?this.gridJson.Style.TopBorder.Color:"Transparent",itemType:"color"},{name:"BorderWidthTop",displayName:"Top",value:this.gridJson.Style.TopBorder&&this.gridJson.Style.TopBorder.Width?ej.DashboardUtil.getSizeVal(this.gridJson.Style.TopBorder.Width.size):0,unitType:"pt",itemType:"float"}]},{name:"BottomBorder",displayName:"Bottom",itemType:"border",items:[{name:"BorderStyleBottom",displayName:"Bottom",value:this.gridJson.Style.BottomBorder?this.gridJson.Style.BottomBorder.Style:null,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"BorderColorBottom",displayName:"Bottom",value:this.gridJson.Style.BottomBorder&&this.gridJson.Style.BottomBorder.Color?this.gridJson.Style.BottomBorder.Color:"Transparent",itemType:"color"},{name:"BorderWidthBottom",displayName:"Bottom",value:this.gridJson.Style.BottomBorder&&this.gridJson.Style.BottomBorder.Width?ej.DashboardUtil.getSizeVal(this.gridJson.Style.BottomBorder.Width.size):0,unitType:"pt",itemType:"float"}]}]},{name:"CellBorder",displayName:"Cell Border",itemType:"border",items:[{name:"CellBorderStyle",displayName:"None",value:this.contentBorderStyle,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"CellBorderColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.contentBorderColor),itemType:"color"},{name:"CellBorderWidth",displayName:"None",value:ej.DashboardUtil.getSizeVal(this.contentBorderWidth),unitType:"pt",itemType:"float"}]},{name:"BackgroundColor",displayName:"Cell Style",value:ej.DashboardUtil.getColorCode(this.contentBackColor),itemType:"color",childItems:[{name:"ContentFont",displayName:"Font",itemType:"font",items:[{name:"ContentFontFamily",displayName:"None",value:this.contentFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"ContentFontColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.contentFontColor),itemType:"color"},{name:"ContentFontSize",displayName:"None",value:this.contentFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"ContentFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",items:[{name:"ContentFontStyle",displayName:"None",value:this.contentFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"ContentFontWeight",displayName:"None",value:this.contentFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"ContentTextDecoration",displayName:"Text Decoration",value:this.contentTextDecoration,itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"ContentTextAlign",displayName:"Text Alignment",value:this.contentTextAlign,itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"ContentPadding",displayName:"Padding",itemType:"padding",items:[{name:"ContentPaddingLeft",displayName:"Left",value:ej.DashboardUtil.getSizeVal(this.contentPaddingLeft),unitType:"pt",itemType:"float"},{name:"ContentPaddingRight",displayName:"Right",value:ej.DashboardUtil.getSizeVal(this.contentPaddingRight),unitType:"pt",itemType:"float"},{name:"ContentPaddingTop",displayName:"Top",value:ej.DashboardUtil.getSizeVal(this.contentPaddingTop),unitType:"pt",itemType:"float"},{name:"ContentPaddingBottom",displayName:"Bottom",value:ej.DashboardUtil.getSizeVal(this.contentPaddingBottom),unitType:"pt",itemType:"float"}]}]}]},{CategoryName:"Corner Cell Settings",IsVisible:this.dataGroupInfo.Rows.length>0,Items:[{name:"CornerBackgroundColor",displayName:"Cell Style",value:ej.DashboardUtil.getColorCode(this.cornerCellBackColor),isVisible:this.isRowSettingsEnabled||this.rowName!=="",itemType:"color",childItems:[{name:"CornerFont",displayName:"Font",itemType:"font",isVisible:this.isRowSettingsEnabled||this.rowName!=="",items:[{name:"CornerFontFamily",displayName:"None",value:this.cornerCellFontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"CornerFontColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.cornerCellFontColor),itemType:"color"},{name:"CornerFontSize",displayName:"None",value:this.cornerCellFontSize,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"CornerFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",isVisible:this.isRowSettingsEnabled||this.rowName!=="",items:[{name:"CornerFontStyle",displayName:"None",value:this.cornerCellFontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"CornerFontWeight",displayName:"None",value:this.cornerCellFontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"CornerTextDecoration",displayName:"Text Decoration",value:this.cornerCellTextDecoration,isVisible:this.isRowSettingsEnabled||this.rowName!=="",itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"CornerTextAlign",displayName:"Text Alignment",value:this.cornerCellTextAlign,isVisible:this.isRowSettingsEnabled||this.rowName!=="",itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"CornerPadding",displayName:"Padding",itemType:"padding",isVisible:this.isRowSettingsEnabled||this.rowName!=="",items:[{name:"CornerPaddingLeft",displayName:"Left",value:this.cornerCellPaddingLeft,unitType:"pt",itemType:"float"},{name:"CornerPaddingRight",displayName:"Right",value:this.cornerCellPaddingRight,unitType:"pt",itemType:"float"},{name:"CornerPaddingTop",displayName:"Top",value:this.cornerCellPaddingTop,unitType:"pt",itemType:"float"},{name:"CornerPaddingBottom",displayName:"Bottom",value:this.cornerCellPaddingBottom,unitType:"pt",itemType:"float"}]}]},{name:"CornerBorder",displayName:"Cell Border",itemType:"border",items:[{name:"CornerBorderStyle",displayName:"None",value:this.cornerCellBorderStyle,itemType:"dropdown",valueList:["Dashed","Dotted","Double","None","Solid"]},{name:"CornerBorderColor",displayName:"None",value:ej.DashboardUtil.getColorCode(this.cornerCellBorderColor),itemType:"color"},{name:"CornerBorderWidth",displayName:"None",value:this.cornerCellBorderWidth,unitType:"pt",itemType:"float"}]},{name:"CornerLabel",displayName:"Cell Label",isVisible:this.isRowSettingsEnabled||this.rowName!=="",value:this.cornerLabel,itemType:"label"},]},{CategoryName:"Position",Items:[{name:"Position",displayName:"Position",itemType:"position",items:[{name:"Left",displayName:"Left",value:ej.DashboardUtil.getPixelVal(this.gridJson.Left.size),unitType:"in",itemType:"float",maximum:3e3},{name:"Top",displayName:"Top",value:ej.DashboardUtil.getPixelVal(this.gridJson.Top.size),unitType:"in",itemType:"float",maximum:3e3}]},{name:"Size",displayName:"Size",itemType:"size",items:[{name:"Width",displayName:"Width",value:ej.DashboardUtil.getPixelVal(this.gridJson.Width.size),unitType:"in",itemType:"float",minimum:150,maximum:1e4},{name:"Height",displayName:"Height",value:ej.DashboardUtil.getPixelVal(this.gridJson.Height.size),unitType:"in",itemType:"float",minimum:60,maximum:1e4}]}]},{CategoryName:"Page Break",Items:[{name:"Disabled",displayName:"Enable Page Break",value:this.gridJson.PageBreak?this.gridJson.PageBreak.Disabled:!1,itemType:"bool"},{name:"BreakLocation",displayName:"Break Location",value:this.gridJson.PageBreak?this.gridJson.PageBreak.BreakLocation:null,isVisible:this.gridJson.PageBreak?this.gridJson.PageBreak.Disabled:!1,itemType:"dropdown",valueList:["None","Start","End","StartAndEnd","Between"]},{name:"ResetPageNumber",displayName:"Page Number Reset",value:this.gridJson.PageBreak?this.gridJson.PageBreak.ResetPageNumber:!1,isVisible:this.gridJson.PageBreak?this.gridJson.PageBreak.Disabled:!1,itemType:"bool"}]},{CategoryName:"Miscellaneous",Items:[{name:"NoRowsMessage",displayName:"No Rows Message",value:this.gridJson.NoRowsMessage,childItems:[{name:"NoRowFont",displayName:"Font",itemType:"font",items:[{name:"NoRowFontFamily",displayName:"None",value:this.gridJson.Style.FontFamily,itemType:"dropdown",valueList:ej.DashboardUtil.getFontNames()},{name:"NoRowFontColor",displayName:"None",value:this.gridJson.Style.Color,itemType:"color"},{name:"NoRowFontSize",displayName:"None",value:this.gridJson.Style.FontSize.size,itemType:"dropdown",valueList:["4pt","6pt","8pt","10pt","12pt","14pt","16pt","18pt","20pt","22pt","24pt","26pt","28pt","30pt","32pt","34pt","36pt","38pt","40pt","42pt","44pt","46pt","48pt","50pt","52pt","54pt","56pt","58pt","60pt","62pt","64pt","66pt","68pt","70pt","72pt"]}]},{name:"NoRowFontStyleRoot",displayName:"Font Style",itemType:"fontStyle",items:[{name:"NoRowFontStyle",displayName:"None",value:this.gridJson.Style.FontStyle,itemType:"dropdown",valueList:["Default","Normal","Italic"]},{name:"NoRowFontWeight",displayName:"None",value:this.gridJson.Style.FontWeight,itemType:"dropdown",valueList:["Default","Normal","Thin","ExtraLight","Light","Medium","SemiBold","Bold","ExtraBold","Heavy"]}]},{name:"NoRowTextDecoration",displayName:"Text Decoration",value:this.gridJson.Style.TextDecoration,itemType:"dropdown",valueList:["Default","None","Underline","LineThrough","Overline"]},{name:"NoRowTextAlign",displayName:"Text Alignment",value:this.gridJson.Style.TextAlign,itemType:"dropdown",valueList:["Default","Left","Center","Right"]},{name:"NoRowVerticalAlign",displayName:"Vertical Alignment",value:this.gridJson.Style.VerticalAlign,itemType:"dropdown",valueList:["Default","Top","Middle","Bottom"]},{name:"NoRowPadding",displayName:"Padding",itemType:"padding",items:[{name:"NoRowPaddingLeft",displayName:"Left",value:ej.DashboardUtil.getSizeVal(this.gridJson.Style.PaddingLeft.size),unitType:"pt",itemType:"float"},{name:"NoRowPaddingRight",displayName:"Right",value:ej.DashboardUtil.getSizeVal(this.gridJson.Style.PaddingRight.size),unitType:"pt",itemType:"float"},{name:"NoRowPaddingTop",displayName:"Top",value:ej.DashboardUtil.getSizeVal(this.gridJson.Style.PaddingTop.size),unitType:"pt",itemType:"float"},{name:"NoRowPaddingBottom",displayName:"Bottom",value:ej.DashboardUtil.getSizeVal(this.gridJson.Style.PaddingBottom.size),unitType:"pt",itemType:"float"}]}]},{name:"KeepTogether",displayName:"Keep Together",value:this.gridJson.KeepTogether,itemType:"bool"},{name:"RepeatColumnHeaders",displayName:"Repeat Column Headers",value:this.gridJson.RepeatColumnHeaders,itemType:"bool"}]},{CategoryName:"Visibility",Items:[{name:"Hidden",displayName:"Visible",value:this.gridJson.Visibility&&this.gridJson.Visibility.Hidden?!this.gridJson.Visibility.Hidden:!0,itemType:"bool"}]}]}},n.prototype.getGridJson=function(){return{__type:"Syncfusion.RDL.DOM.Tablix",TablixCorner:{__type:"Syncfusion.RDL.DOM.TablixCorner",TablixCornerRows:this.createTablixCornerRows(0,0)},IsPivotGrid:!0,TablixBody:{__type:"Syncfusion.RDL.DOM.TablixBody",TablixColumns:[this.createTablixColumn(),this.createTablixColumn(),this.createTablixColumn()],TablixRows:[{__type:"Syncfusion.RDL.DOM.TablixRow",Height:{__type:"Syncfusion.RDL.DOM.Size",size:"0.500in"},TablixCells:[this.createTablixCell(1,"",!0),this.createTablixCell(3,"",!0),this.createTablixCell(5,"",!0)]},{__type:"Syncfusion.RDL.DOM.TablixRow",Height:{__type:"Syncfusion.RDL.DOM.Size",size:"0.500in"},TablixCells:[this.createTablixCell(2,"",!1),this.createTablixCell(4,"",!1),this.createTablixCell(6,"",!1)]}]},TablixColumnHierarchy:{__type:"Syncfusion.RDL.DOM.TablixColumnHierarchy",TablixMembers:[this.createTablixMember(),this.createTablixMember(),this.createTablixMember()]},TablixRowHierarchy:{__type:"Syncfusion.RDL.DOM.TablixRowHierarchy",TablixMembers:[this.createTablixMember(),this.createTablixMemberGroup()]},LayoutDirection:0,GroupsBeforeRowHeader:0,RepeatColumnHeaders:!1,RepeatRowHeaders:!1,FixedColumnHeaders:!1,FixedRowHeaders:!1,KeepTogether:!1,NoRowsMessage:null,DataSetName:null,PageBreak:null,Filters:[],SortExpressions:[],PageName:null,Left:{__type:"Syncfusion.RDL.DOM.Size",size:"0.99875in"},Top:{__type:"Syncfusion.RDL.DOM.Size",size:"0.78in"},Name:"Tablix1",Value:null,ActionInfo:null,Height:{__type:"Syncfusion.RDL.DOM.Size",size:"1.32292in"},Width:{__type:"Syncfusion.RDL.DOM.Size",size:"4.58333in"},ZIndex:0,Visibility:null,LabelLocID:null,ToolTip:null,DocumentMapLabel:null,Bookmark:null,RepeatWith:null,CustomProperties:[],DataElementName:null,DataElementOutput:0,Style:{__type:"Syncfusion.RDL.DOM.Style",BackgroundColor:"Transparent",FontFamily:"Arial",FontSize:{__type:"Syncfusion.RDL.DOM.Size",size:"10pt"},FontWeight:"Default",BackgroundGradientType:"None",BackgroundGradientEndColor:null,FontStyle:"Default",Format:null,FormatType:null,TextDecoration:"Default",TextAlign:"Default",VerticalAlign:"Default",Color:null,PaddingLeft:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingRight:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingTop:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingBottom:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},LineHeight:{__type:"Syncfusion.RDL.DOM.Size",size:"0"},Direction:"Default",WritingMode:"Default",Language:null,Calendar:0,NumeralLanguage:null,TextEffect:0,BackgroundHatchType:0,ShadowColor:null,Border:{__type:"Syncfusion.RDL.DOM.Border",Color:"Gray",Style:"None",Width:null},TopBorder:null,BottomBorder:null,LeftBorder:null,RightBorder:null,BackgroundImage:null,NumeralVariant:null,ShadowOffset:null}}},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return this.gridJson},n.prototype.dispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.gridJson.Name,[this.gridJson],null);$("#"+this.designerInstance._id+"_"+this.gridJson.Name).removeData("widgetInstance").remove();this.designPanel.selectedReportItems=[]},n}();window.ej.createObject("ej.DashboardDesignerUtility.PivotGridItem",InternalPivotGridReportItem,window);InternalPropertyPanel=function(){function n(){this.id=null;this.canUpdate=!0;this.propertyHeaderText="Properties";this.endItemIndex=-1;this.currentItemIndex=-1;this.dataConfigTimeOut=null;this.ejDropDownObj={};this.ejColorPickObj={};this.ejNumbericObj={};this.ejCheckboxObj={};this.ejButtonObj={};this.ejMaskEditObj={};this.jQHeaderRows={};this.jQContainerRows={};this.resizeObj={isPropertyPanel:!1,isDataAssign:!1};this.propertyHeaderVal="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.id=this.dashboardDesigner._id;this.propertyContainer=ej.buildTag("div","",{border:"0px solid #c8c8c8",height:"100%"},{id:this.id+"_propertyPanel"});this.propertyPanelContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{border:"0px solid #c8c8c8","background-color":"white"},{id:this.id+"_propertyPanelContainer"})}return Object.defineProperty(n.prototype,"ActiveProperty",{get:function(){return this.activeProperty},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"EjMaskEditObj",{get:function(){return this.ejMaskEditObj},enumerable:!0,configurable:!0}),Object.defineProperty(n,"PropertySource",{get:function(){return ej.isNullOrUndefined(this.propertyPanel)&&(this.propertyPanel=new ej.DashboardDesignerUtility.PropertyPanel),this.propertyPanel},enumerable:!0,configurable:!0}),n.prototype.isLoaded=function(){return!ej.isNullOrUndefined(this.targetTag)},n.prototype.isVisible=function(){return this.propertyContainer&&this.propertyContainer.is(":visible")},n.prototype.renderContainer=function(n){var t,i,f;this.targetTag=n;t=ej.buildTag("div","",{position:"relative",height:"100%"},{id:this.id+"_propertyTab"});i=ej.buildTag("ul.e-designer-property-header","",{background:"white"},{id:this.id+"_propertyTabUl"});i.append("<li><a href=#"+this.id+"_propertyPanelContainer>PROPERTIES<\/a><\/li>");i.append("<li><a href=#"+this.id+"_dataTabRootElement>ASSIGN DATA<\/a><\/li>");var o=ejDashboardDesigner.getInstance("DashboardDesigner").element.offset(),u=ej.buildTag("div","",{width:"120px",display:"none",right:"68px",top:40.5+"px",position:"absolute"},{id:this.id+"_propertyTabUl_datasetListContainer"}),e=ej.buildTag("input","",{},{id:this.id+"_propertyTabUl_datasetList"}),r=ej.buildTag("div","",{},{id:this.id+"_waitingPopup_propertypaneldiv"});u.append(e);i.append(u);t.append(i);t.append(r);r.append(this.propertyPanelContainer);this.propertyPanelContainer.css("width",$("#"+this.id+"_designerConfigurationPanel").width()+"px");this.scrollElement=ej.buildTag("div","",{});this.propertyPanelContainer.append(this.scrollElement);this.propertyPanelContainer.ejScroller({scrollerSize:9,enableTouchScroll:!1,autoHide:!0,buttonSize:14,scroll:$.proxy(this.onPanelScroll,this)});r.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-propertyPanel-waitingPopup"});this.ejWaitingPane=r.data("ejWaitingPopup");this.updateSize();this.propertyContainer.append(t);this.propertyContainer.append(u);e.ejDropDownList({change:$.proxy(this.onDatasetFieldChange,this),selectedIndex:0,width:"120px",height:"24px",dataSource:this.getAvailableFields(),cssClass:"e-designer-ejwidgets-dataConfig e-designer-content-label e-dbrd-control",fields:{text:"id",value:"text"}});f=ejDashboardDesigner.getInstance("DataConfiguration");f.isLoaded()||ejDashboardDesigner.getInstance("DataConfiguration").renderContainer(t);f.showDataConfig(!0,this.resizeObj);this.targetTag.append(this.propertyContainer);t.ejTab({itemActive:$.proxy(this.onTabActive,this)});this.ejPanelScroller=this.propertyPanelContainer.data("ejScroller");this.ejPanelTab=t.data("ejTab");this.calWidth=this.propertyPanelContainer.width()},n.prototype.onDatasetFieldChange=function(n){var t;if(!ej.isNullOrUndefined(n.selectedValue)&&n.isInteraction&&this.ejPanelTab.option("selectedItemIndex")===1){var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),r=!1,u=n.selectedValue===i.dataGroupInfo.DatasetId;for(t=0;t<i.dataGroupInfo.Values.length;t++)if(i.dataGroupInfo.Values[t].Values.length!==0){r=!0;break}if(r&&!u){ej.DashboardUtil.getInstance().alertDialog(ejDashboardDesigner.getInstance("DashboardDesigner").locale.alertDialogTitle.ResetDataSource,ejDashboardDesigner.getInstance("DashboardDesigner").locale.propertyPanel.promptWindowContent,IconType.question,AlertType.Confirm,!1,"",{dataInfo:{event:n},instance:this,method:"confirmExecution"});return}}ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"updateDatasetFields",[n.selectedValue,n.selectedText,!1])},n.prototype.confirmExecution=function(n,t){if(n){ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"updateDatasetFields",[t.event.selectedValue,t.event.selectedText,!0]);var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);ej.DashboardUtil.getInstance().resetUrlLink(i.getReportItemJson())}else this.updateDropdownVal()},n.prototype.refreshScroller=function(){this.ejPanelScroller&&this.ejPanelScroller.refresh()},n.prototype.resetTargetItems=function(){this.targetItems=null},n.prototype.setTitle=function(n){var u,r,t,i;ej.isNullOrUndefined(n)||(u=ejDashboardDesigner.getInstance("DesignPanel"),r=u.designCanvas.find("#"+this.dashboardDesigner._id+"_"+n.UniqueName),ej.isNullOrUndefined(n.ContainerSettings)?r.find(".e-dbrd-control-title").html(n).attr("title",n):(t=r.find(".e-dbrd-control-title"),i=n.ContainerSettings.Title,i=ej.DashboardUtil.getInstance().getResultantParameterString(i,n.Data.Id),t.html(i),t.attr("title",t.text())))},n.prototype.setDescription=function(n,t){if(!ej.isNullOrUndefined(n)){n.ContainerSettings.Description=t;var u=10,f=ej.isNullOrUndefined(n.ContainerSettings)?null:n.ContainerSettings.TextAlignment,o=ejDashboardDesigner.getInstance("DesignPanel"),i=o.designCanvas.find("#"+this.dashboardDesigner._id+"_"+n.UniqueName),r=i.find(".e-dbrd-control-description"),e=i.find(".e-dbrd-controlIcon-container");e.css("display")==="block"&&f!==null&&f!==TextAlignment.Center&&(u=e.outerWidth(!0)+10);i.find(".e-dbrd-control-title-wrapper").css({width:"calc(100% - "+u+"px)"});!ej.isNullOrUndefined(n.ContainerSettings)&&!ej.isNullOrUndefined(n.ContainerSettings.Description)&&n.ContainerSettings.Description.trim().length>0?(i.find(".e-dbrd-control-title").css({"max-width":"calc(100% - "+r.width()+"px)"}),r.css({display:"block"}),r.attr("title",n.ContainerSettings.Description)):(i.find(".e-dbrd-control-title").css({"max-width":"100%"}),r.css({display:"none"}),r.attr("title",""))}},n.prototype.setSubTitle=function(n,t){if(!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(n.ContainerSettings)&&n.ContainerSettings.SubTitle!==t){n.ContainerSettings.SubTitle=t;var s=ejDashboardDesigner.getInstance("DesignPanel"),i=s.designCanvas.find("#"+this.dashboardDesigner._id+"_"+n.UniqueName),e=ej.DashboardUtil.getWidgetInstance(i),r=i.find(".e-dbrd-control-sub-header"),u=i.find(".e-dbrd-control-sub-title"),h=i.find(".e-dbrd-content-container"),f=n.ContainerSettings.SubTitle,o=i.find(".e-dbrd-control-header").outerHeight(!0);!ej.isNullOrUndefined(n.ContainerSettings.SubTitle)&&n.ContainerSettings.SubTitle.trim().length>0?(o+=r.outerHeight(!0),r.css("display","block"),f=ej.DashboardUtil.getInstance().getResultantParameterString(f,n.Data.Id)):r.css("display","none");u.html(f);u.attr("title",u.text());h.css({height:"calc(100% - "+o+"px)"});e.updateSize(e.cellInfo)}},n.prototype.GetValidParameterCollection=function(n,t){var f=this,o=[],a=RegExp("{{:(.*?)}}","g"),v=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])|^Month([(.*?)])","ig"),s=!1,i,r,h=!1,l,u,y,e,c;if(a.test(n))for(u=n.match(a),this.summaryType=SummaryType.SUM,this.dateformat=DateTimeFormat.None,y=function(n){var a,p,y,c;for(r=u[n].substring(3,u[n].length-2),a=ejDashboardDesigner.getInstance("DataSet").datasets,v.test(r)?(p=r.match(v),y=p[0].substring(0,p[0].length-1),!ej.isNullOrUndefined(y)&&y.length>0&&(e.summaryType=ej.DashboardUtil.getInstance().getValidSummaryType(y.toLowerCase()),e.summaryType===null||e.summaryType==="None"?(e.dateformat=DateTimeFormat[ej.DashboardUtil.getInstance().getValidDateFormat(y.toLowerCase())],s=!1):s=!0,r=r.replace(y,""),i=r.substring(1,r.length-1),h=!0)):(i=r,h=!1),ej.isNullOrUndefined(t)&&(t=e.getDefaultDatasourceID(i)),c=0;c<a.length;c++)i.indexOf(a[c].Name)!==-1?(l=t!==a[c].Id?a[c].Id:t,i=i.replace(a[c].Name+".","")):l=t,a[c].Id===l&&a[c].Fields.forEach(function(t){h?t.Name===i&&(s&&t.TypeName!=="Date"&&t.TypeName!=="String"&&t.TypeName!=="Datetime"?o.push(u[n]):!s&&(f.dateformat===0||f.dateformat==="None")||h&&(f.summaryType==="COUNT"||f.summaryType==="COUNTD")?o.push(u[n]):s||f.dateformat===0&&f.dateformat==="None"||t.TypeName!=="Date"||o.push(u[n])):t.Name===i&&o.push(u[n])})},e=this,c=0;c<u.length;c++)y(c);return o},n.prototype.getDefaultDatasourceID=function(n){for(var r,i=ejDashboardDesigner.getInstance("DataSet").datasets,t=0;t<i.length;t++){if(n.split(".").length>1&&n.split(".")[0]===i[t].Name)return i[t].Id;for(r=0;r<i[t].Fields.length;r++)if(i[t].Fields[r].Name===n)return i[t].Id}},n.prototype.onTabActive=function(n){var r=this,i,t;n.activeHeader.innerText==="ASSIGN DATA"?($("#"+this.id+"_waitingPopup_propertypaneldiv").css("display","none"),$("#"+this.id+"_propertyTabUl_datasetListContainer").css("display","inline-block"),this.dataConfigTimeOut&&clearTimeout(this.dataConfigTimeOut),ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"showIndicator"),this.dataConfigTimeOut=setTimeout(function(){ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"showDataConfig",[!0,r.resizeObj])},300)):($("#"+this.id+"_propertyTabUl_datasetListContainer").css("display","none"),$("#"+this.id+"_waitingPopup_propertypaneldiv").css("display","inline-block"),this.isWaitingPopupEnabled&&this.ejWaitingPane.show(),this.designPanel.selectedReportItems.length>0&&(i=this.designPanel.selectedReportItems[0],t=ej.DashboardUtil.getWidgetInstance(i),t.updatePropertyData&&t.updatePropertyData(),this.refreshScroller()),this.resizeObj.isPropertyPanel&&(this.updateSize(),this.resizeObj.isPropertyPanel=!1))},n.prototype.getPropertyTab=function(){return $("#"+this.id+"_propertyTab").data("ejTab")},n.prototype.setPropertyTabIndex=function(n){var t=this.getPropertyTab();t.option("selectedItemIndex",n)},n.prototype.getAvailableFields=function(){var n=ejDashboardDesigner.getInstance("DataSet").datasets,i=[],t;if(!ej.isNullOrUndefined(n)&&n.length>0)for(t=0;t<n.length;t++)i.push({id:n[t].Name,text:n[t].Id});return i},n.prototype.setPropertyHeader=function(n){var t,i,r;ej.isNullOrUndefined(this.propertyHeader)?this.renderPropertyHeader(n,n.Type):(this.headerInput.val(n.Header),this.subHeaderInput.val(n.SubTitle),this.descriptionInput.val(n.Description),this.propertyHeaderVal=n.Header);n.Type==="Dashboard"?this.subTitleContainer.css("display","none"):this.subTitleContainer.css("display","block");this.dashboardPropertyContainer[0].style.display="inline-block";n.Type!=="Dashboard"?this.dashboardPropertyContainer.find("#"+this.id+"_propertyCheckboxDiv_CheckBox").css({display:"none"}):(t=this.ejCheckboxObj[this.id+"_propertyCheckbox_CheckBox"],ej.isNullOrUndefined(t)||(this.activeProperty=n,t.option("checked",n.Comment.value)));i=this.designPanel.selectedReportItems[0];ej.isNullOrUndefined(i)||(r=ej.DashboardUtil.getWidgetInstance(i),ej.isNullOrUndefined(r.showSubTitle)||r.showSubTitle!==!1||(this.subTitleContainer.css("display","none"),this.dashboardPropertyContainer[0].style.display="none"));n.Type==="Label"?this.propertyHeader.hide():this.propertyHeader.show();this.validatePropertyValues({name:"Name",value:n.Header},"General",n.Type,!1)},n.prototype.getPropertyIndexes=function(n){var t,i;if(n.Type!=="Dashboard"){var f=n.Items.length,r={},u=0;for(t=0;t<f;t++)if(n.Items[t].Items&&n.Items[t].Items.length>0)for(i=0;i<n.Items[t].Items.length;i++)r[u]={name:n.Items[t].CategoryName,index:i},u++;return r}},n.prototype.getRowProperty=function(n,t,i){for(var u=n.Items.length,r=0;r<u;r++)if(n.Items[r].Items&&n.Items[r].Items.length>0&&n.Items[r].CategoryName===t)return n.Items[r].Items[i];return null},n.prototype.renderPropertyHeaders=function(n,t){for(var r=n.Items.length,i=0;i<r;i++)this.setPropertyItem(t,n.Items[i],n.Type,i===r-1)},n.prototype.renderRowElement=function(n,t,i){var r=i.split(" ").join("").replace("&",""),u=this.jQContainerRows[this.id+"_tableElement_"+t+"_"+r],f=this.jQHeaderRows[this.id+"_elementContainer_"+t+"_"+r].find(".e-header-row-icon");f.removeClass("e-reportdesigner-plus").addClass("e-reportdesigner-minus");this.populatePropertyItem(null,u,n,r,t,!0)},n.prototype.updateRowValue=function(n,t){var i=n.CategoryName.split(" ").join("").replace("&","");this.updateCategoryVisibility(t,i,ej.isNullOrUndefined(n.IsVisible)?!0:n.IsVisible);this.updatePropertyItem(n.Items,i,t)},n.prototype.showPropertyItem=function(n,t){var r,i;this.propertyContainer.is(":visible")&&(ej.DashboardUtil.isEqualObj(n,this.activeProperty)||(r=t&&t.length>0?t:n.Type,this.setPropertyHeader(n),i=$("#"+this.id+"_"+r.toLowerCase()+"_item_property"),this.propertyIndexes=this.getPropertyIndexes(n),i.length===0?(this.pausePropertyRender(),this.activeElement&&this.activeElement.css("display","none"),i=this.activeElement=ej.buildTag("div","",{width:"100%",display:"block","margin-top":"7px","background-color":"white"},{id:this.id+"_"+r.toLowerCase()+"_item_property"}),this.scrollElement.append(i),n.Type!=="Dashboard"&&this.renderPropertyHeaders(n,i),this.currentItemIndex=0,this.activeProperty=n,n.Type!=="Dashboard"&&(this.endItemIndex=Object.keys(this.propertyIndexes).length),this.startPropertyRender()):i.length>0&&i.hasClass("e-pro-pause")&&(ej.isNullOrUndefined(this.activeElement)||this.activeElement.attr("id")!==i.attr("id"))?(this.activeElement&&this.activeElement.css("display","none"),i.css("display","block"),this.pausePropertyRender(),this.activeProperty=n,this.activeElement=i,this.resumePropertyRender()):i.length>0&&i.hasClass("e-pro-pause")&&this.activeElement.attr("id")===i.attr("id")?(i.css("display","block"),this.currentItemIndex!==this.endItemIndex&&(i.addClass("e-pro-resume"),this.activeProperty=n)):i.hasClass("e-pro-completed")&&(this.activeElement&&this.activeElement.css("display","none"),i.css("display","block"),this.pausePropertyRender(),this.activeProperty=n,this.activeElement=i,this.updateProperties())))},n.prototype.startPropertyRender=function(){this.groupInterval&&(clearInterval(this.groupInterval),this.groupInterval=null);this.canUpdate=!1;this.groupInterval=setInterval($.proxy(this.tickPropertyRender,this),100);$("#"+this.id+"_waitingPopup_propertypaneldiv").height($("#"+this.id+"_propertyPanel").height()-34+"px");this.showIndicator()},n.prototype.tickPropertyRender=function(){if(this.currentItemIndex<this.endItemIndex){try{var n=this.propertyIndexes[this.currentItemIndex],i=this.getRowProperty(this.activeProperty,n.name,n.index);this.canUpdate=!1;this.renderRowElement(i,this.activeProperty.Type,n.name);this.canUpdate=!0}catch(t){this.designPanel.logError({Source:"Property Panel Loading:",Error:t,Type:t.name})}this.currentItemIndex++}else this.stopPropertyRender(),this.refreshScroller()},n.prototype.resumePropertyRender=function(){this.currentItemIndex=parseInt(this.activeElement.attr("e-current-index"),10);this.endItemIndex=parseInt(this.activeElement.attr("e-end-index"),10);this.activeElement.addClass("e-pro-resume");this.startPropertyRender()},n.prototype.pausePropertyRender=function(){this.activeElement&&this.currentItemIndex<this.endItemIndex&&(clearInterval(this.groupInterval),this.groupInterval=null,this.activeElement.addClass("e-pro-pause").removeClass("e-pro-completed"),this.activeElement.attr("e-current-index",this.currentItemIndex),this.activeElement.attr("e-end-index",this.endItemIndex),this.currentItemIndex=-1,this.endItemIndex=-1,this.canUpdate=!0);this.hideIndicator()},n.prototype.stopPropertyRender=function(){this.activeElement&&(clearInterval(this.groupInterval),this.groupInterval=null,this.currentItemIndex=-1,this.endItemIndex=-1,this.canUpdate=!0,this.activeElement.addClass("e-pro-completed").removeClass("e-pro-pause"),this.activeElement.hasClass("e-pro-resume")&&this.updateProperties());this.hideIndicator()},n.prototype.onPanelScroll=function(){$(".e-designer-tooltip:visible").css("display","none")},n.prototype.updateProperties=function(){var n,t,i;if(this.activeProperty.Type!=="Dashboard"){if(this.canUpdate=!1,this.activeProperty&&this.activeProperty.Items.length>0)for(n=0;n<this.activeProperty.Items.length;n++)t=this.activeProperty.Items[n],this.updateRowValue(t,this.activeProperty.Type);if(i=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems,i.length>0){var r=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0],u=ej.DashboardUtil.getWidgetInstance(r),f=u.getReportItemJson();this.setTitle(f)}else this.setTitle(this.activeProperty.Header);this.canUpdate=!0;this.refreshScroller()}},n.prototype.updateDropdownVal=function(){var r=$("#"+this.id+"_propertyTabUl_datasetList").data("ejDropDownList"),t,u,i,n;if(!ej.isNullOrUndefined(r)){if(t=this.getAvailableFields(),u=0,r.option("dataSource",t),i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]).dataGroupInfo,!ej.isNullOrUndefined(i))for(n=0;n<t.length;n++)if(t[n].id===i.DatasetName){u=n;ejDashboardDesigner.getInstance("DataConfiguration").selectedDatasetName=i.DatasetName;break}r.option("selectedIndex",u)}},n.prototype.hasRptDataSet=function(){var n=ejDashboardDesigner.getInstance("DataSet").datasets;return n&&n.length>0?!0:!1},n.prototype.showIndicator=function(){this.propertyPanelContainer.is(":visible")&&this.ejWaitingPane.show();var n=this.designPanel.selectedReportItems;n[0]&&n[0].length>0&&($.parseJSON(n[0].attr("isDataEnabled"))?(this.ejPanelTab.option("hiddenItemIndex",[]),this.ejPanelTab.option("disabledItemIndex",[1])):this.ejPanelTab.option("hiddenItemIndex",[1]));this.isWaitingPopupEnabled=!0},n.prototype.hideIndicator=function(){var n=this.designPanel.selectedReportItems;this.ejWaitingPane.hide();n[0]&&n[0].length>0&&$.parseJSON(n[0].attr("isDataEnabled"))&&this.ejPanelTab.option("enabledItemIndex",[1]);this.isWaitingPopupEnabled=!1},n.prototype.hidePropertyPanel=function(){this.activeElement&&this.activeElement.hasClass("e-pro-completed")?(this.hideIndicator(),this.activeElement.css("display","none"),this.activeProperty=null,this.activeElement=null):(this.pausePropertyRender(),this.hideIndicator(),this.activeElement&&this.activeElement.css("display","none"),this.activeProperty=null,this.activeElement=null);clearInterval(this.groupInterval);this.groupInterval=null},n.prototype.enableDataTab=function(n){if(n&&n.length>0&&$.parseJSON(n.attr("isDataEnabled")))if(this.isWaitingPopupEnabled)this.ejPanelTab.option("disabledItemIndex",[1]);else{var t=ejDashboardDesigner.getInstance("DataConfiguration");this.hasRptDataSet()?(t.showAlertContainer(!1),this.updateDropdownVal()):t.showAlertContainer(!0);this.ejPanelTab.option("hiddenItemIndex",[])}else this.ejPanelTab.option("hiddenItemIndex",[1]);this.resetDataTab()},n.prototype.resetDataTab=function(){ej.isNullOrUndefined(this.ejPanelTab)||this.ejPanelTab.option("selectedItemIndex")!==1||this.ejPanelTab.option("selectedItemIndex",0)},n.prototype.showPropertyPanel=function(n,t){this.propertyContainer.css("display",n?"block":"none");ej.isNullOrUndefined(this.designPanel)&&(this.designPanel=ejDashboardDesigner.getInstance("DesignPanel"));n?ej.isNullOrUndefined(this.ejPanelTab)||(this.enableDataTab(this.designPanel.selectedReportItems.length>0?this.designPanel.selectedReportItems[0]:null),this.selectProperties()):this.hidePropertyPanel();t.isPropertyPanel&&(this.resizeObj.isDataAssign=!0,this.resizeObj.isPropertyPanel=!1,this.updateSize(),t.isPropertyPanel=!1)},n.prototype.showDesignAreaProperty=function(n,t){this.ejPanelTab.option("hiddenItemIndex",t==="Dashboard"?[1]:[]);this.ejPanelTab.option("selectedItemIndex")===1&&this.ejPanelTab.option("selectedItemIndex",0);this.showPropertyItem(n,t)},n.prototype.selectProperties=function(){var n=this.designPanel.selectedItems,t=this.designPanel.selectedReportItems;t.length>0?this.setPropertyElement(t):n.length>0?ej.isNullOrUndefined($(n[0]).attr("designPanel"))&&$(n[0]).attr("class")!=="e-dashboarddesigner-designPanel"||this.showReportProperties():t.length===0&&this.showReportProperties()},n.prototype.showReportProperties=function(){var n=ejDashboardDesigner.getInstance("DesignPanel").getDesignProperty("Dashboard");this.targetDesignArea="Dashboard";this.showPropertyItem(n,"Dashboard")},n.prototype.showProperty=function(n){n?ejDashboardDesigner.getInstance("DataConfigurationPanel").showConfigurationPanel(!0,"Properties"):ejDashboardDesigner.getInstance("DataConfigurationPanel").showConfigurationPanel(!1,"Properties");$("#"+this.id+"_collapse_wrapper").css("display",n?"block":"none")},n.prototype.renderPropertyHeader=function(n,t){var i,u,f,e,o,s,h,r,c,l;this.propertyHeader=ej.buildTag("div","",{overflow:"hidden","background-color":"white","margin-bottom":"15px"},{id:this.id+"_propertyItemHeaderName"});i=ej.buildTag("div","",{});u=ej.buildTag("span.e-designer-fontfamily","",{overflow:"hidden","font-size":"13px",display:"inline-block","font-weight":"600",width:this.propertyPanelContainer.width()-48+"px",margin:"7px",float:"left","margin-right":"3px","margin-left":"10px"},{id:this.id+"_propertyItemHeaderText_Name"});u.text("Name");f=ej.buildTag("span","",{float:"right","padding-top":"11px","padding-right":"5px"},{id:this.id+"_propertyItemHeaderText_Name_error"});ej.DashboardUtil.renderErrIndictor(f,this.id);i.append(u);i.append(f);this.propertyHeader.append(i);this.headerInput=ej.buildTag("input.e-textbox e-designer-fontfamily","",{margin:"3px","margin-left":"10px",width:this.propertyPanelContainer.width()-23+"px",height:"28px",border:"0.5px solid","border-color":"lightgray","box-sizing":"border-box"},{id:this.id+"_propertyItemHeaderInput_Name"});this.headerInput.bind("keyup",$.proxy(this.onTextKeyUp,this));this.headerInput.bind("focusout ",$.proxy(this.itemNameChange,this));this.headerInput.val(n.Header);this.propertyHeader.append(this.headerInput);this.scrollElement.append(this.propertyHeader);this.subTitleContainer=ej.buildTag("div","",{display:"inline-block"});e=ej.buildTag("div","",{});o=ej.buildTag("span.e-dbrd-subtitle-span e-designer-fontfamily","",{width:this.propertyPanelContainer.width()-48+"px"},{id:this.id+"_propertyItemSubHeaderText_Name"});o.text(this.dashboardDesigner.locale.propertyPanel.subHeaderText);e.append(o);this.subTitleContainer.append(e);this.subHeaderInput=ej.buildTag("input.e-dbrd-subtitle-header-name e-textbox e-designer-fontfamily","",{width:this.propertyPanelContainer.width()-23+"px"},{id:this.id+"_propertyItemSubHeaderInput_Name"});this.subHeaderInput.on("keyup",$.proxy(this.onSubTitleTextKeyUp,this));this.subHeaderInput.on("focusout ",$.proxy(this.itemSubTitleChange,this));this.subHeaderInput.val(n.SubTitle);this.subTitleContainer.append(this.subHeaderInput);this.propertyHeader.append(this.subTitleContainer);this.dashboardPropertyContainer=ej.buildTag("div","",{display:"inline-block"});s=ej.buildTag("div","",{display:"inline-block"});h=ej.buildTag("span.e-designer-fontfamily","",{overflow:"hidden","font-size":"13px",display:"inline-block","font-weight":"600",width:this.propertyPanelContainer.width()-48+"px",margin:"7px",float:"left","margin-right":"3px","margin-left":"10px"},{id:this.id+"_propertyItemDescriptionText_Description"});h.text("Description");s.append(h);this.dashboardPropertyContainer.append(s);this.descriptionInput=ej.buildTag("textarea.e-textbox e-designer-fontfamily","",{margin:"3px","margin-left":"10px",width:this.propertyPanelContainer.width()-37+"px",height:"57px",border:"0.5px solid","border-color":"lightgray",display:"inline-block",resize:"none",overflow:"auto"},{id:this.id+"_propertyItemDescriptionInput_Description"});this.descriptionInput.bind("keyup",$.proxy(this.onDescriptionTextKeyUp,this));this.descriptionInput.bind("blur",$.proxy(this.itemDescriptionChange,this));this.descriptionInput.val(n.Description);this.dashboardPropertyContainer.append(this.descriptionInput);r=ej.buildTag("div","",{"margin-bottom":"15px",display:"inline-block"},{id:this.id+"_propertyCheckboxDiv_CheckBox"});c=ej.buildTag("label.e-designer-fontfamily","",{"font-size":"12px",float:"left",margin:"10px"},{id:this.id+"_propertyCheckboxDiv_childelement","for":this.id+"_propertyCheckbox_CheckBox",title:this.dashboardDesigner.locale.propertyPanel.enableCommentingTooltip});c.text("Enable Commenting");r.append(c);l=ej.buildTag("div","",{display:"inline-block","margin-top":"7px",border:"0px solid","border-color":"red"},{id:this.id+"_propertyCheckboxInput_CheckBox"});this.checkBoxElement=ej.buildTag("input","",{},{id:this.id+"_propertyCheckbox_CheckBox",type:"checkbox"});l.append(this.checkBoxElement);this.checkBoxElement.ejCheckBox({checked:ej.isNullOrUndefined(n.Comment)?!0:n.Comment.value,change:$.proxy(this.itemCommentChange,this,t),width:(this.calWidth-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});this.ejCheckboxObj[this.checkBoxElement.attr("id")]=this.checkBoxElement.data("ejCheckBox");r.append(l);this.dashboardPropertyContainer.append(r);this.propertyHeader.append(this.dashboardPropertyContainer)},n.prototype.onTextKeyUp=function(n){n.keyCode===13&&this.itemNameChange(n)},n.prototype.onDescriptionTextKeyUp=function(n){n.keyCode===13&&this.itemDescriptionChange(n)},n.prototype.onSubTitleTextKeyUp=function(n){n.keyCode===13&&this.itemSubTitleChange(n)},n.prototype.getItem=function(n,t,i){for(var u,r=0;r<n.length;r++){if(!ej.isNullOrUndefined(n[r].name)&&t===n[r].name){u=i>=0?n[r].items[i]:n[r];break}!ej.isNullOrUndefined(n[r].Items)&&ej.isNullOrUndefined(u)&&(u=this.getItem(n[r].Items,t,i))}return u},n.prototype.getPropertyElement=function(n,t,i,r){for(var f,u=0;u<n.Items.length;u++)n.Items[u].CategoryName.split(" ").join("").replace("&","")===i&&(f=this.getItem(n.Items[u].Items,t,r));return f},n.prototype.setPropertyElement=function(n){var u=n.length,i,t,r;if(u>1)i=ejDashboardDesigner.getInstance("DashboardDesigner"),ej.DashboardUtil.getInstance().alertDialog(i.locale.alertDialogTitle.properties,i.locale.propertyPanel.propertyPanelCommonItems,IconType.errors,AlertType.Alert,!1,"",{height:120}),this.showProperty(!1);else{for(this.enableDataTab(n[0]),t=0;t<u;t++)r=ej.DashboardUtil.getWidgetInstance(n[t]),ej.isNullOrUndefined(r)||this.showPropertyItem(r.getPropertyPanelItems());this.targetItems=n}},n.prototype.onExpandCollapseClick=function(n){this.jQHeaderRows[this.id+"_elementContainer_"+n].hasClass("e-item-expand")?this.collapseCategory(n):this.expandCategory(n);this.refreshScroller()},n.prototype.expandCategory=function(n){this.jQHeaderRows[this.id+"_elementContainer_"+n].addClass("e-item-expand").removeClass("e-item-collapse");this.jQHeaderRows[this.id+"_elementContainer_"+n].find(".e-header-row-icon").addClass("e-reportdesigner-minus").removeClass("e-reportdesigner-plus");this.jQContainerRows[this.id+"_tableElement_"+n].css("display","block")},n.prototype.collapseCategory=function(n){this.jQHeaderRows[this.id+"_elementContainer_"+n].removeClass("e-item-expand").addClass("e-item-collapse");this.jQHeaderRows[this.id+"_elementContainer_"+n].find(".e-header-row-icon").removeClass("e-reportdesigner-minus").addClass("e-reportdesigner-plus");this.jQContainerRows[this.id+"_tableElement_"+n].css("display","none")},n.prototype.setPropertyItem=function(n,t,i,r){var h,c,o,s;if(t.Items.length>1||t.Items.length===1&&t.Items[0].name!=="Name"){var e=ej.isNullOrUndefined(t.IsVisible)?!0:t.IsVisible?!0:!1,u=t.CategoryName.split(" ").join("").replace("&",""),f=ej.buildTag("div.e-property-row-header "+(r?"e-last-item":"e-mid-item")+(e?" e-item-expand":" e-item-collapse"),"",{width:"100%",height:"25px",display:e?"block":"none"},{id:this.id+"_elementContainer_"+i+"_"+u});this.jQHeaderRows[this.id+"_elementContainer_"+i+"_"+u]=f;h=ej.buildTag("div.e-header-row-txt",t.CategoryName,{float:"left","font-size":"13px","margin-left":"12px","margin-top":"4px"},{id:this.id+"_header_"+i+"_"+u});f.append(h);c=ej.buildTag("span.e-header-row-icon "+(e?"e-reportdesigner-minus":"e-reportdesigner-plus"),"",{float:"right","margin-top":"-2px"});f.append(c);n.append(f);o=ej.buildTag("div","",{"margin-top":"10px","margin-bottom":"10px",display:"inline-block"});s=ej.buildTag("div.e-property-row-container","",{margin:"0.5px","margin-bottom":"0px",display:e?"block":"none"},{id:this.id+"_tableElement_"+i+"_"+u});this.jQContainerRows[this.id+"_tableElement_"+i+"_"+u]=s;o.append(s);n.append(o);f.bind("click",$.proxy(this.onExpandCollapseClick,this,i+"_"+u))}},n.prototype.updatePropertyItem=function(n,t,i){for(var u,f,r=0;r<n.length;r++)n[r].itemType==="float"?this.setNumber(null,null,t,n[r],!0,i):n[r].itemType==="color"?this.setColor(null,null,t,n[r],i):n[r].itemType==="dropdown"?this.setDropDown(null,null,t,n[r],i):n[r].itemType==="autocomplete"||(n[r].itemType==="bool"?(u=$.extend(!0,{},n[r]),u.valueList=["true","false"],this.setBoolean(null,null,t,n[r],i)):n[r].itemType==="link"?(f=ejDashboardDesigner.getInstance("ReportAction"),n[r].categoryName=t,f.renderAction(null,i+"_"+t,n[r])):n[r].itemType==="button"?this.setButton(null,null,t,n[r],i):n[r].itemType==="object"?ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length>0&&(n[r].categoryName=t,ej.DashboardUtil.invokeMethod(n[r].callbackInstance,n[r].callbackMethod,[null,i+"_"+t,n[r]])):n[r].name!=="Name"&&this.setLabel(null,null,t,n[r],i))},n.prototype.isNullOrEmpty=function(n){return n===""||n===null},n.prototype.updatePropertyValue=function(n,t,i){var f,u,r,e,c,o;if(ej.isNullOrUndefined(n.itemType)||ej.isNullOrUndefined(n.categoryName)||ej.isNullOrUndefined(n.name))n.categoryName==="General"&&n.name==="Name"&&this.headerInput.val(i);else{if(n.itemType==="float")f=this.ejNumbericObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name],ej.isNullOrUndefined(f)||f.option("value",parseFloat(i));else if(n.itemType==="color")u=this.ejColorPickObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name],ej.isNullOrUndefined(u)||this.isNullOrEmpty(u.option("value"))&&this.isNullOrEmpty(ej.DashboardUtil.getColorCode(i))||u.option("value",ej.DashboardUtil.getColorCode(i));else if(n.itemType==="dropdown"){var s=-1,l=ej.isNullOrUndefined(n.valueList)?0:n.valueList.length,h=this.ejDropDownObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name];if(!ej.isNullOrUndefined(h)){for(r=0;r<l;r++)if(n.valueList[r]===i){s=r;break}h.option("selectedIndex",s)}}else n.itemType==="bool"?(e=this.ejCheckboxObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name],ej.isNullOrUndefined(e)||e.option("checked",i)):n.itemType==="link"?(c=ejDashboardDesigner.getInstance("ReportAction"),n.value=i,c.renderAction(null,t+"_"+n.categoryName,n)):n.itemType==="object"?ej.DashboardUtil.invokeMethod(n.callbackInstance,n.callbackMethod,[null,t+"_"+n.categoryName,n]):n.name!=="Name"?(o=this.ejMaskEditObj[this.id+"_"+t+"_"+n.categoryName+"_"+n.name],ej.isNullOrUndefined(o)||o.val(i)):this.headerInput.val(i);n.value=i}},n.prototype.populatePropertyItem=function(n,t,i,r,u,f){var s=0,o=[],e,h,c;for(f&&(o=[i],s=1),r=r.split(" ").join("").replace("&",""),e=0;e<s;e++)o[e].itemType==="float"?this.setNumber(n,t,r,o[e],!0,u):o[e].itemType==="color"?this.setColor(n,t,r,o[e],u):o[e].itemType==="dropdown"?this.setDropDown(n,t,r,o[e],u):o[e].itemType==="autocomplete"||(o[e].itemType==="bool"?(h=$.extend(!0,{},o[e]),h.valueList=["true","false"],this.setBoolean(n,t,r,o[e],u)):o[e].itemType==="link"?(c=ejDashboardDesigner.getInstance("ReportAction"),o[e].categoryName=r,c.renderAction(t,u+"_"+r,o[e])):o[e].itemType==="button"?this.setButton(n,t,r,o[e],u):o[e].itemType==="object"?(o[e].categoryName=r,ej.DashboardUtil.invokeMethod(o[e].callbackInstance,o[e].callbackMethod,[t,u+"_"+r,o[e]])):o[e].name!=="Name"&&this.setLabel(n,t,r,o[e],u))},n.prototype.setColor=function(n,t,i,r,u){var l,o,h,f;if(ej.isNullOrUndefined(t))this.updateItemVisibility(u,i,r.name,ej.isNullOrUndefined(r.isVisible)?!0:r.isVisible),o=this.ejColorPickObj[this.id+"_"+u+"_"+i+"_"+r.name],ej.isNullOrUndefined(o)||o.option("value",ej.DashboardUtil.getColorCode(r.value)),this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);else{var e=ej.buildTag("div","",{"margin-bottom":"15px",display:ej.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),c=ej.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),s=ej.buildTag("div.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});s.text(r.name);c.append(s);ej.isNullOrUndefined(r.displayName)||s.text(r.displayName);e.append(c);h=ej.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"3px"});f=ej.buildTag("input.e-reportdesigner-designer","",{},{id:this.id+"_"+u+"_"+i+"_"+r.name});h.append(f);f.ejColorPicker({value:ej.DashboardUtil.getColorCode(r.value),width:(this.calWidth-33)*57/100-15+"px",cssClass:"e-designer-ejwidgets-colorpicker e-designer-content-label",select:$.proxy(this.onValueChange,this,r,i,u),modelType:"palette",palette:"basicpalette"});this.ejColorPickObj[f.attr("id")]=f.data("ejColorPicker");e.append(h);t.append(e);l=e;this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)}},n.prototype.setButton=function(n,t,i,r,u){var l,e,s,o,h,f,c;ej.isNullOrUndefined(t)?(this.updateItemVisibility(u,i,r.name,ej.isNullOrUndefined(r.isVisible)?!0:r.isVisible),c=this.ejButtonObj[this.id+"_"+u+"_"+i+"_"+r.name],ej.isNullOrUndefined(c)||c.option("text",r.buttonText),this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)):(e=ej.buildTag("div","",{"margin-bottom":"15px",display:ej.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),s=ej.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),(ej.isNullOrUndefined(r.enableLabel)||$.parseJSON(r.enableLabel))&&(o=ej.buildTag("div.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),o.text(r.name),s.append(o),ej.isNullOrUndefined(r.displayName)||o.text(r.displayName)),e.append(s),h=ej.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_parent"}),f=ej.buildTag("button.e-dbrd-hand-cursor",r.buttonText,{},{id:this.id+"_"+u+"_"+i+"_"+r.name}),h.append(f),f.ejButton({width:(this.calWidth-33)*57/100-15+"px",height:"28px",showRoundedCorner:!1,size:"small",click:$.proxy(this.onButtonClick,this,r,i),cssClass:"e-designer-click e-designer-button e-reportdesigner-previewbtn"}),f.css({"background-color":"#0C8BE2","border-color":"#0C8BE2",color:"white"}),this.ejButtonObj[f.attr("id")]=f.data("ejButton"),e.append(h),t.append(e),l=e,this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1))},n.prototype.onButtonClick=function(n,t){var r=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),u=this.getPropertyElement(r.getPropertyPanelItems(),n.name,t,-1),i=$.extend(!0,{},u);i.categoryName=t;ej.DashboardUtil.invokeMethod(i.callbackInstance,i.callbackMethod,[i])},n.prototype.updateItemVisibility=function(n,t,i,r,u){var f=this.propertyContainer.find("#"+this.id+"_"+n+"_"+t+"_"+i+"_container"),e;f.css("display",r?"inline-block":"none");!ej.isNullOrUndefined(u)&&u&&this.propertyContainer.find("#"+this.id+"_"+n+"_"+t+"_"+i).css("display",r?"inline-block":"none");f.length>0&&(e=f.data("ejScroller"),ej.isNullOrUndefined(e)||e.refresh())},n.prototype.updateItemDisable=function(n,t,i,r,u){var f,e,o,s,h,c;n==="float"?(f=this.ejNumbericObj[this.id+"_"+t+"_"+i+"_"+r],ej.isNullOrUndefined(f)||(u?f.disable():f.enable())):n==="color"?(e=this.ejColorPickObj[this.id+"_"+t+"_"+i+"_"+r],ej.isNullOrUndefined(e)||(u?e.disable():e.enable())):n==="dropdown"?(o=this.ejDropDownObj[this.id+"_"+t+"_"+i+"_"+r],ej.isNullOrUndefined(o)||(u?o.disable():o.enable())):n==="bool"?(s=this.ejCheckboxObj[this.id+"_"+t+"_"+i+"_"+r],ej.isNullOrUndefined(s)||(u?s.disable():s.enable())):n==="button"?(h=$("#"+this.id+"_"+t+"_"+i+"_"+r),ej.isNullOrUndefined(h)||(u?ej.DashboardUtil.buttonEnable(h,!1):ej.DashboardUtil.buttonEnable(h,!0))):r!=="Name"&&(c=this.ejMaskEditObj[this.id+"_"+t+"_"+i+"_"+r],ej.isNullOrUndefined(c)||(u?c.attr("disabled","disabled"):c.removeAttr("disabled")))},n.prototype.updateItemOpacity=function(n,t,i,r,u){var f=this.propertyContainer.find("#"+this.id+"_"+t+"_"+i+"_"+r+"_container");f.length>0&&(u?f.addClass("e-dbrd-designer-ele-disabled"):f.hasClass("e-dbrd-designer-ele-disabled")&&f.removeClass("e-dbrd-designer-ele-disabled"))},n.prototype.updateCategoryVisibility=function(n,t,i){var r=n+"_"+t.split(" ").join("").replace("&","");i?this.jQHeaderRows[this.id+"_elementContainer_"+r]&&(this.jQHeaderRows[this.id+"_elementContainer_"+r].css("display","block").addClass("e-item-expand").removeClass("e-item-collapse"),this.jQHeaderRows[this.id+"_elementContainer_"+r].find(".e-header-row-icon").addClass("e-reportdesigner-minus").removeClass("e-reportdesigner-plus"),this.jQContainerRows[this.id+"_tableElement_"+r].css("display","block")):this.jQHeaderRows[this.id+"_elementContainer_"+r]&&(this.jQHeaderRows[this.id+"_elementContainer_"+r].css("display","none"),this.jQContainerRows[this.id+"_tableElement_"+r].css("display","none"))},n.prototype.setLabel=function(n,t,i,r,u){var l,o,h,f;if(ej.isNullOrUndefined(t))this.updateItemVisibility(u,i,r.name,ej.isNullOrUndefined(r.isVisible)?!0:r.isVisible),o=this.ejMaskEditObj[this.id+"_"+u+"_"+i+"_"+r.name],ej.isNullOrUndefined(o)||o.val(r.value),this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);else{var e=ej.buildTag("div","",{"margin-bottom":"15px",display:ej.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),c=ej.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),s=ej.buildTag("div.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});s.text(r.name);c.append(s);ej.isNullOrUndefined(r.displayName)||s.text(r.displayName);e.append(c);h=ej.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_parent"});f=ej.buildTag("input.e-textbox","",{height:"28px",width:(this.calWidth-33)*57/100-15+"px","box-sizing":"border-box"},{id:this.id+"_"+u+"_"+i+"_"+r.name,type:"text"});f.val(r.value);h.append(f);f.bind("blur",$.proxy(this.textFocusOut,this,r,i,u));f.bind("keyup",$.proxy(this.textKeyUp,this,r,i,u));this.ejMaskEditObj[f.attr("id")]=f;e.append(h);t.append(e);l=e;this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)}},n.prototype.textFocusOut=function(n,t,i){var r=this.ejMaskEditObj[this.id+"_"+i+"_"+t+"_"+n.name].val();ej.isNullOrUndefined(this.labelLastModifiedInfo)||this.labelLastModifiedInfo.item!==n||(this.labelLastModifiedInfo=null);this.onValueChange(n,t,i,{value:r})},n.prototype.textKeyUp=function(n,t,i,r){if(this.labelLastModifiedInfo={item:n,categoryName:t,elementType:i},r.keyCode===13){var u=this.ejMaskEditObj[this.id+"_"+i+"_"+t+"_"+n.name].val();this.onValueChange(n,t,i,{value:u})}},n.prototype.setBoolean=function(n,t,i,r,u){var l,s,h,e;if(ej.isNullOrUndefined(t))this.updateItemVisibility(u,i,r.name,ej.isNullOrUndefined(r.isVisible)?!0:r.isVisible),s=this.ejCheckboxObj[this.id+"_"+u+"_"+i+"_"+r.name],ej.isNullOrUndefined(s)||s.option("checked",r.value),this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1);else{var o=ej.buildTag("div","",{"margin-bottom":"15px",display:ej.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),c=ej.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),f=ej.buildTag("label.e-designer-fontfamily","",{"max-width":(this.calWidth-33)*47/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_childElement","for":this.id+"_"+u+"_"+i+"_"+r.name});f.text(r.name);c.append(f);ej.isNullOrUndefined(r.displayName)||f.text(r.displayName);o.append(c);f.addClass(ej.DashboardUtil.isExistTextWidth(f,!0)?"e-title-tip":"");h=ej.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"4px",border:"0px solid","border-color":"red"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_parent"});e=ej.buildTag("input","",{},{id:this.id+"_"+u+"_"+i+"_"+r.name,type:"checkbox"});h.append(e);e.ejCheckBox({checked:r.value,change:$.proxy(this.onValueChange,this,r,i,u),width:(this.calWidth-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});this.ejCheckboxObj[e.attr("id")]=e.data("ejCheckBox");o.append(h);l=o;t.append(o);this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)}},n.prototype.setObjectValues=function(n,t,i,r){var o,h,e,c,f;if(ej.isNullOrUndefined(n))this.updateItemVisibility("Card",t,i.name,ej.isNullOrUndefined(i.isVisible)?!0:i.isVisible),o=this.ejCheckboxObj[this.id+"_"+r+"_"+t+"_"+i.name],ej.isNullOrUndefined(o)||o.option("checked",i.value),this.updateItemDisable(i.itemType,"Card",t,i.name,ej.isNullOrUndefined(i.isDisable)?!1:i.isDisable?!0:!1),this.updateItemOpacity(i.itemType,"Card",t,i.name,ej.isNullOrUndefined(i.isDisable)?!1:i.isDisable);else{var a=void 0,u=ej.buildTag("div","",{"margin-bottom":"15px",display:ej.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.id+"_"+r+"_"+t+"_"+i.name+"_container"}),s=ej.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),l=ej.buildTag("label.e-designer-fontfamily","",{"max-width":(this.calWidth-33)*57/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis","margin-left":"8px"},{id:this.id+"_"+r+"_"+t+"_"+i.name+"_childElement","for":this.id+"_"+r+"_"+t+"_"+i.name});i.name==="ShowPrimaryValue"?l.text("Show"):s.text("");s.append(l);h=ej.buildTag("div","",{float:"right","margin-left":"3px","margin-top":"8.5px"});e=ej.buildTag("label.e-designer-fontfamily","",{"max-width":(this.calWidth-33)*57/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis","margin-left":"8px"},{id:this.id+"_"+r+"_"+t+"_"+i.name+"_childElement","for":this.id+"_"+r+"_"+t+"_"+i.name});e.text(i.name);h.append(e);ej.isNullOrUndefined(i.displayName)||e.text(i.displayName);u.append(s);c=ej.buildTag("div","",{display:"inline-block","margin-top":"4px",border:"0px solid","border-color":"red"},{id:this.id+"_"+r+"_"+t+"_"+i.name+"_parent"});f=ej.buildTag("input","",{},{id:this.id+"_"+r+"_"+t+"_"+i.name,type:"checkbox"});c.append(f);f.ejCheckBox({checked:i.value,change:$.proxy(this.onValueChange,this,i,t,r),width:(this.calWidth-33)*57/100-15+"px",cssClass:"e-designer-prop-checkbox"});this.ejCheckboxObj[f.attr("id")]=f.data("ejCheckBox");u.append(c);u.append(h);a=u;n.append(u);!ej.isNullOrUndefined(i.isDisable)&&i.isDisable?u.addClass("e-dbrd-designer-ele-disabled"):u.hasClass("e-dbrd-designer-ele-disabled")&&u.removeClass("e-dbrd-designer-ele-disabled")}},n.prototype.setNumber=function(n,t,i,r,u,f){var v,h,o,c,l,e,a,s;ej.isNullOrUndefined(t)?(this.updateItemVisibility(f,i,r.name,ej.isNullOrUndefined(r.isVisible)?!0:r.isVisible),h=this.ejNumbericObj[this.id+"_"+f+"_"+i+"_"+r.name],ej.isNullOrUndefined(h)||(h.option("value",parseFloat(r.value)),ej.isNullOrUndefined(r.interval)||h.option("incrementStep",r.interval)),this.updateItemDisable(r.itemType,f,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)):(o=ej.buildTag("div","",{"margin-bottom":"15px",display:ej.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+f+"_"+i+"_"+r.name+"_container"}),c=(this.calWidth-33)*57/200,c=c-12,l=ej.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),e=ej.buildTag("div.e-designer-fontfamily","",{"max-width":(this.calWidth-33)*47/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),e.text(r.name),l.append(e),ej.isNullOrUndefined(r.displayName)||e.text(r.displayName),o.append(l),e.addClass(ej.DashboardUtil.isExistTextWidth(e,!0)?"e-title-tip":""),a=ej.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red"},{id:this.id+"_"+f+"_"+i+"_"+r.name+"_parent"}),s=ej.buildTag("input","",{},{id:this.id+"_"+f+"_"+i+"_"+r.name}),a.append(s),s.ejNumericTextbox({value:parseFloat(r.value),showSpinButton:u,incrementStep:ej.isNullOrUndefined(r.interval)?1:r.interval,decimalPlaces:ej.isNullOrUndefined(r.decimalPlaces)?2:r.decimalPlaces,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",maxValue:ej.isNullOrUndefined(r.maximum)?20:r.maximum,minValue:ej.isNullOrUndefined(r.minimum)?0:r.minimum,change:$.proxy(this.onValueChange,this,r,i,f),width:c+"px"}),this.ejNumbericObj[s.attr("id")]=s.data("ejNumericTextbox"),o.append(a),t.append(o),v=o,this.updateItemDisable(r.itemType,f,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1))},n.prototype.setDropDown=function(n,t,i,r,u){var s=-1,w,a=ej.isNullOrUndefined(r.valueList)?0:r.valueList.length,h,f,e;if(ej.isNullOrUndefined(t)){if(this.updateItemVisibility(u,i,r.name,ej.isNullOrUndefined(r.isVisible)?!0:r.isVisible),h=this.ejDropDownObj[this.id+"_"+u+"_"+i+"_"+r.name],!ej.isNullOrUndefined(h)){for(h.option("dataSource",r.valueList),f=0;f<a;f++)if(e="",ej.isNullOrUndefined(r.value)||(e=r.value.toString()),r.valueList[f].toString()===e||!ej.isNullOrUndefined(r.valueList[f].value)&&r.valueList[f].value===e){s=f;break}h.option("selectedIndex",s)}this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)}else{var c=ej.buildTag("div","",{"margin-bottom":"15px",display:ej.isNullOrUndefined(r.isVisible)?"inline-block":r.isVisible?"inline-block":"none"},{id:this.id+"_"+u+"_"+i+"_"+r.name+"_container"}),v=ej.buildTag("div","",{width:(this.calWidth-33)*47/100+"px",float:"left","margin-left":"3px","margin-top":"8.5px"}),o=ej.buildTag("div.e-designer-fontfamily","",{"max-width":(this.calWidth-33)*47/100-15+"px","font-size":"12px",overflow:"hidden",float:"right","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"});o.text(r.name);v.append(o);ej.isNullOrUndefined(r.displayName)||o.text(r.displayName);c.append(v);o.addClass(ej.DashboardUtil.isExistTextWidth(o,!0)?"e-title-tip":"");var y=ej.buildTag("div","",{width:(this.calWidth-33)*57/100+"px",display:"inline-block","margin-top":"3px"}),l=ej.buildTag("input","",{},{id:this.id+"_"+u+"_"+i+"_"+r.name}),p=[];for(f=0;f<a;f++)e="",ej.isNullOrUndefined(r.value)||(e=r.value.toString()),r.valueList[f].toString()!==e&&(ej.isNullOrUndefined(r.valueList[f].value)||r.valueList[f].value!==e)||(s=f),p.push({text:ej.isNullOrUndefined(r.valueList[f].text)?r.valueList[f]:r.valueList[f].text,value:ej.isNullOrUndefined(r.valueList[f].value)?r.valueList[f]:r.valueList[f].value});y.append(l);l.ejDropDownList({dataSource:p,fields:{text:"text",value:ej.isNullOrUndefined(r.valueList[0].value)?"text":"value"},change:$.proxy(this.onValueChange,this,r,i,u),selectedIndex:s,cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control",width:(this.calWidth-33)*57/100-15+"px"});this.ejDropDownObj[l.attr("id")]=l.data("ejDropDownList");c.append(y);t.append(c);w=c;this.updateItemDisable(r.itemType,u,i,r.name,ej.isNullOrUndefined(r.isDisable)?!1:r.isDisable?!0:!1)}},n.prototype.validatePropertyValues=function(n,t,i,r){if(n.name==="Name"){if(this.headerInput.val()==="")return ej.DashboardUtil.showErrIndictor($("#"+this.id+"_propertyItemHeaderText_Name_error"),!0,"Name cannot be empty"),this.headerInput.addClass("e-designer-error"),!1}else if(n.itemType==="float"&&(parseFloat(n.minimum)>parseFloat(r.value)||parseFloat(n.maximum)<parseFloat(r.value)||ej.isNullOrUndefined(n.minimum)&&parseFloat(r.value)<0||ej.isNullOrUndefined(n.maximum)&&parseFloat(r.value)>20))return!1;return ej.DashboardUtil.showErrIndictor($("#"+this.id+"_propertyItemHeaderText_Name_error"),!1),this.headerInput.removeClass("e-designer-error"),!0},n.prototype.getPreviousValue=function(n,t,i){var r=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length,u=ejDashboardDesigner.getInstance("DesignPanel").selectedItems.length;return r>0&&r<2&&!ej.isNullOrUndefined(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue"))?ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue"):u>0&&r===0&&!ej.isNullOrUndefined(ejDashboardDesigner.getInstance("DesignPanel").selectedItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue"))?ejDashboardDesigner.getInstance("DesignPanel").selectedItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue"):n.value},n.prototype.setPreviousValue=function(n,t,i,r){var u=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems.length,f=ejDashboardDesigner.getInstance("DesignPanel").selectedItems.length;f>0&&u===0?ejDashboardDesigner.getInstance("DesignPanel").selectedItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue",ej.isNullOrUndefined(r.value)?ej.isNullOrUndefined(r.isChecked)?"":r.isChecked:r.value):u>0&&u<2&&ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0].data(this.id+"_"+i+"_"+t+"_"+n.name+"_previousValue",ej.isNullOrUndefined(r.value)?ej.isNullOrUndefined(r.isChecked)?"":r.isChecked:r.value)},n.prototype.itemNameChange=function(){this.onValueChange({name:"Name",value:this.activeProperty.Header},"General",this.activeProperty.Type,!1)},n.prototype.itemDescriptionChange=function(){this.onValueChange({name:"Description",value:this.activeProperty.Description},"General",this.activeProperty.Type,!1)},n.prototype.itemSubTitleChange=function(){this.onValueChange({name:"SubTitle",value:this.activeProperty.SubTitle},"General",this.activeProperty.Type,!1)},n.prototype.itemCommentChange=function(n,t){this.onValueChange({name:"Comment",value:this.activeProperty.Comment.value},"General",this.activeProperty.Type,t)},n.prototype.onValueChange=function(n,t,i,r){if(!ej.isNullOrUndefined(r)&&this.validatePropertyValues(n,t,i,r)){if(this.canUpdate){var u=this.getPreviousValue(n,t,i);n.name==="Name"&&this.propertyHeaderVal!==this.headerInput.val()?(this.updatePropertyChange(n.name,u,this.headerInput.val(),n,t,i),this.propertyHeaderVal=this.headerInput.val()):n.name==="Description"?this.updatePropertyChange(n.name,u,this.descriptionInput.val(),n,t):n.name==="SubTitle"&&this.updatePropertyChange(n.name,u,this.subHeaderInput.val(),n,t);n.name!=="Name"&&n.name!=="Description"&&n.name!=="SubTitle"&&this.isValueChanged(u,!ej.isNullOrUndefined(r)&&!ej.isNullOrUndefined(r.value)?r.value:ej.isNullOrUndefined(r.isChecked)?"":r.isChecked)&&this.updatePropertyChange(n.name,u,ej.isNullOrUndefined(r.value)?ej.isNullOrUndefined(r.isChecked)?"":r.isChecked:r.value,n,t)}this.setPreviousValue(n,t,i,r)}else this.canUpdate&&(this.canUpdate=!1,this.updatePropertyValue({name:n.name,itemType:n.itemType,valueList:n.valueList,categoryName:t},i,this.getPreviousValue(n,t,i)),this.canUpdate=!0)},n.prototype.isValueChanged=function(n,t){return n!==t},n.prototype.updatePanelSize=function(){this.resizeObj.isPropertyPanel=this.resizeObj.isDataAssign=!0;this.propertyPanelContainer.is(":visible")?(this.updateSize(),this.resizeObj.isPropertyPanel=!1):$("#"+this.dashboardDesigner._id+"_dataTabRootElement").is(":visible")&&(ejDashboardDesigner.getInstance("DataConfiguration").updateSize(),this.resizeObj.isDataAssign=!1)},n.prototype.updateSize=function(){this.isLoaded()&&(this.propertyPanelContainer.height($("#"+this.id+"_dataPanelContainer").height()-34+"px"),this.ejPanelScroller&&(this.ejPanelScroller.setModel({height:$("#"+this.id+"_dataPanelContainer").height()-34+"px"}),this.ejPanelScroller.refresh()))},n.prototype.updatePropertyChange=function(n,t,i,r,u,f){var h,o,s,e;if(ejDashboardDesigner.editManager.setMergeAction(!0),this.targetDesignArea&&this.targetDesignArea.length>0&&(this.designPanel.selectedReportItems.length<1||!ej.isNullOrUndefined(f)&&f==="Dashboard"))this.designPanel.updatePropertyChange(n,this.targetDesignArea,t,i,{name:r.name,itemType:r.itemType,valueList:r.valueList,categoryName:u});else if(!ej.isNullOrUndefined(this.targetItems)&&!ejDashboardDesigner.editManager.isPerformAction)for(h=this.targetItems.length,o=0;o<h;o++)s=ej.DashboardUtil.getWidgetInstance(this.targetItems[o]),e=$.extend(!0,{},r),e.categoryName=u,e.valueList=r.valueList,s.updatePropertyChange(n,t,i,e),s.getContainerInstance().updatePropertyChange(n,t,i,s,e);ej.DashboardUtil.getInstance().validateAndUpdateParameterColumn();ej.DashboardDesignerUtility.Serialization.notifyChange();ejDashboardDesigner.editManager.setMergeAction(!1)},n.prototype.updateCulture=function(n){var i=this.id,t;t=ej.DashboardDesigner.Locale[n]?ej.DashboardDesigner.Locale[n].propertyPanel:ej.DashboardDesigner.Locale["en-US"].propertyPanel;this.propertyHeaderText=t.headerText;$("#"+i+"_propertyPanelHeaderText").html(this.propertyHeaderText)},n}();window.ej.createObject("ej.DashboardDesignerUtility.PropertyPanel",InternalPropertyPanel,window);InternalPropertyGridItem=function(){function n(n,t,i,r,u){this.containerProperties=new ej.DashboardDesignerUtility.ContainerPropertyItem;this.propertyGridItems=this.getPropertyGridItems();this.linkingProperty=this.getLinkingProperty();this.containerSettingsProperty=this.getContainerSettingsProperty(u,t,i,r);this.filterSettingsProperty=this.getFilterSettingsProperty(n,t,i,r)}return n.prototype.getPropertyGridItems=function(){return{Header:"",SubTitle:"",Description:"",Type:"",Items:[]}},n.prototype.getLinkingProperty=function(){return{CategoryName:"Link",Items:[{name:"Link",value:"",category:"Item",itemType:"link",enableMode:LinkEnableMode.Row}]}},n.prototype.getContainerSettingsProperty=function(n,t,i,r){return this.containerProperties.getContainerSettingItems(n,t,i,r)},n.prototype.getFilterSettingsProperty=function(n,t,i,r){return this.containerProperties.getFilterSettingsItems(n,t,i,r)},n}();window.ej.createObject("ej.DashboardDesignerUtility.PropertyGridItem",InternalPropertyGridItem,window);InternalPSQLDataSource=function(){function n(){this.lastServerName="";this.connectionType="";this.itemType="";this.defaultPort="5432";this.datasource=ejDashboardDesigner.getInstance("DataSource");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.dataSourceLocale=this.dashboardDesigner.locale.dataSource;this.field={id:"id",text:"text",value:"value"};this.extractionMode=ej.DashboardDesignerUtility.Serialization.enumToString(ExtractionMode,ExtractionMode.Live)}return Object.defineProperty(n,"PSQLDataSource",{get:function(){return(this.psqldataSource===null||this.psqldataSource===undefined)&&(this.psqldataSource=new ej.DashboardDesignerUtility.PSQLDataSource),this.psqldataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n,"PSQLReconnectDataSource",{get:function(){return(this.psqlReconnectDataSource===null||this.psqlReconnectDataSource===undefined)&&(this.psqlReconnectDataSource=new ej.DashboardDesignerUtility.PSQLDataSource),this.psqlReconnectDataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n,t,i){this.connectionType=t;this.itemType=i;n.find("#"+this.id+this.connectionType+"_psql_datasource").length>0?this.resetConfiguration():(this.psqlConfig=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType+"_psql_datasource"}),n.append(this.psqlConfig),this.targetTag=n,this.renderBasicPanel());this.itemType==="e-redshift"?(this.targetTag.find("#"+this.id+this.connectionType+"_redshift_dbname_tr").show(),this.targetTag.find("#"+this.id+this.connectionType+"_psql_dbname_tr").hide(),this.targetTag.find("#"+this.id+this.connectionType+"_psql_refresh_tr").hide(),this.targetTag.find("#"+this.id+this.connectionType+"_psql_extrat_mode_tr").hide()):(this.targetTag.find("#"+this.id+this.connectionType+"_redshift_dbname_tr").hide(),this.targetTag.find("#"+this.id+this.connectionType+"_psql_dbname_tr").show(),this.targetTag.find("#"+this.id+this.connectionType+"_psql_extrat_mode_tr").show());this.showConfiguration(!0)},n.prototype.renderBasicPanel=function(){var t=this.getRefreshSettingsJson(),n;this.basicPanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType+"_psql_basicpanel"});n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+this.connectionType+"_psql_basic_config"});this.psqlConfig.append(this.basicPanel);this.basicPanel.append(n);this.datasource.renderTextBoxItem(this.dataSourceLocale.serverNameText,this.id+this.connectionType+"_psql_servername",!1,n,426);this.datasource.renderNumericItem(this.dataSourceLocale.port,this.id+this.connectionType+"_psql_port",n,null,this,this.dsName,!0,"439px");this.datasource.renderTextBoxItem(this.dataSourceLocale.userName,this.id+this.connectionType+"_psql_username",!1,n,426);this.datasource.renderTextBoxItem(this.dataSourceLocale.passWord,this.id+this.connectionType+"_psql_passwd",!0,n,426);this.dashboardDesigner.intermediateDBStatus||this.renderExtractionMode(this.dataSourceLocale.mode,this.id+this.connectionType+"_psql_extrat_mode",n,426);this.datasource.renderExtractModeMessageItem(this.dashboardDesigner.locale.dataSource.extractModeMessage.replace("{0}","50000"),this.id+this.connectionType+"_psql_extract_message",n);this.datasource.renderTextBoxItem(this.dataSourceLocale.dataBaseText,this.id+this.connectionType+"_redshift_dbname",!1,n,426);this.datasource.renderTextBoxItem(this.dataSourceLocale.dataBaseText,this.id+this.connectionType+"_psql_dbname",!1,n,426);this.datasource.renderDropDownItem("Refresh Settings",this.id+this.connectionType+"_psql_refresh",n,t,this.field,"0");this.psqlServer=this.targetTag.find("#"+this.id+this.connectionType+"_psql_servername");this.psqlUsrName=this.targetTag.find("#"+this.id+this.connectionType+"_psql_username");this.psqlDatabase=this.targetTag.find("#"+this.id+this.connectionType+"_psql_dbname");this.redshiftDatabase=this.targetTag.find("#"+this.id+this.connectionType+"_redshift_dbname");this.psqlPasswrd=this.targetTag.find("#"+this.id+this.connectionType+"_psql_passwd");this.refreshIntervel=this.targetTag.find("#"+this.id+this.connectionType+"_psql_refresh");this.psqlPasswrdTag=this.targetTag.find("#"+this.id+this.connectionType+"_psql_passwd_tr");this.psqlUsrNameTag=this.targetTag.find("#"+this.id+this.connectionType+"_psql_username_tr");this.refreshIntervelTag=this.targetTag.find("#"+this.id+this.connectionType+"_psql_refresh_tr");this.extractMessageTag=$("#"+this.id+this.connectionType+"_psql_extract_message_tr");this.portData=this.targetTag.find("#"+this.id+this.connectionType+"_psql_port").data("ejNumericTextbox");this.portData.option("value",this.defaultPort);this.port=this.targetTag.find("#"+this.id+this.connectionType+"_psql_port");this.portTag=this.targetTag.find("#"+this.id+this.connectionType+"_psql_port_tr");this.ejSqlAutoComp=this.psqlServer.data("ejAutocomplete");this.dsNameId=this.id+this.connectionType+"_datasource_dsname";this.dsName=$("#"+this.dsNameId).val();this.wiredEvents();this.refreshIntervelTag.css("display","none");this.extractMessageTag.css("display","none")},n.prototype.renderExtractionMode=function(n,t,i){var r=ej.buildTag("tr","",{},{id:t+"_tr"}),u=ej.buildTag("td.e-designer-data-mode-td","",{},{unselectable:"on"});r.append(u);i.append(r);var s=ej.buildTag("label.editLabel e-designer-title-label",n,{width:"100px",height:"100%",float:"left","box-sizing":"border-box","padding-left":"5px"},{id:this.id+this.connectionType+"_psql_basicpanel_extractMode"}),f=ej.buildTag("div","",{width:"calc(100% - 100px)",height:"100%",float:"right"},{id:this.id+this.connectionType+"_psql_basicpanel_extractMode"}),e=ej.buildTag("div","",{width:"50%",height:"100%",float:"left"},{id:this.id+this.connectionType+"_psql_basicpanel_extractMode_live"}),o=ej.buildTag("div","",{width:"50%",height:"100%",float:"left"},{id:this.id+this.connectionType+"_psql_basicpanel_extractMode_extract"});f.append(e,o);u.append(s,f);this.renderRadioItem(this.dashboardDesigner.locale.dataSource.live,this.id+this.connectionType+"_psql_extract_mode_live","extractmode",e,!0);this.renderRadioItem(this.dashboardDesigner.locale.dataSource.extract,this.id+this.connectionType+"_psql_extract_mode_extract","extractmode",o,!1)},n.prototype.renderRadioItem=function(n,t,i,r,u){var f=ej.buildTag("input","",{},{type:"radio",name:i,id:t});r.append(f);f.ejRadioButton({checked:u,change:$.proxy(this.extractModeChange,this,n),text:n})},n.prototype.extractModeChange=function(n,t){var i=t.model.text===this.dashboardDesigner.locale.dataSource.live?ExtractionMode.Live:ExtractionMode.Extract;this.extractionMode=ej.DashboardDesignerUtility.Serialization.enumToString(ExtractionMode,i);this.extractionMode.toLowerCase()==="live"?(this.refreshIntervelTag.css("display","none"),this.extractMessageTag.css("display","none")):(this.refreshIntervelTag.css("display","table-row"),this.extractMessageTag.css("display","table-row"));this.datasource.updateDSConfigContainer()},n.prototype.getRefreshSettingsJson=function(){var t=ejDashboardDesigner.getInstance("DashboardDesigner").previewFeaturesJson,n=ej.DashboardUtil.getInstance().GetPreviewFeatureValue(t,PreviewFeatureName.RefreshSettings);return ej.isNullOrUndefined(n)?[{id:"never",text:"Never",value:"Never"},{id:"1hours",text:"1 Hour",value:"OneHours"},{id:"6hours",text:"6 Hours",value:"SixHours"},{id:"12hours",text:"12 Hours",value:"TwelveHours"},{id:"24hours",text:"24 Hours",value:"TwentyFourHours"},{id:"1week",text:"1 Week",value:"OneWeek"},{id:"1month",text:"1 Month",value:"OneMonth"}]:n},n.prototype.inputFocus=function(n,t){var i=ej.isNullOrUndefined(t)?null:$(t.currentTarget).attr("id");this.hideValidationMsg(i)},n.prototype.wiredEvents=function(){this.psqlServer.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.psqlUsrName.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.psqlDatabase.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.redshiftDatabase.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.psqlPasswrd.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.port.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.psqlServer.on("focusin",$.proxy(this.psqlServerFocusIn,this));this.psqlServer.on("focusout",$.proxy(this.psqlServerFocusOut,this))},n.prototype.unWiredEvents=function(){this.psqlServer.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.psqlUsrName.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.psqlDatabase.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.redshiftDatabase.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.psqlPasswrd.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.port.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.psqlServer.off("focusin",$.proxy(this.psqlServerFocusIn,this));this.psqlServer.off("focusout",$.proxy(this.psqlServerFocusOut,this))},n.prototype.destroy=function(){this.unWiredEvents()},n.prototype.hideValidationMsg=function(n){(ej.isNullOrUndefined(this.psqlServer)||this.psqlServer.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.psqlServer.attr("id"),!1);(ej.isNullOrUndefined(this.psqlDatabase)||this.psqlDatabase.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.psqlDatabase.attr("id"),!1);(ej.isNullOrUndefined(this.redshiftDatabase)||this.redshiftDatabase.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.redshiftDatabase.attr("id"),!1);(ej.isNullOrUndefined(this.psqlUsrName)||this.psqlUsrName.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.psqlUsrName.attr("id"),!1);(ej.isNullOrUndefined(this.psqlPasswrd)||this.psqlPasswrd.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.psqlPasswrd.attr("id"),!1);(ej.isNullOrUndefined(this.port)||this.port.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.port.attr("id"),!1)},n.prototype.resetConfiguration=function(){var n,t;this.hideValidationMsg();this.psqlUsrName.val("");this.psqlPasswrd.val("");this.psqlServer.val("");this.portData.option("value",this.defaultPort);this.psqlDatabase.val("");this.redshiftDatabase.val("");this.lastServerName="";n=this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_psql_extract_mode_live").data("ejRadioButton");ej.isNullOrUndefined(n)||n.option("checked",!0);t=this.refreshIntervel.data("ejDropDownList");ej.isNullOrUndefined(t)||t.selectItemByValue("Never")},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.ServerName=t.ServerName;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName=t.Username;n.ConnectionProperties.PassWord=t.Password;n.ConnectionProperties.Port=t.Port;n.ConnectionProperties.Database=t.Database;n.SecurityType=t.SecurityType;n.Name=t.Name;n.ServerName=t.ServerName;n.RefreshInterval=t.RefreshInterval;n.Mode=t.Mode;n.Mode.toLowerCase()!=="live"||ej.isNullOrUndefined(n.ExtractionParams)||(n.ExtractionParams=null)},n.prototype.UpdateDataSourceInfo=function(n,t){this.UpdateDSInfo(n,t)},n.prototype.editConfiguration=function(n,t){t.ConnectionProperties.DataProvider==="Redshift"?this.renderConfiguration(n,"_editConnection","e-redshift"):this.renderConfiguration(n,"_editConnection");t&&(t.ConnectionProperties.IsDesignState||(this.psqlUsrName.val(t.ConnectionProperties.UserName),this.psqlServer.val(t.ConnectionProperties.ServerName),this.portData.option("value",t.ConnectionProperties.Port),t.ConnectionProperties.DataProvider==="Redshift"?this.redshiftDatabase.val(t.ConnectionProperties.Database):this.psqlDatabase.val(t.ConnectionProperties.Database),ej.isNullOrUndefined(t.Mode)||(this.setExtractMode(t.Mode),t.Mode.toLowerCase()!=="extract"||ej.isNullOrUndefined(t.RefreshInterval)||this.setRefreshInterval(t.RefreshInterval))));this.hideValidationMsg()},n.prototype.setRefreshInterval=function(n){this.refreshIntervel.data("ejDropDownList").selectItemByValue(n)},n.prototype.setExtractMode=function(n){var t=this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_psql_extract_mode_"+n.toLowerCase()).data("ejRadioButton");t.option("checked",!0);ej.isNullOrUndefined(n)||(this.extractionMode=n)},n.prototype.showConfiguration=function(n){this.psqlConfig.css("display",n?"table-row":"none");this.psqlConfig.children().show()},n.prototype.getDatabaseVal=function(){return this.psqlDatabase.val()},n.prototype.getDatasourceInfo=function(n,t,i){var r=!0,u="",f="",h=!0,c="Integrated",l="Never";this.hideValidationMsg(i);var e="",o=this.itemType==="e-redshift"?this.redshiftDatabase.val():this.getDatabaseVal(),s=this.portData.option("value");return(o.length===0&&(this.psqlDatabase.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.psqlDatabase.attr("id"),!0,this.dataSourceLocale.specifyDatabaseName),r=!1),o.length===0&&(this.redshiftDatabase.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.redshiftDatabase.attr("id"),!0,this.dataSourceLocale.specifyDatabaseName),r=!1),(this.port.attr("id")===i||ej.isNullOrUndefined(i))&&(ej.isNullOrUndefined(s)||s.length===0)&&(this.datasource.showValidationMsg(this.port.attr("id"),!0,this.dataSourceLocale.specifyPortNumber),r=!1),e=this.psqlServer.val(),u=this.psqlUsrName.val(),f=this.psqlPasswrd.val(),c="DataBase",h=!1,e.length===0&&(this.psqlServer.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.psqlServer.attr("id"),!0,this.dataSourceLocale.specifyServerName),r=!1),u.length===0&&(this.psqlUsrName.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.psqlUsrName.attr("id"),!0,this.dataSourceLocale.specifyUserName),r=!1),f.length===0&&(this.psqlPasswrd.attr("id")===i||ej.isNullOrUndefined(i))&&(this.datasource.showValidationMsg(this.psqlPasswrd.attr("id"),!0,this.dataSourceLocale.specifyPassword),r=!1),this.extractionMode.toLowerCase()!=="live"&&(l=this.refreshIntervel.data("ejDropDownList").getSelectedValue()),r)?{Name:n,Provider:this.itemType==="e-redshift"?"Redshift":"PostgreSQL",IsIntegrated:h,SecurityType:c,IsDesignState:!1,Username:u,Password:f,Port:s,Database:o,ServerName:e,Mode:this.extractionMode,RefreshInterval:l}:null},n.prototype.buildConnection=function(n,t,i){var f,r,e,u,o;if(this.datasource.isEdit){for(f="",r=this.datasource.getConStringArgs(i.ConnectionProperties.ConnectString),r.Server.value&&(r.Server.value=n),r.Database.value&&(r.Database.value=t),e=Object.keys(r),u=0;u<e.length;u++)o=r[e[u]],f+=o.field+"="+o.value+";";return f}return"Server="+n+";Database="+t+";"},n.prototype.psqlDBfocus=function(n){var t,i,o;if(!(n.model.dataSource&&n.model.dataSource.length>0)&&!this.isPostBackDB&&(t="",t=this.psqlServer.val(),i=this.portData.option("value"),t)){var r="",u="",f=!0,e="Integrated";r=this.psqlUsrName.val();u=this.psqlPasswrd.val();f=!1;e="DataBase";this.isPostBackDB=!0;o={Name:"",Provider:this.itemType==="e-redshift"?"Redshift":"PostgreSQL",IsIntegrated:f,SecurityType:e,Username:ej.DashboardUtil.encryptData(r),Password:ej.DashboardUtil.encryptData(u),Port:i,ServerName:ej.DashboardUtil.encryptData(t),Mode:this.extractionMode};ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.dataBases,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.dataBases,datasource:o})},{fnction:$.proxy(this.loadpsqlDB,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!0)}},n.prototype.showLoadingIndicator=function(){$("#"+this.id+this.connectionType+"_psql_dbname_dropdown>span").removeClass("e-search");$("#"+this.id+this.connectionType+"_psql_dbname_dropdown>span").addClass("e-load").addClass("e-input");$("#"+this.id+this.connectionType+"_psql_dbname_dropdown>span").css("background-position","center")},n.prototype.hideLoadingIndicator=function(){$("#"+this.id+this.connectionType+"_psql_dbname_dropdown>span").removeClass("e-input").removeClass("e-load");$("#"+this.id+this.connectionType+"_psql_dbname_dropdown>span").addClass("e-search")},n.prototype.loadpsqlDB=function(n){var r,u,i,t;if(n.Error)r=ej.isNullOrUndefined(n.Message)?n.Message:n.Message.replace("Sf_Exception - ",""),ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.alertDialog,r,IconType.errors,AlertType.Alert,!1,null);else if(n&&n!=="Not Found")for(u=[],i=JSON.parse(n),t=0;t<i.length;t++)u.push(i[t].DataBase);this.isPostBackDB=!1},n.prototype.psqlServerFocusIn=function(){this.lastServerName=this.psqlServer.val()},n.prototype.psqlServerFocusOut=function(){var n="";n=this.psqlServer.val();this.lastServerName!==n&&this.psqlDatabase.val("")},n.prototype.psqlServerFocus=function(n){if(this.lastServerName=this.psqlServer.val(),!(n.model.dataSource&&n.model.dataSource.length>0)&&!this.isPostBackServer){this.isPostBackServer=!0;var t={Name:"",Provider:this.itemType==="e-redshift"?"Redshift":"PostgreSQL",IsIntegrated:!0,SecurityType:"Integrated",Username:"",Password:"",ServerName:"",ConnectionString:""};ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.serverInstance,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.serverInstance,datasource:t})},{fnction:$.proxy(this.loadpsqlServers,this)})}},n.prototype.loadpsqlServers=function(n){var i,r,t;if(n&&n!=="Not Found"){for(i=[],r=JSON.parse(n),t=0;t<r.length;t++)i.push(r[t].ServerName);this.ejSqlAutoComp.setModel({dataSource:i})}this.isPostBackServer=!1},n}();window.ej.createObject("ej.DashboardDesignerUtility.PSQLDataSource",InternalPSQLDataSource,window);InternalQueryExpression=function(){function n(){this.id=null;this.oldVal="";this.oldExpName="";this.queryExp=[];this.tempExp=[];this.provider="";this.listContainer=null;this.expLiTag=null;this.bodyContainer=null;this.textBox=null;this.textArea=null;this.expressionContainer=null;this.addBtnTag=null;this.saveBtnTag=null;this.footerTag=null;this.columnList=0;this.expWaterMark=ejDashboardDesigner.getInstance("DashboardDesigner").locale.queryExpressionDialog.QueryExpression;this.successMessageLocale=ejDashboardDesigner.getInstance("DashboardDesigner").locale.queryExpressionDialog.successMessageNotification;this.nameWaterMark="Expression Name";this.isAdd=!1;this.ejFunctionDropdown=null;this.ejColumnDropdown=null;this.ejFunctionList=null;this.ejColumnList=null;this.ejSaveBtn=null;this.ejExpDialog=null;this.ejIndicator=null;this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.id=this.queryDesigner.id;this.provider="SQL";this.renderQueryExpression();this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner")}return Object.defineProperty(n,"QueryExpression",{get:function(){return(this.queryExpression===null||this.queryExpression===undefined)&&(this.queryExpression=new ej.DashboardDesignerUtility.QueryExpression),this.queryExpression},enumerable:!0,configurable:!0}),n.prototype.renderQueryExpression=function(){var y=ejDashboardDesigner.getInstance("DashboardDesigner"),u=ej.buildTag("div.e-userselect","",{},{id:this.id+"_exp_designer"}),t=ej.buildTag("div","",{},{id:this.id+"_exp_designer_div"}),n,f;u.append(t);var p=ej.buildTag("table.e-querydesigner-exp-table","",{},{unselectable:"on"}),w=ej.buildTag("tr","",{}),b=ej.buildTag("td.e-querydesigner-exp-separator e-querydesigner-exp-td","",{"font-size":"13px"},{}),k=ej.buildTag("td","",{"margin-left":"12px"},{});t.append(p);p.append(w);w.append(b).append(k);n=ej.buildTag("div","",{width:"175px",height:"460px"});f=this.expressionContainer=ej.buildTag("div","",{"margin-left":"10px"},{id:this.id+"_exp_designer_container_exp"});b.append(n);k.append(f);var e=ej.buildTag("table.e-querydesigner-exp-table","",{width:"623px"},{unselectable:"on"}),d=ej.buildTag("tr","",{width:"590px"}),g=ej.buildTag("td","",{}),oi=ej.buildTag("label.e-designer-title-label","Name",{},{id:this.id+"_exp_designer_exp_name"}),nt=ej.buildTag("tr","",{width:"590px"}),tt=ej.buildTag("td","",{}),o=this.textBox=ej.buildTag("input.e-textbox e-designer-textbox","",{height:"20px",width:"240px","margin-top":"2px","margin-bottom":"5px"},{type:"text",id:this.id+"_exp_designer_textBox",spellcheck:"false"});g.append(oi);d.append(g);tt.append(o);nt.append(tt);var it=ej.buildTag("tr","",{height:"100px",width:"590px"}),rt=ej.buildTag("tr","",{width:"590px"}),ut=ej.buildTag("td","",{}),si=ej.buildTag("label.e-designer-title-label","Expression",{},{id:this.id+"_exp_designer_trgt_name"});ut.append(si);rt.append(ut);var ft=ej.buildTag("td","",{"font-size":"13px"},{}),s=this.textArea=ej.buildTag("textarea.e-textarea e-designer-textarea","",{height:"90px",width:"593px","margin-top":"6px"},{id:this.id+"_exp_designer_textarea",spellcheck:"false"}),et=ej.buildTag("tr","",{height:"255px",width:"590px"}),ot=ej.buildTag("td","",{}),st=ej.buildTag("table.e-querydesigner-exp-innertable","",{height:"250px",width:"590px","margin-top":"6px","margin-bottom":"2px"}),ht=ej.buildTag("tr","",{height:"35px",width:"590px"}),ct=ej.buildTag("td","",{}),hi=ej.buildTag("span.e-designer-title-label","Functions",{},{}),lt=ej.buildTag("div","",{"margin-top":"6px",width:"210px"},{}),h=ej.buildTag("input","",{"margin-top":"5px"},{id:this.id+"_exp_designer_options"}),ci=ej.buildTag("div","",{},{id:this.id+"_exp_designer_option_div"}),at=ej.buildTag("td","",{}),li=ej.buildTag("div","",{height:"25px",margin:"25px 10px 0px -3px","border-left":"1px solid rgba(227, 227, 227, 1)"},{});at.append(li);var vt=ej.buildTag("td","",{}),ai=ej.buildTag("span.e-designer-title-label","Column Settings",{"margin-left":"6px"},{}),yt=ej.buildTag("div","",{"margin-top":"6px",width:"199px","margin-left":"6px"},{}),c=ej.buildTag("input","",{height:"35px",width:"190px"},{id:this.id+"_exp_designer_data"}),vi=ej.buildTag("div","",{},{id:this.id+"_exp_designer_data_div"}),yi=ej.buildTag("td","",{height:"35px"}),pt=ej.buildTag("tr","",{width:"590px"}),i=ej.buildTag("td","",{width:"210px"},{}),wt=ej.buildTag("td","",{}),pi=ej.buildTag("div","",{height:"200px",margin:"-10px 10px 0px -3px","border-left":"1px solid rgba(227, 227, 227, 1)"},{});wt.append(pi);var r=ej.buildTag("td","",{width:"205px"},{}),bt=ej.buildTag("td","",{height:"190px"}),wi=this.functionNoDataContainer=ej.buildTag("div.e-querydesigner-function-nodata e-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_function_nodata_container"}).text(y.locale.queryExpressionDialog.NoResultFound),kt=ej.buildTag("div.e-querydesigner-function-search","",{width:"188px"},{id:this.id+"_div_functions_search"}),dt=ej.buildTag("div.e-option-list","",{width:"205px","margin-top":"1px"},{}),bi=this.columnNoDataContainer=ej.buildTag("div.e-querydesigner-column-nodata e-designer-empty-msg","",{width:"188px",height:"135px"},{id:this.id+"_column_nodata_container"}).text(y.locale.queryExpressionDialog.NoResultFound),gt=ej.buildTag("div.e-querydesigner-column-search","",{width:"188px"},{id:this.id+"_div_columnsettings_search"}),l=ej.buildTag("ul","",{},{id:this.id+"_exp_designer_option_list"}),ni=ej.buildTag("div.e-data-list","",{width:"199px","margin-left":"6px","margin-top":"1px"},{}),a=ej.buildTag("ul","",{},{id:this.id+"_exp_designer_data_list"}),ti=ej.buildTag("div.e-designer-cursor","",{height:"200px",width:"180px","margin-right":"10px"},{id:this.id+"_cat_desc"}),ki=ej.buildTag("div","",{height:"5px"},{}),di=ej.buildTag("div.e-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_desc_heading"}),gi=ej.buildTag("div","",{"text-align":"justify",height:"auto","font-size":"12px","margin-top":"8px"},{id:this.id+"_exp_designer_desc_content"}),nr=ej.buildTag("div","",{height:"12px"},{}),tr=ej.buildTag("div.e-designer-title-label","",{height:"auto"},{id:this.id+"_exp_designer_example_heading"}),ir=ej.buildTag("div","",{float:"left","word-wrap":"break-word","margin-top":"8px",height:"auto","font-size":"12px",width:"190px"},{id:this.id+"_exp_designer_example_content"}),ii=this.addBtnTag=ej.buildTag("button.center-align e-dbrd-hand-cursor","Add",{float:"left"},{id:this.id+"_exp_designer_add_btn",title:"Add"}),rr=ej.buildTag("span.success-message",this.successMessageLocale,{color:"#008000",float:"left","font-size":"13px","margin-left":"5px","margin-top":"2px",display:"none"},{id:this.id+"_exp_success_message"}),ri=this.saveBtnTag=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_exp_designer_save_btn"}),ui=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_exp_designer_close_btn"}),v=this.bodyContainer=ej.buildTag("div.e-lv e-js e-parentlv e-dbrd-designer-scroller e-dbrd-control","",{width:"100%",height:n.height(),display:"block",position:"relative"},{id:this.id+"_exp_designer_bodyContainer"}),fi=ej.buildTag("div","",{},{}),ei=this.listContainer=ej.buildTag("div.e-list-container e-js e-widget e-reportdesigner-dataset","",{"border-top-width":"1px",padding:"3px"},{id:this.id+"_div_expList"}),ur=this.expLiTag=ej.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"},{id:this.id+"_query_exp_li_container"});ei.append(ur);fi.append(ei);v.append(fi);n.append(v);ft.append(s);it.append(ft);e.append(d).append(nt).append(rt).append(it);ht.append(yi).append(ct).append(at).append(vt);ct.append(hi).append(lt);lt.append(h).append(ci);vt.append(ai).append(yt);yt.append(c).append(vi);st.append(ht).append(pt);ot.append(st);et.append(ot);e.append(et);i.append(kt);i.append(dt);i.append(wi);dt.append(l);r.append(gt);r.append(ni);r.append(bi);ni.append(a);bt.append(ti);ti.append(ki).append(di).append(gi).append(nr).append(tr).append(ir);pt.append(bt).append(i).append(wt).append(r);f.append(e);u.ejDialog({width:"auto",height:"auto",minWidth:"310px",minHeight:"215px",title:"Expression Designer",zIndex:1e3,beforeClose:$.proxy(this.closeExpDialog,this),enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner e-query-expression",enableModal:!0,close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.footerTag=$("#"+this.id+"_exp_designer_foot");this.footerTag.append(ii).append(rr).append(ui).append(ri);h.ejDropDownList({targetID:this.id+"_exp_designer_option_div",dataSource:[],popupHeight:"150px",minPopupWidth:"197px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-designer-drpdown-selection e-dbrd-control",width:"190px",height:"28px",change:$.proxy(this.renderFunctionList,this)});c.ejDropDownList({targetID:this.id+"_exp_designer_data_div",popupHeight:"150px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-designer-drpdown-selection e-dbrd-control",minPopupWidth:"197px",fields:{id:"id",text:"name"},dataSource:[],width:"190px",height:"28px",change:$.proxy(this.renderColumnList,this)});l.ejListBox({dataSource:[],height:"155px",change:$.proxy(this.optionClick,this),showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-list-selection e-dbrd-control",width:"190px"});a.ejListBox({dataSource:[],height:"155px",showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-list-selection e-dbrd-control",width:"190px"});ii.ejButton({showRoundedCorner:!1,size:"mini",width:"80px",height:"28px",text:"Add",contentType:ej.ContentType.TextAndImage,cssClass:"e-designer-addbtn",prefixIcon:"e-icon e-plus e-designer-plus-icon",click:$.proxy(this.addExpression,this)});ui.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-cancelbtn",text:"Close",click:$.proxy(this.closeExpression,this)});ri.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-okbtn",text:"Save",click:$.proxy(this.saveExpression,this)});v.ejScroller({scrollerSize:9,height:n.height(),enableTouchScroll:!0,autoHide:!0,buttonSize:14});t.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});this.ejFunctionDropdown=h.data("ejDropDownList");this.ejColumnDropdown=c.data("ejDropDownList");this.ejFunctionList=l.data("ejListBox");this.ejColumnList=a.data("ejListBox");this.ejSaveBtn=this.saveBtnTag.data("ejButton");this.ejExpDialog=u.data("ejDialog");this.ejIndicator=t.data("ejWaitingPopup");s.bind("change keyup paste",$.proxy(this.txtExpChanged,this));o.bind("change keyup paste",$.proxy(this.txtNameChanged,this));ej.DashboardUtil.txtWaterMark(s,this.expWaterMark);ej.DashboardUtil.txtWaterMark(o,this.nameWaterMark);this.wiredEvents();this.renderAutocomplete(kt,!0);this.renderAutocomplete(gt,!1)},n.prototype.closeDialog=function(){this.resetSearchBox()},n.prototype.renderAutocomplete=function(n,t){var r=ej.buildTag("table.e-querydesigner-toolbar-table","",{width:"100%"}),u=$("<tr/>"),f=$("<td/>"),e=ej.buildTag("span.e-atc e-widget","",{width:"100%",height:"28px"},{}),i=ej.buildTag("span.e-in-wrap e-box e-padding e-reportdesigner-widget-autocomplete","",{},{}),h=this.expSearch=ej.buildTag("input.e-autocomplete e-reportdesigner-widget-watermark e-reportdesigner-atc-boxshadow e-js e-input","",{},{type:"text",placeholder:"Search",id:t?this.id+"_function_search":this.id+"_column_search"}),o=this.expSearchIcon=ej.buildTag("span.e-select e-reportdesigner-widget-autocomplete e-search-area","",{width:"24px",height:"30px"},{id:t?this.id+"_function_search-icon":this.id+"_column_search-icon"}),s;if(o.append(ej.buildTag("span.e-headericon e-reportdesigner-search","",{display:"table-cell"})),i.append(o),i.append(h),e.append(i),s=ej.buildTag("span.e-select e-reportdesigner-widget-select e-reportdesigner-widget-autocomplete","",{height:"30px"},{id:this.id+"_column_widgetClose"}),s.append("<span class='e-headericon e-reportdesigner-widget-left'/>"),f.append(e),u.append(f),r.append(u),n.append(r),this.functionSearchBox=this.expressionContainer.find("#"+this.id+"_function_search"),this.columnSearchBox=this.expressionContainer.find("#"+this.id+"_column_search"),this.functionSearchIcon=this.expressionContainer.find(".e-querydesigner-function-search .e-headericon"),this.functionListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_option_list"),this.columnSearchIcon=this.expressionContainer.find(".e-querydesigner-column-search .e-headericon"),this.columnListbox=this.expressionContainer.find("#"+this.id+"_exp_designer_data_list"),this.functionListTd=this.expressionContainer.find(".e-option-list"),this.columnListTd=this.expressionContainer.find(".e-data-list"),t){this.expSearch.on("keyup",$.proxy(this.onSearchText,this,this.functionSearchIcon,this.functionListbox,!0));this.expSearch.on("blur",$.proxy(this.onSearchBlur,this,this.functionSearchIcon,this.functionListbox));this.expSearchIcon.on("click",$.proxy(this.onSearchCloseClick,this,this.functionSearchIcon,this.functionListbox,this.expSearch,!0))}else{this.expSearch.on("keyup",$.proxy(this.onSearchText,this,this.columnSearchIcon,this.columnListbox,!1));this.expSearch.on("blur",$.proxy(this.onSearchBlur,this,this.columnSearchIcon,this.columnListbox));this.expSearchIcon.on("click",$.proxy(this.onSearchCloseClick,this,this.columnSearchIcon,this.columnListbox,this.expSearch,!1))}},n.prototype.resetSearchBox=function(){this.functionSearchBox.val("");this.columnSearchBox.val("");this.functionListbox.ejListBox("showAllItems");this.columnListbox.ejListBox("showAllItems");this.functionListTd.css("display","block");this.functionNoDataContainer.css("display","none");this.columnListTd.css("display","block");this.columnNoDataContainer.css("display","none");this.functionSearchIcon.addClass("e-reportdesigner-search").removeClass("e-reportdesigner-close");this.columnSearchIcon.addClass("e-reportdesigner-search").removeClass("e-reportdesigner-close")},n.prototype.onSearchText=function(n,t,i,r){var u,f;r.keyCode!==13&&(u=$(r.target).val(),u.length>0?(n.addClass("e-reportdesigner-close").removeClass("e-reportdesigner-search"),f=this.filterItems(t.data("ejListBox").model.dataSource,u),t.ejListBox("hideAllItems"),t.ejListBox("showItemsByIndices",f),this.setDisplayForListElements(i,f.length===0)):(t.ejListBox("showAllItems"),this.setDisplayForListElements(i)))},n.prototype.setDisplayForListElements=function(n,t){n?(this.functionListTd.css("display",ej.isNullOrUndefined(t)?"block":t?"none":"block"),this.functionNoDataContainer.css("display",ej.isNullOrUndefined(t)?"none":t?"block":"none")):(this.columnListTd.css("display",ej.isNullOrUndefined(t)?"block":t?"none":"block"),this.columnNoDataContainer.css("display",ej.isNullOrUndefined(t)?"none":t?"block":"none"))},n.prototype.onSearchBlur=function(n,t,i){var r=$(i.target).val();r.length===0&&(n.addClass("e-reportdesigner-search").removeClass("e-reportdesigner-close"),$(i.target).val(""),t.ejListBox("showAllItems"))},n.prototype.onSearchCloseClick=function(n,t,i,r){i.val("");t.ejListBox("showAllItems");n.addClass("e-reportdesigner-search").removeClass("e-reportdesigner-close");this.setDisplayForListElements(r)},n.prototype.filterItems=function(n,t){for(var r=[],i=0;i<n.length;i++)(t===""||n[i].name.toLowerCase().startsWith(t.toLowerCase()))&&r.push(i);return r},n.prototype.enbaleSavebtn=function(n){ej.DashboardUtil.buttonEnable(this.saveBtnTag,n)},n.prototype.txtNameChanged=function(){var t=this.textBox.val(),n=this.expressionContainer.data("e-exp");t!==this.oldExpName?n&&n.isEdit&&t!==n.name||(n&&!n.isEdit||ej.isNullOrUndefined(n))&&t.length!==0?this.enbaleSavebtn(!0):this.enbaleSavebtn(!1):(n&&n.isEdit&&t===n.name||(n&&!n.isEdit||ej.isNullOrUndefined(n))&&t.length===0)&&this.enbaleSavebtn(!1);this.oldExpName=t},n.prototype.txtExpChanged=function(){var t=this.textArea.val(),n=this.expressionContainer.data("e-exp");t!==this.oldVal||ej.isNullOrUndefined(n)||!n.isEdit?(n&&n.isEdit&&t!==n.expression||n&&!n.isEdit||ej.isNullOrUndefined(n))&&t.length!==0?this.enbaleSavebtn(!0):this.enbaleSavebtn(!1):(n&&n.isEdit&&t===n.expression||(n&&!n.isEdit||ej.isNullOrUndefined(n))&&t.length===0)&&this.enbaleSavebtn(!1);this.oldVal=t},n.prototype.updateTextArea=function(){var n=this.textArea.val();n&&n.length>0?n!==this.expWaterMark&&this.textArea.hasClass("e-designer-txtmark")&&this.textArea.removeClass("e-designer-txtmark"):this.textArea.val(this.expWaterMark).addClass("e-designer-txtmark")},n.prototype.updateTextBox=function(){var n=this.textBox.val();n&&n.length>0?n!==this.nameWaterMark&&this.textBox.hasClass("e-designer-txtmark")&&this.textBox.removeClass("e-designer-txtmark"):this.textBox.val(this.nameWaterMark).addClass("e-designer-txtmark")},n.prototype.addExpression=function(){this.resetSearchBox();this.requestValidation(!0);var n=this.textBox.val();this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(n))[0]})},n.prototype.requestValidation=function(n,t){var r=this.expressionContainer.data("e-exp"),u=this.textArea.val().trim(),i;r&&r.isEdit?(i=this.textBox.val(),i===this.nameWaterMark&&this.textBox.hasClass("e-designer-txtmark")&&(i=""),u===this.expWaterMark&&this.textArea.hasClass("e-designer-txtmark")&&(u=""),this.hasExpChanges(r,u)?i&&i.length===0||u&&u.length===0||!this.isValidName(i)||!/^[a-zA-Z0-9- _]*$/.test(i)?n?this.newExpression():this.expListClick(t):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{method:"updateExpressionInfo",instance:this,dataInfo:{name:n?i:t,isSelectionChange:n?!1:!0}}):n?this.switchEditExp():this.expListClick(t)):r&&!r.isEdit||ej.isNullOrUndefined(r)?u!=="Query Expression"?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"clearExpression",dataInfo:n?null:{isSelectionChange:!0,name:t},instance:this}):n?this.clearExpression(!1):this.expListClick(t):n?this.newExpression():this.expListClick(t)},n.prototype.clearExpression=function(n,t){if(ej.isNullOrUndefined(t))if(n)this.isAdd=!0,this.saveExpression();else{var i=this.getAvailableName();this.textArea.val(this.expWaterMark).addClass("e-designer-txtmark");this.textBox.val(i);this.updateTextBox();this.enbaleSavebtn(!1)}else n?this.saveExpression(t):this.expListClick(t.name)},n.prototype.deleteEmtyExp=function(){var t=this,i=this.expLiTag.find("li"),n=null;i.each(function(i,r){for(var e=$(r).find(".e-list-text").text(),f=!0,u=0;u<t.queryExp.length;u++)if(e===t.queryExp[u].name){f=!1;break}if(f){n=$(r);return}});n&&n.remove()},n.prototype.getEmptyExp=function(){var n=this,i=this.expLiTag.find("li"),t=null;return i.each(function(i,r){for(var f=$(r).find(".e-list-text").text(),e=!0,u=0;u<n.queryExp.length;u++)if(f===n.queryExp[u].name){e=!1;break}if(e){t=f;return}}),t},n.prototype.switchEditExp=function(){var n=this,i=this.expLiTag.find("li"),t=!0;i.each(function(i,r){for(var f=$(r).find(".e-list-text").text(),e=!0,u=0;u<n.queryExp.length;u++)if(f===n.queryExp[u].name){e=!1;break}if(e){t=!1;n.expListClick(f);return}});t&&this.newExpression()},n.prototype.hasExpChanges=function(n,t){for(var i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===n.name&&t.indexOf("["+this.queryExp[i].name+"]")===-1&&(this.queryExp[i].name!==this.textBox.val()||this.queryExp[i].expression!==t))return!0;return!1},n.prototype.newExpression=function(){var n=this.getAvailableName();this.textArea.val(this.expWaterMark).addClass("e-designer-txtmark");this.textBox.val(n);this.updateTextBox();this.expressionContainer.data("e-exp",{isEdit:!1,name:""});this.appendExpList(n);this.enbaleSavebtn(!1);this.UpdateMiscellaneousList()},n.prototype.updateExpressionInfo=function(n,t){var i=this.textBox.val();if(n)t.isSelectionChange?this.expressionContainer.data("e-exp").isEdit?this.expressionValidation(ExpAction.Edit,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.New,t.isSelectionChange,t.name):this.expressionValidation(ExpAction.Save);else if(t.isSelectionChange)this.expListClick(t.name);else{this.switchEditExp();i=this.textBox.val();this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(i))[0]})}},n.prototype.isValidName=function(n){for(var t=this.expressionContainer.data("e-exp"),i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===n&&(ej.isNullOrUndefined(t)||t.isEdit&&t.name!==n))return!1;return!0},n.prototype.getAvailableName=function(){for(var n,u,i="Expression",r=[],t=0;t<this.queryExp.length;t++)r.push(this.queryExp[t].name);n=0;do n++,u=r.indexOf(i+n);while(u!==-1);return i+n},n.prototype.populateExpressions=function(){if(this.expLiTag.children().length>0&&this.expLiTag.empty(),!ej.isNullOrUndefined(this.queryExp)&&this.queryExp.length>0)for(var n=0;n<this.queryExp.length;n++)this.appendExpList(this.queryExp[n].name);this.scrollerRefresh(this.bodyContainer)},n.prototype.updateExpList=function(n,t){var i=ej.DashboardUtil.escapeSelector(n),r=ej.DashboardUtil.escapeSelector(t);$("#"+this.id+"_li_"+r).remove();$("#"+this.id+"_li_"+i).unbind("click",$.proxy(this.expressionSelection,this,n));$("#"+this.id+"_"+i).unbind("click",$.proxy(this.removeExpression,this,n));$("#"+this.id+"_li_"+i+" .e-list-text").text(t);$("#"+this.id+"_li_"+i).attr("id",this.id+"_li_"+r);$("#"+this.id+"_"+i).attr("id",this.id+"_"+r);$("#"+this.id+"_li_"+r).bind("click",$.proxy(this.expressionSelection,this,t));$("#"+this.id+"_"+r).bind("click",$.proxy(this.removeExpression,this,t))},n.prototype.appendExpList=function(n,t){var f=ej.DashboardUtil.escapeSelector(n),i=ej.buildTag("li.e-user-select e-list e-state-default e-list-check e-reportdesigner-exp-list","",{padding:"0px","list-style":"none"},{id:this.id+"_li_"+f,name:n}),r=ej.buildTag("a.e-chevron-right_01 e-remove-shadow","",{padding:"8px 0px"}),e=ej.buildTag("span.e-list-text e-rel e-designer-content",n,{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis","vertical-align":"middle","padding-left":"2px",display:"inline-block","margin-top":"-2px",width:"122px","line-height":"normal","margin-left":"5px"},{name:n}),u;r.append(e);u=ej.buildTag("div.e-chk-image e-icon e-cross-circle","",{color:"#ff4d4d",float:"right",cursor:"pointer","margin-top":"2px","margin-right":"6px","font-size":"16px"},{id:this.id+"_"+f,title:"Delete"});r.append(u);i.append(r);u.bind("click",$.proxy(this.removeExpression,this,n));i.bind("click",$.proxy(this.expressionSelection,this,n));i.bind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.onListItemMouseUp,this));ej.isNullOrUndefined(t)?this.expLiTag.append(i):t===0?(this.expLiTag.prepend(i),i.css({"border-bottom":"0.5px solid #c8c8c8"})):this.listContainer.find("ul>li:nth-child("+t+")").after(i);this.updateContainerBorder();this.bodyContainer.height()>this.listContainer.height()?this.bodyContainer.find(".e-content").removeClass("e-content"):this.scrollerRefresh(this.bodyContainer)},n.prototype.onListItemMouseUp=function(n){var t=$(n.target).closest("li");t.hasClass("e-expression-user-selection-active")||(t.parent().children().each(function(){var n=$(this);n.removeClass("e-expression-user-selection-active");n.find("span").removeClass("e-expression-user-selection-active")}),t.addClass("e-expression-user-selection-active"),t.find("span").addClass("e-expression-user-selection-active"))},n.prototype.expressionSelection=function(n){this.requestValidation(!1,n)},n.prototype.renderFunctionJson=function(n){for(var t=0;t<n.length;t++)this.ejFunctionDropdown.setModel({fields:{id:"id",text:"name"},dataSource:n});this.ejFunctionDropdown.selectItemByText("All")},n.prototype.renderColumnJson=function(n){this.ejColumnDropdown.setModel({fields:{id:"id",text:"name"},dataSource:n});this.ejColumnDropdown.selectItemByText("All")},n.prototype.renderFunctionList=function(n){this.ejFunctionList.setModel({dataSource:n.value,fields:{id:"id",text:"name"},selectedIndex:0});var t=this.ejFunctionList.getSelectedItems();this.optionClick(t[0])},n.prototype.renderColumnList=function(n){this.ejColumnList.setModel({dataSource:n.value,fields:{text:"name"},selectedIndex:0});this.resetSearchBox()},n.prototype.getColumnJson=function(){for(var i,n=this.getTableItems(),r=[],u=[],f=[],t=0;t<n.length;t++)i=n[t].dataType,i.toLowerCase()==="integer"||i.toLowerCase()==="real"?r.push(n[t]):i.toLowerCase()==="string"?u.push(n[t]):i.toLowerCase()==="date"&&f.push(n[t]);return[{id:1,name:"All",value:n},{id:2,name:"Number",value:r},{id:3,name:"Text",value:u},{id:4,name:"Date",value:f},{id:5,name:"Miscellaneous",value:[]}]},n.prototype.functionJson=function(){return[{id:"ABS",name:"ABS",categoryName:"Numbers",desc:"Returns the absolute value of the given expression.",example:"ABS(numeric_expression)"},{id:"ACOS",name:"ACOS",categoryName:"Numbers",desc:"Returns the inverse cosine (also known as arccosine) of the given numeric expression. Value should be between -1 and +1.",example:"ACOS(numeric_expression)"},{id:"ASIN",name:"ASIN",categoryName:"Numbers",desc:"Returns the inverse sine (also known as arcsine) of the given numeric expression. Value should be between - 1 and +1.",example:"ASIN(numeric_expression)"},{id:"ATAN",name:"ATAN",categoryName:"Numbers",desc:"Returns the inverse tangent (also known as arctangent) of the given numeric expression.",example:"ATAN(numeric_expression)"},{id:"COS",name:"COS",categoryName:"Numbers",desc:"Returns the cosine of the angle specified in radians of the given expression.",example:"COS(numeric_expression)"},{id:"DEGREES",name:"DEGREES",categoryName:"Numbers",desc:"Returns the angle in degrees for the one specified in radians of the given numeric expression.",example:"DEGREES(numeric_expression)"},{id:"EXP",name:"EXP",categoryName:"Numbers",desc:"Returns the exponential value of the given expression.",example:"EXP(numeric_expression)"},{id:"LOG",name:"LOG",categoryName:"Numbers",desc:"Returns the logarithm of the given expression to the specified base.",example:"LOG(numeric_expression)"},{id:"PI",name:"PI",categoryName:"Numbers",desc:"Returns the constant value of PI.",example:"PI()"},{id:"POWER",name:"POWER",categoryName:"Numbers",desc:"Returns the value of the given expression (expression1) to the specified power (expression2).",example:"POWER(numeric_expression, numeric_expression)"},{id:"RADIANS",name:"RADIANS",categoryName:"Numbers",desc:"Returns the angle in radians for the one specified in degrees in the given numeric expression.",example:"RADIANS(numeric_expression)"},{id:"ROUND",name:"ROUND",categoryName:"Numbers",desc:"Returns a rounded value.",example:"ROUND(numeric_expression)"},{id:"SIGN",name:"SIGN",categoryName:"Numbers",desc:"Returns a value representing the positive (+1), zero(0), or negative (-1) sign of the given numeric expression.",example:"SIGN(numeric_expression)"},{id:"SIN",name:"SIN",categoryName:"Numbers",desc:"Returns the sine of the angle specified in radians of the given expression.",example:"SIN(numeric_expression)"},{id:"SQRT",name:"SQRT",categoryName:"Numbers",desc:"Returns the square root of the given numeric expression.",example:"SQRT(numeric_expression)"},{id:"TAN",name:"TAN",categoryName:"Numbers",desc:"Returns the tangent of the given numeric expression.",example:"TAN(numeric_expression)"},{id:"IF",name:"IF",categoryName:"Conditional",desc:"Returns either true part or false part, depending upon the evaluation of the expression.",example:"IF(expression, true_part, false_part)"},{id:"IFNULL",name:"IFNULL",categoryName:"Conditional",desc:"If the expression is numeric/string/date, returns the first expression. If the first expression is NULL, returns the second expression.",example:"IFNULL(expression1,expression2)"},{id:"ISNOTNULL",name:"ISNOTNULL",categoryName:"Conditional",desc:"If the numeric/ string / date_expression is NULL, returns a string representing false, otherwise represents true.",example:"ISNOTNULL(expression)"},{id:"ISNULL",name:"ISNULL",categoryName:"Conditional",desc:"If the numeric/string/date_expression is NULL, returns a string representing true, otherwise represents false.",example:"ISNULL(expression)"},{id:"AND",name:"AND",isLogical:!0,categoryName:"Logical",desc:"Returns true if both the expressions evaluates to true.",example:"(expression1) AND (expression2)"},{id:"NOT",name:"NOT",isLogical:!0,categoryName:"Logical",desc:"Returns the reversal logical value of the expression being evaluated.",example:"NOT(expression)"},{id:"OR",name:"OR",isLogical:!0,categoryName:"Logical",desc:"Returns true if any of the expressions evaluates to true.",example:"(expression1) OR (expression2)"},{id:"DATEADD",name:"DATEADD",categoryName:"Date",desc:"Adds the number of days to the specified date.",example:"DATEADD(numeric_expression, date_expression)"},{id:"DATENAME",name:"DATENAME",categoryName:"Date",desc:"Returns a string representing the specified datepart of the given date expression.",example:"DATENAME(datepart, date_expression)"},{id:"DATEPART",name:"DATEPART",categoryName:"Date",desc:"Returns an integer value representing the specified date part of the given date expression.",example:"DATEPART(datepart, date_expression)"},{id:"DATESUB",name:"DATESUB",categoryName:"Date",desc:"Returns the date subtracted from the specified date.",example:"DATESUB(numeric_expression, date_expression)"},{id:"DAY",name:"DAY",categoryName:"Date",desc:"Returns a numeric value representing the day part of the specified date.",example:"DAY(date_expression)"},{id:"DAYDIFF",name:"DAYDIFF",categoryName:"Date",desc:"Returns a numeric value representing the difference between two specified dates.",example:"DAYDIFF(date_expression, date_expression)"},{id:"HOUR",name:"HOUR",categoryName:"Date",desc:"Returns the hour of the given date as an integer.",example:"HOUR(date_expression)"},{id:"MAX",name:"MAX",categoryName:"Date",desc:"Returns the maximum value in the given expression.",example:"MAX(expression)"},{id:"MIN",name:"MIN",categoryName:"Date",desc:"Returns the minimum value in the given expression.",example:"MIN(expression)"},{id:"MINUTE",name:"MINUTE",categoryName:"Date",desc:"Returns a numeric value representing the minute part of the date resulting from specified date expression.",example:"MINUTE(date_expression)"},{id:"MONTH",name:"MONTH",categoryName:"Date",desc:"Returns a numeric value representing the month part of the date resulting from specified date expression.",example:"MONTH(date_expression)"},{id:"NOW",name:"NOW",categoryName:"Date",desc:"Returns the current date and time.",example:"NOW()"},{id:"TODAY",name:"TODAY",categoryName:"Date",desc:"Returns the current date.",example:"TODAY()"},{id:"YEAR",name:"YEAR",categoryName:"Date",desc:"Returns a numeric value representing the year part of the date resulting from the specified date expression.",example:"YEAR(date_expression)"},{id:"CHAR",name:"CHAR",categoryName:"String",desc:"Converts the given integer ASCII code into a character.",example:"CHAR(numeric_expression)"},{id:"CONCAT",name:"CONCAT",categoryName:"String",desc:"Returns a string value resulting from the concatenation of two or more string values.",example:"CONCAT(expression1, expression2, ...,expressionN)"},{id:"CONTAINS",name:"CONTAINS",categoryName:"String",desc:"Returns true if the given string expression contains the specified substring expression.",example:"CONTAINS(string_expression, substring_expression)"},{id:"ENDSWITH",name:"ENDSWITH",categoryName:"String",desc:"Returns true if the given string expression ends with the specified substring expression.",example:"ENDSWITH(string_expression, substring_expression)"},{id:"LEFT",name:"LEFT",categoryName:"String",desc:"Returns the specified number of characters from start of the given string expression.",example:"LEFT(expression, numeric_expression)"},{id:"LEN",name:"LEN",categoryName:"String",desc:"Returns the number of characters in the given string expression.",example:"LEN(string_expression)"},{id:"LOWER",name:"LOWER",categoryName:"String",desc:"Returns a lower case converted string value from a given string expression.",example:"LOWER(string_expression)"},{id:"LTRIM",name:"LTRIM",categoryName:"String",desc:"Returns the string value with leading blanks removed from string expression.",example:"LTRIM(string_expression)"},{id:"MAX",name:"MAX",categoryName:"String",desc:"Returns the maximum value in the given expression.",example:"MAX(expression)"},{id:"MIN",name:"MIN",categoryName:"String",desc:"Returns the minimum value in the given expression.",example:"MIN(expression)"},{id:"RIGHT",name:"RIGHT",categoryName:"String",desc:"Returns the specified number of characters from the end of the given string expression.",example:"RIGHT(expression, numeric_expression)"},{id:"RTRIM",name:"RTRIM",categoryName:"String",desc:"Returns the string without right side trailing spaces in the given string.",example:"RTRIM(string_expression)"},{id:"STARTSWITH",name:"STARTSWITH",categoryName:"String",desc:"Returns true if the given string expressions starts with the specified substring expression.",example:"STARTSWITH(string_expression, substring_expression)"},{id:"SUBSTR",name:"SUBSTR",categoryName:"String",desc:"Returns a specific length of string starting from specific index of the given string expression.",example:"SUBSTR(string_expression, starting_index, length_of_the_string)"},{id:"UPPER",name:"UPPER",categoryName:"String",desc:"Returns an upper case converted string value from a given string expression.",example:"UPPER(string_expression)"},{id:"AVG",name:"AVG",categoryName:"Aggregation",desc:"Returns the average of the values in the given expression.",example:"AVG(numeric_expression)"},{id:"COUNT",name:"COUNT",categoryName:"Aggregation",desc:"Returns the number of items in the given expression.",example:"COUNT(expression)"},{id:"COUNTD",name:"COUNTD",categoryName:"Aggregation",desc:"Returns the distinct number of items in the given expression.",example:"COUNTD(expression)"},{id:"MAX",name:"MAX",categoryName:"Aggregation",desc:"Returns the maximum value in the given expression.",example:"MAX(expression)"},{id:"MIN",name:"MIN",categoryName:"Aggregation",desc:"Returns the minimum value in the given expression.",example:"MIN(expression)"},{id:"STDEV",name:"STDEV",categoryName:"Aggregation",desc:"Returns the standard deviation of values in the given expression.",example:"STDEV(numeric_expression)"},{id:"SUM",name:"SUM",categoryName:"Aggregation",desc:"Returns the sum of values in the given expression.",example:"SUM(numeric_expression)"},{id:"VAR",name:"VAR",categoryName:"Aggregation",desc:"Returns the varience of values in the given expression.",example:"VAR(numeric_expression)"}]},n.prototype.getFunctionJson=function(){for(var i,t=this.functionJson(),r=[],u=[],f=[],e=[],o=[],s=[],h=[],c=[],n=0;n<t.length;n++)i=t[n].categoryName,c.indexOf(t[n].id)===-1&&(c.push(t[n].id),r.push(t[n])),i==="Numbers"?u.push(t[n]):i==="Conditional"?f.push(t[n]):i==="Logical"?e.push(t[n]):i==="Date"?o.push(t[n]):i==="String"?s.push(t[n]):i==="Aggregation"&&h.push(t[n]);return r.sort(function(n,t){return n.id>t.name?1:t.name>n.id?-1:0}),[{id:1,name:"All",value:r},{id:2,name:"Numbers",value:u},{id:3,name:"Aggregation",value:h},{id:4,name:"Conditional",value:f},{id:5,name:"Logical",value:e},{id:6,name:"Date",value:o},{id:7,name:"String",value:s}]},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n.prototype.getTableItems=function(){for(var t,i=[],n=0;n<this.queryDesigner.tableType.length;n++)this.queryDesigner.tableType[n].IsVisible&&(t=this.queryDesigner.tableType[n].DataType,t!=="geography"&&t!=="hierarchyid"&&t!=="xml"&&i.push({name:this.queryDesigner.tableType[n].Name,value:this.queryDesigner.tableType[n].Name,dataType:this.queryDesigner.tableType[n].DataType}));return this.columnList=i.length,i},n.prototype.functionDblClick=function(){var i=$("#"+this.id+"_exp_designer_option_list").data("ejListBox"),r=i.model.selectedItems,n=i.model.dataSource[r],t=null;n&&(!ej.isNullOrUndefined(n.isLogical)&&n.isLogical?(t=n.name,this.caretPosition(t)):(t=n.name+"()",this.caretPosition(t,!0,t.length)))},n.prototype.columnDblClick=function(){var t=$("#"+this.id+"_exp_designer_data_list").data("ejListBox"),r=t.model.selectedItems,i=t.model.dataSource[r],n=null;i&&(n="["+i.name+"]",this.caretPosition(n,!1,n.length))},n.prototype.caretPosition=function(n,t,i){var u,f,r;n&&n.length>0&&(u=this.textArea.val(),u!==this.expWaterMark&&this.textArea.hasClass("e-designer-txtmark")?this.textArea.removeClass("e-designer-txtmark"):u===this.expWaterMark&&this.textArea.hasClass("e-designer-txtmark")&&(u="",this.textArea.val(u).removeClass("e-designer-txtmark")),this.textArea.focus(),f=this.textArea[0],r=f.selectionStart,!ej.isNullOrUndefined(i)&&t?(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r+i-1):ej.isNullOrUndefined(i)||t?(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r):(this.textArea.val(u.substring(0,r)+n+u.substring(r)),r=f.selectionEnd=r+i),this.textArea.trigger("change"))},n.prototype.optionClick=function(n){n.data&&($("#"+this.id+"_exp_designer_desc_heading").text("Description"),$("#"+this.id+"_exp_designer_example_heading").text("Example"),$("#"+this.id+"_exp_designer_desc_content").text(n.data.desc),$("#"+this.id+"_exp_designer_example_content").text(n.data.example))},n.prototype.removeNestedExpression=function(n){var i=[],r,t,u;for(this.listContainer.find("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(n)).remove(),t=this.queryExp.length-1;t>=0;t--)(this.queryExp[t].name===n||this.queryExp[t].expression.indexOf("["+n+"]")>-1)&&(i.push(this.queryExp[t]),this.queryExp.splice(t,1));if(i.length>0)for(r=[],t=i.length-1;t>=0;t--)if(r=this.removeNestedExpression(i[t].name),r.length>0)for(u=0;u<r.length;u++)i.push(r[u]);return i},n.prototype.removeExpression=function(n){this.hasExpression(n)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.removeExpression,this.dashboardDesigner.locale.dataSource.removeExpressionText,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{expressionName:n},instance:this,method:"conformDelete"}):this.conformRemoveExpression(n)},n.prototype.conformRemoveExpression=function(n){var u=[],f=[],i,t,r,e,o;if(this.listContainer.find("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(n)).remove(),this.updateContainerBorder(),!ej.isNullOrUndefined(this.queryExp)&&this.queryExp.length>0){for(t=this.queryExp.length-1;t>=0;t--)if(this.queryExp[t].name===n){u.push(this.queryExp[t].name);f.push(this.queryExp[t].expression);this.queryExp.splice(t,1);break}if(i=this.removeNestedExpression(n),!ej.isNullOrUndefined(i)&&i.length>0)for(t=i.length-1;t>=0;t--)u.push(i[t].name),f.push(i[t].expression);this.serverValidationExp({selectedExpression:"",name:u,expression:f},ExpAction.Remove);r=this.queryExp.length;r>0?(this.expListClick(this.queryExp[r-1].name),this.deleteEmtyExp()):r===0&&this.expLiTag.children().length>0&&this.expLiTag.empty()}this.expLiTag.children().length===0&&(e=this.getAvailableName(),this.appendExpList(e),this.textBox.val(e),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("e-designer-txtmark"),this.expressionContainer.data("e-exp",{isEdit:!1,name:""}));this.scrollerRefresh(this.bodyContainer);this.UpdateMiscellaneousList();o=this.textBox.val();this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(o))[0]})},n.prototype.conformDelete=function(n,t){n&&this.conformRemoveExpression(t.expressionName)},n.prototype.hasExpression=function(n){for(var r,f,u,i=ej.DashboardUtil.getAllWidgets(),t=0;t<i.length;t++)if(i[t].dataGroupInfo.DatasetId===this.queryDesigner.dataset.Id)for(r=0;r<i[t].dataGroupInfo.Values.length;r++)for(f=i[t].dataGroupInfo.Values[r],u=0;u<f.Values.length;u++)if(n===f.Values[u].DataField)return!0;return!1},n.prototype.expListClick=function(n){for(var i,r=!1,t=0;t<this.queryExp.length;t++)if(n===this.queryExp[t].name){this.textBox.val(this.queryExp[t].name);this.textArea.val(this.queryExp[t].expression);this.updateTextBox();this.updateTextArea();this.textArea.focus();i=this.textArea[0];i.selectionStart=i.selectionEnd=this.queryExp[t].expression.length;this.expressionContainer.data("e-exp",{isEdit:!0,name:this.queryExp[t].name,expression:this.queryExp[t].expression});r=!0;this.enbaleSavebtn(!1);break}r||(this.textBox.val(n),this.updateTextBox(),this.textArea.val(this.expWaterMark).addClass("e-designer-txtmark"),this.enbaleSavebtn(!1),this.expressionContainer.data("e-exp",null));this.UpdateMiscellaneousList()},n.prototype.updateContainerBorder=function(){this.listContainer.css("border-top-width",this.listContainer.find("li").length===0?"0px":"1px")},n.prototype.wiredEvents=function(){$("#"+this.id+"_exp_designer_option_list").bind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.functionDblClick,this));$("#"+this.id+"_exp_designer_data_list").bind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.columnDblClick,this));$("#"+this.id+"_exp_designer_closebutton").on("click",$.proxy(this.closeDialog,this))},n.prototype.unWiredEvents=function(){$("#"+this.id+"_exp_designer_option_list").unbind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.functionDblClick,this));$("#"+this.id+"_exp_designer_data_list").unbind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.columnDblClick,this));$("#"+this.id+"_exp_designer_closebutton").unbind("click",$.proxy(this.closeDialog,this));this.functionSearchBox.off("keyup",$.proxy(this.onSearchText,this));this.columnSearchBox.off("keyup",$.proxy(this.onSearchText,this));this.functionSearchBox.off("blur",$.proxy(this.onSearchBlur,this));this.columnSearchBox.off("blur",$.proxy(this.onSearchBlur,this));this.expSearchIcon.off("click",$.proxy(this.onSearchCloseClick,this));this.expSearchIcon.off("click",$.proxy(this.onSearchCloseClick,this))},n.prototype.openExpression=function(n,t){this.provider=t;this.ejExpDialog.open();this.resetDesigner(!0);this.queryExp=n;this.tempExp=$.extend(!0,[],n);this.ejFunctionDropdown.model.dataSource&&this.ejFunctionDropdown.model.dataSource.length>0?(this.ejFunctionDropdown.option("selectedIndex",0),this.renderFunctionList(this.ejFunctionDropdown.model.dataSource[0])):this.renderFunctionJson(this.getFunctionJson());this.renderColumnJson(this.getColumnJson());this.queryExp.length>0?(this.populateExpressions(),this.expListClick(this.queryExp[0].name)):this.newExpression();var i=this.textBox.val();this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(i))[0]});this.refreshListScroller()},n.prototype.refreshListScroller=function(){var t=this.ejFunctionList,n;t.scrollerObj.model.scrollTop=0;n=this.ejColumnList;n.scrollerObj.model.scrollTop=0;this.ejFunctionList.refresh(!0);this.ejColumnList.refresh(!0)},n.prototype.confirmAction=function(n){if(n){var i=this.textBox.val(),t=(new ej.DashboardDesignerUtility.ExpressionParsor).parseErrors(this.textArea.val(),this.provider);t&&t.length>0?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.failedToParseExp,IconType.errors,AlertType.Alert,!0,t[0]):this.isAvaliableNames(i)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidExpressionName,this.dashboardDesigner.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:this.expressionContainer.data("e-exp").name===""?this.textBox.val():this.expressionContainer.data("e-exp").name,name:this.textBox.val(),expression:this.textArea.val()},ExpAction.Close)}else this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator()},n.prototype.closeConfirmation=function(){var i=this.expressionContainer.data("e-exp"),n,t;i&&i.isEdit?(n=this.textBox.val(),t=this.textArea.val().trim(),n===this.nameWaterMark&&this.textBox.hasClass("e-designer-txtmark")&&(n=""),t===this.expWaterMark&&this.textArea.hasClass("e-designer-txtmark")&&(t=""),!this.hasExpChanges(i,t)||n&&n.length===0||t&&t.length===0||!this.isValidName(n)||!/^[a-zA-Z0-9- _]*$/.test(n)?(this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator()):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:n}})):this.textArea.val()!=="Query Expression"&&this.textArea.val()!==""?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SaveExpression,this.dashboardDesigner.locale.dataSource.saveExpression,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{name:this.textBox.val()}}):(this.ejExpDialog.close(),this.excuteExpQuery(),this.hideExpIndicator())},n.prototype.closeExpDialog=function(n){n.isInteraction&&($("#"+this.id+"_exp_designer_div_WaitingPopup").is(":visible")?(this.hideExpIndicator(),n.cancel=!1,this.excuteExpQuery()):(n.cancel=!0,this.closeConfirmation()))},n.prototype.closeExpression=function(){this.resetSearchBox();this.closeConfirmation()},n.prototype.excuteExpQuery=function(){ej.DashboardUtil.isEqualObj(this.queryExp,this.tempExp)||this.queryDesigner.executeUIQuery();this.tempExp=[]},n.prototype.resetDesigner=function(n){n&&this.expLiTag.children().length>0&&(this.expLiTag.empty(),this.scrollerRefresh(this.bodyContainer));this.textBox.val("");this.textArea.val("");$("#"+this.id+"_exp_designer_desc_heading").text("");$("#"+this.id+"_exp_designer_example_heading").text("");$("#"+this.id+"_exp_designer_desc_content").text("");$("#"+this.id+"_exp_designer_example_content").text("")},n.prototype.saveExpression=function(n){this.resetSearchBox();this.expressionContainer.data("e-exp")&&this.expressionContainer.data("e-exp").isEdit?n&&n.isSelectionChange?this.expressionValidation(ExpAction.Edit,n.isSelectionChange,n.name):this.expressionValidation(ExpAction.Edit):n&&n.isSelectionChange?this.expressionValidation(ExpAction.New,n.isSelectionChange,n.name):this.expressionValidation(ExpAction.New)},n.prototype.expressionValidation=function(n,t,i){var o=this.expressionContainer.data("e-exp"),r=this.textBox.val(),u=this.textArea.val(),f=!1,e;if(r===this.nameWaterMark&&this.textBox.hasClass("e-designer-txtmark")&&(r=""),u===this.expWaterMark&&this.textArea.hasClass("e-designer-txtmark")&&(u=""),ej.isNullOrUndefined(r)||r.length!==0?ej.isNullOrUndefined(u)||u.length!==0?this.isValidName(r)?/^[a-zA-Z0-9- _]*$/.test(r)===!1?(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidExpressionName,this.dashboardDesigner.locale.dataSource.expHasSpecialChar,IconType.warning,AlertType.Alert,!1,""),f=!0):u.indexOf("["+r+"]")!==-1?(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.expNotInColumn,IconType.errors,AlertType.Alert,!1,""),f=!0):this.isBalanceBrackets(u)?this.isAvaliableNames(r)?(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidExpressionName,this.dashboardDesigner.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),f=!0):o&&o.isEdit?(e=(new ej.DashboardDesignerUtility.ExpressionParsor).parseErrors(u,this.provider),e&&e.length>0?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidParameter+"(s)",e[0],IconType.errors,AlertType.Alert,!1,""):this.serverValidationExp({selectedExpression:o.name,name:r,expression:u,isSelectionChange:t,selectedExp:i},n)):(e=(new ej.DashboardDesignerUtility.ExpressionParsor).parseErrors(u,this.provider),e&&e.length>0?(this.isAdd=!1,ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidParameter+"(s)",this.dashboardDesigner.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,e[0])):this.serverValidationExp({selectedExpression:"",name:r,expression:u,isSelectionChange:t,selectedExp:i},n)):(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.invalidExpSyntax,IconType.errors,AlertType.Alert,!1,""),f=!0):(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""),f=!0):(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.emptyExp,IconType.warning,AlertType.Alert,!1,""),f=!0):(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidExpressionName,this.dashboardDesigner.locale.dataSource.emptyExpName,IconType.warning,AlertType.Alert,!1,""),f=!0),t&&f)this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(o.name))[0]})},n.prototype.isAvaliableNames=function(n){for(var r=this.expressionContainer.data("e-exp"),i=this.ejColumnDropdown.model.dataSource[0].value,t=0;t<i.length;t++)if(i[t].name.toLowerCase()===n.toLowerCase()&&r.name.toLowerCase()!==n.toLowerCase())return!0;return!1},n.prototype.isBalanceBrackets=function(n){for(var t=0,i=0;i<n.length;i++)if(n[i]==="("?t++:n[i]===")"&&t--,t<0)return!1;return t>0?!1:!0},n.prototype.UpdateMiscellaneousList=function(){for(var r,u,t=this.ejColumnDropdown.model.dataSource[0].value,i=this.ejColumnDropdown.model.dataSource[4].value,e=t.length,o=i.length,f=!1,n=0;n<e-this.columnList;n++)t.pop();for(n=0;n<o;n++)i.pop();for(n=0;n<this.queryExp.length;n++){for(r={name:this.queryExp[n].name,value:this.queryExp[n].expression,dataType:null},u=0;u<t.length;u++)f=!1,e>=this.columnList&&t[u].name===r.name&&(f=!0);f||t.push(r);i.push(r)}this.ejColumnDropdown.model.dataSource[0].value=t;this.ejColumnDropdown.model.dataSource[4].value=i;this.ejColumnList.refresh(!0)},n.prototype.serverValidationExp=function(n,t){var i=$("#"+this.id+"_dataset_txt").val(),r=this.queryDesigner.dataset.Id;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.queryDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.executeQuery,datasource:this.queryDesigner.encrptDataSourceInfo(this.queryDesigner.datasourceInfo),commandType:CommandMode.Text,dataSetName:i,dataSetId:r,ExpAction:t,isExpression:!0,selectedExpression:n.selectedExpression,Expression:n.name,DisplayText:n.expression})},{fnction:$.proxy(this.expActionResult,this,{expression:n,action:t}),indicator:[$.proxy(this.showExpIndicator,this),$.proxy(this.hideExpIndicator,this)]},!0)},n.prototype.expActionResult=function(n,t){var h,u,r,f,o,c,s,e,i;if(t.Error){if(this.enbaleSavebtn(!0),ej.isNullOrUndefined(t.StatusMessage)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidParameter+"(s)",this.dashboardDesigner.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!1,""):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.InvalidParameter+"(s)",this.dashboardDesigner.locale.errorMessage.expressionParameterError,IconType.errors,AlertType.Alert,!0,t.StatusMessage),n.expression.isSelectionChange)this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(this.textBox.val()))[0]})}else if(this.ejExpDialog.isOpen()&&t&&t.table&&t.type)if(h=JSON.parse(t.type),u=this.expressionContainer.data("e-exp"),h.length>0){if(r=n.expression.name,f=n.expression.expression,n.action===ExpAction.New){if(o=!0,$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(r)).length===0)c=this.getEmptyExp(),this.updateExpList(c,r);else{for(s=!0,i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===r){s=!1;break}s||(o=!1,ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryExpression,this.dashboardDesigner.locale.dataSource.expNameExist,IconType.warning,AlertType.Alert,!1,""))}if(o){if(this.queryExp.push({name:r,expression:f}),this.expressionContainer.data("e-exp",{isEdit:!0,name:r,expression:f}),this.enbaleSavebtn(!1),this.isAdd){this.switchEditExp();e=this.textBox.val();this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(e))[0]});this.isAdd=!1}if(n.expression.isSelectionChange){this.expListClick(n.expression.selectedExp);e=this.textBox.val();this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(e))[0]})}}}else if(n.action===ExpAction.Edit){for(i=0;i<this.queryExp.length;i++)this.queryExp[i].expression.indexOf("["+u.name+"]")!==-1&&(this.queryExp[i].expression=this.queryExp[i].expression.replace("["+u.name+"]","["+r+"]"));for(i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===u.name){if(this.queryExp[i].name=r,this.queryExp[i].expression=f,ej.isNullOrUndefined(this.queryDesigner.Query)||(this.queryDesigner.Query.QueryDesignerState.Expressions[i].Name=r,this.queryDesigner.Query.QueryDesignerState.Expressions[i].QueryExp=f,this.queryDesigner.dataset.Query.QueryDesignerState.Expressions[i].Name=r,this.queryDesigner.dataset.Query.QueryDesignerState.Expressions[i].QueryExp=f,this.queryDesigner.queryExp[i].name=r,this.queryDesigner.queryExp[i].expression=f,this.queryDesigner.dataset.dataset.Query.QueryDesignerState.Expressions[i].Name=r,this.queryDesigner.dataset.dataset.Query.QueryDesignerState.Expressions[i].QueryExp=f,this.queryDesigner.dataset.queryExp[i].name=r,this.queryDesigner.dataset.queryExp[i].expression=f),this.queryExp[i].name!==u.name&&this.updateExpList(u.name,r),this.expressionContainer.data("e-exp",{isEdit:!0,name:this.queryExp[i].name,expression:this.queryExp[i].expression}),this.enbaleSavebtn(!1),n.expression.isSelectionChange){this.expListClick(n.expression.selectedExp);e=this.textBox.val();this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(e))[0]})}break}}else if(n.action===ExpAction.Save){for(i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===u.name){this.queryExp[i].name=r;this.queryExp[i].expression=f;this.queryExp[i].name!==u.name&&this.updateExpList(u.name,r);this.enbaleSavebtn(!1);this.switchEditExp();e=this.textBox.val();this.onListItemMouseUp({target:$("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(e))[0]});break}}else if(n.action===ExpAction.Close){for(u.name===""&&this.queryExp.push({name:this.textBox.val(),expression:this.textArea.val()}),i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name===u.name){this.queryExp[i].name=r;this.queryExp[i].expression=f;this.queryExp[i].name!==u.name&&this.updateExpList(u.name,r);break}this.ejExpDialog.close();this.hideExpIndicator();this.excuteExpQuery()}this.UpdateMiscellaneousList();(n.action===ExpAction.New||n.action===ExpAction.Save||n.action===ExpAction.Edit)&&this.updateSuccessMessage()}else this.enbaleSavebtn(!0)},n.prototype.updateSuccessMessage=function(){var n=this;$("#"+this.id+"_exp_success_message").css("display","block");setTimeout(function(){$("#"+n.id+"_exp_success_message").css("display","none")},3e3)},n.prototype.showExpIndicator=function(){this.footerTag.css("opacity",".5").attr("disabled","disabled");this.footerTag.children(".e-designer-addbtn").data("ejButton").disable();this.footerTag.children(".e-designer-cancelbtn").data("ejButton").disable();this.ejIndicator.show()},n.prototype.hideExpIndicator=function(){this.footerTag.css("opacity","1").removeAttr("disabled");this.footerTag.children(".e-designer-addbtn").data("ejButton").enable();this.footerTag.children(".e-designer-cancelbtn").data("ejButton").enable();this.ejIndicator.hide()},n.prototype.destroy=function(){this.unWiredEvents();ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_exp_designer"));$("#"+this.id+"_exp_designer").length>0&&$("#"+this.id+"_exp_designer").remove()},n}();window.ej.createObject("ej.DashboardDesignerUtility.QueryExpression",InternalQueryExpression,window),function(n){n[n.New=0]="New";n[n.Edit=1]="Edit";n[n.Save=2]="Save";n[n.Close=3]="Close";n[n.Remove=4]="Remove"}(ExpAction||(ExpAction={}));InternalEditConnection=function(){function n(){this.id=null;this.divEditor=null;this.reconnectBtnTag=null;this.footerTag=null;this.dsNameTextBoxVal=null;this.ejConTypeDrpdwn=null;this.closeBtnTag=null;this.ejIndicator=null;this.targetElement=null;this.editContainer=null;this.conTypeRow=null;this.divContainer=null;this.closeBtn=null;this.titleConfig=null;this.tableDialog=null;this.selectedOAuthConnection=null;this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.id=this.queryDesigner.id;this.datasource=ejDashboardDesigner.getInstance("DataSource");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.dataSourceLocale=this.dashboardDesigner.locale.dataSource;this.renderEditConnection();this.reportDesigner=ejDashboardDesigner.getInstance("DashboardDesigner")}return Object.defineProperty(n,"EditConnection",{get:function(){return(this.editConnection===null||this.editConnection===undefined)&&(this.editConnection=new ej.DashboardDesignerUtility.EditConnection),this.editConnection},enumerable:!0,configurable:!0}),n.prototype.renderEditConnection=function(){var i,t,r,n,f,e,u,h;this.divEditor=ej.buildTag("div.e-userselect","",{width:480,height:550},{id:this.id+"_edit_connnection_dialog"});this.divContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{},{id:this.id+"_scroller_edit_connnection_container"});i=ej.buildTag("div","",{},{id:this.id+"_edit_connnectiondialog"});this.editContainer=ej.buildTag("div","",{},{});i.append(this.editContainer);t=ej.buildTag("table.e-querydesigner-edit-connection-table","",{width:"100%",padding:"6.5px"},{unselectable:"on",id:this.id+"_edit_connection_config"});this.titleConfig=ej.buildTag("div","",{width:"100%",height:"auto",padding:"5px 10px 2px 10px"},{id:this.id+"_edit_datasource_Header","class":"e-dbrd-designer-webds-template-wrapper"});this.divEditor.append(this.divContainer);this.divContainer.append(i);this.editContainer.append(this.titleConfig);this.editContainer.append(t);this.datasource.renderTextBoxItem("Name",this.id+"_dbname",!1,t,427);this.conTypeRow=ej.buildTag("tr","",{},{id:this.id+"_connection_type"});r=ej.buildTag("td","",{},{unselectable:"on"});this.conTypeRow.append(r);t.append(this.conTypeRow);n=ej.buildTag("table","",{},{unselectable:"on"});r.append(n);f=this.datasource.getRowCaption("Connection type",this.id+"_connection_type");n.append(f);e=ej.buildTag("tr","",{},{});u=ej.buildTag("td","",{},{colspan:"2",id:this.id+"_connection_type_td"});n.append(e);n.append(u);this.ejConTypeDrpdwn=ej.buildTag("input","",{},{id:this.id+"_connection_type",value:"",spellcheck:"false"});u.append(this.ejConTypeDrpdwn);this.ejConTypeDrpdwn.ejDropDownList({width:"440px",fields:{value:"value",text:"text"},change:$.proxy(this.changedConnectionType,this),cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control",showRoundedCorner:!0});$(document.body).append(this.divEditor);this.divEditor.ejDialog({width:"auto",height:"auto",minWidth:"480px",minHeight:"550px",title:"Edit Connection",beforeClose:$.proxy(this.closePopup,this),enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",enableModal:!0,containment:"#"+this.dashboardDesigner._id,close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.ejIndicator=this.divEditor.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_connection_waiting_popup e-designer-loader"}).data("ejWaitingPopup");var o=this.reconnectBtnTag=ej.buildTag("button.e-btn-save e-dbrd-hand-cursor","",{float:"right",height:"auto"},{id:this.id+"_btn_reconnect"}),s=this.closeBtnTag=ej.buildTag("button.e-btn-close e-dbrd-hand-cursor","",{float:"right",height:"auto"},{id:this.id+"_btn_close"}),c=ej.buildTag("span.file-alert-message e-dbrd-file-alert-msg",this.dashboardDesigner.locale.editConnection.fileAlertMsg,{},{id:this.id+"_file_alert_message"});this.footerTag=$("#"+this.id+"_edit_connnection_dialog_foot");this.footerTag.append(c).append(s).append(o);o.ejButton({showRoundedCorner:!1,size:"mini",text:"Reconnect",cssClass:"e-designer-reconnectbtn",click:$.proxy(this.saveConnection,this,!0)});s.ejButton({showRoundedCorner:!1,size:"mini",text:"Cancel",cssClass:"e-designer-cancelbtn",click:$.proxy(this.closeDialog,this,!0)});this.divContainer.ejScroller({height:"549px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});h=this.divEditor.find("#"+this.id+"_connection_type");h.css("display","none")},n.prototype.openEditConnectionWindow=function(n,t){var u,i,r,f,e;ej.isNullOrUndefined(n.OAuthConnection)||n.OAuthConnection.Service!=="drive"||n.OAuthConnection.Provider!==OAuthProvider.Google?ej.isNullOrUndefined(n.OAuthConnection)||n.OAuthConnection.Service!=="onedrive"&&n.OAuthConnection.Service!=="sharepoint"?ej.isNullOrUndefined(n.OAuthConnection)||n.OAuthConnection.Provider!==OAuthProvider.Box?(this.divEditor.data("ejDialog").open(),f=$("#"+this.id+"_dbname").attr("disabled","disabled"),this.dsNameTextBoxVal=f.val(t),this.updateConnectionType(n),this.appendConnectionWindow(n),this.getDataSourceHeader(n),this.divContainer.data("ejScroller").refresh(),this.closeBtn=this.divEditor.parents("#"+this.id+"_edit_connnection_dialog_wrapper").find("#"+this.id+"_edit_connnection_dialog_closebutton"),e=this.divEditor.find("#"+this.id+"_connection_type"),e.css("display","none")):(i=ejDashboardDesigner.getInstance("FilePickerDialog"),r=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject("e-oauth-box",this.dashboardDesigner.locale),i.showDialog(r,n.OAuthConnection.ServiceId,n.OAuthConnection.Provider,n.OAuthConnection.Service,!0,n)):(i=ejDashboardDesigner.getInstance("FilePickerDialog"),u=void 0,u=n.OAuthConnection.Service==="onedrive"?"e-oauth-microsoft-onedrive":"e-oauth-microsoft-sharepoint",r=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(u,this.dashboardDesigner.locale),i.showDialog(r,n.OAuthConnection.ServiceId,n.OAuthConnection.Provider,n.OAuthConnection.Service,!0,n)):(i=ejDashboardDesigner.getInstance("FilePickerDialog"),r=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject("e-oauth-google-drive",this.dashboardDesigner.locale),i.showDialog(r,n.OAuthConnection.ServiceId,n.OAuthConnection.Provider,"drive",!0,n))},n.prototype.getDataSourceHeader=function(n){var t=n.ConnectionProperties.DataProvider,i,u,r,f;n.ConnectionProperties.DataProvider.toLowerCase()==="file"?(u=n.FileName.split("."),r=u.length>1?u[1]:n.ConnectionProperties.DataProvider,t=r==="csv"||r==="txt"?"Csv":r==="json"?"Json":"Excel"):n.ConnectionProperties.DataProvider.toLowerCase()==="sql"?t="MSSql":n.ConnectionProperties.DataProvider.toLowerCase()==="mysql"?t="MySql":n.ConnectionProperties.DataProvider.toLowerCase()==="mariadb"?t="MariaDB":n.ConnectionProperties.DataProvider.toLowerCase()==="memsql"?t="MemSQL":n.ConnectionProperties.DataProvider.toLowerCase()==="azuresqldatawarehouse"?t="AzureSqlDataWarehouse":n.ConnectionProperties.DataProvider.toLowerCase()==="web"?t=ej.isNullOrUndefined(n.OAuthConnection)||n.OAuthConnection===""?!ej.isNullOrUndefined(n.ProviderType)&&n.ProviderType!==""?n.ProviderType:n.ConnectionProperties.DataProvider:!ej.isNullOrUndefined(n.OAuthConnection.Service)&&n.OAuthConnection.Service!==""?n.OAuthConnection.Service:n.ConnectionProperties.DataProvider:n.ConnectionProperties.DataProvider.toLowerCase()==="postgresql"?t="PostgresSql":n.ConnectionProperties.DataProvider.toLowerCase()==="redshift"?t="AmazonRedshift":n.ConnectionProperties.DataProvider.toLowerCase()==="amazonauroramysql"||n.ConnectionProperties.DataProvider.toLowerCase()==="amazonaurorapostgresql"?t="AmazonAurora":n.ConnectionProperties.DataProvider.toLowerCase()==="googlecloudmysql"||n.ConnectionProperties.DataProvider.toLowerCase()==="googlecloudpostgresql"?t="GoogleCloud":n.ConnectionProperties.DataProvider.toLowerCase()==="salesforce"&&(ej.isNullOrUndefined(n.OAuthConnection)||(t=(n.OAuthConnection.service||n.OAuthConnection.Service).toLowerCase()==="salesforce"?"Salesforce":"SalesforceReports"));i=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(t,this.dashboardDesigner.locale);ej.isNullOrUndefined(i)&&!ej.isNullOrUndefined(n.OAuthConnection)&&n.OAuthConnection!==""&&(f=n.OAuthConnection.Provider+n.OAuthConnection.Service,i=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(f,this.dashboardDesigner.locale));ej.isNullOrUndefined(i)||this.updateDataSourceHeader(i,this.titleConfig)},n.prototype.getDataSourceHeaderTemplate=function(n){var t,i="<span class='e-dbrd-designer-webds-template-header-icon "+n.cssClass+"'><\/span><label class='e-dbrd-designer-webds-template-header-label'>"+n.name+"<\/label>";return ej.isNullOrUndefined(n.docUrl)?i:(t="<a class='e-dbrd-designer-webds-template-header-link' href='"+n.docUrl+"' target='_blank'>"+n.name+this.dashboardDesigner.locale.dataSource.webDataSource.apiDocumentationText+"<\/a>",i+t)},n.prototype.updateDataSourceHeader=function(n,t){t.html(this.getDataSourceHeaderTemplate(n))},n.prototype.updateConnectionType=function(n){var i=[{value:"SQL",text:this.dataSourceLocale.dataSourceType.msSql},{value:"AzureSQLDataWarehouse",text:this.dataSourceLocale.dataSourceType.azureSqlDataWarehouse},{value:"MySQL",text:this.dataSourceLocale.dataSourceType.mySql},{value:"MongoDB",text:this.dataSourceLocale.dataSourceType.mongodb},{value:"AmazonAuroraMySQL",text:this.dataSourceLocale.dataSourceType.amazonAuroraMySQL},{value:"AmazonAuroraPostgreSQL",text:this.dataSourceLocale.dataSourceType.amazonAuroraPostgreSQL},{value:"GoogleCloudMySQL",text:this.dataSourceLocale.dataSourceType.googleCloudMySQL},{value:"GoogleCloudPostgreSQL",text:this.dataSourceLocale.dataSourceType.googleCloudPostgreSQL},{value:"MariaDB",text:this.dataSourceLocale.dataSourceType.mariadb},{value:"MemSQL",text:this.dataSourceLocale.dataSourceType.memsql},{value:"PostgreSQL",text:this.dataSourceLocale.dataSourceType.postgres},{value:"Redshift",text:this.dataSourceLocale.dataSourceType.redshift},],r=[{value:"File",text:this.dataSourceLocale.dataSourceType.file}],u=[{value:"WEB",text:this.dataSourceLocale.dataSourceType.webDataSource.toUpperCase()}],f=[{value:"Salesforce",text:this.dataSourceLocale.oauthConnectors.salesforce}],e=[{value:"Oracle",text:this.dataSourceLocale.dataSourceType.oracle}],t=this.ejConTypeDrpdwn.data("ejDropDownList");n.ConnectionProperties.DataProvider===this.dataSourceLocale.dataSourceType.file||n.ConnectionProperties.DataProvider===this.dataSourceLocale.dataSourceType.webDataSource.toUpperCase()||n.ConnectionProperties.DataProvider===this.dataSourceLocale.oauthConnectors.salesforce||n.ConnectionProperties.DataProvider===this.dataSourceLocale.dataSourceType.oracle?(t.option("enabled",!1),n.ProviderType!==""&&n.ConnectionProperties.DataProvider===this.dataSourceLocale.dataSourceType.webDataSource.toUpperCase()?this.conTypeRow.css("display","none"):this.conTypeRow.css("display","block"),t.selectedTextValue!==n.ConnectionProperties.DataProvider&&(n.ConnectionProperties.DataProvider===this.dataSourceLocale.oauthConnectors.salesforce?(t.setModel({dataSource:f}),this.selectedOAuthConnection=n.OAuthConnection):n.ConnectionProperties.DataProvider===this.dataSourceLocale.dataSourceType.oracle?t.setModel({dataSource:e}):t.setModel({dataSource:n.ConnectionProperties.DataProvider===this.dataSourceLocale.dataSourceType.file?r:u}),t.selectItemByValue(n.ConnectionProperties.DataProvider)),n.ConnectionProperties.DataProvider===this.dataSourceLocale.oauthConnectors.salesforce&&(this.selectedOAuthConnection=n.OAuthConnection)):(t.setModel({dataSource:i}),t.selectItemByValue(n.ConnectionProperties.DataProvider),t.option("enabled",!0))},n.prototype.changedConnectionType=function(n){var t,i,r,u,f,e,o,s,h,c,l,a,v,y,p;if(this.targetElement=this.renderConnectionDialog(),this.footerTag.find("#"+this.id+"_file_alert_message").css("display","none"),n)switch(n.selectedValue){case"SQL":t=ejDashboardDesigner.getInstance("SQLReconnectDataSource");t.renderConfiguration(this.targetElement,"_editConnection");break;case"AzureSQLDataWarehouse":i=ejDashboardDesigner.getInstance("AzureSQLDataWarehouseReconnectDataSource");i.renderConfiguration(this.targetElement,"_editConnection");break;case"MongoDB":r=ejDashboardDesigner.getInstance("MongoDBReconnectDataSource");r.renderConfiguration(this.targetElement,"_editConnection");this.footerTag.find("#"+this.id+"_file_alert_message").css("display","block");break;case"MySQL":u=ejDashboardDesigner.getInstance("MySQLReconnectDataSource");u.renderConfiguration(this.targetElement,"_editConnection");break;case"AmazonAuroraMySQL":case"AmazonAuroraPostgreSQL":f=ejDashboardDesigner.getInstance("AmazonAuroraReconnectDataSource");f.renderConfiguration(this.targetElement,"_editConnection");break;case"GoogleCloudMySQL":case"GoogleCloudPostgreSQL":e=ejDashboardDesigner.getInstance("GoogleCloudReconnectDataSource");e.renderConfiguration(this.targetElement,"_editConnection");break;case"MariaDB":o=ejDashboardDesigner.getInstance("MySQLReconnectDataSource");o.renderConfiguration(this.targetElement,"_editConnection","e-mariadb");break;case"MemSQL":s=ejDashboardDesigner.getInstance("MySQLReconnectDataSource");s.renderConfiguration(this.targetElement,"_editConnection","e-memsql");break;case"PostgreSQL":h=ejDashboardDesigner.getInstance("PSQLReconnectDataSource");h.renderConfiguration(this.targetElement,"_editConnection");break;case"Redshift":c=ejDashboardDesigner.getInstance("PSQLReconnectDataSource");c.renderConfiguration(this.targetElement,"_editConnection","e-redshift");break;case"File":l=ejDashboardDesigner.getInstance("FileReconnectDataSource");l.renderConfiguration(this.targetElement,"_editConnection");this.footerTag.find("#"+this.id+"_file_alert_message").css("display","block");break;case"WEB":a=ejDashboardDesigner.getInstance("WebReconnectDataSource");a.renderConfiguration(this.targetElement,"_editConnection");this.footerTag.find("#"+this.id+"_file_alert_message").css("display","block");break;case"Salesforce":String(this.selectedOAuthConnection.service||this.selectedOAuthConnection.Service).toLowerCase()==="salesforce"?(v=ejDashboardDesigner.getInstance("SalesForceReconnectDataSource"),v.renderConfiguration(this.targetElement,"_editConnection")):(y=ejDashboardDesigner.getInstance("SalesforceReportsReconnectDataSource"),y.renderConfiguration(this.targetElement,"_editConnection",this.selectedOAuthConnection));this.footerTag.find("#"+this.id+"_file_alert_message").css("display","block");break;case"Oracle":p=ejDashboardDesigner.getInstance("ORACLEReconnectDataSource");p.renderConfiguration(this.targetElement,"_editConnection")}},n.prototype.saveConnection=function(){var n=!1,w,i,b,r,k,u,d,f,g,e,nt,o,tt,s,it,h,rt,c,ut,l,ft,a,et,v,t,ot,st,ht,y,p;switch(this.ejConTypeDrpdwn.val()){case"SQL":if(w=ejDashboardDesigner.getInstance("SQLReconnectDataSource"),i=w.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(i))return;this.dsInfo=i;break;case"AzureSQLDataWarehouse":if(b=ejDashboardDesigner.getInstance("AzureSQLDataWarehouseReconnectDataSource"),r=b.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(r))return;this.dsInfo=r;break;case"MongoDB":if(k=ejDashboardDesigner.getInstance("MongoDBReconnectDataSource"),u=k.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(u))return;this.dsInfo=u;n=!0;break;case"MySQL":if(d=ejDashboardDesigner.getInstance("MySQLReconnectDataSource"),f=d.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(f))return;this.dsInfo=f;break;case"AmazonAuroraMySQL":case"AmazonAuroraPostgreSQL":if(g=ejDashboardDesigner.getInstance("AmazonAuroraReconnectDataSource"),e=g.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(e))return;this.dsInfo=e;break;case"GoogleCloudMySQL":case"GoogleCloudPostgreSQL":if(nt=ejDashboardDesigner.getInstance("GoogleCloudReconnectDataSource"),o=nt.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(o))return;this.dsInfo=o;break;case"MariaDB":if(tt=ejDashboardDesigner.getInstance("MySQLReconnectDataSource"),s=tt.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(s))return;this.dsInfo=s;break;case"MemSQL":if(it=ejDashboardDesigner.getInstance("MySQLReconnectDataSource"),h=it.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(h))return;this.dsInfo=h;break;case"PostgreSQL":if(rt=ejDashboardDesigner.getInstance("PSQLReconnectDataSource"),c=rt.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(c))return;this.dsInfo=c;break;case"Redshift":if(ut=ejDashboardDesigner.getInstance("PSQLReconnectDataSource"),l=ut.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(l))return;this.dsInfo=l;break;case"File":if(ft=ejDashboardDesigner.getInstance("FileReconnectDataSource"),a=ft.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(a))return;this.dsInfo=a;n=!0;break;case"WEB":if(et=ejDashboardDesigner.getInstance("WebReconnectDataSource"),v=et.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(v))return;this.dsInfo=v;n=!0;break;case"Salesforce":if(t=null,String(this.selectedOAuthConnection.service||this.selectedOAuthConnection.Service).toLowerCase()==="salesforce"?(ot=ejDashboardDesigner.getInstance("SalesForceReconnectDataSource"),t=ot.getDatasourceInfo(this.dsNameTextBoxVal.val(),null)):(st=ejDashboardDesigner.getInstance("SalesforceReportsReconnectDataSource"),t=st.getDatasourceInfo(this.dsNameTextBoxVal.val(),null)),ej.isNullOrUndefined(t))return;this.dsInfo=t;n=!0;break;case"Oracle":if(ht=ejDashboardDesigner.getInstance("ORACLEReconnectDataSource"),y=ht.getDatasourceInfo(this.dsNameTextBoxVal.val(),null),ej.isNullOrUndefined(y))return;this.dsInfo=y}this.dsInfo&&(this.dsInfo.Id=ej.getGuid("Datasource_"),n?(p=ej.DashboardDesignerUtility.DesignerHub.DesignerHub,p.GetStatusFromServer("GetStatusFromServer",{indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)],fnction:$.proxy(this.intermediateDbActionResponse,this,!0)}),p.StartHubConnection({indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)],fnction:$.proxy(this.fetchSchema,this)})):this.isSupportedProvider()&&this.dsInfo.Mode.toLowerCase()==="extract"?ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.testConnection,datasource:this.encryptPostBack(this.dsInfo)})},{fnction:$.proxy(this.reconnectSqlExtractMode,this,!0),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]}):ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.ReconnectDatabase,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.ReconnectDatabase,datasource:this.encryptPostBack(this.dsInfo),dataSetId:this.queryDesigner.dataset.Id,codeView:this.queryDesigner.designState()})},{fnction:$.proxy(this.validateConnection,this),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]}))},n.prototype.isSupportedProvider=function(){switch(this.dsInfo.Provider.toLowerCase()){case"sql":case"amazonaurorapostgresql":case"googlecloudpostgresql":case"postgresql":case"googlecloudmysql":case"amazonauroramysql":case"mysql":case"mariadb":case"memsql":case"oracle":return!0}return!1},n.prototype.fetchSchema=function(){var n=ej.DashboardDesignerUtility.DesignerHub.DesignerHub,t=n.connectionId;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/validateconnection/",{action:ej.DashboardUtil.DesignerAction.testConnection,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.testConnection,datasource:this.encryptPostBack(this.dsInfo),clientid:t})},{})},n.prototype.reconnectSqlExtractMode=function(n,t){(t.result==="true"||t==="true")&&(ej.isNullOrUndefined(t.data)||(this.tableSelector=new ej.DashboardDesignerUtility.TableSelector(this.dsInfo,n),this.tableSelector.showDialog(t.data,t.table),this.tableSelector.editConnection=this,this.divEditor.data("ejDialog").close()))},n.prototype.intermediateDbActionResponse=function(n,t){t&&(t.Data.IgnoreSchemaFetch?this.validateConnection("true"):(this.tableSelector=new ej.DashboardDesignerUtility.TableSelector(this.dsInfo,n),this.tableSelector.showDialog(JSON.parse(t.Data)),this.tableSelector.editConnection=this,this.divEditor.data("ejDialog").close()))},n.prototype.validateConnection=function(n){var t;n&&n.RetainSchema==="False"?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SchemaMismatch,this.dashboardDesigner.locale.alertWindowMesages.differentSchema,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:{IsRetainSchema:!1,Tables:null}}):n&&n.RetainSchema==="True"?(t={IsRetainSchema:!0,Tables:n.SchemaAndTables},n.InvalidColumns==="True"?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SchemaMismatch,this.dashboardDesigner.locale.alertWindowMesages.columnNotExist,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this,dataInfo:t}):this.confirmAction(!0,t)):(t={IsRetainSchema:!1,Tables:null},this.confirmAction(!0,t))},n.prototype.getEditDSInstance=function(n){switch(n){case"SQL":return ejDashboardDesigner.getInstance("SQLReconnectDataSource");case"AzureSQLDataWarehouse":return ejDashboardDesigner.getInstance("AzureSQLDataWarehouseReconnectDataSource");case"MongoDB":return ejDashboardDesigner.getInstance("MongoDBReconnectDataSource");case"MySQL":case"MemSQL":case"MariaDB":return ejDashboardDesigner.getInstance("MySQLReconnectDataSource");case"PostgreSQL":return ejDashboardDesigner.getInstance("PSQLReconnectDataSource");case"Redshift":return ejDashboardDesigner.getInstance("PSQLReconnectDataSource");case"AmazonAuroraMySQL":case"AmazonAuroraPostgreSQL":return ejDashboardDesigner.getInstance("AmazonAuroraReconnectDataSource");case"GoogleCloudMySQL":case"GoogleCloudPostgreSQL":return ejDashboardDesigner.getInstance("GoogleCloudReconnectDataSource");case"File":return ejDashboardDesigner.getInstance("FileReconnectDataSource");case"WEB":return ejDashboardDesigner.getInstance("WebReconnectDataSource");case"Oracle":return ejDashboardDesigner.getInstance("ORACLEReconnectDataSource");case"Salesforce":return String(this.selectedOAuthConnection.service||this.selectedOAuthConnection.Service).toLowerCase()==="salesforce"?ejDashboardDesigner.getInstance("SalesForceReconnectDataSource"):ejDashboardDesigner.getInstance("SalesforceReportsReconnectDataSource")}},n.prototype.confirmAction=function(n,t){n?this.isValidConnectionType()?this.tableSelector.getFileData(t):this.updateSchemaDetails(t):(this.tableSelector.dialog.close(),this.tableSelector.dispose(),this.divEditor.data("ejDialog").open())},n.prototype.isValidConnectionType=function(){return this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.file||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.mongodb||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.webDataSource.toUpperCase()||(this.ejConTypeDrpdwn.val().toLowerCase()==="sql"||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.googleCloudPostgreSQL||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.amazonAuroraPostgreSQL||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.amazonAuroraMySQL||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.googleCloudMySQL||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.postgres||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.mySql||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.oracle||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.mariadb||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.dataSourceType.memsql)&&this.dsInfo.Mode.toLowerCase()==="extract"||this.ejConTypeDrpdwn.val()===this.dataSourceLocale.oauthConnectors.salesforce},n.prototype.updateSchemaDetails=function(n){n.IsRetainSchema?(this.queryDesigner.editDataSource=!0,this.queryDesigner.saveQueryInfo(!0,!0),this.getEditDSInstance(this.dsInfo.Provider).UpdateDataSourceInfo(this.queryDesigner.datasourceInfo,this.dsInfo),ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.databaseSchema,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.databaseSchema,datasource:this.encrptDataSourceInfo(this.queryDesigner.datasourceInfo),dataSetId:this.queryDesigner.datasourceInfo.Id,ReconnectWithRetainSchema:!0,Schema:ej.isNullOrUndefined(n.Tables)?null:n.Tables,oldDataSourceId:this.dsInfo.Id,codeView:this.queryDesigner.designState(),viewType:"Schema"})},{fnction:$.proxy(this.updateSchemaArea,this,!0,n.Tables),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]})):(this.queryDesigner.updateNoDataInfo(),this.getEditDSInstance(this.dsInfo.Provider).UpdateDataSourceInfo(this.queryDesigner.datasourceInfo,this.dsInfo),ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.databaseSchema,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.databaseSchema,datasource:this.encrptDataSourceInfo(this.queryDesigner.datasourceInfo),dataSetId:this.queryDesigner.datasourceInfo.Id,oldDataSourceId:this.dsInfo.Id,ReconnectWithRetainSchema:!1,viewType:"Schema"})},{fnction:$.proxy(this.updateSchemaArea,this,!1,null),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]}))},n.prototype.updateSchemaArea=function(n,t,i){var r,f,u,o,e,s;if(this.queryDesigner.isEditconnection=!0,this.queryDesigner.isEdit?(this.queryDesigner.isEdit=!1,this.queryDesigner.updateSchemaArea(i,!0),this.queryDesigner.isEdit=!0):this.queryDesigner.updateSchemaArea(i,!0),n){if(r=void 0,!ej.isNullOrUndefined(t))for(r=JSON.parse(t),f=Object.keys(r),u=0;u<f.length;u++)for(o=r[f[u]],e=0;e<o.length;e++)s={schema:f[u],name:o[e]},this.queryDesigner.nodeTableSelector(s);this.queryDesigner.updateDataSource(r)}ej.isNullOrUndefined(this.divEditor)||this.divEditor.data("ejDialog").close();ej.isNullOrUndefined(this.tableSelector)||ej.isNullOrUndefined(this.tableSelector.dialog)||(this.tableSelector.hideIndicator(),this.tableSelector.dialog.close(),this.tableSelector.dispose());$("#"+this.id+"_file_picker_dialog").length>0&&$("#"+this.id+"_file_picker_dialog").data("ejDialog").close()},n.prototype.encryptPostBack=function(n){var t=$.extend(!0,{},n);return t.ConnectionString=ej.DashboardUtil.encryptData(t.ConnectionString),t.Username=ej.DashboardUtil.encryptData(t.Username),t.Password=ej.DashboardUtil.encryptData(t.Password),t},n.prototype.encrptDataSourceInfo=function(n){var t=$.extend(!0,{},n);return t.ConnectionProperties&&(t.ConnectionProperties.ConnectString=ej.DashboardUtil.encryptData(t.ConnectionProperties.ConnectString),t.ConnectionProperties.UserName&&(t.ConnectionProperties.UserName=ej.DashboardUtil.encryptData(t.ConnectionProperties.UserName)),t.ConnectionProperties.PassWord&&(t.ConnectionProperties.PassWord=ej.DashboardUtil.encryptData(t.ConnectionProperties.PassWord))),t},n.prototype.renderConnectionDialog=function(){var n=null,t=$("#"+this.id+"_connection_datasource");return t.hasClass("connectionClass")&&(t.remove(),t.removeClass("connectionClass")),t.hasClass("connectionClass")||(n=ej.buildTag("div","",{width:"100%",height:"350px"},{id:this.id+"_connection_datasource"}),n.addClass("connectionClass"),this.editContainer.append(n)),n},n.prototype.appendConnectionWindow=function(n){var t=null,r,u,f,e,o,s,h,c,l,a,v,y,p,w,i,b;t=ej.isNullOrUndefined(this.targetElement)?this.renderConnectionDialog():this.targetElement;switch(n.ConnectionProperties.DataProvider){case"SQL":r=ejDashboardDesigner.getInstance("SQLReconnectDataSource");r.editConfiguration(t,n);break;case"AzureSQLDataWarehouse":u=ejDashboardDesigner.getInstance("AzureSQLDataWarehouseReconnectDataSource");u.editConfiguration(t,n);break;case"MongoDB":f=ejDashboardDesigner.getInstance("MongoDBReconnectDataSource");f.editConfiguration(t,n);break;case"MySQL":e=ejDashboardDesigner.getInstance("MySQLReconnectDataSource");e.editConfiguration(t,n);break;case"AmazonAuroraMySQL":case"AmazonAuroraPostgreSQL":o=ejDashboardDesigner.getInstance("AmazonAuroraReconnectDataSource");o.editConfiguration(t,n);break;case"GoogleCloudMySQL":case"GoogleCloudPostgreSQL":s=ejDashboardDesigner.getInstance("GoogleCloudReconnectDataSource");s.editConfiguration(t,n);break;case"MariaDB":h=ejDashboardDesigner.getInstance("MySQLReconnectDataSource");h.editConfiguration(t,n);break;case"MemSQL":c=ejDashboardDesigner.getInstance("MySQLReconnectDataSource");c.editConfiguration(t,n);break;case"PostgreSQL":l=ejDashboardDesigner.getInstance("PSQLReconnectDataSource");l.editConfiguration(t,n);break;case"Redshift":a=ejDashboardDesigner.getInstance("PSQLReconnectDataSource");a.editConfiguration(t,n);break;case"File":v=ejDashboardDesigner.getInstance("FileReconnectDataSource");v.editConfiguration(t,n);break;case"WEB":y=ejDashboardDesigner.getInstance("WebReconnectDataSource");y.editConfiguration(t,n);break;case"Salesforce":String(n.OAuthConnection.service||n.OAuthConnection.Service).toLowerCase()==="salesforce"?(i=ejDashboardDesigner.getInstance("SalesforceReportsDataSource"),$("#"+i.getId()+"_editConnection").css("display","none"),p=ejDashboardDesigner.getInstance("SalesForceReconnectDataSource"),p.editConfiguration(t,n)):(w=ejDashboardDesigner.getInstance("SalesForceDataSource"),$("#"+w.getId()+"_editConnection").css("display","none"),i=ejDashboardDesigner.getInstance("SalesforceReportsReconnectDataSource"),i.editConfiguration(t,n));break;case"Oracle":b=ejDashboardDesigner.getInstance("ORACLEReconnectDataSource");b.editConfiguration(t,n)}},n.prototype.closeDialog=function(){this.divEditor.data("ejDialog").close()},n.prototype.closePopup=function(n){if(!ej.isNullOrUndefined(this.closeBtn)&&this.closeBtn.hasClass("e-close-disable")){n.cancel=!0;return}$(".e-daterange-popup:visible").css("display","none");$(".e-multiselect-popup-container").css("display","none")},n.prototype.showIndicator=function(){!ej.isNullOrUndefined(this.divEditor)&&this.divEditor.data("ejDialog").isOpen()?(this.footerTag.css("opacity",".5").attr("disabled","disabled"),ej.DashboardUtil.buttonEnable(this.reconnectBtnTag,!1),ej.DashboardUtil.buttonEnable(this.closeBtnTag,!1),ej.isNullOrUndefined(this.closeBtn)||this.closeBtn.addClass("e-close-disable").css({cursor:"default",opacity:"0.3"}),this.ejIndicator.show()):ej.isNullOrUndefined(this.tableDialog)||this.tableDialog.wrapper.data("ejWaitingPopup").show()},n.prototype.hideIndicator=function(){!ej.isNullOrUndefined(this.divEditor)&&this.divEditor.data("ejDialog").isOpen()?(this.footerTag.css("opacity","1").removeAttr("disabled"),ej.DashboardUtil.buttonEnable(this.reconnectBtnTag,!0),ej.DashboardUtil.buttonEnable(this.closeBtnTag,!0),ej.isNullOrUndefined(this.closeBtn)||this.closeBtn.removeClass("e-close-disable").css({cursor:"pointer",opacity:"1"}),this.ejIndicator.hide()):ej.isNullOrUndefined(this.tableDialog)||$("#"+this.id+"_table_selector_dialog_wrapper").data("ejWaitingPopup").hide()},n.prototype.setInfo=function(n,t,i,r){this.dsInfo=n;this.tableDialog=i;this.tableSelector=r;this.ejConTypeDrpdwn.val("WEB")},n}();window.ej.createObject("ej.DashboardDesignerUtility.EditConnection",InternalEditConnection,window);InternalQueryFilter=function(){function n(){this.queryFilters=[];this.dataFields=[];this.parameters=[];this.paramNameList=[];this.rootNode=null;this.parentDiv=null;this.containerDiv=null;this.dateTimeFormats=[];this.dateTimeformatforTopN=[];this.dimensionFormats=[];this.measureFormats=[];this.modeTypes=[];this.operatorTypes=[];this.dashboardDesigner=null;this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.dateRangePopup=ejDashboardDesigner.getInstance("DateRangePopup");this.multiSelectionComboBox=ejDashboardDesigner.getInstance("MultiSelectionComboBox");this.setItemDataSource();this.id=this.queryDesigner.id;this.renderQueryFilterDialog()}return Object.defineProperty(n,"QueryFilter",{get:function(){return(this.queryFilter===null||this.queryFilter===undefined)&&(this.queryFilter=new ej.DashboardDesignerUtility.QueryFilter),this.queryFilter},enumerable:!0,configurable:!0}),n.prototype.renderQueryFilterDialog=function(){var n=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{height:"auto"},{title:"Query Filters",id:this.id+"_query_filter_dialog"}),f=ej.buildTag("div","",{},{}),e=ej.buildTag("table","",{width:"100%"},{}),i=ej.buildTag("tr","",{"padding-top":"10px"},{}),o=ej.buildTag("td","",{width:"500px"},{}),a=ej.buildTag("Label.e-designer-add-label","List of Table Filters",{},{type:"label"}),s=ej.buildTag("td","",{},{}),t=ej.buildTag("div","",{cursor:"pointer",float:"right"},{}),v=ej.buildTag("span.e-chk-image e-icon e-plus e-designer-add-icon e-query-filter-add-icon","",{cursor:"pointer","margin-top":"1px"},{id:this.id+"_query_filter_add"}),y=ej.buildTag("span.e-btntxt e-designer-add-btn","ADD",{},{}),r=this.parentDiv=ej.buildTag("div.e-dbrd-designer-scroller e-designer-border-dialog e-dbrd-control","",{width:"661px",padding:"5px 0px",height:"306px",position:"relative"},{id:this.id+"_query_parentContainer"}),p=this.containerDiv=ej.buildTag("div","",{},{id:this.id+"_query_container_div"}),h=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_query_btn_cancel"}),c=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_query_btn_ok"}),l,u;n.append(f);f.append(e);e.append(i);i.append(o);o.append(a);i.append(s);s.append(t);t.append(v);t.append(y);n.append(r);r.append(p);$(document.body).append(n);n.ejDialog({minWidth:688,minHeight:395,width:"auto",height:"auto",enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",beforeClose:$.proxy(this.closePopup,this),close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.rootNode=$("#"+this.id+"_query_filter_dialog_wrapper");l=this.rootNode.find("#"+this.id+"_query_filter_dialog_foot");l.append(h).append(c);u=this.dashboardDesigner.locale.dialogOptions;c.ejButton({showRoundedCorner:!1,size:"mini",text:u.okButtonText,click:$.proxy(this.saveQueryFilter,this,!0),enabled:!0});h.ejButton({showRoundedCorner:!1,size:"mini",text:u.cancelButtonText,click:$.proxy(this.closeDialog,this,!0)});t.bind("click",$.proxy(this.addQueryFilter,this));r.ejScroller({height:"306px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.renderQueryFilterRow=function(n){var u,i,t=ej.getGuid(this.id+"_row_"),it=n&&n.Name?!0:!1,rt=this.getCurrentIndex(),f=this.containerDiv.find(".e-reportdesigner-query-row").length,e=ej.buildTag("div.e-reportdesigner-query-row","",{padding:f>0?"0px 4px":"6px 4px 14px 4px"},{id:t,rowId:t}),o=ej.buildTag("table.e-designer-table-dialog","",{width:"100%",top:f>0?"-13px":"",position:f>0?"relative":"",padding:"5px 0px",border:"0.5px solid #c9cbcc"},{id:t+"_query_container_table"}),a=ej.buildTag("tr","",{},{}),r=ej.buildTag("tr","",{},{}),v=ej.buildTag("td","",{"padding-left":"0px"},{id:t+"_query_container_cell"}),y=ej.buildTag("td","",{width:"20px","padding-left":"12px"},{}),p=ej.buildTag("input.e-textbox","",{},{type:"text",id:t+"_query_filter_field"}),w=ej.buildTag("td","",{"padding-top":"3px",width:"20px","padding-right":"7px"},{id:t+"_query_error_td"}),s,nt,h,c,l;ej.DashboardUtil.renderErrIndictor(w,this.id);var b=ej.buildTag("td","",{"padding-top":"6px","padding-right":"5px"},{}),k=ej.buildTag("span.e-chk-image e-icon e-cross-circle e-designer-delete-icon","",{cursor:"pointer"},{id:t+"_query_delete_icon",title:"Delete"}),d=ej.buildTag("tr","",{display:"none"},{id:t+"_tr_top"}),g=ej.buildTag("td","",{height:"4px"},{id:t+"_td_top",colspan:"4"}),ut=ej.buildTag("div","",{margin:"4px 0px",height:"auto",width:"100%"},{id:t+"_queryFilter_topDiv"});if(this.containerDiv.append(e),f>0&&(s=ej.buildTag("td","",{},{id:t+"_query_empty_cell"}),nt=ej.buildTag("div","",{height:"10px"},{}),s.append(nt),a.append(s),o.append(a),h=ej.buildTag("div","",{position:"relative","padding-left":"14px","z-index":1},{id:t+"_query_operator_type_div"}),c=ej.buildTag("input","",{},{type:"text",id:t+"_query_operator_type"}),h.append(c),e.append(h),c.ejDropDownList({width:"130px",height:"26px",dataSource:this.operatorTypes,fields:{text:"text",value:"value"},enabled:!1,selectedIndex:0,showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control e-background"})),e.append(o),o.append(r),r.append(y),y.append(p),r.append(v),r.append(w),r.append(b),b.append(k),o.append(d),d.append(g),g.append(ut),p.ejDropDownList({width:"130px",height:"26px",dataSource:this.dataFields,fields:{text:"text",value:"value"},enabled:!0,change:$.proxy(this.onDropDownChange,this,t,this.dataFields),selectedIndex:rt,showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"}),k.bind("click",$.proxy(this.deleteQueryFilter,this,e)),it&&(l=this.getFieldText(n.Id,n.TableName,n.Schema),this.getDrpDwn1(t).data("ejDropDownList").selectItemByText(l)),this.dataFields.length>0){var ft=this.getDrpDwn1(t).data("ejDropDownList").getSelectedItem(),l=$(ft).text(),tt=this.getSelectedValue(l);u=tt.typeName;i=tt.typeCast}return u=ej.isNullOrUndefined(i)||i.length===0||this.isDefaultCast(i)?u:i,this.renderInputField(u,t,v),this.scrollerRefresh(this.parentDiv),t},n.prototype.renderCheckboxItem=function(n,t,i){var r=ej.buildTag("td","",{align:"left",width:n.toLowerCase()==="false"?"67px":"98px","padding-left":"13px",height:"27px"}),u,f;i.append(r);u=ej.buildTag("input","",{},{type:"checkbox",id:t});r.append(u);f=ej.buildTag("label.e-designer-fontfamily",n,{"margin-left":"15px","font-size":"13px"},{id:t,"for":t});r.append(f);u.ejCheckBox({cssClass:"e-designer-param-assign"})},n.prototype.renderBoolFields=function(n,t){var u=ej.buildTag("table","",{width:"100%","background-color":"#ECECEC","padding-bottom":"3px","padding-top":"3px"},{}),i=ej.buildTag("tr","",{},{}),r;this.renderCheckboxItem("Null",n+"_query_bool_chkbx1",i);this.renderCheckboxItem("True",n+"_query_bool_chkbx2",i);this.renderCheckboxItem("False",n+"_query_bool_chkbx3",i);r=ej.buildTag("td","",{width:"113px","padding-left":"26px"});this.renderCodeSwitcher(n,r,QueryDatatype.Bool.toString());this.renderTopFields(n,QueryDatatype.Bool.toString());this.rootNode.find("#"+n+"_query_bool_topLable").css({"margin-top":"7px"});this.rootNode.find("#"+n+"_query_bool_chkSwitcher").css({"margin-top":"2px"});t.append(u);u.append(i);i.append(r)},n.prototype.renderInputField=function(n,t,i){ej.isNullOrUndefined(n)||(this.isNumber(n)?this.renderFields(t,i,n,QueryDatatype.Int.toString()):this.isString(n)?this.renderFields(t,i,n,QueryDatatype.Char.toString()):this.isBoolean(n)?this.renderBoolFields(t,i):this.isDate(n)&&this.renderFields(t,i,n,QueryDatatype.Date.toString()))},n.prototype.renderDateFields=function(n,t,i,r){var c=this.getDrpDwn1(n).data("ejDropDownList").getSelectedItem(),e=$(c).text(),o=this.getDrpDwn1(n).data("ejDropDownList").getSelectedValue(),u=ej.buildTag("td","",{"padding-left":"10px"},{id:n+"_query_date_pickcol"}),s=ej.buildTag("td","",{width:"122px","padding-left":"26px"},{id:n+"_query_"+r+"_switcher"}),f,h;this.renderCodeSwitcher(n,s,r);this.renderTopFields(n,r);t.append(u);f=ej.buildTag("div","",{width:"144px",height:"100%"},{id:n+"_query_date_picker_div"});u.append(f);this.multiSelectionComboBox.renderMultiSelectionComboBox(f,n,this.queryDesigner.dataset.Id);h=this.multiSelectionComboBox.getMultiSelectionComboBox(n);h.attr({"data-fieldValue":o,"data-fieldText":e,"data-dateFormat":this.getOperatorDrpDwn(n,r).data("ejDropDownList").getSelectedValue()});this.dateRangePopup.renderDateRangeDrpDwn(n,u,this.queryDesigner.dataset.Id,{Id:o,Name:e},null,"QueryFilter");t.append(s);this.getTxtColTag1(n,r).css("display","none")},n.prototype.renderStringFields=function(n,t,i,r){var y=this.getDrpDwn1(n).data("ejDropDownList").getSelectedItem(),p=$(y).text(),w=this.getDrpDwn1(n).data("ejDropDownList").getSelectedValue(),c=this.getOperatorDrpDwn(n,r).data("ejDropDownList").model.value.toLowerCase(),e=ej.buildTag("td","",{"padding-left":"10px"},{id:n+"_query_"+r+"_txtcol1"}),u=ej.buildTag("input.e-textbox e-designer-textbox-border","",{"padding-left":"9px",height:"22px",width:"134px",display:c==="inclusion"?"none":"block"},{type:"text",id:n+"_query_"+r+"_txtVal1"}),l=ej.buildTag("td","",{"padding-left":"10px",display:"none"},{id:n+"_query_"+r+"_txtcol2"}),f=ej.buildTag("input.e-textbox e-designer-textbox-border","",{height:"22px",display:"none"},{type:"text",id:n+"_query_"+r+"_txtVal2"}),a=ej.buildTag("input.e-textbox e-designer-textbox-border","",{height:"22px",width:"134px",display:"none"},{type:"text",readonly:"readonly",id:n+"_query_null_txt",value:"null"}),v=ej.buildTag("td","",{width:"122px","padding-left":"26px"},{id:n+"_query_"+r+"_switcher"}),o,s,h;t.append(e);e.append(u);(r===QueryDatatype.Char.toString()||r===QueryDatatype.Date.toString())&&(o=ej.buildTag("div","",{width:"144px",height:"100%"},{}),e.append(o),this.multiSelectionComboBox.renderMultiSelectionComboBox(o,n,this.queryDesigner.dataset.Id),s=this.multiSelectionComboBox.getMultiSelectionComboBox(n),h=null,r===QueryDatatype.Date.toString()&&(h=this.getOperatorDrpDwn(n,r).data("ejDropDownList").getSelectedValue()),s.attr({"data-fieldValue":w,"data-fieldText":p,"data-dateFormat":h}),s.css("display",c==="inclusion"?"block":"none"));f.val(r!==QueryDatatype.Char.toString()?"0":"");u.val(r!==QueryDatatype.Char.toString()?"0":"");t.append(l);l.append(f);r===QueryDatatype.Char.toString()&&(t.append(v),this.renderCodeSwitcher(n,v,r),this.renderTopFields(n,r));r===QueryDatatype.Int.toString()&&(e.append(a),this.renderNullField(n,t));(i==="System.Double"||i.toLowerCase()==="number"||i==="System.Single"||i==="System.Decimal")&&(f.val(r!==QueryDatatype.Char.toString()?"0.00":""),u.val(r!==QueryDatatype.Char.toString()?"0.00":""));r===QueryDatatype.Int.toString()&&(u.bind("keypress",$.proxy(this.validateTxtBox,this,u,i)),u.bind("focusin",$.proxy(this.textFocus,this,u,"focusin",i)),u.bind("focusout",$.proxy(this.textFocus,this,u,"focusout",i)),f.bind("keypress",$.proxy(this.validateTxtBox,this,f,i)),f.bind("focusin",$.proxy(this.textFocus,this,f,"focusin",i)),f.bind("focusout",$.proxy(this.textFocus,this,f,"focusout",i)),u.css({"text-align":"right","padding-right":"10px","padding-left":"0px"}),f.css({"text-align":"right","padding-right":"10px","padding-left":"0px"}),a.css({"text-align":"right","padding-right":"10px","padding-left":"0px"}))},n.prototype.dateFormats=function(n){var t;switch(n){case"Date Time":t=DateTimeFormat.Default;break;case"Date Hour":t=DateTimeFormat.DateHour;break;case"Month Year":t=DateTimeFormat.MonthYear;break;case"Week Year":t=DateTimeFormat.WeekYear;break;case"Quarter Year":t=DateTimeFormat.QuarterYear;break;case"Day Month Year":t=DateTimeFormat.DayMonthYear;break;case"Month Day Year":t=DateTimeFormat.MonthDayYear;break;case"Day of Week":t=DateTimeFormat.DayOfWeek;break;case"Week of Year":t=DateTimeFormat.WeekOfYear;break;case"Hours":t=DateTimeFormat.Hour;break;case"Minutes":t=DateTimeFormat.Minute;break;case"Seconds":t=DateTimeFormat.Second;break;default:t=n}return t},n.prototype.generateListDataSource=function(n){for(var i=[],t=0;t<n.length;t++)i.push({id:"item"+t,text:n[t]});return i},n.prototype.renderFields=function(n,t,i,r){var f=ej.buildTag("table","",{width:"100%","background-color":"#ECECEC","padding-bottom":"2px","padding-top":"2px"},{}),u=ej.buildTag("tr","",{},{}),e=ej.buildTag("td","",{width:"10px","padding-left":"10px"},{}),o=ej.buildTag("input","",{},{type:"text",id:n+"_query_"+r+"_operator"});t.append(f);f.append(u);u.append(e);e.append(o);o.ejDropDownList({dataSource:this.isDate(i)?this.dateTimeFormats:this.getOperatorsList(r),fields:{text:"text",value:"value"},enabled:!0,change:$.proxy(this.onOperatorChange,this,n,r),width:"130px",height:"26px",selectedIndex:0,showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"});(this.isNumber(i)||this.isString(i))&&this.renderStringFields(n,u,i,r);this.isDate(i)&&this.renderDateFields(n,u,i,r)},n.prototype.onOperatorChange=function(n,t,i){var s,c;if(i.isInteraction){var u=this.getOperatorDrpDwn(n,t).data("ejDropDownList").getSelectedValue(),f=this.getTxtValTag1(n,t),l=this.getTxtValTag2(n,t),h=this.getTxtColTag1(n,t),e=this.getTxtColTag2(n,t),a=this.rootNode.find("#"+n+"_query_int_null"),o=this.getNullTxtBxTag(n),v=this.getNullChkBx(n).data("ejCheckBox"),r=this.multiSelectionComboBox.getMultiSelectionComboBox(n);this.rootNode.find("#"+n+" .e-error-tip").css("display","none");t.toLowerCase()===QueryDatatype.Int.toString()?u.toLowerCase()===QueryOperator.Between.toString()||u.toLowerCase()===QueryOperator.NotBetween.toString()?(e.css({display:"table-cell"}),h.css({"padding-left":"10px"}),f.css({display:"block",width:"67px"}),l.css({display:"block",width:"71px"}),a.css({"padding-left":"15px"}),o.css("display","none")):(r.css("display","none"),e.css("display","none"),h.css({"padding-left":"10px"}),v.isChecked()?(f.css("display","none"),o.css("display","block")):(o.css("display","none"),f.css({display:"block",width:"134px"}))):t.toLowerCase()===QueryDatatype.Char.toString()?u.toLowerCase()==="inclusion"?(f.css("display","none"),e.css("display","none"),r.css("display","block"),r.find("div:first").text().toLowerCase()!=="all"&&r.find("div:first").html("All")):(f.css("display","block"),e.css("display","none"),r.css("display","none")):t.toLowerCase()===QueryDatatype.Date.toString()&&(u.toLowerCase()==="date"?(r.css("display","none"),this.getDateRangeDrpDwn(n).css("display","block")):(this.getDateRangeDrpDwn(n).css("display","none"),r.css("display","block"),s=this.getDrpDwn1(n).data("ejDropDownList"),r.attr({"data-fieldValue":s.getSelectedValue(),"data-fieldText":$(s).text(),"data-dateFormat":u}),c={IsCheckAll:!0,IsInclude:!0,FilterValues:null},this.multiSelectionComboBox.populateMultiSelectionItem(n,c)))}},n.prototype.addQueryFilter=function(){this.renderQueryFilterRow()},n.prototype.deleteFilter=function(n){this.containerDiv.context.children[n].remove()},n.prototype.deleteQueryFilter=function(n){var r=n.parent(),f;if(n.remove(),r.children().length>0){var t=r.children().first(),i=t.attr("id"),u=t.find("#"+i+"_query_operator_type_div");u.length>0&&(f=t.find("#"+i+"_query_container_table"),t.css("padding","6px 4px 14px 4px"),f.css({top:"",position:""}),t.find("#"+i+"_query_empty_cell").parent().remove(),u.remove())}$("#"+n.attr("rowId")+"_popup_container").remove();$("#"+n.attr("rowId")+"_dateRange_popup").remove();this.scrollerRefresh(this.parentDiv)},n.prototype.onDropDownChange=function(n,t,i){if(i.isInteraction){$("#"+n).find(".e-error-tip").css("display","none");this.resetQueryFields(n);var f=this.rootNode.find("#"+n+"_query_container_cell"),e=this.getDrpDwn1(n).data("ejDropDownList").getSelectedItem(),o=$(e).text(),r=this.getSelectedValue(o),u=r.typeName;u=ej.isNullOrUndefined(r.typeCast)||r.typeCast.length===0||this.isDefaultCast(r.typeCast)?u:r.typeCast;this.renderInputField(u,n,f)}},n.prototype.onNullCheck=function(n,t){var u=this.getTxtValTag1(n,QueryDatatype.Int.toString()),f=this.getTxtValTag2(n,QueryDatatype.Int.toString()),e=this.getTxtColTag2(n,QueryDatatype.Int.toString()),r=this.getOperatorDrpDwn(n,QueryDatatype.Int.toString()).data("ejDropDownList"),i=r.getSelectedValue(),o=this.getNullTxtBxTag(n);t.isInteraction&&(t.isChecked?(u.css("display","none"),f.css("display","none"),e.css("display","none"),o.css("display","block")):(o.css("display","none"),f.css("display","none"),e.css("display","none"),u.css({display:"block",width:"134px"})),r.setModel({dataSource:t.isChecked?[{text:"Equals",value:"Equals"},{text:"Does Not Equals",value:"DoesNotEquals"}]:this.getOperatorsList(QueryDatatype.Int.toString()),selectedIndex:0,fields:{text:"text",value:"value"}}),i=i===NumberFilterOption.Equals.toString()||i===NumberFilterOption.NotEquals.toString()?i:"Equals",r.selectItemByValue(i))},n.prototype.textFocus=function(n,t,i){t.toLowerCase()==="focusin"?(n.val()==="0"||n.val()==="0.00")&&n.val(""):t.toLowerCase()==="focusout"&&(i==="System.Int32"||i==="System.Int16"||i==="System.Int64"||i==="System.Byte"?n.val(n.val().length===0?"0":n.val()):(i==="System.Double"||i.toLowerCase()==="number"||i==="System.Single"||i==="System.Decimal")&&n.val(n.val().length===0?"0.00":n.val()))},n.prototype.conditionCheck=function(n){var t=this.getChkBx1(n).data("ejCheckBox"),i=this.getChkBx2(n).data("ejCheckBox"),r=this.getChkBx3(n).data("ejCheckBox"),u=this.rootNode.find("#"+n+QueryDatatype.Bool.toString()+"_chck_on").is(":checked");return t.isChecked()&&i.isChecked()&&r.isChecked()&&!u?!0:!t.isChecked()&&!i.isChecked()&&!r.isChecked()?!0:!1},n.prototype.validateTxtBox=function(n,t,i){var r=i.keyCode,u;if(t==="System.Int32"||t==="System.Int16"||t==="System.Int64"||t==="System.Byte")return r===8||!(r>31)||!(r<48||r>57)||r===45?(u=n.val(),r===45&&u!=="")?!1:!0:!1;if(t==="System.Double"||t==="System.Single"||t==="System.Decimal"||t.toLowerCase()==="number"){if(r===46)return n.val().indexOf(".")===-1?!0:!1;if(!(r===8)&&r>31&&(r<48||r>57)&&!(r===45))return!1}},n.prototype.validateValues=function(n,t,i,r){var u="";return this.isDate(t)||this.isString(t)?n==="true"?this.updateHighlighter(i,!0):this.updateHighlighter(i,!1):this.isBoolean(t)&&(this.conditionCheck(n)?(i.addClass("e-designer-error").addClass("e-designer-error-radius"),u+="The filter on "+r+" does not have proper values to filter on. "):i.removeClass("e-designer-error").removeClass("e-designer-error-radius")),u},n.prototype.updateHighlighter=function(n,t){t?n.find(".e-in-wrap e-box e-padding").addClass("e-designer-error").addClass("e-designer-error-radius"):n.find(".e-in-wrap e-box e-padding").removeClass("e-designer-error").removeClass("e-designer-error-radius")},n.prototype.resetQueryFields=function(n){this.rootNode.find("#"+n+"_query_container_cell").empty();$("#"+n+"_dateRange_popup").remove();this.rootNode.find("#"+n+"_queryFilter_topDiv").empty();this.rootNode.find("#"+n+"_tr_top").css("display","none")},n.prototype.openQueryFilterDialog=function(){$("#"+this.id+"_query_filter_dialog").data("ejDialog").open();this.resetQueryFilterDialog();this.dataFields=this.getAvailableDataFields();this.queryFilters=this.queryDesigner.queryFilter;this.populateQueryFilter(this.queryFilters)},n.prototype.closeDialog=function(){this.multiSelectionComboBox.hideMultiSelectionWaitingPopup();$("#"+this.id+"_query_filter_dialog").data("ejDialog").close()},n.prototype.closePopup=function(){$(".e-daterange-popup:visible").css("display","none");$(".e-multiselect-popup-container").css("display","none")},n.prototype.resetQueryFilterDialog=function(){this.dataFields=[];this.parameters=[];this.containerDiv.empty();this.scrollerRefresh(this.parentDiv)},n.prototype.populateQueryFilter=function(n){for(var u,t=0;t<n.length;t++){var r=this.renderQueryFilterRow(n[t]),i=n[t].DataType,f=n[t].IsTypeCast;i=f?n[t].TypeCastValue:i;t>0&&(u=n[t].OperatorType,this.getOperatorTypeDropDown(r).data("ejDropDownList").selectItemByValue(u));this.isNumber(i)?this.populateIntField(r,n[t]):this.isBoolean(i)?this.populateBoolFilter(r,n[t]):this.isString(i)?this.populateStringField(r,n[t]):this.isDate(i)&&this.populateDateFields(r,n[t])}},n.prototype.getFieldText=function(n){if(this.dataFields&&this.dataFields.length>0)for(var t=0;t<this.dataFields.length;t++)if(this.dataFields[t].value===n)return this.dataFields[t].text},n.prototype.populateIntField=function(n,t){var i=t.MeasureFilterSchemaInfo,r=i.FilterValues,e=this.getTxtValTag1(n,QueryDatatype.Int.toString()),u=this.getTxtValTag2(n,QueryDatatype.Int.toString()),o=this.getTxtColTag1(n,QueryDatatype.Int.toString()),s=this.getTxtColTag2(n,QueryDatatype.Int.toString()),h=this.rootNode.find("#"+n+"_query_int_null"),c=this.getNullTxtBxTag(n),f=this.getOperatorDrpDwn(n,QueryDatatype.Int.toString()).data("ejDropDownList"),l=this.getFieldText(i.ColumnId,t.TableName,t.Schema);this.getDrpDwn1(n).data("ejDropDownList").selectItemByText(l);this.getTxtValTag1(n,QueryDatatype.Int.toString()).val(r[0]);(i.MeasureFilterCondition.toLowerCase()===QueryOperator.Between.toString()||i.MeasureFilterCondition.toLowerCase()===QueryOperator.NotBetween.toString())&&(s.css({display:"table-cell"}),o.css({"padding-left":"10px"}),e.css({display:"block",width:"67px"}),u.css({display:"block",width:"71px"}),h.css({"padding-left":"15px"}),c.css("display","none"),this.getTxtColTag2(n,QueryDatatype.Int.toString()).css("display","table-cell"),u.val(r[1]));this.getNullChkBx(n).data("ejCheckBox").setModel({checked:i.IsIncludeNull});this.getTxtValTag1(n,QueryDatatype.Int.toString()).css("display",i.IsIncludeNull?"none":"block");this.rootNode.find("#"+n+"_query_null_txt").css("display",i.IsIncludeNull?"block":"none");f.setModel({dataSource:i.IsIncludeNull?[{text:"Equals",value:"Equals"},{text:"Does Not Equals",value:"DoesNotEquals"}]:this.getOperatorsList(QueryDatatype.Int.toString()),selectedIndex:0,fields:{text:"text",value:"value"}});f.selectItemByValue(i.MeasureFilterCondition)},n.prototype.populateStringField=function(n,t){var r=this.getTxtValTag1(n,QueryDatatype.Char.toString()),f=this.getTxtColTag2(n,QueryDatatype.Char.toString()),u=this.multiSelectionComboBox.getMultiSelectionComboBox(n),i=t.DimensionFilterSchemaInfo,e=this.getFieldText(t.Id,t.TableName,t.Schema),o={FilterValues:i.FilterValues,IsInclude:i.IsInclude,IsCheckAll:i.IsCheckAll};this.multiSelectionComboBox.populateMultiSelectionItem(n,o);this.getDrpDwn1(n).data("ejDropDownList").selectItemByText(e);this.getOperatorDrpDwn(n,QueryDatatype.Char.toString()).data("ejDropDownList").selectItemByValue(i.DimensionFilterCondition);i.DimensionFilterCondition.toLowerCase()===DimensionFilterCondition.Inclusion.toString().toLowerCase()?(r.css("display","none"),f.css("display","none"),u.css("display","block")):(u.css("display","none"),r.css("display","block"),i.FilterValues&&i.FilterValues[0]&&r.val(i.FilterValues[0]));this.rootNode.find("#"+n+QueryDatatype.Char.toString()+"_chck_on").prop("checked",i.IsTopNApplied);i.IsTopNApplied&&(this.rootNode.find("#"+n+"_tr_top").css("display","table-row"),this.populateTopFields(n,i.TopNFilterConditionInfo,t,QueryDatatype.Char.toString()))},n.prototype.populateTopFields=function(n,t,i,r){var u=t,o,s;if(u){o=u.TopNCondition===0||u.TopNCondition==="Top"?"Top":"Bottom";this.getTopModeItem(n,r).data("ejDropDownList").selectItemByText(o);this.getTopCountItem(n,r).data("ejNumericTextbox").setModel({value:u.NumberOfItems});s=this.getFieldText(u.ColumnId,i.TableName,i.Schema);this.getTopColumnItem(n,r).data("ejDropDownList").selectItemByText(s);var f=this.getTopSummaryItem(n,r),e=this.getTopFormatItem(n,r),h=u.SummaryType;u.IsFormatAppliedForDateField?(this.getCheckBoxCell(n,r).css({display:"block","padding-top":"3px"}),this.getTopDateTimeItem(n,r).data("ejCheckBox").setModel({checked:u.IsFormatAppliedForDateField}),e.css("display","block"),f.css("display","none"),e.data("ejDropDownList").selectItemByValue(u.DateAndTimeFormat)):(e.css("display","none"),f.css("display","block"),f.data("ejDropDownList").selectItemByValue(h))}},n.prototype.populateDateFields=function(n,t){var i=t.DateFilterSchemaInfo,u=this.getOperatorDrpDwn(n,QueryDatatype.Date.toString()).data("ejDropDownList"),f=this.getFieldText(t.Id,t.TableName,t.Schema),r;this.getDrpDwn1(n).data("ejDropDownList").selectItemByText(f);this.rootNode.find("#"+n+QueryDatatype.Date.toString()+"_chck_on").prop("checked",i.IsTopNApplied);i.IsTopNApplied&&(this.rootNode.find("#"+n+"_tr_top").css("display","table-row"),this.populateTopFields(n,i.TopNFilterConditionInfo,t,QueryDatatype.Date.toString()));i.DateAndTimeFormatCondition.toLowerCase()===QueryDatatype.Date.toString()?(this.multiSelectionComboBox.getMultiSelectionComboBox(n).css("display","none"),this.getDateRangeDrpDwn(n).css("display","block"),this.dateRangePopup.populateDateRangePopup(n,i.DateFormatInfo)):(r={FilterValues:i.FilterValues,IsInclude:i.IsInclude,IsCheckAll:i.IsCheckAll},this.multiSelectionComboBox.populateMultiSelectionItem(n,r),this.multiSelectionComboBox.getMultiSelectionComboBox(n).attr({"data-dateFormat":i.DateAndTimeFormatCondition}));u.selectItemByValue(i.DateAndTimeFormatCondition)},n.prototype.populateBoolFilter=function(n,t){var i=t.BooleanFilterSchemaInfo,r=this.getFieldText(t.Id,t.TableName,t.Schema);this.getDrpDwn1(n).data("ejDropDownList").selectItemByText(r);this.rootNode.find("#"+n+QueryDatatype.Bool.toString()+"_chck_on").prop("checked",i.IsTopNApplied);this.getChkBx1(n).data("ejCheckBox").setModel({checked:i.IsNullEnabled});this.getChkBx2(n).data("ejCheckBox").setModel({checked:i.IsTrueEnabled});this.getChkBx3(n).data("ejCheckBox").setModel({checked:i.IsFalseEnabled});i.IsTopNApplied&&(this.rootNode.find("#"+n+"_tr_top").css("display","table-row"),this.populateTopFields(n,i.TopNFilterConditionInfo,t,QueryDatatype.Bool.toString()))},n.prototype.getQueryFilter=function(){var t=this,u=[],n={},r,i="",f=!1,e=this.rootNode.find("#"+this.id+"_query_container_div .e-reportdesigner-query-row"),o=this;return e.each(function(e,s){var h={Name:"",Id:"",Type:"",MeasureFilterSchemaInfo:{ColumnName:"",ColumnId:"",MeasureFilterCondition:MeasureFilterCondition.Equals,FilterValues:[],IsIncludeNull:!1},DimensionFilterSchemaInfo:{ColumnName:"",ColumnId:"",DimensionFilterCondition:DimensionFilterCondition.Inclusion,IsCheckAll:!0,IsInclude:!0,FilterValues:[],IsTopNApplied:!1,TopNFilterConditionInfo:{}},DateFilterSchemaInfo:{ColumnName:"",ColumnId:"",DateAndTimeFormatCondition:DateTimeFormat.Year,IsCheckAll:!0,IsInclude:!0,FilterValues:[],IsTopNApplied:!1,TopNFilterConditionInfo:{},DateFormatInfo:{DateFormatCondition:DateFormatOption.Range,StartDate:"",EndDate:""}},BooleanFilterSchemaInfo:{ColumnName:"",ColumnId:"",IsNullEnabled:!1,IsTrueEnabled:!1,IsFalseEnabled:!1,IsTopNApplied:!1,TopNFilterConditionInfo:{}},OperatorType:OperatorType.And,Schema:"",DataType:"",TableName:"",TableId:"",IsTypeCast:"",TypeCastValue:""},l=$(s).attr("id"),w=t.getDrpDwn1(l).data("ejDropDownList").getSelectedItem(),v=t.getDrpDwn1(l).data("ejDropDownList").getSelectedValue(),b=$(w).text(),c=t.getSelectedValue(b),y=ej.isNullOrUndefined(c.typeCast)||c.typeCast.length===0||t.isDefaultCast(c.typeCast),a,p;r=y?c.typeName:c.typeCast;a=c.columnName;h.Name=a;h.Id=v;t.isNumber(r)?(n=t.getIntVal(l),h.Type="Measure",h.MeasureFilterSchemaInfo.ColumnName=a,h.MeasureFilterSchemaInfo.ColumnId=v,h.MeasureFilterSchemaInfo.MeasureFilterCondition=n.MeasureFilterCondition,h.MeasureFilterSchemaInfo.FilterValues=n.FilterValues,h.MeasureFilterSchemaInfo.IsIncludeNull=n.IsIncludeNull):t.isBoolean(r)?(n=t.getBoolVal(l),h.Type="Boolean",h.BooleanFilterSchemaInfo.ColumnName=a,h.BooleanFilterSchemaInfo.ColumnId=v,h.BooleanFilterSchemaInfo.IsTrueEnabled=n.IsTrueEnabled,h.BooleanFilterSchemaInfo.IsNullEnabled=n.IsNullEnabled,h.BooleanFilterSchemaInfo.IsFalseEnabled=n.IsFalseEnabled,h.BooleanFilterSchemaInfo.IsTopNApplied=n.IsTopNApplied,h.BooleanFilterSchemaInfo.TopNFilterConditionInfo=n.TopNFilterConditionInfo,i+=t.validateValues(l,c.typeName,t.rootNode.find("#"+l+"_query_filter_field_container"),c.value)):t.isString(r)?(n=t.getStringVal(l),h.Type="Dimension",h.DimensionFilterSchemaInfo.ColumnName=a,h.DimensionFilterSchemaInfo.ColumnId=v,h.DimensionFilterSchemaInfo.DimensionFilterCondition=n.DimensionFilterCondition,h.DimensionFilterSchemaInfo.FilterValues=n.FilterValues,h.DimensionFilterSchemaInfo.IsInclude=n.IsInclude,h.DimensionFilterSchemaInfo.IsCheckAll=n.IsCheckAll,h.DimensionFilterSchemaInfo.IsTopNApplied=n.IsTopNApplied,h.DimensionFilterSchemaInfo.TopNFilterConditionInfo=n.TopNFilterConditionInfo,!n.IsTopNApplied&&n.IsCheckAll&&n.DimensionFilterCondition.toLowerCase()===DimensionFilterCondition.Inclusion.toString().toLowerCase()?(t.validateValues("true",c.typeName,t.rootNode.find("#"+l+"_query_filter_field_container")),i+=t.dashboardDesigner.locale.errorMessage.formattedValueInvalid):t.validateValues("false",c.typeName,t.rootNode.find("#"+l+"_query_filter_field_container"))):t.isDate(r)&&(n=t.getDateVal(l),h.Type="Date",h.DateFilterSchemaInfo.ColumnName=a,h.DateFilterSchemaInfo.ColumnId=v,h.DateFilterSchemaInfo.DateAndTimeFormatCondition=n.DateAndTimeFormatCondition,h.DateFilterSchemaInfo.FilterValues=n.FilterValues,h.DateFilterSchemaInfo.IsInclude=n.IsInclude,h.DateFilterSchemaInfo.IsCheckAll=n.IsCheckAll,h.DateFilterSchemaInfo.IsTopNApplied=n.IsTopNApplied,h.DateFilterSchemaInfo.TopNFilterConditionInfo=n.TopNFilterConditionInfo,h.DateFilterSchemaInfo.DateFormatInfo=!ej.isNullOrUndefined(n.DateFormatInfo)&&!n.DateFormatInfo.IsFilterApplied?null:n.DateFormatInfo,!n.IsTopNApplied&&n.IsCheckAll&&n.DateAndTimeFormatCondition.toLowerCase()!=="date"?(t.validateValues("true",c.typeName,t.rootNode.find("#"+l+"_query_filter_field_container")),i+="Value is an invalid date format."):!n.IsTopNApplied&&ej.isNullOrUndefined(h.DateFilterSchemaInfo.DateFormatInfo)&&n.DateAndTimeFormatCondition.toLowerCase()==="date"?(t.validateValues("true",c.typeName,t.rootNode.find("#"+l+"_query_filter_field_container")),i+="Value is an invalid date format."):t.validateValues("false",c.typeName,t.rootNode.find("#"+l+"_query_filter_field_container")));p=t.getOperatorTypeDropDown(l);h.OperatorType=ej.isNullOrUndefined(p)||p.length<1?OperatorType.And:o.getOperatorTypeDropDown(l).data("ejDropDownList").getSelectedValue();h.Schema=c.schema;h.DataType=c.typeName;h.TableName=c.table;h.TableId=c.tableId;h.IsTypeCast=y?!1:!0;h.TypeCastValue=y?"":c.typeCast;u.push(h);ej.isNullOrUndefined(i)||i.length===0?ej.DashboardUtil.showErrIndictor(t.rootNode.find("#"+l+"_query_error_td"),!1,i):(ej.DashboardUtil.showErrIndictor(t.rootNode.find("#"+l+"_query_error_td"),!0,i),i="",f=!0)}),{queryFilters:u,hasErrors:f}},n.prototype.getIntVal=function(n){var t,i,r=[],f=this.getNullChkBx(n).data("ejCheckBox").isChecked(),u=this.getOperatorDrpDwn(n,QueryDatatype.Int.toString()).data("ejDropDownList").getSelectedValue();return t=this.getTxtValTag1(n,QueryDatatype.Int.toString()).val(),t=t==="0.00"?0:t,(u.toLowerCase()===QueryOperator.Between.toString()||u.toLowerCase()===QueryOperator.NotBetween.toString())&&(i=this.getTxtValTag2(n,QueryDatatype.Int.toString()).val()),i=i==="0.00"?0:i,r.push(t),r.push(i),{MeasureFilterCondition:u,FilterValues:r,IsIncludeNull:f}},n.prototype.getDateVal=function(n){var i="",r="",u=!1,t,f=DateFormatOption.Range.toString(),e=this.getTopSwitcherTag(n,QueryDatatype.Date.toString()).is(":checked"),o=this.getOperatorDrpDwn(n,QueryDatatype.Date.toString()).data("ejDropDownList").getSelectedValue(),s=[],h=!1,c=!1,l;return o.toLowerCase()===QueryDatatype.Date.toString()?(t=this.dateRangePopup.getDateRangeValues(n),i=t.StartDate,r=t.EndDate,u=t.IsFilterApplied,f=t.DateFormatCondition):(t=this.multiSelectionComboBox.getPopupContainerInformation(n),ej.isNullOrUndefined(t)||(s=t.FilterValues,h=t.IsInclude,c=t.IsCheckAll)),l=e?this.getTopNVal(n,QueryDatatype.Date.toString()):{},{DateAndTimeFormatCondition:o,IsInclude:h,FilterValues:s,IsCheckAll:c,IsTopNApplied:e,TopNFilterConditionInfo:l,DateFormatInfo:{DateFormatCondition:f,StartDate:i,EndDate:r,IsFilterApplied:u}}},n.prototype.getStringVal=function(n){var r=this.getOperatorDrpDwn(n,QueryDatatype.Char.toString()).data("ejDropDownList").getSelectedValue(),u,i=[],f=!1,e=!1,t,o=this.getTopSwitcherTag(n,QueryDatatype.Char.toString()).is(":checked"),s;return r.toLowerCase()===DimensionFilterCondition.Inclusion.toString().toLowerCase()?(t=this.multiSelectionComboBox.getPopupContainerInformation(n),ej.isNullOrUndefined(t)||(i=t.FilterValues,f=t.IsInclude,e=t.IsCheckAll)):(u=this.getTxtValTag1(n,QueryDatatype.Char.toString()).val(),i.push(u)),s=o?this.getTopNVal(n,QueryDatatype.Char.toString()):{},{DimensionFilterCondition:r,FilterValues:i,TopNFilterConditionInfo:s,IsInclude:f,IsCheckAll:e,IsTopNApplied:o}},n.prototype.getBoolVal=function(n){var i=this.getChkBx1(n).data("ejCheckBox"),r=this.getChkBx2(n).data("ejCheckBox"),u=this.getChkBx3(n).data("ejCheckBox"),t=this.getTopSwitcherTag(n,QueryDatatype.Bool.toString()).is(":checked"),f=t?this.getTopNVal(n,QueryDatatype.Bool.toString()):{};return{IsNullEnabled:i.isChecked(),IsTrueEnabled:r.isChecked(),TopNFilterConditionInfo:f,IsFalseEnabled:u.isChecked(),IsTopNApplied:t}},n.prototype.getTopNVal=function(n,t){var i=this.getTopColumnItem(n,t).data("ejDropDownList").getSelectedItem(),r=this.getTopModeItem(n,t).data("ejDropDownList").getSelectedValue(),u=this.getTopCountItem(n,t).val(),f=$(i).text(),e=this.getTopColumnItem(n,t).data("ejDropDownList").getSelectedValue(),o=this.getTopSummaryItem(n,t).data("ejDropDownList").getSelectedValue(),s=this.getTopDateTimeItem(n,t).data("ejCheckBox").isChecked(),h=this.getTopFormatItem(n,t).data("ejDropDownList").getSelectedValue();return{TopNCondition:r==="Top"?FilterRange.Top:FilterRange.Bottom,NumberOfItems:u,ColumnName:f,ColumnId:e,SummaryType:o,IsFormatAppliedForDateField:s,DateAndTimeFormat:h}},n.prototype.saveQueryFilter=function(){var n=this.getQueryFilter();this.paramNameList=[];n.hasErrors||this.multiSelectionComboBox.isMultiSelectionPopupLoading()||(ej.DashboardUtil.isEqualObj(this.queryFilters,n.queryFilters)||(this.queryDesigner.queryFilter=n.queryFilters,this.queryDesigner.isInitialFilterApplied=!0,this.queryDesigner.executeUIQuery(),this.queryDesigner.isInitialFilterApplied=!1),this.closeDialog())},n.prototype.renderCodeSwitcher=function(n,t,i){var r=ej.buildTag("div","",{display:"block",width:"89px"},{id:n+"_query_"+i+"_switcherDiv"}),e=ej.buildTag("span.e-designer-label","TOP N",{display:"inline-block",float:"left","line-height":"normal","margin-right":"7px","margin-top":"2px",cursor:"default"}),u=ej.buildTag("label.e-reportdesigner-switch","",{display:"inline-block",float:"left"},{id:n+"_query_"+i+"_chkSwitcher"}),f=$("<input type='checkbox' id="+n+i+"_chck_on checked>");u.append(f);u.append("<div style='cursor:pointer;' class='e-reportdesigner-slider round'/>");f.prop("checked",!1);r.append(e);r.append(u);t.append(r);f.bind("change",$.proxy(this.onSwitcherChange,this,n,i))},n.prototype.onSwitcherChange=function(n,t){var i=this.rootNode.find("#"+n+t+"_chck_on").is(":checked"),r=i?"table-row":"none";this.rootNode.find("#"+n+"_tr_top").css("display",r);this.rootNode.find("#"+n+" .e-error-tip").css("display","none");this.scrollerRefresh(this.parentDiv)},n.prototype.renderTopFields=function(n,t){var w=this.rootNode.find("#"+n+"_queryFilter_topDiv"),s=ej.buildTag("table","",{width:"100%"},{}),h=ej.buildTag("tr","",{},{}),r,u,i,f,p,e,o;w.append(s);s.append(h);var c=ej.buildTag("td","",{padding:"0px 5px 0px 10px",width:"130px"},{}),l=ej.buildTag("td","",{padding:"0px 5px",width:"90px"},{}),a=ej.buildTag("td","",{padding:"0px 5px",width:"130px"},{}),v=ej.buildTag("td","",{"padding-left":"5px",display:"none"},{id:n+"_query_"+t+"_checkBox_cell"}),y=ej.buildTag("td","",{padding:"0px 5px"},{id:n+"_query_"+t+"_format_cell"});h.append(c).append(l).append(a).append(v).append(y);r=ej.buildTag("input.e-field e-ejinputtext","",{width:"130px"},{type:"text",id:n+"_query_"+t+"_top_mode"});c.append(r);u=ej.buildTag("input","",{width:"90px"},{type:"text",id:n+"_query_"+t+"_top_count"});l.append(u);i=ej.buildTag("input.e-field e-ejinputtext","",{width:"130px"},{type:"text",id:n+"_query_"+t+"_top_column"});a.append(i);f=ej.buildTag("input","",{},{type:"checkbox",id:n+"_query_"+t+"_top_datetime"});p=ej.buildTag("label","Format",{"margin-left":"10px"},{"for":n+"_query_"+t+"_top_datetime"});v.append(f).append(p);e=ej.buildTag("input.e-field e-ejinputtext","",{width:"130px"},{type:"text",id:n+"_query_"+t+"_top_summary"});o=ej.buildTag("input.e-field e-ejinputtext","",{width:"130px"},{type:"text",id:n+"_query_"+t+"_top_format"});y.append(e).append(o);r.ejDropDownList({width:"130px",dataSource:this.modeTypes,fields:{text:"text",value:"value"},selectedIndex:0,enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"});u.ejNumericTextbox({showSpinButton:!1,decimalPlaces:0,value:5,minValue:1,maxValue:1e10,showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",width:"90px"});i.ejDropDownList({width:"130px",dataSource:this.dataFields,fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateTopColumnState,this,n,t)});f.ejCheckBox({width:"100%",change:$.proxy(this.updateFormatValidation,this,n,t)});e.ejDropDownList({width:"130px",dataSource:this.dimensionFormats,fields:{text:"text",value:"value"},selectedIndex:0,enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"});o.ejDropDownList({width:"130px",dataSource:this.dateTimeformatforTopN,fields:{text:"text",value:"value"},selectedIndex:0,enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"});i.data("ejDropDownList").setModel({selectedIndex:0});this.rootNode.find("#"+n+"_query_"+t+"_top_format_wrapper").css("display","none")},n.prototype.renderNullField=function(n,t){var i=ej.buildTag("td","",{width:"122px","padding-bottom":"5px"},{id:n+"_query_int_null"}),r=ej.buildTag("input","",{},{type:"checkbox",id:n+"_queryint_nullChkbx"}),u=ej.buildTag("Label","Include Null",{"padding-left":"8px","font-size":"12px","font-weight":"600"},{type:"checkbox",id:n+"_queryint_nullChkbx"});t.append(i);i.append(r);i.append(u);r.ejCheckBox({checked:!1,cssClass:"e-designer-param-assign",change:$.proxy(this.onNullCheck,this,n)})},n.prototype.getTopModeItem=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_top_mode")},n.prototype.getTopCountItem=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_top_count")},n.prototype.getTopColumnItem=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_top_column")},n.prototype.getTopDateTimeItem=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_top_datetime")},n.prototype.getTopSummaryItem=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_top_summary")},n.prototype.getTopFormatItem=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_top_format")},n.prototype.getCheckBoxCell=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_checkBox_cell")},n.prototype.getFormatCell=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_format_cell")},n.prototype.updateFormatValidation=function(n,t,i){var r=this.rootNode.find("#"+n+"_query_"+t+"_top_summary_wrapper"),u=this.rootNode.find("#"+n+"_query_"+t+"_top_format_wrapper");i.isChecked?(u.css("display","block"),r.css("display","none")):(u.css("display","none"),r.css("display","block"))},n.prototype.updateTopColumnState=function(n,t,i){var f=this.getTopSummaryItem(n,t),o=this.rootNode.find("#"+n+"_query_"+t+"_top_format_wrapper"),r=this.getSelectedItem(i.value),e=r.typeName,u;e=ej.isNullOrUndefined(r.typeCast)||r.typeCast.length===0||this.isDefaultCast(r.typeCast)?e:r.typeCast;this.isDate(e)?(this.getCheckBoxCell(n,t).css({display:"block","padding-top":"3px"}),u=this.getTopDateTimeItem(n,t).data("ejCheckBox").model.checked,this.rootNode.find("#"+n+"_query_"+t+"_top_summary_wrapper").css("display",u?"none":"block"),o.css("display",u?"block":"none"),u||(f.data("ejDropDownList").setModel({dataSource:u?this.dateTimeformatforTopN:this.dimensionFormats}),f.data("ejDropDownList").setModel({selectedIndex:0}))):(this.getCheckBoxCell(n,t).css("display","none"),f.data("ejDropDownList").setModel({dataSource:this.isNumber(e)?this.measureFormats:this.dimensionFormats}),f.data("ejDropDownList").setModel({selectedIndex:0}),this.rootNode.find("#"+n+"_query_"+t+"_top_summary_wrapper").css("display","block"),o.css("display","none"))},n.prototype.getTableData=function(n,t){for(var r,i=0;i<n.length;i++)if(r=$(n[i]).data("e-table"),r.name===t)return $(n[i]);return $(n[0])},n.prototype.getAvailableDataFields=function(){for(var f=this.queryDesigner.element.find("#"+this.id+"_div_dragSurface .e-data-table"),i=[],n=0;n<this.queryDesigner.tableType.length;n++)if(this.queryDesigner.tableType[n].IsVisible){var r=this.getTableData(f,this.queryDesigner.tableType[n].TableName),u=$(r).data("e-table"),t=this.queryDesigner.tableType[n].DataType,e=ej.DashboardUtil.escapeSelector(this.queryDesigner.tableType[n].Name),o=$(r).find("#"+this.id+"_li_"+e).attr("e-column-type"),s=ej.isNullOrUndefined(this.queryDesigner.tableType[n].TableId);t==="geography"||t==="hierarchyid"||t==="xml"||s||i.push({text:this.queryDesigner.tableType[n].Name,value:this.queryDesigner.tableType[n].ID,columnName:this.queryDesigner.tableType[n].Name,typeName:this.getTypeName(t),table:u.name,schema:u.schema,typeCast:o,tableId:this.queryDesigner.tableType[n].TableId})}return i},n.prototype.getTypeName=function(n){var t=n.toLowerCase();return t==="int"||t==="integer"?"System.Int32":t==="nchar"||t==="ntext"||t==="nvarchar"||t==="text"||t==="varchar"||t==="char"||t==="string"?"System.String":t==="decimal"||t==="money"||t==="smallmoney"||t==="numeric"?"System.Decimal":t==="float"?"System.Double":t==="smallint"?"System.Int16":t==="bigint"?"System.Int64":t==="real"?"System.Single":t==="tinyint"?"System.Byte":t==="uniqueidentifier"?"System.Guid":t==="datetime"||t==="datetime2"||t==="smalldatetime"||t==="date"?"System.DateTime":t==="datetimeoffset"?"System.DateTimeOffset":t==="bit"||t==="boolean"?"System.Boolean":t!=="timestamp"&&t==="time"?"System.TimeSpan":void 0},n.prototype.getCurrentIndex=function(){var t=this.rootNode.find("#"+this.id+"_query_container_div .e-reportdesigner-query-row"),i,n;return t.length>0?(i=this.rootNode.find("#"+this.id+"_query_container_div .e-reportdesigner-query-row")[t.length-1].id,n=this.getDrpDwn1(i).data("ejDropDownList").option("selectedIndex"),n>=this.dataFields.length-1?0:n+1):0},n.prototype.getSelectedItem=function(n){for(var t=0;t<this.dataFields.length;t++)if(n===this.dataFields[t].value)return this.dataFields[t]},n.prototype.getSelectedValue=function(n){for(var t=0;t<this.dataFields.length;t++)if(n===this.dataFields[t].text)return this.dataFields[t]},n.prototype.setItemDataSource=function(){this.dateTimeFormats=[{value:"Year",text:"Year"},{value:"Quarter",text:"Quarter"},{value:"Month",text:"Month"},{value:"MonthYear",text:"Month Year"},{value:"WeekYear",text:"Week Year"},{value:"QuarterYear",text:"Quarter Year"},{value:"DayMonthYear",text:"Day Month Year"},{value:"MonthDayYear",text:"Month Day Year"},{value:"DateHour",text:"Date Hour"},{value:"DayOfWeek",text:"Day of Week"},{value:"WeekOfYear",text:"Week of Year"},{value:"Day",text:"Day"},{value:"Hour",text:"Hours"},{value:"Minute",text:"Minutes"},{value:"Second",text:"Seconds"},{value:"Time",text:"Time"},{value:"Date",text:"Date"},];this.dateTimeformatforTopN=this.getDateTimeFormatsForTopN();this.dimensionFormats=[{value:"COUNT",text:"Count"},{value:"COUNTD",text:"Distinct Count"}];this.measureFormats=[{value:"SUM",text:"Sum"},{value:"COUNT",text:"Count"},{value:"COUNTD",text:"Distinct Count"},{value:"MAX",text:"Max"},{value:"MIN",text:"Min"},{value:"AVG",text:"Avg"},{value:"NONE",text:"None"}];this.modeTypes=[{value:"Top",text:"Top"},{value:"Bottom",text:"Bottom"}];this.operatorTypes=[{value:"And",text:"AND"},{value:"Or",text:"OR"},{value:"AndNot",text:"AND NOT"},{value:"OrNot",text:"OR NOT"}]},n.prototype.getDateTimeFormatsForTopN=function(){var n=[];return n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Date],text:DateTimeFormatForFilter.Date}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.DateTime],text:DateTimeFormatForFilter.DateTime}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Year],text:DateTimeFormatForFilter.Year}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Quarter],text:DateTimeFormatForFilter.Quarter}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Month],text:DateTimeFormatForFilter.Month}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.QuarterYear],text:DateTimeFormatForFilter.QuarterYear}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.MonthYear],text:DateTimeFormatForFilter.MonthYear}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.WeekYear],text:DateTimeFormatForFilter.WeekYear}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.DayOfWeek],text:DateTimeFormatForFilter.DayOfWeek}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.WeekOfYear],text:DateTimeFormatForFilter.WeekOfYear}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Day],text:DateTimeFormatForFilter.Day}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Hour],text:DateTimeFormatForFilter.Hour}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Minute],text:DateTimeFormatForFilter.Minute}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Second],text:DateTimeFormatForFilter.Second}),n.push({value:DateTimeFormatForFilter[DateTimeFormatForFilter.Time],text:DateTimeFormatForFilter.Time}),n},n.prototype.getOperatorsList=function(n){return n.toLowerCase()===QueryDatatype.Int.toString()||n.toLowerCase()===QueryDatatype.Date.toString()?[{text:"Equals",value:"Equals"},{text:"Does Not Equals",value:"DoesNotEquals"},{text:"Greater Than",value:"GreaterThan"},{text:"Greater Than Or Equal To",value:"GreaterThanOrEqualTo"},{text:"Less Than",value:"LessThan"},{text:"Less Than Or Equal To",value:"LessThanOrEqualTo"},{text:"Between",value:"Between"},{text:"Not Between",value:"NotBetween"}]:n.toLowerCase()===QueryDatatype.Char.toString()?[{text:"Inclusion",value:"Inclusion"},{text:"Starts With",value:"StartsWith"},{text:"Ends With",value:"EndsWith"},{text:"Contains",value:"Contains"},{text:"Not Contains",value:"NotContains"}]:void 0},n.prototype.isNumber=function(n){return n==="System.Int32"||n==="System.Int16"||n==="System.Int64"||n==="System.Double"||n==="System.Single"||n==="System.Decimal"||n==="System.Byte"||n==="Number"||n.toLowerCase()==="integer"||n.toLowerCase()==="real"?!0:!1},n.prototype.isString=function(n){return n==="System.Guid"||n==="System.String"||n==="Text"||n.toLowerCase()==="string"?!0:!1},n.prototype.isDate=function(n){return n==="System.DateTimeOffset"||n==="System.DateTime"||n==="DateTime"||n.toLowerCase()==="date"?!0:!1},n.prototype.isBoolean=function(n){return n==="System.Boolean"||n==="bit"||n.toLowerCase()==="boolean"?!0:!1},n.prototype.isDefaultCast=function(n){return n.toLowerCase()==="default(boolean)"||n.toLowerCase()==="default(integer)"||n.toLowerCase()==="default(string)"||n.toLowerCase()==="default(datetime)"?!0:!1},n.prototype.getChkBx1=function(n){return this.rootNode.find("#"+n+"_query_bool_chkbx1")},n.prototype.getChkBx2=function(n){return this.rootNode.find("#"+n+"_query_bool_chkbx2")},n.prototype.getChkBx3=function(n){return this.rootNode.find("#"+n+"_query_bool_chkbx3")},n.prototype.getNullChkBx=function(n){return this.rootNode.find("#"+n+"_queryint_nullChkbx")},n.prototype.getDrpDwn1=function(n){return this.rootNode.find("#"+n+"_query_filter_field")},n.prototype.getOperatorTypeDropDown=function(n){return this.rootNode.find("#"+n+"_query_operator_type")},n.prototype.getOperatorDrpDwn=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_operator")},n.prototype.getTxtColTag1=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_txtcol1")},n.prototype.getTxtValTag1=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_txtVal1")},n.prototype.getDateColumnTag=function(n){return this.rootNode.find("#"+n+"_query_date_pickcol")},n.prototype.getTxtColTag2=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_txtcol2")},n.prototype.getTxtValTag2=function(n,t){return this.rootNode.find("#"+n+"_query_"+t+"_txtVal2")},n.prototype.getTopSwitcherTag=function(n,t){return this.rootNode.find("#"+n+t+"_chck_on")},n.prototype.getNullTxtBxTag=function(n){return this.rootNode.find("#"+n+"_query_null_txt")},n.prototype.getDateRangeDrpDwn=function(n){return $("#"+n+"_dateRange_multidDrpDwn")},n.prototype.getMultiSelectionComboBox=function(n){return this.rootNode.find("#"+n+"_multi_select_dropDown")},n.prototype.getMeasureType=function(n){switch(n.toLowerCase()){case"doesnotequals":return MeasureFilterCondition.DoesNotEquals;case"greaterthan":return MeasureFilterCondition.GreaterThan;case"greaterthanorequalto":return MeasureFilterCondition.GreaterThanOrEqualTo;case"lessthan":return MeasureFilterCondition.LessThan;case"lessthanorequalto":return MeasureFilterCondition.LessThanOrEqualTo;case"between":return MeasureFilterCondition.Between;case"notbetween":return MeasureFilterCondition.NotBetween;default:return MeasureFilterCondition.Equals}},n.prototype.DateFormatOption=function(n){switch(n.toLowerCase()){case"startdate":return DateFormatOption.StartDate;case"enddate":return DateFormatOption.EndDate;default:return DateFormatOption.Range}},n.prototype.getValidParameter=function(n,t){for(var u=n,r=n,i=0,f=0;f<t.length;f++)t[f]==="@"+r&&(i=i+1,r=u+i,this.isExistParameter(r,t)&&(i++,r=u+i,this.getValidParameter(u+i,t)));return r},n.prototype.isExistParameter=function(n,t){for(var i=0;i<t.length;i++)if(t[i]==="@"+n)return!0;return!1},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n}();window.ej.createObject("ej.DashboardDesignerUtility.QueryFilter",InternalQueryFilter,window),function(n){n[n.Between="between"]="Between";n[n.NotBetween="notbetween"]="NotBetween"}(QueryOperator||(QueryOperator={})),function(n){n[n.Int="int"]="Int";n[n.Date="date"]="Date";n[n.Bool="bool"]="Bool";n[n.Char="string"]="Char"}(QueryDatatype||(QueryDatatype={})),function(n){n[n.Equals="Equals"]="Equals";n[n.DoesNotEquals="DoesNotEquals"]="DoesNotEquals";n[n.GreaterThan="GreaterThan"]="GreaterThan";n[n.GreaterThanOrEqualTo="GreaterThanOrEqualTo"]="GreaterThanOrEqualTo";n[n.LessThan="LessThan"]="LessThan";n[n.LessThanOrEqualTo="LessThanOrEqualTo"]="LessThanOrEqualTo";n[n.Between="Between"]="Between";n[n.NotBetween="NotBetween"]="NotBetween"}(MeasureFilterCondition||(MeasureFilterCondition={})),function(n){n[n.Inclusion="Inclusion"]="Inclusion";n[n.StartsWith="StartsWith"]="StartsWith";n[n.EndsWith="EndsWith"]="EndsWith";n[n.Contains="Contains"]="Contains";n[n.NotContains="NotContains"]="NotContains"}(DimensionFilterCondition||(DimensionFilterCondition={})),function(n){n[n.Year="Year"]="Year";n[n.Quarter="Quarter"]="Quarter";n[n.Month="Month"]="Month";n[n.MonthYear="MonthYear"]="MonthYear";n[n.QuarterYear="QuarterYear"]="QuarterYear";n[n.DayOfWeek="DayOfWeek"]="DayOfWeek";n[n.Day="Day"]="Day";n[n.Hour="Hour"]="Hour";n[n.Minute="Minute"]="Minute";n[n.Second="Second"]="Second";n[n.Time="Time"]="Time";n[n.Date="Date"]="Date";n[n.Default="Default"]="Default";n[n.RelativeDate="RelativeDate"]="RelativeDate";n[n.WeekYear="WeekYear"]="WeekYear";n[n.DateHour="DateHour"]="DateHour";n[n.WeekOfYear="WeekOfYear"]="WeekOfYear";n[n.DayMonthYear="DayMonthYear"]="DayMonthYear";n[n.MonthDayYear="MonthDayYear"]="MonthDayYear";n[n.None="None"]="None"}(DateAndTimeFormat||(DateAndTimeFormat={}));InternalQueryJoiner=function(){function n(){this.dashboardDesigner=null;this.id=null;this.availableTables=null;this.container=null;this.contentDiv=null;this.joinEditor=null;this.footerTag=null;this.prevValue=null;this.successDiv=null;this.failureDiv=null;this.ejScrollerDiv=null;this.ejJoinerDialog=null;this.ejJoinerWaitingPopup=null;this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.queryDesigner.id;this.renderJoinEditor()}return Object.defineProperty(n,"QueryJoiner",{get:function(){return(this.queryJoiner===null||this.queryJoiner===undefined)&&(this.queryJoiner=new ej.DashboardDesignerUtility.QueryJoiner),this.queryJoiner},enumerable:!0,configurable:!0}),n.prototype.renderJoinEditor=function(){var n=this.joinEditor=ej.buildTag("div.e-userselect","",{display:"none"},{title:"Query Joiner",id:this.id+"_Join_Dialog"}),t=ej.buildTag("div","",{},{id:this.id+"_query_joiner_indicator_div"}),u=ej.buildTag("div","",{padding:".5em 12px"},{id:this.id+"_query_joiner_content_div"}),r=this.successDiv=ej.buildTag("div","",{width:"auto",height:"371px",display:"block"},{id:this.id+"_query_joiner_success_div"}),l=this.failureDiv=ej.buildTag("div","",{width:"682px",height:"371px",display:"none"},{id:this.id+"_query_joiner_failure_div"}),f=ej.buildTag("div","",{},{id:this.id+"_query_joiner_table_id"}),e=ej.buildTag("table","",{width:"100%"},{unselectable:"on"}),o=ej.buildTag("tr","",{"padding-top":"10px"},{}),s=ej.buildTag("td","",{width:"92%"},{}),a=ej.buildTag("Label.e-designer-add-label","List of Table Relations",{},{type:"label"}),i=this.container=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control e-designer-border-dialog","",{margin:"4px 0px",padding:"5px 0px",height:"330px",width:"682px"},{id:this.id+"_query_joiner_container_div"}),v=this.contentDiv=ej.buildTag("div.e-items","",{},{id:this.id+"_query_joiner_content_div"}),h=ej.buildTag("button.e-btn-close e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_btn_cancel",title:"Close"}),c=ej.buildTag("button.e-btn-save e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_btn_save",title:this.dashboardDesigner.locale.queryJoiner.merge});r.append(f);f.append(e);e.append(o);o.append(s);s.append(a);r.append(i);i.append(v);u.append(r,l);t.append(u);n.append(t);$(document.body).append(n);n.ejDialog({minWidth:710,width:"auto",height:"auto",target:"#"+this.id,showFooter:!0,enableResize:!1,showOnInit:!1,enableModal:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",close:$.proxy(this.closeJoinDialog,this),beforeClose:$.proxy(this.onDialogClose,this)});this.footerTag=$("#"+this.id+"_Join_Dialog_foot");this.footerTag.append(h,c);c.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-okbtn",text:this.dashboardDesigner.locale.queryJoiner.merge,click:$.proxy(this.saveJoinQuery,this,!0)});h.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-cancelbtn",text:"Close",click:$.proxy(this.cancelJoinDialog,this,!0)});i.ejScroller({height:"330px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});t.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});this.ejJoinerDialog=n.data("ejDialog");this.ejScrollerDiv=i.data("ejScroller");this.ejJoinerWaitingPopup=t.data("ejWaitingPopup")},n.prototype.addNewQueryJoiner=function(n,t){var i=ej.getGuid(this.id+"_row_"),d=t&&t.join&&t.rightTable?!0:!1,r=ej.isNullOrUndefined(n)?!1:n,h=this.contentDiv.find(".e-designer-joiner-row").length+1,l=ej.buildTag("div.e-designer-joiner-row e-drag-row","",{padding:"4px"},{unselectable:"on",id:i,rowId:i,joinIndex:h}),c=ej.buildTag("table.e-designer-table-dialog","",{width:"100%","border-radius":"4px"},{unselectable:"on",id:i+"_joiner_container_table"}),a=ej.buildTag("tr","",{height:"36px"},{id:i+"_joiner_rowTag"}),v=ej.buildTag("td","",{width:"170px","padding-left":"8px",display:r?"none":"table-cell"},{}),u=ej.buildTag("input"+(r?"":".e-joiner-tab-dropdown"),"",{padding:"1px"},{type:"text",id:i+"_joiner_left_tab",value:i,joinIndex:h}),y=ej.buildTag("td","",{width:"170px","padding-left":r?"8px":"10px"},{}),f=ej.buildTag("input","",{padding:"1px"},{type:"text",id:i+"_joiner_type"}),p=ej.buildTag("td","",{width:"170px","padding-left":"10px"},{}),e=ej.buildTag("input.e-joiner-tab-dropdown","",{height:"23px",width:"120px",padding:"1px"},{type:"text",id:i+"_joiner_right_tab",joinIndex:h}),g=ej.buildTag("td","",{width:r?"265px":"95px"},{}),w=ej.buildTag("tr","",{background:"white",display:"table-row"},{id:i+"_tr_field"}),b=ej.buildTag("td","",{height:"4px"},{id:i+"_td_edit_field",colspan:"7"}),o=ej.buildTag("div","",{"margin-top":"4px",height:"auto",width:"100%"},{id:i+"_query_joiner_field_div"}),s,k;if(this.contentDiv.append(l),l.append(c),c.append(a),a.append(v,y,p,g),v.append(u),y.append(f),p.append(e),c.append(w),w.append(b),b.append(o),u.ejDropDownList({showRoundedCorner:!0,width:"100%",watermarkText:"Left Table",cssClass:"e-joiner-drpdwn e-designer-ejwidgets e-dbrd-control",fields:{id:"id",text:"text",value:"id"},dataSource:this.tables,change:$.proxy(this.changeEqualTable,this,{rowId:i,identity:"left"}),beforePopupShown:$.proxy(this.updatePreviousValue,this,{rowId:i,identity:"left"})}),e.ejDropDownList({showRoundedCorner:!0,width:"100%",watermarkText:"Right Table",cssClass:"e-joiner-drpdwn e-designer-ejwidgets e-dbrd-control",fields:{id:"id",text:"text",value:"id"},dataSource:this.tables,change:$.proxy(this.changeEqualTable,this,{rowId:i,identity:"right"}),beforePopupShown:$.proxy(this.updatePreviousValue,this,{rowId:i,identity:"right"})}),f.ejDropDownList({showRoundedCorner:!0,width:"100%",watermarkText:"Join Type",cssClass:"e-joiner-drpdwn e-designer-ejwidgets e-dbrd-control",fields:{id:"field",text:"field",value:"field"},dataSource:this.getJoinData()}),this.renderConditionArea(i,o),d){if(r||u.data("ejDropDownList").selectItemByIndex(this.getSelectedIndex(i+"_joiner_left_tab",t.leftTable)),e.data("ejDropDownList").selectItemByIndex(this.getSelectedIndex(i+"_joiner_right_tab",t.rightTable)),f.data("ejDropDownList").selectItemByValue(t.join),t&&t.fields&&t.fields.length>0)for(s=0;s<t.fields.length;s++)k={leftTable:t.leftTable,rightTable:t.rightTable,field:t.fields[s]},this.renderTabFields(i,o,k,!1)}else ej.isNullOrUndefined(t)||ej.isNullOrUndefined(t.rightTable)||(r||u.data("ejDropDownList").selectItemByIndex(0),e.data("ejDropDownList").selectItemByIndex(this.getSelectedIndex(i+"_joiner_right_tab",t.rightTable)),f.data("ejDropDownList").selectItemByValue("Inner")),this.renderTabFields(i,o,null,!1);return i},n.prototype.getSelectedIndex=function(n,t){for(var r=this.contentDiv.find("#"+n).data("ejDropDownList").getListData(),i=0;i<r.length;i++)if(r[i].fieldId===t)return i;return 0},n.prototype.disableDeleteBtn=function(n){this.contentDiv.find("#"+n+"_field_delete").css("visibility","hidden")},n.prototype.enableDeleteBtn=function(n){this.contentDiv.find("#"+n+"_field_delete").css("visibility","visible")},n.prototype.deleteJoinFields=function(n){var t=this.contentDiv.find("#"+n.parentId+" .e-designer-joiner-field");t.length===1?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryJoiner,this.dashboardDesigner.locale.dataSource.joinerErr,IconType.warning,AlertType.Alert,!1,""):(this.contentDiv.find("#"+n.id+"_field").remove(),this.contentDiv.find("#"+n.id+"_joiner_logical_div").remove(),this.ejScrollerDiv.refresh(!0))},n.prototype.renderTabFields=function(n,t,i,r){var u=ej.getGuid(n+"_"),f=!0,it;this.contentDiv.find("#"+n+" .e-default-field").length>0&&(f=!1);var l=ej.buildTag("div.e-designer-joiner-field"+(f?" e-default-field":""),"",{padding:"4px 2px 4px 15px"},{unselectable:"on",id:u+"_field","e-rowId":u}),v=ej.buildTag("table","",{width:"100%","background-color":"white"},{unselectable:"on",id:u+"_field_table"}),e=ej.buildTag("tr","",{},{id:u+"_field_rowTag"}),y=ej.buildTag("td","",{width:"100px"},{}),o=ej.buildTag("input.e-left","",{padding:"1px"},{type:"text",id:u+"_field_left"}),p=ej.buildTag("td","",{width:"80px","padding-left":"10px"},{}),s=ej.buildTag("input.e-operator","",{padding:"1px"},{type:"text",id:u+"_field_type"}),w=ej.buildTag("td","",{width:"100px","padding-left":"10px"},{}),h=ej.buildTag("input.e-right","",{height:"23px",width:"100%",padding:"1px"},{type:"text",id:u+"_field_right"}),b=ej.buildTag("td","",{width:"50px"},{}),k=ej.buildTag("div","",{visibility:"visible",width:"100%"},{id:u+"_field_checkbox_div"}),c=ej.buildTag("input.e-joiner-checkbox","",{padding:"1px"},{type:"checkbox",id:u+"_field_checkbox"}),rt=ej.buildTag("label.e-designer-fontfamily","Value",{"font-size":"12px","padding-left":"6px"},{"for":u+"_field_checkbox",type:"label"}),d=ej.buildTag("td","",{width:"100px"},{}),g=ej.buildTag("div","",{visibility:"hidden"},{id:u+"_field_valueAutocomplete_div"}),a=ej.buildTag("input","",{width:"100%"},{id:u+"_field_valueAutocomplete",spellcheck:"false"}),nt=ej.buildTag("td","",{"padding-top":"3px",width:"10px"},{}),tt=ej.buildTag("span.e-dbrd-hand-cursor e-icon"+(f?" e-disable":" e-close_01"),"",{cursor:"default",float:"right",visibility:"hidden",color:"#f45d5d"},{id:u+"_field_delete"});l.insertBefore(this.contentDiv.find("#"+n+" .e-designer-joiner-condition"));f||(this.renderLogicalCondition(u,l,i),tt.bind("click",$.proxy(this.deleteJoinFields,this,{id:u,parentId:n})));l.append(v);v.append(e);e.append(y,p,w,b,d,nt);y.append(o);p.append(s);w.append(h);nt.append(tt);b.append(k);k.append(c,rt);d.append(g);g.append(a);e.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableDeleteBtn,this,u));e.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableDeleteBtn,this,u));h.ejDropDownList({showRoundedCorner:!0,width:"100%",watermarkText:"Right Field",cssClass:"e-joiner-drpdwn e-designer-ejwidgets e-dbrd-control",fields:{id:"fieldId",text:"field",value:"fieldId",category:"pid"},dataSource:[]});o.ejDropDownList({showRoundedCorner:!0,width:"100%",watermarkText:"Left Field",cssClass:"e-joiner-drpdwn e-designer-ejwidgets e-dbrd-control",fields:{id:"fieldId",text:"field",value:"fieldId",category:"pid"},dataSource:[],change:$.proxy(this.changeFieldLeftValue,this,u)});s.ejDropDownList({showRoundedCorner:!0,width:"100%",watermarkText:"Operator",cssClass:"e-joiner-drpdwn e-designer-ejwidgets e-dbrd-control",fields:{id:"field",text:"field",value:"field"},dataSource:this.getOperator()});c.ejCheckBox({checked:!1,width:"35px",cssClass:"e-designer-joiner-value",change:$.proxy(this.changeCheckBoxValue,this,u)});a.ejAutocomplete({showRoundedCorner:!0,showPopupButton:!0,showLoadingIcon:!0,showEmptyResultText:!1,enableAutoFill:!0,width:"100%",watermarkText:"",cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control",height:"28px",focusIn:$.proxy(this.updateColumnValues,this,u,null)});this.updateLeftFieldValues(u,n,r);i&&i.field?(o.data("ejDropDownList").selectItemByIndex(this.getSelectedIndex(u+"_field_left",i.field.leftField)),h.data("ejDropDownList").selectItemByIndex(this.getSelectedIndex(u+"_field_right",i.field.rightField)),s.data("ejDropDownList").selectItemByValue(i.field.operator),c.data("ejCheckBox").option("checked",i.field.isValueChecked),i.field.isValueChecked&&(this.showValueDropDown(u,!0),this.updateColumnValues(u,ej.isNullOrUndefined(i.field.value)?null:i.field.value))):(o.data("ejDropDownList").selectItemByIndex(0),s.data("ejDropDownList").selectItemByIndex(0),it=this.selectRightFieldIndex(u,n),h.data("ejDropDownList").selectItemByIndex(it),c.data("ejCheckBox").option("checked",!1),a.data("ejAutocomplete").option("dataSource",[]))},n.prototype.updateColumnValues=function(n,t){var i=this.contentDiv.find("#"+n+"_field_right").data("ejDropDownList"),r=this.contentDiv.find("#"+n+"_field_valueAutocomplete").data("ejAutocomplete"),u=this.contentDiv.find("#"+n+"_field_valueAutocomplete_div").attr("isPostBack"),f=this.contentDiv.find("#"+n+"_field_valueAutocomplete_div").attr("rightFieldValue"),s=ej.isNullOrUndefined(u)?!1:u.toLowerCase()==="true"?!0:!1,h=ej.isNullOrUndefined(f)?!1:i.getSelectedValue()===f,c=ej.isNullOrUndefined(r.model.dataSource)||r.model.dataSource.length===0,e,o;(s||h)&&!c||(e=i.getItemDataByValue(i.getSelectedValue())[0].field,o=[{Id:i.getSelectedValue(),Name:e,SummaryType:"None",FieldType:"Dimensions"}],ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getColumnData,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getColumnData,fieldInfo:o,dataset:this.queryDesigner.dataset.Id})},{fnction:$.proxy(this.setColumnValues,this,n,t),indicator:[$.proxy(this.showLoadingIndicator,this,n),$.proxy(this.hideLoadingIndicator,this,n)]}),this.contentDiv.find("#"+n+"_field_valueAutocomplete_div").attr("isPostBack","true").attr("rightFieldValue",i.getSelectedValue()))},n.prototype.setColumnValues=function(n,t,i){var r=JSON.parse(i.data),f=Object.keys(r[0])[0],u;!ej.isNullOrUndefined(r)&&r.length>0&&(u=this.contentDiv.find("#"+n+"_field_valueAutocomplete").data("ejAutocomplete"),u.setModel({fields:{text:f,value:f},dataSource:r}),ej.isNullOrUndefined(t)?u.open():u.selectValueByText(t));this.contentDiv.find("#"+n+"_field_valueAutocomplete_div").attr("isPostBack","false")},n.prototype.selectRightFieldIndex=function(n,t){for(var f=this.contentDiv.find("#"+t+"_joiner_right_tab").data("ejDropDownList"),e=this.contentDiv.find("#"+n+"_field_right").data("ejDropDownList"),s=f.getItemDataByValue(f.getSelectedValue())[0].field,o=e.getItemDataByValue(e.getSelectedValue())[0].field,r=this.contentDiv.find("#"+n+"_field_right").data("ejDropDownList").model.dataSource,u=[],i=0;i<r.length;i++)if(r[i].pid===s&&(u.push(i),o===r[i].field||o===r[i].field.replace(" ("+r[i].pid+")","")))return i;return u.length>0?u[0]:0},n.prototype.renderLogicalCondition=function(n,t,i){var u=ej.buildTag("div.e-designer-joiner-logical","",{height:"31px","margin-top":"4px",padding:"4px 5px"},{id:n+"_joiner_logical_div"}),f=ej.buildTag("div","",{"margin-bottom":"-15px","padding-left":"13px"},{}),r=ej.buildTag("input.e-logical","",{padding:"1px"},{type:"text",id:n+"_joiner_logical"}),e=ej.buildTag("div","",{"border-top":"1px solid #cecece"},{id:n+"_logical_separator"});f.append(r);u.append(f,e);u.insertBefore(t);r.ejDropDownList({showRoundedCorner:!0,width:"135px",height:"28px",cssClass:"e-joiner-drpdwn e-designer-ejwidgets e-dbrd-control",fields:{id:"field",text:"field",value:"field"},dataSource:this.getLogicalData()});i&&i.field?r.data("ejDropDownList").selectItemByValue(i.field.condition):r.data("ejDropDownList").selectItemByIndex(0)},n.prototype.renderConditionArea=function(n,t){var i=ej.buildTag("div.e-designer-joiner-condition","",{height:"31px","margin-top":"4px",padding:"4px 5px"},{id:n+"_joiner_condition_div"}),r=ej.buildTag("div","",{"margin-bottom":"-15px","padding-left":"13px"},{}),u=ej.buildTag("button.e-btn-close e-dbrd-hand-cursor","",{},{id:n+"_condition_add_field"}),f=ej.buildTag("div","",{"border-top":"1px solid #cecece"},{id:n+"_condition_separator"});r.append(u);i.append(r,f);t.append(i);u.ejButton({showRoundedCorner:!0,size:"mini",cssClass:"e-designer-addfield-btn",text:"Add Field",click:$.proxy(this.addNewField,this,{id:n,target:t})})},n.prototype.setAvailableTable=function(n){var t=JSON.parse(n);this.availableTables=t},n.prototype.editNewField=function(n,t,i,r){this.callback=r;this.availableTables=i;var u=$("#"+this.id+"_Join_Dialog");u.data("e-table",t);this.showQueryJoiner(n,!1,r);this.addNewQueryJoiner(n.length>0,{rightTable:t.id})},n.prototype.changeCheckBoxValue=function(n,t){t.isInteraction&&this.showValueDropDown(n,t.isChecked)},n.prototype.showValueDropDown=function(n,t){t?(this.contentDiv.find("#"+n+"_field_valueAutocomplete_div").css("visibility","visible"),this.contentDiv.find("#"+n+"_field_right").data("ejDropDownList").disable()):(this.contentDiv.find("#"+n+"_field_valueAutocomplete_div").css("visibility","hidden"),this.contentDiv.find("#"+n+"_field_right").data("ejDropDownList").enable());var i=this.contentDiv.find("#"+n+"_field_valueAutocomplete").data("ejAutocomplete");i.option("dataSource",[]);i.clearText()},n.prototype.addNewField=function(n){this.renderTabFields(n.id,n.target,null,!0);this.ejScrollerDiv&&this.ejScrollerDiv.refresh(!0)},n.prototype.getRelationInput=function(n){var i=this.contentDiv.find("#"+n+"_joiner_left_tab").data("ejDropDownList"),r=this.contentDiv.find("#"+n+"_joiner_right_tab").data("ejDropDownList"),f=this.contentDiv.find("#"+n+"_joiner_type").data("ejDropDownList"),t={},e,u;return this.contentDiv.find("#"+n+"_joiner_left_tab").hasClass("e-joiner-tab-dropdown")&&i.getSelectedValue()?(t.leftTable=i.getSelectedValue(),t.leftSchema=i.getItemDataByValue(i.getSelectedValue())[0].schema):(t.leftTable=null,t.leftSchema=null),r.getSelectedValue()&&(t.rightTable=r.getSelectedValue(),t.rightSchema=r.getItemDataByValue(r.getSelectedValue())[0].schema),f.getSelectedValue()&&(t.join=f.getSelectedValue()),e=this.contentDiv.find("#"+n+" .e-designer-joiner-field"),u=[],e.each(function(n,t){var i=$(t).attr("e-rowId"),f=$("#"+i+"_field_left").data("ejDropDownList"),e=$("#"+i+"_field_right").data("ejDropDownList"),o=$("#"+i+"_field_type").data("ejDropDownList"),s=$("#"+i+"_field_checkbox").data("ejCheckBox"),h=$("#"+i+"_field_valueAutocomplete").data("ejAutocomplete"),r="AND";$("#"+i+"_joiner_logical").length>0&&(r=$("#"+i+"_joiner_logical").data("ejDropDownList").getSelectedValue());u.push({leftField:f.getSelectedValue(),operator:o.getSelectedValue(),rightField:e.getSelectedValue(),isValueChecked:s.isChecked(),value:h.getValue(),condition:r})}),u.length>0&&(t.fields=u),t},n.prototype.updatePreviousValue=function(n,t){ej.isNullOrUndefined(t)||ej.isNullOrUndefined(t.value)||(this.prevValue=t.value)},n.prototype.changeEqualTable=function(n,t){var r;if(t.isInteraction){var u=this.joinEditor.find(".e-joiner-tab-dropdown"),f=t.selectedValue,e=ej.isNullOrUndefined(this.prevValue)?"":this.prevValue,i=[];u.each(function(t,r){if($(r).attr("id")!==$("#"+n.rowId+"_joiner_"+n.identity+"_tab").attr("id")){i.push(parseInt($("#"+n.rowId+"_joiner_"+n.identity+"_tab").attr("joinIndex"),10));var u=$(r).data("ejDropDownList").getSelectedValue();ej.isNullOrUndefined(u)||u!==f||($(r).data("ejDropDownList").selectItemByValue(e),i.push(parseInt($(r).attr("joinIndex"),10)))}});r=i.sort(this.sortValues);this.changeFieldDropdownValues(r)}},n.prototype.sortValues=function(n,t){return n-t},n.prototype.changeFieldDropdownValues=function(n){var o=this.contentDiv.find(".e-designer-joiner-row"),s=this.joinEditor.find(".e-joiner-tab-dropdown"),r=n[0]-1,u=n[n.length-1]-1,f=null,e,t,i;if(!(r===0&&u===0))for(e=function(n){var r=[],i;for(f=t.contentDiv.find("#"+t.contentDiv.find(o[n]).attr("rowId")+" .e-left"),i=0;i<n+2;i++){var u=t.joinEditor.find(s[i]).data("ejDropDownList"),e=u.model.selectedIndex,h=ej.isNullOrUndefined(e)?"":u.model.dataSource[e].fieldId;r=r.concat(t.getTableColumns(h))}f.each(function(n,t){var i=$(t).data("ejDropDownList");i.setModel({dataSource:r});i.selectItemByIndex(0)})},t=this,i=r;i<u;i++)e(i)},n.prototype.updateLeftFieldValues=function(n,t,i){for(var e=this.contentDiv.find(".e-designer-joiner-row"),c=this.joinEditor.find(".e-joiner-tab-dropdown"),u=this.contentDiv.find("#"+n+"_field_left").data("ejDropDownList"),f=[],o=i?e.index($("#"+t))+1:e.length,r=0;r<o- -1;r++){var s=this.joinEditor.find(c[r]).data("ejDropDownList"),h=s.model.selectedIndex,l=ej.isNullOrUndefined(h)?"":s.model.dataSource[h].fieldId;f=f.concat(this.getTableColumns(l))}u.setModel({dataSource:f});u.selectItemByText(u.model.dataSource[0].fieldId)},n.prototype.changeFieldLeftValue=function(n,t){var e,r;if(!ej.isNullOrUndefined(t)){var f=this.contentDiv.find("#"+n+"_field_right"),u=t.model.dataSource,o=[],i=u[t.itemId].columnDetails,s=!0;if(f.data("ejDropDownList").model.dataSource.length>0&&(e=f.data("ejDropDownList").model.dataSource[0].columnDetails.DefaultDataType,s=t.isInteraction?i.DefaultDataType!==e&&!(i.DefaultDataType==="Integer"&&e==="Real"||i.DefaultDataType==="Real"&&e==="Integer"):!0),s){for(r=0;r<u.length;r++)(i.DefaultDataType===u[r].columnDetails.DefaultDataType||i.DefaultDataType==="Integer"&&u[r].columnDetails.DefaultDataType==="Real"||i.DefaultDataType==="Real"&&u[r].columnDetails.DefaultDataType==="Integer")&&o.push(u[r]);f.data("ejDropDownList").setModel({dataSource:o});o.length>0&&f.data("ejDropDownList").selectItemByIndex(0);this.contentDiv.find("#"+n+"_field_checkbox_div").css("visibility",i.DefaultDataType==="Date"?"hidden":"visible");this.contentDiv.find("#"+n+"_field_checkbox").data("ejCheckBox").option("checked",!1)}this.showValueDropDown(n,this.contentDiv.find("#"+n+"_field_checkbox").data("ejCheckBox").isChecked())}},n.prototype.getTableColumns=function(n){var i=[],t=this.availableTables;return $("#"+this.id+"_div_dragSurface .e-data-table").each(function(r,u){var e=$(u).data("e-table"),f;if(n===e.id)for(f=0;f<t.length;f++)n===t[f].TableId&&i.push({pid:t[f].TableName,tableId:t[f].TableId,field:t[f].Name,fieldId:t[f].ID,columnDetails:t[f]})}),i.sort(this.compare),i},n.prototype.compare=function(n,t){return n.field<t.field?-1:n.field>t.field?1:0},n.prototype.getTableGroups=function(){var n=[];return $("#"+this.id+"_div_dragSurface .e-data-table").each(function(t,i){var r=$(i).data("e-table");n.push({fieldId:r.id,field:r.name,schema:r.schema,id:r.id,text:r.displayName})}),n},n.prototype.showQueryJoiner=function(n,t,i){this.resetJoinInstance();this.callback=i;t&&(this.joinEditor.data("ejDialog").open(),this.ejJoinerWaitingPopup.show());this.footerTag.find("#"+this.id+"_btn_save").data("ejButton").option("text",t?this.dashboardDesigner.locale.queryJoiner.update:this.dashboardDesigner.locale.queryJoiner.merge);this.footerTag.find("#"+this.id+"_btn_save").attr("title",t?this.dashboardDesigner.locale.queryJoiner.update:this.dashboardDesigner.locale.queryJoiner.merge);this.tables=this.getTableGroups();this.populateJoiner(n);t&&this.updateQueryJoinerScrollBar()},n.prototype.openQueryJoiner=function(n){this.joinEditor.data("ejDialog").open();this.ejJoinerWaitingPopup.show();this.queryDesigner.executeUIQuery(n);this.showJoiners(!1);this.showCancelBtn(!1);this.selectedTable=null},n.prototype.resetJoinInstance=function(){this.queryJoiner=[];this.tables=[];this.contentDiv.empty()},n.prototype.populateJoiner=function(n){if(this.queryJoiner=JSON.parse(JSON.stringify(n)),this.queryJoiner&&this.queryJoiner.length>0)for(var t=0;t<this.queryJoiner.length;t++)this.addNewQueryJoiner(t>0,this.queryJoiner[t])},n.prototype.updateQueryJoiner=function(n,t,i){var r,u;n&&(n.indexOf("Sf_Exception")!==-1||n==="Not Found")?(this.ejJoinerWaitingPopup.hide(),r=$("#"+this.id+"_Join_Dialog"),r.data("e-table",t),this.callback=i,this.showJoiners(!1),ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.queryJoiner,this.dashboardDesigner.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,n,{method:"cancelJoinDialog",instance:this,dataInfo:null})):(this.showJoiners(!0),u=JSON.parse(n),this.editNewField(this.queryDesigner.queryJoiner,t,u,i),this.updateQueryJoinerScrollBar())},n.prototype.updateQueryJoinerScrollBar=function(){var n=this.ejScrollerDiv;n.isVScroll()&&(n.refresh(!0),n.scrollY(n._scrollYdata.scrollable));this.ejJoinerWaitingPopup.hide()},n.prototype.showJoiners=function(n){n?(this.successDiv.css("display","block"),this.failureDiv.css("display","none"),ej.DashboardUtil.buttonEnable(this.footerTag.find("#"+this.id+"_btn_save"),!0)):(this.successDiv.css("display","none"),this.failureDiv.css("display","block"),ej.DashboardUtil.buttonEnable(this.footerTag.find("#"+this.id+"_btn_save"),!1))},n.prototype.showCancelBtn=function(n){n?($(document.body).find("#"+this.id+"_Join_Dialog_closebutton").removeClass("e-close-disable").css({cursor:"pointer",opacity:"1"}),ej.DashboardUtil.buttonEnable(this.footerTag.find("#"+this.id+"_btn_cancel"),!0)):($(document.body).find("#"+this.id+"_Join_Dialog_closebutton").addClass("e-close-disable").css({cursor:"default",opacity:"0.3"}),ej.DashboardUtil.buttonEnable(this.footerTag.find("#"+this.id+"_btn_cancel"),!1))},n.prototype.closeJoinDialog=function(n){this.footerTag.find("#"+this.id+"_btn_save").data("ejButton").option("text",this.dashboardDesigner.locale.queryJoiner.merge);this.footerTag.find("#"+this.id+"_btn_save").attr("title",this.dashboardDesigner.locale.queryJoiner.merge);n.model.position={X:0,Y:0};(n.isInteraction||!ej.isNullOrUndefined(this.selectedTable))&&this.cancelJoinDialog(n)},n.prototype.onDialogClose=function(n){!ej.isNullOrUndefined(n.event)&&$(n.event.target).hasClass("e-close-disable")?n.cancel=!0:this.ejJoinerWaitingPopup.hide()},n.prototype.selectedTableInfo=function(n,t,i){this.ejJoinerWaitingPopup.hide();this.failureDiv.text(t);this.failureDiv.css("text-align","center");this.failureDiv.css("vertical-align","middle");this.failureDiv.css("line-height",this.failureDiv.height()+"px");this.failureDiv.css("font-size","12px");this.showJoiners(!1);this.showCancelBtn(!0);this.selectedTable=n;this.callback=i},n.prototype.cancelJoinDialog=function(){var i=$("#"+this.id+"_Join_Dialog"),n=i.data("e-table"),t;i.data("ejDialog").close();n&&n.name?(t={isCancel:!0,data:n},ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.cancelJoin,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.cancelJoin,tableId:n.id,dataSetName:this.queryDesigner.dataset.Name,dataSetId:this.queryDesigner.dataset.Id})},{fnction:$.proxy(this.closeJoin,this,t)})):ej.isNullOrUndefined(this.selectedTable)||(t={isCancel:!0,data:this.selectedTable},this.closeJoin(t,null))},n.prototype.closeJoin=function(n){ej.isNullOrUndefined(this.selectedTable)||(this.failureDiv.text(""),this.successDiv.css("display","block"),this.failureDiv.css("display","none"));var t=$("#"+this.id+"_Join_Dialog");ej.DashboardUtil.invokeCallBack(this.callback,n);t.removeData("e-table")},n.prototype.saveJoinQuery=function(){var t=this.getTableJoiners(),n=$("#"+this.id+"_Join_Dialog");ej.DashboardUtil.invokeCallBack(this.callback,{joiners:t});n.data("ejDialog").close();n.removeData("e-table")},n.prototype.getTableJoiners=function(){var t=this,n=[],i=this.contentDiv.find(".e-designer-joiner-row");return i.each(function(i,r){var u=$(r).attr("rowId"),f=t.getRelationInput(u);n.push(f)}),n},n.prototype.showLoadingIndicator=function(n){this.contentDiv.find("#"+n+"_field_valueAutocomplete_dropdown>span").removeClass("e-search");this.contentDiv.find("#"+n+"_field_valueAutocomplete_dropdown>span").addClass("e-load").addClass("e-input");this.contentDiv.find("#"+n+"_field_valueAutocomplete_dropdown>span").css("background-position","center")},n.prototype.hideLoadingIndicator=function(n){this.contentDiv.find("#"+n+"_field_valueAutocomplete_dropdown>span").removeClass("e-input").removeClass("e-load");this.contentDiv.find("#"+n+"_field_valueAutocomplete_dropdown>span").addClass("e-search")},n.prototype.getJoinData=function(){return[{field:"Inner"},{field:"Left Outer Join"}]},n.prototype.getOperator=function(){return[{field:"="},{field:">="},{field:"<="},{field:"!="}]},n.prototype.getLogicalData=function(){return[{field:"AND"},{field:"OR"},{field:"AND NOT"},{field:"OR NOT"}]},n}();window.ej.createObject("ej.DashboardDesignerUtility.QueryJoiner",InternalQueryJoiner,window);InternalQueryParameter=function(){function n(){this.id=null;this.parameters=[];this.queryParameters=[];this.id=ej.DashboardUtil.getInstance().ejInstance._id;this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.renderQueryParameter()}return Object.defineProperty(n,"QueryParameter",{get:function(){return(this.queryParameter===null||this.queryParameter===undefined)&&(this.queryParameter=new ej.DashboardDesignerUtility.QueryParameter),this.queryParameter},enumerable:!0,configurable:!0}),n.prototype.renderQueryParameter=function(){var t=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{display:"block"},{title:"Parameters",id:this.id+"_query_param_dialog"}),i=ej.buildTag("div","",{height:"280px",width:"100%"}),n=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control e-designer-border-dialog","",{height:"275px",width:"475px",margin:"5px 0px"},{id:this.id+"_queryparam_parent_div"}),r=ej.buildTag("div","",{},{}),o=ej.buildTag("div","",{},{id:this.id+"_queryparam_container_div"}),u=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_queryparam_btn_cancel"}),f=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_queryparam_btn_save"}),e;r.append(o);n.append(r);i.append(n);t.append(i);t.ejDialog({minWidth:500,height:"auto",width:"auto",enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});e=$("#"+this.id+"_query_param_dialog_foot");e.append(u).append(f);f.ejButton({text:"OK",enabled:!0,cssClass:"e-designer-okbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.saveQueryParameter,this,!0)});u.ejButton({text:"Cancel",cssClass:"e-designer-cancelbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeQueryDialog,this,!0)});n.ejScroller({height:"275px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.renderQueryParameters=function(n){var i=$("#"+this.id+"_queryparam_container_div"),t,e;i.empty();var r=ej.buildTag("div.e-reportdesigner-query-parameter","",{padding:"4px 8px","padding-bottom":"0px",display:"block"},{}),u=ej.buildTag("table","",{},{id:this.id+"_query_table"}),f=ej.buildTag("tr"),o=ej.buildTag("td","<b>Parameter<\/b>",{height:"30px",width:"163px"}),s=ej.buildTag("td","<b style='padding-left: 10px'>Null<\/b>",{height:"30px",width:"86px","padding-left":"26px"}),h=ej.buildTag("td","<b style='padding-left: 12px' id='"+this.id+"_queryparam_value_title'>Value<\/b>",{height:"30px",width:"176px","padding-left":"13px"});for(this.parameters=n,f.append(o).append(s).append(h),u.append(f),r.append(u),i.append(r),t=0;t<n.length;t++)e=n[t],this.renderParameter(e,i);this.queryParameters&&this.queryParameters.length>0&&this.populateQueryParameter(this.queryParameters)},n.prototype.renderParameter=function(n,t){var i=n.substring(1),u=ej.buildTag("div.e-reportdesigner-query-parameter","",{padding:"4px 8px",display:"block"},{id:this.id+"_query_"+i}),f=ej.buildTag("table","",{width:"100%"},{id:this.id+"_query_table_"+i}),r=ej.buildTag("tr","",{}),e=ej.buildTag("td","",{width:"150px"}),l=ej.buildTag("span",n,{width:"150px","text-overflow":"ellipsis",overflow:"hidden",display:"block","white-space":"nowrap"},{}),o=ej.buildTag("td","",{width:"57px","padding-left":"40px"}),s=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_query_chk_"+i}),h=ej.buildTag("td","",{width:"20px","padding-left":"26px"}),c;r.append(e);e.append(l);r.append(o);o.append(s);r.append(h);f.append(r);u.append(f);t.append(u);c=ej.buildTag("input.e-textbox e-designer-border","",{height:"25px",width:"140px",float:"right"},{type:"text",id:this.id+"_query_proc_"+i});h.append(c);s.ejCheckBox({change:$.proxy(this.checkParamNullable,this,{id:this.id+"_query_proc_"+i}),showRoundedCorner:!0,cssClass:"e-designer-border"})},n.prototype.getQueryParams=function(){var t=[],n;if(this.parameters&&this.parameters.length>0){for(n=0;n<this.parameters.length;n++){var i=this.parameters[n],r=i.substring(1),u=$("#"+this.id+"_query_chk_"+r).data("ejCheckBox");u.isChecked()?t.push({Name:i,IsNull:!0,Value:""}):t.push({Name:i,IsNull:!1,Value:$("#"+this.id+"_query_proc_"+r).val()})}return t}return null},n.prototype.getQueryParameters=function(n){for(var i=[],r=ej.DashboardUtil.parseQuery(n),t=0;t<r.length;t++)this.isExistQueryParameter(r[t].substring(1),i)||i.push({Name:r[t],Value:null,isQueryMode:!0});return i},n.prototype.saveQueryParameter=function(){this.queryDesigner.queryInputVals=this.getQueryParams();var n=this.queryDesigner.getQueryText();this.queryDesigner.executeTempQuery(n);$("#"+this.id+"_query_param_dialog").data("ejDialog").close()},n.prototype.populateQueryParameter=function(n){var t,i;if(n&&n.length>0)for(t=0;t<n.length;t++)i=n[t].Name.substring(1),n[t].IsNull?$("#"+this.id+"_query_chk_"+i).data("ejCheckBox").setModel({checked:!0}):$("#"+this.id+"_query_proc_"+i).val(n[t].Value)},n.prototype.checkParamNullable=function(n,t){t.isChecked?$("#"+n.id).attr("disabled","disabled"):$("#"+n.id).removeAttr("disabled")},n.prototype.isExistQueryParameter=function(n,t){for(var i=0;i<t.length;i++)if(t[i]===n)return!0;return!1},n.prototype.showQueryDialog=function(n,t){var i=ej.DashboardUtil.parseQuery(n),r;this.queryParameters=t;i&&i.length>0?(this.renderQueryParameters(i),$("#"+this.id+"_query_param_dialog").data("ejDialog").open(),$("#"+this.id+"_queryparam_parent_div").height()>$("#"+this.id+"_queryparam_container_div").height()?$("#"+this.id+"_queryparam_value_title").css("padding-left","16px"):$("#"+this.id+"_queryparam_value_title").css("padding-left","12px"),r=$("#"+this.id+"_queryparam_parent_div"),r.data("ejScroller")&&r.data("ejScroller").refresh()):this.queryDesigner.executeTempQuery(n)},n.prototype.closeQueryDialog=function(){$("#"+this.id+"_query_param_dialog").data("ejDialog").close()},n}();window.ej.createObject("ej.DashboardDesignerUtility.QueryParameter",InternalQueryParameter,window);InternalRangeSliderReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="RangeSlider";this.isMasterByDefault=!0;this.rootCss="e-rangeslider-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.propertyPanel=null;this.rangeSliderElement=null;this.rangeSliderItem=null;this.leftLabel=null;this.leftLabelText=null;this.rightLabel=null;this.rightLabelText=null;this.contentContainer=null;this.rangeSliderItemJson=null;this.enableAnimation=!0;this.showTooltip=!0;this.isHeaderVisible=!0;this.controlHeader=null;this.reportName=null;this.startDate="";this.endDate="";this.dataGroupInfo=null;this.dataConfiguration=null;this.containerProperties=null;this.summaryType="";this.dataValues=null;this.masterSlaveConfiguration=null;this.clonedData=null;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.RangeSlider;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.isDataEnabled=!0;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.masterSlaveConfiguration=ejDashboardDesigner.getInstance("MasterSlaveFilter");this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem");this.measureFormat=new MeasureFormatting}return n.prototype.getWidgetItemContainer=function(){return this.getReportItem()},n.prototype.render=function(n){this.renderRangeSliderItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.rangeSliderItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.rangeSliderItemJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateRangeSliderItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(){return!0},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getRangeSliderContainerInstance()},n.prototype.refresh=function(){},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"dc5f330d-944e-4deb-806a-cb67a629b06c",widgetName:"RangeSlider",widgetDisplayName:n.itemPanel.widgetTitle.rangeSlider,cssClass:"e-widgeticon e-reportdesigner-widget-rangeslider",widgetNameSpace:"ej.DashboardDesignerUtility.RangeSliderItem",searchCategory:["rangeslider","filters"],description:n.itemPanel.widgetDescription.rangeSliderDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq,widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.rangeSlider,description:n.itemPanel.widgetDescription.rangeSliderDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq}}]})},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"RangeSlider",i);this.propertyPanel.canUpdate=!0},n.prototype.getRangeSliderItemJson=function(){var n=new RangeSliderProperties;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n.FilterSettings.ActAsMasterWidget=!0,n},n.prototype.getPropertyGridItems=function(){var n=new ej.DashboardDesignerUtility.PropertyGridItem(this.rangeSliderItemJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.rangeSliderItemJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.rangeSliderItemJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.rangeSliderItemJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.rangeSliderItemJson.ContainerSettings.Description,n.propertyGridItems.Type="RangeSlider",n.filterSettingsProperty.Items[2].isVisible=!1,$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"RangeSelection",displayName:"Range Selection",value:this.rangeSliderItemJson.Type===RangeSliderType.Range,itemType:"bool"},{name:"VerticalOrientation",displayName:"Vertical Orientation",value:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical,itemType:"bool"}]},n.filterSettingsProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.renderRangeSliderItem=function(){try{this.renderRangeSliderElement();this.rangeSliderItemJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RangeSlider)}catch(n){this.designPanel.logError({Source:this.rangeSliderItemJson.UniqueName,Error:n,Type:n.name})}},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions",SupportedTypes:["e-reportdesigner-dataset-datetime"]}),n},n.prototype.renderRangeSliderReportElement=function(n){try{this.rangeSliderItemJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.rangeSliderItemJson.ContainerSettings.Bounds.Row,column:this.rangeSliderItemJson.ContainerSettings.Bounds.Column,rowSpan:this.rangeSliderItemJson.ContainerSettings.Bounds.RowSpan,colSpan:this.rangeSliderItemJson.ContainerSettings.Bounds.ColumnSpan};this.renderRangeSliderElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.rangeSliderItemJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderRangeSliderElement=function(){this.rangeSliderItem=ej.buildTag("div.e-rangeslideritem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"90%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",padding:"15px",top:"4px"},{id:this.designId+"rangeslideritem"+this.rangeSliderItemJson.UniqueName});this.rangeSliderElement=ej.buildTag("div","",{margin:"0px",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"rangesliderelement"+this.rangeSliderItemJson.UniqueName});this.leftLabel=ej.buildTag("div.leftLabel","",{id:this.designId+"leftlabel"+this.rangeSliderItemJson.UniqueName});this.leftLabelText=ej.buildTag("span.leftLabelText","",{id:this.designId+"leftlabeltext"+this.rangeSliderItemJson.UniqueName});this.rightLabel=ej.buildTag("div.rightLabel","",{id:this.designId+"rightlabel"+this.rangeSliderItemJson.UniqueName});this.rightLabelText=ej.buildTag("span.rightLabelText","",{id:this.designId+"rightlabeltext"+this.rangeSliderItemJson.UniqueName});this.controlContainer.data("widgetInstance",this);this.rangeSliderItem.append(this.rangeSliderElement);this.rangeSliderElement.append(this.leftLabel);this.leftLabel.append(this.leftLabelText);this.rangeSliderElement.append(this.rightLabel);this.rightLabel.append(this.rightLabelText);this.controlContainer.append(this.rangeSliderItem);this.contentContainer.append(this.rangeSliderItem);this.rangeSliderItem.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designId+"_designer_waiting_popup e-designer-loader"});this.rangeSliderElement.ejSlider({minValue:0,maxValue:100,sliderType:this.rangeSliderItemJson.Type===RangeSliderType.Range?ej.SliderType.Range:ej.SliderType.MinRange,orientation:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?ej.Orientation.Vertical:ej.Orientation.Horizontal,enableAnimation:this.enableAnimation,showTooltip:this.showTooltip,width:this.rangeSliderItem.width().toString(),height:"8px",value:100,slide:$.proxy(this.onslidechange,this),change:$.proxy(this.onslidechange,this)});this.rangeSliderItemJson.Type===RangeSliderType.Range?(this.leftLabelText.html("0"),this.rightLabelText.html("100")):this.rightLabelText.html("100");this.setHeightWidth();this.resize();this.labelAlignment()},n.prototype.updateRangeSliderItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.rangeSliderItemJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.rangeSliderItemJson);break;case"Description":this.propertyPanel.setDescription(this.rangeSliderItemJson,i);break;case"RangeSelection":this.updateRangeSelection(i);break;case"VerticalOrientation":this.updateVerticalOrientation(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.rangeSliderItemJson,i);break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.rangeSliderItem.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"RangeSlider",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-rangeslider",this.designer._id+"_"+this.rangeSliderItemJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updateWidgetSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.rangeSliderItemJson,CommandAction.ItemResize,"updateSize","e-rangeslider-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):(this.setHeightWidth(),this.resize())},n.prototype.updateItemSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.rangeSliderItemJson,CommandAction.ItemResize,"updateItemSize","e-rangeslider-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):(this.setHeightWidth(),this.resize())},n.prototype.updateRangeSelection=function(n){this.rangeSliderItemJson.Type=n?RangeSliderType.Range:RangeSliderType.MinRange;this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&(this.measureFormat=this.dataGroupInfo.Values[0].Values[0].MeasureFormatting);var t=this.rangeSliderElement.data("ejSlider");ej.isNullOrUndefined(t)||(t.option("sliderType",ej.DashboardDesignerUtility.Serialization.enumToString(RangeSliderType,this.rangeSliderItemJson.Type)),this.startDate===""&&this.endDate===""&&this.summaryType!=="year"?t.model.sliderType===ej.SliderType.Range?(this.clearFilter(),this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(ej.DashboardUtil.formattedText(t.model.values[0],this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0)),this.rightLabelText.html(ej.DashboardUtil.formattedText(t.model.values[1],this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0))):(this.clearFilter(),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(ej.DashboardUtil.formattedText(t.model.value,this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0))):this.summaryType==="year"?t.model.sliderType===ej.SliderType.Range?(this.clearFilter(),this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(t.model.values[0]),this.rightLabelText.html(t.model.values[1])):(this.clearFilter(),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(t.model.value)):t.model.sliderType===ej.SliderType.Range?(this.clearFilter(),this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(this.startDate),this.rightLabelText.html(this.endDate)):(this.clearFilter(),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(this.endDate)),this.labelAlignment())},n.prototype.updateVerticalOrientation=function(n){this.rangeSliderItemJson.Orientation=n?RangeSliderOrientation.Vertical:RangeSliderOrientation.Horizontal;this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&(this.measureFormat=this.dataGroupInfo.Values[0].Values[0].MeasureFormatting);var t=this.rangeSliderElement.data("ejSlider");ej.isNullOrUndefined(t)||(t.option("orientation",ej.DashboardDesignerUtility.Serialization.enumToString(RangeSliderOrientation,this.rangeSliderItemJson.Orientation)),this.dataGroupInfo.Values.length!==0&&this.dataGroupInfo.Values[0].Values.length!==0&&this.startDate!==""&&this.endDate!==""?t.model.sliderType===ej.SliderType.Range?(this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(this.startDate),this.rightLabelText.html(this.endDate)):(this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(this.endDate)):this.summaryType!=="year"?t.model.sliderType===ej.SliderType.Range?(this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(ej.DashboardUtil.formattedText(t.model.values[0],this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0)),this.rightLabelText.html(ej.DashboardUtil.formattedText(t.model.values[1],this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0))):(this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(ej.DashboardUtil.formattedText(t.model.value,this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0))):t.model.sliderType===ej.SliderType.Range?(this.rangeSliderElement.append(this.leftLabel),this.leftLabel.append(this.leftLabelText),this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.leftLabelText.html(t.model.values[0]),this.rightLabelText.html(t.model.values[1])):(this.rangeSliderElement.append(this.rightLabel),this.rightLabel.append(this.rightLabelText),this.rightLabelText.html(t.model.value)),this.leftLabel.removeAttr("style"),this.rightLabel.removeAttr("style"),this.resize(),this.labelAlignment(),t.model.orientation===ej.Orientation.Horizontal?(t.option("width",this.rangeSliderItem.width().toString()),t.option("height","8px")):(t.option("width","8px"),t.option("height",this.rangeSliderItem.height()-12+"px")))},n.prototype.onslidechange=function(n){this.updateValues(n.model);this.selectionChange(n)},n.prototype.selectionChange=function(n){var r,h,c;if(this.masterSlaveConfiguration.isValidDataGroupInfo(this.rangeSliderItemJson,this.dataGroupInfo)&&!ej.isNullOrUndefined(n)&&n.isInteraction){var u=[],o=this.rangeSliderElement.data("ejSlider"),t=this.dataGroupInfo.Values[0].Values[0];this.clonedData=$.extend(!0,{},t);var l=t.FieldActualType==="e-reportdesigner-dataset-number",e=t.FieldActualType==="e-reportdesigner-dataset-datetime"||t.FieldActualType==="e-reportdesigner-dataset-time",i=l?ej.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.IsBetween):e?ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range):ej.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals),f=[],s=!1;if(!ej.isNullOrUndefined(o)){if(r=RangeSliderType.Range===this.rangeSliderItemJson.Type?n.value:[n.value],this.startEndrangeCheck(o,e,r))return;e?(t.DateTimeFormat===ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Date)?(h=this.updateFilterList(r,n,n.model.minDate.toLocaleDateString()),f=this.masterSlaveConfiguration.getDateFilterList(h,!1),s=!0):f=this.updateFilterList(r,n,n.model.minValue),i=f.length>0?i:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range),u={DateFormat:t.DateTimeFormat,DisplayFilterList:[],DateFilterList:f}):(u=this.updateFilterList(r,n,n.model.minValue),i=u.length>0?i:ej.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals))}c={FilterInfo:u,Action:i,IsStdDateTime:s};this.rangeSliderItemJson.SelectedFilterValues=[this.masterSlaveConfiguration.updateInitialFiltersForFilterControls(t.UniqueColumnName,this.rangeSliderItemJson.UniqueName,t.FieldActualType,c)];this.masterSlaveConfiguration.enableClearFilter(this.controlHeader);ej.DashboardDesignerUtility.Serialization.notifyChange()}},n.prototype.updateFilterList=function(n,t,i){var r=[];return t.model.sliderType.toLocaleLowerCase()===RangeSliderType[RangeSliderType.Range].toLocaleLowerCase()?r=n:(r.push(i),r.push(t.value)),r},n.prototype.startEndrangeCheck=function(n,t,i){var f=t?ej.format(n.model.minDate,ejDashboardDesigner.DateFormat):n.model.minValue,r=t?ej.format(n.model.maxDate,ejDashboardDesigner.DateFormat):n.model.maxValue,u=RangeSliderType.Range===this.rangeSliderItemJson.Type;return u&&f===i[0]&&r===i[1]||!u&&r===i[0]?(this.clearFilter(),!0):!1},n.prototype.updateOrRemovedIntialSelection=function(){var t=this.rangeSliderElement.data("ejSlider"),n,r,u,e;if(this.rangeSliderItemJson.FilterSettings.ActAsMasterWidget&&!ej.isNullOrUndefined(t)&&this.rangeSliderItemJson.SelectedFilterValues.length>0){var i=!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])?this.dataGroupInfo.Values[0].Values[0]:null,o=!ej.isNullOrUndefined(i)&&i.FieldActualType==="e-reportdesigner-dataset-number",f=!ej.isNullOrUndefined(i)&&(i.FieldActualType==="e-reportdesigner-dataset-datetime"||i.FieldActualType==="e-reportdesigner-dataset-time"),s=this.masterSlaveConfiguration.isColumnFilterModified(this.clonedData,i);if(s)this.clearFilter();else{if(n=f?this.rangeSliderItemJson.SelectedFilterValues[0].InitialDateFilter.DateFilterList:o?this.rangeSliderItemJson.SelectedFilterValues[0].InitialMeasureFilter.Values:[],r=RangeSliderType.Range===this.rangeSliderItemJson.Type&&n.length===1?n[0]:n[1],f)if(this.rangeSliderItemJson.SelectedFilterValues[0].IsStdDateTime)if(RangeSliderType.Range===this.rangeSliderItemJson.Type){var h=ej.parseDate(n[0],ejDashboardDesigner.ServerDateTimeFormat),c=ej.parseDate(n[1],ejDashboardDesigner.ServerDateTimeFormat),l=ej.format(h,ejDashboardDesigner.DateFormat),u=ej.format(c,ejDashboardDesigner.DateFormat);t.option("dateValue",[new Date(l.replace("-"," ","g")),new Date(u.replace("-"," ","g"))])}else u=ej.parseDate(n.length===1?n[0]:n[1],ejDashboardDesigner.ServerDateTimeFormat),e=ej.format(u,ejDashboardDesigner.DateFormat),t.option("dateValue",new Date(e.replace("-"," ","g")));else RangeSliderType.Range===this.rangeSliderItemJson.Type?t.option("values",[parseInt(n[0],10),parseInt(n[1],10)]):t.option("value",parseInt(r,10));else RangeSliderType.Range===this.rangeSliderItemJson.Type?t.option("values",n):t.option("value",r);this.masterSlaveConfiguration.enableClearFilter(this.controlHeader)}}},n.prototype.clearFilter=function(){var n=this.rangeSliderElement.data("ejSlider");ej.isNullOrUndefined(n)||(this.rangeSliderItemJson.Type===RangeSliderType.Range?this.summaryType===ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Date).toLocaleLowerCase()?n.option("dateValue",[n.model.minDate,n.model.maxDate]):n.option("values",[n.model.minValue,n.model.maxValue]):this.summaryType===ej.DashboardDesignerUtility.Serialization.enumToString(DateAndTimeFormat,DateAndTimeFormat.Date).toLocaleLowerCase()?n.option("dateValue",n.model.maxDate):n.option("value",n.model.maxValue),this.updateValues(n.model));this.masterSlaveConfiguration.disableClearFilter(this.controlHeader);this.rangeSliderItemJson.SelectedFilterValues=[];ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.updateValues=function(n){var t=2,i="M/d/yyyy";this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&(this.measureFormat=this.dataGroupInfo.Values[0].Values[0].MeasureFormatting);this.startDate!==""&&this.endDate!==""?n.sliderType==="range"&&n.values.length===t?(this.leftLabelText.html(ej.globalize.format(new Date(n.values[0]),i).split(",")[0]),this.rightLabelText.html(ej.globalize.format(new Date(n.values[1]),i).split(",")[0])):n.sliderType==="range"||ej.isNullOrUndefined(n.value)||this.rightLabelText.html(ej.globalize.format(new Date(n.value),i).split(",")[0]):n!==null&&this.summaryType.toLocaleLowerCase()!=="year"&&this.summaryType.toLocaleLowerCase()!=="date"?n.sliderType==="range"&&n.values.length===t?(this.leftLabelText.html(ej.DashboardUtil.formattedText(n.values[0],this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0)),this.rightLabelText.html(ej.DashboardUtil.formattedText(n.values[1],this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0))):n.sliderType==="range"||ej.isNullOrUndefined(n.value)||this.rightLabelText.html(ej.DashboardUtil.formattedText(n.value,this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0)):n.sliderType==="range"&&n.values.length===t?(this.leftLabelText.html(n.values[0]),this.rightLabelText.html(n.values[1])):n.sliderType==="range"||ej.isNullOrUndefined(n.value)||this.rightLabelText.html(n.value)},n.prototype.showLoadingIndicator=function(){$("#"+this.designId+"rangeslideritem"+this.rangeSliderItemJson.UniqueName).ejWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){$("#"+this.designId+"rangeslideritem"+this.rangeSliderItemJson.UniqueName).ejWaitingPopup("hide")},n.prototype.getRangeSliderContainerInstance=function(){return this.containerProperties},n.prototype.setHeightWidth=function(){var n=this.rangeSliderElement.data("ejSlider"),t,i;n&&(t=this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?"8px":this.rangeSliderItem.width().toString(),i=this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?this.rangeSliderItem.height()-12+"px":"8px",n.option("width",t),n.option("height",i));this.labelAlignment()},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.rangeSliderItemJson,CommandAction.ItemMove,"updatePosition","e-rangeslider-item")},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Column",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}),n},n.prototype.updateReportItemDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.resize=function(){var n,t;this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Horizontal?(n=this.contentContainer.innerHeight()/2-(this.rangeSliderElement.height()/2+16),n<0&&(n=39.5),this.rangeSliderElement.css("width","100%"),this.rangeSliderItem.css("padding","15px"),this.rangeSliderItem.css("padding-top",n+"px")):(t=this.contentContainer.innerWidth()/2-(this.rangeSliderElement.width()/2+5),this.rangeSliderElement.css("height","100%"),this.rangeSliderItem.css("padding","15px"),this.rangeSliderItem.css("padding-left",t+"px"),this.rangeSliderItem.height()<100?this.rangeSliderItem.css({top:"10px"}):this.rangeSliderItem.css({top:"5%"}))},n.prototype.isFieldValid=function(n,t,i){return!(t===CategoryType[CategoryType.Non_Numeric]&&i==="Column"&&n.toLowerCase()==="true")},n.prototype.updateReportItemData=function(n){var e;if(!$.isEmptyObject(n)){this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.startDate="";this.endDate="";this.rangeSliderItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");var i=this.rangeSliderElement.data("ejSlider"),u=null,r=null,o=null,f=null,t=null;this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&(this.measureFormat=this.dataGroupInfo.Values[0].Values[0].MeasureFormatting);ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.rangeSliderItemJson,this.dataGroupInfo);ej.isNullOrUndefined(i)||i.destroy();this.rangeSliderItem.remove();this.rangeSliderItem=ej.buildTag("div.e-rangeslideritem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"90%",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",padding:"15px",top:"4px"},{id:this.designId+"rangeslideritem"+this.rangeSliderItemJson.UniqueName});this.rangeSliderElement=ej.buildTag("div","",{margin:"0px",position:"relative","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"rangesliderelement"+this.rangeSliderItemJson.UniqueName});this.leftLabel=ej.buildTag("div.leftLabel","",{id:this.designId+"leftlabel"+this.rangeSliderItemJson.UniqueName});this.leftLabelText=ej.buildTag("span.leftLabelText","",{id:this.designId+"leftlabeltext"+this.rangeSliderItemJson.UniqueName});this.rightLabel=ej.buildTag("div.rightLabel","",{id:this.designId+"rightlabel"+this.rangeSliderItemJson.UniqueName});this.rightLabelText=ej.buildTag("span.rightLabelText","",{id:this.designId+"rightlabeltext"+this.rangeSliderItemJson.UniqueName});this.controlContainer.data("widgetInstance",this);this.rangeSliderItem.append(this.rangeSliderElement);this.rangeSliderElement.append(this.leftLabel);this.leftLabel.append(this.leftLabelText);this.rangeSliderElement.append(this.rightLabel);this.rightLabel.append(this.rightLabelText);this.controlContainer.append(this.rangeSliderItem);this.contentContainer.append(this.rangeSliderItem);this.resize();this.rangeSliderItem.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designId+"_designer_waiting_popup e-designer-loader"});n.Error?this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):n.noDataAvailable?(this.rangeSliderItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):!ej.isNullOrUndefined(n)&&n.data!=="[]"&&ej.isNullOrUndefined(n.isDataSetEmpty)?(e=n.widgetData.data,ej.isNullOrUndefined(e)||(t=JSON.parse(e),this.summaryType=t.summaryType.toLowerCase(),t.summaryType.toLowerCase()==="date"?(this.startDate=t.minRange,this.endDate=t.maxRange,o=new Date(t.minRange),f=new Date(t.maxRange),this.rangeSliderElement.ejSlider({minDate:o,maxDate:f,sliderType:this.rangeSliderItemJson.Type===RangeSliderType.Range?ej.SliderType.Range:ej.SliderType.MinRange,orientation:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?ej.Orientation.Vertical:ej.Orientation.Horizontal,enableAnimation:this.enableAnimation,showTooltip:this.showTooltip,width:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?"8px":this.rangeSliderItem.width().toString(),height:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?this.rangeSliderItem.height()-12+"px":"8px",value:f,slide:$.proxy(this.onslidechange,this),change:$.proxy(this.onslidechange,this)}),this.updateOrRemovedIntialSelection()):(u=parseInt(t.minRange),r=parseInt(t.maxRange),this.rangeSliderElement.ejSlider({minValue:u,maxValue:r,sliderType:this.rangeSliderItemJson.Type===RangeSliderType.Range?ej.SliderType.Range:ej.SliderType.MinRange,orientation:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?ej.Orientation.Vertical:ej.Orientation.Horizontal,enableAnimation:this.enableAnimation,showTooltip:this.showTooltip,width:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?"8px":this.rangeSliderItem.width().toString(),height:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?this.rangeSliderItem.height()-12+"px":"8px",value:r,slide:$.proxy(this.onslidechange,this),change:$.proxy(this.onslidechange,this)}),this.updateOrRemovedIntialSelection()))):(n.data==="[]"&&n.columnBindings==="{}"||!ej.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(u=0,r=100,this.rangeSliderElement.ejSlider({minDate:u,maxDate:r,sliderType:this.rangeSliderItemJson.Type===RangeSliderType.Range?ej.SliderType.Range:ej.SliderType.MinRange,orientation:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?ej.Orientation.Vertical:ej.Orientation.Horizontal,enableAnimation:this.enableAnimation,showTooltip:this.showTooltip,width:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?"8px":this.rangeSliderItem.width().toString(),height:this.rangeSliderItemJson.Orientation===RangeSliderOrientation.Vertical?this.rangeSliderItem.height()-12+"px":"8px",value:r,slide:$.proxy(this.onslidechange,this),change:$.proxy(this.onslidechange,this)}),this.clearFilter());i=this.rangeSliderElement.data("ejSlider");ej.isNullOrUndefined(n.isDataSetEmpty)&&n.data!=="[]"&&t.summaryType.toLowerCase()==="date"?this.rangeSliderItemJson.Type===RangeSliderType.Range?(this.leftLabelText.html(this.startDate),this.rightLabelText.html(this.endDate)):this.rightLabelText.html(this.endDate):ej.isNullOrUndefined(n.isDataSetEmpty)&&n.data!=="[]"&&t.summaryType.toLowerCase()!=="year"?this.rangeSliderItemJson.Type===RangeSliderType.Range?(this.leftLabelText.html(ej.DashboardUtil.formattedText(i.model.values[0],this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0)),this.rightLabelText.html(ej.DashboardUtil.formattedText(i.model.values[1],this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0))):this.rightLabelText.html(ej.DashboardUtil.formattedText(i.model.value,this.measureFormat.Culture,this.measureFormat.DecimalPoints,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,this.measureFormat.Unit,!0)):this.rangeSliderItemJson.Type===RangeSliderType.Range?(this.leftLabelText.html(i.model.values[0]),this.rightLabelText.html(i.model.values[1])):this.rightLabelText.html(i.model.value);this.labelAlignment();this.resize()}},n.prototype.labelAlignment=function(){var t=this.rangeSliderElement.data("ejSlider"),n;ej.isNullOrUndefined(t)||(t.model.orientation===ej.Orientation.Horizontal?(this.leftLabel.css({width:"50%",position:"absolute","margin-left":"-5px","margin-top":"15px","font-size":"12px","font-weight":"normal"}),this.rightLabel.css({width:"50%",position:"absolute",right:"-10px","text-align":"right","margin-top":"15px","font-size":"12px","font-weight":"normal"})):(n=this.contentContainer.innerWidth()/2-this.rangeSliderElement.width()/2-2,this.leftLabel.css({width:this.contentContainer.width(),bottom:"-25px",position:"absolute","font-size":"12px","font-weight":"normal","text-align":"center",display:"block",left:"-"+n+"px"}),this.rightLabel.css({width:this.contentContainer.width(),top:"-23px",position:"absolute","font-size":"12px","font-weight":"normal","text-align":"center",display:"block",left:"-"+n+"px"})),this.leftLabel.width()>this.leftLabelText.width()?this.leftLabel.css({display:"block"}):this.leftLabel.css({display:"none"}),this.rightLabel.width()>this.rightLabelText.width()?this.rightLabel.css({display:"block"}):this.rightLabel.css({display:"none"}))},n.prototype.rangeSliderItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.rangeSliderItemJson.UniqueName,[this.rangeSliderItemJson],null);var n=this.rangeSliderElement.data("ejSlider");ej.isNullOrUndefined(n)||n.destroy();$("#"+this.designer._id+"_"+this.rangeSliderItemJson.UniqueName).removeData("widgetInstance").remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.RangeSlider)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.rangeSliderItemJson)&&(this.rangeSliderItemJson=this.getRangeSliderItemJson()),this.rangeSliderItemJson},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(t,i){n.FieldType==="Measures"&&$(i).find("a").attr("fieldmenuname").toLowerCase()==="measureformat"&&$(i).css("display","block");n.FieldType==="Dimensions"&&($(i).find("a").attr("fieldmenuname").toLowerCase()==="year"||$(i).find("a").attr("fieldmenuname").toLowerCase()==="date")&&$(i).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Auto,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.columnsForFiltering=function(){var r=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,n,t,u;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,n=0;n<i.length;n++)for(t=0;t<i[n].Values.length;t++)u=i[n].Values,f.isDuplicate(r,u[t].DataField)||r.push(u[t]);return r},n.prototype.getParameterColumn=function(){return{Value:this.rangeSliderItemJson.ContainerSettings.Title,Id:this.rangeSliderItemJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n}();window.ej.createObject("ej.DashboardDesignerUtility.RangeSliderItem",InternalRangeSliderReportItem,window);ej.DashboardDesignerUtility.RangeSliderItem.prototype.widgetItems();InternalRDLParser=function(){function n(){this.previousRdlHeader=null;this.previousRdlFooter=null;this.rdlReport=null;this.rdlBody=null;this.rdlHeader=null;this.rdlFooter=null;this.rdlPage=null;this.rdlJsonObj=null;this.unitType="in";this.reportSection=null}return n.prototype.serialize=function(n){var t="";return this.rdlPage.PageHeader=this.rdlHeader,this.rdlPage.PageFooter=this.rdlFooter,this.rdlJsonObj.DataSources=this.getDataSources(n),this.rdlJsonObj.DataSets=ejDashboardDesigner.getInstance("DataSet").datasets,this.rdlJsonObj.ReportParameters=ejDashboardDesigner.getInstance("Parameter").parameters,this.rdlJsonObj.EmbeddedImages=ejDashboardDesigner.getInstance("ImageManager").imageList,t=JSON.stringify(this.rdlJsonObj),this.resetDataSource(),t},n.prototype.getDataSources=function(n){var t=ejDashboardDesigner.getInstance("DataSource").datasources,i;if(n&&t&&t.length>0)for(i=0;i<t.length;i++)t[i].ConnectionProperties&&(t[i].ConnectionProperties.EmbedCredentials=!0);return t},n.prototype.resetDataSource=function(){var n=ejDashboardDesigner.getInstance("DataSource").datasources,t;if(n&&n.length>0)for(t=0;t<n.length;t++)n[t].ConnectionProperties&&(n[t].ConnectionProperties.EmbedCredentials=!1)},n.prototype.addDataSetToRdlJsonObj=function(n){for(var i,t,r=0;r<n.DataSets.length;r++)i=ejQueryDesigner.createDataSet(),t=n.DataSets[r],i.Fields=t.Fields,i.Name=t.Name,i.Id=t.Id,i.PublishId=t.PublishId,i.InitialFilterInfo=t.InitialFilterInfo,this.populateDataSetTables(i,t),t.IsCodeView||(i.Query.DataSourceId=t.Id,i.Query.QueryDesignerState.Filters=t.InitialFilterInfo,i.Query.QueryDesignerState.Expressions=t.Expressions,i.Query.QueryDesignerState.Joins=t.Join,i.Query.QueryParameters=!ej.isNullOrUndefined(t.Tables[0])&&t.Tables[0].Parameters!=null?t.Tables[0].Parameters:[]),this.rdlJsonObj.DataSets.push(i)},n.prototype.deserialize=function(n){var t=JSON.parse(n),i,r,o,f,u,e,s;for(this.newJsonReport(),i=t.Widgets||[],r=0;r<i.length;r++)ej.isNullOrUndefined(i[r].UrlLink)||(i[r].UrlLink.GridUrlType=UrlLinkType[i[r].UrlLink.GridUrlType],i[r].UrlLink.LinkType=LinkType[i[r].UrlLink.LinkType]);for(this.rdlJsonObj.WidgetData=i,this.addDataSetToRdlJsonObj(t),u=0;u<t.DataSources.length;u++)this.rdlJsonObj.DataSources.push(t.DataSources[u]);this.rdlJsonObj.MasterFilterAction=t.MasterFilterInfo;var h=ejDashboardDesigner.getInstance("MasterSlaveFilter"),c=h.MasterSlaveFilterDeSerializer(t),l=ejDashboardDesigner.getInstance("FilterConfigurationInfo");if(l.setFilterConfiguration(c),this.rdlJsonObj.AutoRefresh=t.RefreshSettingInfo,t.RefreshSettingInfo!==null&&(o=ejDashboardDesigner.getInstance("DashboardDesigner"),o.refreshSetting=t.RefreshSettingInfo),t.UnSupportedElements&&t.UnSupportedElements.length!==0){for(f="<ul>",u=0;u<t.UnSupportedElements.length;u++)f+="<li>"+t.UnSupportedElements[u].Type+"<\/li>";f+="<\/ul>";e=ejDashboardDesigner.getInstance("DashboardDesigner");ej.DashboardUtil.getInstance().alertDialog(e.locale.alertDialogTitle.UnsupportedElements,e.locale.errorMessage.missedFeaturesErr,IconType.information,AlertType.Alert,!0,f)}this.rdlReport=this.rdlJsonObj.Report;this.rdlReport===undefined?(this.rdlReport=this.rdlJsonObj,this.rdlVersion=this.rdlReport.RDLType===0?"2008":"2010"):(s=this.rdlReport["@xmlns"],this.rdlVersion=s.match(/\d+/)[0]);!ej.isNullOrUndefined(t.DashboardProperties)&&t.DashboardProperties.length>=1&&(ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name=t.DashboardProperties[0].Name,ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Description=t.DashboardProperties[0].Description,ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.EnableComments=t.DashboardProperties[0].EnableComments);this.updateReportSection()},n.prototype.populateDataSetTables=function(n,t){var r,i;if(n.Query.DataSourceId=n.Id,t.IsCodeView)r=ejDashboardDesigner.getInstance("DashboardDesigner"),r.isExecute=t.IsCodeView,n.Query.CommandText=t.QueryText;else for(n.Query.QueryDesignerState=ejQueryDesigner.createQueryDesigner(),n.Query.QueryDesignerState.Tables=[],i=0;i<t.Tables.length;i++)t.Tables[i].Parameters!==null?n.Query.QueryDesignerState.StoredProcedure=t.Tables[i]:n.Query.QueryDesignerState.Tables.push(t.Tables[i]);n.Query.DataSourceName=n.Name},n.prototype.updateReportSection=function(){this.rdlVersion==="2008"&&(this.rdlBody=this.rdlReport.Body,this.rdlPage=this.rdlReport.Page,this.rdlHeader=this.rdlPage.PageHeader,this.rdlFooter=this.rdlPage.PageFooter,this.reportSection=null);this.rdlReport.ReportUnitType==="Cm"&&(this.unitType="cm")},n.prototype.getPageJSON=function(n){return{__type:n?"Syncfusion.RDL.DOM.PageHeader":"Syncfusion.RDL.DOM.PageFooter",Height:{__type:"Syncfusion.RDL.DOM.Size",size:"0.7291666666666666in"},PrintOnFirstPage:!0,PrintOnLastPage:!0,ReportItems:[],Style:{__type:"Syncfusion.RDL.DOM.Style",BackgroundColor:"Transparent",FontFamily:"Arial",FontSize:{__type:"Syncfusion.RDL.DOM.Size",size:"10pt"},FontWeight:"Default",BackgroundGradientType:"None",BackgroundGradientEndColor:null,FontStyle:"Default",Format:null,TextDecoration:"Default",TextAlign:"Default",VerticalAlign:"Default",Color:null,PaddingLeft:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingRight:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingTop:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},PaddingBottom:{__type:"Syncfusion.RDL.DOM.Size",size:"0pt"},LineHeight:{__type:"Syncfusion.RDL.DOM.Size",size:"0"},Direction:"Default",WritingMode:"Default",Language:null,Calendar:0,NumeralLanguage:null,TextEffect:0,BackgroundHatchType:0,ShadowColor:null,Border:{__type:"Syncfusion.RDL.DOM.Border",Color:"#000000",Style:"None",Width:{__type:"Syncfusion.RDL.DOM.Size",size:"1pt"}},TopBorder:null,BottomBorder:null,LeftBorder:null,RightBorder:null,BackgroundImage:null,NumeralVariant:null,ShadowOffset:null}}},n.prototype.newJsonReport=function(){this.rdlJsonObj={__type:"Syncfusion.RDL.DOM.ReportDefinition",Description:null,Author:null,AutoRefresh:0,DataSources:[],DataSets:[],Body:null,ReportParameters:[],CustomProperties:[],Code:null,Width:null,Page:null,EmbeddedImages:[],Language:null,CodeModules:[],Classes:[],Variables:[],DeferVariableEvaluation:!1,ConsumeContainerWhitespace:!1,DataTransform:null,DataSchema:null,DataElementName:null,InitialPageName:null,DataElementStyle:0,RDLType:1,ReportUnitType:"Inch",ReportServerUrl:null,WidgetData:null,MasterFilterAction:null};this.rdlReport=this.rdlJsonObj;this.rdlVersion=this.rdlReport.RDLType===0?"2008":"2010";this.previousRdlFooter=this.previousRdlHeader=null;this.updateReportSection()},n.prototype.getPixelValue=function(n){return n},n.prototype.getOrientation=function(){var n=ej.DashboardUtil.getSizeVal(this.rdlPage.PageHeight.size),t=ej.DashboardUtil.getSizeVal(this.rdlPage.PageWidth.size);return n>t?"Portrait":"Landscape"},n.prototype.createBorder=function(n){return{__type:"Syncfusion.RDL.DOM."+n+"Border",Color:"#000000",Style:n===""?"None":null,Width:{__type:"Syncfusion.RDL.DOM.Size",size:"1pt"}}},n}();window.ej.createObject("ej.DashboardDesignerUtility.RDLParser",InternalRDLParser,window);InternalRefreshDialog=function(){function n(){this.dashboardDesigner=null;this.footerTag=null;this.refreshSetting=null;this.ejListBoxObj=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderContainer()}return Object.defineProperty(n,"Refresh",{get:function(){return(this.refresh===null||this.refresh===undefined)&&(this.refresh=new ej.DashboardDesignerUtility.RefreshDialog),this.refresh},enumerable:!0,configurable:!0}),n.prototype.renderContainer=function(){var r,u,f;this.refreshContainer=ej.buildTag("div.e-userselect","",{},{id:this.id+"_refresh_Container"});var t=ej.buildTag("div","",{width:"298px",height:"328px","padding-left":"14px","padding-right":"14px","padding-top":"7px","padding-bottom":"7px"},{id:this.id+"_containerDiv"}),n=ej.buildTag("table","",{}),e=ej.buildTag("tr","",{}),o=ej.buildTag("td","",{width:"5px","padding-top":"5px","padding-bottom":"8px"}),s=ej.buildTag("td","",{"padding-top":"5px","padding-bottom":"8px"}),h=ej.buildTag("input.e-reportdesigner-inputPath e-checkbox","",{},{id:this.id+"_clientCheckBox"}),ot=ej.buildTag("Label.e-designer-fontfamily","Enable Client-Side Caching",{"font-size":"13px","margin-left":"5px"},{"for":this.id+"_clientCheckBox",id:this.id+"_clientLabel",type:"label"});o.append(h);s.append(ot);e.append(o).append(s);n.append(e);t.append(n);var c=ej.buildTag("tr","",{}),l=ej.buildTag("td","",{"padding-top":"5px","padding-bottom":"8px"}),a=ej.buildTag("td","",{"padding-top":"5px","padding-bottom":"8px"}),v=ej.buildTag("input.e-reportdesigner-inputPath e-checkbox","",{},{id:this.id+"_autoCheckBox"}),st=ej.buildTag("Label.e-designer-fontfamily",this.dashboardDesigner.locale.refreshWindow.enbaleAutoRefresh,{"font-size":"13px","margin-left":"5px"},{"for":this.id+"_autoCheckBox",type:"label"});l.append(v);a.append(st);c.append(l).append(a);n.append(c);t.append(n);var y=ej.buildTag("tr","",{}),p=ej.buildTag("td","",{"padding-top":"5px","padding-bottom":"8px"},{colspan:"2"}),ht=ej.buildTag("Label.e-designer-fontfamily","Time Interval",{"font-size":"13px",float:"left","margin-top":"3px"},{type:"label"}),w=ej.buildTag("input.e-reportdesigner-inputPath e-numericcheckbox left-align","",{float:"left","margin-left":"46px",width:"98px",height:"24px"},{id:this.id+"_timeCheckBox"}),ct=ej.buildTag("Label.e-designer-fontfamily","HH:mm:ss",{"font-size":"13px",float:"right","margin-top":"3px"},{type:"label"});p.append(ht).append(w).append(ct);y.append(p);n.append(y);t.append(n);var b=ej.buildTag("tr","",{}),k=ej.buildTag("td","",{"padding-top":"5px","padding-bottom":"8px"}),d=ej.buildTag("td","",{"padding-top":"5px","padding-bottom":"8px"}),g=ej.buildTag("input.e-reportdesigner-inputPath e-refreshcheckbox","",{},{id:this.id+"_refreshCheckBox"}),lt=ej.buildTag("Label.e-designer-fontfamily",this.dashboardDesigner.locale.refreshWindow.refreshWidget,{"font-size":"13px","margin-left":"5px"},{"for":this.id+"_refreshCheckBox",id:this.id+"_refreshLabel",type:"label"});k.append(g);d.append(lt);b.append(k).append(d);n.append(b);t.append(n);var nt=ej.buildTag("tr","",{},{id:this.id+"_listRow"}),tt=ej.buildTag("td","",{"padding-top":"5px","padding-bottom":"8px"},{colspan:"2"}),it=ej.buildTag("div.e-reportdesigner-inputPath","",{width:"286px",height:"140px",border:"1px unset"},{id:this.id+"_listBox"}),i=ej.buildTag("ul","",{},{id:this.id+"_refresh_setting_list_Box"});it.append(i);tt.append(it);nt.append(tt);n.append(nt);t.append(n);var rt=ej.buildTag("tr","",{}),ut=ej.buildTag("td","",{"padding-top":"5px","padding-bottom":"8px"}),ft=ej.buildTag("td","",{width:"250px","padding-top":"5px","padding-bottom":"8px"}),et=ej.buildTag("input.e-reportdesigner-inputPath","",{},{id:this.id+"_insertCheckBox"}),at=ej.buildTag("Label.e-designer-fontfamily",this.dashboardDesigner.locale.refreshWindow.rowInsertDelete,{"font-size":"13px","margin-left":"5px"},{"for":this.id+"_insertCheckBox",id:this.id+"_insertLabel",type:"label"});ut.append(et);ft.append(at);rt.append(ut).append(ft);n.append(rt);t.append(n);r=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_apply_btn"});u=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_cancel_btn"});this.refreshContainer.append(t);$(document.body).append(this.refreshContainer);this.refreshContainer.ejDialog({width:"auto",height:"auto",minWidth:315,minHeight:290,title:"Refresh Settings",zIndex:1e4,enableResize:!1,showOnInit:!1,showFooter:!0,cssClass:"e-designer-ejdialog e-dashboarddesigner",enableModal:!0,close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.footerTag=$("#"+this.id+"_refresh_Container_foot");this.footerTag.append(u).append(r);h.ejCheckBox({size:"small",checked:!1});v.ejCheckBox({size:"small",checked:!1,change:$.proxy(this.autoRefreshCheck,this)});w.ejTimePicker({timeFormat:"HH:mm:ss ",enabled:!1,cssClass:"e-dbrd-control"});g.ejCheckBox({size:"small",checked:!1,enabled:!1,change:$.proxy(this.listItemEnable,this)});i.ejListBox({showCheckbox:!0,width:"100%",enabled:!1,height:"100%",cssClass:"e-dbrd-control"});this.ejListBoxObj=i.data("ejListBox");et.ejCheckBox({checked:!1,enabled:!1});f=this.dashboardDesigner.locale.dialogOptions;u.ejButton({showRoundedCorner:!1,size:"mini",text:f.cancelButtonText,cssClass:"e-designer-cancelbtn",click:$.proxy(this.closeRefreshSetting,this)});r.ejButton({showRoundedCorner:!1,size:"mini",text:f.applyButtonText,cssClass:"e-designer-okbtn",click:$.proxy(this.applyRefreshSetting,this)})},n.prototype.openRefreshDialog=function(n,t){var i=this.ejListBoxObj.getCheckedItems();this.refreshContainer.ejDialog("open");this.resetUIElements();this.checkedItems=i;n.enableAutoRefresh||(n.interval="00:00:30");this.refreshSetting=n;this.callBackfn=t;this.populateRefreshInfo(this.refreshSetting);this.validateCheckedElement()},n.prototype.validateCheckedElement=function(){var i=this.ejListBoxObj.model.dataSource,n,t;for(this.ejListBoxObj.uncheckAll(),n=0;n<i.length;n++)for(t=0;t<this.refreshSetting.widgetCollection.length;t++)this.refreshSetting.widgetCollection[t].widgetID===i[n].widgetID&&this.ejListBoxObj.checkItemByIndex(n)},n.prototype.closeRefreshSetting=function(){this.refreshContainer.ejDialog("close")},n.prototype.resetUIElements=function(){this.refreshSetting=null},n.prototype.applyRefreshSetting=function(){var n=this.getRefreshValue(),t;n&&n.__type&&delete n.__type;n!==null&&(t=ejDashboardDesigner.getInstance("DashboardDesigner"),ej.DashboardUtil.getInstance().doAjaxPost("POST",t.model.serviceUrl+"/NotifyPropertyChange",{data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.refreshsettings,refreshJson:n})},{fnction:$.proxy(function(n){n.Status||console.info(n.Message)},this)}));ej.DashboardUtil.invokeCallBack(this.callBackfn,n);this.closeRefreshSetting()},n.prototype.getRefreshValue=function(){var e=this.refreshContainer.find("#"+this.id+"_clientCheckBox").data("ejCheckBox").model.checked,i,r,u,t,n,f;for(this.refreshSetting.enableClientCaching=e,i=this.refreshContainer.find("#"+this.id+"_autoCheckBox").data("ejCheckBox").model.checked,this.refreshSetting.enableAutoRefresh=i,r=this.refreshContainer.find("#"+this.id+"_refreshCheckBox").data("ejCheckBox").model.checked,this.refreshSetting.isRefreshWidget=r,u=this.refreshContainer.find("#"+this.id+"_timeCheckBox").data("ejTimePicker").getValue(),this.refreshSetting.interval=u,t=this.ejListBoxObj.getCheckedItems(),this.refreshSetting.widgetCollection=[],n=0;n<t.length;n++)this.refreshSetting.widgetCollection.push(t[n].data);return f=this.refreshContainer.find("#"+this.id+"_insertCheckBox").data("ejCheckBox").model.checked,this.refreshSetting.isRefreshRowCount=f,this.refreshSetting},n.prototype.getAllWidgets=function(){for(var t,u=ejDashboardDesigner.getInstance("DesignPanel").designCanvas,i=u.find(".e-reportitem"),r=[],n=0;n<i.length;n++)t=ej.DashboardUtil.getWidgetInstance($(i[n])),t.controlType!==ControlType.Label&&r.push(t.getReportItemJson());return r},n.prototype.getWidgetCollection=function(){for(var i=[],t=this.getAllWidgets(),n=0;n<t.length;n++)i.push({widgetName:t[n].ContainerSettings.Title,widgetID:t[n].UniqueName});return i},n.prototype.populateRefreshInfo=function(n){this.refreshContainer.find("#"+this.id+"_clientCheckBox").data("ejCheckBox").setModel({checked:n.enableClientCaching});this.refreshContainer.find("#"+this.id+"_autoCheckBox").data("ejCheckBox").setModel({checked:n.enableAutoRefresh});this.refreshContainer.find("#"+this.id+"_insertCheckBox").data("ejCheckBox").setModel({checked:n.isRefreshRowCount});this.refreshContainer.find("#"+this.id+"_refresh_setting_list_Box").data("ejListBox").setModel({dataSource:this.getWidgetCollection(),fields:{text:"widgetName"}});this.refreshContainer.find("#"+this.id+"_timeCheckBox").data("ejTimePicker").setModel({value:n.interval});this.refreshContainer.find("#"+this.id+"_refreshCheckBox").data("ejCheckBox").setModel({checked:n.isRefreshWidget})},n.prototype.autoRefreshCheck=function(n){if(n.isChecked){this.refreshContainer.find("#"+this.id+"_insertLabel").css("opacity","1").removeAttr("disabled");this.refreshContainer.find("#"+this.id+"_refreshLabel").css("opacity","1").removeAttr("disabled");this.refreshContainer.find("#"+this.id+"_clientCheckBox").data("ejCheckBox").setModel({checked:!1});this.refreshContainer.find("#"+this.id+"_clientCheckBox").data("ejCheckBox").disable();this.refreshContainer.find("#"+this.id+"_clientLabel").css("opacity","0.5").attr("disabled","disabled");this.refreshContainer.find("#"+this.id+"_refreshCheckBox").data("ejCheckBox").enable();this.refreshContainer.find("#"+this.id+"_insertCheckBox").data("ejCheckBox").enable();this.refreshContainer.find("#"+this.id+"_timeCheckBox").data("ejTimePicker").enable();var t=this.refreshContainer.find("#"+this.id+"_refreshCheckBox").data("ejCheckBox").model.checked;t===!0&&(this.refreshContainer.find("#"+this.id+"_listBox").css("opacity","1").removeAttr("disabled"),this.refreshContainer.find("#"+this.id+"_refresh_setting_list_Box").data("ejListBox").enable())}else this.refreshContainer.find("#"+this.id+"_clientCheckBox").data("ejCheckBox").enable(),this.refreshContainer.find("#"+this.id+"_clientLabel").css("opacity","1").removeAttr("disabled"),this.refreshContainer.find("#"+this.id+"_refreshCheckBox").data("ejCheckBox").disable(),this.refreshContainer.find("#"+this.id+"_timeCheckBox").data("ejTimePicker").disable(),this.refreshContainer.find("#"+this.id+"_insertCheckBox").data("ejCheckBox").disable(),this.refreshContainer.find("#"+this.id+"_insertLabel").css("opacity","0.5").attr("disabled","disabled"),this.refreshContainer.find("#"+this.id+"_refreshLabel").css("opacity","0.5").attr("disabled","disabled"),this.refreshContainer.find("#"+this.id+"_listBox").css("opacity","0.5").attr("disabled","disabled"),this.refreshContainer.find("#"+this.id+"_refresh_setting_list_Box").data("ejListBox").disable()},n.prototype.listItemEnable=function(n){n.isChecked?(this.refreshContainer.find("#"+this.id+"_listBox").css("opacity","1").removeAttr("disabled"),this.refreshContainer.find("#"+this.id+"_refresh_setting_list_Box").data("ejListBox").enable()):(this.refreshContainer.find("#"+this.id+"_listBox").css("opacity","0.5").attr("disabled","disabled"),this.refreshContainer.find("#"+this.id+"_refresh_setting_list_Box").data("ejListBox").disable())},n}();window.ej.createObject("ej.DashboardDesignerUtility.RefreshDialog",InternalRefreshDialog,window);InternalReportAction=function(){function n(){this.isLinkEnable=!1;this.selectedFormat="";this.categoryId="";this.id=ejDashboardDesigner.getInstance("DashboardDesigner")._id;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel")}return Object.defineProperty(n,"ReportAction",{get:function(){return(this.reportAction===null||this.reportAction===undefined)&&(this.reportAction=new ej.DashboardDesignerUtility.ReportAction),this.reportAction},enumerable:!0,configurable:!0}),n.prototype.renderAction=function(n,t,i){var o,e,a;this.categoryId=this.id+"_"+t+"_"+i.category;var r=$("#"+this.id+"_propertyPanelContainer").width(),u=i.value,f=$("#"+this.categoryId);if(f.length===0&&n){f=ej.buildTag("div","",{width:r-10,display:ej.isNullOrUndefined(i.isVisible)?"block":i.isVisible?"block":"none"},{id:this.categoryId});var v=ej.buildTag("table.e-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),y=ej.buildTag("tr","",{height:"28px"},{}),p=ej.buildTag("td","",{width:(r-47)*47/100+"px"},{}),w=ej.buildTag("td","",{},{}),vi=ej.buildTag("div.e-designer-fontfamily","Enable Link",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"},{id:this.categoryId+"_link_text_ckb"}),b=ej.buildTag("input","",{"margin-left":"2px"},{id:this.categoryId+"_link_ckb",type:"checkbox"}),k=ej.buildTag("div","",{},{id:this.categoryId+"_link_config"}),d=ej.buildTag("table.e-designer-exp-table","",{width:"100%",margin:"8px 0px"},{}),g=ej.buildTag("tr","",{height:"28px",display:"none"},{id:this.categoryId+"_link_radioOptions"}),nt=ej.buildTag("td","",{width:(r-47)*47/100+"px"},{}),yi=ej.buildTag("div.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),tt=ej.buildTag("td","",{width:"80px"},{}),it=ej.buildTag("td","",{},{}),rt=ej.buildTag("input","",{"margin-left":"2px"},{type:"radio",name:"link",id:this.categoryId+"_radio_Row"}),pi=ej.buildTag("label","Row",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.categoryId+"_radio_Row",type:"label"}),ut=ej.buildTag("input","",{},{type:"radio",name:"link",id:this.categoryId+"_radio_Column"}),wi=ej.buildTag("label","Column",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.categoryId+"_radio_Column",type:"label"}),ft=ej.buildTag("div","",{},{id:this.categoryId+"_link_selectField"}),et=ej.buildTag("table.e-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),ot=ej.buildTag("tr","",{height:"28px"},{}),st=ej.buildTag("td","",{width:(r-47)*47/100+"px"},{}),ht=ej.buildTag("td","",{},{}),bi=ej.buildTag("div.e-designer-fontfamily","Choose Field",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),ct=ej.buildTag("input.e-textbox","",{height:"28px",width:(r-33)*57/100-30+"px","margin-left":"2px"},{id:this.categoryId+"_link_selectField_txt",type:"text"}),lt=ej.buildTag("div","",{},{id:this.categoryId+"_link_columnURL"}),at=ej.buildTag("table.e-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),vt=ej.buildTag("tr","",{height:"28px"},{}),yt=ej.buildTag("td","",{width:(r-47)*47/100+"px"},{}),pt=ej.buildTag("td","",{},{}),ki=ej.buildTag("div.e-designer-fontfamily","Url",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),s=ej.buildTag("input.e-textbox","",{height:"24px",width:(r-33)*57/100-50+"px","margin-left":"2px"},{id:this.categoryId+"_link_columnURL_txt",type:"text",autocorrect:"off",spellcheck:"false"}),h=ej.buildTag("button.e-dbrd-hand-cursor","",{height:"26px",width:"30px","margin-left":"2px","margin-top":"-3px",cursor:"pointer"},{id:this.categoryId+"_link_columnURL_Button"}),wt=ej.buildTag("div","",{},{id:this.categoryId+"_link_url"}),bt=ej.buildTag("table.e-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),kt=ej.buildTag("tr","",{height:"28px"},{}),dt=ej.buildTag("td","",{width:(r-47)*47/100+"px"},{}),gt=ej.buildTag("td","",{},{}),di=ej.buildTag("div.e-designer-fontfamily","URL",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),c=ej.buildTag("input.e-textbox","",{height:"28px",width:(r-33)*57/100-30+"px","margin-left":"2px"},{id:this.categoryId+"_link_url_txt",type:"text",autocorrect:"off",spellcheck:"false"}),ni=ej.buildTag("div","",{},{id:this.categoryId+"_link_appendColumn"}),ti=ej.buildTag("table.e-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),ii=ej.buildTag("tr","",{height:"28px"},{}),ri=ej.buildTag("td","",{width:(r-47)*47/100+"px"},{}),ui=ej.buildTag("td","",{},{}),gi=ej.buildTag("div.e-designer-fontfamily","Append Column",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),fi=ej.buildTag("div","",{"padding-left":"2px"},{}),ei=ej.buildTag("ul","",{},{id:this.categoryId+"_link_appendColumn_list"});fi.append(ei);var oi=ej.buildTag("div","",{},{id:this.categoryId+"_link_urlPreview"}),si=ej.buildTag("table.e-designer-exp-table","",{width:"100%",margin:"8px 0px"},{unselectable:"on"}),hi=ej.buildTag("tr","",{height:"28px"},{}),ci=ej.buildTag("td","",{width:(r-47)*47/100+"px"},{}),li=ej.buildTag("td","",{},{}),nr=ej.buildTag("div.e-designer-fontfamily","URL Preview",{"font-size":"12px",overflow:"hidden",float:"right","margin-right":"5px","white-space":"nowrap","text-overflow":"ellipsis"}),ai=ej.buildTag("div.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden","margin-right":"5px","white-space":"nowrap",width:(r-33)*57/100-30+"px","text-overflow":"ellipsis"}),l=ej.buildTag("a","",{height:"28px","margin-left":"2px","font-size":"13px"},{id:this.categoryId+"_link_urlPreview_txt",href:""});ci.append(nr);ai.append(l);li.append(ai);hi.append(ci).append(li);si.append(hi);oi.append(si);ri.append(gi);ui.append(fi);ii.append(ri).append(ui);ti.append(ii);ni.append(ti);dt.append(di);gt.append(c);kt.append(dt).append(gt);bt.append(kt);wt.append(bt);st.append(bi);ht.append(ct);ot.append(st).append(ht);et.append(ot);ft.append(et);yt.append(ki);pt.append(s).append(h);vt.append(yt).append(pt);at.append(vt);lt.append(at);tt.append(rt).append(pi);it.append(ut).append(wi);nt.append(yi);g.append(nt).append(tt).append(it);d.append(g);k.append(d);p.append(vi);w.append(b);y.append(p).append(w);v.append(y);f.append(v);f.append(k);f.append(ft);f.append(lt);f.append(wt);f.append(ni);f.append(oi);n.append(f);l.text("");ct.ejDropDownList({dataSource:[],fields:{text:"Name",value:"Value"},showRoundedCorner:!0,width:(r-33)*57/100-10+"px",select:$.proxy(this.changeColumn,this),cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control"});h.ejButton({showRoundedCorner:!0,width:"26px",height:"28px",contentType:"imageonly",prefixIcon:"e-icon e-plus",cssClass:"e-designer-click e-designer-button e-reportdesigner-previewbtn",click:$.proxy(this.appendClick,this)});h.css({"background-color":"#0C8BE2","border-color":"#0C8BE2",color:"white"});ei.ejListBox({dataSource:[],fields:{text:"Name",value:"Value"},showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-designer-list-selection e-dbrd-designer-scroller e-dbrd-control",width:(r-33)*57/100-20+"px",height:"125px",select:$.proxy(this.selectURL,this)});b.ejCheckBox({width:(r-33)*57/100-15+"px",change:$.proxy(this.changedLink,this),cssClass:"e-designer-prop-checkbox"});rt.ejRadioButton({checked:!0,cssClass:"e-designer-radiobtn",change:$.proxy(this.checkedLinkConfig,this)});ut.ejRadioButton({cssClass:"e-designer-radiobtn",change:$.proxy(this.checkedLinkConfig,this)});c.bind("blur",$.proxy(this.urlFocusOut,this));c.bind("keyup",$.proxy(this.urlKeyUp,this));s.bind("blur",$.proxy(this.columnUrlFocusOut,this));s.bind("keyup",$.proxy(this.columnUrlKeyUp,this));l.bind("click",$.proxy(this.urlPreviewClick,this))}if(f.length>0){if($("#"+this.categoryId).css("display",ej.isNullOrUndefined(i.isVisible)?"block":i.isVisible?"block":"none"),o=void 0,$("#"+this.categoryId+"_link_radioOptions").css("display","none"),ej.isNullOrUndefined(i.isDisable)?this.isLinkEnable=!0:this.enableLink(!i.isDisable),ej.isNullOrUndefined(u))$("#"+this.categoryId+"_radio_Row").data("ejRadioButton").setModel({checked:!0}),$("#"+this.categoryId+"_radio_Column").data("ejRadioButton").setModel({checked:!1}),$("#"+this.categoryId+"_link_ckb").data("ejCheckBox").setModel({checked:!1}),$("#"+this.categoryId+"_link_url_txt").val(""),$("#"+this.categoryId+"_link_urlPreview_txt")[0].innerText!==""&&this.updateURLText(""),this.enableLinkConfig(!1),this.linkItem=this.populateLinkModel(i),this.changeLinkConfig(!1,!0);else{if($("#"+this.categoryId+"_link_ckb").data("ejCheckBox").setModel({checked:u.EnableLink}),this.enableLinkConfig(i.isDisable?!1:u.EnableLink),this.linkItem=i,u.GridUrlType===UrlLinkType[UrlLinkType.Column]){for($("#"+this.categoryId+"_radio_Column").data("ejRadioButton").setModel({checked:!0}),u.ColumnUrlDetails=this.updateColumnDetails(u.ColumnUrlDetails),e=0;e<u.ColumnUrlDetails.length;e++)if(!ej.isNullOrUndefined(u.ColumnUrlDetails[e].UrlLink)&&u.ColumnUrlDetails[e].UrlLink!==""){a=u.ColumnUrlDetails[e].UrlLink;$("#"+this.categoryId+"_link_columnURL_txt").val(a);this.updateURLText(a);o=u.ColumnUrlDetails[e].CaptionName;break}}else $("#"+this.categoryId+"_radio_Row").data("ejRadioButton").setModel({checked:!0}),this.updateUrlRowDetails(),this.populateLink(this.linkItem.value.UrlPath);this.changeLinkConfig(!1,!1)}this.populateList();this.populateDropDown();ej.isNullOrUndefined(u)||u.GridUrlType!==UrlLinkType[UrlLinkType.Column]||ej.isNullOrUndefined(o)||o===""||$("#"+this.categoryId+"_link_selectField_txt").data("ejDropDownList").selectItemByValue(o)}},n.prototype.getLinkItemVisibility=function(n){return!ej.isNullOrUndefined(this.linkItem.visibility)&&!(this.linkItem.visibility&n)?!1:!0},n.prototype.updateLinkEnable=function(n){this.enableLink(n);this.changeLinkConfig(!1,!1);this.enableLinkConfig(n?this.linkItem.value.EnableLink:!1)},n.prototype.enableLink=function(n){n?($("#"+this.categoryId+"_link_text_ckb").removeAttr("disabled").css("opacity","1"),$("#"+this.categoryId+"_link_ckb").data("ejCheckBox").enable(),this.isLinkEnable=!0):($("#"+this.categoryId+"_link_ckb").data("ejCheckBox").disable(),$("#"+this.categoryId+"_link_text_ckb").attr("disabled","true").css("opacity",".3"),this.isLinkEnable=!1)},n.prototype.updateUrlRowDetails=function(){for(var r,i,t=this.linkItem.value.PassingParameters,f=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),u=ej.DashboardUtil.getInstance().getSourceData(f.dataGroupInfo,!1),n=0;n<t.length;n++){for(r=!1,i=0;i<u.length;i++)if(t[n]===u[i].Value){r=!0;break}r||(this.linkItem.value.UrlPath=this.linkItem.value.UrlPath.replaceAll("{{:"+t[n]+"}}",""),t.splice(n,1),this.updateLinksInWidgetJson())}},n.prototype.updateColumnDetails=function(n){for(var u,i,f=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),e=f.dataGroupInfo,r=ej.DashboardUtil.getInstance().getSourceData(e,!0),t=0;t<n.length;t++){for(u=!0,i=0;i<r.length;i++)if(n[t].CaptionName===r[i].FieldName){n[t].UniqueColumnName=r[i].Id;u=!1;break}u&&(n.splice(t,1),this.updateLinksInWidgetJson())}return n},n.prototype.updateLinksInWidgetJson=function(){var n=JSON.parse(JSON.stringify(this.linkItem));this.propertyPanel.updatePropertyChange(this.linkItem.category+"Link",this.linkItem.value,n.value,this.linkItem,this.linkItem.categoryName)},n.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},n.prototype.populateLinkModel=function(n){return n.value=this.createDashboardLinks(),n},n.prototype.validateColumnDetails=function(n){for(var t=0;t<this.linkItem.value.ColumnUrlDetails.length;t++)if(this.linkItem.value.ColumnUrlDetails[t].UniqueColumnName===n)return!1;return!0},n.prototype.populateDropDown=function(){var u=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),f=u.dataGroupInfo,i,n,t,r;if(this.columnData=ej.DashboardUtil.getInstance().getSourceData(f,!0),i=this.isLinkEnable?"block":"none",this.columnData.length>0?$("#"+this.categoryId+"_link_radioOptions").css("display",ej.isNullOrUndefined(this.linkItem.enableMode)?i:this.linkItem.enableMode===LinkEnableMode.Both?i:"none"):($("#"+this.categoryId+"_link_radioOptions").css("display","none"),this.linkItem.value.GridUrlType===UrlLinkType[UrlLinkType.Column]&&($("#"+this.categoryId+"_radio_Row").data("ejRadioButton").setModel({checked:!0}),this.changeLinkConfig(!0,!0),this.populateLink(this.linkItem.value.ReportUrlPath)),$("#"+this.categoryId+"_link_radioOptions").css("display","none")),ej.isNullOrUndefined(this.linkItem)||this.linkItem.value.ColumnUrlDetails.length!==this.columnData.length)for(n=0;n<this.columnData.length;n++)this.validateColumnDetails(this.columnData[n].Id)&&(t=this.createGridColumnUrlDetails(),t.CaptionName=this.columnData[n].FieldName,t.UniqueColumnName=this.columnData[n].Id,this.linkItem.value.ColumnUrlDetails.push(t));r=$("#"+this.categoryId+"_link_selectField_txt").data("ejDropDownList");ej.isNullOrUndefined(r)||($("#"+this.categoryId+"_link_selectField_txt").data("ejDropDownList").option("dataSource",this.columnData),$("#"+this.categoryId+"_link_selectField_txt").data("ejDropDownList").option("selectedIndex",0))},n.prototype.populateList=function(){var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),r=i.dataGroupInfo,n,t;this.rowData=ej.DashboardUtil.getInstance().getSourceData(r,!1);n=$("#"+this.categoryId+"_link_appendColumn_list");t=n.data("ejListBox");ej.isNullOrUndefined(t)||(t.option("dataSource",this.rowData),n.find("li").unbind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.changeURL,this)),n.find("li").bind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.changeURL,this)),n.ejListBox("instance")._refreshScroller())},n.prototype.populateLink=function(n){this.dashboardDesigner.element.find("#"+this.categoryId+"_link_url_txt").val(n);this.updateURLText(n);this.linkItem.value.UrlPath=n},n.prototype.checkedLinkConfig=function(n){n.isInteraction&&(this.changeLinkConfig(!0,!0),this.refreshWidget())},n.prototype.appendClick=function(){var r=$("#"+this.categoryId+"_link_selectField_txt").data("ejDropDownList").getSelectedValue(),n=$("#"+this.categoryId+"_link_columnURL_txt"),t,i=n.val(),u="{{:"+r+"}}";n[0].selectionStart===0&&(t=n.val().length,n[0].setSelectionRange(t,t));n.val(i.substring(0,n[0].selectionStart)+u+i.substring(n[0].selectionStart));this.updateColumnUrl(!0)},n.prototype.getFieldName=function(n){for(var i,t=0;t<this.columnData.length;t++)if(this.columnData[t].Value===n){i=this.columnData[t].FieldName;break}return i},n.prototype.refreshWidget=function(){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);n.refresh()},n.prototype.changeColumn=function(n){var t=n.value,r=this.getFieldName(t),i;$("#"+this.categoryId+"_link_columnURL_Button").attr("title",this.dashboardDesigner.locale.dashboardLink.columnURLTooltipPrefix+" "+r+" "+this.dashboardDesigner.locale.dashboardLink.columnURLTooltipSuffix);i=$("#"+this.categoryId+"_link_columnURL_txt");i.val(this.getLastColumnUrl(t))},n.prototype.selectURL=function(n){$("#"+this.categoryId+"_link_appendColumn_list").ejListBox("instance")._refreshScroller();!ej.isNullOrUndefined(n)&&n.value.length>0&&(this.selectedFormat="{{:"+n.value+"}}")},n.prototype.changeURL=function(){var i;if(!ej.isNullOrUndefined(this.selectedFormat)&&this.selectedFormat.length>0){var n=$("#"+this.categoryId+"_link_url_txt"),t=void 0,r=n.val();ej.isNullOrUndefined(this.selectedFormat)||(i=this.selectedFormat.replace("{{:","").replace("}}",""),this.linkItem.value.PassingParameters.indexOf(i)===-1&&this.linkItem.value.PassingParameters.push(i));n[0].selectionStart===0&&(t=n.val().length,n[0].setSelectionRange(t,t));n.val(r.substring(0,n[0].selectionStart)+this.selectedFormat+r.substring(n[0].selectionStart));this.updateURLText(n.val());this.updateUrl(!1);this.selectedFormat=""}},n.prototype.updatePassingParameters=function(n,t){n.PassingParameters=[];for(var i=0;i<this.linkItem.value.PassingParameters.length;i++)t.indexOf(this.linkItem.value.PassingParameters[i])!==-1&&n.PassingParameters.push(this.linkItem.value.PassingParameters[i]);return n},n.prototype.updateActionDetails=function(n,t){var i=JSON.parse(JSON.stringify(this.linkItem)),r;if(i.value.GridUrlType=n,n===UrlLinkType[UrlLinkType.Row]){for(r=0;r<i.value.ColumnUrlDetails.length;r++)i.value.ColumnUrlDetails[r].UrlLink="";$("#"+this.categoryId+"_link_url_txt").val("");this.updateURLText("")}else i.value.UrlPath="",i.value.PassingParameters=[],$("#"+this.categoryId+"_link_columnURL_txt").val("");t&&this.propertyPanel.updatePropertyChange(this.linkItem.category+"Link",this.linkItem.value,i.value,this.linkItem,this.linkItem.categoryName);this.linkItem.value=i.value},n.prototype.changeLinkConfig=function(n,t){$("#"+this.categoryId+"_radio_Row").data("ejRadioButton").model.checked?($("#"+this.categoryId+"_link_appendColumn").css("display",this.isLinkEnable&&this.getLinkItemVisibility(LinkVisibility.AppendColumn)?"block":"none"),$("#"+this.categoryId+"_link_urlPreview").css("display",this.isLinkEnable&&this.getLinkItemVisibility(LinkVisibility.URLPreview)?"block":"none"),$("#"+this.categoryId+"_link_url").css("display",this.isLinkEnable&&this.getLinkItemVisibility(LinkVisibility.URLText)?"block":"none"),$("#"+this.categoryId+"_link_selectField").css("display","none"),$("#"+this.categoryId+"_link_columnURL").css("display","none"),t&&this.updateActionDetails(UrlLinkType[UrlLinkType.Row],n)):($("#"+this.categoryId+"_link_appendColumn").css("display","none"),$("#"+this.categoryId+"_link_urlPreview").css("display","none"),$("#"+this.categoryId+"_link_url").css("display","none"),$("#"+this.categoryId+"_link_selectField").css("display",this.isLinkEnable?"block":"none"),$("#"+this.categoryId+"_link_columnURL").css("display",this.isLinkEnable?"block":"none"),t&&(this.updateActionDetails(UrlLinkType[UrlLinkType.Column],n),this.populateDropDown()))},n.prototype.enableLinkConfig=function(n){n?($("#"+this.categoryId+"_link_url").removeAttr("disabled").css("opacity","1"),$("#"+this.categoryId+"_link_config").removeAttr("disabled").css("opacity","1"),$("#"+this.categoryId+"_link_urlPreview").removeAttr("disabled").css("opacity","1"),$("#"+this.categoryId+"_link_appendColumn").removeAttr("disabled").css("opacity","1"),$("#"+this.categoryId+"_radio_Row").data("ejRadioButton").enable(),$("#"+this.categoryId+"_radio_Column").data("ejRadioButton").enable(),$("#"+this.categoryId+"_link_url_txt").removeAttr("disabled"),$("#"+this.categoryId+"_link_urlPreview_txt").removeAttr("disabled"),$("#"+this.categoryId+"_link_appendColumn_txt").removeAttr("disabled"),$("#"+this.categoryId+"_link_selectField").removeAttr("disabled"),$("#"+this.categoryId+"_link_columnURL").removeAttr("disabled"),$("#"+this.categoryId+"_link_appendColumn_list").ejListBox("instance")._refreshScroller(),$("#"+this.categoryId+"_link_appendColumn_list").data("ejListBox").enable()):($("#"+this.categoryId+"_link_url").attr("disabled","true").css("opacity",".3"),$("#"+this.categoryId+"_link_appendColumn_list").data("ejListBox").disable(),$("#"+this.categoryId+"_link_config").attr("disabled","true").css("opacity",".3"),$("#"+this.categoryId+"_link_urlPreview").attr("disabled","true").css("opacity",".3"),$("#"+this.categoryId+"_link_appendColumn").attr("disabled","true").css("opacity",".3"),$("#"+this.categoryId+"_radio_Row").data("ejRadioButton").disable(),$("#"+this.categoryId+"_radio_Column").data("ejRadioButton").disable(),$("#"+this.categoryId+"_link_url_txt").attr("disabled","true"),$("#"+this.categoryId+"_link_urlPreview_txt").attr("disabled","true"),$("#"+this.categoryId+"_link_appendColumn_txt").attr("disabled","true"),$("#"+this.categoryId+"_link_selectField").attr("disabled","true"),$("#"+this.categoryId+"_link_columnURL").attr("disabled","true"))},n.prototype.changedLink=function(n){if(n.isInteraction){$("#"+this.categoryId+"_radio_Row").data("ejRadioButton").option("checked",!0);this.changeLinkConfig(!1,!0);this.enableLinkConfig(n.isChecked);var t=this.populateLinkModel(JSON.parse(JSON.stringify(this.linkItem)));t.value.EnableLink=n.isChecked;this.propertyPanel.updatePropertyChange(this.linkItem.category+"Link",this.linkItem.value,t.value,this.linkItem,this.linkItem.categoryName);this.linkItem.value=t.value;this.refreshWidget()}},n.prototype.getLastUrl=function(){return this.linkItem&&this.linkItem.value?this.linkItem.value.UrlPath:""},n.prototype.getLastColumnUrl=function(n){for(var t=0;t<this.columnData.length;t++)if(this.columnData[t].Value===n&&this.linkItem.value.ColumnUrlDetails.length>t)return this.linkItem.value.ColumnUrlDetails[t].UrlLink;return""},n.prototype.updateURLText=function(n){if(n.length===0)$("#"+this.categoryId+"_link_urlPreview_txt").text(""),$("#"+this.categoryId+"_link_urlPreview_txt").attr("href","");else{var t=ej.DashboardUtil.getInstance().addhttp(n);$("#"+this.categoryId+"_link_urlPreview_txt").attr("href",t);$("#"+this.categoryId+"_link_urlPreview_txt").text(n)}},n.prototype.updateUrlByValues=function(n,t,i){var f,e,o,r,u;if(!ej.isNullOrUndefined(n)&&n!==""&&t.length>0&&(f=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),e=f.dataValues,!ej.isNullOrUndefined(e)))for(o=ej.DashboardUtil.getInstance().getSourceData(f.dataGroupInfo,i),r=0;r<t.length;r++)u=this.getValuesOfParameter(t[r],o,e),n=!ej.isNullOrUndefined(u)&&u!==""?n.replaceAll("{{:"+t[r]+"}}",""+u+""):n;return n},n.prototype.getValuesOfParameter=function(n,t,i){for(var o,u,f,e,r=0;r<t.length;r++)if(t[r].Value===n)for(o=JSON.parse(i.data),u=0;u<o.length;u++)if(f=t[r].Id,e=o[u],!ej.isNullOrUndefined(e[f])&&e[f]!=="")return e[f];return""},n.prototype.columnUrlFocusOut=function(){this.updateColumnUrl(!0)},n.prototype.updateColumnUrl=function(n){var f=$("#"+this.categoryId+"_link_columnURL_txt"),r=f.val(),u=$("#"+this.categoryId+"_link_selectField_txt").data("ejDropDownList").getSelectedValue(),i,t;if(r!==this.getLastColumnUrl(u)){for(i=JSON.parse(JSON.stringify(this.linkItem.value)),t=0;t<this.columnData.length;t++)if(this.columnData[t].Value===u){i.ColumnUrlDetails[t].UrlLink=r;break}n&&(this.propertyPanel.updatePropertyChange(this.linkItem.category+"Link",this.linkItem.value,i,this.linkItem,this.linkItem.categoryName),this.linkItem.value=i,this.refreshWidget())}},n.prototype.columnUrlKeyUp=function(){this.updateColumnUrl(!0)},n.prototype.urlFocusOut=function(){this.updateURLText(this.dashboardDesigner.element.find("#"+this.categoryId+"_link_url_txt").val());this.updateUrl(!0)},n.prototype.updateUrl=function(n){var i=this.dashboardDesigner.element.find("#"+this.categoryId+"_link_url_txt").val(),t;i!==this.getLastUrl()&&(t=JSON.parse(JSON.stringify(this.linkItem.value)),t.UrlPath=i,n&&this.updatePassingParameters(t,i),this.propertyPanel.updatePropertyChange(this.linkItem.category+"Link",this.linkItem.value,t,this.linkItem,this.linkItem.categoryName),this.linkItem.value=t)},n.prototype.urlKeyUp=function(){this.updateURLText(this.dashboardDesigner.element.find("#"+this.categoryId+"_link_url_txt").val());this.updateUrl(!0)},n.prototype.urlPreviewClick=function(n){var t,i,r;n.preventDefault();t=$("#"+this.categoryId+"_link_urlPreview_txt").attr("href");t.length>0&&(i=this.linkItem.value.GridUrlType===UrlLinkType[UrlLinkType.Column],r=this.updateUrlByValues(t,i?this.linkItem.value.ColumnUrlDetails:this.linkItem.value.PassingParameters,i),window.open(r,"_blank"))},n.prototype.createDashboardLinks=function(){return{ColumnUrlDetails:[],GridUrlType:UrlLinkType[UrlLinkType.Row],LinkType:LinkType[LinkType.Url],EnableLink:!1,PassingParameters:[],UrlPath:""}},n.prototype.createGridColumnUrlDetails=function(){return{CaptionName:"",UniqueColumnName:"",UrlLink:""}},n}();window.ej.createObject("ej.DashboardDesignerUtility.ReportAction",InternalReportAction,window);InternalSASSDataSource=function(){function n(){this.datasource=ejDashboardDesigner.getInstance("DataSource");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.dataSourceLocale=this.dashboardDesigner.locale.dataSource}return Object.defineProperty(n,"SASSDataSource",{get:function(){return(this.sassdataSource===null||this.sassdataSource===undefined)&&(this.sassdataSource=new ej.DashboardDesignerUtility.SASSDataSource),this.sassdataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n){n.find("#"+this.id+"_sass_datasource").length>0?this.resetConfiguration():(this.sassConfig=ej.buildTag("div","",{width:"100%",height:"100%",display:"table-row"},{id:this.id+"_sass_datasource"}),n.append(this.sassConfig),this.renderSassPanel(),this.changedAuthentication({text:this.dataSourceLocale.windowsText}));this.showConfiguration(!0)},n.prototype.renderSassPanel=function(){this.sassPanel=ej.buildTag("div","",{width:"100%",height:"100%",display:"table-row"},{id:this.id+"_sass_Panel"});var n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+"_sass_config"}),t=this.dataSourceLocale.windowsText,i=this.dataSourceLocale.sqlServerText,r=this.dataSourceLocale.promptText,u=this.dataSourceLocale.noneText,f=[{id:t.toLowerCase(),text:t,value:t},{id:i.toLowerCase(),text:i,value:i},{id:r.toLowerCase(),text:r,value:r},{id:u.toLowerCase(),text:u,value:u}];this.sassConfig.append(this.sassPanel);this.sassPanel.append(n);this.datasource.renderTextArea("Connection String",this.id+"_sass_conStr",n);this.datasource.renderDropDownItem("Authentication Type",this.id+"_sass_authtype",n,f,{id:"id",text:"text",value:"value"},"0");this.datasource.renderTextBoxItem("Prompt Text",this.id+"_sass_prompt",!1,n,426);this.datasource.renderTextBoxItem("Username",this.id+"_sass_usr",!1,n,426);this.datasource.renderTextBoxItem("Password",this.id+"_sass_pswd",!0,n,426);$("#"+this.id+"_sass_authtype")&&(this.ejAuthDrpdwn=$("#"+this.id+"_sass_authtype").data("ejDropDownList"),this.ejAuthDrpdwn.model.change=$.proxy(this.changedAuthentication,this));this.promptTag=$("#"+this.id+"_sass_prompt_tr");this.conncString=$("#"+this.id+"_sass_conStr");this.promptCont=$("#"+this.id+"_sass_prompt");this.userName=$("#"+this.id+"_sass_usr");this.passWord=$("#"+this.id+"_sass_pswd");this.userNameTag=$("#"+this.id+"_sass_usr_tr");this.passWordTag=$("#"+this.id+"_sass_pswd_tr")},n.prototype.changedAuthentication=function(n){this.hideValidationMsg();this.promptTag.css("display","none");this.userNameTag.css("display","none");this.passWordTag.css("display","none");(n.text===this.dataSourceLocale.sqlServerText||n.text===this.dataSourceLocale.promptText)&&(this.userNameTag.css("display","table-row"),this.passWordTag.css("display","table-row"));n.text===this.dataSourceLocale.promptText&&this.promptTag.css("display","table-row");this.datasource.updateEJComponentSize();this.datasource.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.editConfiguration=function(n){this.hideValidationMsg();this.renderConfiguration(this.datasource.configTable);this.conncString.val(n.ConnectionProperties.ConnectString);this.userName.val(n.ConnectionProperties.UserName);this.passWord.val(n.ConnectionProperties.PassWord);n.ConnectionProperties.IntegratedSecurity||n.SecurityType!==0&&n.SecurityType!=="None"?!n.ConnectionProperties.IntegratedSecurity&&(!ej.isNullOrUndefined(n.ConnectionProperties.UserName)&&n.ConnectionProperties.UserName.length>0||!ej.isNullOrUndefined(n.ConnectionProperties.PassWord)&&n.ConnectionProperties.PassWord.length>0)?this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.sqlServerText}):n.ConnectionProperties.IntegratedSecurity||!ej.isNullOrUndefined(n.ConnectionProperties.Prompt)&&(ej.isNullOrUndefined(n.ConnectionProperties.Prompt)||n.ConnectionProperties.Prompt.length!==0)||n.SecurityType!==2&&n.SecurityType!=="DataBase"?n.ConnectionProperties.IntegratedSecurity?n.ConnectionProperties.IntegratedSecurity&&this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.windowsText}):(this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.promptText}),this.promptCont.val(!ej.isNullOrUndefined(n.ConnectionProperties.Prompt)&&n.ConnectionProperties.Prompt.length>0?n.ConnectionProperties.Prompt:"Specify the Username and Password for Data Source: "+n.Name)):this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.sqlServerText}):this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.noneText})},n.prototype.showConfiguration=function(n){this.sassConfig.css("display",n?"table-row":"none");this.sassConfig.children().show()},n.prototype.hideValidationMsg=function(){this.datasource.showValidationMsg(this.conncString.attr("id"),!1);this.datasource.showValidationMsg(this.promptCont.attr("id"),!1);this.datasource.showValidationMsg(this.userName.attr("id"),!1);this.datasource.showValidationMsg(this.passWord.attr("id"),!1)},n.prototype.resetConfiguration=function(){this.conncString.val("");this.promptCont.val("");this.userName.val("");this.passWord.val("");this.hideValidationMsg();this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.windowsText})},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName="";n.ConnectionProperties.PassWord="";n.ConnectionProperties.Prompt="";n.SecurityType=t.SecurityType;this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.sqlServerText?(n.ConnectionProperties.UserName=t.Username,n.ConnectionProperties.PassWord=t.Password):this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText&&(n.ConnectionProperties.Prompt=!ej.isNullOrUndefined(this.promptCont)&&this.promptCont.val().length>0?this.promptCont.val():"Specify the Username and Password for Data Source: "+n.Name)},n.prototype.getDatasourceInfo=function(n){var t=!0,i="",r="",u=!0,f="Integrated";return(this.hideValidationMsg(),this.conncString.val().length===0&&(this.datasource.showValidationMsg(this.conncString.attr("id"),!0,"Specify the Connection string"),t=!1),this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText&&this.promptCont.val().length===0&&(this.datasource.showValidationMsg(this.promptCont.attr("id"),!0,"Specify the Prompt Text"),t=!1),this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.promptText||this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.authentication?(i=this.userName.val(),r=this.passWord.val(),i.length===0&&(this.datasource.showValidationMsg(this.userName.attr("id"),!0,"Specify the User Name"),t=!1),r.length===0&&(this.datasource.showValidationMsg(this.passWord.attr("id"),!0,"Specify the Password"),t=!1),f="DataBase",u=!1):this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.noneText&&(f="None",u=!1),t)?{Name:n,Provider:"Microsoft SQL Server Analysis Services",IsIntegrated:u,SecurityType:f,Username:i,Password:r,ConnectionString:this.conncString.val()}:null},n}();window.ej.createObject("ej.DashboardDesignerUtility.SASSDataSource",InternalSASSDataSource,window);ContainerSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.ContainerSettings";this.Description="";this.Bounds=new WidgetBounds;this.TextAlignment=TextAlignment.Left;this.TextColor="#686262";this.ShowBorder=!1;this.CornerRadius=0;this.ShowMaximize=!0;this.EnableCsvExport=!0;this.EnableExcelExport=!0;this.EnableImageExport=!0;this.EnablePdfExport=!0;this.EnableComment=!0;this.ShowLinkIcon=!1;this.SubTitle=""}return n}();ColorSets=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.Common.ColorSets";this.ColorSettingsList=[];this.IsMeasure=!1;this.SelectedDatasource=""}return n}(),function(n){n[n.Basic=0]="Basic";n[n.Advance=1]="Advance"}(CustomColorType||(CustomColorType={}));var CustomColorSettings=function(){function n(){this.SelectedColumn=new ColumnType;this.DefaultSettings=new DefaultColorSettings}return n}(),ColumnType=function(){function n(){this.UniqueColumnName="";this.Key="";this.SelectedColumnType=ColorColumnType.Measure;this.SummaryType=SummaryType.SUM}return n}(),DefaultColorSettings=function(){function n(){this.DefaultColors=[]}return n}(),DefaultColorSet=function(){function n(){this.Name="";this.Color="";this.IsEdited=!1}return n}(),FilterSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.FilterSettings";this.ActAsMasterWidget=!1;this.IgnoreFilterActions=!1;this.HierarchicalFilter=!0}return n}(),DashboardProperties=function(){function n(){this.Name="Untitled";this.SubTitle=null;this.Description=null;this.EnableComments=!0;this.ParameterColumns=[]}return n}(),ParameterColumnItem=function(){function n(){}return n}(),ParameterColumn=function(){function n(){}return n}(),WidgetBounds=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.Bounds";this.Row=0;this.RowSpan=0;this.Column=0;this.ColumnSpan=0}return n}(),DataConfiguration=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.Common.DataConfiguration";this.Containers=[]}return n}(),WidgetProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.WidgetProperties";this.ContainerSettings=new ContainerSettings;this.Data=new DataConfiguration;this.FilterSettings=new FilterSettings;this.SelectedFilterValues=[];this.ColorSets=new ColorSets}return n}(),FieldContainer=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.Common.FieldContainer";this.FieldInfos=[]}return n}(),FieldInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.Common.FieldInfo"}return n}(),MeasureFormatting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.Common.MeasureFormatting";this.Culture="en-US";this.DecimalPoints=2;this.FormatType=DataValueFormat.Number;this.Prefix="";this.Suffix="";this.Unit=NumberFormat.Auto}return n}(),Customsort=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.CustomSort"}return n}(),FilterInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.FilterInfo";this.DimensionFilterInfo=null;this.MeasureFilterInfo=null;this.RelativeDateFilterInfo=null}return n}(),RelativeDateFilterInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.RelativeDateFilterInfo";this.RelativeDateFormat=RelativeDateFormat.Year;this.DateInstance=DateInstance.Current;this.AnchorDate="";this.StartDate="";this.EndDate="";this.Range="1";this.ColumnId="";this.ColumnName="";this.UniqueColumnName="";this.UseAnchorDate=!1}return n}(),DimensionFilterInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.DimensionFilterInfo";this.IsAllowFilteringApplied=!1;this.IsConditionFilteringApplied=!1;this.IsTopNFilteringApplied=!1;this.AllowFilterInfo=null;this.ConditionFilterInfo=null;this.TopNFilterInfo=null}return n}(),AllowFilteringInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.AllowFilteringInfo";this.IsCheckAll=!1;this.IsInclude=!1;this.FilterValues=[];this.DateFilterInfo=null}return n}(),ConditionFilteringInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.ConditionFilteringInfo";this.ColumnName="";this.ColumnId="";this.SummaryType=SummaryType.NONE;this.ConditionSummaryType=NumberFilterOption.Equals;this.Values=[]}return n}(),TopNFilteringInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.TopNFilteringInfo";this.ColumnId="";this.ColumnName="";this.DateFormat=DateTimeFormatForFilter.Date;this.IsBasedOnDateAndTimeField=!1;this.NoOfRecords=5;this.SummaryType=SummaryType.NONE;this.Mode=RankType.Top;this.IsHierarchicalFilter=!0}return n}(),InitialFilterInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.InitialFilterInfo"}return n}(),MeasureFilterInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.MeasureCondition";this.Condition=NumberFilterOption.Equals;this.Values=[]}return n}(),InitialMeasureFilterInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.MeasureCondition"}return n}(),InitialDimentionFilterInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.DimensionInitialFilterInfo"}return n}(),DateFilterInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.DateCondition"}return n}(),DateRangeFilterInfo=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.FilterInfos.DateFormatInfo"}return n}(),BooleanFilterSchemaInfo=function(){function n(){}return n}(),SelectedFilterValue=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.SelectedFilterValue";this.UniqueColumnName="";this.ReportName="";this.IsStdDateTime=!1;this.InitialDimensionFilter=new InitialDimensionFilter;this.InitialDateFilter=new InitialDateFilter;this.InitialMeasureFilter=new InitialMeasureFilter}return n}(),InitialDimensionFilter=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.InitialDimensionFilter";this.DimesnionFilterCondition=ej.DashboardDesignerUtility.Serialization.enumToString(InitialDimensionFilterCondition,InitialDimensionFilterCondition.Contains);this.Text=[]}return n}(),InitialDateFilter=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.InitialDateFilter";this.DateFilterCondition=ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Include);this.DateFilterList=[];this.DisplayDateFilterList=[];this.DateFilterType=ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Basic);this.DateFormat=ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.None)}return n}(),InitialMeasureFilter=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.InitialMeasureFilter";this.MeasureFilterCondition=ej.DashboardDesignerUtility.Serialization.enumToString(InitialMeasureFilterCondition,InitialMeasureFilterCondition.Equals);this.Values=[]}return n}(),ActivityLog=function(){function n(){}return n}(),SharedTableDSMenu=function(){function n(){}return n}(),SummaryType;(function(n){n[n.NONE="None"]="NONE";n[n.SUM="Sum"]="SUM";n[n.AVG="Avg"]="AVG";n[n.COUNT="Count"]="COUNT";n[n.MIN="Min"]="MIN";n[n.MAX="Max"]="MAX";n[n.COUNTD="Distinct Count"]="COUNTD";n[n.STDEV="StdDev"]="STDEV";n[n.VAR="Var"]="VAR";n[n.CUSTOM="Agg"]="CUSTOM"})(SummaryType||(SummaryType={})),function(n){n[n.Numeric=0]="Numeric";n[n.Non_Numeric=1]="Non_Numeric";n[n.None=2]="None"}(FieldContainerType||(FieldContainerType={})),function(n){n[n.Measures=0]="Measures";n[n.Dimensions=1]="Dimensions";n[n.DateTime=2]="DateTime"}(FieldType||(FieldType={})),function(n){n[n.Measure=0]="Measure";n[n.Dimension=1]="Dimension";n[n.DateTime=2]="DateTime"}(ColorColumnType||(ColorColumnType={})),function(n){n[n.None=0]="None";n[n.Year=1]="Year";n[n.Default=2]="Default";n[n.Month=3]="Month";n[n.Day=4]="Day";n[n.Quarter=5]="Quarter";n[n.MonthYear=6]="MonthYear";n[n.QuarterYear=7]="QuarterYear";n[n.DayMonthYear=8]="DayMonthYear";n[n.DateHour=9]="DateHour";n[n.DayOfYear=10]="DayOfYear";n[n.DayOfWeek=11]="DayOfWeek";n[n.Hour=12]="Hour";n[n.Minute=13]="Minute";n[n.Second=14]="Second";n[n.WeekOfYear=15]="WeekOfYear";n[n.WeekOfMonth=16]="WeekOfMonth";n[n.RangeDate=17]="RangeDate";n[n.RelativeDate=18]="RelativeDate";n[n.DefaultTime=19]="DefaultTime";n[n.WeekYear=20]="WeekYear";n[n.MonthDayYear=21]="MonthDayYear";n[n.Time=22]="Time";n[n.Date=23]="Date";n[n.WeekofYear=24]="WeekofYear";n[n.WeekofMonth=25]="WeekofMonth";n[n.TimeSpan=26]="TimeSpan";n[n.TimeSpanHours=27]="TimeSpanHours";n[n.TimeSpanMinutes=28]="TimeSpanMinutes";n[n.TimeSpanDays=29]="TimeSpanDays";n[n.TimeSpanWeeks=30]="TimeSpanWeeks";n[n.TimeSpanMonths=31]="TimeSpanMonths";n[n.TimeSpanYears=32]="TimeSpanYears";n[n.TimeSpanInMinutes=33]="TimeSpanInMinutes";n[n.TimeSpanInHours=34]="TimeSpanInHours";n[n.Custom=35]="Custom";n[n.DateTime=36]="DateTime"}(DateTimeFormat||(DateTimeFormat={})),function(n){n[n.DateTime="Date Time"]="DateTime";n[n.Date="Date"]="Date";n[n.Year="Year"]="Year";n[n.Quarter="Quarter"]="Quarter";n[n.Month="Month"]="Month";n[n.QuarterYear="Quarter Year"]="QuarterYear";n[n.MonthYear="Month Year"]="MonthYear";n[n.WeekYear="Week Year"]="WeekYear";n[n.DayOfWeek="Day Of Week"]="DayOfWeek";n[n.WeekOfYear="Week Of Year"]="WeekOfYear";n[n.Day="Day"]="Day";n[n.Hour="Hours"]="Hour";n[n.Minute="Minutes"]="Minute";n[n.Second="Seconds"]="Second";n[n.Time="Time"]="Time"}(DateTimeFormatForFilter||(DateTimeFormatForFilter={})),function(n){n[n.Left=0]="Left";n[n.Center=1]="Center";n[n.Right=2]="Right"}(TextAlignment||(TextAlignment={})),function(n){n.Number="Number";n.Currency="Currency";n.Percentage="Percentage"}(DataValueFormat||(DataValueFormat={})),function(n){n[n.Default=0]="Default";n[n.NoNegativeSignWithBracket=1]="NoNegativeSignWithBracket";n[n.NegativeSignInSuffix=2]="NegativeSignInSuffix"}(NegativeValueFormats||(NegativeValueFormats={})),function(n){n.Auto="Auto";n.Ones="Ones";n.Thousands="Thousands";n.Millions="Millions";n.Billions="Billions"}(NumberFormat||(NumberFormat={})),function(n){n[n.Top="Top"]="Top";n[n.Bottom="Bottom"]="Bottom"}(RankType||(RankType={})),function(n){n[n.Top=0]="Top";n[n.Bottom=1]="Bottom"}(FilterRange||(FilterRange={})),function(n){n[n.Equals="Equals"]="Equals";n[n.NotEquals="Does Not Equal"]="NotEquals";n[n.LessThan="Less Than"]="LessThan";n[n.GreaterThan="Greater Than"]="GreaterThan";n[n.LessThanOrEquals="Less Than Or Equal To"]="LessThanOrEquals";n[n.GreaterThanOrEquals="Greater Than Or Equal To"]="GreaterThanOrEquals";n[n.IsBetween="Between"]="IsBetween";n[n.IsNotBetween="Not Between"]="IsNotBetween"}(NumberFilterOption||(NumberFilterOption={})),function(n){n[n.Ascending=0]="Ascending";n[n.Descending=1]="Descending"}(SortingOrder||(SortingOrder={})),function(n){n[n.Contains="Contains"]="Contains";n[n.StartsWith="StartsWith"]="StartsWith";n[n.EndsWith="EndsWith"]="EndsWith";n[n.NotContains="NotContains"]="NotContains";n[n.Include="Include"]="Include";n[n.Exclude="Exclude"]="Exclude";n[n.IsNull="IsNull"]="IsNull";n[n.IsNotNull="IsNotNull"]="IsNotNull";n[n.IsEmpty="IsEmpty"]="IsEmpty";n[n.IsNotEmpty="IsNotEmpty"]="IsNotEmpty";n[n.Equals="Equals"]="Equals"}(TextFilterOption||(TextFilterOption={})),function(n){n[n.And="And"]="And";n[n.Or="Or"]="Or";n[n.AndNot="AndNot"]="AndNot";n[n.OrNot="OrNot"]="OrNot"}(OperatorType||(OperatorType={})),function(n){n[n.Include="Include"]="Include";n[n.Exclude="Exclude"]="Exclude";n[n.Single="Single"]="Single";n[n.Range="Range"]="Range";n[n.Like="Like"]="Like"}(FilterColumnAction||(FilterColumnAction={})),function(n){n.RefreshSettings="RefreshSettings"}(PreviewFeatureName||(PreviewFeatureName={})),function(n){n[n.Saved=0]="Saved";n[n.Created=1]="Created";n[n.Deleted=2]="Deleted";n[n.Updated=3]="Updated";n[n.Cancelled=4]="Cancelled";n[n.Selected=5]="Selected";n[n.Imported=6]="Imported"}(ActivityLogEvents||(ActivityLogEvents={})),function(n){n[n.Dashboard=0]="Dashboard";n[n.Datasource=1]="Datasource";n[n.Widget=2]="Widget"}(ActivityLogItemType||(ActivityLogItemType={})),function(n){n[n.Unknown=0]="Unknown";n[n.ColumnChart=1]="ColumnChart";n[n.BarChart=2]="BarChart";n[n.StackedColumnChart=3]="StackedColumnChart";n[n.StackedBarChart=4]="StackedBarChart";n[n.PercentageStackedColumnChart=5]="PercentageStackedColumnChart";n[n.PercentageStackedBarChart=6]="PercentageStackedBarChart";n[n.Grid=7]="Grid";n[n.BubbleMap=8]="BubbleMap";n[n.ChoroplethMap=9]="ChoroplethMap";n[n.TreeMap=10]="TreeMap";n[n.Card=11]="Card";n[n.PieChart=12]="PieChart";n[n.DoughnutChart=13]="DoughnutChart";n[n.PyramidChart=14]="PyramidChart";n[n.FunnelChart=15]="FunnelChart";n[n.AreaChart=16]="AreaChart";n[n.StackedAreaChart=17]="StackedAreaChart";n[n.PercentageStackedAreaChart=18]="PercentageStackedAreaChart";n[n.LineChart=19]="LineChart";n[n.SplineChart=20]="SplineChart";n[n.SplineAreaChart=21]="SplineAreaChart";n[n.ComboBox=22]="ComboBox";n[n.ListBox=23]="ListBox";n[n.DatePicker=24]="DatePicker";n[n.RangeSlider=25]="RangeSlider";n[n.Image=26]="Image";n[n.Label=27]="Label";n[n.HeatMap=28]="HeatMap";n[n.File=29]="File";n[n.Excel=30]="Excel";n[n.Csv=31]="Csv";n[n.Json=32]="Json";n[n.MySQL=33]="MySQL";n[n.Oracle=34]="Oracle";n[n.PostgresSql=35]="PostgresSql";n[n.Jira=36]="Jira";n[n.Twilio=37]="Twilio";n[n.Redshift=38]="Redshift";n[n.MariaDB=39]="MariaDB";n[n.MemSQL=40]="MemSQL";n[n.AmazonAurora=41]="AmazonAurora";n[n.GoogleCloud=42]="GoogleCloud";n[n.AmazonAuroraMySQL=43]="AmazonAuroraMySQL";n[n.AmazonAuroraPostgreSQL=44]="AmazonAuroraPostgreSQL";n[n.GoogleCloudMySQL=45]="GoogleCloudMySQL";n[n.GoogleCloudPostgreSQL=46]="GoogleCloudPostgreSQL";n[n.AskNicely=47]="AskNicely";n[n.CallRail=48]="CallRail";n[n.CampaignMonitor=49]="CampaignMonitor";n[n.Chargify=50]="Chargify";n[n.ChartMogul=51]="ChartMogul";n[n.ChartBeat=52]="ChartBeat";n[n.Flurry=53]="Flurry";n[n.FreshDesk=54]="FreshDesk";n[n.Fusebill=55]="Fusebill";n[n.GoSquared=56]="GoSquared";n[n.Harvest=57]="Harvest";n[n.HelpScout=58]="HelpScout";n[n.Insightly=59]="Insightly";n[n.Intervals=60]="Intervals";n[n.KeenIo=61]="KeenIo";n[n.Kissmetrics=62]="Kissmetrics";n[n.Wistia=63]="Wistia";n[n.Gitlab=64]="Gitlab";n[n.LiveAgent=65]="LiveAgent";n[n.Mailchimp=66]="Mailchimp";n[n.Nicereply=67]="Nicereply";n[n.PipelineDeals=68]="PipelineDeals";n[n.ProsperWorks=69]="ProsperWorks";n[n.SendGrid=70]="SendGrid";n[n.NewRelic=71]="NewRelic";n[n.Gmail=72]="Gmail";n[n.GoogleAnalytics=73]="GoogleAnalytics";n[n.YouTube=74]="YouTube";n[n.Bitly=75]="Bitly";n[n.GooglePlus=76]="GooglePlus";n[n.GoogleDrive=77]="GoogleDrive";n[n.MicrosoftOneDrive=78]="MicrosoftOneDrive";n[n.MicrosoftSharePoint=79]="MicrosoftSharePoint";n[n.MicrosoftOutlookCalendar=80]="MicrosoftOutlookCalendar";n[n.Box=81]="Box";n[n.Buffer=82]="Buffer";n[n.Salesforce=83]="Salesforce";n[n.WebDataSource=84]="WebDataSource";n[n.Mixpanel=85]="Mixpanel";n[n.Stripe=86]="Stripe";n[n.Smartsheet=87]="Smartsheet";n[n.ZohoCRM=88]="ZohoCRM";n[n.FortyTwomatters=89]="FortyTwomatters";n[n.Zendesk=90]="Zendesk";n[n.BaseCrm=91]="BaseCrm";n[n.Pipedrive=92]="Pipedrive";n[n.Sendible=93]="Sendible";n[n.GitHub=94]="GitHub";n[n.Intercom=95]="Intercom";n[n.Toggl=96]="Toggl";n[n.Basecamp3=97]="Basecamp3";n[n.Lighthouse=98]="Lighthouse";n[n.ActiveCampaign=99]="ActiveCampaign";n[n.Todoist=100]="Todoist";n[n.Freshsales=101]="Freshsales";n[n.Freshservice=102]="Freshservice";n[n.QuickBooksOnline=103]="QuickBooksOnline";n[n.QuickBooksPayments=104]="QuickBooksPayments";n[n.LinkedIn=105]="LinkedIn";n[n.GoogleAdsense=106]="GoogleAdsense";n[n.SurveyMonkey=107]="SurveyMonkey";n[n.ServiceNow=108]="ServiceNow";n[n.FreshBooks=109]="FreshBooks";n[n.Basecamp2=110]="Basecamp2";n[n.Infusionsoft=111]="Infusionsoft";n[n.Twitter=112]="Twitter";n[n.Slack=113]="Slack";n[n.Pinterest=114]="Pinterest";n[n.SQL=115]="SQL";n[n.AzureSQLDataWarehouse=116]="AzureSQLDataWarehouse";n[n.MongoDB=117]="MongoDB";n[n.SQLCe=118]="SQLCe";n[n.ODBC=119]="ODBC";n[n.OLEDB=120]="OLEDB";n[n.XML=121]="XML";n[n.OData=122]="OData";n[n.MSSSQLServerAnalysisServices=123]="MSSSQLServerAnalysisServices"}(ActivityLogItemSubTypes||(ActivityLogItemSubTypes={}));KpiInformation=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.KpiInfo.KpiInformation";this.ActualColumn=new KpiColumnInfo;this.TargetColumn=new KpiColumnInfo}return n}();KpiColumnInfo=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DataSources.KpiInfo.KpiColumnInfo"}return n}(),function(n){n.GreaterIsGood="Greater Is Good";n.LessIsGood="Less Is Good"}(IndicationType||(IndicationType={})),function(n){n[n.Value="Value"]="Value";n[n.Bar="Bar"]="Bar";n[n.ConditionalFormatting="ConditionalFormatting"]="ConditionalFormatting"}(DisplayType||(DisplayType={})),function(n){n.AbsoluteVariation="Actual Variation";n.ActualValue="Actual Value";n.PercentageVariation="Percentage of Variation";n.PercentageOfTarget="Percentage of Target";n.ValueAndPercentage="Value and Percentage"}(KpiCalculationType||(KpiCalculationType={})),function(n){n[n.Contains=0]="Contains";n[n.Include=1]="Include";n[n.Exclude=2]="Exclude"}(InitialDimensionFilterCondition||(InitialDimensionFilterCondition={})),function(n){n[n.Equals=0]="Equals";n[n.IsBetween=1]="IsBetween"}(InitialMeasureFilterCondition||(InitialMeasureFilterCondition={})),function(n){n[n.Include=0]="Include";n[n.Exclude=1]="Exclude";n[n.Range=2]="Range"}(InitialDateFilterCondition||(InitialDateFilterCondition={})),function(n){n[n.Basic=0]="Basic";n[n.Exact=1]="Exact"}(InitialDateFilterType||(InitialDateFilterType={})),function(n){n[n.URLText=1]="URLText";n[n.URLPreview=2]="URLPreview";n[n.AppendColumn=4]="AppendColumn"}(LinkVisibility||(LinkVisibility={})),function(n){n[n.Current="Current"]="Current";n[n.Previous="Previous"]="Previous";n[n.Last="Last"]="Last";n[n.Next="Next"]="Next";n[n.Past="Past"]="Past";n[n.Upcoming="Upcoming"]="Upcoming";n[n.ToDate="ToDate"]="ToDate";n[n.Succeeding="Succeeding"]="Succeeding";n[n.TillNow="TillNow"]="TillNow";n[n.Custom="Custom"]="Custom"}(DateInstance||(DateInstance={})),function(n){n[n.Year="Year"]="Year";n[n.Quarter="Quarter"]="Quarter";n[n.Month="Month"]="Month";n[n.Week="Week"]="Week";n[n.Day="Day"]="Day";n[n.Hour="Hour"]="Hour"}(RelativeDateFormat||(RelativeDateFormat={}));var AdvancedSettings=function(){function n(){this.Ranges=[];this.MeasureFormatSettings=new MeasureFormatting}return n}(),ColorRangeSettings=function(){function n(){this.StartRange=0;this.EndRange=0;this.IsCaseSensitive=!0;this.RangeLabel="";this.MeasureCondition=CMeasureConditionType.CEquals;this.DimensionCondition=CDimensionConditionType.Startswith;this.PropertyColorPair=[]}return n}(),PropertyColorPair=function(){function n(){}return n}(),RangeColor=function(){function n(){this.StartColor="";this.EndColor="";this.IsGradient=!1}return n}(),ImageSettings=function(){function n(){this.ImageColor="";this.ImageType=ImageType.Default;this.ImageURL=""}return n}(),FontSettings=function(){function n(){}return n}(),WidgetProperty;(function(n){n[n.FillColor=0]="FillColor";n[n.BackgroundColor=1]="BackgroundColor";n[n.PrimaryValueColor=2]="PrimaryValueColor";n[n.BorderColor=3]="BorderColor";n[n.TitleColor=4]="TitleColor";n[n.Icon=5]="Icon";n[n.Font=6]="Font"})(WidgetProperty||(WidgetProperty={})),function(n){n[n.URL=0]="URL";n[n.Default=1]="Default";n[n.Embedded=2]="Embedded"}(ImageType||(ImageType={})),function(n){n[n.CGreaterThan=0]="CGreaterThan";n[n.CGreaterThanOrEqualTo=1]="CGreaterThanOrEqualTo";n[n.CLessThan=2]="CLessThan";n[n.CLessThanOrEqalTo=3]="CLessThanOrEqalTo";n[n.CEquals=4]="CEquals";n[n.CNotEquals=5]="CNotEquals";n[n.CBetween=6]="CBetween";n[n.CNotBetween=7]="CNotBetween"}(CMeasureConditionType||(CMeasureConditionType={})),function(n){n[n.Startswith=0]="Startswith";n[n.Endswith=1]="Endswith";n[n.Equals=2]="Equals";n[n.Contains=3]="Contains";n[n.NotEquals=4]="NotEquals";n[n.Inclusion=5]="Inclusion"}(CDimensionConditionType||(CDimensionConditionType={})),function(n){n[n.Value=0]="Value";n[n.Percent=1]="Percent"}(Format||(Format={}));ColorFieldsInfo=function(){function n(){this.Name=WidgetProperty.BackgroundColor;this.DisplayName="";this.ColorPicker=ColorSetColorPickers.GradientColorPicker}return n}(),function(n){n[n.GradientColorPicker=0]="GradientColorPicker";n[n.NormalColorPicker=1]="NormalColorPicker";n[n.IconColorPicker=2]="IconColorPicker"}(ColorSetColorPickers||(ColorSetColorPickers={}));InternalSerializationHelper=function(){function n(){ej.DashboardDesignerUtility.Serialization.serInstance=this;this.dashboardPropertyJson=new DashboardProperties}return n.stringtoEnum=function(n,t){return n[t]||n[n[0]]},n.enumToString=function(n,t){return n[t]||n[0]},n.updateBoundsData=function(n){var t,r;try{return t=new WidgetBounds,t.Row=n.row,t.Column=n.column,t.ColumnSpan=n.colSpan,t.RowSpan=n.rowSpan,t}catch(i){r=ejDashboardDesigner.getInstance("DesignPanel");r.logError({Source:"Widget Bounds update",Error:i,Type:i.name})}},n.getInstance=function(){return ej.DashboardDesignerUtility.Serialization.serInstance},n.getWidgetJsonString=function(){var n,t,f;try{var i=[],e=ejDashboardDesigner.getInstance("DesignPanel").designCanvas,r=e.find(".e-reportitem");for(n=0;n<r.length;n++)t=ej.DashboardUtil.getWidgetInstance(r.eq(n)),ej.isNullOrUndefined(t)||i.push(t.getReportItemJson());return i}catch(u){return f=ejDashboardDesigner.getInstance("DesignPanel"),f.logError({Source:"getWidgetJsonString",Error:u,Type:u.name}),[]}},n.notifyChange=function(){var n=ejDashboardDesigner.getInstance("DashboardDesigner");n.element.find("#"+n._id+"_auto_save_status_icon").removeClass("e-ddr-draft-status-success e-dashboarddesigner-warning-icon").addClass("e-ddr-draft-status-progress");n.element.find("#"+n._id+"_auto_save_status_label").text("Saving draft...");ej.DashboardUtil.getInstance().doAjaxPost("POST",n.model.serviceUrl+"/NotifyPropertyChange",{data:JSON.stringify({dashboardJson:ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson,widgetJson:ej.DashboardDesignerUtility.Serialization.getWidgetJsonString()})},{fnction:$.proxy(function(n){ejDashboardDesigner.getInstance("ToolBar").updateAutoSavedTime(n.Status);n.Status||console.info(n.Message)},this),errfnction:$.proxy(function(){ejDashboardDesigner.getInstance("ToolBar").updateAutoSavedTime(!1)},this)},!0)},n.updateWidgetData=function(n,t){var u,i,r,e;try{for(u=ej.DashboardDesignerUtility.Serialization.getInstance(),i=new DataConfiguration,i.Id=t.DatasetId,i.DataSetName=t.DatasetName,r=0;r<t.Values.length;r++)u.validateAndAddContainer(i,t.Values[r],u);n.Data=i}catch(f){e=ejDashboardDesigner.getInstance("DesignPanel");e.logError({Source:"Widget Data serialization",Error:f,Type:f.name})}},n.syncScriptErrors=function(){var n=ejDashboardDesigner.getInstance("DesignPanel"),t=n.dbrdErrors,i;n.dbrdErrors=[];i=ejDashboardDesigner.getInstance("DashboardDesigner");ej.DashboardUtil.getInstance().doAjaxPost("POST",i.model.serviceUrl+"/TrackErrors",{data:JSON.stringify(t)},{fnction:$.proxy(function(i){i===0&&(n.dbrdErrors=n.dbrdErrors.concat(t))},this)},!0)},n.prototype.validateAndAddContainer=function(n,t,i){var r=i.createDataContainer(t.Values,i);r!=null&&(r.Id=t.Name,r.Name=t.DisplayName,r.ContainerType=t.CategoryType,n.Containers.push(r))},n.prototype.createDataContainer=function(n,t){var u=new FieldContainer,i,r;if(!ej.isNullOrUndefined(n)&&n.length!==0){for(i=0;i<n.length;i++)r=new FieldInfo,r.Id=n[i].DataId,r.Name=n[i].Field,r.FieldType=t.getFieldType(n[i].FieldType),r.SummaryType=n[i].SummaryType,r.MeasureFormatting=n[i].MeasureFormatting||null,r.FilterInfo=n[i].FilterInfo||null,r.CustomSorting=n[i].CustomSorting||null,r.DateTimeFormat=n[i].DateTimeFormat,r.IsKPIColumn=n[i].IsKPIColumn||!1,r.KPIColumnInfo=n[i].KPIColumnInfo||null,r.UniqueColumnName=n[i].UniqueColumnName,r.IsExpression=n[i].IsExpression,r.IsAggregatedExpression=n[i].IsAggregatedExpression,u.FieldInfos.push(r);return u}return u},n.prototype.getFieldType=function(n){switch(n){case"Measures":return FieldType.Measures;case"Dimensions":return FieldType.Dimensions;case"DateTime":return FieldType.DateTime;default:return FieldType.Measures}},n.getSummaryType=function(n){switch(n){case SummaryType.SUM:return SummaryType[SummaryType.SUM];case SummaryType.COUNT:return SummaryType[SummaryType.COUNT];case SummaryType.COUNTD:return SummaryType[SummaryType.COUNTD];case SummaryType.AVG:return SummaryType[SummaryType.AVG];case SummaryType.MAX:return SummaryType[SummaryType.MAX];case SummaryType.MIN:return SummaryType[SummaryType.MIN];case SummaryType.VAR:return SummaryType[SummaryType.VAR];case SummaryType.STDEV:return SummaryType[SummaryType.STDEV];case SummaryType.NONE:return SummaryType[SummaryType.NONE];default:return SummaryType[SummaryType.NONE]}},n.getDataValueFormat=function(n){switch(n){case 2:return"Currency";case 3:return"Percentage";case 0:return"Number";case 1:return"Number";default:return"Number"}},n.getNegativeValueFormats=function(n){switch(n){case 1:return"NoNegativeSignWithBracket";case 2:return"NegativeSignInSuffix";case 0:return"Default";default:return"Default"}},n.getNumberFormat=function(n){switch(n){case 1:return"Ones";case 2:return"Thousands";case 3:return"Millions";case 4:return"Billions";case 0:return"Auto";default:return"Auto"}},n.getDisplayType=function(n){switch(n){case 0:return DisplayType.Value;case 1:return DisplayType.Bar;case 2:return DisplayType.ConditionalFormatting;default:return DisplayType.Value}},n}();ej.createObject("ej.DashboardDesignerUtility.Serialization",InternalSerializationHelper,window);InternalSharedDataSet=function(){function n(){this.dashboardDesigner=null;this.id=null;this.rdlParser=ejDashboardDesigner.getInstance("RDLParser");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.dataset=ejDashboardDesigner.getInstance("DataSet");this.id=this.dashboardDesigner._id;this.datasetReference=null;this.dataSetItem=null}return Object.defineProperty(n,"SharedDataSet",{get:function(){return(this.shareddataSet===null||this.shareddataSet===undefined)&&(this.shareddataSet=new ej.DashboardDesignerUtility.SharedDataSet),this.shareddataSet},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n){var a,r,u,f,w,o,s,h,c,l;if(n.find("#"+this.id+"_shared_dataset").length>0)this.resetConfiguration(),this.setDataSetName();else{a={id:"Id",text:"Name",value:"Id"};this.configTable=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%","margin-left":"3px"},{unselectable:"on",id:this.id+"_shared_dataset"});n.append(this.configTable);var v=$("<tr><\/tr>"),y=$("<td><\/td>"),t=$("<table><\/table>"),it=ej.buildTag("label.editLabel e-designer-title-label","Name",{}),p=$("<td style='width: 215px' id="+this.id+"_shared_txt_lbl_td><\/td>"),i=$("<tr style='float: left'><\/tr>");p.append(it);i.append(p);r=ej.buildTag("td","",{},{id:this.id+"_shared_txt_error_icon_td"});ej.DashboardUtil.renderErrIndictor(r,this.id);i.append(r);t.append(i);y.append(t);v.append(y);this.configTable.append(v);u=$("<tr style='float: left'><\/tr>");f=$("<td id="+this.id+"_shared_txt_td><\/td>");u.append(f);t.append(u);w=ej.buildTag("input.e-textbox e-designer-content-label","",{height:"24px",width:"426px"},{edittype:"stringedit",id:this.id+"_shared_txt",type:"text",value:this.dataset.getAvailableName()});f.append(w);var b=$("<tr><\/tr>"),k=$("<td><\/td>"),e=$("<table><\/table>");b.append(k);k.append(e);this.configTable.append(b);o=$("<tr style='float: left;font-weight: 500'><td  style='width: 215px' id="+this.id+"_shared_dropdown_lbl_td><label class='editLabel e-designer-title-label e-designer-fontfamily' style='padding-top:6px;font-size: 13px;'>Shared DataSet<\/label><\/td><\/tr>");e.append(o);s=ej.buildTag("td","",{},{id:this.id+"_shared_data_drdwn_error_icon_td"});ej.DashboardUtil.renderErrIndictor(s,this.id);o.append(s);h=$("<tr style='float: left'><\/tr>");c=$("<td id="+this.id+"_shared_data_drdwn_td><\/td>");e.append(h);h.append(c);l=ej.buildTag("input","",{},{id:this.id+"_shared_data_drdwn",value:""});c.append(l);l.ejDropDownList({width:"440px",dataSource:[],fields:a,cssClass:"e-reportdesigner-dataset-selection e-designer-content-label e-designer-ejwidgets e-dbrd-control"});var d=$("<tr><\/tr>"),g=$("<td><\/td>"),nt=$("<table><\/table>"),tt=$("<tr style='float: left'/>"),rt=$("<td unselectable='on' align='right'/>");tt.append(rt);nt.append(tt);g.append(nt);d.append(g);this.configTable.append(d)}this.datasetReference=null;this.showConfiguration(!0);this.loadDataSetCatalog()},n.prototype.editConfiguration=function(n){this.dataSetItem=n;var t=$("#"+this.id+"_sharedDSContainer");t.children().length===0&&this.renderConfiguration(t);this.datasetReference=null;this.hideValidationMsg();this.setDataSetName(n);n&&(this.datasetReference=n.SharedDataSet.SharedDataSetReference,$("#"+this.id+"_shared_data_drdwn").data("ejDropDownList").setModel({dataSource:[]}),this.loadDataSetCatalog());this.showConfiguration(!0);$("#"+this.id+"_sharedDSBodyContainer").data("ejScroller")&&$("#"+this.id+"_sharedDSBodyContainer").data("ejScroller").refresh()},n.prototype.resetConfiguration=function(){this.datasetReference=null;$("#"+this.id+"_shared_data_drdwn").data("ejDropDownList").setModel({dataSource:[]});$("#"+this.id+"_sharedds_alog").css("display",this.dashboardDesigner.isReportServerLogin()?"none":"block");this.hideValidationMsg()},n.prototype.hideValidationMsg=function(){this.renderValidation(this.id+"_shared_txt",!1);this.renderValidation(this.id+"_shared_data_drdwn",!1)},n.prototype.setDataSetName=function(n){var t=$("#"+this.id+"_shared_txt"),i="";n&&(i=n.Name,t.val(n.Name));t.val(this.dataset.isEdit?i:this.dataset.getAvailableName())},n.prototype.showConfiguration=function(n){this.configTable.css("display",n?"block":"none")},n.prototype.getDataSetName=function(){var n=$("#"+this.id+"_shared_data_drdwn").data("ejDropDownList"),t;return n.model.selectedIndex!==-1?(t=n.getListData(),t&&t.length>0)?t[n.model.selectedIndex].Id:n.getSelectedValue():""},n.prototype.getDataSetInfo=function(){var n=this.getDataSetName(),t;this.renderValidation(this.id+"_shared_data_drdwn",!n,"Select a shared DataSource");t=this.validateDataSetName();n&&t&&(this.datasetReference=n,ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.sharedDataSet,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.sharedDataSet,reportInfo:{dataSetRefer:n}})},{fnction:$.proxy(this.saveDataSets,this),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]}))},n.prototype.loadDataSetCatalog=function(){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.dataSetCatalog,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.dataSetCatalog,reportInfo:{}})},{fnction:$.proxy(this.populateDataSets,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]})},n.prototype.populateDataSets=function(n){if(n&&typeof n!="string"&&n.indexOf("Sf_Exception")===-1){var t=$("#"+this.id+"_shared_data_drdwn").data("ejDropDownList");t.setModel({dataSource:n});this.datasetReference&&this.dataset.isEdit&&(ej.DashboardUtil.isGuid(this.datasetReference)?t.selectItemByValue(this.datasetReference):t.selectItemByText(this.datasetReference))}},n.prototype.saveDataSets=function(n){var t,r,i,u;if(n){if(t=ejQueryDesigner.createDataSet(),r=this.createSharedData(),t.Name=$("#"+this.id+"_shared_txt").val(),t.Query=null,n.Fields.length>0)for(t.Fields=[],i=0;i<n.Fields.length;i++)u=n.Fields[i],u.__type="Syncfusion.RDL.DOM.Field",t.Fields.push(u);r.SharedDataSetReference=this.datasetReference;t.SharedDataSet=r;this.dataset.isEdit?this.dataset.updateDataSet(this.dataSetItem,t):this.dataset.addDataSet(t);this.dataset.isEdit=!1;this.dataset.switchPanel(PanelList.DataList)}},n.prototype.validateDataSetName=function(){var n=$("#"+this.id+"_shared_txt").val();if(n){if(this.isAvailable(n))return this.renderValidation(this.id+"_shared_txt",!0,"The specified name already exists in DataSet list"),!1;if(!/^[a-zA-Z0-9-_]*$/.test(n))return this.renderValidation(this.id+"_shared_txt",!0,"Name should not contain spaces and special characters"),!1}else return this.renderValidation(this.id+"_shared_txt",!0,"Specify the DataSet name"),!1;return this.renderValidation(this.id+"_shared_txt",!1),!0},n.prototype.isAvailable=function(n){var r=$("#"+this.id+"_div_datasetUl>li>div>.e-reportdesigner-treeText"),t=!1,i=this;return r.each(function(r,u){if($(u).text()===n&&!(i.dataSetItem&&n===i.dataSetItem.Name)){t=!0;return}}),t},n.prototype.renderValidation=function(n,t,i){var r=$("#"+n+"_error_icon_td"),u=$("#"+n+"_td").find(".e-designer-content-label");t?(ej.DashboardUtil.showErrIndictor(r,!0,i),u.addClass("e-designer-error")):(ej.DashboardUtil.showErrIndictor(r,!1),u.removeClass("e-designer-error"));$("#"+this.id+"_sharedDSBodyContainer").data("ejScroller")&&$("#"+this.id+"_sharedDSBodyContainer").data("ejScroller").refresh()},n.prototype.isLoaded=function(){return!ej.isNullOrUndefined(this.configTable)},n.prototype.updateControlSize=function(){$("#"+this.id+"_sharedDSBodyContainer").height()>$("#"+this.id+"_sharedDSContainer").height()?($("#"+this.id+"_shared_txt").css("width","218px"),$("#"+this.id+"_shared_dropdown_lbl_td").css("width","215px"),$("#"+this.id+"_shared_txt_lbl_td").css("width","215px"),$("#"+this.id+"_shared_data_drdwn").data("ejDropDownList").setModel({width:"231px"})):($("#"+this.id+"_shared_txt").css("width","208px"),$("#"+this.id+"_shared_dropdown_lbl_td").css("width","205px"),$("#"+this.id+"_shared_txt_lbl_td").css("width","205px"),$("#"+this.id+"_shared_data_drdwn").data("ejDropDownList").setModel({width:"221px"}))},n.prototype.createSharedData=function(){return{__type:"Syncfusion.RDL.DOM.SharedDataSet",SharedDataSetReference:"",QueryParameters:[]}},n.prototype.showLoadingIndicator=function(){$("#"+this.id+"_shared_data_drdwn_dropdown").addClass("e-load");$("#"+this.id+"_shared_data_drdwn_dropdown>span").removeClass("e-arrow-sans-down")},n.prototype.hideLoadingIndicator=function(){$("#"+this.id+"_shared_data_drdwn_dropdown").removeClass("e-load");$("#"+this.id+"_shared_data_drdwn_dropdown>span").addClass("e-arrow-sans-down")},n.prototype.showIndicator=function(){$("#"+this.id+"_sharedDSBodyContainer").data("ejWaitingPopup").show()},n.prototype.hideIndicator=function(){$("#"+this.id+"_sharedDSBodyContainer").data("ejWaitingPopup").hide()},n}();window.ej.createObject("ej.DashboardDesignerUtility.SharedDataSet",InternalSharedDataSet,window);InternalSharedDataSource=function(){function n(){this.dashboardDesigner=null;this.id=null;this.sharedDsList=[];this.templateName="";this.timer=null;this.isSingleClick=!0;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.dateFormat=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat;this.datasource=ejDashboardDesigner.getInstance("DataSource");this.rdlParser=ejDashboardDesigner.getInstance("RDLParser");this.id=this.dashboardDesigner._id+"_sharedds"}return Object.defineProperty(n,"SharedDataSource",{get:function(){return(this.shareddataSource===null||this.shareddataSource===undefined)&&(this.shareddataSource=new ej.DashboardDesignerUtility.SharedDataSource),this.shareddataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n){var o,f;if(ej.isNullOrUndefined(this.wrapperEle)||this.wrapperEle.length===0){this.wrapperEle=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_wrapper"});var t=ej.buildTag("div","",{width:"100%",height:"32px",display:"block",overflow:"hidden"},{id:this.id+"_header_container"}),i=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{width:"95%",display:"block",padding:"5px 5px 0px 5px","margin-left":"7px"},{id:this.id+"_body_container"}),r=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control e-dbrd-shared-ds-container","",{clear:"both"},{id:this.id+"_body_container_list_view"}),e=ej.buildTag("div","",{height:"30px"},{}),u=ej.buildTag("div","",{width:"100%",height:"63px",display:"block",overflow:"hidden",margin:"0 auto","text-align":"center"},{id:this.id+"_footer_container"}),s=ej.buildTag("span.e-designer-header e-designer-cursor",this.dashboardDesigner.locale.sharedDataSource.title,{overflow:"hidden",display:"inline-block",padding:"8px 7px 7px 0px"},{});this.backEle=ej.buildTag("span.e-designer-header-icon e-reportdesigner-backarrow","",{display:"inline-block",float:"left",padding:"7px 11px"},{id:this.id+"_headerback"});t.append(this.backEle);t.append(s);o=ej.buildTag("div.e-designer-new-btn-footer","",{margin:"8px","margin-bottom":"11px"},{});u.append(o);f=ej.buildTag("button.e-designer-content e-designer-button e-designer-dsconnect-btn e-dbrd-hand-cursor",this.dashboardDesigner.locale.sharedDataSource.add,{},{id:this.id+"_importdsbtn"});u.append(f);f.ejButton({width:"160px",showRoundedCorner:!1,contentType:ej.ContentType.TextOnly,size:"small",click:$.proxy(this.onImportDsBtnClick,this)});ej.DashboardUtil.buttonEnable(f,!1);this.refreshBtn=ej.buildTag("button.e-dbrd-designer-refresh-ds e-dbrd-designer-hoverable e-dbrd-hand-cursor","",{},{id:this.id+"_refresh_ds","data-tooltip":this.dashboardDesigner.locale.sharedDataSource.reloadDataSource});e.append(this.renderSearchItem(),this.refreshBtn);i.append(this.getSharedDsTemplate());i.append(this.getSampleDsTemplate());r.append($("<div>"));i.append(e,r);this.wrapperEle.append(t);this.wrapperEle.append(i);this.wrapperEle.append(u);n.append(this.wrapperEle);this.unwireEvents();this.wireEvents();r.ejScroller({autoHide:!0,height:n.height()-(t.height()+u.height()+75)+"px",scrollerSize:9,buttonSize:14});this.ejLoader=r.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-designer-loader"}).data("ejWaitingPopup")}},n.prototype.resize=function(n){var i=this.wrapperEle.find("#"+this.id+"_body_container_list_view"),r=this.wrapperEle.find("#"+this.id+"_footer_container"),u=this.wrapperEle.find("#"+this.id+"_header_container"),t=i.data("ejScroller");t&&(t.setModel({height:n-(u.height()+r.height()+40)+"px"}),t.refresh())},n.prototype.fetchDatasourceList=function(n){this.selectedDs=null;this.templateName=null;this.resetSearch();this.sharedDsList=[];this.wrapperEle.find("#"+this.id+"_body_container_list_view div:first").html("");this.enableOrDisableImportButton();n?(this.templateName="_sample_ds_template",this.wrapperEle.find(".e-designer-header").html(this.dashboardDesigner.locale.sampleDataSource.title),this.refreshBtn.hide(),this.loadSampleDataSource()):(this.templateName="_sds_template",this.wrapperEle.find(".e-designer-header").html(this.dashboardDesigner.locale.sharedDataSource.title),this.refreshBtn.show(),this.loadDataSourceCatalog())},n.prototype.getSelectedDsData=function(n){if(!ej.isNullOrUndefined(n)&&n!==""&&!ej.isNullOrUndefined(this.sharedDsList))for(var t=0;t<this.sharedDsList.length;t++)if(this.sharedDsList[t].Id===n)return this.sharedDsList[t];return null},n.prototype.wireEvents=function(){this.backEle.on("click",$.proxy(this.onBackBtnClick,this));this.wrapperEle.on("click",".e-dbrd-designer-refresh-ds",$.proxy(this.loadDataSourceCatalog,this));this.wrapperEle.on("click",".e-dbrd-designer-shared-ds-item",$.proxy(this.onSharedDataSourceSelected,this));this.wrapperEle.on("dblclick",".e-dbrd-designer-shared-ds-item",$.proxy(this.onImportDsBtnClick,this))},n.prototype.unwireEvents=function(){this.backEle.off("click",$.proxy(this.onBackBtnClick,this));this.wrapperEle.off("click",".e-dbrd-designer-refresh-ds",$.proxy(this.loadDataSourceCatalog,this));this.wrapperEle.off("click",".e-dbrd-designer-shared-ds-item",$.proxy(this.onSharedDataSourceSelected,this));this.wrapperEle.off("dblclick",".e-dbrd-designer-shared-ds-item",$.proxy(this.onImportDsBtnClick,this))},n.prototype.onImportDsBtnClick=function(){this.isSingleClick=!1;clearTimeout(this.timer);var n=this.getSelectedDsData(this.selectedDs);if(n===null){ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.sharedDataSource.title,this.dashboardDesigner.locale.sharedDataSource.selectDataSource,IconType.information,AlertType.Alert,!1,null);return}this.importDataSource(n)},n.prototype.onSharedDataSourceSelected=function(n){var t=this;this.isSingleClick=!0;this.selectedDs=$(n.currentTarget).attr("data-id");this.timer=setTimeout(function(){t.dataSourceSelection(n)},250)},n.prototype.dataSourceSelection=function(n){if(this.isSingleClick){var t=$(n.currentTarget).find(".e-dbrd-designer-checkmark"),i=t.hasClass("e-dbrd-designer-checkmark-checked");this.wrapperEle.find(".e-dbrd-designer-shared-ds-item .e-dbrd-designer-checkmark").removeClass("e-dbrd-designer-checkmark-checked").addClass("e-dbrd-designer-checkmark-unchecked");i||t.removeClass("e-dbrd-designer-checkmark-unchecked").addClass("e-dbrd-designer-checkmark-checked");this.selectedDs=i?null:this.selectedDs;this.enableOrDisableImportButton();this.isSingleClick=!0}},n.prototype.onBackBtnClick=function(){this.hideLoadingIndicator();this.request&&this.request.abort();ej.isNullOrUndefined(this.fncDataList)||ej.DashboardUtil.invokeCallBack(this.fncDataList,PanelList.DataList)},n.prototype.importDataSource=function(n){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/importdatasource/",{action:ej.DashboardUtil.DesignerAction.dataSourceCatalog,data:JSON.stringify(n)},{fnction:$.proxy(this.onImportSuccessHandler,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)],errfnction:$.proxy(this.onConnectionError,this)},!1,!0)},n.prototype.loadDataSourceCatalog=function(){this.resetSearch();this.dashboardDesigner.hideTooltip(this);this.request=ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/shareddatasources/",{action:ej.DashboardUtil.DesignerAction.dataSourceCatalog,data:null},{fnction:$.proxy(this.populateDataSources,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)],errfnction:$.proxy(this.onConnectionError,this)},!0,!0)},n.prototype.loadSampleDataSource=function(){this.resetSearch();this.request=ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/sampledatasource/",{action:ej.DashboardUtil.DesignerAction.dataSourceCatalog,data:null},{fnction:$.proxy(this.populateDataSources,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)],errfnction:$.proxy(this.onConnectionError,this)},!0,!0)},n.prototype.onImportSuccessHandler=function(n){if(n.ApiStatus){var t=$.parseJSON(n.Data);this.rdlParser.addDataSetToRdlJsonObj(t);this.rdlParser.rdlJsonObj.DataSources=this.rdlParser.rdlJsonObj.DataSources.concat(t.DataSources);this.datasource.pouplateDataSources();ejDashboardDesigner.getInstance("DataSet").pouplateDataSets();this.onBackBtnClick();this.updateActivityLog(t)}else ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.sharedDataSource.title,n.Message,IconType.information,AlertType.Alert,!1,"");ej.DashboardUtil.buttonEnable(this.wrapperEle.find("#"+this.id+"_importdsbtn"),!0)},n.prototype.updateActivityLog=function(n){var t=ejDashboardDesigner.getInstance("DataSource"),i=!ej.isNullOrUndefined(n.DataSets[0].PublishId)&&n.DataSets[0].PublishId!==""?n.DataSets[0].PublishId:null,r=t.getDatasourceSubTypes(ej.isNullOrUndefined(n.DataSources[0].ProviderType)?n.DataSources[0].ConnectionProperties.DataProvider:n.DataSources[0].ProviderType);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Imported,ActivityLogItemType.Datasource,r,i)},n.prototype.onConnectionError=function(n){this.showErrorMessage(n.message)},n.prototype.getErrorDiv=function(n){return"<div class='e-dbrd-designer-shared-ds-error'>"+n+"<\/div>"},n.prototype.showErrorMessage=function(n){this.wrapperEle.find("#"+this.id+"_body_container_list_view").css({display:"table",width:"100%"});this.wrapperEle.find("#"+this.id+"_body_container_list_view div:first").html(this.getErrorDiv(n||"Network error")).css({display:"table-cell","vertical-align":"middle"});this.resize(this.wrapperEle.height())},n.prototype.populateDataSources=function(n){this.sharedDsList=[];n.ApiStatus&&n.Status?(this.sharedDsList=n.Data,this.renderDsList(this.sharedDsList)):this.showErrorMessage(n.Message);this.enableOrDisableImportButton();this.wrapperEle.find("#"+this.id+"_ds_search").focus()},n.prototype.hideErrorMessage=function(){this.wrapperEle.find("#"+this.id+"_body_container_list_view").css({display:"",width:""});this.wrapperEle.find("#"+this.id+"_body_container_list_view div:first").css({display:"","vertical-align":""})},n.prototype.enableOrDisableImportButton=function(){ej.isNullOrUndefined(this.selectedDs)?ej.DashboardUtil.buttonEnable(this.wrapperEle.find("#"+this.id+"_importdsbtn"),!1):ej.DashboardUtil.buttonEnable(this.wrapperEle.find("#"+this.id+"_importdsbtn"),!0)},n.prototype.renderDsList=function(n){if(this.hideErrorMessage(),this.wrapperEle.find("#"+this.id+"_body_container_list_view div:first").html(this.wrapperEle.find("#"+this.id+this.templateName).render(n,this)),this.resize(this.wrapperEle.height()),!ej.isNullOrUndefined(n)&&n.length>0){var t=this.wrapperEle.find("#"+this.id+"_body_container_list_view div:first .e-dbrd-designer-shared-ds-item[data-id="+this.selectedDs+"]");t.length!==0?t.find(".e-dbrd-designer-checkmark").addClass("e-dbrd-designer-checkmark-checked").removeClass("e-dbrd-designer-checkmark-unchecked"):this.selectedDs=null}else this.showErrorMessage("No Data sources found.")},n.prototype.showLoadingIndicator=function(){this.wrapperEle.find("#"+this.id+"_shared_ds_searchIcon").attr("disabled","disabled");this.wrapperEle.find("#"+this.id+"_ds_search").attr("disabled","disabled").css("background","white");this.wrapperEle.find("#"+this.id+"_ds_search_wrapper").css("background","white");this.refreshBtn.attr("disabled","disabled");ej.DashboardUtil.buttonEnable(this.wrapperEle.find("#"+this.id+"_importdsbtn"),!1);this.ejLoader&&this.ejLoader.show()},n.prototype.hideLoadingIndicator=function(){this.wrapperEle.find("#"+this.id+"_ds_search").removeAttr("disabled").css("background","");this.wrapperEle.find("#"+this.id+"_shared_ds_searchIcon").removeAttr("disabled");this.wrapperEle.find("#"+this.id+"_ds_search_wrapper").css("background","");this.refreshBtn.removeAttr("disabled");ej.DashboardUtil.buttonEnable(this.wrapperEle.find("#"+this.id+"_importdsbtn"),!0);this.ejLoader&&this.ejLoader.hide()},n.prototype.formatDate=function(n,t){try{if(!ej.isNullOrUndefined(n)&&n!=="")return ej.format(new Date(n),t)}catch(i){ejDashboardDesigner.getInstance("DesignPanel").logError({Source:"Shared Datasource Date converter",Error:i,Type:i.name})}return n},n.prototype.tooltipFormatter=function(n,t,i,r){return r?"":n?i:t},n.prototype.getSharedDsTemplate=function(){return"<script id='"+this.id+"_sds_template' type='text/x-jsrender'><div class='e-dbrd-designer-shared-ds-item' data-id='{{:Id}}' ><div class='e-dashboarddesigner-row'><span><label class='e-dbrd-designer-trim-label e-dbrd-designer-shared-ds-title e-dbrd-designer-hoverable' data-tooltip='{{:Name}} '>{{:Name}} <\/label><\/span><span class='e-dbrd-designer-checkmark e-dbrd-designer-checkmark-unchecked e-dbrd-designer-hoverable' data-tooltip='{{:~tooltipFormatter(CanEdit,~dashboardDesigner.locale.sharedDataSource.readPermissionMessage,~dashboardDesigner.locale.sharedDataSource.editPermissionMessage,false)}}'><\/span><\/div><div class='e-dbrd-designer-shared-ds-content-label e-dashboarddesigner-row'><div><span><label>Created by:&nbsp;<\/label><\/span><span><label class='e-dbrd-designer-hoverable' data-tooltip='{{:CreatedUserName}}'>{{:CreatedUserName}}<\/label><\/span><span><label>&nbsp;on&nbsp;<\/label><\/span><span><label class='e-dbrd-designer-hoverable' data-tooltip='{{:~formatDate(CreatedDate,~dateFormat)}}'>{{:~formatDate(CreatedDate,~dateFormat)}}<\/label><\/span><\/div><div style='padding-top:5px;'><span><label>Last modified by:&nbsp;<\/label><\/span><span><label class='e-dbrd-designer-hoverable' data-tooltip='{{:UpdatedUserName}}'>{{:UpdatedUserName}}<\/label><\/span><span><label>&nbsp;on&nbsp;<\/label><\/span><span><label class='e-dbrd-designer-hoverable' data-tooltip='{{:~formatDate(UpdatedDate,~dateFormat)}}'>{{:~formatDate(UpdatedDate,~dateFormat)}}<\/label><\/span><\/div><\/div><div class='e-dashboarddesigner-row'><label class='e-dbrd-designer-trim-label e-dbrd-designer-shared-ds-description-label e-dbrd-designer-hoverable' data-tooltip='{{:Description}}'>{{:Description}}<\/label><\/div><\/div><\/script>"},n.prototype.getSampleDsTemplate=function(){return"<script id='"+this.id+"_sample_ds_template' type='text/x-jsrender'><div class='e-dbrd-designer-shared-ds-item' data-id='{{:Id}}' ><div class='e-dashboarddesigner-row'><span><label class='e-dbrd-designer-trim-label e-dbrd-designer-shared-ds-title e-dbrd-designer-hoverable' data-tooltip='{{:Name}} '>{{:Name}} <\/label><\/span><span class='e-dbrd-designer-checkmark e-dbrd-designer-checkmark-unchecked e-dbrd-designer-hoverable' data-tooltip='{{:~tooltipFormatter(CanEdit,~dashboardDesigner.locale.sharedDataSource.readPermissionMessage,~dashboardDesigner.locale.sharedDataSource.editPermissionMessage,true)}}'><\/span><\/div><div class='e-dashboarddesigner-row'><label class='e-dbrd-designer-trim-label e-dbrd-designer-shared-ds-description-label e-dbrd-designer-hoverable' data-tooltip='{{:Description}}'>{{:Description}}<\/label><\/div><\/div><\/script>"},n.prototype.renderSearchItem=function(){var i=ej.buildTag("div","",{display:"inline-block",float:"left",height:"30px","border-radius":"4px",margin:"0px 5px 5px 0px",width:"92%",border:"1px solid #c8c8c8","box-sizing":"border-box","background-color":"white"},{id:this.id+"_ds_search_wrapper"}),n=ej.buildTag("input.e-autocomplete e-reportdesigner-atc-boxshadow e-js e-input","",{"text-align":"left","font-size":"13px",float:"left",width:"95%","border-radius":"4px"},{type:"text",placeholder:"Search...",id:this.id+"_ds_search"}),t=ej.buildTag("span","",{width:"20px","margin-top":"8px",float:"right","font-size":"10px"},{id:this.id+"_shared_ds_searchIcon","class":"e-headericon e-reportdesigner-search"});n.off("keyup",$.proxy(this.onSearchTextKeyPress,this));n.on("keyup",$.proxy(this.onSearchTextKeyPress,this));t.off("click",$.proxy(this.onSearchIconClick,this));t.on("click",$.proxy(this.onSearchIconClick,this));return i.append(n,t),i},n.prototype.onSearchIconClick=function(n){$(n.currentTarget).hasClass("e-reportdesigner-close")&&(this.resetSearch(),this.renderDsList(this.sharedDsList))},n.prototype.resetSearch=function(){this.wrapperEle.find("#"+this.id+"_shared_ds_searchIcon").addClass("e-reportdesigner-search").removeClass("e-reportdesigner-close");this.wrapperEle.find("#"+this.id+"_ds_search").val("")},n.prototype.onSearchTextKeyPress=function(n){for(var i=$(n.currentTarget).val(),r=[],t=0;t<this.sharedDsList.length;t++)(ej.DashboardUtil.contains(this.sharedDsList[t].Name,i,!0)||ej.DashboardUtil.contains(this.sharedDsList[t].CreatedUserName,i,!0)||ej.DashboardUtil.contains(this.sharedDsList[t].UpdatedUserName,i,!0))&&r.push($.extend(!0,{},this.sharedDsList[t]));r.sort(function(n,t){return n.Name>t.Name?1:n.Name<t.Name?-1:0});i===""?(this.wrapperEle.find("#"+this.id+"_shared_ds_searchIcon").addClass("e-reportdesigner-search").removeClass("e-reportdesigner-close"),this.renderDsList(this.sharedDsList)):(this.wrapperEle.find("#"+this.id+"_shared_ds_searchIcon").addClass("e-reportdesigner-close").removeClass("e-reportdesigner-search"),this.renderDsList(r));this.enableOrDisableImportButton()},n}();window.ej.createObject("ej.DashboardDesignerUtility.SharedDataSource",InternalSharedDataSource,window);InternalSortDialog=function(){function n(){this.dashboardDesigner=null;this.dialogContainer=null;this.sortContainer=null;this.fieldContainer=null;this.sortOrderContainer=null;this.manualContainer=null;this.targetMethod="";this.menuItem=null;this.customSorting=null;this.datasetFields=[];this.measuresList=[];this.dimensionsList=[];this.measureFormats=[];this.dimensionFormats=[];this.listBoxField="text";this.sortType=CustomSortType.Alphabetic;this.sortOrder=CustomSortOrder.Ascending;this.alphabeticLabel=null;this.fieldCell=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderSortDialog();this.dimensionFormats=this.getSummaryTypeArrayforDimension();this.measureFormats=this.getmeasureFormatsList()}return Object.defineProperty(n,"SortInstance",{get:function(){return(this.sortDialog===null||this.sortDialog===undefined)&&(this.sortDialog=new ej.DashboardDesignerUtility.SortDialog),this.sortDialog},enumerable:!0,configurable:!0}),n.prototype.getmeasureFormatsList=function(){var n=[];return n.push({value:SummaryType[SummaryType.SUM],text:SummaryType.SUM}),n.push({value:SummaryType[SummaryType.AVG],text:SummaryType.AVG}),n.push({value:SummaryType[SummaryType.COUNT],text:SummaryType.COUNT}),n.push({value:SummaryType[SummaryType.MAX],text:SummaryType.MAX}),n.push({value:SummaryType[SummaryType.MIN],text:SummaryType.MIN}),n.push({value:SummaryType[SummaryType.COUNTD],text:SummaryType.COUNTD}),n.push({value:SummaryType[SummaryType.VAR],text:SummaryType.VAR}),n},n.prototype.getSummaryTypeArrayforDimension=function(){var n=[];return n.push({value:SummaryType[SummaryType.COUNT],text:SummaryType.COUNT}),n.push({value:SummaryType[SummaryType.COUNTD],text:SummaryType.COUNTD}),n},n.prototype.renderSortDialog=function(){this.dialogContainer=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{height:"auto"},{title:"Advanced Sorting Options",id:this.id+"_sort_dialog"});$(document.body).append(this.dialogContainer);this.sortContainer=this.getSortContainer();this.fieldContainer=this.getFieldContainer();this.sortOrderContainer=this.getSortOrderContainer();this.manualContainer=this.getManualContainer();this.dialogContainer.append(this.sortContainer).append(this.fieldContainer).append(this.sortOrderContainer).append(this.manualContainer);this.dialogContainer.ejDialog({width:"auto",height:"auto",minWidth:600,minHeight:333,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.renderFooter();this.getAlphabeticRadioButton().ejRadioButton({checked:!0,value:"alphabetic",change:$.proxy(this.updateSortType,this),cssClass:"e-designer-radiobtn"});this.getDataSourceRadioButton().ejRadioButton({checked:!1,value:"datasource",change:$.proxy(this.updateSortType,this),cssClass:"e-designer-radiobtn"});this.getFieldRadioButton().ejRadioButton({checked:!1,value:"field",change:$.proxy(this.updateSortType,this),cssClass:"e-designer-radiobtn"});this.getColumnField().ejDropDownList({width:"100%",fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateColumnField,this)});this.getSummaryField().ejDropDownList({width:"100%",fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,watermarkText:"Choose Field",cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control"});this.getAscendingRadioButton().ejRadioButton({checked:!0,value:"ascending",change:$.proxy(this.updateSortOrder,this),cssClass:"e-designer-radiobtn"});this.getDescendingRadioButton().ejRadioButton({checked:!1,value:"descending",change:$.proxy(this.updateSortOrder,this),cssClass:"e-designer-radiobtn"});this.getListBox().ejListBox({dataSource:[{text:""}],fields:{value:this.listBoxField},width:"100%",height:"100%",allowDrag:!0,allowDrop:!0,itemDragStart:$.proxy(this.listItemDragStart,this),create:$.proxy(this.createScrollBar,this),cssClass:"e-dbrd-control"});this.getListBoxDiv().ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"})},n.prototype.renderFooter=function(){var r=$("#"+this.id+"_sort_dialog_foot"),t=ej.buildTag("input.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_sort_dialog_btn_cancel"}),i=ej.buildTag("input.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_sort_dialog_btn_ok"}),n;r.append(t).append(i);n=this.dashboardDesigner.locale.dialogOptions;i.ejButton({text:n.applyButtonText,enabled:!0,width:"60px",height:"23px",showRoundedCorner:!1,size:"mini",click:$.proxy(this.updateSortInfo,this)});t.ejButton({width:"60px",text:n.cancelButtonText,height:"23px",showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeDialog,this,!0)})},n.prototype.getSortContainer=function(){var n=ej.buildTag("div","",{padding:"5px 0px"},{}),o=ej.buildTag("label","Sort By",{},{type:"label"}),t=ej.buildTag("table","",{width:"100%"},{}),i=ej.buildTag("tr","",{},{}),r=ej.buildTag("td","",{width:"25%",padding:"5px 0px"},{}),u=ej.buildTag("td","",{width:"25%",padding:"5px 0px"},{}),f,e;this.fieldCell=ej.buildTag("td","",{width:"25%",padding:"5px 25px"},{});f=ej.buildTag("td","",{width:"25%",padding:"5px 0px"},{});e=ej.buildTag("input","",{},{type:"radio",name:"sortby",id:this.id+"_sort_dialog_alphabetic"});this.alphabeticLabel=ej.buildTag("label.editLabel","Alphabetic",{"margin-left":"6px"},{"for":this.id+"_sort_dialog_alphabetic",id:this.id+"_sort_dialog_alphabetic_labeloption"});var s=ej.buildTag("input","",{},{type:"radio",name:"sortby",id:this.id+"_sort_dialog_dataSource"}),h=ej.buildTag("label.editLabel","Data Source Order",{"margin-left":"6px"},{"for":this.id+"_sort_dialog_dataSource",id:this.id+"_sort_dialog_dataSource_labeloption"}),c=ej.buildTag("input","",{},{type:"radio",name:"sortby",id:this.id+"_sort_dialog_field"}),l=ej.buildTag("label.editLabel","Field",{"margin-left":"6px"},{"for":this.id+"_sort_dialog_field",id:this.id+"_sort_dialog_field_labeloption"});return r.append(e).append(this.alphabeticLabel),u.append(s).append(h),this.fieldCell.append(c).append(l),i.append(r).append(u).append(this.fieldCell).append(f),t.append(i),n.append(o).append(t),n},n.prototype.getFieldContainer=function(){var n=ej.buildTag("div","",{padding:"5px 0px 10px",display:"none"},{}),t=ej.buildTag("table","",{width:"100%"},{}),i=ej.buildTag("tr","",{},{}),r=ej.buildTag("td","",{padding:"5px 0px",width:"250px"},{}),u=ej.buildTag("td","",{padding:"5px 10px",width:"150px"},{}),f=ej.buildTag("td","",{padding:"5px 0px"},{}),e=ej.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_sort_dialog_column"}),o=ej.buildTag("input.e-field e-ejinputtext","",{},{type:"text",id:this.id+"_sort_dialog_summary"});return r.append(e),u.append(o),i.append(r).append(u).append(f),t.append(i),n.append(t),n},n.prototype.getSortOrderContainer=function(){var n=ej.buildTag("div","",{padding:"5px 0px"},{}),f=ej.buildTag("label","Sort Order",{},{type:"label"}),t=ej.buildTag("table","",{width:"100%"},{}),i=ej.buildTag("tr","",{},{}),r=ej.buildTag("td","",{padding:"5px 0px",width:"25%"},{}),u=ej.buildTag("td","",{padding:"5px 0px"},{}),e=ej.buildTag("input","",{},{type:"radio",name:"sortorder",id:this.id+"_sort_dialog_ascending"}),o=ej.buildTag("label.editLabel","Ascending",{"margin-left":"6px"},{"for":this.id+"_sort_dialog_ascending",id:this.id+"_sort_dialog_ascending_labeloption"}),s=ej.buildTag("input","",{},{type:"radio",name:"sortorder",id:this.id+"_sort_dialog_descending"}),h=ej.buildTag("label.editLabel","Descending",{"margin-left":"6px"},{"for":this.id+"_sort_dialog_descending",id:this.id+"_sort_dialog_descending_labeloption"});return r.append(e).append(o),u.append(s).append(h),i.append(r).append(u),t.append(i),n.append(f).append(t),n},n.prototype.getManualContainer=function(){var n=ej.buildTag("div","",{padding:"5px 0px",height:"262px",display:"none"},{}),i=ej.buildTag("label","Drag and drop to re-arrange the below values in desired order.",{},{type:"label"}),t=ej.buildTag("div","",{height:"250px",padding:"5px 0px 0px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.id+"_sort_dialog_listbox_Div"}),r=ej.buildTag("ul","",{},{id:this.id+"_sort_dialog_listbox"});return t.append(r),n.append(i).append(t),n},n.prototype.listItemDragStart=function(){$(".e-draggable.e-droppable.dragClone.e-dragClonelist").css("z-index",ej.getMaxZindex())},n.prototype.createScrollBar=function(){$(this.getListBox().ejListBox("instance").listContainer).ejScroller({enableTouchScroll:!1,autoHide:!0,buttonSize:14,cssClass:"e-dbrd-designer-scroller e-dbrd-control"})},n.prototype.updateColumnField=function(n){var i=this.getItemType(n.text),r=i==="Dimensions"?this.dimensionFormats:this.measureFormats,t=this.getSummaryField().data("ejDropDownList");t.setModel({dataSource:r});t.selectItemByIndex(0)},n.prototype.updateSortType=function(n){switch(n.model.value){case"alphabetic":this.fieldContainer.css("display","none");this.sortOrderContainer.css("display","block");this.manualContainer.css("display","none");this.enableSortOrder(!0);this.sortType=CustomSortType.Alphabetic;break;case"datasource":this.fieldContainer.css("display","none");this.sortOrderContainer.css("display","block");this.manualContainer.css("display","none");this.enableSortOrder(!1);this.sortType=CustomSortType.DataSource;break;case"field":this.fieldContainer.css("display","block");this.sortOrderContainer.css("display","block");this.manualContainer.css("display","none");this.enableSortOrder(!0);this.sortType=CustomSortType.Field;break;case"manual":this.fieldContainer.css("display","none");this.sortOrderContainer.css("display","none");this.manualContainer.css("display","block");this.sortType=CustomSortType.Manual;var t=this.getListBoxDiv().attr("data-isLoaded");ej.isNullOrUndefined(t)&&this.getListBoxDatas()}},n.prototype.getListBoxDatas=function(){var n=[{Id:this.dataInfo.DataId,Name:this.dataInfo.Field,SummaryType:this.dataInfo.SummaryType,FieldType:this.dataInfo.FieldType,MeasureFormatting:this.dataInfo.MeasureFormatting,DateTimeFormat:this.dataInfo.DateTimeFormat,FilterInfo:this.dataInfo.FilterInfo,UniqueColumnName:this.dataInfo.UniqueColumnName,CustomSorting:this.dataInfo.CustomSorting}];ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getData,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getData,fieldInfo:n,dataset:this.dataInfo.Name})},{fnction:$.proxy(this.setListBoxValues,this,this.dataInfo.UniqueColumnName),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]})},n.prototype.setListBoxValues=function(n,t){var i=JSON.parse(t.data);!ej.isNullOrUndefined(i)&&i.length>0&&(this.listBoxField=n,this.getListBox().data("ejListBox").setModel({dataSource:i,fields:{value:this.listBoxField}}),this.getListBoxDiv().attr("data-isLoaded","true"))},n.prototype.showLoadingIndicator=function(){this.getListBoxDiv().ejWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){this.getListBoxDiv().ejWaitingPopup("hide")},n.prototype.updateSortOrder=function(n){switch(n.model.value){case"ascending":this.sortOrder=CustomSortOrder.Ascending;break;case"descending":this.sortOrder=CustomSortOrder.Descending}},n.prototype.enableSortOrder=function(n){var t=this.getAscendingRadioButton().data("ejRadioButton"),i=this.getDescendingRadioButton().data("ejRadioButton");n?(t.enable(),i.enable(),this.sortOrderContainer.removeClass("e-radio-btn-disabled")):(t.disable(),i.disable(),this.sortOrderContainer.addClass("e-radio-btn-disabled"))},n.prototype.openSortDialog=function(n,t,i,r){this.resetSortDialog();this.targetInstance=n;this.targetMethod=t;this.dataInfo=i;this.menuItem=r;this.dialogContainer.data("ejDialog").open();ej.isNullOrUndefined(i)||(this.dataInfo.FieldType==="Measures"?(this.getFieldRadioButton().data("ejRadioButton").disable(),this.fieldCell.addClass("e-radio-btn-disabled"),this.alphabeticLabel.text("Value")):(this.getFieldRadioButton().data("ejRadioButton").enable(),this.fieldCell.removeClass("e-radio-btn-disabled"),this.alphabeticLabel.text("Alphabetic")),this.customSorting=i.CustomSorting,this.populateSortInformation())},n.prototype.resetSortDialog=function(){this.customSorting=null;this.targetInstance=null;this.targetMethod=null;this.dataInfo=null;this.datasetFields=[];this.measuresList=[];this.dimensionsList=[]},n.prototype.populateSortInformation=function(){this.updateDatasetFields();this.dataInfo.IsCustomSortApplied===!1&&(this.customSorting.CustomSortType=CustomSortType.Alphabetic,this.customSorting.CustomSortOrder=this.dataInfo.Sorting);switch(this.customSorting.CustomSortType){case CustomSortType.Alphabetic:this.getAlphabeticRadioButton().data("ejRadioButton").setModel({checked:!0});break;case CustomSortType.DataSource:this.getDataSourceRadioButton().data("ejRadioButton").setModel({checked:!0});break;case CustomSortType.Field:this.getFieldRadioButton().data("ejRadioButton").setModel({checked:!0});break;case CustomSortType.Manual:this.getManualRadioButton().data("ejRadioButton").setModel({checked:!0})}switch(this.customSorting.CustomSortOrder){case CustomSortOrder.Ascending:this.getAscendingRadioButton().data("ejRadioButton").setModel({checked:!0});break;case CustomSortOrder.Descending:this.getDescendingRadioButton().data("ejRadioButton").setModel({checked:!0})}this.populateFieldInfo()},n.prototype.populateFieldInfo=function(){var n=this.getColumnField().data("ejDropDownList"),t=this.getSummaryField().data("ejDropDownList"),i,r;n.setModel({dataSource:this.datasetFields});ej.isNullOrUndefined(this.customSorting.FieldId)||this.customSorting.FieldId===""?n.selectItemByIndex(0):n.selectItemByValue(this.customSorting.FieldId);i=!ej.isNullOrUndefined(this.customSorting.FieldName)&&this.customSorting.FieldName!==""?this.getItemType(this.customSorting.FieldName):this.getItemType(n.selectedTextValue.toString());r=i==="Dimensions"?this.dimensionFormats:this.measureFormats;t.setModel({dataSource:r});ej.isNullOrUndefined(this.customSorting.SummaryType)?t.selectItemByIndex(0):t.selectItemByValue(this.customSorting.SummaryType)},n.prototype.updateDatasetFields=function(){for(var i,r,t=ejDashboardDesigner.getInstance("DataSet").datasets,n=0;n<t.length;n++)if(t[n].Id===this.dataInfo.Name)for(i=0;i<t[n].Fields.length;i++)this.datasetFields.push({text:t[n].Fields[i].Name,value:t[n].Fields[i].Id}),r=ej.DashboardUtil.getDatasetTypeIcon(t[n].Fields[i].TypeName),r==="e-reportdesigner-dataset-number"?this.measuresList.push({Name:t[n].Fields[i].Name,DatasetIcon:r,DataField:t[n].Fields[i].DataField}):this.dimensionsList.push({Name:t[n].Fields[i].Name,DatasetIcon:r,DataField:t[n].Fields[i].DataField})},n.prototype.getItemType=function(n){for(var i="",t=0;t<this.measuresList.length;t++)this.measuresList[t].Name===n&&(i="Measures");for(t=0;t<this.dimensionsList.length;t++)this.dimensionsList[t].Name===n&&(i="Dimensions");return i},n.prototype.updateSortInfo=function(){if(!ej.isNullOrUndefined(this.targetInstance)){var n=$(this.getSummaryField().data("ejDropDownList").getSelectedItem()).text();this.customSorting={CustomSortType:this.sortType,CustomSortOrder:this.sortOrder,FieldId:this.getColumnField().data("ejDropDownList").getSelectedValue(),FieldName:$(this.getColumnField().data("ejDropDownList").getSelectedItem()).text(),SummaryType:ej.DashboardDesignerUtility.Serialization.getSummaryType(n),ManualOrderList:this.getManulOrderList()};this.dataInfo.IsCustomSortApplied=!0;this.dataInfo.Sorting=this.customSorting.CustomSortOrder;this.dataInfo.CustomSorting=this.customSorting;this.getListBoxDiv().removeAttr("data-isLoaded");ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.customSorting,this.dataInfo,this.menuItem])}this.closeDialog()},n.prototype.getManulOrderList=function(){for(var t=[],i=this.getListBox().data("ejListBox").getListData(),n=0;n<i.length;n++)t.push(i[n][this.listBoxField]);return t},n.prototype.closeDialog=function(){this.getListBoxDiv().removeAttr("data-isLoaded");this.dialogContainer.data("ejDialog").close()},n.prototype.getAscendingRadioButton=function(){return this.sortOrderContainer.find("#"+this.id+"_sort_dialog_ascending")},n.prototype.getDescendingRadioButton=function(){return this.sortOrderContainer.find("#"+this.id+"_sort_dialog_descending")},n.prototype.getAlphabeticRadioButton=function(){return this.sortContainer.find("#"+this.id+"_sort_dialog_alphabetic")},n.prototype.getDataSourceRadioButton=function(){return this.sortContainer.find("#"+this.id+"_sort_dialog_dataSource")},n.prototype.getFieldRadioButton=function(){return this.sortContainer.find("#"+this.id+"_sort_dialog_field")},n.prototype.getManualRadioButton=function(){return this.sortContainer.find("#"+this.id+"_sort_dialog_manual")},n.prototype.getColumnField=function(){return this.fieldContainer.find("#"+this.id+"_sort_dialog_column")},n.prototype.getSummaryField=function(){return this.fieldContainer.find("#"+this.id+"_sort_dialog_summary")},n.prototype.getListBox=function(){return this.manualContainer.find("#"+this.id+"_sort_dialog_listbox")},n.prototype.getListBoxDiv=function(){return this.manualContainer.find("#"+this.id+"_sort_dialog_listbox_Div")},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects(this.dialogContainer);this.dialogContainer.length>0&&$("#"+this.id+"_sort_dialog").remove()},n}();window.ej.createObject("ej.DashboardDesignerUtility.SortDialog",InternalSortDialog,window),function(n){n[n.Alphabetic="Alphabetic"]="Alphabetic";n[n.DataSource="DataSource"]="DataSource";n[n.Field="Field"]="Field";n[n.Manual="Manual"]="Manual";n[n.None="None"]="None"}(CustomSortType||(CustomSortType={})),function(n){n[n.Ascending="Ascending"]="Ascending";n[n.Descending="Descending"]="Descending";n[n.Undefined="Undefined"]="Undefined"}(CustomSortOrder||(CustomSortOrder={}));InternalDatePickerReportItems=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="DatePicker";this.isMasterByDefault=!0;this.rootCss="e-datepicker-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.containerProperties=null;this.reportName=null;this.datepickerJson=null;this.contentContainer=null;this.isHeaderVisible=!0;this.isControlMenuVisible=!1;this.isMaximizeEnable=!1;this.controlHeader=null;this.controlSubHeader=null;this.dataGroupInfo=null;this.dataConfiguration=null;this.wholeDatasource=null;this.dataValues=null;this.masterSlaveConfiguration=null;this.clonedData=null;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.isDataEnabled=!0;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.DatePicker;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.masterSlaveConfiguration=ejDashboardDesigner.getInstance("MasterSlaveFilter");this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.getWidgetItemContainer=function(){return this.getReportItem()},n.prototype.render=function(n){this.renderDatePickerItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.datePickerItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.datepickerJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateDatePickerItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(){return!0},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getDatePickerContainerInstance()},n.prototype.refresh=function(){},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(){return null},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.filters,GroupId:"1093107b-a5c1-4bd3-83cb-ec6ccd40a031",Items:[{id:"ccafb315-b5f7-419a-a0f3-42cc2287deb8",widgetName:"DatePicker",widgetDisplayName:n.itemPanel.widgetTitle.datePicker,cssClass:"e-widgeticon e-reportdesigner-datepicker",widgetNameSpace:"ej.DashboardDesignerUtility.DatePickerItem",searchCategory:["datepicker","filters"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.datePicker,description:n.itemPanel.widgetDescription.datePickerDesc,dataRequirement:n.itemPanel.widgetDataRequirements.filtersDataReq}}]})},n.prototype.getDatePickerContainerInstance=function(){return this.containerProperties},n.prototype.setWidgetJson=function(n){this.datepickerJson=n},n.prototype.renderDatePickerReportElement=function(n){try{this.datepickerJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.datepickerJson.ContainerSettings.Bounds.Row,column:this.datepickerJson.ContainerSettings.Bounds.Column,rowSpan:this.datepickerJson.ContainerSettings.Bounds.RowSpan,colSpan:this.datepickerJson.ContainerSettings.Bounds.ColumnSpan};this.renderDatePickerElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.datepickerJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderDatePickerItem=function(){try{this.renderDatePickerElement();this.datepickerJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.DatePicker)}catch(n){this.designPanel.logError({Source:this.datepickerJson.UniqueName,Error:n,Type:n.name})}},n.prototype.renderDatePickerElement=function(){var t=this.controlHeader.outerHeight(!0),n=this.datepickerJson.ContainerSettings;!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(n.SubTitle)&&n.SubTitle.trim().length>0?(t+=this.controlSubHeader.outerHeight(!0),this.controlSubHeader.css("display","block")):this.controlSubHeader.css("display","none");this.datepickerItem=ej.buildTag("div.e-datepickeritem e-dbrd-widget e-dbrd-control","",{width:"100%",height:this.isHeaderVisible?"calc(100% - "+t+"px)":"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998"},{id:this.designPanel.designId+"Item"+this.datepickerJson.UniqueName});this.contentContainer.append(this.datepickerItem);this.controlContainer.data("widgetInstance",this);this.createDatePickerElement();this.datepickerItem.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designId+"_designer_waiting_popup e-designer-loader"})},n.prototype.showLoadingIndicator=function(){$("#"+this.designPanel.designId+"Item"+this.datepickerJson.UniqueName).ejWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){$("#"+this.designPanel.designId+"Item"+this.datepickerJson.UniqueName).ejWaitingPopup("hide")},n.prototype.createDatePickerElement=function(){var t,n;this.datepickerElement=ej.buildTag("input.e-datepicker-element","",{width:"100%","box-sizing":"border-box",position:"relative","font-size":"12px","background-color":"white"},{id:this.designPanel.designId+"Element"+this.datepickerJson.UniqueName});this.datepickerItem.append(this.datepickerElement);this.datepickerItem.css("padding","5px");t=30;this.datepickerElement.ejDashboardDatePicker({cssClass:"e-dbrd-control",startDate:"01/01/1900",endDate:"01/01/2050",locale:{format:"M/d/yyyy",daysOfWeek:["Su","Mo","Tu","We","Th","Fr","Sa"],montNames:["January","February","March","April","May","June","July","August","September","October","November","December"]},value:null,height:t.toString(),highlightAvailableDates:this.datepickerJson.HighlightAvailableDates,datePickerType:ej.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,this.datepickerJson.Type).toLowerCase(),selected:$.proxy(this.selectionChange,this)});n=this.contentContainer.innerHeight()/2-(t/2+5);n<0&&(n=39.5);this.datepickerItem.css("padding-top",n)},n.prototype.selectionChange=function(n){var e,f,u,i,o;if(this.masterSlaveConfiguration.isValidDataGroupInfo(this.datepickerJson,this.dataGroupInfo)){var r=[],s=this.datepickerElement.data("ejDashboardDatePicker"),t=this.dataGroupInfo.Values[0].Values[0];this.clonedData=$.extend(!0,{},t);e=ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterCondition,InitialDateFilterCondition.Range);f=[];ej.isNullOrUndefined(s)||(u=null,ej.isNullOrUndefined(n.selectedRange)?(u=t.DateTimeFormat===ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Date)?ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.MonthDayYear):t.DateTimeFormat,n.datePickerType===ej.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,DatePickerType.Single).toLocaleLowerCase()?r={DateFormat:u,DisplayFilterList:[],DateFilterList:this.masterSlaveConfiguration.getDateFilterList([n.value],!1),DateFilterType:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact)}:(i=[n.selectedValues.start,n.selectedValues.end],f=t.DateTimeFormat===ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.Date)?this.masterSlaveConfiguration.getDateFilterList(i,!1):i,r={DateFormat:u,DisplayFilterList:[],DateFilterList:f,DateFilterType:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact)})):(i=[n.selectedRange],r={DateFormat:ej.DashboardDesignerUtility.Serialization.enumToString(DateTimeFormat,DateTimeFormat.RelativeDate),DisplayFilterList:[],DateFilterList:i,DateFilterType:ej.DashboardDesignerUtility.Serialization.enumToString(InitialDateFilterType,InitialDateFilterType.Exact)}));o={FilterInfo:r,Action:e,IsStdDateTime:!1};this.datepickerJson.SelectedFilterValues=[this.masterSlaveConfiguration.updateInitialFiltersForFilterControls(t.UniqueColumnName,this.datepickerJson.UniqueName,t.FieldActualType,o)];this.masterSlaveConfiguration.enableClearFilter(this.controlHeader);ej.DashboardDesignerUtility.Serialization.notifyChange()}},n.prototype.updateOrRemovedIntialSelection=function(n){var i=this.datepickerElement.data("ejDashboardDatePicker"),r=ej.isNullOrUndefined(n)?null:JSON.parse(n),t,o,s,u,c,l;if(this.datepickerJson.FilterSettings.ActAsMasterWidget&&!ej.isNullOrUndefined(i)&&this.datepickerJson.SelectedFilterValues.length>0){var a=this.dataGroupInfo.Values[0].Values[0],v=this.masterSlaveConfiguration.isColumnFilterModified(this.clonedData,a),e=!0;if(v)this.clearFilter();else{if(t=this.datepickerJson.SelectedFilterValues[0].InitialDateFilter.DateFilterList,o=/[a-zA-Z]/.test(t[0]),!ej.isNullOrUndefined(r)&&o)for(s=Object.keys(r),u=0;u<s.length;u++)if(s[u]===t[0]){e=!1;break}if(e)this.clearFilter();else{var f=!ej.isNullOrUndefined(r)&&o?r[t[0]]:null,y=ej.isNullOrUndefined(f)?ej.parseDate(t[0],ejDashboardDesigner.ServerDateTimeFormat):f[0],h=ej.format(y,i.format);this.datepickerJson.Type===DatePickerType.Range?(c=ej.isNullOrUndefined(f)?ej.parseDate(t[1],ejDashboardDesigner.ServerDateTimeFormat):f[1],l=ej.format(c,i.format),i.model.value={range:t[0],start:h,end:l}):i.model.value={range:"",start:h,end:""};i.redraw()}}e||this.masterSlaveConfiguration.enableClearFilter(this.controlHeader)}},n.prototype.clearFilter=function(){var n=this.datepickerElement.data("ejDashboardDatePicker");ej.isNullOrUndefined(n)||(n.model.value={range:"",start:"",end:""},n.redraw());this.masterSlaveConfiguration.disableClearFilter(this.controlHeader);this.datepickerJson.SelectedFilterValues=[];ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"DatePicker",i);this.propertyPanel.canUpdate=!0},n.prototype.isFieldValid=function(){return!0},n.prototype.updateRangeList=function(n){var t=this.datepickerElement.data("ejDashboardDatePicker");t.option("ranges","");ej.isNullOrUndefined(n)||t.option("ranges",JSON.parse(n));t.redraw()},n.prototype.updateReportItemData=function(n){var i=this.datepickerElement.data("ejDashboardDatePicker"),t;ej.isNullOrUndefined(n.Result)?t=n:(t=n.Result,i.option("ranges",""),ej.isNullOrUndefined(n.RelativeDates)||i.option("ranges",JSON.parse(n.RelativeDates)),i.redraw());this.dataValues=t;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.datepickerItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");var u="",f="",r=[];ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.datepickerJson,this.dataGroupInfo);ej.isNullOrUndefined(i)||(ej.isNullOrUndefined(t.Error)||t.Error?ej.isNullOrUndefined(t.Message)||(this.designPanel.showControlError(this.contentContainer,t,this.cellInfo),this.clearFilter()):t.noDataAvailable?(this.datepickerItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):t.data!=="[]"&&ej.isNullOrUndefined(t.isDataSetEmpty)?(r=JSON.parse(t.widgetData.data),u=r.MinDate,f=r.MaxDate,i.option("startDate",u),i.option("endDate",f),this.wholeDatasource=r.DataSource,this.updateOrRemovedIntialSelection(n.RelativeDates),ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i.model)||this.updateHighlightDate(i.model.highlightAvailableDates)):(t.data==="[]"&&t.columnBindings==="{}"||!ej.isNullOrUndefined(t.isDataSetEmpty)&&t.isDataSetEmpty)&&(i.option("startDate",ej.format(i.minDate,"d/m/yyyy")),i.option("endDate",ej.format(i.maxDate,"d/m/yyyy")),i.option("ranges",""),this.clearFilter(),this.wholeDatasource=[],this.clearFilter()))},n.prototype.updateReportItemDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Dimensions",SupportedTypes:["e-reportdesigner-dataset-datetime"]}),n},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Column",CategoryType:CategoryType.Non_Numeric,CategoryCount:1}),n},n.prototype.getPropertyGridItems=function(){var n=new ej.DashboardDesignerUtility.PropertyGridItem(this.datepickerJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.datepickerJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.datepickerJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.datepickerJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.datepickerJson.ContainerSettings.Description,n.propertyGridItems.Type="DatePicker",n.filterSettingsProperty.Items[2].isVisible=!1,$.each(n.containerSettingsProperty.Items,function(n,t){(t.name==="ShowMaximize"||t.name==="CSVExport"||t.name==="ExcelExport"||t.name==="ImageExport"||t.name==="PDFExport")&&(t.isVisible=!1)}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"Range",displayName:"Range",value:this.datepickerJson.Type===DatePickerType.Range,itemType:"bool"},{name:"LimitDates",displayName:"Limit Dates",value:this.datepickerJson.LimitDates,itemType:"bool"},{name:"HighlightAvailableDates",displayName:"Highlight Available Dates",value:this.datepickerJson.HighlightAvailableDates,itemType:"bool"}]},n.filterSettingsProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.getDatePickerJson=function(){var n=new DatePickerProperties;return n.FilterSettings.ActAsMasterWidget=!0,n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.updateWidgetSize=function(n){if(this.cellInfo=n,this.designPanel.updateWidgetItem(n,this.controlContainer,this.datepickerJson,CommandAction.ItemResize,"updateSize","e-datepicker-item"),this.contentContainer.find(".e-dbrd-control-error").length===1)this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo);else{var t=this.contentContainer.innerHeight()/2-(this.datepickerElement.height()/2+5);t<0&&(t=39.5);this.datepickerElement.css("width","100%");this.datepickerItem.css("padding-top",t+"px")}},n.prototype.updateItemSize=function(n){if(this.cellInfo=n,this.designPanel.updateWidgetItem(n,this.controlContainer,this.datepickerJson,CommandAction.ItemResize,"updateItemSize","e-datepicker-item"),this.contentContainer.find(".e-dbrd-control-error").length===1)this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo);else{var t=this.contentContainer.innerHeight()/2-(this.datepickerElement.height()/2+5);t<0&&(t=39.5);this.datepickerElement.css("width","100%");this.datepickerItem.css("padding-top",t+"px")}},n.prototype.updateDatePickerItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.datepickerJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.datepickerJson);break;case"Description":this.propertyPanel.setDescription(this.datepickerJson,i);break;case"HighlightAvailableDates":this.updateHighlightDate(i);break;case"LimitDates":this.updateLimitDate(i);break;case"Range":this.updateSelectionType(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.datepickerJson,i);break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"DatePicker",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-datepicker-item",this.designer._id+"_"+this.datepickerJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.datepickerJson,CommandAction.ItemMove,"updatePosition","e-datepicker-item")},n.prototype.updateLimitDate=function(n){this.datepickerJson.LimitDates=n;var t=this.datepickerElement.data("ejDashboardDatePicker");ej.isNullOrUndefined(t)||(t.model.limitDate=n,t.redraw())},n.prototype.updateSelectionType=function(n){this.datepickerJson.Type=n?DatePickerType.Range:DatePickerType.Single;var t=this.datepickerElement.data("ejDashboardDatePicker");ej.isNullOrUndefined(t)||(t.model.datePickerType=ej.DashboardDesignerUtility.Serialization.enumToString(DatePickerType,this.datepickerJson.Type).toLowerCase(),t.redraw(),this.clearFilter())},n.prototype.updateHighlightDate=function(n){var t,i;this.datepickerJson.HighlightAvailableDates=n;t=this.datepickerElement.data("ejDashboardDatePicker");ej.isNullOrUndefined(t)||(t.model.highlightAvailableDates=n,i=this.wholeDatasource,n&&!ej.isNullOrUndefined(i)&&t.option("dataSource",i),t.redraw())},n.prototype.datePickerItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.datepickerJson.UniqueName,[this.datepickerJson],null);var n=this.datepickerElement.data("ejDashboardDatePicker");ej.isNullOrUndefined(n)||n.destroy();$("#"+this.designer._id+"_"+this.datepickerJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.datepickerJson.UniqueName).remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.DatePicker)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.datepickerJson)&&(this.datepickerJson=this.getDatePickerJson()),this.datepickerJson},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(n,t){$(t).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters"&&$(t).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("RangeFilterDialog").openFilterDialog(this.dataConfiguration,"filterAction",n,i)},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n.prototype.getParameterColumn=function(){return{Value:this.datepickerJson.ContainerSettings.Title,Id:this.datepickerJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n}();window.ej.createObject("ej.DashboardDesignerUtility.DatePickerItem",InternalDatePickerReportItems,window);ej.DashboardDesignerUtility.DatePickerItem.prototype.widgetItems();InternalSQLDataSource=function(){function n(){this.lastServerName="";this.connectionType="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.dashboardDesigner._id;this.field={id:"id",text:"text",value:"value"};this.isPostBackServer=!1;this.dataSourceLocale=this.dashboardDesigner.locale.dataSource;this.extractionMode=ej.DashboardDesignerUtility.Serialization.enumToString(ExtractionMode,ExtractionMode.Live)}return Object.defineProperty(n,"SQLDataSource",{get:function(){return(this.sqldataSource===null||this.sqldataSource===undefined)&&(this.sqldataSource=new ej.DashboardDesignerUtility.SQLDataSource),this.sqldataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n,"SQLReconnectDataSource",{get:function(){return(this.sqlReconnectDataSource===null||this.sqlReconnectDataSource===undefined)&&(this.sqlReconnectDataSource=new ej.DashboardDesignerUtility.SQLDataSource),this.sqlReconnectDataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n,t){this.connectionType=t;n.find("#"+this.id+this.connectionType+"_sql_datasource").length>0?this.resetConfiguration():(this.sqlConfig=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType+"_sql_datasource"}),n.append(this.sqlConfig),this.renderBasicPanel(),this.renderAdvcPanel(),this.changedAuthentication({text:this.dataSourceLocale.sqlServerText}));$("#"+this.id+this.connectionType+"_panelSwitch").length>0&&$("#"+this.id+this.connectionType+"_panelSwitch").bind("click",$.proxy(this.switchAdvcPanel,this));this.showConfiguration(!0)},n.prototype.renderBasicPanel=function(){var r=this.getRefreshSettingsJson(),n;this.basicPanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType+"_sql_basicpanel"});n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+this.connectionType+"_sql_basic_config"});this.sqlConfig.append(this.basicPanel);this.basicPanel.append(n);var t=this.dataSourceLocale.windowsText,i=this.dataSourceLocale.sqlServerText,u=[{id:t.toLowerCase(),text:t,value:t},{id:i.toLowerCase(),text:i,value:i}];this.datasource.renderTextBoxItem(this.dataSourceLocale.serverNameText,this.id+this.connectionType+"_sql_servername",!1,n,426);this.dashboardDesigner.dashboardMode===DashboardMode.Local&&this.datasource.renderDropDownItem(this.dataSourceLocale.authenticationTypeText,this.id+this.connectionType+"_sql_authtype",n,u,{id:"id",text:"text",value:"value"},"1");this.datasource.renderTextBoxItem(this.dataSourceLocale.userName,this.id+this.connectionType+"_sql_username",!1,n,426);this.datasource.renderTextBoxItem(this.dataSourceLocale.passWord,this.id+this.connectionType+"_sql_passwd",!0,n,426);this.datasource.renderCheckboxItem(this.dataSourceLocale.savePassWord,this.id+this.connectionType+"_save_password",n,null,this,"right");this.dashboardDesigner.intermediateDBStatus||this.renderExtractionMode(this.dataSourceLocale.mode,this.id+this.connectionType+"_sql_extrat_mode",n,426);this.datasource.renderExtractModeMessageItem(this.dashboardDesigner.locale.dataSource.extractModeMessage.replace("{0}","50000"),this.id+this.connectionType+"_sql_extract_message",n);this.datasource.renderAccordionItem(this.dataSourceLocale.dataBaseText,this.id+this.connectionType+"_sql_dbname",n,this.sqlDBfocus,null,this);this.datasource.renderDropDownItem("Refresh Settings",this.id+this.connectionType+"_sql_refresh",n,r,this.field,"0");this.sqlServer=$("#"+this.id+this.connectionType+"_sql_servername");this.sqlUsrName=$("#"+this.id+this.connectionType+"_sql_username");this.refreshIntervel=$("#"+this.id+this.connectionType+"_sql_refresh");this.sqlDatabase=$("#"+this.id+this.connectionType+"_sql_dbname");this.sqlPasswrd=$("#"+this.id+this.connectionType+"_sql_passwd");$("#"+this.id+this.connectionType+"_sql_authtype")&&this.dashboardDesigner.dashboardMode===DashboardMode.Local&&(this.ejAuthDrpdwn=$("#"+this.id+this.connectionType+"_sql_authtype").data("ejDropDownList"),this.ejAuthDrpdwn.model.change=$.proxy(this.changedAuthentication,this));this.sqlPasswrdTag=$("#"+this.id+this.connectionType+"_sql_passwd_tr");this.sqlUsrNameTag=$("#"+this.id+this.connectionType+"_sql_username_tr");this.refreshIntervelTag=$("#"+this.id+this.connectionType+"_sql_refresh_tr");this.extractMessageTag=$("#"+this.id+this.connectionType+"_sql_extract_message_tr");this.ejSqlDbAutoComp=this.sqlDatabase.data("ejAutocomplete");this.sqlSavePasswrdTag=$("#"+this.id+this.connectionType+"_save_password_tr");this.ejSqlSavePasswrd=$("#"+this.id+this.connectionType+"_save_password").data("ejCheckBox");this.wiredEvents();this.dsNameId=this.id+this.connectionType+"_datasource_dsname";this.dsName=$("#"+this.dsNameId).val();this.refreshIntervelTag.css("display","none");this.extractMessageTag.css("display","none")},n.prototype.renderExtractionMode=function(n,t,i){var r=$("<tr id="+t+"_tr/>"),u=$("<td unselectable='on'/>");r.append(u);i.append(r);var s=ej.buildTag("label.editLabel e-designer-title-label",n,{width:"100px",height:"100%",float:"left","box-sizing":"border-box","padding-left":"5px"},{id:this.id+this.connectionType+"_sql_basicpanel_extractMode"}),f=ej.buildTag("div","",{width:"calc(100% - 100px)",height:"100%",float:"right"},{id:this.id+this.connectionType+"_sql_basicpanel_extractMode"}),e=ej.buildTag("div","",{width:"50%",height:"100%",float:"left"},{id:this.id+this.connectionType+"_sql_basicpanel_extractMode_live"}),o=ej.buildTag("div","",{width:"50%",height:"100%",float:"left"},{id:this.id+this.connectionType+"_sql_basicpanel_extractMode_extract"});f.append(e,o);u.append(s,f);this.renderRadioItem(this.dashboardDesigner.locale.dataSource.live,this.id+this.connectionType+"_sql_extract_mode_live","extractmode",e,!0);this.renderRadioItem(this.dashboardDesigner.locale.dataSource.extract,this.id+this.connectionType+"_sql_extract_mode_extract","extractmode",o,!1)},n.prototype.renderRadioItem=function(n,t,i,r,u){var f=ej.buildTag("input","",{},{type:"radio",name:i,id:t});r.append(f);f.ejRadioButton({checked:u,change:$.proxy(this.extractModeChange,this,n),text:n,cssClass:"e-radiotext"})},n.prototype.extractModeChange=function(n,t){var i=t.model.text===this.dashboardDesigner.locale.dataSource.live?ExtractionMode.Live:ExtractionMode.Extract;this.extractionMode=ej.DashboardDesignerUtility.Serialization.enumToString(ExtractionMode,i);this.extractionMode.toLowerCase()==="live"?(this.refreshIntervelTag.css("display","none"),this.extractMessageTag.css("display","none")):(this.refreshIntervelTag.css("display","table-row"),this.extractMessageTag.css("display","table-row"));this.datasource.updateDSConfigContainer()},n.prototype.inputFocus=function(n,t){t.keyCode!==9&&this.hideValidationMsg($(t.currentTarget).attr("id"))},n.prototype.unWiredEvents=function(){this.sqlServer.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.sqlUsrName.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.sqlDatabase.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.sqlPasswrd.off("keyup",$.proxy(this.inputFocus,this,this.dsName));this.sqlUsrName.off("focusin",$.proxy(this.onUserFocusIn,this));this.sqlUsrName.off("focusout",$.proxy(this.onUserFocusOut,this));this.sqlPasswrd.off("focusin",$.proxy(this.onUserFocusIn,this));this.sqlPasswrd.off("focusout",$.proxy(this.onUserFocusOut,this));this.sqlServer.off("focusin",$.proxy(this.sqlServerFocusIn,this));this.sqlServer.off("focusout",$.proxy(this.sqlServerFocusOut,this))},n.prototype.destroy=function(){this.unWiredEvents()},n.prototype.renderAdvcPanel=function(){this.advancePanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType+"_sql_advancepanel"});var n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+this.connectionType+"_sql_advance_config"});this.sqlConfig.append(this.advancePanel);this.advancePanel.append(n);this.datasource.renderTextArea(this.dataSourceLocale.connectionString,this.id+this.connectionType+"_sql_advanceConStr",n);this.advcSqlConncString=$("#"+this.id+this.connectionType+"_sql_advanceConStr")},n.prototype.onUserFocusIn=function(){this.sqlUserName=this.sqlUsrName.val();this.sqlPassword=this.sqlPasswrd.val()},n.prototype.sqlServerFocusIn=function(){this.lastServerName=this.getServerVal()},n.prototype.getRefreshSettingsJson=function(){var t=ejDashboardDesigner.getInstance("DashboardDesigner").previewFeaturesJson,n=ej.DashboardUtil.getInstance().GetPreviewFeatureValue(t,PreviewFeatureName.RefreshSettings);return ej.isNullOrUndefined(n)?[{id:"never",text:"Never",value:"Never"},{id:"1hours",text:"1 Hour",value:"OneHours"},{id:"6hours",text:"6 Hours",value:"SixHours"},{id:"12hours",text:"12 Hours",value:"TwelveHours"},{id:"24hours",text:"24 Hours",value:"TwentyFourHours"},{id:"1week",text:"1 Week",value:"OneWeek"},{id:"1month",text:"1 Month",value:"OneMonth"}]:n},n.prototype.onUserFocusOut=function(){var n=this.sqlUsrName.val(),t=this.sqlPasswrd.val();(this.sqlUserName!==n||this.sqlPassword!==t)&&this.ejSqlDbAutoComp.setModel({dataSource:[]})},n.prototype.wiredEvents=function(){this.sqlUsrName.on("focusin",$.proxy(this.onUserFocusIn,this));this.sqlUsrName.on("focusout",$.proxy(this.onUserFocusOut,this));this.sqlPasswrd.on("focusin",$.proxy(this.onUserFocusIn,this));this.sqlPasswrd.on("focusout",$.proxy(this.onUserFocusOut,this));this.sqlServer.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.sqlUsrName.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.sqlDatabase.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.sqlPasswrd.on("keyup",$.proxy(this.inputFocus,this,this.dsName));this.sqlServer.on("focusin",$.proxy(this.sqlServerFocusIn,this));this.sqlServer.on("focusout",$.proxy(this.sqlServerFocusOut,this))},n.prototype.hasSQLNoneType=function(n){return(n.SecurityType===0||n.SecurityType==="None")&&!n.ConnectionProperties.IntegratedSecurity?!0:!1},n.prototype.editConfiguration=function(n,t){var r,i;this.renderConfiguration(n,"_editConnection");t&&(r=null,r=ej.isNullOrUndefined(t.ConnectionProperties.ConnectString)?t.ConnectionProperties.ConnectionString:t.ConnectionProperties.ConnectString,t.ConnectionProperties.IsDesignState||this.hasSQLNoneType(t)?(this.showAdvcPanel(!0),this.advcSqlConncString.val(r)):(i=this.datasource.getConStringArgs(r),this.sqlUsrName.val(t.ConnectionProperties.UserName),$("#"+this.id+this.connectionType+"_username").val(t.ConnectionProperties.UserName),i["data source"].value&&$("#"+this.id+this.connectionType+"_sql_servername").val(i["data source"].value),i["initial catalog"].value&&this.ejSqlDbAutoComp.setModel({value:i["initial catalog"].value}),ej.isNullOrUndefined(t.Mode)||(this.setExtractMode(t.Mode),t.Mode.toLowerCase()!=="extract"||ej.isNullOrUndefined(t.RefreshInterval)||this.setRefreshInterval(t.RefreshInterval)),this.dashboardDesigner.dashboardMode===DashboardMode.Local&&(t.ConnectionProperties.IntegratedSecurity||t.SecurityType===0||t.SecurityType==="None"?this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.windowsText}):!t.ConnectionProperties.IntegratedSecurity&&(!ej.isNullOrUndefined(t.ConnectionProperties.UserName)&&t.ConnectionProperties.UserName.length>0||!ej.isNullOrUndefined(t.ConnectionProperties.PassWord)&&t.ConnectionProperties.PassWord.length>0)?this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.sqlServerText}):t.ConnectionProperties.IntegratedSecurity||this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.sqlServerText}))));this.hideValidationMsg()},n.prototype.setRefreshInterval=function(n){this.refreshIntervel.data("ejDropDownList").selectItemByValue(n)},n.prototype.setExtractMode=function(n){var t=this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_sql_extract_mode_"+n.toLowerCase()).data("ejRadioButton");t.option("checked",!0);ej.isNullOrUndefined(n)||(this.extractionMode=n)},n.prototype.hideValidationMsg=function(n){(ej.isNullOrUndefined(this.sqlServer)||this.sqlServer.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.sqlServer.attr("id"),!1);(ej.isNullOrUndefined(this.sqlDatabase)||this.sqlDatabase.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.sqlDatabase.attr("id"),!1);(ej.isNullOrUndefined(this.sqlUsrName)||this.sqlUsrName.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.sqlUsrName.attr("id"),!1);(ej.isNullOrUndefined(this.sqlPasswrd)||this.sqlPasswrd.attr("id")===n||ej.isNullOrUndefined(n))&&this.datasource.showValidationMsg(this.sqlPasswrd.attr("id"),!1);this.datasource.showValidationMsg(this.advcSqlConncString.attr("id"),!1)},n.prototype.resetConfiguration=function(){var n,t;this.hideValidationMsg();this.sqlUsrName.val("");this.sqlPasswrd.val("");$("#"+this.id+this.connectionType+"_sql_servername").val("");this.dashboardDesigner.dashboardMode===DashboardMode.Local&&this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.sqlServerText});this.ejSqlDbAutoComp.clearText();this.ejSqlSavePasswrd.setModel({checked:!1});this.ejSqlDbAutoComp.setModel({value:"",dataSource:[]});this.lastServerName="";n=this.dashboardDesigner.element.find("#"+this.id+this.connectionType+"_sql_extract_mode_live").data("ejRadioButton");ej.isNullOrUndefined(n)||n.option("checked",!0);t=this.refreshIntervel.data("ejDropDownList");ej.isNullOrUndefined(t)||t.selectItemByValue("Never");this.advcSqlConncString.val("");$("#"+this.id+this.connectionType+"_panelSwitch").length>0&&$("#"+this.id+this.connectionType+"_panelSwitch").unbind("click",$.proxy(this.switchAdvcPanel,this))},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName=t.Username;n.ConnectionProperties.PassWord=t.Password;n.ConnectionProperties.Prompt="";n.SecurityType=t.SecurityType;n.Name=t.Name;n.RefreshInterval=t.RefreshInterval;n.Mode=t.Mode;n.Mode.toLowerCase()!=="live"||ej.isNullOrUndefined(n.ExtractionParams)||(n.ExtractionParams=null)},n.prototype.UpdateDataSourceInfo=function(n,t){this.UpdateDSInfo(n,t)},n.prototype.getDatabaseVal=function(){var n=this.ejSqlDbAutoComp.getValue();return n?n:$("#"+this.id+this.connectionType+"_sql_dbname").val()},n.prototype.getServerVal=function(){return $("#"+this.id+this.connectionType+"_sql_servername").val()},n.prototype.getDatasourceInfo=function(n,t,i){var r=!0,f="",e="",u="",h=!0,c=!1,l="Integrated",a="Never",o,s;return(this.hideValidationMsg(t),this.basicPanel.is(":visible")?(o=this.getServerVal(),s=this.getDatabaseVal(),o.length===0&&(this.sqlServer.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.sqlServer.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyServerName),r=!1),s.length===0&&(this.sqlDatabase.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.sqlDatabase.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyDatabaseName),r=!1),(this.dashboardDesigner.dashboardMode!==DashboardMode.Local||this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.sqlServerText)&&(f=this.sqlUsrName.val(),e=this.sqlPasswrd.val(),l="DataBase",h=!1,f.length===0&&(this.sqlUsrName.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.sqlUsrName.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyUserName),r=!1),e.length===0&&(this.sqlPasswrd.attr("id")===t||ej.isNullOrUndefined(t))&&(this.datasource.showValidationMsg(this.sqlPasswrd.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyPassword),r=!1)),this.extractionMode.toLowerCase()!=="live"&&(a=this.refreshIntervel.data("ejDropDownList").getSelectedValue()),u=this.buildSqlConnection(o,s,i)):(c=!0,u=this.advcSqlConncString.val(),u.length===0&&(this.datasource.showValidationMsg(this.advcSqlConncString.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyConnectionString),r=!1)),r)?{Name:n,Provider:"SQL",IsIntegrated:h,SecurityType:l,IsDesignState:c,Username:f,Password:e,ConnectionString:u,Mode:this.extractionMode,RefreshInterval:a}:null},n.prototype.getConnectionVal=function(n){var t=this.getServerVal(),i=this.getDatabaseVal();return t.length!==0&&i.length!==0?this.buildSqlConnection(t,i,n):null},n.prototype.buildSqlConnection=function(n,t,i){var f,r,e,u,o;if(this.datasource.isEdit){for(f="",r=this.datasource.getConStringArgs(i.ConnectionProperties.ConnectString),r["data source"].value&&(r["data source"].value=n),r["initial catalog"].value&&(r["initial catalog"].value=t),e=Object.keys(r),u=0;u<e.length;u++)o=r[e[u]],f+=o.field+"="+o.value+";";return f}return"Data Source="+n+";Initial Catalog="+t+";"},n.prototype.changedAuthentication=function(n){this.datasource.showValidationMsg(this.sqlUsrName.attr("id"),!1);this.datasource.showValidationMsg(this.sqlPasswrd.attr("id"),!1);this.sqlUsrNameTag.css("display","none");this.sqlPasswrdTag.css("display","none");this.sqlSavePasswrdTag.css("display","none");n.text===this.dataSourceLocale.sqlServerText&&(this.sqlUsrNameTag.css("display","table-row"),this.sqlPasswrdTag.css("display","table-row"),this.sqlSavePasswrdTag.css("display","table-row"));this.ejSqlDbAutoComp.setModel({dataSource:[]});n.isInteraction&&this.ejSqlDbAutoComp.clearText();this.datasource.updateEJComponentSize();this.datasource.scrollerRefresh($("#"+this.id+this.connectionType+"_dsConfigBodyContainer"))},n.prototype.changedAdvAuthentication=function(){this.datasource.updateEJComponentSize();this.datasource.scrollerRefresh($("#"+this.id+this.connectionType+"_dsConfigBodyContainer"))},n.prototype.switchAdvcPanel=function(){var t=this.advcSqlConncString.val(),n=this.getConnectionVal(this.datasource.datasourceItem);this.basicPanel.is(":visible")?this.showAdvcPanel(!0,n):n&&n.trim().toLowerCase()!==t.trim().toLowerCase()?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSourceAdvancePanel,this.dashboardDesigner.locale.alertWindowMesages.visualDesignerMsg,IconType.warning,AlertType.Confirm,!1,"",{height:160,width:510,instance:this,method:"confirmPanelSwitch"}):this.showAdvcPanel(!1,n);this.hideValidationMsg()},n.prototype.confirmPanelSwitch=function(n){n&&this.showAdvcPanel(!n)},n.prototype.showAdvcPanel=function(n,t){this.hideValidationMsg();n?(this.basicPanel.css("display","none"),this.advancePanel.css("display","table-row"),$("#"+this.id+this.connectionType+"_panelSwitch").text(this.dataSourceLocale.basicOption),this.advcSqlConncString.val(ej.isNullOrUndefined(t)?"":t)):(this.basicPanel.css("display","table-row"),this.advancePanel.css("display","none"),$("#"+this.id+this.connectionType+"_panelSwitch").text(this.dataSourceLocale.advanceOptionText));this.datasource.updateEJComponentSize();this.datasource.scrollerRefresh($("#"+this.id+this.connectionType+"_dsConfigBodyContainer"))},n.prototype.showConfiguration=function(n){this.sqlConfig.css("display",n?"table-row":"none");this.sqlConfig.children().show();this.showAdvcPanel(!n)},n.prototype.sqlDBfocus=function(n){var t,e;if(!(n.model.dataSource&&n.model.dataSource.length>0)&&!this.isPostBackDB&&(t=this.getServerVal(),t)){var i="",r="",u=!0,f="Integrated";this.isPostBackDB=!0;(this.dashboardDesigner.dashboardMode!==DashboardMode.Local||this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.sqlServerText)&&(i=this.sqlUsrName.val(),r=this.sqlPasswrd.val(),u=!1,f="DataBase");e={Name:"",Provider:"SQL",IsIntegrated:u,SecurityType:f,Username:ej.DashboardUtil.encryptData(i),Password:ej.DashboardUtil.encryptData(r),ConnectionString:ej.DashboardUtil.encryptData("Data Source="+t+";"),Mode:this.extractionMode};ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.dataBases,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.dataBases,datasource:e})},{fnction:$.proxy(this.loadSqlDB,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)]},!0)}},n.prototype.loadSqlDB=function(n){var u,i,r,t;if(n.Error)u=ej.isNullOrUndefined(n.Message)?n.Message:n.Message.replace("Sf_Exception - ",""),ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.alertDialog,u,IconType.errors,AlertType.Alert,!1,null);else if(n&&n!=="Not Found"){for(i=[],r=JSON.parse(n),t=0;t<r.length;t++)i.push(r[t].DataBase);this.ejSqlDbAutoComp.setModel({dataSource:i});this.ejSqlDbAutoComp.open()}this.isPostBackDB=!1},n.prototype.sqlServerFocusOut=function(){var n=this.getServerVal();this.lastServerName!==n&&this.ejSqlDbAutoComp.setModel({dataSource:[]})},n.prototype.showLoadingIndicator=function(){$("#"+this.id+this.connectionType+"_sql_dbname_dropdown>span").removeClass("e-search");$("#"+this.id+this.connectionType+"_sql_dbname_dropdown>span").addClass("e-load").addClass("e-input");$("#"+this.id+this.connectionType+"_sql_dbname_dropdown>span").css("background-position","center")},n.prototype.hideLoadingIndicator=function(){$("#"+this.id+this.connectionType+"_sql_dbname_dropdown>span").removeClass("e-input").removeClass("e-load");$("#"+this.id+this.connectionType+"_sql_dbname_dropdown>span").addClass("e-search")},n}();window.ej.createObject("ej.DashboardDesignerUtility.SQLDataSource",InternalSQLDataSource,window);InternalSqlCeDataSource=function(){function n(){this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.dashboardDesigner._id;this.dataSourceLocale=this.dashboardDesigner.locale.dataSource}return Object.defineProperty(n,"SqlCeDataSource",{get:function(){return(this.sqlcedataSource===null||this.sqlcedataSource===undefined)&&(this.sqlcedataSource=new ej.DashboardDesignerUtility.SqlCeDataSource),this.sqlcedataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n){n.find("#"+this.id+"_sqlce_datasource").length>0?this.resetConfiguration():(this.sqlCeConfig=ej.buildTag("div","",{width:"100%",height:"100%",display:"table-row"},{id:this.id+"_sqlce_datasource"}),n.append(this.sqlCeConfig),this.renderSqlCePanel(),this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.noneText}));this.showConfiguration(!0)},n.prototype.renderSqlCePanel=function(){var n;this.sqlCePanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_sqlce_panel"});n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+"_sqlce_config"});this.sqlCeConfig.append(n);var t=this.dataSourceLocale.authentication,i=this.dataSourceLocale.noneText,r=[{id:t.toLowerCase(),text:t,value:t},{id:i.toLowerCase(),text:i,value:i}];this.datasource.renderTextArea("Connection String",this.id+"_sqlce_conStr",n);this.datasource.renderDropDownItem("Authentication Type",this.id+"_sqlce_authtype",n,r,{id:"id",text:"text",value:"value"},"0");this.datasource.renderTextBoxItem("Password",this.id+"_sqlce_passwd",!0,n,426);$("#"+this.id+"_sqlce_authtype").length>0&&(this.ejAuthDrpdwn=$("#"+this.id+"_sqlce_authtype").data("ejDropDownList"),this.ejAuthDrpdwn.model.change=$.proxy(this.changedAuthentication,this));this.passWord=$("#"+this.id+"_sqlce_passwd");this.passWordTag=$("#"+this.id+"_sqlce_passwd_tr");this.conncString=$("#"+this.id+"_sqlce_conStr");this.conncStringTag=$("#"+this.id+"_sqlce_conStr_tr")},n.prototype.changedAuthentication=function(n){this.hideValidationMsg();this.passWordTag.css("display","none");n.text===this.dataSourceLocale.authentication&&this.passWordTag.css("display","table-row");this.datasource.updateEJComponentSize();this.datasource.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.editConfiguration=function(n){this.renderConfiguration(this.datasource.configTable);this.hideValidationMsg();n&&(this.passWord.val(n.ConnectionProperties.PassWord),this.conncString.val(n.ConnectionProperties.ConnectString),n.ConnectionProperties&&(n.ConnectionProperties.PassWord&&n.ConnectionProperties.PassWord.length>0||n.SecurityType===2||n.SecurityType==="DataBase")&&this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.authentication}))},n.prototype.hideValidationMsg=function(){this.datasource.showValidationMsg(this.conncString.attr("id"),!1);this.datasource.showValidationMsg(this.passWord.attr("id"),!1)},n.prototype.resetConfiguration=function(){this.hideValidationMsg();this.passWord.val("");this.conncString.val("");this.ejAuthDrpdwn.setModel({value:this.dataSourceLocale.noneText})},n.prototype.showConfiguration=function(n){this.sqlCeConfig.css("display",n?"table-row":"none");this.sqlCeConfig.children().show()},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName="";n.ConnectionProperties.PassWord="";n.ConnectionProperties.Prompt="";n.SecurityType=t.SecurityType;this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.authentication&&(n.ConnectionProperties.PassWord=t.Password)},n.prototype.getDatasourceInfo=function(n){var i=!0,t="",r="None";return(this.hideValidationMsg(),this.ejAuthDrpdwn.getSelectedValue()===this.dataSourceLocale.authentication&&(t=this.passWord.val(),this.datasource.showValidationMsg(this.passWord.attr("id"),!(t.length>0),"Specify the Password"),i=t.length>0,r="DataBase"),this.datasource.showValidationMsg(this.conncString.attr("id"),!(this.conncString.val().length>0),"Specify the connection string"),i=this.conncString.val().length>0,i)?{Name:n,Provider:"SQLCe",IsIntegrated:!1,SecurityType:r,Username:"",Password:t,ConnectionString:this.conncString.val()}:null},n}();window.ej.createObject("ej.DashboardDesignerUtility.SqlCeDataSource",InternalSqlCeDataSource,window);InternalSqlEditor=function(){function n(){this.value="";this.editorTag=null;this.indicesTag=null;this.id=ej.DashboardUtil.getInstance().ejInstance._id;this.manager=new SqlEditorUndoManager}return Object.defineProperty(n,"Editor",{get:function(){return(this.editor===null||this.editor===undefined)&&(this.editor=new ej.DashboardDesignerUtility.SqlEditor),this.editor},enumerable:!0,configurable:!0}),n.prototype.renderQueryEditor=function(n){this.queryEditor=ej.buildTag("div","",{},{id:this.id+"_queryEditor"});var i=this.indicesTag=ej.buildTag("div","",{height:"100%",width:"40px","text-align":"right","padding-top":"10px","background-color":"#ececec",overflow:"hidden",position:"absolute",display:"block"},{id:this.id+"_queryEditor_indices"}),t=this.editorTag=ej.buildTag("div.e-reportdesigner-queryEditor","",{"padding-left":"15px","padding-top":"10px",height:"100%",width:"96.5%","margin-left":"40px","white-space":"pre",position:"absolute",overflow:"hidden",display:"block","border-color":"#cbcbcb","border-style":"solid","border-width":"0.4px","border-top-width":"0px"},{id:this.id+"_queryEditor_editor",contenteditable:"true"}),r=ej.buildTag("div","1",{"padding-right":"4px"},{id:this.id+"_queryEditor_indices0"});i.append(r);t.bind("keydown",$.proxy(this.onEditorKeydown,this));t.bind("scroll",$.proxy(this.scrollLeft,this));t.bind("keypress",$.proxy(this.onEditorKeyPress,this));t.bind("keyup",$.proxy(this.onEditorKeyUp,this));this.queryEditor.append(i);this.queryEditor.append(t);n.append(this.queryEditor)},n.prototype.onEditorKeydown=function(n){this.updateIndices();n.ctrlKey&&(n.keyCode===90||n.keyCode===89)&&(n.preventDefault(),n.stopPropagation())},n.prototype.onEditorKeyUp=function(n){var p,s,w,b,c,k,r,l,a,v,t,i,u,f,y;if(n.keyCode===13)for(p=0,t=0;t<this.editorTag[0].childNodes.length;t++)this.editorTag[0].childNodes[t].localName==="p"&&(p===0||t===1?(s=this.editorTag[0].childNodes[t],w=document.createElement("div"),s.parentNode.replaceChild(w,s),w.innerHTML=s.textContent===""?"<br/>":s.textContent,p++):$(this.editorTag[0].childNodes[t]).remove());if(n.ctrlKey&&n.keyCode!==65&&n.keyCode!==67)if(b=n.keyCode?n.keyCode:n.which,n.ctrlKey&&n.keyCode===90)this.manager.isUndo()&&this.manager.undo();else if(n.ctrlKey&&n.keyCode===89)this.manager.isRedo()&&this.manager.redo();else if(n.ctrlKey&&n.keyCode===86){$("#"+this.id+"_queryEditor_editor")[0].innerHTML!=="<br>"&&this.setQuery($("#"+this.id+"_queryEditor_editor")[0].innerText);this.updateDivIndices();var o=$("#"+this.id+"_queryEditor_editor"),d=this.editorTag[0].children.length,e=[],h=0;for(t=0;t<d;t++)if(o[0].childNodes[t].children&&o[0].childNodes[t].children.length)for(r=0;r<o[0].childNodes[t].childNodes.length;r++)o[0].childNodes[t].childNodes[r].id&&(h=t,e.push(o[0].childNodes[t].childNodes[r]));for(c=0;c<e.length;c++)e[c].id=this.id+"_queryEditor_editor_childNode"+c;for(k=$("#"+this.id+"_queryEditor_editor"+h),r=0;r<e.length;r++)if(r===0){var g=e[0].innerHTML,nt=o[0].childNodes[h].innerHTML,tt=nt+g;$("#"+this.id+"_queryEditor_editor"+h)[0].innerHTML=tt}else $("#"+e[r].id).insertAfter(k),k=$("#"+e[r].id);for(this.updateDivIndices(),l=$("#"+this.id+"_queryEditor_editor"+h)[0],a=0;a<l.childNodes.length;a++)l.childNodes[a].id&&l.removeChild(l.childNodes[a])}else{for(v=this.editorTag,t=0;t<v[0].children.length;t++)v[0].children[t].innerHTML==="<br>"&&(v[0].children[t].innerHTML="");if(i=window.getSelection().anchorNode.parentNode,b!==13&&b!==8||window.getSelection().anchorNode.textContent!==" ")if(i.id&&i.id!==this.id+"_queryEditor_editor")if(u=i.children,i.id===this.id+"_queryEditor"&&u.length===2)for(f=0;f<u.length;f++)u[f].id===this.id+"_queryEditor_editor"&&this.updateText(u[f],n);else this.updateText(i,n);else this.updateText(i.parentNode,n)}if((n.keyCode>=65&&n.keyCode<=90||window.getSelection().anchorNode.textContent!==" ")&&!n.ctrlKey&&n.keyCode!==37&&n.keyCode!==38&&n.keyCode!==39&&n.keyCode!==40&&n.keyCode!==13&&n.keyCode!==16&&n.keyCode!==17)if(i=window.getSelection().anchorNode.parentNode,i.id&&i.id!==this.id+"_queryEditor_editor")if(u=i.children,i.id===this.id+"_queryEditor"&&u.length===2)for(f=0;f<u.length;f++)u[f].id===this.id+"_queryEditor_editor"&&this.updateText(u[f],n);else this.updateText(i,n);else this.updateText(i.parentNode,n);this.updateIndices();n.ctrlKey&&n.keyCode===90&&this.manager.isUndo()||n.ctrlKey&&n.keyCode===89&&this.manager.isRedo()||(y=this.editorTag[0].innerHTML,this.value!==y&&(this.manager.addCmdAction("TextUndo",this.value,y),this.value=y))},n.prototype.updateIndices=function(){var u=this.editorTag,i=u[0].children.length,n,r,t;if(i>0)for(this.indicesTag.empty(),n=0;n<i;n++)r=n+1,t=ej.buildTag("div","",{"padding-right":"4px"},{}),t.attr({id:this.id+"_queryEditor_indices"+n}),this.indicesTag.append(t),$("#"+this.id+"_queryEditor_indices"+n).text(r.toString())},n.prototype.getQuery=function(){var n=this.editorTag;return n[0].innerText.replace(/\r?\n/g,"\n")},n.prototype.setQuery=function(n){var c,r,u,i,f,t,e,l,a,o,s,h;if(this.manager.reset(),this.editorTag.empty(),this.indicesTag.empty(),this.indicesTag[0].children.length||(c=ej.buildTag("div","1",{"padding-right":"4px"},{id:this.id+"_queryEditor_indices0"}),this.indicesTag.append(c)),n.length===0)this.editorTag[0].children.length||(t=ej.buildTag("div.e-reportdesigner-queryEditor","",{},{id:this.id+"_queryEditor_editor0"}),this.editorTag.append(t),t[0].innerHTML="<br>",this.value===""&&(this.value=this.editorTag[0].innerHTML));else for(r=void 0,n?(n=n.replace(/<\/?span[^>]*>/g,""),n=n.replace(/\r?\n/g,"\n"),n=n.replace(/</g,"&lt;"),n=n.replace(/>/g,"&gt;")):(n="",r=""),r=this.setKeyword(n),u=r===""?[]:r.split("\n"),i=0;i<u.length;i++)f=this.indicesTag[0].children.length,t=ej.buildTag("div.e-reportdesigner-queryEditor","",{},{id:this.id+"_queryEditor_editor"+i}),t.attr("spellcheck","false"),e=ej.buildTag("div","",{"padding-right":"4px"},{id:this.id+"_queryEditor_indices"+i}),l=this.editorTag[0].children.length,f>=l&&(a=$("#"+this.id+"_queryEditor_indices"+i)[0].innerHTML,o=parseInt(a,10)+1,t[0].innerHTML=u[i]?u[i]:"<br/>",this.editorTag.append(t),o<=u.length&&(e.attr({id:this.id+"_queryEditor_indices"+f}),this.indicesTag.append(e),$("#"+this.id+"_queryEditor_indices"+f).text(o.toString())),s=document.createRange(),s.setStart(t[0],t.length),h=window.getSelection(),h.removeAllRanges(),h.addRange(s))},n.prototype.setHTML=function(n){this.editorTag[0].innerHTML=n;this.updateIndices()},n.prototype.scrollLeft=function(){var n=this.editorTag.scrollTop();this.indicesTag.scrollTop(n)},n.prototype.onEditorKeyPress=function(n){var o=n.keyCode?n.keyCode:n.which,e,u,t,r,i,f;if(o===13){for(e=this.editorTag[0].children,u=0;u<e.length;u++)if(t=e[u].childNodes,t.length>1)for(r=0;r<t.length;r++)t&&t[r].localName==="br"&&(i=t[r],f=ej.buildTag("div.e-reportdesigner-queryEditor","",{},{}),f[0].innerHTML=i.textContent===""?"<br>":i.textContent,this.editorTag.append(f),f.insertAfter(i.parentNode),i.parentNode.removeChild(i));this.updateDivIndices();this.updateIndices()}},n.prototype.updateDivIndices=function(){for(var t=this.editorTag[0].children,n=0;n<t.length;n++)t[n].id=this.id+"_queryEditor_editor"+n},n.prototype.updateText=function(n){var u=n,i=u.innerHTML,r;n.id===this.id+"_queryEditor_editor"?this.setQuery(i==="<br>"?"":i):n.innerHTML=this.setKeyword(i);var f=document.createRange(),e=this.getCaretPosition(n),t=this.getChildElement(n,e);ej.isNullOrUndefined(t)||t.Element.nodeName==="SPAN"||(f.setStart(t.Element,t.Position),r=window.getSelection(),r.removeAllRanges(),r.addRange(f),u.focus())},n.prototype.getChildElement=function(n,t){for(var u,r=0,i=0;i<n.childNodes.length;i++){if(u=n.childNodes[i].textContent.length,r+u>t)return{Element:n.childNodes[i],Position:t-r};r+=u}if(n.childNodes.length===1)return{Element:n.childNodes[0],Position:t}},n.prototype.getCaretPosition=function(n){var e=0,i=n.ownerDocument||n.document,o=i.defaultView||i.parentWindow,t,r,u,s,f;return typeof o.getSelection!="undefined"?(t=o.getSelection(),t.rangeCount>0&&(r=o.getSelection().getRangeAt(0),u=r.cloneRange(),u.selectNodeContents(n),u.setEnd(r.endContainer,r.endOffset),e=u.toString().length)):t===i.selection&&t.type!=="Control"&&(s=t.createRange(),f=i.body.createTextRange(),f.moveToElementText(n),f.setEndPoint("EndToEnd",s),e=f.text.length),e},n.prototype.setKeyword=function(n){n=n.replace(/<\/?span[^>]*>/g,"");return $.each(["ADD","EXCEPT","ALTER","EXEC","SELECT","PLAN","EXECUTE","PRECISION","AND","EXISTS","PRIMARY","AN","EXI","PRINT","AS","FETCH","PROC","ASC","FILE","PROCEDURE","AUTHORIZATION","FILLFACTOR","PUBLIC","BACKUP"," FOR","RAISERROR","BEGIN","FOREIGN","READ","BETWEEN","FREETEXT","READTEXT","BREAK","FREETEXTTABLE","RECONFIGURE","BROWSE,","FROM","REFERENCES","BULK","FULL","REPLICATION","BY","FUNCTION","RESTORE","CASCADE","GOTO","RESTRICT","CASE","GRANT","RETURN","CHECK","GROUP","REVOKE","CHECKPOINT","HAVING","RIGHT","CLOSE","HOLDLOCK","ROLLBACK","CLUSTERED","IDENTITY","ROWCOUNT","COALESCE","IDENTITY_INSERT","ROWGUIDCOL","LIKE","THEN","CURRENT_TIMESTAMP","LINENO","TO","CURRENT_USER","LOAD","TOP","CURSOR","NATIONAL","TRAN","DATABASE","NOCHECK","TRANSACTION","DBCC","NONCLUSTERED","TRIGGER","DEALLOCATE","NOT","TRUNCATE","DECLARE","NULL","TSEQUAL","DEFAULT","NULLIF","UNION","DELETE","OF","UNIQUE","DENY","OFF","UPDATE","DESC","OFFSETS","UPDATETEXT","DISK","ON","USE","DISTINCT","OPEN","USER","DISTRIBUTED","OPENDATASOURCE","VALUES","DOUBLE","OPENQUERY","VARYING","DROP","OPENROWSET","VIEW","DUMMY","OPENXML","WAITFOR","DUMP","OPTION","WHEN","ELSE","OR","WHERE","END","ORDER","WHILE","ERRLVL","OUTER","WITH","ESCAPE","OVER","WRITETEXT","ABSOLUTE","FOUND","PRESERVE","ACTION","FREE","PRIOR","ADMIN","GENERAL","PRIVILEGES","AFTER","GET","READS","AGGREGATE","GLOBAL","REAL","ALIAS","GO","RECURSIVE","ALLOCATE","GROUPING","REF","ARE","HOST","REFERENCING","ARRAY","HOUR","RELATIVE","ASSERTION","IGNORE","RESULT","AT","IMMEDIATE","RETURNS","BEFORE","INDICATOR","ROLE","BINARY","INITIALIZE","ROLLUP","BIT","INITIALLY","ROUTINE","BLOB","INOUT","ROW","BOOLEAN","INPUT","ROWS","BOTH","INT","SAVEPOINT","BREADTH","INTEGER","SCROLL","CALL","INTERVAL","SCOPE","CASCADED","ISOLATION","SEARCH","CAST","ITERATE","SECOND","CATALOG","LANGUAGE","SECTION","CHAR","LARGE","SEQUENCE","CHARACTER","LAST","SESSION","LATERAL","SETS","CLOB","LEADING","SIZE","COLLATION","LESS","SMALLINT","COMPLETION","LEVEL","SPACE","CONNECT","LIMIT","SPECIFIC","CONNECTION","LOCAL","SPECIFICTYPE","CONSTRAINTS","LOCALTIME","SQL","CONSTRUCTOR","LOCALTIMESTAMP","SQLEXCEPTION","CORRESPONDING","LOCATOR","SQLSTATE","CUBE","MAP","SQLWARNING","CURRENT_PATH","MATCH","START","CURRENT_ROLE","MINUTE","STATE","CYCLE","MODIFIES","STATEMENT","DATA","MODIFY","STATIC","DATE","MODULE","STRUCTURE","DAY","MONTH","TEMPORARY","DEC","NAMES","TERMINATE","DECIMAL","NATURAL","THAN","DEFERRABLE","NCHAR","TIME","DEFERRED","NCLOB","TIMESTAMP","DEPTH","NEW","TIMEZONE_HOUR","DEREF","NEXT","TIMEZONE_MINUTE","DESCRIBE","NO","TRAILING","DESCRIPTOR","NONE","TRANSLATION","DESTROY","NUMERIC","TREAT","DESTRUCTOR","OBJECT","TRUE","DETERMINISTIC","OLD","UNDER","DICTIONARY","ONLY","UNKNOWN","DIAGNOSTICS","OPERATION","UNNEST","DISCONNECT","ORDINALITY","USAGE","DOMAIN","OUT","USING","DYNAMIC","OUTPUT","VALUE","EACH","PAD","VARCHAR","END - EXEC","PARAMETER","VARIABLE","EQUALS","PARAMETERS","WHENEVER","EVERY","PARTIAL","WITHOUT","EXCEPTION","PATH","WORK","EXTERNAL","POSTFIX","WRITE","PREFIX","YEAR","FIRST","PREORDER","ZONE","FLOAT","PREPARE","ADA","AVG","BIT_LENGTH","CHAR_LENGTH","CHARACTER_LENGTH","COUNT","EXTRACT","FORTRAN","INCLUDE","INSENSITIVE","LOWER","MAX","MIN","OCTET_LENGTH","OVERLAPS","PASCAL","POSITION","SQLCA","SQLCODE","SQLERROR","SUBSTRING","SUM","TRANSLATE","TRIM","UPPER"],function(t,i){var r=new RegExp("\\b("+i+")\\b","gi");n=n.replace(r,function(n){return'<span class="e-reportdesigner-queryEditor" style="color:blue;">'+n+"<\/span>"})}),n},n}();SqlEditorUndoManager=function(){function n(){this.stack=[];this.currentIndex=-1;this.stack=[];this.id=ej.DashboardUtil.getInstance().ejInstance._id}return n.prototype.isUndo=function(){return this.currentIndex>=0},n.prototype.undo=function(){if(this.currentIndex>=0){var n=this.stack[this.currentIndex];ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getQueryInstance("SqlEditor"),"setHTML",[n.oldVal]);this.currentIndex--}},n.prototype.isRedo=function(){return this.currentIndex<this.stack.length-1},n.prototype.redo=function(){this.currentIndex++;var n=this.stack[this.currentIndex];ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getQueryInstance("SqlEditor"),"setHTML",[n.newVal])},n.prototype.addCmdAction=function(n,t,i){this.stack.push({action:n,oldVal:t,newVal:i});this.currentIndex++},n.prototype.reset=function(){this.currentIndex=-1;this.stack=[]},n}();window.ej.createObject("ej.DashboardDesignerUtility.SqlEditor",InternalSqlEditor,window);InternalStoreParameter=function(){function n(){this.dashboardDesigner=null;this.id=null;this.parameters=[];this.updatedParameters=[];this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.queryDesigner.id;this.renderStoreParameter()}return Object.defineProperty(n,"StoreParameter",{get:function(){return(this.storeParameter===null||this.storeParameter===undefined)&&(this.storeParameter=new ej.DashboardDesignerUtility.StoreParameter),this.storeParameter},enumerable:!0,configurable:!0}),n.prototype.renderStoreParameter=function(){var i=ej.buildTag("div.e-userselect","",{display:"block"},{title:"Parameters",id:this.id+"_parameter_dialog"}),r=ej.buildTag("div","",{height:"280px",width:"100%",margin:"4px 0px"}),n=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{border:"0.5px solid #c9cbcc","border-radius":"2px",height:"280px",width:"100%","background-color":"white"},{id:this.id+"_topDiv_parameter_dialog"}),u=ej.buildTag("div","",{},{}),s=ej.buildTag("table.e-designer-exp-table","",{padding:"0px 8px"},{id:this.id+"_proc_parameters"}),t;u.append(s);n.append(u);r.append(n);i.append(r);var f=this.dashboardDesigner.locale.dialogOptions,e=ej.buildTag("button.e-dbrd-hand-cursor",f.cancelButtonText,{float:"right"},{id:this.id+"_proc_btn_cancel"}),o=ej.buildTag("button.e-dbrd-hand-cursor",f.okButtonText,{float:"right"},{id:this.id+"_proc_btn_save"});i.ejDialog({minWidth:570,minHeight:230,height:"auto",width:"auto",target:"#"+this.id,enableResize:!1,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",showOnInit:!1,enableModal:!0,close:$.proxy(ej.DashboardUtil.closeDialog,this)});t=$("#"+this.id+"_parameter_dialog_foot");t.append(e);t.append(o);o.ejButton({cssClass:"e-designer-okbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.doneProcDialog,this)});e.ejButton({cssClass:"e-designer-cancelbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeProcDialog,this)});n.ejScroller({height:"280px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.closeProcDialog=function(){$("#"+this.id+"_parameter_dialog").data("ejDialog").close()},n.prototype.doneProcDialog=function(){var n=this.getProcParams();n&&n.length>0&&($("#"+this.id+"_div_dragSurface .e-Stored.Procedures").length>0?this.queryDesigner.executeQuery():(this.queryDesigner.dragSurfaceTag.append(this.queryDesigner.tableContainer),this.queryDesigner.loadProcedureSchema()));this.updatedParameters=$.extend([],!0,n);$("#"+this.id+"_parameter_dialog").data("ejDialog").close()},n.prototype.getProcParams=function(){var t=[],f,u,r;if(this.parameters&&(f=Object.keys(this.parameters),u=this.parameters[f],f.length>0)){for(r=0;r<u.length;r++){var n=u[r],i=n.Name.substring(1),e=$("#"+this.id+"_chk_"+i).data("ejCheckBox");e.isChecked()?t.push({Name:n.Name,IsNull:!0,DataType:n.DataType,Value:null}):u[r].DataType==="bit"?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:$("#"+this.id+"_proc_"+i).data("ejCheckBox").isChecked()}):ej.DashboardUtil.contains(n.DataType,"datetime",!0)?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:$("#"+this.id+"_proc_"+i).data("ejDateTimePicker").getValue()}):ej.DashboardUtil.contains(n.DataType,"date",!0)?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:$("#"+this.id+"_proc_"+i).data("ejDatePicker").getValue()}):ej.DashboardUtil.contains(n.DataType,"int",!0)||n.DataType==="numeric"?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:parseInt($("#"+this.id+"_proc_"+i).val(),10)}):ej.DashboardUtil.contains(n.DataType,"money",!0)||n.DataType==="float"||n.DataType==="decimal"?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:parseFloat($("#"+this.id+"_proc_"+i).val())}):t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:$("#"+this.id+"_proc_"+i).val()})}return t}return null},n.prototype.setParameter=function(n){var t,i,r;if(n&&n.length>0)for(t=0;t<n.length;t++)i=n[t].Name.substring(1),r={id:this.id+"_proc_"+i,dataType:n[t].DataType},this.checkNullable(r,{isChecked:n[t].IsNull}),n[t].IsNull?$("#"+this.id+"_chk_"+i).data("ejCheckBox").setModel({checked:!0}):($("#"+this.id+"_chk_"+i).data("ejCheckBox").model.checked&&$("#"+this.id+"_chk_"+i).data("ejCheckBox").setModel({checked:!1}),n[t].DataType==="bit"?$("#"+this.id+"_proc_"+i).data("ejCheckBox").setModel({checked:n[t].Value===!0}):ej.DashboardUtil.contains(n[t].DataType,"int",!0)?$("#"+this.id+"_proc_"+i).val(n[t].Value):ej.DashboardUtil.contains(n[t].DataType,"datetime",!0)?$("#"+this.id+"_proc_"+i).data("ejDateTimePicker").setModel({value:n[t].Value}):ej.DashboardUtil.contains(n[t].DataType,"date",!0)?$("#"+this.id+"_proc_"+i).data("ejDatePicker").setModel({value:n[t].Value}):$("#"+this.id+"_proc_"+i).val(n[t].Value))},n.prototype.renderParameter=function(n,t){var i=n.Name.substring(1),o=ej.buildTag("tr","",{height:"36px"}),a=ej.buildTag("td",n.Name,{height:"30px",width:"150px"}),v=ej.buildTag("td",n.DataType,{height:"30px",width:"100px"}),s=ej.buildTag("td","",{height:"30px",width:"100px"}),r=ej.buildTag("td","",{height:"30px",width:"150px"}),h=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_chk_"+i}),u,c,f,e,l;o.append(a).append(v).append(s).append(r);t.append(o);s.append(h);h.ejCheckBox({change:$.proxy(this.checkNullable,this,{id:this.id+"_proc_"+i,dataType:n.DataType}),showRoundedCorner:!0,cssClass:"e-designer-border"});n.DataType==="bit"?(u=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_proc_"+i}),r.append(u),u.ejCheckBox({showRoundedCorner:!0,cssClass:"e-designer-border"})):ej.DashboardUtil.contains(n.DataType,"int",!0)||ej.DashboardUtil.contains("money",n.DataType,!0)||n.DataType==="float"||n.DataType==="numeric"||n.DataType==="decimal"?(c=ej.buildTag("input.e-textbox e-animation e-designer-border","",{height:"25px",width:"140px"},{type:"number",id:this.id+"_proc_"+i}),r.append(c)):ej.DashboardUtil.contains(n.DataType,"datetime",!0)?(f=ej.buildTag("input","",{"font-style":"normal"},{type:"text",id:this.id+"_proc_"+i}),r.append(f),f.ejDateTimePicker({width:"100%",height:"30px",cssClass:"e-designer-border e-dashboarddesigner-widget"})):ej.DashboardUtil.contains(n.DataType,"date",!0)?(e=ej.buildTag("input","",{"font-style":"normal"},{type:"text",id:this.id+"_proc_"+i}),r.append(e),e.ejDatePicker({width:"100%",height:"30px",showRoundedCorner:!0,cssClass:"e-designer-border e-dbrd-designer-relative-picker e-dashboarddesigner-widget"})):(l=ej.buildTag("input.e-textbox e-animation e-designer-border","",{height:"25px",width:"140px"},{type:"text",id:this.id+"_proc_"+i}),r.append(l))},n.prototype.renderProcParameters=function(n){var u=$("#"+this.id+"_proc_parameters"),r,f,t;u.empty();var e=ej.buildTag("tr"),o=ej.buildTag("td","<b>Parameter<\/b>",{height:"30px",width:"150px"}),s=ej.buildTag("td","<b>DataType<\/b>",{height:"30px",width:"100px"}),h=ej.buildTag("td","<b>Null<\/b>",{height:"30px",width:"100px"}),c=ej.buildTag("td","<b>Value<\/b>",{height:"30px",width:"150px"}),i=null;if(this.queryDesigner.columnList.length>0)for(t=0;t<this.queryDesigner.columnList.length;t++)if(this.queryDesigner.tableList[t]===n.id){i=this.queryDesigner.columnList[t];break}if(r=Object.keys(i),f=i[r],r.length>0&&i[r].length>0){for(this.parameters=i,e.append(o).append(s).append(h).append(c),u.append(e),t=0;t<f.length;t++)this.renderParameter(f[t],u);return!0}return this.parameters=null,!1},n.prototype.checkNullable=function(n,t){n.dataType==="bit"?t.isChecked?$("#"+n.id).data("ejCheckBox").disable():$("#"+n.id).data("ejCheckBox").enable():ej.DashboardUtil.contains(n.dataType,"datetime",!0)?t.isChecked?$("#"+n.id).data("ejDateTimePicker").disable():$("#"+n.id).data("ejDateTimePicker").enable():ej.DashboardUtil.contains(n.dataType,"date",!0)?t.isChecked?$("#"+n.id).data("ejDatePicker").disable():$("#"+n.id).data("ejDatePicker").enable():t.isChecked?($("#"+n.id).attr("disabled","disabled"),$("#"+n.id).val(""),$("#"+n.id).val("null")):($("#"+n.id).removeAttr("disabled"),$("#"+n.id).val(""))},n.prototype.showParameterDialog=function(){this.setParameter(this.updatedParameters);$("#"+this.id+"_parameter_dialog").data("ejDialog").open();$("#"+this.id+"_topDiv_parameter_dialog").height()>$("#"+this.id+"_proc_parameters").height()?$("#"+this.id+"_proc_parameters").css("padding","0px 12px"):$("#"+this.id+"_proc_parameters").css("padding","0px 8px");$("#"+this.id+"_topDiv_parameter_dialog").data("ejScroller")!==null&&$("#"+this.id+"_topDiv_parameter_dialog").data("ejScroller").refresh()},n}();window.ej.createObject("ej.DashboardDesignerUtility.StoreParameter",InternalStoreParameter,window);InternalGridReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.rootCss="e-grid-item";this.pluginId="";this.itemName="Grid";this.isMasterByDefault=!1;this.menuSettingsIconVisible=!0;this.gridJson=null;this.selectedColumnIndex=0;this.dataGroupInfo=null;this.isHeaderVisible=!0;this.reportName=null;this.contentContainer=null;this.dataManager=[];this.containerProperties=null;this.selectedKpiColumnIndex=0;this.columnBinding=[];this.kpiGreen="#34B67A";this.kpiWarning="#FBCB43";this.kpiRed="#E57368";this.formatDiv=null;this.filterDiv=null;this.editDiv=null;this.deleteDiv=null;this.dataValues=null;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.isDataEnabled=!0;this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.controlType=ControlType.Grid;this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem");this.rowdataBoundEvent=$.proxy(this.rowDataBoundProcess,this);this.gridColums=[]}return n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"582842ad-45e0-400e-8ab8-3aa5fba71925",widgetName:"Grid",widgetDisplayName:n.itemPanel.widgetTitle.grid,cssClass:"e-widgeticon e-reportdesigner-widget-grid",widgetNameSpace:"ej.DashboardDesignerUtility.GridItem",searchCategory:["grid","relationship"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.grid,description:n.itemPanel.widgetDescription.gridDesc,dataRequirement:n.itemPanel.widgetDataRequirements.gridDataReq}}]})},n.prototype.render=function(n){return this.renderGridItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.gridItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.setWidgetJson(n)},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateGridItemPropertyChange(n,t,i,r)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.getContainerInstance=function(){return this.getGridContainerInstance()},n.prototype.onFieldDragDrop=function(){return!0},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.refresh=function(){this.refreshGrid()},n.prototype.getGridContainerInstance=function(){return this.containerProperties},n.prototype.renderGridReportElement=function(n){try{this.gridJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.gridJson.ContainerSettings.Bounds.Row,column:this.gridJson.ContainerSettings.Bounds.Column,rowSpan:this.gridJson.ContainerSettings.Bounds.RowSpan,colSpan:this.gridJson.ContainerSettings.Bounds.ColumnSpan};this.renderGridElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.gridJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderGridItem=function(){try{this.selectedColumnIndex=0;this.renderGridElement();this.gridJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Grid)}catch(n){this.designPanel.logError({Source:this.gridJson.UniqueName,Error:n,Type:n.name})}},n.prototype.rowDataBoundProcess=function(n){for(var i,h,c,a,g,o,e,y=100,p=-1,t=0;t<n.model.columns.length;t++)if(n.model.columns[t].isKpiColumn&&n.model.columns[t].kpiinformation){i={};switch(KpiCalculationType[n.model.columns[t].kpiinformation.KpiCalculationType]){case KpiCalculationType.ActualValue:case KpiCalculationType.PercentageVariation:case KpiCalculationType.PercentageOfTarget:h=n.data[n.model.columns[t].kpiinformation.ActualColumn.UniqueColumnName];c=n.data[n.model.columns[t].kpiinformation.TargetColumn.UniqueColumnName];i.css=this.ComputeCssforKPI(h-c,n.model.columns[t].kpiinformation.SetBackground,IndicationType[n.model.columns[t].kpiinformation.Indication]===IndicationType.GreaterIsGood);i.backgroundcolor=n.model.columns[t].kpiinformation.SetBackground?this.ComputeBackgroundforKPI(h-c,IndicationType[n.model.columns[t].kpiinformation.Indication]===IndicationType.GreaterIsGood):"";break;case KpiCalculationType.AbsoluteVariation:case KpiCalculationType.ValueAndPercentage:i.css=this.ComputeCssforKPI(n.data[n.model.columns[t].field],n.model.columns[t].kpiinformation.SetBackground,IndicationType[n.model.columns[t].kpiinformation.Indication]===IndicationType.GreaterIsGood);i.backgroundcolor=n.model.columns[t].kpiinformation.SetBackground?this.ComputeBackgroundforKPI(n.data[n.model.columns[t].field],IndicationType[n.model.columns[t].kpiinformation.Indication]===IndicationType.GreaterIsGood):""}switch(KpiCalculationType[n.model.columns[t].kpiinformation.KpiCalculationType]){case KpiCalculationType.AbsoluteVariation:case KpiCalculationType.ActualValue:i.value=ej.DashboardUtil.formattedText(parseFloat(n.data[n.model.columns[t].field]),n.model.columns[t].MeasureFormat.Culture,n.model.columns[t].MeasureFormat.DecimalPoints,DataValueFormat[n.model.columns[t].MeasureFormat.FormatType],n.model.columns[t].MeasureFormat.Prefix,n.model.columns[t].MeasureFormat.Suffix,NumberFormat[n.model.columns[t].MeasureFormat.Unit],!0);break;case KpiCalculationType.PercentageOfTarget:case KpiCalculationType.PercentageVariation:i.value=ej.DashboardUtil.formattedText(Math.abs(n.data[n.model.columns[t].field]/y),n.model.columns[t].MeasureFormat.Culture,n.model.columns[t].MeasureFormat.DecimalPoints,DataValueFormat[DataValueFormat.Percentage],n.model.columns[t].MeasureFormat.Prefix,n.model.columns[t].MeasureFormat.Suffix,NumberFormat[n.model.columns[t].MeasureFormat.Unit],!0);break;case KpiCalculationType.ValueAndPercentage:i.value=ej.DashboardUtil.formattedText(Math.abs(n.data[n.model.columns[t].field])/y,n.model.columns[t].MeasureFormat.Culture,0,DataValueFormat[DataValueFormat.Percentage],"","",NumberFormat.Ones,!0)}switch(KpiCalculationType[n.model.columns[t].kpiinformation.KpiCalculationType]){case KpiCalculationType.AbsoluteVariation:i.value=i.css.toLowerCase().indexOf("up")!==p?"+"+i.value:i.value;break;case KpiCalculationType.ValueAndPercentage:var h=n.data[n.model.columns[t].kpiinformation.ActualColumn.UniqueColumnName],c=n.data[n.model.columns[t].kpiinformation.TargetColumn.UniqueColumnName],f=ej.DashboardUtil.formattedText(h-c,n.model.columns[t].MeasureFormat.Culture,n.model.columns[t].MeasureFormat.DecimalPoints,DataValueFormat[n.model.columns[t].MeasureFormat.FormatType],n.model.columns[t].MeasureFormat.Prefix,n.model.columns[t].MeasureFormat.Suffix,NumberFormat[n.model.columns[t].MeasureFormat.Unit],!0);f=i.css.toLowerCase().indexOf("up")!==p?"+"+f:f;i.value=f===""?f:f+"("+i.value+")"}a=n.model.columns[t].kpiinformation.SetBackground?$("<div>").addClass("e-grid-delta-background e-grid-delta-background-"+i.css):$("<div>").addClass("e-grid-delta e-grid-delta-"+i.css);a.append($("<div>").addClass("img"),$("<div>").html(i.value).addClass("value"));$(n.row).children().eq(t).html("");$($(n.row).children().eq(t)[0]).append(a);n.model.columns[t].kpiinformation.SetBackground&&$(n.row).children().eq(t).css("cssText","background-color :"+i.backgroundcolor+"!important;")}else if(ej.isNullOrUndefined(n.data[n.model.columns[t].field+"color"]))if(ej.isNullOrUndefined(n.data[n.model.columns[t].field+"_Bar"]))n.model.columns[t].IsMeasure&&n.model.columns[t].MeasureFormat&&n.data[n.model.columns[t].field]!=="(Null)"&&(e=ej.DashboardUtil.formattedText(n.data[n.model.columns[t].field],n.model.columns[t].MeasureFormat.Culture,n.model.columns[t].MeasureFormat.DecimalPoints,DataValueFormat[n.model.columns[t].MeasureFormat.FormatType],n.model.columns[t].MeasureFormat.Prefix,n.model.columns[t].MeasureFormat.Suffix,NumberFormat[n.model.columns[t].MeasureFormat.Unit],!0),$(n.row).children().eq(t).html(e));else{var ut=n.data[n.model.columns[t].field+"_Bar"],ft=JSON.parse(ut),u=ft[n.model.columns[t].field.toUpperCase()],s=n.data[n.model.columns[t].field],e=ej.DashboardUtil.formattedText(n.data[n.model.columns[t].field],n.model.columns[t].MeasureFormat.Culture,n.model.columns[t].MeasureFormat.DecimalPoints,DataValueFormat[n.model.columns[t].MeasureFormat.FormatType],n.model.columns[t].MeasureFormat.Prefix,n.model.columns[t].MeasureFormat.Suffix,NumberFormat[n.model.columns[t].MeasureFormat.Unit],!0);if(isNaN(parseFloat(s)))return;g=$(n.row).children().eq(t).parents("tbody").children().index($(n.row).children().eq(t).parent());o=ej.buildTag("div","",{height:"15px",width:"auto"},{id:this.reportName+"_"+n.model.columns[t].field+"_gridbar_"+g,title:e});$(n.row).children().eq(t).html("").append(o);parseFloat(s)>=0?(o.ejProgressBar({minvalue:u.Min>0?0:u.Min,maxValue:parseFloat(s)===0&&u.Min<0?-1*u.Min:u.Max,value:parseFloat(s).toFixed(2)}),$(o).children().css({background:"#00A551"})):(o.ejProgressBar({minvalue:u.Max<0?-1*u.Max:0,maxValue:-1*u.Min,value:-1*parseFloat(s).toFixed(2),enableRTL:!0}),$(o).children().css({background:"#E04946"}))}else{var nt=n.data[n.model.columns[t].field+"color"],r=JSON.parse(nt),e=null;if(this.browserInfo=ej.browserInfo(),n.model.columns[t].IsMeasure&&(e=ej.DashboardUtil.formattedText(n.data[n.model.columns[t].field],n.model.columns[t].MeasureFormat.Culture,n.model.columns[t].MeasureFormat.DecimalPoints,DataValueFormat[n.model.columns[t].MeasureFormat.FormatType],n.model.columns[t].MeasureFormat.Prefix,n.model.columns[t].MeasureFormat.Suffix,NumberFormat[n.model.columns[t].MeasureFormat.Unit],!0)),r.FormatType===ConditionalFormatType[ConditionalFormatType.Column]?$(n.row).children().eq(t).html(n.model.columns[t].IsMeasure?e:n.data[n.model.columns[t].field]):$(n.row).children().eq(t).html(n.model.columns[t].IsMeasure?e:n.data[n.model.columns[t].field]),r.Color!==""){var w=r.IsStrikethrough?"line-through":"",b=r.IsUnderline?"underline":"",k=r.IsBold?"bold":"normal",d=r.IsItalic?"italic":"normal",l="";if(this.browserInfo.name==="msie"){var v=r.Color.replace("#",""),tt=parseInt(v.substring(0,2),16),it=parseInt(v.substring(2,4),16),rt=parseInt(v.substring(4,6),16);l="rgba("+tt+","+it+","+rt+","+.6+")"}else l=r.Color;r.FormatType===ConditionalFormatType[ConditionalFormatType.Column]?$(n.row).children().eq(t).css("cssText","text-align:"+(n.model.columns[t].IsMeasure?"right":"left")+"; color:"+r.TextColor+"!important; background-color:"+l+" !important; text-decoration: "+w+" "+b+"; font-style:"+d+";font-weight: "+k+";"):$(n.row).css({color:r.TextColor,"background-color":l,"text-decoration":w+" "+b,"font-style":d,"font-weight":k})}}},n.prototype.queryCellInfoProcess=function(n){var t=this;ej.isNullOrUndefined(this.gridJson.UrlLink)||!this.gridJson.UrlLink.EnableLink||ej.isNullOrUndefined(this.gridJson.UrlLink.GridUrlType)||this.gridJson.UrlLink.GridUrlType.toString()!==UrlLinkType[UrlLinkType.Column]||this.gridJson.UrlLink.ColumnUrlDetails.filter(function(i){return t.updateCellValuesWithLink(i.CaptionName,i.UniqueColumnName,i.UrlLink,n)})},n.prototype.updateCellValuesWithLink=function(n,t,i,r){if(t===r.column.field&&!ej.isNullOrUndefined(i)&&i!==""){var u=$(r.cell).html(),f=!ej.isNullOrUndefined(r.text)&&r.text!==""?this.getHyperlinkUrl(i,u,n):i;$(r.cell).html("<a href ='"+ej.DashboardUtil.getInstance().addhttp(f)+"' target='_blank'>"+u+"<\/a>")}},n.prototype.refreshGrid=function(){var n=this.tableElement.data("ejGrid");ej.isNullOrUndefined(n)||n.refreshContent(!0)},n.prototype.getHyperlinkUrl=function(n,t,i){var f=new RegExp(/{{:(.*?)}}/igm),u=n.match(f),r;if(!ej.isNullOrUndefined(u))for(r=0;r<u.length;r++)if(u[r].indexOf(i)!==-1){n=n.replaceAll(u[r],t);break}return n},n.prototype.rowSelectionProcess=function(n){var e=this,u,f,i,r,t;if(!ej.isNullOrUndefined(this.gridJson)&&(u=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),f=ej.DashboardUtil.getInstance().getSourceData(u.dataGroupInfo,!1),this.gridJson.UrlLink.EnableLink&&!ej.isNullOrUndefined(this.gridJson.UrlLink.GridUrlType)&&this.gridJson.UrlLink.GridUrlType.toString()===UrlLinkType[UrlLinkType.Row]&&!ej.isNullOrUndefined(this.gridJson.UrlLink.UrlPath)&&this.gridJson.UrlLink.UrlPath!=="")){for(i=f.filter(function(n){return e.gridJson.UrlLink.PassingParameters.indexOf(n.Value)!==-1}),r=this.gridJson.UrlLink.UrlPath,t=0;t<i.length;t++)r=this.getHyperlinkUrl(r,n.data[i[t].Id],i[t].Value);window.open(ej.DashboardUtil.getInstance().addhttp(r),"_blank")}},n.prototype.ComputeCssforKPI=function(n,t,i){var u=0,r=parseFloat(n);return(r.toString()==="Infinity"&&(r=100),isNaN(r))?"":r>u?t?"up":i?"greenUp":"redUp":r===u?"warning":t?"down":i?"redDown":"greenDown"},n.prototype.ComputeBackgroundforKPI=function(n,t){var r=0,i=parseFloat(n);return(i.toString()==="Infinity"&&(i=100),isNaN(i))?"":i>r?t?this.kpiGreen:this.kpiRed:i===r?this.kpiWarning:t?this.kpiRed:this.kpiGreen},n.prototype.renderGridElement=function(){this.gridItem=ej.buildTag("div.e-griditem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"gridItem"+this.gridJson.UniqueName});this.tableElement=ej.buildTag("div.e-reportdesigner-grid-table","",{width:"100%",height:"100%","font-size":"10pt","background-color":"white"},{id:this.designId+"tableElement"+this.gridJson.UniqueName,cellspacing:"0",cellpadding:"0"});this.pagerTemplate='<script id="'+this.tableElement.attr("id")+'_pagerTemplate" type="text/x-jsrender"><div class="dashboard_grid_pagerAlignment pager_marginClass"><input id ="'+this.tableElement.attr("id")+'_currentPage" type="text" class="dashboard_grid_pagerInput dashboard_grid_pagerAlignment"><\/input><\/div><div class="totalPages dashboard_grid_pagerAlignment"><span class="emptyText dashboard_grid_pagerAlignment pager_marginClass"><\/span><span class="pageCount dashboard_grid_pagerAlignment pager_marginClass"><\/span><span  class="rowCount dashboard_grid_pagerAlignment"><\/span><\/div><div class ="pageNavigationContainer" style="padding-top:2px" ><div><div class="e-prev e-icon e-arrowheadleft-2x e-prevpagedisabled e-disable dashboard_grid_pagerAlignment" title="Go to previous page"><\/div><\/div><div><div class="e-nextpage e-icon e-arrowheadright-2x e-default dashboard_grid_pagerAlignment" title="Go to next page"><\/div><\/div><\/div><\/script>';this.gridItem.append(this.tableElement);this.contentContainer.append(this.gridItem);this.controlContainer.data("widgetInstance",this);this.dataManager=[{ItemId:"i1",ItemName:"Item1"},{ItemId:"i2",ItemName:"Item2"},{ItemId:"i3",ItemName:"Item3"},{ItemId:"i4",ItemName:"Item4"},{ItemId:"i5",ItemName:"Item5"},{ItemId:"i6",ItemName:"Item6"},{ItemId:"i7",ItemName:"Item7"},{ItemId:"i8",ItemName:"Item8"}];this.tableElement.ejGrid({dataSource:this.dataManager,allowSorting:this.gridJson.AllowSorting,gridLines:this.getGridLineType(),scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0},rowDataBound:this.rowdataBoundEvent,queryCellInfo:$.proxy(this.queryCellInfoProcess,this),rowSelected:$.proxy(this.rowSelectionProcess,this),allowScrolling:!0,allowResizing:!0,enableAltRow:!1,allowPaging:this.gridJson.AllowPaging,pageSettings:this.gridJson.AllowPaging?{pageSize:10,enableTemplates:!0,template:this.pagerTemplate}:{pageSize:50},actionComplete:$.proxy(this.pagingDetails,this)})},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions"}),n},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Column",CategoryType:CategoryType.None,Visibility:Visibility.Show}),n.push({Name:"HiddenColumn",DisplayName:"Hidden Column",CategoryType:CategoryType.None,Visibility:Visibility.Show}),n.push({Name:"KPIColumn",CategoryType:CategoryType.None,Visibility:Visibility.hidden}),n},n.prototype.setWidgetJson=function(n){this.gridJson=n},n.prototype.isFieldValid=function(){return!0},n.prototype.updateReportItemData=function(n){this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.gridItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");(ej.isNullOrUndefined(this.gridJson.HeaderSettings)||!ej.isNullOrUndefined(this.gridJson.HeaderSettings)&&(ej.isNullOrUndefined(this.gridJson.HeaderSettings.Foreground)||ej.isNullOrUndefined(this.gridJson.HeaderSettings.Background)))&&(this.gridJson.HeaderSettings=new HeaderSettings);var t=this.tableElement.data("ejGrid"),i;ej.isNullOrUndefined(t)||(ej.isNullOrUndefined(n.Error)||n.Error?ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):(this.getColumnNamesCollection(n),n.noDataAvailable?(this.gridItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block")):ej.isNullOrUndefined(n)||n.data==="[]"||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1||!(this.dataGroupInfo.Values[0].Values.length>0||this.dataGroupInfo.Values[2].Values.length>0)?(n.data==="[]"&&n.columnBindings==="{}"||this.dataGroupInfo.Values[0].Values.length===0)&&(i=[{ItemId:"i1",ItemName:"Item1"},{ItemId:"i2",ItemName:"Item2"},{ItemId:"i3",ItemName:"Item3"},{ItemId:"i4",ItemName:"Item4"},{ItemId:"i5",ItemName:"Item5"},{ItemId:"i6",ItemName:"Item6"},{ItemId:"i7",ItemName:"Item7"},{ItemId:"i8",ItemName:"Item8"}],t.model.columns=[{field:"ItemId",headerText:"ItemID"},{field:"ItemName",headerText:"ItemName"}]):(i=JSON.parse(n.data),this.columnBinding=JSON.parse(n.columnBindings),this.validateKPIDataValueSet(this.columnBinding),this.updateKpiColumn(),this.generateColumns(this.columnBinding),t.model.columns=this.gridColums,this.setPropertyElement("KPIColumns","ColumnSettings",this.getKPIDataValueSet()))),ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.gridJson,this.dataGroupInfo),this.updateAllowResizeToFit(this.gridJson.FitContent),t.option("dataSource",i),t.getScrollObject().refresh(),t.option("allowFiltering",this.gridJson.AllowFilter),t.option("allowSorting",this.gridJson.AllowSorting),this.updateGridSize(),this.propertyPanel.updateCategoryVisibility("Grid","ColumnSettings",!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&this.dataGroupInfo.Values[0].Values.length>0||this.getKPIVisibility()),this.propertyPanel.updateItemVisibility("Grid","ColumnSettings","ColumnOptions",!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&this.dataGroupInfo.Values[0].Values.length>0||!ej.isNullOrUndefined(this.dataGroupInfo.Values[2])&&this.dataGroupInfo.Values[2].Values.length>0),this.propertyPanel.updateItemVisibility("Grid","ColumnSettings","KPIColumns",this.getKPIVisibility()),ej.DashboardUtil.updateAction("Grid","Link","Link"))},n.prototype.updateKpiColumn=function(){for(var n,t,i,r,u,f,e=0;e<this.dataGroupInfo.Values[2].Values.length;e++)for(n=this.dataGroupInfo.Values[2].Values[e],t=0;t<this.dataGroupInfo.Values.length;t++){for(i=0;i<this.dataGroupInfo.Values[t].Values.length;i++)this.dataGroupInfo.Values[t].Values[i].UniqueColumnName===n.KPIColumnInfo.ActualColumn.UniqueColumnName&&(u=this.dataGroupInfo.Values[t].Values[i].DataField,n.KPIColumnInfo.ActualColumn.CaptionName=u),this.dataGroupInfo.Values[t].Values[i].UniqueColumnName===n.KPIColumnInfo.TargetColumn.UniqueColumnName&&(f=this.dataGroupInfo.Values[t].Values[i].DataField,n.KPIColumnInfo.TargetColumn.CaptionName=f);r=u+this.designer.locale.kpi.versus+f;n.KPIColumnInfo.DisplayColumnName=r;n.DataField=r;n.Field=r;n.Value=r}},n.prototype.getKPIVisibility=function(){var i=!1,n,t;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values[0]))for(n=0;n<this.dataGroupInfo.Values[0].Values.length;n++)this.dataGroupInfo.Values[0].Values[n].FieldType==="Measures"&&this.dataGroupInfo.Values[0].Values[n].SummaryType!==SummaryType[SummaryType.NONE]&&(i=!0);if(!ej.isNullOrUndefined(this.dataGroupInfo.Values[1]))for(t=0;t<this.dataGroupInfo.Values[1].Values.length;t++)this.dataGroupInfo.Values[1].Values[t].FieldType==="Measures"&&this.dataGroupInfo.Values[0].Values[t].SummaryType!==SummaryType[SummaryType.NONE]&&(i=!0);return i},n.prototype.getColumnNamesCollection=function(n){var r=null,u,i,f,t;if(ej.isNullOrUndefined(n.columnBindings)||(r=JSON.parse(n.columnBindings)),u=[],this.dataGroupInfo.Values.length>0)for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)i=this.getDisplayColumnSettingsItem(this.dataGroupInfo.Values[0].Values[t].UniqueColumnName),ej.isNullOrUndefined(i)?this.gridJson.DisplayNames.push({DisplayName:r[this.dataGroupInfo.Values[0].Values[t].UniqueColumnName],UniqueColumnName:this.dataGroupInfo.Values[0].Values[t].UniqueColumnName,IsEdited:!1,CaptionName:this.dataGroupInfo.Values[0].Values[t].DataField}):i.IsEdited||(i.DisplayName=r[this.dataGroupInfo.Values[0].Values[t].UniqueColumnName]),u.push(this.dataGroupInfo.Values[0].Values[t].UniqueColumnName);if(this.dataGroupInfo.Values.length>1)for(t=0;t<this.dataGroupInfo.Values[2].Values.length;t++)i=this.getDisplayColumnSettingsItem(this.dataGroupInfo.Values[2].Values[t].UniqueColumnName),ej.isNullOrUndefined(i)?this.gridJson.DisplayNames.push({DisplayName:r[this.dataGroupInfo.Values[2].Values[t].UniqueColumnName],UniqueColumnName:this.dataGroupInfo.Values[2].Values[t].UniqueColumnName,IsEdited:!1,CaptionName:this.dataGroupInfo.Values[2].Values[t].DataField}):i.IsEdited||(i.DisplayName=r[this.dataGroupInfo.Values[2].Values[t].UniqueColumnName]),u.push(this.dataGroupInfo.Values[2].Values[t].UniqueColumnName);if(this.gridJson.DisplayNames.length!==u.length){for(f=[],t=0;t<this.gridJson.DisplayNames.length;t++)u.indexOf(this.gridJson.DisplayNames[t].UniqueColumnName)===-1&&f.push(t);for(t=f.length-1;t>=0;t--)this.gridJson.DisplayNames.splice(f[t],1)}},n.prototype.getDisplayColumnSettingsItem=function(n){for(var t=0;t<this.gridJson.DisplayNames.length;t++)if(this.gridJson.DisplayNames[t].UniqueColumnName===n)return this.gridJson.DisplayNames[t];return null},n.prototype.updateColumnName=function(n){this.gridJson.DisplayNames=n;this.generateColumns(this.columnBinding);var t=this.tableElement.data("ejGrid");t.model.columns=this.gridColums;this.updateAllowResizeToFit(this.gridJson.FitContent);t.refreshContent(!0);ej.DashboardDesignerUtility.Serialization.notifyChange();ejDashboardDesigner.editManager.setMergeAction(!1)},n.prototype.generateColumns=function(n){var u,i,f,r,t;if(this.gridColums=[],!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0){for(u=this.dataGroupInfo.Values[0].Values,i=0;i<u.length;i++)t={},t.field=u[i].UniqueColumnName,t.headerText=this.GetColumnDisplaytext(u[i].UniqueColumnName),t.type=u[i].FieldType==="Measures"?"Number":u[i].FieldType==="Date"?"date":"string",t.dateFormat=u[i].DateTimeFormat,t.IsMeasure=u[i].FieldType==="Measures",t.textAlign=t.IsMeasure?ej.TextAlign.Right:ej.TextAlign.Left,t.width=100,t.tooltip="{{:value}}",t.clipMode="ellipsiswithtooltip",t.MeasureFormat=t.IsMeasure?u[i].MeasureFormatting:null,this.gridColums.push(t);for(f=this.getKPIDataValueSet(),r=0;r<f.length;r++)t={},t.field=f[r].UniqueColumnName,t.headerText=this.GetColumnDisplaytext(f[r].UniqueColumnName),t.type=f[r].KPIColumnInfo.KpiCalculationType!==KpiCalculationType.ValueAndPercentage?"Number":"string",t.IsMeasure=t.type==="Number",t.textAlign=t.IsMeasure?ej.TextAlign.Right:ej.TextAlign.Left,t.width=100,t.clipMode="ellipsiswithtooltip",t.MeasureFormat=t.IsMeasure?f[r].MeasureFormatting:null,t.isKpiColumn=!0,f[r].KPIColumnInfo.DisplayExpression=this.getKpiExpression(n,f[r].KPIColumnInfo),t.kpiinformation=f[r].KPIColumnInfo,this.gridColums.push(t)}},n.prototype.getKpiExpression=function(n,t){var i=ejDashboardDesigner.getInstance("KPIWindow");return i.getExpression(t.KpiCalculationType,n[t.ActualColumn.UniqueColumnName],n[t.TargetColumn.UniqueColumnName])},n.prototype.GetColumnDisplaytext=function(n){for(var i="",t=0;t<this.gridJson.DisplayNames.length;t++)if(this.gridJson.DisplayNames[t].UniqueColumnName===n){i=this.gridJson.DisplayNames[t].DisplayName;break}else i=n;return i},n.prototype.updateDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.updatePropertyData=function(){},n.prototype.updateGridItemPropertyChange=function(n,t,i,r){var o,s=!1,u,f,h,e;switch(n){case"Name":this.gridJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.gridJson);break;case"Description":this.propertyPanel.setDescription(this.gridJson,i);break;case"HorizontalGridLine":this.updateHorizontalGridLine(i);break;case"VerticalGridLine":this.updateVerticalGridLine(i);break;case"AllowPaging":this.updateAllowPaging(i);break;case"AllowResizeToFit":this.updateAllowResizeToFit(i);break;case"AllowSorting":this.updateAllowSorting(i);break;case"AllowFiltering":this.updateAllowFiltering(i);break;case"EnableDataGrouping":this.updateEnableDataGrouping(i);break;case"ItemLink":this.UpdateLink(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.gridJson,i);break;case"HeaderForeground":this.UpdateHeaderForeground(i);break;case"HeaderBackground":this.UpdateHeaderBackground(i);break;default:s=!0}if(ej.isNullOrUndefined(o)||(t=o),!s){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)h=u[f],h.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"Grid",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-grid-item",this.designer._id+"_"+this.gridJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.UpdateLink=function(n){this.gridJson.UrlLink.EnableLink=n.EnableLink;this.gridJson.UrlLink.LinkType=n.LinkType;this.gridJson.UrlLink.GridUrlType=n.GridUrlType;n.GridUrlType==="Column"?(this.gridJson.UrlLink.PassingParameters=[],this.gridJson.UrlLink.UrlPath="",this.gridJson.UrlLink.ColumnUrlDetails=this.UpdateColumnUrlDetails(n),this.gridJson.UrlLink.ColumnUrlDetails=this.UpdateColumnUrlDetails(n)):(this.gridJson.UrlLink.ColumnUrlDetails=[],this.gridJson.UrlLink.PassingParameters=n.PassingParameters,this.gridJson.UrlLink.UrlPath=n.UrlPath)},n.prototype.UpdateHeaderBackground=function(n){var t,i;this.gridJson.HeaderSettings.Background="#FF"+n.substring(1);t=this.tableElement.data("ejGrid");ej.isNullOrUndefined(t)||(i=t.getHeaderTable(),i.find(".e-columnheader")[0].style.background="#"+this.gridJson.HeaderSettings.Background.substring(3))},n.prototype.UpdateHeaderForeground=function(n){var i,u,r,t;if(this.gridJson.HeaderSettings.Foreground="#FF"+n.substring(1),i=this.tableElement.data("ejGrid"),!ej.isNullOrUndefined(i))for(u=i.getHeaderTable(),r=u.find(".e-headercelldiv"),t=0;t<r.length;t++)r[t].style.color="#"+this.gridJson.HeaderSettings.Foreground.substring(3)},n.prototype.UpdateColumnUrlDetails=function(n){for(var i,r=[],t=0;t<n.ColumnUrlDetails.length;t++)i=new ColumnUrl,i.CaptionName=n.ColumnUrlDetails[t].CaptionName,i.UniqueColumnName=n.ColumnUrlDetails[t].UniqueColumnName,i.UrlLink=n.ColumnUrlDetails[t].UrlLink,r.push(i);return r},n.prototype.updateHorizontalGridLine=function(n){this.gridJson.HorizontalGridLine=n;var t=this.tableElement.data("ejGrid");t.option("gridLines",this.getGridLineType())},n.prototype.updateVerticalGridLine=function(n){this.gridJson.VerticalGridLine=n;var t=this.tableElement.data("ejGrid");t.option("gridLines",this.getGridLineType())},n.prototype.getGridLineType=function(){return(this.gridJson.HorizontalGridLine&&this.gridJson.VerticalGridLine?ej.Grid.GridLines.Both:this.gridJson.HorizontalGridLine?ej.Grid.GridLines.Horizontal:this.gridJson.VerticalGridLine?ej.Grid.GridLines.Vertical:ej.Grid.GridLines.None).toString()},n.prototype.updateAllowPaging=function(n){this.gridJson.AllowPaging=n;var t=this.tableElement.data("ejGrid");t.option("allowPaging",n);this.gridJson.AllowPaging?(t.option({pageSettings:{pageSize:10,enableTemplates:!0,template:this.pagerTemplate}}),t.option({scrollSettings:{height:this.gridItem.height()-this.gridItem.find(".e-columnheader").height()-this.gridItem.find(".e-pager").height()-this.gridItem.find(".e-filterbar").height()}})):t.option({scrollSettings:{height:this.gridItem.height()-this.gridItem.find(".e-columnheader").height()-this.gridItem.find(".e-filterbar").height()}})},n.prototype.pagingDetails=function(n){var t=this.tableElement.data("ejGrid"),i=$(".e-pagercontainer"),u,f,r;if(!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(this.gridJson.HeaderSettings)&&!ej.isNullOrUndefined(this.gridJson.HeaderSettings.Foreground)&&!ej.isNullOrUndefined(this.gridJson.HeaderSettings.Background))for(u=t.getHeaderTable(),f=u.find(".e-headercelldiv"),u.find(".e-columnheader")[0].style.background="#"+this.gridJson.HeaderSettings.Background.substring(3),r=0;r<f.length;r++)f[r].style.color="#"+this.gridJson.HeaderSettings.Foreground.substring(3);!ej.isNullOrUndefined(t)&&t.model.allowPaging&&(i.find("input").val(t.model.pageSettings.currentPage),this.tableElement.find(".totalPages").find(".emptyText").text(this.designer.locale.gridPagingContent.ofContentText),this.tableElement.find(".totalPages").find(".pageCount").text(t.model.pageSettings.totalPages+" "+this.designer.locale.gridPagingContent.pagesContentText),this.tableElement.find(".totalPages").find(".rowCount").text(" - "+t.model.pageSettings.totalRecordsCount+" "+this.designer.locale.gridPagingContent.itemsContentText),i.find("input").val("1"),i.find("input").bind("keydown",$.proxy(this.onTextBoxKeydown,this)),t.model.pageSettings.currentPage===t.model.pageSettings.totalPages?this.tableElement.find(".e-nextpage").addClass("e-nextpagedisabled").removeClass("e-nextpage"):this.tableElement.find(".e-nextpagedisabled").addClass("e-nextpage").removeClass("e-nextpagedisabled"),n.requestType==="paging"&&(t.model.pageSettings.currentPage===1?this.tableElement.find(".e-prevpage").addClass("e-prevpagedisabled e-disable").removeClass("e-prevpage"):this.tableElement.find(".e-prevpagedisabled").addClass("e-prevpage").removeClass("e-prevpagedisabled e-disable"),i.find("input").val(t.model.pageSettings.currentPage)))},n.prototype.onTextBoxKeydown=function(n){var r=this.tableElement.data("ejGrid"),u=$(".e-pagercontainer");if(n.keyCode>=65)return!1;if(n.keyCode===13){var f=n.currentTarget.getAttribute("id"),e=f.replace("_currentPage",""),i=$("#"+e).data("ejGrid"),t=parseInt($(n.currentTarget).val(),10);return t>i.model.pageSettings.totalPages&&(t=i.model.pageSettings.totalPages),t<=0&&(t=1),isNaN(t)?(t=i.model.pageSettings.currentPage,u.find("input").val(r.model.pageSettings.currentPage)):i.gotoPage(t),!1}return!0},n.prototype.updateAllowResizeToFit=function(n){var i,u;this.gridJson.FitContent=n;var t=this.tableElement.data("ejGrid"),r=t.model.columns,f=[];if(n){for(i=0;i<r.length;i++)delete r[i].width,t.model.columns[i]=r[i],t.model.columns[i].visible=!0;t.columnsWidthCollection=[]}else{for(u=0;u<r.length;u++)f.push("100"),t.model.columns=r,t.model.columns[u].width=100,t.model.columns[u].visible=!0;t.columnsWidthCollection=f}t.option("allowResizeToFit",n);n||t.setWidthToColumns();t.getScrollObject().refresh()},n.prototype.updateAllowFiltering=function(n){this.gridJson.AllowFilter=n;var t=this.tableElement.data("ejGrid");t.option("allowFiltering",n);t.option({scrollSettings:{height:this.gridItem.height()-this.gridItem.find(".e-columnheader").height()-this.gridItem.find(".e-pager").height()-this.gridItem.find(".e-filterbar").height()}})},n.prototype.updateAllowSorting=function(n){this.gridJson.AllowSorting=n;var t=this.tableElement.data("ejGrid");t.option("allowSorting",n)},n.prototype.updateEnableDataGrouping=function(n){var t;if(this.gridJson.EnableDataGrouping=n,this.gridJson.EnableDataGrouping===!1&&this.dataGroupInfo.Values.length>0)for(t=0;t<this.dataGroupInfo.Values.length;t++)this.dataGroupInfo.Values[t].Values.length>0&&(this.dataGroupInfo.Values[t].Values[t].SummaryType="None");else for(t=0;t<this.dataGroupInfo.Values.length;t++)this.dataGroupInfo.Values[t].Values.length>0&&(this.dataGroupInfo.Values[t].Values[t].SummaryType="Sum");this.dataConfiguration.postDraggedFields()},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),n,t,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=t;this.propertyPanel.updatePropertyValue(u,"Grid",i);this.propertyPanel.canUpdate=!0},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.gridJson,CommandAction.ItemMove,"updatePosition","e-grid-item")},n.prototype.updateWidgetSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.gridJson,CommandAction.ItemResize,"updateSize","e-grid-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):this.updateGridSize()},n.prototype.updateItemSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.gridJson,CommandAction.ItemResize,"updateItemSize","e-grid-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):this.updateGridSize()},n.prototype.updateGridSize=function(){var n,t,i;for(this.tableElement.css({width:this.gridItem.width(),height:this.gridItem.height()}),n=this.tableElement.find(".e-table"),t=0;t<n.length;t++)n.css("width","100%");i=this.tableElement.data("ejGrid");i.option({scrollSettings:{width:this.gridItem.width(),height:this.gridItem.height()-this.gridItem.find(".e-columnheader").height()-this.gridItem.find(".e-pager").height()-this.gridItem.find(".e-filterbar").height()}})},n.prototype.getPropertyGridItems=function(){var n=new ej.DashboardDesignerUtility.PropertyGridItem(this.gridJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.gridJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.gridJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.gridJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.gridJson.ContainerSettings.Description,n.propertyGridItems.Type="Grid",n.linkingProperty.Items[0].enableMode=LinkEnableMode.Both,n.linkingProperty.Items[0].value=ej.DashboardUtil.getInstance().useExistingLinks(this.gridJson),n.filterSettingsProperty.Items.unshift({name:"AllowFiltering",displayName:"Allow Filter",value:this.gridJson.AllowFilter,itemType:"bool"}),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"AllowSorting",displayName:"Allow Sorting",value:this.gridJson.AllowSorting,itemType:"bool"},{name:"AllowPaging",displayName:"Allow Paging",value:this.gridJson.AllowPaging,itemType:"bool"},{name:"AllowResizeToFit",displayName:"Fit To Content",value:this.gridJson.FitContent,itemType:"bool"},{name:"HorizontalGridLine",displayName:"Horizontal Grid Lines",value:this.gridJson.HorizontalGridLine,itemType:"bool"},{name:"VerticalGridLine",displayName:"Vertical Grid Lines",value:this.gridJson.VerticalGridLine,itemType:"bool"},]},{CategoryName:"Header Settings",Items:[{name:"HeaderForeground",displayName:"Foreground",value:"#"+this.gridJson.HeaderSettings.Foreground.substring(3),itemType:"color"},{name:"HeaderBackground",displayName:"Background",value:"#"+this.gridJson.HeaderSettings.Background.substring(3),itemType:"color"}]},n.filterSettingsProperty,{CategoryName:"Column Settings",IsVisible:this.dataGroupInfo.Values.length>0?!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&this.dataGroupInfo.Values[0].Values.length>0||this.getKPIVisibility():!1,Items:[{name:"ColumnOptions",isVisible:this.dataGroupInfo.Values.length>0?!ej.isNullOrUndefined(this.dataGroupInfo.Values[0])&&this.dataGroupInfo.Values[0].Values.length>0||!ej.isNullOrUndefined(this.dataGroupInfo.Values[2])&&this.dataGroupInfo.Values[2].Values.length>0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderColumnOptions"},{name:"KPIColumns",isVisible:this.dataGroupInfo.Values.length>0?this.getKPIVisibility():!1,itemType:"object",callbackInstance:this,callbackMethod:"renderKPIColumns"},]},n.linkingProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.onEditColumnNames=function(){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);ejDashboardDesigner.getInstance("EditColumnNames").openColumnNameSettings(n,"updateColumnName",n.gridJson.DisplayNames)},n.prototype.renderColumnOptions=function(n,t,i){if(ej.isNullOrUndefined(n))this.propertyPanel.updateItemVisibility("Grid","ColumnSettings","ColumnOptions",i.isVisible);else{var r=ej.buildTag("div","",{width:"435px","margin-top":"3px","margin-left":"15px",border:"0px solid","border-color":"red",display:ej.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designId+"_"+t+"_"+i.name+"_container"}),u=ej.buildTag("button.e-dbrd-hand-cursor","Edit Column Names",{},{id:this.designId+"_"+t+"_"+i.name+"_EditColumnNames"}),f=ej.buildTag("button.e-dbrd-hand-cursor","Template",{},{id:this.designId+"_"+t+"_"+i.name+"_Template",title:"Template"});r.append(u);r.append(f);n.append(r);f.ejButton({width:"150px",height:"28px",showRoundedCorner:!1,size:"small",click:$.proxy(this.onGridTemplateClick,this,t,i),cssClass:"e-designer-click e-designer-button e-reportdesigner-previewbtn"});f.css({"background-color":"#0C8BE2","border-color":"#0C8BE2",color:"white",left:"20px",position:"relative"});u.ejButton({width:"150px",height:"28px",showRoundedCorner:!1,size:"small",click:$.proxy(this.onEditColumnNames,this,i),cssClass:"e-designer-click e-designer-button e-reportdesigner-previewbtn"});u.css({"background-color":"#0C8BE2","border-color":"#0C8BE2",color:"white"})}},n.prototype.validateGridTemplate=function(n,t){for(var r,i=0;i<t.gridJson.GridTemplate.length;i++)for(r=0;r<t.gridJson.GridTemplate[i].ConditionalFormatting.length;r++)t.gridJson.GridTemplate[i].ConditionalFormatting[r].TargetMeasureColumn.UniqueColumnName===n.UniqueColumnName&&(t.gridJson.GridTemplate[i].ConditionalFormatting[r].ColumnName=t.gridJson.GridTemplate[i].ConditionalFormatting[r].TargetMeasureColumn.DisplayName=n.Value);for(i=0;i<t.gridJson.GridTemplate.length;i++)if(t.gridJson.GridTemplate[i].Columns.UniqueColumnName===n.UniqueColumnName)return t.gridJson.GridTemplate[i].Columns.DisplayName=n.Value,!0;return!1},n.prototype.resetGridTemplates=function(n,t){for(var u,r,f=JSON.parse(JSON.stringify(t.gridJson.GridTemplate)),i=0;i<f.length;i++){for(u=!1,r=0;r<n.length;r++)if(f[i].Columns.UniqueColumnName===n[r].UniqueColumnName){u=!0;break}u||t.gridJson.GridTemplate.splice(i,1)}},n.prototype.updateGridTemplates=function(n){this.resetGridTemplates(n.dataGroupInfo.Values[0].Values,n);for(var t=0;t<n.dataGroupInfo.Values[0].Values.length;t++)this.validateGridTemplate(n.dataGroupInfo.Values[0].Values[t],n)||n.dataGroupInfo.Values[0].Values[t].DateTimeFormat!==DateAndTimeFormat.None||n.gridJson.GridTemplate.push({Columns:{ColumnType:n.dataGroupInfo.Values[0].Values[t].FieldType,UniqueColumnName:n.dataGroupInfo.Values[0].Values[t].UniqueColumnName,DisplayName:n.dataGroupInfo.Values[0].Values[t].Value},DisplayType:DisplayType.Value,ConditionalFormatting:[]});return n.gridJson.GridTemplate},n.prototype.onGridTemplateClick=function(){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);this.updateGridTemplates(n);ejDashboardDesigner.getInstance("GridTemplate").openGridTemplate(this,"updateGridTemplate",n.gridJson.GridTemplate)},n.prototype.updateGridTemplate=function(n){var t=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);t.gridJson.GridTemplate=n;ej.DashboardDesignerUtility.Serialization.notifyChange();this.dataConfiguration.postDraggedFields()},n.prototype.renderKPIColumns=function(n,t,i){var p,w,nt,e,o;if(ej.isNullOrUndefined(n))o=$("#"+this.designId+"_kpi_gridCol").data("ejGrid"),ej.isNullOrUndefined(o)||(o.setModel({dataSource:this.getKPIDataValueSet()}),this.propertyPanel.updateItemVisibility("Grid","ColumnSettings","KPIColumns",i.isVisible),this.disableToolbarItems(!0));else{var u=ej.buildTag("div","",{"padding-right":"10px","padding-left":"10px","padding-top":"10px","padding-bottom":"10px",width:"450px",display:ej.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.designId+"_"+t+"_"+i.name+"_container"}),s=ej.buildTag("div","",{float:"left"},{id:this.designId+"_kpiLeft"}),h=ej.buildTag("table.e-designer-table","",{},{unselectable:"on"}),c=ej.buildTag("tr","",{display:"block"}),l=ej.buildTag("td","",{}),tt=ej.buildTag("div","KPI Columns",{"font-size":"14px","font-color":"#303541","font-weight":"600",float:"left"},{type:"label"}),a=ej.buildTag("div","",{"padding-right":"10px","padding-top":"3px",float:"right"},{id:this.designId+"_kpiRight"}),v=ej.buildTag("table.e-designer-table","",{"padding-right":"5px"},{unselectable:"on"}),y=ej.buildTag("tr","",{display:"block"}),r=ej.buildTag("td.e-toolbar","",{border:"none",display:"flex"});this.filterDiv=ej.buildTag("div.e-dashboarddesigner-grid-toolbar","",{"margin-left":"5px"},{id:this.designId+"_kpi_filterIcon"});p=ej.buildTag("span.e-reportdesigner-configuration-parameters","",{float:"right",cursor:"default","font-size":"14px",margin:"3px"},{id:this.designId+"_filter_span",title:"Filter"});this.formatDiv=ej.buildTag("div.e-dashboarddesigner-grid-toolbar","",{"margin-left":"5px"},{id:this.designId+"_kpi_formatIcon"});var it=ej.buildTag("span.e-reportdesigner-configuration-settings","",{float:"right","font-size":"14px","margin-top":"3px","margin-right":"4px"},{id:this.designId+"_setting_span",title:"Options"}),f=ej.buildTag("div.e-dashboarddesigner-grid-toolbar","",{},{id:this.designId+"_kpi_addIcon"}),rt=ej.buildTag("span.e-icon e-plus e-designer-add-icon","",{float:"right","font-size":"14px","margin-top":"4px","margin-right":"2px"},{id:this.designId+"_add_span",title:"Add"});this.editDiv=ej.buildTag("div.e-dashboarddesigner-grid-toolbar","",{"margin-left":"5px"},{id:this.designId+"_kpi_editIcon"});w=ej.buildTag("span.e-reportdesigner-parameter-edit","",{float:"right","font-size":"14px",margin:"3px"},{id:this.designId+"_edit_span",title:"Edit"});this.deleteDiv=ej.buildTag("div.e-dashboarddesigner-grid-toolbar","",{"margin-left":"5px"},{id:this.designId+"_kpi_delIcon"});var ut=ej.buildTag("span.e-reportdesigner-toolbar-delete","",{float:"right","font-size":"14px",margin:"3px"},{id:this.designId+"_del_span",title:"Delete"}),b=ej.buildTag("div","",{},{id:this.designId+"_kpi_grid"}),k=ej.buildTag("table.e-designer-table","",{width:"435px"},{unselectable:"on"}),d=ej.buildTag("tr","",{}),g=ej.buildTag("td","",{},{id:this.designId+"_kpi_gridCol"}),ft=ej.buildTag("div.e-separator e-horizontal","",{height:"20px","padding-left":"5px"},{id:this.designId+"_kpi_separator1"}),et=ej.buildTag("div.e-separator e-horizontal","",{height:"20px","padding-left":"5px"},{id:this.designId+"_kpi_separator2"});n.append(u);u.append(s);s.append(h);h.append(c);c.append(l);l.append(tt);u.append(a);a.append(v);v.append(y);y.append(r);r.append(f);f.append(rt);r.append(et);r.append(this.editDiv);this.editDiv.append(w);r.append(this.deleteDiv);this.deleteDiv.append(ut);r.append(ft);r.append(this.formatDiv);this.formatDiv.append(it);r.append(this.filterDiv);this.filterDiv.append(p);u.append(b);b.append(k);k.append(d);d.append(g);nt=this.getKPIDataValueSet();e=214;g.ejGrid({datasource:nt,columns:[{field:"Field",headerText:"Column Name",width:e},{field:"KPIColumnInfo.DisplayExpression",headerText:"KPI Expression",width:e}],height:"200px",allowSelection:!0,allowResizing:!0,allowScrolling:!0,allowPaging:!1,scrollSettings:{allowVirtualScrolling:!1,virtualScrollMode:"normal",enableTouchScroll:!1,autoHide:!0},rowSelected:$.proxy(this.gridSelection,this),enableAltRow:!1});f.bind("click",$.proxy(this.addKPIColumn,this));this.deleteDiv.bind("click",$.proxy(this.deleteKPIColumn,this));this.editDiv.bind("click",$.proxy(this.editKPIColumn,this));this.formatDiv.bind("click",$.proxy(this.openKpiformat,this));this.filterDiv.bind("click",$.proxy(this.openKpimeasurefilter,this));$("#"+this.designId+"_kpi_gridCol").data("ejGrid").setModel({dataSource:this.getKPIDataValueSet()});this.disableToolbarItems(!0)}},n.prototype.openKpiformat=function(){var n,t,i;this.formatDiv.attr("disabled")!=="disabled"&&(n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),n.selectedKpiColumnIndex=$("#"+n.designId+"_kpi_gridCol").data("ejGrid").option("selectedRowIndex"),t=n.getKpiDataFieldbyIndex(n.selectedKpiColumnIndex),i={},i.formatProperties=t.MeasureFormatting,ejDashboardDesigner.getInstance("FormatDialog").openFormatDialog(i,function(n){if(n){var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),t=i.getKpiDataFieldbyIndex(i.selectedKpiColumnIndex).MeasureFormatting;t.Culture=n.formatProperties.Culture;t.DecimalPoints=n.formatProperties.DecimalPoints;t.FormatType=n.formatProperties.FormatType;t.Unit=n.formatProperties.Unit;i.updateKpiformat()}},!0,KpiCalculationType[t.KPIColumnInfo.KpiCalculationType]===KpiCalculationType.PercentageOfTarget||KpiCalculationType[t.KPIColumnInfo.KpiCalculationType]===KpiCalculationType.PercentageVariation))},n.prototype.updateKpiformat=function(){var n=this.tableElement.data("ejGrid");this.generateColumns(this.columnBinding);n.model.columns=this.gridColums;n.refreshContent()},n.prototype.openKpimeasurefilter=function(){var n,t,i;this.filterDiv.attr("disabled")!=="disabled"&&(n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),n.selectedKpiColumnIndex=$("#"+n.designId+"_kpi_gridCol").data("ejGrid").option("selectedRowIndex"),n.selectedKpiColumnIndex!==-1&&(t=n.getKpiDataFieldbyIndex(n.selectedKpiColumnIndex),i=void 0,i=t.FilterInfo!=null?t.FilterInfo.MeasureFilterInfo:new MeasureFilterInfo,ejDashboardDesigner.getInstance("MeasureFilter").openMeasureFilter(n,"updateMeasureFilterInKPI",t.UniqueColumnName,t.Field,i,!0)))},n.prototype.updateMeasureFilterInKPI=function(n){var t=this.getKpiDataFieldbyIndex(this.selectedKpiColumnIndex);t.FilterInfo=new FilterInfo;t.FilterInfo.MeasureFilterInfo=n.Values.length===0?null:n;this.dataConfiguration.postDraggedFields()},n.prototype.updatekpiInfo=function(n,t){var r=n,i;t?(i=this.getKpiDataFieldbyIndex(this.selectedKpiColumnIndex),i.IsKPIColumn=!0,i.KPIColumnInfo=r.KPIColumnInfo,$("#"+this.designId+"_kpi_gridCol").data("ejGrid").setModel({dataSource:this.getKPIDataValueSet()})):(this.updateKpiDataFiled(n),$("#"+this.designId+"_kpi_gridCol").data("ejGrid").setModel({dataSource:this.getKPIDataValueSet()}));this.disableToolbarItems(!0);this.propertyPanel.refreshScroller();this.dataConfiguration.postDraggedFields()},n.prototype.updateKpiDataFiled=function(n){for(var t=0;t<this.dataGroupInfo.Values.length;t++)if(this.dataGroupInfo.Values[t].Name==="KPIColumn"){this.dataGroupInfo.Values[t].Values?this.dataGroupInfo.Values[t].Values.push(n):(this.dataGroupInfo.Values[t].Values=[],this.dataGroupInfo.Values[t].Values.push(n));break}},n.prototype.getKpiDataFieldbyIndex=function(n){for(var t=0;t<this.dataGroupInfo.Values.length;t++)if(this.dataGroupInfo.Values[t].Name==="KPIColumn")return this.dataGroupInfo.Values[t].Values[n]},n.prototype.getKPIDataValueSet=function(){for(var n=0;n<this.dataGroupInfo.Values.length;n++)if(this.dataGroupInfo.Values[n].Name==="KPIColumn")return this.dataGroupInfo.Values[n].Values;return[]},n.prototype.setKPIDataValueSet=function(n){for(var t=0;t<this.dataGroupInfo.Values.length;t++)this.dataGroupInfo.Values[t].Name==="KPIColumn"&&(this.dataGroupInfo.Values[t].Values=n)},n.prototype.addKPIColumn=function(){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);ejDashboardDesigner.getInstance("KPIWindow").openkpiDialog(null,n,"updatekpiInfo",!1)},n.prototype.deleteKPIColumn=function(){var n,t;this.deleteDiv.attr("disabled")!=="disabled"&&(n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),n.selectedKpiColumnIndex=$("#"+n.designId+"_kpi_gridCol").data("ejGrid").option("selectedRowIndex"),n.selectedKpiColumnIndex!==-1&&(t=n.getKPIDataValueSet(),t.splice(n.selectedKpiColumnIndex,1),$("#"+n.designId+"_kpi_gridCol").data("ejGrid").setModel({dataSource:n.getKPIDataValueSet()}),n.dataConfiguration.postDraggedFields()),this.disableToolbarItems(!0))},n.prototype.editKPIColumn=function(){if(this.editDiv.attr("disabled")!=="disabled"){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);n.selectedKpiColumnIndex=$("#"+n.designId+"_kpi_gridCol").data("ejGrid").option("selectedRowIndex");n.selectedKpiColumnIndex!==-1&&ejDashboardDesigner.getInstance("KPIWindow").openkpiDialog(n.getKpiDataFieldbyIndex(n.selectedKpiColumnIndex),n,"updatekpiInfo",!0)}},n.prototype.gridSelection=function(){this.disableToolbarItems(!1)},n.prototype.disableToolbarItems=function(n){n?(this.designer.element.find("#"+this.designId+"_kpi_editIcon").css("opacity","0.5").attr("disabled","disabled"),this.designer.element.find("#"+this.designId+"_kpi_delIcon").css("opacity","0.5").attr("disabled","disabled"),this.designer.element.find("#"+this.designId+"_kpi_formatIcon").css("opacity","0.5").attr("disabled","disabled"),this.designer.element.find("#"+this.designId+"_kpi_filterIcon").css("opacity","0.5").attr("disabled","disabled")):(this.designer.element.find("#"+this.designId+"_kpi_editIcon").css("opacity","1").removeAttr("disabled"),this.designer.element.find("#"+this.designId+"_kpi_delIcon").css("opacity","1").removeAttr("disabled"),this.designer.element.find("#"+this.designId+"_kpi_formatIcon").css("opacity","1").removeAttr("disabled"),this.designer.element.find("#"+this.designId+"_kpi_filterIcon").css("opacity","1").removeAttr("disabled"))},n.prototype.validateKPIDataValueSet=function(n){for(var u,r=[],i=this.getKPIDataValueSet(),t=0;t<i.length;t++)ej.isNullOrUndefined(n[i[t].UniqueColumnName])&&r.push(i[t].UniqueColumnName);for(u=function(n){var t=i.filter(function(t){return t.UniqueColumnName!==r[n]});i=t},t=0;t<r.length;t++)u(t);this.setKPIDataValueSet(i);ej.isNullOrUndefined($("#"+this.designId+"_kpi_gridCol").data("ejGrid"))||$("#"+this.designId+"_kpi_gridCol").data("ejGrid").setModel({dataSource:this.getKPIDataValueSet()})},n.prototype.getGridJson=function(){var n=new GridProperties;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.gridJson)&&(this.gridJson=this.getGridJson()),this.gridJson},n.prototype.gridItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.gridJson.UniqueName,[this.gridJson],null);var n=this.tableElement.data("ejGrid");ej.isNullOrUndefined(n)||n.destroy();$("#"+this.designer._id+"_"+this.gridJson.UniqueName).removeData("widgetInstance");$("#"+this.designer._id+"_"+this.gridJson.UniqueName).remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Grid)},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.getParameterColumn=function(){return{Value:this.gridJson.ContainerSettings.Title,Id:this.gridJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(t,i){n.FieldType==="Measures"&&$(i).css("display","block");n.FieldType==="Dimensions"&&n.DateTimeFormat==="None"?($(i).find("a").attr("fieldmenuname").toLowerCase()==="sort"||$(i).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters")&&$(i).css("display","block"):n.FieldType==="Dimensions"&&n.DateTimeFormat!=="None"&&$(i).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Ones,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n}();window.ej.createObject("ej.DashboardDesignerUtility.GridItem",InternalGridReportItem,window);ej.DashboardDesignerUtility.GridItem.prototype.widgetItems();InternalGridTemplate=function(){function n(){this.callMethod="";this.selectedTemplateIndex=0;this.templateList=[];this.id=ejDashboardDesigner.getInstance("DashboardDesigner")._id;this.renderGridTemplate()}return Object.defineProperty(n,"gridTemplate",{get:function(){return(this.gridtemplate===null||this.gridtemplate===undefined)&&(this.gridtemplate=new ej.DashboardDesignerUtility.GridTemplate),this.gridtemplate},enumerable:!0,configurable:!0}),n.prototype.openGridTemplate=function(n,t,i){var u,r;for(this.callInstance=n,this.callMethod=t,this.templateList=JSON.parse(JSON.stringify(i)),this.templateDialog.data("ejDialog").open(),u=[],r=0;r<this.templateList.length;r++)u.push({DisplayName:this.templateList[r].Columns.DisplayName,UniqueColumnName:this.templateList[r].Columns.UniqueColumnName});$("#"+this.id+"listCol").data("ejListBox").setModel({dataSource:u,selectedIndex:0,fields:{id:"UniqueColumnName",text:"DisplayName"}});this.templateList[0].Columns.ColumnType===FieldType[FieldType.Measures]?this.barDiv.css({display:"block"}):this.barDiv.css({display:"none"});this.updateRadiobutton({index:this.selectedTemplateIndex})},n.prototype.renderGridTemplate=function(){this.templateDialog=ej.buildTag("div.e-dashbrd-gridTemp","",{},{id:this.id+"_gridTemp",title:"Grid Template Column"});this.templateDialog.ejDialog({enableResize:!1,showRoundedCorner:!0,enableModal:!0,minWidth:400,minHeight:260,height:"auto",width:"auto",showOnInit:!1,showFooter:!0,cssClass:"e-designer-dialog e-designer-format e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});var u=ej.buildTag("div.e-dashbrd-gridTemp-container","",{},{id:this.id+"_temp_container"}),f=ej.buildTag("div.e-dashbrd-gridTemp-column","",{},{id:this.id+"_tempLeft"}),t=ej.buildTag("table.e-designer-table","",{"padding-top":"8px"},{unselectable:"on"}),e=ej.buildTag("tr","",{display:"block"}),o=ej.buildTag("td","",{width:"100px"}),ut=ej.buildTag("div","Columns",{"font-size":"14px","font-color":"#303541","font-weight":"600",float:"left"},{type:"label"}),s=ej.buildTag("div.e-dashbrd-gridTemp-type","",{},{id:this.id+"_tempRight"}),n=ej.buildTag("table.e-designer-table","",{},{unselectable:"on"}),h=ej.buildTag("tr","",{"padding-top":"7px",display:"block"}),c=ej.buildTag("td","",{}),ft=ej.buildTag("div","Display Type",{"font-size":"14px","font-color":"#303541","font-weight":"600",float:"right"},{type:"label"}),l=ej.buildTag("tr","",{"padding-top":"8px",display:"block"}),a=ej.buildTag("td","",{},{id:this.id+"_listcolumn"}),v=ej.buildTag("ul","",{},{id:this.id+"listCol"}),y=ej.buildTag("tr","",{"padding-top":"8px",display:"block"}),p=ej.buildTag("td","",{}),w=ej.buildTag("input","",{},{type:"radio",name:"Value",id:this.id+"_valueData"}),et=ej.buildTag("label","Value",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.id+"_valueData",type:"label"}),b=this.barDiv=ej.buildTag("tr","",{"padding-top":"8px",display:"block"}),k=ej.buildTag("td","",{}),d=ej.buildTag("input","",{},{type:"radio",name:"Value",id:this.id+"_barData"}),ot=ej.buildTag("label","Bar",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.id+"_barData",type:"label"}),i=ej.buildTag("tr","",{"padding-top":"8px",display:"block"}),g=ej.buildTag("td","",{}),nt=ej.buildTag("input","",{},{type:"radio",name:"Value",id:this.id+"_formatData"}),st=ej.buildTag("label","Conditional Formatting",{"font-size":"12px","font-color":"#303541","padding-left":"3px"},{"for":this.id+"_formatData",type:"label"}),tt=ej.buildTag("td","",{}),r=ej.buildTag("div","",{"margin-left":"15px"},{id:this.id+"_url"}),ht=ej.buildTag("div","Edit...",{"font-size":"12px",color:"blue","margin-top":"-4px",cursor:"pointer","text-decoration":"underline",display:"none"},{id:this.id+"_edit",type:"label"}),ct=$("#"+this.id+"_gridTemp_foot"),it=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_temp_btn_cancel"}),rt=ej.buildTag("button.e-designer-updatebtn e-dbrd-hand-cursor","",{float:"right","background-color":"#3498DB",color:"white"},{id:this.id+"_temp_btn_update"});ct.append(it).append(rt);f.append(t);t.append(e);e.append(o);o.append(ut);s.append(n);n.append(h);h.append(c);c.append(ft);u.append(f,s);this.templateDialog.append(u);t.append(l);l.append(a);a.append(v);n.append(y);y.append(p);p.append(w).append(et);n.append(b);b.append(k);k.append(d).append(ot);n.append(i);i.append(g);g.append(nt).append(st);i.append(tt);tt.append(r);r.append(ht);v.ejListBox({datasource:[],fields:{text:"Name",value:"Name"},width:"215",height:"200",select:$.proxy(this.updateRadiobutton,this),cssClass:"e-dbrd-control"});w.ejRadioButton({change:$.proxy(this.valueChooser,this),cssClass:"e-designer-radiobtn"});d.ejRadioButton({change:$.proxy(this.barChooser,this),cssClass:"e-designer-radiobtn"});nt.ejRadioButton({change:$.proxy(this.formatChooser,this),cssClass:"e-designer-radiobtn"});rt.ejButton({text:"Update",enabled:!0,showRoundedCorner:!0,size:"mini",width:"80px",cssClass:"e-designer-okbtn",click:$.proxy(this.updateTemplate,this,!0)});it.ejButton({text:"Cancel",showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.closeDialog,this,!0)});r.bind("click",$.proxy(this.oneditClick,this))},n.prototype.closeDialog=function(){this.templateDialog.data("ejDialog").close()},n.prototype.updateTemplate=function(){if(!ej.isNullOrUndefined(this.callInstance)){for(var n=0;n<this.templateList.length;n++)this.templateList[n].DisplayType!==DisplayType.ConditionalFormatting&&(this.templateList[n].ConditionalFormatting=[]);ej.DashboardUtil.invokeMethod(this.callInstance,this.callMethod,[this.templateList]);this.templateDialog.data("ejDialog").close()}},n.prototype.oneditClick=function(){var n=this.templateList[this.selectedTemplateIndex].ConditionalFormatting;ejDashboardDesigner.getInstance("ConditionalFormat").openConditionalFormat(this,"updateConditionalFormatting",n)},n.prototype.updateConditionalFormatting=function(n){this.templateList[this.selectedTemplateIndex].ConditionalFormatting=n},n.prototype.valueChooser=function(){var n=$("#"+this.id+"listCol").data("ejListBox").option("selectedIndex");this.selectedTemplateIndex===n&&(this.templateList[this.selectedTemplateIndex].DisplayType=DisplayType.Value);$("#"+this.id+"_edit").css("display","none")},n.prototype.barChooser=function(){var n=$("#"+this.id+"listCol").data("ejListBox").option("selectedIndex");this.selectedTemplateIndex===n&&(this.templateList[this.selectedTemplateIndex].DisplayType=DisplayType.Bar);$("#"+this.id+"_edit").css("display","none")},n.prototype.formatChooser=function(){var t=$("#"+this.id+"listCol").data("ejListBox").option("selectedIndex"),n;this.selectedTemplateIndex===t&&(this.templateList[this.selectedTemplateIndex].DisplayType=DisplayType.ConditionalFormatting);n=$("#"+this.id+"_formatData");n.data("ejRadioButton").model.checked===!0&&$("#"+this.id+"_edit").css("display","block")},n.prototype.updateRadiobutton=function(n){this.selectedTemplateIndex=n.index;this.templateList.length>0&&(this.templateList[this.selectedTemplateIndex].Columns.ColumnType===FieldType[FieldType.Measures]?this.barDiv.css({display:"block"}):this.barDiv.css({display:"none"}),this.templateList[this.selectedTemplateIndex].DisplayType===DisplayType.Value&&($("#"+this.id+"_valueData").data("ejRadioButton").setModel({checked:!0}),$("#"+this.id+"_barData").data("ejRadioButton").setModel({checked:!1}),$("#"+this.id+"_formatData").data("ejRadioButton").setModel({checked:!1})),this.templateList[this.selectedTemplateIndex].DisplayType===DisplayType.Bar&&($("#"+this.id+"_valueData").data("ejRadioButton").setModel({checked:!1}),$("#"+this.id+"_barData").data("ejRadioButton").setModel({checked:!0}),$("#"+this.id+"_formatData").data("ejRadioButton").setModel({checked:!1})),this.templateList[this.selectedTemplateIndex].DisplayType===DisplayType.ConditionalFormatting&&($("#"+this.id+"_valueData").data("ejRadioButton").setModel({checked:!1}),$("#"+this.id+"_barData").data("ejRadioButton").setModel({checked:!1}),$("#"+this.id+"_formatData").data("ejRadioButton").setModel({checked:!0})))},n}();window.ej.createObject("ej.DashboardDesignerUtility.GridTemplate",InternalGridTemplate,window);InternalToolbar=function(){function n(n){this.zoomSelectedIndex=-1;this.createReportText="New Dashboard";this.createButtonText="Create";this.openReportText="Open Dashboard";this.items=["25%","50%","75%","100%","150%","200%","250%","300%","350%","400%"];this.fileWaterMark="Report Name";this.filterSerializer=null;this.relativeDateTimer=null;this.targetTag=n;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.designer._id;this.filterSerializer=ejDashboardDesigner.getInstance("MasterSlaveFilter");this.measureFormat=new MeasureFormatting}return n.prototype.renderToolBar=function(n,t,i){var e=this.designer.model.toolbarSettings,r,f,u;e.templateId?(u=$("#"+e.templateId),n.append(u),u.ejToolbar({isResponsive:!0,enableSeparator:!0,height:u.height(),click:this.designer.model.toolbarClick}),u.css("display","block")):(this.toolBar=ej.buildTag("div.e-reportdesigner-toolbarcontainer","",{width:i+"px",height:t+"px"},{id:this.id+"_toolBar"}),n.append(this.toolBar),r=ej.buildTag("ul.e-reportdesigner-toolbarul","",{"padding-left":"5px"},{}),this.appendSplitBtn(r,this.designer.locale.toolBar.save,"e-reportdesigner-toolbar-save e-li-item e-dbrd-hand-cursor","2.5px 0px 0px 1px",this.id+"_saveConfigMenu"),f=ej.buildTag("div","",{},{title:"Property",id:this.id+"_saveMenu"}),this.populateMenuItems(f,[{id:"save",text:"Save"},{id:"saveAs",text:"Save As"}],"save"),this.toolBar.append(f),this.toolBar.append(r),r=ej.buildTag("ul.e-reportdesigner-toolbarul","",{}),this.appendToolbarItems(r,this.designer.locale.toolBar.cut,"e-reportdesigner-toolbar-cut e-li-item e-dbrd-hand-cursor"),this.appendToolbarItems(r,this.designer.locale.toolBar.copy,"e-reportdesigner-toolbar-copy e-li-item e-dbrd-hand-cursor"),this.appendToolbarItems(r,this.designer.locale.toolBar.paste,"e-reportdesigner-toolbar-paste e-li-item e-dbrd-hand-cursor"),this.appendToolbarItems(r,this.designer.locale.toolBar.Delete,"e-reportdesigner-toolbar-delete e-li-item e-dbrd-hand-cursor"),this.toolBar.append(r),r=ej.buildTag("ul.e-reportdesigner-toolbarul","",{}),this.appendToolbarItems(r,this.designer.locale.toolBar.undo,"e-reportdesigner-toolbar-undo e-li-item e-dbrd-hand-cursor"),this.appendToolbarItems(r,this.designer.locale.toolBar.redo,"e-reportdesigner-toolbar-redo e-li-item e-dbrd-hand-cursor"),this.toolBar.append(r),r=ej.buildTag("ul.e-reportdesigner-toolbarul","",{}),this.appendToolbarItems(r,this.designer.locale.toolBar.filter,"e-reportdesigner-configuration-parameters e-li-item e-dbrd-hand-cursor"),this.appendToolbarItems(r,this.designer.locale.toolBar.refreshSettings,"e-reportviewer-icon e-dbrd-banner-refresh e-li-item e-dbrd-hand-cursor"),this.toolBar.append(r),this.appendPreview(this.toolBar),this.toolBar.ejToolbar({isResponsive:!0,height:t+"px",width:i+"px",cssClass:"e-designer-toolbar e-report-responsive-toolbar",enableSeparator:!0,click:$.proxy(this.toolbarClick,this)}));this.renderFUpload();this.renderNewFile();this.designer.toolbarTag=this.toolBar;this.ejDesignerTool=this.toolBar.data("ejToolbar");this.designer.model.mode===ej.dashboardDesigner.mode.datasource&&this.toolBar.css("display","none")},n.prototype.renderFUpload=function(){var n=this,t=ej.buildTag("div","",{height:"0px"},{id:this.id+"_rdl_upload"});this.designer.element.append(t);t.ejUploadbox({width:"0px",height:"0px",uploadName:"file",extensionsAllow:".rdl",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.designer.element},saveUrl:this.designer.model.serviceUrl+"/UploadReportAction",fileSelect:$.proxy(this.onfileSelect,this),error:$.proxy(this.onuploadError,this),complete:$.proxy(this.onuploadComplete,this),beforeSend:function(t){n.designer.showDesignIndicator();var i={reportDesignerToken:n.designer.authenticationToken,serviceAuthorizationToken:n.designer.model.serviceAuthorizationToken};n.designer.triggerEvents("ajaxBeforeLoad",i);t.xhr.setRequestHeader("reportDesignerToken",i.reportDesignerToken);t.xhr.setRequestHeader("serviceAuthorizationToken",i.serviceAuthorizationToken)}});t.hide()},n.prototype.populateMenuItems=function(n,t,i){for(var f,u,s=t.length,o=ej.buildTag("ul.e-designer-menu","",{},{id:this.id+"_"+i+"ConfigMenu"}),e=[],r=0;r<s;r++)if(f=t[r],e.push({id:f.id,text:f.text,parentId:null}),t[r].Items)for(u=0;u<t[r].Items.length;u++)e.push({id:t[r].Items[u].id,text:t[r].Items[u].text,parentId:f.id});n.append(o);o.ejMenu({menuType:ej.MenuType.ContextMenu,openOnClick:!1,ontextMenuTarget:"#"+this.toolBar.attr("id"),width:140,subMenuDirection:"right",fields:{dataSource:e,id:"id",parentId:"parentId",text:"text"},click:$.proxy(this.onFileActionChange,this)})},n.prototype.onSettingsLeave=function(){var t=$("#"+this.id+"_openConfigMenu").data("ejMenu"),n;t&&t.hide();n=$("#"+this.id+"_saveConfigMenu").data("ejMenu");n&&n.hide()},n.prototype.onFileActionChange=function(n){var t;n.ID==="fromDevice"?(t=this.designer.triggerEvents("openReportClick",{target:n,select:"Device"}),t||this.browseDiskReport()):n.ID==="fromServer"?(t=this.designer.triggerEvents("openReportClick",{target:n,select:"Server"}),t||this.openServerClick()):n.ID==="save"?(t=this.designer.triggerEvents("saveReportClick",{target:n,select:"Save"}),t||this.designer.saveAsReport()):n.ID==="toDevice"?(t=this.designer.triggerEvents("saveReportClick",{target:n,select:"SaveAsDevice"}),t||this.designer.downloadReport()):(n.ID==="toServer"||n.ID==="saveAs")&&(t=this.designer.triggerEvents("saveReportClick",{target:n,select:"SaveAsServer"}),t||this.saveServerClick())},n.prototype.appendToolbarItems=function(n,t,i,r,u){var f=ej.buildTag("li.e-reportdesigner-toolbarli e-designer-toolbar-align "+r,"",{},{id:this.id+"_toolbar_li_"+t.replace(" ","")}),e=ej.buildTag("span","",{},{id:this.id+"_toolbar_"+t.replace(" ",""),"class":"e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic "+i});f.append(e);n.append(f);u&&u.length>0&&f.attr("e-target",u);f.ejTooltip({content:t,cssClass:"e-defaultIndex-template",isBalloon:!1})},n.prototype.appendSplitBtn=function(n,t,i,r,u){var f=ej.buildTag("li.e-reportdesigner-toolbarli e-designer-splitbtn","",{width:"37px"},{id:this.id+"_toolbar_li_"+t}),e=ej.buildTag("span.e-split e-drop e-widget","",{width:"37px",display:"inline-table",margin:r},{id:this.id+"_toolbar_"+t}),o=ej.buildTag("span.e-in-wrap e-box e-padding"),s=ej.buildTag("button.e-splitbutton e-js e-btn e-split-btn e-ntouch e-left-btn e-dbrd-hand-cursor e-droparrowright e-designer-click e-designer-ejwidgets-splitbtn","",{height:"25px",width:"37px","padding-right":"12px"},{id:this.id+"_splitbtn_"+t,"e-target":u}),h=ej.buildTag("div"),l=ej.buildTag("span.e-toolbarfonticonbasic "+i),c=ej.buildTag("div.e-split-btn-div","",{position:"absolute",height:"100%"}),a=ej.buildTag("span.e-icon e-arrow-sans-down","",{"padding-top":"4px"});c.append(a);h.append(l);s.append(h).append(c);o.append(s);e.append(o);f.append(e);n.append(f);u&&u.length>0&&e.attr("e-target",u);f.ejTooltip({content:t,cssClass:"e-defaultIndex-template",isBalloon:!1})},n.prototype.appendPreview=function(n){var t=this,u=ej.buildTag("ul.e-reportdesigner-toolbarul","",{float:"right"}),i,r;this.saveStatusWarning=ej.buildTag("span.e-ddr-draft-status","",{"line-height":"35px"},{id:this.id+"_auto_save_status_icon"});this.saveStatusLabel=ej.buildTag("label.e-reportdesigner-content-label","",{"line-height":"35px"},{id:this.id+"_auto_save_status_label"});i=ej.buildTag("div","",{width:"95px",float:"right","box-sizing":"border-box"},{id:this.id+"_div_preview_btn"});r=ej.buildTag("button.e-reportdesigner-previewbtn e-dbrd-hand-cursor","Preview",{"font-size":"13px",float:"right","margin-right":"5px","margin-top":"5.5px","margin-bottom":"5.5px","padding-left":"5px","padding-right":"5px"},{id:this.id+"_previewButton"});i.append(r);u.append(this.saveStatusWarning,this.saveStatusLabel,i);n.append(u);r.ejButton({width:"78px",showRoundedCorner:!1,size:"mini",contentType:ej.ContentType.TextAndImage,height:"24px",prefixIcon:"e-toolbarPreview e-reportdesigner-toolbar-preview",click:$.proxy(this.designer.PreviewDashboard,this.designer)});this.saveStatusLabel.ejTooltip({content:"",isBalloon:!1,beforeOpen:$.proxy(function(n){var i=t.saveStatusLabel.attr("data-datetime"),r,u;ej.isNullOrUndefined(i)&&i===""?n.cancel=!0:(r=new Date(i),n.model.content=t.saveStatusWarning.hasClass("e-dashboarddesigner-warning-icon")?"There was an error saving the draft.<br/>Last successful save: "+(ej.isNullOrUndefined(i)||i===""?"Never":ej.globalize.format(r,t.designer.model.localeSettings.dateFormat,t.designer.model.localeSettings.culture)+" "+ej.globalize.format(r,t.designer.model.localeSettings.timeFormat,t.designer.model.localeSettings.culture)):"Last successful save: "+ej.globalize.format(r,t.designer.model.localeSettings.dateFormat,t.designer.model.localeSettings.culture)+" "+ej.globalize.format(r,t.designer.model.localeSettings.timeFormat,t.designer.model.localeSettings.culture),u=t.saveStatusLabel.data("ejTooltip"),u.tooltipContent.html(n.model.content))},this)})},n.prototype.showRowInfo=function(n){if(n.stopPropagation(),n.cancelBubble=!0,!$(n.target).hasClass("e-dbrd-designer-refresh-ds")&&this.fileInfoContainer.css("display")==="block")return this.fileInfoContainer.hide(),$(n.currentTarget).removeClass("e-active"),!1;$(n.currentTarget).addClass("e-active");this.dataRowContainer.html(this.getFetchProgressTemplate());this.fileInfoContainer.css({display:"block",right:"3px"});this.getRowDetails()},n.prototype.getRowDetails=function(){ej.DashboardUtil.getInstance().doAjaxPost("GET",this.designer.model.serviceUrl+"/getrowscount/",{},{fnction:$.proxy(this.setRowsCount,this),errfnction:$.proxy(this.setRowsCount,this)},!0)},n.prototype.setRowsCount=function(n){if(ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.UsedRowSize)||ej.isNullOrUndefined(n.MaxRowSize))this.dataRowContainer.html(this.getDataRowErrorTemplate());else{var t="Ones",i=this.dataUnitConversion(n.UsedRowSize),r=this.dataUnitConversion(n.MaxRowSize),u=ej.DashboardUtil.formattedText(n.UsedRowSize,this.measureFormat.Culture,0,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,t,!0),f=ej.DashboardUtil.formattedText(n.MaxRowSize,this.measureFormat.Culture,0,this.measureFormat.FormatType,this.measureFormat.Prefix,this.measureFormat.Suffix,t,!0);this.dataRowContainer.html(this.getDataRowInfoTemplate(Math.ceil(n.UsedRowSize/n.MaxRowSize*100)+"%","<span title = '"+u+this.designer.locale.fileRowsInfo.tootltipSuffix+"'>"+i+"<\/span> "+this.designer.locale.fileRowsInfo.fileRowsSubTextTwo+" <span title = '"+f+this.designer.locale.fileRowsInfo.tootltipSuffix+"'>"+r+"<\/span> "+this.designer.locale.fileRowsInfo.fileRowsSubTextThree))}},n.prototype.dataUnitConversion=function(n){var t=n,i="B",o=Math.pow(1024,1),r=Math.pow(1024,2),u=Math.pow(1024,3),f=Math.pow(1024,4),e=Math.pow(1024,5);return t>=o&&t<r||t<=-o&&t>-r?(t=t/o,i="KB"):t>=r&&t<u||t<=-r&&t>-u?(t=t/r,i="MB"):t>=u&&t<f||t<=-u&&t>-f?(t=t/u,i="GB"):t>=f&&t<e||t<=-f&&t>-e?(t=t/f,i="TB"):(t>=e||t<=-e)&&(t=t/e,i="PB"),t=parseFloat(t.toFixed(2)),t.toString()+i},n.prototype.getDataRowErrorTemplate=function(){return"<span class='e-dbrd-file-info-value'>"+this.designer.locale.fileRowsInfo.errorMessage+"<\/span><span class='e-dbrd-designer-refresh-ds e-dbrd-refresh-icon' title='"+this.designer.locale.fileRowsInfo.reloadText+"'><\/span>"},n.prototype.getFetchProgressTemplate=function(){return"<span class='e-dbrd-file-info-progress'><\/span>"},n.prototype.getDataRowInfoTemplate=function(n,t){return"<div class='e-dbrd-row-progress'> <div class='e-dbrd-row-progress-active' style='width:"+n+"'><\/div><\/div><div class='e-dbrd-file-info-value'>"+t+"<\/div"},n.prototype.setZoomSelectedIndex=function(n){this.zoomSelectedIndex=n},n.prototype.getZoomValue=function(n){var t=0;return n?this.zoomSelectedIndex===0?t=parseInt(this.items[this.zoomSelectedIndex].split("%")[0],10):(t=parseInt(this.items[this.zoomSelectedIndex-1].split("%")[0],10),this.zoomSelectedIndex=this.zoomSelectedIndex-1):this.zoomSelectedIndex===this.items.length-1?t=parseInt(this.items[this.zoomSelectedIndex].split("%")[0],10):(t=parseInt(this.items[this.zoomSelectedIndex+1].split("%")[0],10),this.zoomSelectedIndex=this.zoomSelectedIndex+1),t},n.prototype.toolbarClick=function(n){var t,f,r,u,i;this.onSettingsLeave(n);t=$(n.target);$(t).hasClass("e-reportdesigner-toolbarli")?t=$(t).find("span.e-li-item"):$(t).closest(".e-reportdesigner-toolbarli")&&(f=$($(t).closest(".e-reportdesigner-toolbarli")),t=f.find("span.e-li-item"));t.hasClass("e-reportdesigner-toolbar-open-folder")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Open"}),i||(r=$("#"+this.id+"_openConfigMenu"),r.is(":visible")?r.hide():this.showOpenMenu(n))):t.hasClass("e-reportdesigner-toolbar-new")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"New"}),i||this.newReportClick()):t.hasClass("e-reportdesigner-toolbar-save")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Save"}),i||(u=$("#"+this.id+"_saveConfigMenu"),u.is(":visible")?u.hide():this.showSaveMenu(n))):t.hasClass("e-reportdesigner-toolbar-undo")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Undo"}),i||window.setTimeout(function(){ejDashboardDesigner.editManager.isUndo()&&ejDashboardDesigner.editManager.undo()},300)):t.hasClass("e-reportdesigner-toolbar-redo")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Redo"}),i||window.setTimeout(function(){ejDashboardDesigner.editManager.isRedo()&&ejDashboardDesigner.editManager.redo()},300)):t.hasClass("e-reportdesigner-toolbar-cut")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Cut"}),i||ejDashboardDesigner.getInstance("DesignPanel").cutItem()):t.hasClass("e-reportdesigner-toolbar-copy")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Copy"}),i||ejDashboardDesigner.getInstance("DesignPanel").copyItem()):t.hasClass("e-reportdesigner-toolbar-paste")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Paste"}),i||ejDashboardDesigner.getInstance("DesignPanel").pasteItem()):t.hasClass("e-reportdesigner-toolbar-delete")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Delete"}),i||ejDashboardDesigner.getInstance("DesignPanel").removeItem()):t.hasClass("e-reportviewer-icon e-dbrd-banner-refresh")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Refresh"}),i||this.openRefreshSettings()):t.hasClass("e-reportdesigner-configuration-parameters")?(i=this.designer.triggerEvents("toolbarClick",{target:t,click:"Filter Action"}),i||this.openFilterActionWindow()):this.designer.triggerEvents("toolbarClick",{target:n,click:"External"})},n.prototype.openFilterActionWindow=function(){var n;this.filterSerializer.filterObject.filterConfigurationModel!=null?(this.filterSerializer.RefreshMasterSlaveTitle(),n=$.parseJSON(JSON.stringify(this.filterSerializer.filterObject.filterConfigurationModel))):n=$.parseJSON(JSON.stringify(this.filterSerializer.GetWidgetCollectionsFromContainer()));ejDashboardDesigner.getInstance("FilterConfiguration").openFilterConfiguration(this,"filterUpdate",n)},n.prototype.openRefreshSettings=function(){var n=ejDashboardDesigner.getInstance("RefreshDialog");n.openRefreshDialog(this.designer.refreshSetting,$.proxy(this.designer.updateRefreshSetting,this.designer))},n.prototype.updateFilterCondition=function(){var f=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0],r,n,u,t,i;if(!ej.isNullOrUndefined(f)&&(r=ej.DashboardUtil.getWidgetInstance(f),this.filterSerializer.filterObject.filterConfigurationModel!=null))for(n=this.filterSerializer.filterObject.filterConfigurationModel.MastersCollection,u=[],t=0;t<n.length;t++)if(n[t].MasterInfo.ID===r.reportName&&n[t].ProfileManager.length>0){for(i=0;i<n[t].ProfileManager.length;i++)n[t].ProfileManager[i].ProfileInfo.Option||(u=this.filterSerializer.getFilterCondition(r),n[t].ProfileManager[i].ProfileInfo.FilterCondition=u);this.filterSerializer.masterSlaveFilterSerializer(n)}},n.prototype.removeFilterCondition=function(n){var t,i,r,u;if(!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(this.filterSerializer.filterObject)&&!ej.isNullOrUndefined(this.filterSerializer.filterObject.filterConfigurationModel)&&!ej.isNullOrUndefined(this.filterSerializer.filterObject.filterConfigurationModel.MastersCollection)){for(t=this.filterSerializer.filterObject.filterConfigurationModel.MastersCollection,i=0;i<t.length;i++)for(r=0;r<t[i].ProfileManager.length;r++)for(u=0;u<t[i].ProfileManager[r].ProfileInfo.FilterCondition.length;u++)t[i].ProfileManager[r].ProfileInfo.FilterCondition[u].DataSource.ID===n&&t[i].ProfileManager[r].ProfileInfo.FilterCondition.splice(u,1);this.filterSerializer.masterSlaveFilterSerializer(t)}},n.prototype.filterUpdate=function(n){this.setWidgetAsMaster(n);this.filterSerializer.filterObject.filterConfigurationModel=n;this.filterSerializer.masterSlaveFilterSerializer(this.filterSerializer.filterObject.filterConfigurationModel.MastersCollection)},n.prototype.setWidgetAsMaster=function(n){for(var t,r,f,o,e=ejDashboardDesigner.getInstance("PropertyPanel"),u=this.filterSerializer.getMastetFilterWidgets(),i=0;i<u.length;i++){for(t=u[i],t.getReportItemJson().FilterSettings.ActAsMasterWidget=!1,r=0;r<n.MastersCollection.length;r++)if(n.MastersCollection[r].MasterInfo.ID===u[i].reportName){t.getReportItemJson().FilterSettings.ActAsMasterWidget=!0;break}f=t.getReportItemJson().FilterSettings.ActAsMasterWidget;ej.isNullOrUndefined(t.controlHeader)||(this.filterSerializer.showOrHideClearFilterIcon(t.controlHeader,f),e.isVisible()&&(o={name:"ActAsMasterWidget",value:f},e.setBoolean(null,null,"Filter",o,t.controlType)))}},n.prototype.getAvailableReportItems=function(){for(var r,u=ejDashboardDesigner.getInstance("DesignPanel").designCanvas,t=u.find(".e-reportitem"),i=[],n=0;n<t.length;n++)r=ej.DashboardUtil.getWidgetInstance($(t[n])),i.push(r.getReportItemJson());return i},n.prototype.renderNewFile=function(){var l;this.newFileDiv=ej.buildTag("div.e-userselect","",{padding:"2px"},{id:this.id+"_createFileContainer",title:this.createReportText});var t=ej.buildTag("div","",{width:"100%",height:"80px"}),n=ej.buildTag("table","",{id:this.id+"_createFileInternalContainer"}),i=ej.buildTag("tr","",{}),r=ej.buildTag("td","",{"padding-bottom":"5px"}),a=ej.buildTag("Label.e-designer-fontfamily","File Name",{"font-size":"12px","font-color":"#303541","font-weight":"600"},{type:"label"}),u=ej.buildTag("tr","",{}),f=ej.buildTag("td","",{}),e=ej.buildTag("input.e-reportdesigner-inputPath e-textbox","",{"padding-left":"8px","border-radius":"2px"},{id:this.id+"_CreateInput"});ej.DashboardUtil.txtWaterMark(e,this.fileWaterMark);var o=ej.buildTag("tr","",{}),s=ej.buildTag("td","",{}),v=ej.buildTag("span.e-reportdesigner-errorLog e-designer-fontfamily","",{"font-size":"12px"}),h=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_cancelBtn"}),c=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_CreateButton"});this.newFileDiv.append(t);t.append(n);n.append(i);i.append(r);r.append(a);n.append(u);u.append(f);f.append(e);n.append(o);o.append(s);s.append(v);$(document.body).append(this.newFileDiv);this.newFileDiv.ejDialog({enableModal:!0,enableResize:!1,showRoundedCorner:!0,minWidth:290,minHeight:100,height:"auto",width:"auto",showOnInit:!1,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});l=$("#"+this.id+"_createFileContainer_foot");l.append(h).append(c);c.ejButton({size:"mini",enabled:!0,showRoundedCorner:!1,click:$.proxy(this.onCreate,this),text:ejDashboardDesigner.getInstance("DashboardDesigner").locale.menuBar.createButtonText});h.ejButton({showRoundedCorner:!0,size:"mini",text:"Cancel",click:$.proxy(this.closeNewDialog,this,!0)})},n.prototype.onCreate=function(){var n=$("#"+this.id+"_CreateInput").val(),t=this.newFileDiv.find(".e-reportdesigner-errorLog"),i;n&&n.length>0&&n.toLowerCase()!==this.fileWaterMark.toLowerCase()?(this.callBackfn?ej.DashboardUtil.invokeCallBack(this.callBackfn,{name:n}):(i=n.indexOf(".rdl")===-1?n+".rdl":n,this.designer.newRDLReport(i),t.text("")),this.newFileDiv.ejDialog("close")):t.text("* Specify the report file name")},n.prototype.onfileSelect=function(n){this.designer.reportFileName=n.files[0].name},n.prototype.onuploadError=function(){this.designer.hideDesignIndicator();var n=ejDashboardDesigner.getInstance("DashboardDesigner");ej.DashboardUtil.getInstance().alertDialog(n.locale.alertDialogTitle.upload,n.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,"")},n.prototype.closeNewDialog=function(){this.newFileDiv.find(".e-reportdesigner-inputPath").removeClass("e-designer-txtmark");this.newFileDiv.data("ejDialog").close()},n.prototype.onuploadComplete=function(n){this.designer.hideDesignIndicator();ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designer.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.openReport,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.openReport,fileName:n.files.name})},{method:"openRdlJSON",instance:this.designer,indicator:["showDesignIndicator","hideDesignIndicator"]})},n.prototype.showPaste=function(n){ej.isNullOrUndefined(this.toolBar.data("ejToolbar"))&&this.toolBar.ejToolbar();this.toolBar.ejToolbar(n?"enableItem":"disableItem",$("#"+this.id+"_toolbar_li_Paste"))},n.prototype.showCopy=function(n){ej.isNullOrUndefined(this.toolBar.data("ejToolbar"))&&this.toolBar.ejToolbar();this.toolBar.ejToolbar(n?"enableItem":"disableItem",$("#"+this.id+"_toolbar_li_Copy"))},n.prototype.showDelete=function(n){ej.isNullOrUndefined(this.toolBar.data("ejToolbar"))&&this.toolBar.ejToolbar();this.toolBar.ejToolbar(n?"enableItem":"disableItem",$("#"+this.id+"_toolbar_li_Delete"))},n.prototype.showCut=function(n){ej.isNullOrUndefined(this.toolBar.data("ejToolbar"))&&this.toolBar.ejToolbar();this.toolBar.ejToolbar(n?"enableItem":"disableItem",$("#"+this.id+"_toolbar_li_Cut"))},n.prototype.showUndo=function(n){ej.isNullOrUndefined(this.toolBar.data("ejToolbar"))&&this.toolBar.ejToolbar();this.toolBar.ejToolbar(n?"enableItem":"disableItem",$("#"+this.id+"_toolbar_li_Undo"))},n.prototype.showRedo=function(n){ej.isNullOrUndefined(this.toolBar.data("ejToolbar"))&&this.toolBar.ejToolbar();this.toolBar.ejToolbar(n?"enableItem":"disableItem",$("#"+this.id+"_toolbar_li_Redo"))},n.prototype.browseDiskReport=function(){$("#"+this.id+"_rdl_upload .e-uploadinput").click()},n.prototype.openNewDialog=function(n){this.callBackfn=n;this.newFileDiv.find(".e-reportdesigner-errorLog").text("");this.newFileDiv.find(".e-reportdesigner-inputPath").val(this.fileWaterMark).addClass("e-designer-txtmark");this.newFileDiv.data("ejDialog").open()},n.prototype.newReportClick=function(){this.callBackfn=null;this.newFileDiv.find(".e-reportdesigner-errorLog").text("");this.newFileDiv.find(".e-reportdesigner-inputPath").val(this.fileWaterMark);this.newFileDiv.data("ejDialog").open()},n.prototype.openServerClick=function(){var n=ejDashboardDesigner.getInstance("BrowseDialog");n.openBrowseDialog(this,"openServerReport",BrowseType.Open)},n.prototype.openServerReport=function(n,t){this.designer.openReport(t+"/"+n.Name,null)},n.prototype.saveServerClick=function(){var n=ejDashboardDesigner.getInstance("BrowseDialog");n.openBrowseDialog(this,"saveServerReport",BrowseType.Save,null,this.designer.reportFileName,this.designer.dashboardDescription)},n.prototype.saveServerReport=function(n,t,i,r,u,f){this.designer.serverCategory={name:t,description:i,category:n.Name,categoryId:n.Id,eventType:f,id:u,isPublic:this.designer.model.serverSettings.isPublic||!1,isUnlisted:this.designer.model.serverSettings.isUnlisted||!1};this.designer.createServerReport(this.designer.serverCategory)},n.prototype.showOpenMenu=function(n){var t=$("#"+this.id+"_toolbar_li_Open"),i=t.closest("ul"),r=$("#"+this.id+"_openConfigMenu").data("ejMenu");r.show(t.offset().left,i.offset().top+i.height(),this.toolBar,n)},n.prototype.showSaveMenu=function(n){var t=$("#"+this.id+"_toolbar_li_Save"),i=t.closest("ul"),r=$("#"+this.id+"_saveConfigMenu").data("ejMenu");r.show(t.offset().left,i.offset().top+i.height(),this.toolBar,n)},n.prototype.updateToolbar=function(){var n=this.designer.model.toolbarSettings;this.showToolBar(n.showToolbar);this.showNewBtn(n.items&ej.DashboardDesigner.ToolbarItems.New);this.showOpenBtn(n.items&ej.DashboardDesigner.ToolbarItems.Open);this.showSaveBtn(n.items&ej.DashboardDesigner.ToolbarItems.Save);this.showCutBtn(n.items&ej.DashboardDesigner.ToolbarItems.Cut);this.showCopyBtn(n.items&ej.DashboardDesigner.ToolbarItems.Copy);this.showPasteBtn(n.items&ej.DashboardDesigner.ToolbarItems.Paste);this.showDeletBtn(n.items&ej.DashboardDesigner.ToolbarItems.Delete);this.showUndoBtn(n.items&ej.DashboardDesigner.ToolbarItems.Undo);this.showRedoBtn(n.items&ej.DashboardDesigner.ToolbarItems.Redo);this.showPreview(n.items&ej.DashboardDesigner.ToolbarItems.Preview);this.showDesign(n.items&ej.DashboardDesigner.ToolbarItems.EditDesign)},n.prototype.showToolBar=function(n){this.toolBar.css("display",n?"block":"none")},n.prototype.showNewBtn=function(n){$("#"+this.id+"_toolbar_li_New").css("display",n?"block":"none")},n.prototype.showOpenBtn=function(n){$("#"+this.id+"_toolbar_li_Open").css("display",n?"block":"none")},n.prototype.showSaveBtn=function(n){$("#"+this.id+"_toolbar_li_Save").css("display",n?"block":"none")},n.prototype.showCutBtn=function(n){$("#"+this.id+"_toolbar_li_Cut").css("display",n?"block":"none")},n.prototype.showCopyBtn=function(n){$("#"+this.id+"_toolbar_li_Copy").css("display",n?"block":"none")},n.prototype.showPasteBtn=function(n){$("#"+this.id+"_toolbar_li_Paste").css("display",n?"block":"none")},n.prototype.showDeletBtn=function(n){$("#"+this.id+"_toolbar_li_Delete").css("display",n?"block":"none")},n.prototype.showUndoBtn=function(n){$("#"+this.id+"_toolbar_li_Undo").css("display",n?"block":"none")},n.prototype.showRedoBtn=function(n){$("#"+this.id+"_toolbar_li_Redo").css("display",n?"block":"none")},n.prototype.showPreview=function(n){$("#"+this.id+"_div_preview_btn").css("display",n?"block":"none")},n.prototype.showDesign=function(n){$("#"+this.id+"_viewer_editdiv").css("display",n?"block":"none")},n.prototype.updateRptTextActions=function(){var n=ejDashboardDesigner.getInstance("DesignPanel"),t=n.selectedReportItems&&n.selectedReportItems.length>0,i=ej.DashboardUtil.getWidgetInstance(n.selectedReportItems[0]),r=!t||!ej.isNullOrUndefined(i)&&ej.isNullOrUndefined(i.labelContent)?t:i.labelContent.attr("contenteditable")==="false"?!0:!1;this.showPaste(n.canPaste());this.showCopy(t);this.showCut(t);this.showDelete(r)},n.prototype.updateAutoSavedTime=function(n){this.saveStatusLabel&&n?(this.saveStatusWarning.removeClass("e-ddr-draft-status-progress").addClass("e-ddr-draft-status-success"),this.saveStatusLabel.attr({"data-datetime":(new Date).toISOString()}),this.updateRelativeTime(new Date),this.relativeDateTimer==null&&(this.relativeDateTimer=this.initializeRelativeTimer())):(this.saveStatusWarning.removeClass("e-ddr-draft-status-progress").addClass("e-dashboarddesigner-warning-icon"),this.saveStatusLabel.text("Draft save failed"),this.saveStatusWarning.show())},n.prototype.initializeRelativeTimer=function(){var n=this;return setTimeout($.proxy(function(){n.updateRelativeTime();clearTimeout(n.relativeDateTimer);n.relativeDateTimer=n.initializeRelativeTimer()},this),6e4)},n.prototype.updateRelativeTime=function(n){var i=n||new Date,t=this.saveStatusLabel.attr("data-datetime");ej.isNullOrUndefined(t)||t===""||this.saveStatusWarning.hasClass("e-dashboarddesigner-warning-icon")||this.saveStatusLabel.text("Draft saved "+this.getRelativeTime(i,new Date(t)))},n.prototype.getRelativeTime=function(n,t){var i=Math.floor((n.getTime()-t.getTime())/6e4),r=Math.floor(i/60),u=Math.floor(r/24);return i<1?"just now":i<2?"a minute ago":i<60?i+" minutes ago":i<120?"an hour ago":r<24?r+" hours ago":u<2?"yesterday":u+" days ago"},n.prototype.updateCulture=function(n){var i=this.id,t;t=ej.DashboardDesigner.Locale[n]?ej.DashboardDesigner.Locale[n].menuBar:ej.DashboardDesigner.Locale["en-US"].menuBar;this.createReportText=t.createReport;this.createButtonText=t.createButtonText;this.openReportText=t.openReport;$("#"+i+"_createFileContainer").html(this.createReportText);$("#"+i+"_CreateButton").html(this.createButtonText);$("#"+i+"_openFileContainer").html(this.openReportText)},n.prototype.updateSize=function(){this.ejDesignerTool.option("width",$("#"+this.id+"_designerContainer").width());this.ejDesignerTool._activeItem=undefined;this.ejDesignerTool._reSizeHandler()},n}();window.ej.createObject("ej.DashboardDesignerUtility.Toolbar",InternalToolbar,window);InternalTreeMapReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="TreeMap";this.isMasterByDefault=!1;this.rootCss="e-treemap-item";this.pluginId="";this.menuSettingsIconVisible=!0;this.contentContainer=null;this.dataGroupInfo=null;this.treemapItem=null;this.treeMapJson=null;this.dataSource=null;this.isHeaderVisible=!0;this.controlHeader=null;this.dataConfiguration=null;this.reportName=null;this.levels=null;this.desatColorMapping=null;this.weightValuePath=null;this.colorValuePath=null;this.containerProperties=null;this.dataValues=null;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.designId=this.designPanel.dashboardDesigner._id;this.isDataEnabled=!0;this.designer=ejDashboardDesigner.getInstance("DashboardDesigner");this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.dataConfiguration=ejDashboardDesigner.getInstance("DataConfiguration");this.controlType=ControlType.TreeMap;this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem")}return n.prototype.render=function(n){this.renderTreeMapItem(n)},n.prototype.updateData=function(n){this.updateReportItemData(n)},n.prototype.dispose=function(){this.treeMapItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.treeMapJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateTreeMapItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(n){return this.onFieldDragDropped(n)},n.prototype.onSettingsClick=function(n,t){return this.onSettingsIconClick(n,t)},n.prototype.onSettingsMenuClick=function(n){this.onSettingsMenuItemClick(n)},n.prototype.updateDataGroupInfo=function(n,t){this.updateReportItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getTreeMapContainerInstance()},n.prototype.refresh=function(){this.treemapElement.ejTreeMap("refresh")},n.prototype.supportedColumnsForFiltering=function(){return this.columnsForFiltering()},n.prototype.getDefaultFormat=function(n){return this.getDefaultMeasureFormat(n)},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.relation,GroupId:"c55f5601-8e79-4a16-94d6-ddd4cc051306",Items:[{id:"8d3e286f-5057-4267-b5ee-21b2d29883ab",widgetName:"TreeMap",widgetDisplayName:n.itemPanel.widgetTitle.treeMap,cssClass:"e-widgeticon e-reportdesigner-widget-treemap",widgetNameSpace:"ej.DashboardDesignerUtility.TreeMapItem",searchCategory:["treemap","relationship"],widgetconfiginfo:null,useIconTemplate:!1,iconTemplate:"",tooltip:{title:n.itemPanel.widgetTitle.treeMap,description:n.itemPanel.widgetDescription.treeMapDesc,dataRequirement:n.itemPanel.widgetDataRequirements.treeMapDataReq}}]})},n.prototype.getTreeMapContainerInstance=function(){return this.containerProperties},n.prototype.setPropertyElement=function(n,t,i,r){this.propertyPanel.canUpdate=!1;var f=this.propertyPanel.getPropertyElement(this.getPropertyGridItems(),t,n,ej.isNullOrUndefined(r)?-1:r),u=$.extend(!0,{},f);u.categoryName=n;this.propertyPanel.updatePropertyValue(u,"TreeMap",i);this.propertyPanel.canUpdate=!0},n.prototype.getPropertyGridItems=function(){var t=this.treemapElement.data("ejTreeMap"),n=new ej.DashboardDesignerUtility.PropertyGridItem(this.treeMapJson.FilterSettings,this.controlContainer,this.controlHeader,this.dataGroupInfo,this.treeMapJson.ContainerSettings);return this.containerProperties=n.containerProperties,n.propertyGridItems.Header=this.treeMapJson.ContainerSettings.Title,n.propertyGridItems.SubTitle=this.treeMapJson.ContainerSettings.SubTitle,n.propertyGridItems.Description=this.treeMapJson.ContainerSettings.Description,n.propertyGridItems.Type="TreeMap",n.linkingProperty.Items[0].value=ej.DashboardUtil.getInstance().useExistingLinks(this.treeMapJson),n.propertyGridItems.Items=[{CategoryName:"Basic Settings",Items:[{name:"ShowLegend",displayName:"Show Legend",value:this.treeMapJson.ShowLegend,itemType:"bool"},{name:"EnableDrilldown",displayName:"Enable Drill-Down",isVisible:this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Values[1].Values.length>1?!0:!1,value:this.treeMapJson.EnableDrilldown,itemType:"bool"}]},n.linkingProperty,{CategoryName:"Range Color Settings",Items:[{name:"ColorType",displayName:"Color Type",value:t.model.rangeColorMapping.length>0?"Range Color":"Monochromatic",itemType:"dropdown",valueList:["Monochromatic","Range Color"]},{name:"SaturatedColor",displayName:"Monochromatic",value:ej.isNullOrUndefined(this.treeMapJson.SaturatedColor)?"#77A7FB":"#"+this.treeMapJson.SaturatedColor.substring(3),isVisible:!this.treeMapJson.IsCustomRange,itemType:"color"},{name:"RangeColor1",displayName:"Low",value:ej.isNullOrUndefined(this.treeMapJson.MinColor)?"#77A7FB":"#"+this.treeMapJson.MinColor.substring(3),isVisible:this.treeMapJson.IsCustomRange,itemType:"color"},{name:"RangeColor2",displayName:"Middle",value:ej.isNullOrUndefined(this.treeMapJson.MidColor)?"#E57368":"#"+this.treeMapJson.MidColor.substring(3),isVisible:this.treeMapJson.IsCustomRange,itemType:"color"},{name:"RangeColor3",displayName:"High",value:ej.isNullOrUndefined(this.treeMapJson.MaxColor)?"#FBCB43":"#"+this.treeMapJson.MaxColor.substring(3),isVisible:this.treeMapJson.IsCustomRange,itemType:"color"}]},n.filterSettingsProperty,n.containerSettingsProperty],n.propertyGridItems},n.prototype.renderTreeMapReportElement=function(n){try{this.treeMapJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.treeMapJson.ContainerSettings.Bounds.Row,column:this.treeMapJson.ContainerSettings.Bounds.Column,rowSpan:this.treeMapJson.ContainerSettings.Bounds.RowSpan,colSpan:this.treeMapJson.ContainerSettings.Bounds.ColumnSpan};this.renderTreeMapElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.treeMapJson.UniqueName,Error:t,Type:t.name})}},n.prototype.renderTreeMapItem=function(){try{this.treeMapJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);this.renderTreeMapElement();ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.TreeMap)}catch(n){this.designPanel.logError({Source:this.treeMapJson.UniqueName,Error:n,Type:n.name})}},n.prototype.getTreeMapJson=function(){var n=new TreeMapProperties;return n.ContainerSettings.ShowHeader=!0,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.renderTreeMapElement=function(){this.treemapItem=ej.buildTag("div.e-treemapitem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"998",overflow:"hidden"},{id:this.designId+"treemapItem"+this.treeMapJson.UniqueName});this.treemapElement=ej.buildTag("div.e-treemap-element","",{width:"100%",height:"100%",position:"relative","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box"},{id:this.designId+"treemapElement"+this.treeMapJson.UniqueName});this.contentContainer.append(this.treemapItem);this.treemapItem.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.designId+"_designer_waiting_popup e-designer-loader"});this.controlContainer.data("widgetInstance",this);this.treemapItem.append(this.treemapElement);this.dataSource=[{Value:237641326,Row1:"Item1",Column1:1},{Value:152518015,Row1:"Item1",Column1:1},{Value:29672e3,Row1:"Item1",Column1:1},{Value:315645e3,Row1:"Item2",Column1:1},{Value:112336538,Row1:"Item2",Column1:1},{Value:35056064,Row1:"Item2",Column1:1},{Value:47e6,Row1:"Item3",Column1:1},{Value:193946886,Row1:"Item3",Column1:1},{Value:170901e3,Row1:"Item3",Column1:1},{Value:83661e3,Row1:"Item4",Column1:1},{Value:81993e3,Row1:"Item4",Column1:1},{Value:63181775,Row1:"Item4",Column1:1},{Value:83661e3,Row1:"Item5",Column1:1},{Value:81993e3,Row1:"Item5",Column1:1},{Value:63181775,Row1:"Item5",Column1:1}];this.weightValuePath="Value";this.colorValuePath="Value";this.levels=this.generateLevels(null);this.desatColorMapping=this.generateDesatColorMap(this.dataSource,this.weightValuePath);this.treemapElement.ejTreeMap({dataSource:this.dataSource,enableResize:!0,weightValuePath:this.weightValuePath,colorValuePath:this.colorValuePath,enableDrillDown:this.treeMapJson.EnableDrilldown,showLegend:this.treeMapJson.ShowLegend,legendSettings:{mode:"interactive",dockPosition:"bottom"},desaturationColorMapping:this.treeMapJson.IsCustomRange?[]:this.desatColorMapping,rangeColorMapping:this.treeMapJson.IsCustomRange?this.desatColorMapping:[],levels:this.levels,leafItemSettings:{showLabels:!1,labelPosition:"topleft",labelVisibilityMode:"hideonexceededlength"},highlightBorderThickness:3,highlightBorderBrush:"#666666",drillDownHeaderColor:"#B2B2B2",drillDownSelectionColor:"#FFFFFF",header:this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[1].Values.length>1?this.dataGroupInfo.Values[1].Values[0].Value:null});this.controlId=this.treemapElement.attr("id")},n.prototype.generateDesatColorMap=function(n,t){var u=[],r=this.getFromValue(n,t),s=this.getToValue(n,t),f=(this.getToValue(n,t)-this.getFromValue(n,t))/3,o=this.dataGroupInfo.Values[0],e="true",i;return this.treeMapJson.IsCustomRange?(i=!ej.isNullOrUndefined(o)&&o.Values.length>0?o.Values.length===1?o.Values[0].MeasureFormatting:o.Values[1].MeasureFormatting:null,this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Values[1].Values.length>0&&!ej.isNullOrUndefined(i)?(u.push({color:ej.isNullOrUndefined(this.treeMapJson.MinColor)?"#77A7FB":"#"+this.treeMapJson.MinColor.substring(3),from:r,to:r+f,legendLabel:ej.DashboardUtil.formattedText(r.toFixed(2),i.Culture,i.DecimalPoints,i.FormatType,i.Prefix,i.Suffix,i.Unit,e)+"-"+ej.DashboardUtil.formattedText(r+f,i.Culture,i.DecimalPoints,i.FormatType,i.Prefix,i.Suffix,i.Unit,e)}),u.push({color:ej.isNullOrUndefined(this.treeMapJson.MidColor)?"#E57368":"#"+this.treeMapJson.MidColor.substring(3),from:r+f,to:r+2*f,legendLabel:ej.DashboardUtil.formattedText((r+f).toFixed(2),i.Culture,i.DecimalPoints,i.FormatType,i.Prefix,i.Suffix,i.Unit,e)+"-"+ej.DashboardUtil.formattedText((r+2*f).toFixed(2),i.Culture,i.DecimalPoints,i.FormatType,i.Prefix,i.Suffix,i.Unit,e)}),u.push({color:ej.isNullOrUndefined(this.treeMapJson.MaxColor)?"#FBCB43":"#"+this.treeMapJson.MaxColor.substring(3),from:r+2*f,to:s+1,legendLabel:ej.DashboardUtil.formattedText((r+2*f).toFixed(2),i.Culture,i.DecimalPoints,i.FormatType,i.Prefix,i.Suffix,i.Unit,e)+"-"+ej.DashboardUtil.formattedText(s.toFixed(2),i.Culture,i.DecimalPoints,i.FormatType,i.Prefix,i.Suffix,i.Unit,e)})):u.push({color:ej.isNullOrUndefined(this.treeMapJson.MinColor)?"#77A7FB":"#"+this.treeMapJson.MinColor.substring(3),from:1,to:315645e3,legendLabel:"1-315645000"}),u):(this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Values[1].Values.length>0?u.push({color:ej.isNullOrUndefined(this.treeMapJson.SaturatedColor)?"#77A7FB":"#"+this.treeMapJson.SaturatedColor.substring(3),from:.1,to:1,rangeMinimum:r,rangeMaximum:s+1}):u.push({color:ej.isNullOrUndefined(this.treeMapJson.SaturatedColor)?"#77A7FB":"#"+this.treeMapJson.SaturatedColor.substring(3),from:1,to:315645e3,rangeMinimum:1,rangeMaximum:315645e3}),u[0])},n.prototype.generateLevels=function(){var n=[],i=this.treemapElement.data("ejTreeMap"),t;if(this.dataGroupInfo.Values.length>0)if(this.dataGroupInfo.Values[0].Values.length===0||this.dataGroupInfo.Values[1].Values.length===0)n.push({groupBorderThickness:0,groupPadding:0,showHeader:!1,groupPath:"Row1"});else for(t=0;t<this.dataGroupInfo.Values[1].Values.length;t++)n.push({showLabels:i.model.enableDrillDown?!0:!1,groupBorderThickness:0,groupPadding:0,showHeader:!1,groupPath:this.dataGroupInfo.Values[1].Values[t].UniqueColumnName,labelPosition:"topleft",labelVisibilityMode:"hideonexceededlength"});else n.push({groupBorderThickness:0,groupPadding:0,showHeader:!1,groupPath:"Row1"});return n},n.prototype.showLoadingIndicator=function(){$("#"+this.designId+"treemapItem"+this.treeMapJson.UniqueName).ejWaitingPopup("show")},n.prototype.hideLoadingIndicator=function(){$("#"+this.designId+"treemapItem"+this.treeMapJson.UniqueName).ejWaitingPopup("hide")},n.prototype.updateTreeMapItemPropertyChange=function(n,t,i,r){var o,s=!1,u,f,h,e;switch(n){case"Name":this.treeMapJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.treeMapJson);break;case"Description":this.propertyPanel.setDescription(this.treeMapJson,i);break;case"EnableDrilldown":this.updateEnableDrilldown(i);break;case"ShowLegend":this.updateShowLegend(i);break;case"ColorType":this.updateColorType(i);break;case"SaturatedColor":this.updateSaturatedColor(i);break;case"RangeColor1":this.updateRangeColor1(i);break;case"RangeColor2":this.updateRangeColor2(i);break;case"RangeColor3":this.updateRangeColor3(i);break;case"ItemLink":this.UpdateLink(i);break;case"SubTitle":this.propertyPanel.setSubTitle(this.treeMapJson,i);break;default:s=!0}if(ej.isNullOrUndefined(o)||(t=o),!s){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)h=u[f],h.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"TreeMap",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-treemap-item",this.designer._id+"_"+this.treeMapJson.UniqueName,[n,i,t,r],[n,t,i,r])}},n.prototype.updateEnableDrilldown=function(n){var t=this.treemapElement.data("ejTreeMap"),i;if(t.model.enableDrillDown=n,t.model.enableDrillDown)for(t.model.header=this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[1].Values.length>1?this.dataGroupInfo.Values[1].Values[0].Field:null,i=0;i<t.model.levels.length;i++)t.model.levels[i].showLabels=!0,t.model.levels[i].labelPosition="topleft",t.model.levels[i].labelVisibilityMode="hideonexceededlength";else for(i=0;i<t.model.levels.length;i++)t.model.levels[i].showLabels=!1;this.treeMapJson.EnableDrilldown=n;t.model.showSubItems=this.treeMapJson.EnableDrilldown?!0:!1;t.model.drillDownItemSelected=this.treeMapJson.EnableDrilldown?$.proxy(this.drillClick,this):null;t.model.preRender=this.treeMapJson.EnableDrilldown?$.proxy(this.drillStarted,this):null;this.generateTooltip(this.dataGroupValue);this.generateLabel(this.dataGroupValue);this.treemapElement.ejTreeMap("refresh")},n.prototype.UpdateLink=function(n){this.treeMapJson.UrlLink.EnableLink=n.EnableLink;this.treeMapJson.UrlLink.LinkType=n.LinkType;this.treeMapJson.UrlLink.GridUrlType=n.GridUrlType;this.treeMapJson.UrlLink.PassingParameters=n.PassingParameters;this.treeMapJson.UrlLink.UrlPath=n.UrlPath},n.prototype.updateShowLegend=function(n){var t=this.treemapElement.data("ejTreeMap");this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Values[1].Values.length>0&&(t.model.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:n,this.treemapElement.ejTreeMap("refresh"));this.treeMapJson.ShowLegend=n},n.prototype.updateColorType=function(n){var t=this.treemapElement.data("ejTreeMap");this.controlContainer.find(".treemapLabel").remove();this.treeMapJson.IsCustomRange=n==="Monochromatic"?!1:!0;this.treeMapJson.IsCustomRange?(this.propertyPanel.updateItemVisibility("TreeMap","RangeColorSettings","RangeColor1",!0),this.propertyPanel.updateItemVisibility("TreeMap","RangeColorSettings","RangeColor2",!0),this.propertyPanel.updateItemVisibility("TreeMap","RangeColorSettings","RangeColor3",!0),this.propertyPanel.updateItemVisibility("TreeMap","RangeColorSettings","SaturatedColor",!1),t.model.desaturationColorMapping={},t.model.rangeColorMapping=this.generateDesatColorMap(t.model.dataSource,t.model.colorValuePath),t.model.legendSettings.height=40,t.model.legendSettings.width=this.controlContainer.width(),t.model.legendSettings.mode="default"):(this.propertyPanel.updateItemVisibility("TreeMap","RangeColorSettings","SaturatedColor",!0),this.propertyPanel.updateItemVisibility("TreeMap","RangeColorSettings","RangeColor1",!1),this.propertyPanel.updateItemVisibility("TreeMap","RangeColorSettings","RangeColor2",!1),this.propertyPanel.updateItemVisibility("TreeMap","RangeColorSettings","RangeColor3",!1),t.model.rangeColorMapping=[],t.model.desaturationColorMapping=this.generateDesatColorMap(t.model.dataSource,t.model.colorValuePath),t.model.legendSettings.height=20,t.model.legendSettings.width=170,t.model.legendSettings.dockPosition="bottom",t.model.legendSettings.mode="interactive");this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Values[1].Values.length>0&&this.generateLabel(this.dataGroupValue);this.treemapElement.ejTreeMap("refresh")},n.prototype.updateSaturatedColor=function(n){var t=this.treemapElement.data("ejTreeMap");t.model.desaturationColorMapping.color=n;this.treeMapJson.SaturatedColor="#FF"+n.substring(1);this.treemapElement.ejTreeMap("refresh")},n.prototype.updateRangeColor1=function(n){var t=this.treemapElement.data("ejTreeMap");ej.isNullOrUndefined(t.model.rangeColorMapping[0])||(t.model.rangeColorMapping[0].color=n,this.treemapElement.ejTreeMap("refresh"));this.treeMapJson.MinColor="#FF"+n.substring(1)},n.prototype.updateRangeColor2=function(n){var t=this.treemapElement.data("ejTreeMap");ej.isNullOrUndefined(t.model.rangeColorMapping[1])||(t.model.rangeColorMapping[1].color=n,this.treemapElement.ejTreeMap("refresh"));this.treeMapJson.MidColor="#FF"+n.substring(1)},n.prototype.updateRangeColor3=function(n){var t=this.treemapElement.data("ejTreeMap");ej.isNullOrUndefined(t.model.rangeColorMapping[2])||(t.model.rangeColorMapping[2].color=n,this.treemapElement.ejTreeMap("refresh"));this.treeMapJson.MaxColor="#FF"+n.substring(1)},n.prototype.updateWidgetSize=function(n){this.cellInfo=n;var t=this.treemapElement.data("ejTreeMap");this.designPanel.updateWidgetItem(n,this.controlContainer,this.treeMapJson,CommandAction.ItemResize,"updateSize","e-treemap-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):(t.model.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:this.treeMapJson.ShowLegend,this.treemapElement.ejTreeMap("refresh"))},n.prototype.updateItemSize=function(n){this.cellInfo=n;var t=this.treemapElement.data("ejTreeMap");this.designPanel.updateWidgetItem(n,this.controlContainer,this.treeMapJson,CommandAction.ItemResize,"updateItemSize","e-treemap-item");this.contentContainer.find(".e-dbrd-control-error").length===1?(this.contentContainer.find(".e-dbrd-control-error").remove(),this.designPanel.showControlError(this.contentContainer,this.dataValues,this.cellInfo)):(t.model.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:this.treeMapJson.ShowLegend,this.treemapElement.ejTreeMap("refresh"))},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.treeMapJson,CommandAction.ItemMove,"updatePosition","e-treemap-item")},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Measures"}),n.push({Name:"Dimensions"}),n},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Value",CategoryType:CategoryType.Numeric,CategoryCount:2}),n.push({Name:"Column",CategoryType:CategoryType.Non_Numeric}),n},n.prototype.updateReportItemDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.isFieldValid=function(){return!0},n.prototype.updateReportItemData=function(n){var t,e,i;for(this.dataValues=n,this.contentContainer.find(".e-dbrd-control-error").remove(),this.contentContainer.css({display:"block"}),this.treemapItem.show(),$(this.contentContainer.children()[0]).css("display","none"),t=this.treemapElement.data("ejTreeMap"),t.model.tooltipTemplate="",i=0;i<this.dataGroupInfo.Values[1].Values.length;i++)this.controlContainer.find("#"+this.controlId+"_tooltip"+i).remove(),this.controlContainer.find("#"+this.controlId+"_labeltemplate"+i).remove();var r=null,u=null,f=null;if(ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.treeMapJson,this.dataGroupInfo),this.dataGroupValue=n,!ej.isNullOrUndefined(t)){if(ej.isNullOrUndefined(n.Error)||n.Error)ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo);else{if(n.noDataAvailable)this.treemapItem.hide(),$(this.contentContainer.children()[0]).css("display","block");else if(!ej.isNullOrUndefined(n)&&n.data!=="[]"&&ej.isNullOrUndefined(n.isDataSetEmpty))if(r=JSON.parse(n.data),t.model.header=this.dataGroupInfo.Values.length>0&&this.dataGroupInfo.Values[1].Values.length>1?this.dataGroupInfo.Values[1].Values[0].Field:null,u=n.formattedData.formatminvalue,f=n.formattedData.formatmaxvalue,e=this.getColumnList(r),this.dataGroupInfo.Values[0].Values.length>0&&this.dataGroupInfo.Values[1].Values.length>0){if(t.model.dataSource=r,this.dataGroupInfo.Values[1].Values.length>1){if(this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","EnableDrilldown",!0),this.treeMapJson.EnableDrilldown)for(t.model.enableDrillDown=!0,i=0;i<t.model.levels.length;i++)t.model.levels[i].showLabels=!0,t.model.levels[i].labelPosition="topleft",t.model.levels[i].labelVisibilityMode="hideonexceededlength"}else this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","EnableDrilldown",!1),t.model.enableDrillDown=this.treeMapJson.EnableDrilldown=!1,this.setPropertyElement("BasicSettings","EnableDrilldown",!1);t.model.showTooltip=!0;t.model.weightValuePath=this.dataGroupInfo.Values[0].Values[0].UniqueColumnName;t.model.colorValuePath=this.dataGroupInfo.Values[0].Values.length>1?this.dataGroupInfo.Values[0].Values[1].UniqueColumnName:this.dataGroupInfo.Values[0].Values[0].UniqueColumnName;t.model.levels=this.generateLevels(n);t.model.showLegend=this.controlContainer.width()<318||this.controlContainer.height()<318?!1:this.treeMapJson.ShowLegend;t.model.desaturationColorMapping=this.treeMapJson.IsCustomRange?[]:this.generateDesatColorMap(r,t.model.colorValuePath);t.model.rangeColorMapping=this.treeMapJson.IsCustomRange?this.generateDesatColorMap(r,t.model.colorValuePath):[];t.model.legendSettings.leftLabel=u!=null?u:String(this.getFromValue(r,e[0].text));t.model.legendSettings.rightLabel=f!=null?f:String(this.getToValue(r,e[0].text));this.treeMapJson.IsCustomRange?(t.model.legendSettings.height=40,t.model.legendSettings.width=this.controlContainer.width(),t.model.legendSettings.mode="default"):(t.model.legendSettings.height=20,t.model.legendSettings.width=170,t.model.legendSettings.dockPosition="bottom",t.model.legendSettings.mode="interactive");t.model.leafItemSettings.showLabels=!0;t.model.leafItemSettings.labelVisibilityMode="hideonexceededlength";t.model.showSubItems=this.treeMapJson.EnableDrilldown?!0:!1;t.model.drillDownItemSelected=this.treeMapJson.EnableDrilldown?$.proxy(this.drillClick,this):null;t.model.preRender=this.treeMapJson.EnableDrilldown?$.proxy(this.drillStarted,this):null;this.generateTooltip(n);this.generateLabel(n)}else t.model.dataSource=this.dataSource,t.model.levels=this.generateLevels(null),t.model.showLegend=!1,t.model.showTooltip=!1,this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","EnableDrilldown",!1),t.model.enableDrillDown=this.treeMapJson.EnableDrilldown=!1,t.model.showSubItems=!1,t.model.preRender=null,this.setPropertyElement("BasicSettings","EnableDrilldown",!1),t.model.leafItemSettings.showLabels=!1,t.model.weightValuePath=this.weightValuePath,t.model.colorValuePath=this.colorValuePath,t.model.leafItemSettings.labelPath=null,t.model.desaturationColorMapping=this.treeMapJson.IsCustomRange?[]:this.generateDesatColorMap(t.model.dataSource,t.model.colorValuePath),t.model.rangeColorMapping=this.treeMapJson.IsCustomRange?this.generateDesatColorMap(t.model.dataSource,t.model.colorValuePath):[];else(n.data==="[]"&&n.columnBindings==="{}"||!ej.isNullOrUndefined(n.isDataSetEmpty)&&n.isDataSetEmpty)&&(t.model.dataSource=this.dataSource,t.model.levels=this.generateLevels(null),t.model.showLegend=!1,t.model.showTooltip=!1,this.propertyPanel.updateItemVisibility("TreeMap","BasicSettings","EnableDrilldown",!1),t.model.enableDrillDown=this.treeMapJson.EnableDrilldown=!1,t.model.showSubItems=!1,t.model.preRender=null,this.setPropertyElement("BasicSettings","EnableDrilldown",!1),t.model.leafItemSettings.showLabels=!1,t.model.weightValuePath=this.weightValuePath,t.model.colorValuePath=this.colorValuePath,t.model.desaturationColorMapping=this.treeMapJson.IsCustomRange?[]:this.generateDesatColorMap(t.model.dataSource,t.model.colorValuePath),t.model.rangeColorMapping=this.treeMapJson.IsCustomRange?this.generateDesatColorMap(t.model.dataSource,t.model.colorValuePath):[],t.model.leafItemSettings.labelPath=null);ej.DashboardUtil.updateAction("TreeMap","Link","Link")}this.treemapElement.ejTreeMap("refresh")}},n.prototype.drillClick=function(n){var t=this.treemapElement.data("ejTreeMap");t.model.tooltipTemplate=this.controlId+"_tooltip"+n.level},n.prototype.drillStarted=function(n){var u=this.dataGroupInfo.Values[0],t=ej.isNullOrUndefined(u)?null:u.Values.length!==0&&u.Values.length<2?u.Values[0].MeasureFormatting:u.Values[1].MeasureFormatting,r="true",c;if(n.type==="preRender"&&!ej.isNullOrUndefined(t)){if(ej.isNullOrUndefined(n.model.desaturationColorMapping.from)||ej.isNullOrUndefined(n.model.desaturationColorMapping.to)||n.model.desaturationColorMapping.rangeMaximum===0){var f=0,s=1,l=-1,e=2,h=n.model.showSubItems?n.max.colorWeight:n.maximumValue.colorWeight,i=n.minimumValue.colorWeight,o=(h-i)/3;i=i===f?l:i;h+=s;var a=i=i===l?f:i,v=i+o,y=i+e*o,p=i+o,w=i+e*o,b=h;n.model.rangeColorMapping[f]=ej.isNullOrUndefined(t)?[]:{from:a,to:p,legendLabel:ej.DashboardUtil.formattedText(a,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,r)+"-"+ej.DashboardUtil.formattedText(p,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,r),color:n.model.rangeColorMapping[f].color};n.model.rangeColorMapping[s]=ej.isNullOrUndefined(t)?[]:{from:v,to:w,legendLabel:ej.DashboardUtil.formattedText(v,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,r)+"-"+ej.DashboardUtil.formattedText(w,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,r),color:n.model.rangeColorMapping[s].color};n.model.rangeColorMapping[e]=ej.isNullOrUndefined(t)?[]:{from:y,to:b,legendLabel:ej.DashboardUtil.formattedText(y,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,r)+"-"+ej.DashboardUtil.formattedText(b,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,r),color:n.model.rangeColorMapping[e].color}}else n.model.desaturationColorMapping.rangeMinimum=n.minimumValue.colorWeight,n.model.desaturationColorMapping.rangeMaximum=n.model.showSubItems?n.max.colorWeight:n.maximumValue.colorWeight,n.model.legendSettings.leftLabel=ej.DashboardUtil.formattedText(n.minimumValue.colorWeight,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,r),c=n.model.showSubItems?n.max.colorWeight:n.maximumValue.colorWeight,n.model.legendSettings.rightLabel=ej.DashboardUtil.formattedText(c,t.Culture,t.DecimalPoints,t.FormatType,t.Prefix,t.Suffix,t.Unit,r);n.model.tooltipTemplate=this.controlId+"_tooltip"+n.level}},n.prototype.generateTooltip=function(n){var f=JSON.parse(n.columnBindings),u,i=this.dataGroupInfo.Values[0],s="true",h=this.treemapElement.data("ejTreeMap"),y=this.controlContainer.find("#"+this.controlId+"_tooltip"),t,e,o,r;if(y.length>0&&this.controlContainer.find("#"+this.controlId+"_tooltip").remove(),h.model.enableDrillDown){var c=this.dataGroupInfo.Values[1].Values.length,l="",a="",v=0;for(t=0;t<this.dataGroupInfo.Values[0].Values.length;t++)l+="<p style='color:black;font-family: Roboto;font-size:12px;font-weight:normal'>"+f[this.dataGroupInfo.Values[0].Values[t].UniqueColumnName]+" : {{: ~formatTooltip(~firstLevelData(data,'"+this.dataGroupInfo.Values[0].Values[t].UniqueColumnName+"','"+v+"'), '"+i.Values[t].MeasureFormatting.Culture+"', '"+i.Values[t].MeasureFormatting.DecimalPoints+"', '"+i.Values[t].MeasureFormatting.FormatType+"', '"+i.Values[t].MeasureFormatting.Prefix+"', '"+i.Values[t].MeasureFormatting.Suffix+"', '"+i.Values[t].MeasureFormatting.Unit+"', '"+s+"')}}<\/P>",a+="<p style='color:black;font-family: Roboto;font-size:12px;font-weight:normal;'>"+f[this.dataGroupInfo.Values[0].Values[t].UniqueColumnName]+" : {{: ~formatTooltip(#data['"+this.dataGroupInfo.Values[0].Values[t].UniqueColumnName+"'], '"+i.Values[t].MeasureFormatting.Culture+"', '"+i.Values[t].MeasureFormatting.DecimalPoints+"', '"+i.Values[t].MeasureFormatting.FormatType+"', '"+i.Values[t].MeasureFormatting.Prefix+"', '"+i.Values[t].MeasureFormatting.Suffix+"', '"+i.Values[t].MeasureFormatting.Unit+"', '"+s+"')}}<\/P>",v++;for(e=0;e<c;e++){if(u='<script class ="treemap" id="'+this.controlId+"_tooltip"+e+'"  type="application/jsrender">',u+='<div style="background:white;border: 1px solid #4D4D4D; white-space: nowrap;border-radius: 7px;margin-right: 25px;min-width: 110px;padding-right: 5px;padding-left: 5px;width: auto;height: auto;">',e===c-1){for(o=0;o<c;o++)u+="<p style='color:black;font-family: Roboto;font-size:12px;font-weight:normal;'>"+f[this.dataGroupInfo.Values[1].Values[o].UniqueColumnName]+" : {{:#data['"+this.dataGroupInfo.Values[1].Values[o].UniqueColumnName+"']}}<\/P>";u+=a}else{for(r=0;r<=e;r++)u+=r===e?'<p style="color:black;font-family: Roboto;font-size:12px;font-weight:normal">'+f[this.dataGroupInfo.Values[1].Values[r].UniqueColumnName]+" : {{:label}}<\/P>":'<p style="color:black;font-family: Roboto;font-size:12px;font-weight:normal">'+f[this.dataGroupInfo.Values[1].Values[r].UniqueColumnName]+" : {{:~getRowNameData(data,'"+this.dataGroupInfo.Values[1].Values[r].UniqueColumnName+"')}}<\/P>";u+=l}u+="<\/div><\/script>";h.model.tooltipTemplate=this.controlId+"_tooltip0";this.controlContainer.append(u)}}else{for(h.model.tooltipTemplate=this.controlId+"_tooltip",u='<script class ="treemap" id="'+this.controlId+'_tooltip"  type="application/jsrender">',u+='<div style="background:white;border: 1px solid #4D4D4D; white-space: nowrap;border-radius: 7px;margin-right: 25px;min-width: 110px;padding-right: 5px;padding-left: 5px;width: auto;height: auto;">',t=0;t<this.dataGroupInfo.Values[1].Values.length;t++)u+="<p style='color:black;font-family: Roboto;font-size:12px;font-weight:normal;margin-top:10px;'>"+f[this.dataGroupInfo.Values[1].Values[t].UniqueColumnName]+"  : {{:(#data['"+this.dataGroupInfo.Values[1].Values[t].UniqueColumnName+"'])}}<\/P>";for(r=0;r<this.dataGroupInfo.Values[0].Values.length;r++)u+="<p style='color:black;font-family: Roboto;font-size:12px;font-weight:normal;margin-top:10px;'>"+f[this.dataGroupInfo.Values[0].Values[r].UniqueColumnName]+"  : {{: ~formatTooltip(#data['"+this.dataGroupInfo.Values[0].Values[r].UniqueColumnName+"'], '"+i.Values[r].MeasureFormatting.Culture+"', '"+i.Values[r].MeasureFormatting.DecimalPoints+"', '"+i.Values[r].MeasureFormatting.FormatType+"', '"+i.Values[r].MeasureFormatting.Prefix+"', '"+i.Values[r].MeasureFormatting.Suffix+"', '"+i.Values[r].MeasureFormatting.Unit+"', '"+s+"')}}<\/P>";u+="<\/div><\/script>";this.controlContainer.append(u)}},n.prototype.generateLabel=function(n){var t,h=this.treemapElement.data("ejTreeMap"),r=JSON.parse(n.data),u=this.getColumnList(r),c=this.dataGroupInfo.Values[0].Values.length>1?this.dataGroupInfo.Values[0].Values[1].UniqueColumnName:this.dataGroupInfo.Values[0].Values[0].UniqueColumnName,l=this.controlContainer.find("#"+this.controlId+"_labeltemplate0"),f,e,i,o,s;if(l.length>0&&this.controlContainer.find("#"+this.controlId+"_labeltemplate0").remove(),h.model.enableDrillDown)for(e=this.dataGroupInfo.Values[1].Values.length,i=0;i<e;i++){if(h.model.levels[i].labelTemplate=this.controlId+"_labeltemplate"+i,t='<script class = "treemapLabel" id="'+this.controlId+"_labeltemplate"+i+'" type="application/jsrender"><div>',i===e-1)for(o=0;o<e;o++)t+='<label style="color:'+(this.treeMapJson.IsCustomRange?"white":'{{:~getLabelColor(#data["'+c+'"],"'+this.getFromValue(r,u[0].text)+'","'+this.getToValue(r,u[0].text)+'")}}')+';font-family: Roboto;font-size:12px;font-weight:normal;margin-left:5px;">{{:#data["'+this.dataGroupInfo.Values[1].Values[o].UniqueColumnName+'"]}}<\/label><br />';else for(s=0;s<=i;s++)t+='<label style="color:'+(this.treeMapJson.IsCustomRange?"white":'{{:~getLabelColor(#data["'+c+'"],"'+this.getFromValue(r,u[0].text)+'","'+this.getToValue(r,u[0].text)+'")}}')+';font-family: Roboto;font-size:12px;font-weight:normal;margin-left:5px;">{{:#data["'+this.dataGroupInfo.Values[1].Values[s].UniqueColumnName+'"]}}<\/label><br />';t+="<div><\/script>";this.controlContainer.append(t)}else{for(h.model.leafItemSettings.labelTemplate=this.controlId+"_labeltemplate0",t='<script class = "treemapLabel" id="'+this.controlId+'_labeltemplate0" type="application/jsrender"><div>',f=0;f<this.dataGroupInfo.Values[1].Values.length;f++)t+='<label style="color:'+(this.treeMapJson.IsCustomRange?"white":'{{:~getLabelColor(#data["'+c+'"],"'+this.getFromValue(r,u[0].text)+'","'+this.getToValue(r,u[0].text)+'")}}')+';font-family: Roboto;font-size:12px;font-weight:normal;margin-left:5px;">{{:#data["'+this.dataGroupInfo.Values[1].Values[f].UniqueColumnName+'"]}}<\/label><br />';t+="<div><\/script>";this.controlContainer.append(t)}},n.prototype.getColumnList=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push({id:i[t],text:i[t]});return r},n.prototype.getFromValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)r.push(n[i][t]);return u=Math.min.apply(null,r),parseFloat(u.toFixed(2))},n.prototype.getToValue=function(n,t){for(var r=[],u=0,i=0;i<n.length;i++)r.push(n[i][t]);return u=Math.max.apply(null,r),parseFloat(u.toFixed(2))},n.prototype.treeMapItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.designer._id+"_"+this.treeMapJson.UniqueName,[this.treeMapJson],null);var n=this.treemapElement.data("ejTreeMap");ej.isNullOrUndefined(n)||n.destroy();$("#"+this.designer._id+"_"+this.treeMapJson.UniqueName).removeData("widgetInstance").remove();this.designPanel.selectedReportItems=[];ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.TreeMap)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.treeMapJson)&&(this.treeMapJson=this.getTreeMapJson()),this.treeMapJson},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.onFieldDragDropped=function(n){return ej.isNullOrUndefined(n.droppedItem)?!(n.categoryType===CategoryType[CategoryType.Non_Numeric]&&n.fieldType===FieldType[FieldType.Measures]):!0},n.prototype.getDefaultMeasureFormat=function(n){return n.Culture="en-US",n.Unit=NumberFormat.Auto,n.FormatType=DataValueFormat.Number,n.Prefix="",n.Suffix="",n.DecimalPoints=2,n},n.prototype.getParameterColumn=function(){return{Value:this.treeMapJson.ContainerSettings.Title,Id:this.treeMapJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n.prototype.onSettingsIconClick=function(n,t){var i=ejDashboardDesigner.getInstance("DataConfiguration");return ej.isNullOrUndefined(this.dataGroupInfo)||i.validateMenuDisable(n,this.dataGroupInfo),$.each($(t.element).children(),function(t,i){n.FieldType==="Measures"&&i.textContent.toLowerCase()!=="none"&&i.textContent.toLowerCase()!=="sort"&&$(i).css("display","block");n.FieldType==="Dimensions"&&$(i).find("a").attr("fieldmenuname").toLowerCase()==="dimensionfilters"&&$(i).css("display","block")}),{addFormatOption:!0,ejMenu:t}},n.prototype.onSettingsMenuItemClick=function(n){var t=n.grpInfo,i=!ej.isNullOrUndefined(t)&&!ej.isNullOrUndefined(t.FilterInfo)?t.FilterInfo.DimensionFilterInfo:null;ejDashboardDesigner.getInstance("DimensionFilter").openDimensionFilterWindow(this.dataConfiguration,"filterAction",n,i)},n.prototype.columnsForFiltering=function(){var u=[],f=ejDashboardDesigner.getInstance("FilterConfiguration"),i,t,n,r;if(!ej.isNullOrUndefined(this.dataGroupInfo.Values)&&this.dataGroupInfo.Values.length>0)for(i=this.dataGroupInfo.Values,t=0;t<i.length;t++)for(n=0;n<i[t].Values.length;n++)r=i[t].Values,r[n].FieldType!=="Dimensions"||f.isDuplicate(u,r[n].DataField)||u.push(r[n]);return u},n}();window.ej.createObject("ej.DashboardDesignerUtility.TreeMapItem",InternalTreeMapReportItem,window);ej.DashboardDesignerUtility.TreeMapItem.prototype.widgetItems();$.views.helpers({getLabelColor:function(n,t,i){return(t=parseFloat(t),i=parseFloat(i),t===i)?"white":n<(i-t)/3+t?"black":"white"},getRowNameData:function(n,t){return n!=null&&n.length>0?n[0][t]:""},firstLevelData:function(n,t){for(var u,r=0,i=0;i<n.length;i++)u=n[i][t],r+=u;return r}});InternalTrendLineWindow=function(){function n(){this.dashboardDesigner=null;this.chartProperties=null;this.callMethod="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.chartProperties=new ej.DashboardDesignerUtility.ChartProperties(this);this.id=this.dashboardDesigner._id;this.renderTrendlineWindow();this.seriesdropdown=this.trendlineDialog.find($("#"+this.id+"_seriesdrop")).data("ejDropDownList");this.linetypedropdown=this.trendlineDialog.find($("#"+this.id+"_line_typedrop")).data("ejDropDownList");this.lineorderdropdown=this.trendlineDialog.find($("#"+this.id+"_line_orderdrop")).data("ejNumericTextbox");this.linestyledropdown=this.trendlineDialog.find($("#"+this.id+"_line_styledrop")).data("ejDropDownList");this.linecolorpicker=this.trendlineDialog.find($("#"+this.id+"_line_colordrop")).data("ejColorPicker");this.trendLineStyles=[{text:this.dashboardDesigner.locale.chartTrendLineDialog.Solid,dashValue:"0"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.Dot,dashValue:"2,3"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.Dash,dashValue:"4,8"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.DotDash,dashValue:"2,6,6,10"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.LongDash,dashValue:"15"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.LongDashDotDot,dashValue:"20,10,5,5,5,10"}];this.trendLineTypes=[{text:this.dashboardDesigner.locale.chartTrendLineDialog.Linear,value:"Linear"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.Exponential,value:"Exponential"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.Logarithmic,value:"Logarithmic"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.Power,value:"Power"},{text:this.dashboardDesigner.locale.chartTrendLineDialog.Polynomial,value:"Polynomial"}];this.wireEvents()}return Object.defineProperty(n,"TrendLineWindow",{get:function(){return(this.trendlinewindow===null||this.trendlinewindow===undefined)&&(this.trendlinewindow=new ej.DashboardDesignerUtility.TrendLineWindow),this.trendlinewindow},enumerable:!0,configurable:!0}),n.prototype.openTrendlineDialog=function(n,t,i){this.callInstance=t;this.callMethod=i;this.trendlineVal=ej.isNullOrUndefined(n)?null:n;this.setSeriesType();this.setTrendLineType();this.setTrendLineOrderValue();this.setTrendLineColor();this.setTrendLineStyle();var u=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0].text,r=this.linetypedropdown.getSelectedValue();r==="Polynomial"?this.trendlineDialog.find($("#"+this.id+"_line_orderrow")).css("display","block"):this.trendlineDialog.find($("#"+this.id+"_line_orderrow")).css("display","none");$("#"+this.id+"_trendline_btn_ok").data("ejButton").enable();this.trendlineDialog.data("ejDialog").open();this.trendlineDialog.find("#"+this.id+"_legend_textdrop").attr("textEdited")==="false"||this.trendlineVal===null?this.trendlineDialog.find("#"+this.id+"_legend_textdrop").val(r+"("+u+")"):this.trendlineDialog.find($("#"+this.id+"_legend_textdrop")).val(this.trendlineVal.CustomName)},n.prototype.setTextBoxValue=function(){var n=this.trendlineDialog.find($("#"+this.id+"_legend_textdrop")),t=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0].text,i=this.linetypedropdown.getSelectedValue(),r=i+"("+t+")";r!==n.val()&&n.attr("textEdited","true")},n.prototype.getMeasureValues=function(){return this.getSourceData(this.callInstance.dataGroupInfo)},n.prototype.setSeriesType=function(){var n=this.getMeasureValues(),t;this.seriesdropdown.setModel({dataSource:n});t=ej.isNullOrUndefined(this.trendlineVal)?n[0].value:this.trendlineVal.UniqueName;this.seriesdropdown.selectItemByValue(t)},n.prototype.setTrendLineType=function(){this.linetypedropdown.setModel({dataSource:this.trendLineTypes});var n=ej.isNullOrUndefined(this.trendlineVal)?this.trendLineTypes[0].value:this.trendlineVal.LineType;this.linetypedropdown.selectItemByValue(n)},n.prototype.setTrendLineColor=function(){var n=ej.isNullOrUndefined(this.trendlineVal)?"#77A7FB":this.trendlineVal.LineColor;this.linecolorpicker.setModel({value:n})},n.prototype.setTrendLineStyle=function(){this.linestyledropdown.setModel({dataSource:this.trendLineStyles});var n=ej.isNullOrUndefined(this.trendlineVal)?this.trendLineStyles[0].dashValue:this.getLineStyle(this.trendlineVal.LineStyle);this.linestyledropdown.selectItemByValue(n)},n.prototype.setTrendLineOrderValue=function(){var n=ej.isNullOrUndefined(this.trendlineVal)?0:this.trendlineVal.Order;this.lineorderdropdown.setModel({value:n})},n.prototype.getSourceData=function(n){var f=[],u,r,t,i;if(!ej.isNullOrUndefined(n.Values)&&n.Values.length>0)for(u=n.Values,r=0;r<u.length;r++)for(t=0;t<u[r].Values.length;t++)i=u[r].Values,i[t].FieldType!=="Measures"||i[t].IsKPIColumn||i[t].SummaryType===SummaryType[SummaryType.NONE]||f.push({text:i[t].DataField+"("+i[t].SummaryType+")",value:i[t].UniqueColumnName,name:i[t].DataField});return f},n.prototype.renderTrendlineWindow=function(){var o;this.trendlineDialog=ej.buildTag("div.e-dashboarddesigner-trendlinedialog","",{},{id:this.id+"_trendLine_windowdiv",title:this.dashboardDesigner.locale.chartTrendLineDialog.trendline});this.trendlineDialog.ejDialog({enableResize:!1,showRoundedCorner:!0,enableModal:!0,minWidth:400,minHeight:370,height:"auto",width:"auto",showOnInit:!1,showFooter:!0,cssClass:"e-designer-trendlinedialog e-dashboarddesigner e-designer-dialog",close:$.proxy(ej.DashboardUtil.closeDialog,this)});var s=ej.buildTag("div","",{},{id:this.id+"_table_id"}),n=ej.buildTag("table.e-designer-table","",{width:"100%"},{unselectable:"on"}),t=ej.buildTag("tr.e-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_legend_textrow"}),h=ej.buildTag("td","",{}),ot=ej.buildTag("Label.e-dashboarddesigner-fontfamily",this.dashboardDesigner.locale.chartTrendLineDialog.legendText,{},{type:"label"}),c=ej.buildTag("td","",{"padding-left":"75px"}),st=ej.buildTag("input.e-textbox e-trendline-legendText","",{"text-align":"left","font-size":"13px",width:"200px"},{type:"text",textEdited:!1,id:this.id+"_legend_textdrop"}),i=ej.buildTag("tr.e-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_series_row"}),l=ej.buildTag("td","",{}),ht=ej.buildTag("Label.e-dashboarddesigner-fontfamily",this.dashboardDesigner.locale.chartTrendLineDialog.series,{},{type:"label"}),a=ej.buildTag("td","",{"padding-left":"107px"}),v=ej.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_seriesdrop"}),r=ej.buildTag("tr.e-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_typerow"}),y=ej.buildTag("td","",{}),ct=ej.buildTag("Label.e-dashboarddesigner-fontfamily",this.dashboardDesigner.locale.chartTrendLineDialog.lineType,{},{type:"label"}),p=ej.buildTag("td","",{"padding-left":"89px"}),w=ej.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_line_typedrop"}),u=ej.buildTag("tr.e-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_orderrow"}),b=ej.buildTag("td","",{}),lt=ej.buildTag("Label.e-dashboarddesigner-fontfamily",this.dashboardDesigner.locale.chartTrendLineDialog.order,{},{type:"label"}),k=ej.buildTag("td","",{"padding-left":"110px"}),d=ej.buildTag("input.e-textbox","","",{type:"text",id:this.id+"_line_orderdrop"}),f=ej.buildTag("tr.e-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_colorrow"}),g=ej.buildTag("td","",{}),at=ej.buildTag("Label.e-dashboarddesigner-fontfamily",this.dashboardDesigner.locale.chartTrendLineDialog.lineColor,{},{type:"label"}),nt=ej.buildTag("td","",{"padding-left":"86px"}),tt=ej.buildTag("input.e-textbox","",{"text-align":"left",border:"1px solid","font-size":"13px"},{type:"text",id:this.id+"_line_colordrop"}),e=ej.buildTag("tr.e-dashboarddesigner-trendline-tablerow","",{},{id:this.id+"_line_stylerow"}),it=ej.buildTag("td","",{}),vt=ej.buildTag("Label.e-dashboarddesigner-fontfamily",this.dashboardDesigner.locale.chartTrendLineDialog.lineStyle,{},{type:"label"}),rt=ej.buildTag("td","",{"padding-left":"89px"}),ut=ej.buildTag("input.e-dashboarddesigner-trendline-textbox","",{},{type:"text",id:this.id+"_line_styledrop"}),yt=$("#"+this.id+"_trendLine_windowdiv_foot"),ft=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right","margin-top":"6px","margin-right":"15px"},{id:this.id+"_trendline_btn_cancel"}),et=ej.buildTag("button..e-designer-okbtn e-dbrd-hand-cursor","",{float:"right","margin-top":"6px"},{id:this.id+"_trendline_btn_ok"});yt.append(ft).append(et);this.trendlineDialog.append(s);s.append(n);n.append(t);t.append(h);h.append(ot);t.append(c);c.append(st);n.append(i);i.append(l);l.append(ht);i.append(a);a.append(v);n.append(r);r.append(y);y.append(ct);r.append(p);p.append(w);n.append(u);u.append(b);b.append(lt);u.append(k);k.append(d);n.append(f);f.append(g);g.append(at);f.append(nt);nt.append(tt);n.append(e);e.append(it);it.append(vt);e.append(rt);rt.append(ut);v.ejDropDownList({dataSource:[],fields:{text:"text",value:"value"},enabled:!0,width:"214px",height:"28px",showRoundedCorner:!1,cssClass:"e-designer-series e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateLegendText,this)});w.ejDropDownList({dataSource:this.trendLineTypes,fields:{text:"text",value:"value"},enabled:!0,width:"214px",height:"28px",showRoundedCorner:!1,cssClass:"e-designer-target e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.updateTrendLineType,this)});d.ejNumericTextbox({showSpinButton:!0,decimalPlaces:0,minValue:0,maxValue:6,showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",width:"90px"});tt.ejColorPicker({cssClass:"e-designer-ejwidgets-colorpicker e-designer-content-label",width:"35px",height:"26px",modelType:"palette",palette:"basicpalette"});ut.ejDropDownList({dataSource:this.trendLineStyles,fields:{text:"text",value:"dashValue"},enabled:!0,width:"214px",height:"28px",popupWidth:214,showRoundedCorner:!1,cssClass:"e-designer-target e-designer-ejwidgets e-dbrd-control",template:'<div style = "height: 25px"><svg  viewBox="0 0 300 20"><line x1="0" x2="300" y1="10" y2="10" stroke="#000000" stroke-width="2"  stroke-dasharray="${dashValue}"/><\/svg><\/div>'});o=this.dashboardDesigner.locale.dialogOptions;et.ejButton({text:o.okButtonText,enabled:!0,showRoundedCorner:!0,size:"mini",click:$.proxy(this.updateTrendLineInfo,this)});ft.ejButton({text:o.cancelButtonText,showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeDialog,this,!0)})},n.prototype.updateLegendText=function(){var n=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0].text,t=this.linetypedropdown.getSelectedValue();this.trendlineDialog.find($("#"+this.id+"_legend_textdrop")).attr("textEdited")==="false"?this.trendlineDialog.find($("#"+this.id+"_legend_textdrop")).val(t+"("+n+")"):$("#"+this.id+"_legend_textdrop").val()},n.prototype.updateTrendLineType=function(n){n.selectedText==="Polynomial"?this.trendlineDialog.find("#"+this.id+"_line_orderrow").css("display","block"):this.trendlineDialog.find("#"+this.id+"_line_orderrow").css("display","none");this.updateLegendText()},n.prototype.updateTrendLineInfo=function(){$("#"+this.id+"_trendline_btn_ok").data("ejButton").disable();this.trendlineDialog.find("#"+this.id+"_legend_textdrop").attr("textEdited","false");var t=this.seriesdropdown.getItemDataByValue(this.seriesdropdown.getSelectedValue())[0],i=this.linetypedropdown.getSelectedValue(),r=this.linecolorpicker.getValue(),u=this.lineorderdropdown.getValue(),f=this.linestyledropdown.getValue(),n;n=new TrendLineSettings;n.CustomName=this.trendlineDialog.find($("#"+this.id+"_legend_textdrop")).val();n.LineColor=r;n.Name=t.text;n.LineType=i;n.LineStyle=f;n.UniqueName=t.value;n.Id=this.trendlineVal!==null?this.trendlineVal.Id:this.callInstance.trendLineId;n.Order=i==="Polynomial"?u:n.Order;ej.DashboardUtil.invokeMethod(this.callInstance.chartProperties,this.callMethod,[n]);this.closeDialog()},n.prototype.getLineStyle=function(n){switch(n){case"Solid":return"0";case"Dot":return"2,3";case"Dash":return"4,8";case"DotDash":return"2,6,6,10";case"LongDash":return"15";case"LongDashDotDot":return"20,10,5,5,5,10";default:return"0"}},n.prototype.closeDialog=function(){this.trendlineDialog.data("ejDialog").close()},n.prototype.destroy=function(){var n=this.dashboardDesigner.element.find($("#"+this.id+"_trendLine_windowdiv"));!ej.isNullOrUndefined(n)&&n.length>0&&!ej.isNullOrUndefined(n.data("ejDialog"))&&(ej.DashboardUtil.destroyEjObjects(n),n.data("ejDialog").destroy(),n.remove());this.unwireEvents()},n.prototype.wireEvents=function(){this.trendlineDialog.on("focusout",".e-trendline-legendText",$.proxy(this.setTextBoxValue,this))},n.prototype.unwireEvents=function(){this.trendlineDialog.off("focusout",".e-trendline-legendText",$.proxy(this.setTextBoxValue,this))},n}();window.ej.createObject("ej.DashboardDesignerUtility.TrendLineWindow",InternalTrendLineWindow,window);InternalUndoManager=function(){function n(){this.stack=[];this.currentIndex=-1;this.isMergeAction=!1;this.mergeAction=[];this.lastSavedActionIndex=-1;this.isPerformAction=!1;this.stack=[]}return Object.defineProperty(n,"UndoManager",{get:function(){return(this.undoManager===null||this.undoManager===undefined)&&(this.undoManager=new ej.DashboardDesignerUtility.UndoManager),this.undoManager},enumerable:!0,configurable:!0}),n.prototype.setMergeAction=function(n){this.isMergeAction=n;!n&&this.mergeAction.length>0&&(this.cmdAction(this.mergeAction),this.mergeAction=[])},n.prototype.saveActionIndex=function(){this.lastSavedActionIndex=this.currentIndex},n.prototype.cmdAction=function(n){this.isPerformAction||(this.clearRedo(),this.stack.push(n),this.currentIndex++,this.updateToolbar())},n.prototype.isUndo=function(){return this.currentIndex>=0},n.prototype.undo=function(){var n=this.stack[this.currentIndex];this.currentIndex--;this.undoAction(n);this.updateToolbar()},n.prototype.undoAction=function(n){var i,t;if(this.isPerformAction=!0,n.itemType!==undefined)this.performUndoAction(n);else for(i=n,t=0;t<i.length;t++)this.performUndoAction(i[t]);this.isPerformAction=!1},n.prototype.performUndoAction=function(n){n.action===CommandAction.ItemAdd?ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),"dispose"):n.action===CommandAction.ItemPropertyChanged?ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),n.method,n.paramsOldVal):n.action===CommandAction.ContainerPropertyChanged?ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)).getContainerInstance(),n.method,n.paramsOldVal):n.action===CommandAction.ItemResize?ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),n.method,n.paramsOldVal):n.action===CommandAction.ItemMove?ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),n.method,n.paramsOldVal):n.action===CommandAction.DesignAreaResize?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsOldVal):n.action===CommandAction.ItemDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsOldVal):n.action===CommandAction.DataSourceAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeDataSource",n.paramsNewVal):n.action===CommandAction.DataSourceDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertDataSource",n.paramsNewVal):n.action===CommandAction.DataSourceEdit?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsOldVal):n.action===CommandAction.DataSetAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeDataSet",n.paramsNewVal):n.action===CommandAction.DataSetDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertDataSet",n.paramsNewVal):n.action===CommandAction.DataSetEdit?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsOldVal):n.action===CommandAction.DataFieldDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"addDataSetField",n.paramsNewVal):n.action===CommandAction.HeaderFooterAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsNewVal):n.action===CommandAction.ReportPropertyChanged?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsOldVal):n.action===CommandAction.DataAssignAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeItem",n.paramsOldVal):n.action===CommandAction.DataAssignReplace?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"replaceItem",n.paramsOldVal):n.action===CommandAction.DataAssignDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"addItem",n.paramsOldVal):n.action===CommandAction.DataAssignUpdate?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"reorderItem",n.paramsOldVal):n.action===CommandAction.UpdateGroup?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"updateGroupInfo",n.paramsOldVal):n.action===CommandAction.UpdateSort?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"updateSortInfo",n.paramsOldVal):n.action===CommandAction.UpdateFilter?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"updateFilterInfo",n.paramsOldVal):n.action===CommandAction.ItemCollectionChanged?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsOldVal):n.action===CommandAction.ParameterAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeParameter",n.paramsNewVal):n.action===CommandAction.ParameterDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertParameter",n.paramsNewVal):n.action===CommandAction.ParameterEdit?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsOldVal):n.action===CommandAction.ParametersAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeParameters",n.paramsNewVal):n.action===CommandAction.ParametersDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"addParameters",n.paramsNewVal):n.action===CommandAction.AddImages?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"deleteImageItems",n.paramsNewVal):n.action===CommandAction.DeleteImages?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertImageItems",n.paramsNewVal):n.action===CommandAction.TextBoxContentUpdate?ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),n.method,n.paramsOldVal):n.action===CommandAction.ImageAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeImage",n.paramsNewVal):n.action===CommandAction.ImageDelete&&ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertImage",n.paramsNewVal);ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.isRedo=function(){return this.currentIndex<this.stack.length-1},n.prototype.redo=function(){this.currentIndex++;var n=this.stack[this.currentIndex];this.redoAction(n);this.updateToolbar()},n.prototype.redoAction=function(n){var i,t;if(this.isPerformAction=!0,n.itemType!==undefined)this.performRedoAction(n);else for(i=n,t=0;t<i.length;t++)this.performRedoAction(i[t]);this.isPerformAction=!1;this.currentIndex===this.lastSavedActionIndex&&ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DashboardDesigner"),"updateFileStatus",[!1])},n.prototype.performRedoAction=function(n){if(n.action===CommandAction.ItemAdd)ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsNewVal);else if(n.action===CommandAction.ItemPropertyChanged)ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),n.method,n.paramsNewVal);else if(n.action===CommandAction.ContainerPropertyChanged)ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)).getContainerInstance(),n.method,n.paramsNewVal);else if(n.action===CommandAction.ItemResize)ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),n.method,n.paramsNewVal);else if(n.action===CommandAction.ItemMove)ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),n.method,n.paramsNewVal);else if(n.action===CommandAction.DesignAreaResize)ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsNewVal);else if(n.action===CommandAction.ItemDelete){var t=$("#"+n.targetTag);t.length>0&&ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),"dispose")}else n.action===CommandAction.DataSourceAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertDataSource",n.paramsOldVal):n.action===CommandAction.DataSourceDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeDataSource",n.paramsOldVal):n.action===CommandAction.DataSourceEdit?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsNewVal):n.action===CommandAction.DataSetAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertDataSet",n.paramsOldVal):n.action===CommandAction.DataSetDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeDataSet",n.paramsOldVal):n.action===CommandAction.DataSetEdit?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsNewVal):n.action===CommandAction.DataFieldDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeDataSetField",n.paramsOldVal):n.action===CommandAction.HeaderFooterAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsOldVal):n.action===CommandAction.ReportPropertyChanged?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsNewVal):n.action===CommandAction.DataAssignAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"addItem",n.paramsOldVal):n.action===CommandAction.DataAssignReplace?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"replaceItem",n.paramsNewVal):n.action===CommandAction.DataAssignDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeItem",n.paramsOldVal):n.action===CommandAction.DataAssignUpdate?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"reorderItem",n.paramsNewVal):n.action===CommandAction.UpdateGroup?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"updateGroupInfo",n.paramsNewVal):n.action===CommandAction.UpdateSort?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"updateSortInfo",n.paramsNewVal):n.action===CommandAction.UpdateFilter?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"updateFilterInfo",n.paramsNewVal):n.action===CommandAction.ItemCollectionChanged?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsNewVal):n.action===CommandAction.ParameterAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertParameter",n.paramsOldVal):n.action===CommandAction.ParameterDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeParameter",n.paramsOldVal):n.action===CommandAction.ParameterEdit?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),n.method,n.paramsNewVal):n.action===CommandAction.ParametersAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"addParameters",n.paramsOldVal):n.action===CommandAction.ParametersDelete?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeParameters",n.paramsOldVal):n.action===CommandAction.AddImages?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertImageItems",n.paramsOldVal):n.action===CommandAction.DeleteImages?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"deleteImageItems",n.paramsOldVal):n.action===CommandAction.TextBoxContentUpdate?ej.DashboardUtil.invokeMethod(ej.DashboardUtil.getWidgetInstance($("#"+n.targetTag)),n.method,n.paramsNewVal):n.action===CommandAction.ImageAdd?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"insertImage",n.paramsOldVal):n.action===CommandAction.ImageDelete&&ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance(n.itemType),"removeImage",n.paramsOldVal);ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.updateToolbar=function(){var t=ejDashboardDesigner.getInstance("DashboardDesigner"),n=ejDashboardDesigner.getInstance("ToolBar");n.showUndo(this.isUndo());n.showRedo(this.isRedo());n.updateRptTextActions();t.updateFileStatus(this.hasItemChanges())},n.prototype.clearRedo=function(){this.stack=this.stack.slice(0,this.currentIndex+1);this.lastSavedActionIndex>this.stack.length-1&&(this.lastSavedActionIndex=-1)},n.prototype.addCmdAction=function(n,t,i,r,u,f){var e={action:n,method:t,itemType:i,paramsNewVal:f,paramsOldVal:u,targetTag:r};this.isMergeAction&&!this.isPerformAction?this.mergeAction.push(e):this.cmdAction(e)},n.prototype.hasItemChanges=function(){return this.currentIndex===this.lastSavedActionIndex?!1:!0},n.prototype.reset=function(){this.currentIndex=-1;this.isPerformAction=!1;this.stack=[];this.updateToolbar()},n}();window.ej.createObject("ej.DashboardDesignerUtility.UndoManager",InternalUndoManager,window),function(n){n[n.ItemAdd=0]="ItemAdd";n[n.ItemDelete=1]="ItemDelete";n[n.ItemMove=2]="ItemMove";n[n.ItemResize=3]="ItemResize";n[n.ItemPropertyChanged=4]="ItemPropertyChanged";n[n.ContainerPropertyChanged=5]="ContainerPropertyChanged";n[n.DesignAreaResize=6]="DesignAreaResize";n[n.ReportPropertyChanged=7]="ReportPropertyChanged";n[n.HeaderFooterAdd=8]="HeaderFooterAdd";n[n.DataSourceAdd=9]="DataSourceAdd";n[n.DataSourceEdit=10]="DataSourceEdit";n[n.DataSourceDelete=11]="DataSourceDelete";n[n.DataAssignAdd=12]="DataAssignAdd";n[n.DataAssignReplace=13]="DataAssignReplace";n[n.DataAssignDelete=14]="DataAssignDelete";n[n.DataSetAdd=15]="DataSetAdd";n[n.DataSetEdit=16]="DataSetEdit";n[n.DataSetDelete=17]="DataSetDelete";n[n.DataFieldDelete=18]="DataFieldDelete";n[n.DataAssignUpdate=19]="DataAssignUpdate";n[n.UpdateGroup=20]="UpdateGroup";n[n.UpdateSort=21]="UpdateSort";n[n.UpdateFilter=22]="UpdateFilter";n[n.ItemCollectionChanged=23]="ItemCollectionChanged";n[n.ParameterAdd=24]="ParameterAdd";n[n.ParameterEdit=25]="ParameterEdit";n[n.ParameterDelete=26]="ParameterDelete";n[n.ParametersAdd=27]="ParametersAdd";n[n.ParametersDelete=28]="ParametersDelete";n[n.ImageAdd=29]="ImageAdd";n[n.ImageDelete=30]="ImageDelete";n[n.DeleteImages=31]="DeleteImages";n[n.AddImages=32]="AddImages";n[n.TextBoxContentUpdate=33]="TextBoxContentUpdate"}(CommandAction||(CommandAction={}));InternalReportUtil=function(){function n(n,t){this.ejInstance=ej.DashboardUtil.ctrlInstance=n;ej.DashboardUtil.insUtil=this;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");ej.DashboardUtil.clientId=t||null;(ej.isNullOrUndefined(this.dashboardDesigner.model.dashboardPath)||this.dashboardDesigner.model.dashboardPath==="")&&this.InitializeClient(t)}return n.getInstance=function(){return this.insUtil},n.getQueryInstance=function(n){return n==="QueryJoiner"?ej.DashboardDesignerUtility.QueryJoiner.QueryJoiner:n==="StoreParameter"?ej.DashboardDesignerUtility.StoreParameter.StoreParameter:n==="QueryFilter"?ej.DashboardDesignerUtility.QueryFilter.QueryFilter:n==="QueryParameter"?ej.DashboardDesignerUtility.QueryParameter.QueryParameter:n==="QueryExpression"?ej.DashboardDesignerUtility.QueryExpression.QueryExpression:n==="SqlEditor"?ej.DashboardDesignerUtility.SqlEditor.Editor:n==="QueryDesigner"?$("#"+this.ctrlInstance._id+"_queryDesigner").length>0?$("#"+this.ctrlInstance._id+"_queryDesigner").data("ejQueryDesigner"):this.ctrlInstance:n==="EditConnection"?ej.DashboardDesignerUtility.EditConnection.EditConnection:void 0},n.getAllWidgets=function(){for(var r,u=ejDashboardDesigner.getInstance("DesignPanel").designCanvas,t=u.find(".e-reportitem"),i=[],n=0;n<t.length;n++)r=ej.DashboardUtil.getWidgetInstance($(t[n])),i.push(r);return i},n.prototype.getSourceData=function(n,t){var o=[],f,u,i,r;if(!ej.isNullOrUndefined(n.Values)&&n.Values.length>0)for(f=n.Values,u=0;u<f.length;u++)if(!t||f[u].Name.toLowerCase()!=="hiddencolumn")for(i=0;i<f[u].Values.length;i++)if(r=f[u].Values,!this.isDuplicate(o,r[i].DataField)&&(!t||r[i].FieldType==="Dimensions")){var s=r[i].SummaryType,h=r[i].DateTimeFormat,e=h!==DateTimeFormat[DateTimeFormat.None]?h:s!==SummaryType[SummaryType.NONE]?s:"",c=r[i].DataField+(e!==""?"("+e+")":""),l=e+(e.length>1?"(":"")+r[i].DataField+(e.length>1?")":"");o.push({Name:c,Value:l,Id:r[i].UniqueColumnName,FieldName:r[i].DataField})}return o},n.getConfiguredColumns=function(n){var i=[],t;if(!ej.isNullOrUndefined(n.Values))for(t=0;t<n.Values.length;t++)n.Values[t].Values.length>0&&i.push(n.Values[t].Values);return i},n.prototype.isDuplicate=function(n,t){for(var i=0;i<n.length;i++)if(n[i].Name===t)return!0;return!1},n.prototype.addhttp=function(n){return/^(f|ht)tps?:\/\//i.test(n)||(n="http://"+n),n},n.prototype.useExistingLinks=function(n){return ej.isNullOrUndefined(n.UrlLink)||ej.isNullOrUndefined(n.UrlLink.LinkType)||n.UrlLink.LinkType.toString()!==LinkType[LinkType.Url]&&n.UrlLink.LinkType!==LinkType.Url?(this.resetUrlLink(n),null):n.UrlLink},n.prototype.resetUrlLink=function(n){n.UrlLink.EnableLink=!1;n.UrlLink.ColumnUrlDetails=[];n.UrlLink.PassingParameters=[];n.UrlLink.UrlPath="";n.UrlLink.LinkType=LinkType.Url;n.UrlLink.GridUrlType=UrlLinkType.Row},Object.defineProperty(n,"MouseEvent",{get:function(){return ej.isNullOrUndefined(this.eventAction)&&(this.eventAction={mouseDown:"mousedown touchstart",mouseUp:"mouseup touchend",mouseMove:"mousemove touchmove",mouseOver:"mouseover",mouseLeave:"mouseleave touchleave"}),this.eventAction},enumerable:!0,configurable:!0}),n.prototype.generateColumns=function(n){for(var i=Object.keys(n[0]),r=[],t=0;t<i.length;t++)r.push(i[t]);return r},Object.defineProperty(n,"DesignerAction",{get:function(){return ej.isNullOrUndefined(this.designerAction)&&(this.designerAction={openReport:"OpenReport",testConnection:"TestConnection",dataBases:"DataBases",serverInstance:"ServerInstance",databaseSchema:"databaseSchema",executeQuery:"executeQuery",querySchema:"querySchema",openServerReport:"openServerReport",saveServerReport:"saveServerReport",createServerReport:"createServerReport",dataBaseLoad:"DataBaseLoad",rsGenerateToken:"RSGenerateToken",dataSourceCatalog:"DataSourceCatalog",sharedDataSource:"SharedDataSource",dataSetCatalog:"DataSetCatalog",categoryCatalog:"CategoryCatalog",sharedDataSet:"SharedDataSet",loadODBCDrivers:"LoadODBCDrivers",getOBDCDriver:"GetODBCDriver",previewReport:"PreviewReport",reportParameters:"ReportParameters",fetchData:"FetchData",codeView:"CodeView",cancelDataSetEdit:"CancelDataSetEdit",getData:"GetData",editDataSet:"EditDataSet",masterSlaveFilter:"MasterSlaveFilter",addNewTable:"AddNewTable",initialFilterAction:"InitialFilterAction",columnFormatting:"ColumnFormatting",deleteDataSet:"DeleteDataSet",editJoin:"EditJoin",refreshsettings:"refreshsettings",switchtoDesignView:"SwitchtoDesignView",editDataSetName:"EditDataSetName",getTableFields:"GetTableFields",cancelJoin:"CancelJoin",getColumnData:"GetColumnData",getDateRange:"GetDateRange",ReconnectDatabase:"ReconnectDatabase",RetainSchema:"RetainSchema",GetChildList:"GetChildList",getColumnValues:"GetColumnValues",GetMinMax:"GetMinMax"}),this.designerAction},enumerable:!0,configurable:!0}),n.getPixelVal=function(n){var i=n.substr(n.length-2,2),t=n.substr(0,n.length-2);switch(i.toLowerCase()){case"in":return parseFloat(t)*96;case"pt":return parseFloat(t)*96/72;case"cm":return parseFloat(t)*96/2.54;case"mm":return parseFloat(t)*96/25.4;case"pc":return parseFloat(t)*16}return parseFloat(t)},n.getSizeVal=function(n){return n.length===0?n:parseFloat(n.substr(0,n.length-2))},n.getUnitVal=function(n,t){var i=n.toString();switch(t.toLowerCase()){case"in":return parseFloat(i)/96+"in";case"pt":return parseFloat(i)*72/96+"pt";case"cm":return parseFloat(i)*(2.54/96)+"cm";case"mm":return parseFloat(i)*(25.4/96)+"mm";case"pc":return parseFloat(i)/16+"pc"}return i+t},n.setAttributes=function(n,t){for(var i in t)n.setAttributeNS(null,i,t[i])},n.destroyEjObjects=function(n,t){for(var u,i,r,e=t?$(n):$(n).find(".e-js"),f=0;f<e.length;f++)if(u=e.eq(f).data(),i=u.ejWidgets,i&&i.length)for(r=i.length-1;r>=0;r--)u[i[r]]&&u[i[r]].destroy&&u[i[r]].destroy()},n.refreshIndicator=function(n){var t=n.find(".e-waitingpopup.e-js");t.each(function(n,t){var i=$(t).data("ejWaitingPopup");i&&i.model.showOnInit&&i.refresh()})},n.updateAction=function(n,t,i){var f=ejDashboardDesigner.getInstance("PropertyPanel"),e=ejDashboardDesigner.getInstance("ReportAction"),r=ejDashboardDesigner.getInstance("DesignPanel");if(r.selectedReportItems.length>0){var o=ej.DashboardUtil.getWidgetInstance(r.selectedReportItems[0]),s=f.getPropertyElement(o.getPropertyGridItems(),t,i,-1),u=$.extend(!0,{},s);u.categoryName=i;e.renderAction(null,n+"_"+i,u)}},n.prototype.doAjaxPost=function(n,t,i,r,u,f,e){var o=this,h,c,s,a,l;return u===void 0&&(u=!1),f===void 0&&(f=!1),e===void 0&&(e=!0),c=this.ejInstance,s={headers:[],data:null,reportDesignerToken:c.authenticationToken,serviceAuthorizationToken:c.model.serviceAuthorizationToken,actionType:i.action},c.triggerEvents("ajaxBeforeLoad",s),s.data&&(a="customData",l=jQuery.parseJSON(i.data),l[a]=s.data,i.data=JSON.stringify(l)),$.ajax({type:n,url:t,async:e,crossDomain:!0,contentType:"application/json; charset=utf-8",dataType:"json",data:i.data,beforeSend:function(n){if(ej.isNullOrUndefined(ej.DashboardUtil.clientId)||ej.DashboardUtil.clientId===""||n.setRequestHeader("ClientID",ej.DashboardUtil.clientId),ej.isNullOrUndefined(o.dashboardDesigner.model.serviceAuthorizationToken)||n.setRequestHeader("Authorization",o.dashboardDesigner.model.serviceAuthorizationToken),ej.isNullOrUndefined(o.dashboardDesigner.model.serverUrl)||o.dashboardDesigner.model.serverUrl.trim()===""||n.setRequestHeader("Caller",o.dashboardDesigner.model.serverUrl),r&&r.indicator&&r.indicator.length>0&&(typeof r.indicator[0]=="string"&&typeof r.instance=="object"?ej.DashboardUtil.invokeMethod(r.instance,r.indicator[0]):ej.DashboardUtil.invokeCallBack(r.indicator[0],{})),s.headers&&s.headers.length>0)for(var t=0;t<s.headers.length;t++)n.setRequestHeader(s.headers[t].Key,s.headers[t].Value)},success:function(n,t,i){(ej.isNullOrUndefined(ej.DashboardUtil.clientId)||ej.DashboardUtil.clientId==="")&&i.getResponseHeader("ClientID")!==null&&(ej.DashboardUtil.clientId=i.getResponseHeader("ClientID"));h=n;n&&!ej.isNullOrUndefined(n.Data)&&(h=n.Data);var e="";ej.isNullOrUndefined(h)||ej.isNullOrUndefined(h.Request)||(e=h.Request);r&&(r.indicator&&r.indicator.length>0&&(typeof r.indicator[1]=="string"&&typeof r.instance=="object"?ej.DashboardUtil.invokeMethod(r.instance,r.indicator[1]):ej.DashboardUtil.invokeCallBack(r.indicator[1],{})),n.HasError&&n.IsCodeView&&!u?ej.DashboardUtil.getInstance().alertDialog(o.dashboardDesigner.locale.alertDialogTitle.InvalidQueryStatement,o.dashboardDesigner.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,n.Message):h&&h.Error&&e!==AjaxRequest.Widget&&!u?ej.DashboardUtil.getInstance().alertDialog(o.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,o.dashboardDesigner.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,h.StatusMessage):n&&n.Status===!1&&!u?n.IsOldReport||n.IsMultiTabbed?ej.DashboardUtil.getInstance().alertDialog(o.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,n.Message,IconType.warning,AlertType.Alert,!1,""):ej.DashboardUtil.getInstance().alertDialog(o.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,o.dashboardDesigner.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,n.Message):r.instance&&r.method?ej.DashboardUtil.invokeMethod(r.instance,r.method,[f?n:h]):r.fnction&&ej.DashboardUtil.invokeCallBack(r.fnction,f?n:h));c.triggerEvents("ajaxSuccess",s)},error:function(n,t,i){r&&r.indicator&&r.indicator.length>0&&(typeof r.indicator[1]=="string"&&typeof r.instance=="object"?ej.DashboardUtil.invokeMethod(r.instance,r.indicator[1]):ej.DashboardUtil.invokeCallBack(r.indicator[1],{}));u||i==="abort"||(n.status===401?ej.DashboardUtil.getInstance().alertDialog(o.dashboardDesigner.locale.alertDialogTitle.InvalidSession,o.dashboardDesigner.locale.errorMessage.authenticationFailed,IconType.errors,AlertType.Alert,!0,o.dashboardDesigner.locale.errorMessage.invalidSession):n.readyState!==0||n.responseText?ej.DashboardUtil.getInstance().alertDialog(o.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,o.dashboardDesigner.locale.errorMessage.dataFetchingError,IconType.errors,AlertType.Alert,!0,n.responseText):ej.DashboardUtil.getInstance().alertDialog(o.dashboardDesigner.locale.alertDialogTitle.dashboardDesigner,o.dashboardDesigner.locale.errorMessage.connectionRefused,IconType.errors,AlertType.Alert,!1,""));r.errfnction&&ej.DashboardUtil.invokeCallBack(r.errfnction,n);c.triggerEvents("ajaxError",s)},complete:function(n){(ej.isNullOrUndefined(ej.DashboardUtil.clientId)||ej.DashboardUtil.clientId==="")&&n.getResponseHeader("ClientID")!==null&&(ej.DashboardUtil.clientId=n.getResponseHeader("ClientID"))}})},n.prototype.InitializeClient=function(n){ej.isNullOrUndefined(n)||n===""?this.doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/Initialize",{action:"",data:{}},{fnction:function(n){ej.DashboardUtil.clientId=n.toString()}},!0):ej.DashboardUtil.clientId=n},n.doPostBack=function(n,t,i){var r={headers:[],reportDesignerToken:i.authenticationToken,serviceAuthorizationToken:i.model.serviceAuthorizationToken},e,u,o,f;i.triggerEvents("ajaxBeforeLoad",r);e=$("<form>").attr({action:n,method:"POST",name:"export"});u=function(n,t){$("<input type='hidden' title='params'>").attr({id:n,name:n,value:t}).appendTo(e)};for(o in t)u(o,t[o]);if(r.headers&&r.headers.length>0)for(f=0;f<r.headers.length;f++)u(r.headers[f].Key,r.headers[f].Value);u("reportDesignerToken",r.reportDesignerToken);r.serviceAuthorizationToken.length>0&&u("serviceAuthorizationToken",r.serviceAuthorizationToken);e.appendTo(document.body).submit().remove()},n.prototype.showTitleTip=function(n,t){var i=$("#"+this.ejInstance._id+"_designer_com_tooltip"),u=n.text(),r;if(i.length===0){r=ej.buildTag("div.e-designer-bottom-tip e-tooltip-wrap e-widget e-designer-tooltip","",{},{id:this.ejInstance._id+"_designer_com_tooltip"});$(document.body).append(r);var f=ej.buildTag("div.e-arrowTip","",{}),o=ej.buildTag("div.e-arrowTipOuter","",{}),s=ej.buildTag("div.e-arrowTipInner","",{}),e=ej.buildTag("div.e-tipContainer"),h=ej.buildTag("div",u,{},{});f.append(o).append(s);e.append(h);r.append(e);r.append(f);i=r}i.find(".e-tipContainer>div").text(u);i.css({display:t?"block":"none",top:n.offset().top-(i.height()+20),left:n.offset().left-10})},n.prototype.tagOverTip=function(n){this.showTitleTip($(n.currentTarget),!0)},n.prototype.tagOutTip=function(n){this.showTitleTip($(n.currentTarget),!1)},n.txtWaterMark=function(n,t,i){n.val()===""&&n.val(t).addClass("e-designer-txtmark");n.bind("focus",$.proxy(ej.DashboardUtil.txtfocus,this,t));n.bind("blur",$.proxy(ej.DashboardUtil.txtblur,this,t));n.bind("change keyup paste",$.proxy(ej.DashboardUtil.txtchange,this,t,i))},n.txtfocus=function(n,t){$(t.target).val()===n&&$(t.target).val("").removeClass("e-designer-txtmark")},n.txtblur=function(n,t){$(t.target).val()===""&&$(t.target).val(n).addClass("e-designer-txtmark")},n.txtchange=function(n,t,i){!ej.isNullOrUndefined(t)&&t&&$(i.target).attr("type",$(i.target).val().length>0?"password":"text")},n.invokeMethod=function(n,t,i){return i&&i.length>0,n[t].apply(n,i)},n.invokeCallBack=function(n,t){var i;n&&(typeof n=="function"?n(t):typeof n=="string"&&window[n]?(i=n,window[i](t)):typeof n=="string"&&this[n]&&(i=n,this[i](t)))},n.getWidgetInstance=function(n){return ej.isNullOrUndefined(n)?null:n.data("widgetInstance")},n.getBorderStyle=function(n){var t={};return n&&(n.TopBorder&&this.udapteBorderStyle(n.TopBorder,"-top",t),n.BottomBorder&&this.udapteBorderStyle(n.BottomBorder,"-bottom",t),n.LeftBorder&&this.udapteBorderStyle(n.LeftBorder,"-left",t),n.RightBorder&&this.udapteBorderStyle(n.RightBorder,"-right",t),n.Border&&this.udapteBorderStyle(n.Border,"",t)),t},n.udapteBorderStyle=function(n,t,i){n&&(n.Color&&(i["border"+t+"-color"]=n.Color),n.Style&&(i["border"+t+"-style"]=n.Style),n.Width&&n.Width.size&&(i["border"+t+"-width"]=n.Width.size))},n.getPaperSize=function(n){switch(n){case"A3":return{width:11.7,height:16.5};case"A4":return{width:8.27,height:11.69};case"B4(JIS)":return{width:10.12,height:14.33};case"B5(JIS)":return{width:7.17,height:10.12};case"Envelope #10":return{width:4.13,height:9.5};case"Envelope Monarch":return{width:3.88,height:7.5};case"Executive":return{width:7.25,height:10.5};case"Legal":return{width:8.5,height:14};case"Letter":return{width:8.5,height:11};case"Tabloid":return{width:11,height:17}}return null},n.getPaperType=function(n,t){var i=t,r=n;return n<t&&(r=t,i=n),i===11.7&&r===16.5?"A3":i===8.27&&r===11.69?"A4":i===10.12&&r===14.33?"B4(JIS)":i===7.17&&r===10.12?"B5(JIS)":i===4.13&&r===9.5?"Envelope #10":i===3.88&&r===7.5?"Envelope Monarch":i===7.25&&r===10.5?"Executive":i===8.5&&r===14?"Legal":i===8.5&&r===11?"Letter":i===11&&r===17?"Tabloid":"Custom"},n.isGuid=function(n){if(n&&n.length>0){n[0]==="{"&&(n=n.substring(1,n.length-1));return/^(\{){0,1}[0-9a-fA-F]{8}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{4}\-[0-9a-fA-F]{12}(\}){0,1}$/gi.test(n)}return!1},n.isNull=function(n){return n===null},n.isEmptyString=function(n){return typeof n=="string"&&!n.trim()||n===""},n.toLowerCase=function(n){return n?n.toLowerCase?n.toLowerCase():n.toString().toLowerCase():n===0||n===!1?n.toString():""},n.contains=function(n,t,i){return i?!this.isNull(n)&&!this.isNull(t)&&this.toLowerCase(n).indexOf(this.toLowerCase(t))!==-1:!this.isNull(n)&&!this.isNull(t)&&n.toString().indexOf(t)!==-1},n.getFileName=function(n){var t=n.lastIndexOf("/");return t!==-1?n.substr(t+1):n},n.isEqualObj=function(n,t){if(n===null||n===undefined||t===null||t===undefined)return n===t;if(n.constructor!==t.constructor)return!1;if(n instanceof Function||n instanceof RegExp)return n===t;if(n===t||n.valueOf()===t.valueOf())return!0;if(Array.isArray(n)&&n.length!==t.length||n instanceof Date||!(n instanceof Object)||!(t instanceof Object))return!1;var i=Object.keys(n);return Object.keys(t).every(function(n){return i.indexOf(n)!==-1})&&i.every(function(i){return ej.DashboardUtil.isEqualObj(n[i],t[i])})},n.getCacheFolder=function(n){return"../Cache/"+n+"/"},n.encryptData=function(n){return n},n.decryptData=function(n){return n},n.textWidth=function(n,t){var i=$("<span>").hide().appendTo(document.body),r;return i.text(n).css("font",t),r=i.width(),i.remove(),r},n.textHeight=function(n,t){var i=$("<span>").hide().appendTo(document.body),r;return i.text(n).css(t),r=i.height(),i.remove(),r},n.isExistTextWidth=function(n,t){var i=n.clone().css({display:"inline",width:"auto",visibility:"hidden"}).appendTo(document.body),r=i.width();return i.remove(),!ej.isNullOrUndefined(t)&&t?r>=parseInt(n.css("max-width"),10):$(n).prop("scrollWidth")>0?$(n).prop("scrollWidth")>$(n).prop("offsetWidth"):r>n.width()},n.parseQuery=function(n){var r=/(?:^|\W)@(\w+)(?!\w)/g,i=[],t;do t=r.exec(n),t&&i.push("@"+t[1]);while(t);return i},n.getItemInstance=function(n){switch(n){case"Syncfusion.RDL.DOM.Image":case"e-image":return new ej.DashboardDesignerUtility.ImageItem;case"Syncfusion.RDL.DOM.Chart":case"e-chart-bar":return new ej.DashboardDesignerUtility.ChartItem;case"Syncfusion.RDL.DOM.Tablix":case"e-grid-item":return new ej.DashboardDesignerUtility.GridItem;case"e-pivotgrid-item":return new ej.DashboardDesignerUtility.PivotGridItem;case"Syncfusion.RDL.DOM.Gauge":case"e-gauge":return new ej.DashboardDesignerUtility.GaugeItem}return null},n.rplSpecialChar=function(n){return n.replace(/([ #$%&()*+,./:;<=>?@\[\\\]^\{|}~])/g,"_")},n.escapeSelector=function(n){var t={"&":"__amp__","<":"__lt__",">":"__gt__","\\":"__34__","'":"__39__","(":"__oparen__",")":"__cparen__","{":"__obraces__","}":"__cbraces__","[":"__obrackets__","]":"__cbrackets__","*":"__star__",$:"__dollar__","%":"__percen__","+":"__plus__",",":"__comma__",".":"__dot__"," ":"__space__",":":"__col__",";":"__semmi__","=":"__equal__","?":"__quest__","~":"__delta__","^":"__power__","#":"__hash__",'"':"__dquotes__"};return n.replace(/([ #$%&()*+,./:;<=>?@\[\\\]^\{|}~\'"])/g,function(n){return t[n]})},n.isDateTimeType=function(n){var t=n?n.toLowerCase():"";return t==="datetime"||t==="smalldatetime"||t==="system.datetime"||t==="system.timespan"||t==="date"?!0:!1},n.getDataTypeStyle=function(n,t){var r="e-reportdesigner-dataset-misc",i=ej.isNullOrUndefined(t)?n.DataType?n.DataType.toLowerCase():"":t.toLowerCase();return!ej.isNullOrUndefined(n.IsPrimaryKey)&&n.IsPrimaryKey?r="e-reportdesigner-dataset-primarykey e-number":i==="datetime"||i==="smalldatetime"||i==="system.datetime"||i==="system.timespan"||i==="date"?r="e-reportdesigner-dataset-datetime":i==="System.Time"||i.toLowerCase()==="time"?r="e-reportdesigner-dataset-time":i==="tinyint"||i==="smallint"||i==="int"||i==="bigint"||i==="smallmoney"||i==="money"||i==="numeric"||i==="decimal"||i==="real"||i==="float"||i==="system.double"||i==="system.single"||i==="system.decimal"||i==="system.byte"||i==="system.int16"||i==="system.int32"||i==="system.int64"||i==="integer"?r="e-reportdesigner-dataset-number":i==="bit"||i==="system.boolean"||i==="boolean"?r="e-reportdesigner-dataset-boolean":i==="varchar"||i==="nvarchar"||i==="nchar"||i.indexOf("char")!==-1?r="e-reportdesigner-dataset-char":(i==="text"||i==="ntext"||i==="string")&&(r="e-reportdesigner-dataset-string"),r},n.getDatasetTypeIcon=function(n){return n==="System.Int32"||n==="System.UInt32"||n==="System.Decimal"||n==="System.Double"||n==="System.Single"||n==="System.Int64"||n==="System.UInt64"||n==="System.Int16"||n==="System.UInt16"||n.toLowerCase()==="integer"||n.toLowerCase()==="real"?"e-reportdesigner-dataset-number":n==="System.String"||n.toLowerCase()==="string"?"e-reportdesigner-dataset-string":n==="System.Char"?"e-reportdesigner-dataset-char":n==="System.DateTime"||n.toLowerCase()==="date"?"e-reportdesigner-dataset-datetime":n==="System.Time"||n.toLowerCase()==="time"?"e-reportdesigner-dataset-time":n==="System.Boolean"||n.toLowerCase()==="boolean"?"e-reportdesigner-dataset-boolean":"e-reportdesigner-dataset-misc"},n.isDateField=function(n){return n==="e-reportdesigner-dataset-datetime"||n==="e-reportdesigner-dataset-time"},n.renderErrIndictor=function(n,t,i){var r=ej.buildTag("span.e-designer-error-icon e-reportdesigner-errorinfo e-error-tip","",{float:"right",display:"none"},{"e-errormsg":i});n.append(r);r.bind(ej.DashboardUtil.MouseEvent.mouseOver+" "+ej.DashboardUtil.MouseEvent.mouseDown,$.proxy(ej.DashboardUtil.showErrTip,this,t));r.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(ej.DashboardUtil.hideErrTip,this,t))},n.showErrIndictor=function(n,t,i){var r=n.find(".e-error-tip");r.attr("e-errormsg",i).css("display",t?"block":"none")},n.showErrTip=function(n,t){var i,r;t.preventDefault();i=$(t.currentTarget);r=$("#"+n+"_error_tooltip");$("#"+n+"_error_tooltip_content").text(i.attr("e-errormsg"));var e=i.offset(),u=i.closest(".e-dialog.e-widget"),f=1e3;u&&u.length>0&&(f=parseInt(u.css("zIndex"),10)+1);r.css({left:e.left+i.width()/2-r.width(),top:e.top+i.height()+i.height()/2,display:"block",zIndex:isNaN(f)?1e3:f})},n.hideErrTip=function(n){$("#"+n+"_error_tooltip").css("display","none")},n.renderErrorToolTip=function(n){if($("#"+n+"_error_tooltip").length===0){var t=ej.buildTag("div.e-designer-right-tip e-tooltip-wrap e-widget e-designer-tooltip e-designer-error-tip","",{display:"none"},{id:n+"_error_tooltip"}),i=ej.buildTag("div.e-tipContainer"),r=ej.buildTag("div","",{},{id:n+"_error_tooltip_content"});$(document.body).append(t);t.append(i);i.append(r)}},n.prototype.getIcon=function(n,t){var r=this.dashboardDesigner._id,i=null,e=ej.buildTag("td.e-alert-icon","",{width:"45px","vertical-align":"middle"},{id:r+"_icon_cell"}),u=ej.buildTag("div","",{display:"inline-block",float:"left",width:"40px",height:"40px","vertical-align":"middle","text-align":"center","line-height":"1"}),o=ej.buildTag("div","",{width:"100%"},{id:r+"_icon"}),f=ej.buildTag("div.e-designer-cursor e-widgeticon "+t,"",{display:"table-cell"},{id:n}),s=ej.buildTag("span","",{},{"class":t,display:"inline-block","padding-bottom":"4px"});return f.append(s),i=e,i.append(u),u.append(o).append(f),i},n.prototype.alertDialog=function(n,t,i,r,u,f,e){var o=this.dashboardDesigner._id,s=$("#"+o+"_designer_alert"),h,c,g,y,p;s.length>0&&($("#"+o+"_designer_alert_foot button").off(),h=s.data("ejDialog"),h&&h.isOpen()&&h.close());s=ej.buildTag("div","",{height:"auto"},{id:o+"_designer_alert"});s.html("");this.dashboardDesigner.element.append(s);var l=ej.buildTag("div","",{height:"auto",display:"block"}),b=ej.buildTag("div","",{display:"block",width:"100%",height:"auto"},{}),k=ej.buildTag("table.e-designer-exp-table","",{width:"100%"}),a=ej.buildTag("tr.e-designer-exp-row","",{}),v=ej.buildTag("td","",{"max-width":"310px"},{}),d=ej.buildTag("div.e-designer-cursor","",{width:"auto","word-wrap":"break-word","line-height":"1"}),nt=ej.buildTag("span.e-designer-fontfamily",t,{"font-size":"13px"},{});if(this.alertIconType(i,a,v),s.append(l),l.append(b),b.append(k),k.append(a),a.append(v),v.append(d),d.append(nt),u&&this.alertWindowContentDetail(l),s.ejDialog({enableModal:!0,enableResize:!1,showRoundedCorner:!1,cssClass:"e-fe-dialog e-designer-alertbox e-dashboarddesigner",title:n,minWidth:"400",minHeight:"auto",backgroundScroll:!1,height:"auto",width:u?"519":"400",showOnInit:!1,showFooter:!0,close:$.proxy(ej.DashboardUtil.closeDialog,this),closeOnEscape:r!==AlertType.Confirm}),c=$("#"+o+"_designer_alert_foot").css("border","0px"),this.alertWindowFooter(r,c,e),u){s.find("#"+o+"_detail_content").html(f);g=s.find("#"+o+"_alert_link_detail");y=ej.buildTag("button.e-designer-content e-designer-alert-cancelbtn e-dbrd-hand-cursor",this.dashboardDesigner.locale.alertWindow.copyToClipboardBtnText,{float:"left",visibility:"hidden"},{id:o+"_alert_footerCopy"});c.append(y);y.ejButton({width:"120px",height:"28px",showRoundedCorner:!1,contentType:ej.ContentType.TextOnly,size:"small",click:$.proxy(this.copyDetailContent,this,o)});g.on("click",$.proxy(this.alertShowDetails,this,o))}p=$("#"+o+"_designer_alert_closebutton");p.off("click",$.proxy(this.onFooterCancelClick,this.ejInstance));p.on("click",$.proxy(this.onFooterCancelClick,this.ejInstance,e,o));var tt=s.data("ejDialog"),it=$("#"+o+"_designer_alert_title"),rt=$("#"+o+"_designer_alert_wrapper"),w=tt.scroller;w&&(w.setModel({height:rt.height()-(c.height()+it.height())-83}),w.refresh());s.data("ejDialog").open()},n.prototype.alertIconType=function(n,t,i){var u=this.dashboardDesigner._id,r;if(n!==""){r=null;switch(n){case IconType.warning:r=this.getIcon(u+"_warn_icon",IconType.warning);break;case IconType.errors:r=this.getIcon(u+"_errors_icon",IconType.errors);break;case IconType.information:r=this.getIcon(u+"_information_icon",IconType.information);break;case IconType.success:r=this.getIcon(u+"_success_icon",IconType.success);break;case IconType.question:r=this.getIcon(u+"_question_icon",IconType.question)}t.append(r).append(i)}else t.append(i)},n.prototype.alertWindowContentDetail=function(n){var t=this.dashboardDesigner._id,r=ej.buildTag("div","",{display:"block",width:"100%",height:"100%"},{id:t+"_alert_link_div"}),u=ej.buildTag("a.e-designer-fontfamily",this.dashboardDesigner.locale.alertWindow.showDetailsText,{"font-size":"12px","font-weight":"600","margin-bottom":"18px","margin-top":"18px","margin-left":"57px",color:"#179bd7","text-decoration":"none",outline:"none"},{href:"javascript:void(0);",color:"#0B0080",id:t+"_alert_link_detail"}),i=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{"word-wrap":"break-word","overflow-x":"hidden",height:"100px",width:"475px",margin:"24px 0px 0px 5px",border:"1px solid #c8c8c8",display:"none","border-radius":"2px",position:"relative"},{id:t+"_msg_container"}),f=ej.buildTag("span.e-designer-error-content","",{width:"100%"},{id:t+"_detail_content"});return n.append(r),r.append(u),n.append(i),i.append(f),i.ejScroller({autoHide:!0,height:"100px",scrollerSize:9,buttonSize:14}),n},n.prototype.alertWindowFooter=function(n,t,i){var r=this.dashboardDesigner._id,e,u,f;switch(n){case AlertType.Alert:e=t.find("#"+r+"_alert_footerOk");e.length===0&&(e=ej.buildTag("button.e-designer-content e-designer-alert-okbtn e-dbrd-hand-cursor",this.dashboardDesigner.locale.alertWindow.okBtnText,{float:"right","margin-right":"0px"},{id:r+"_alert_footerOk"}),t.append(e),e.ejButton({width:"75px",height:"28px",showRoundedCorner:!1,contentType:ej.ContentType.TextAndImage,size:"small"}));e.off("click",$.proxy(this.onFooterCancelClick,this.ejInstance));e.on("click",$.proxy(this.onFooterCancelClick,this.ejInstance,i,r));break;case AlertType.Confirm:u=$("#"+r+"_alert_footerYes");f=$("#"+r+"_alert_footerNo");u.length===0&&f.length===0&&(u=ej.buildTag("button.e-designer-content e-designer-alert-okbtn e-dbrd-hand-cursor",this.dashboardDesigner.locale.alertWindow.yesBtnText,{float:"right","margin-right":"10px"},{id:r+"_alert_footerYes"}),f=ej.buildTag("button.e-designer-content e-designer-alert-cancelbtn e-dbrd-hand-cursor",this.dashboardDesigner.locale.alertWindow.noBtnText,{float:"right"},{id:r+"_alert_footerNo"}),t.append(f).append(u),u.ejButton({width:"75px",height:"28px",showRoundedCorner:!1,contentType:ej.ContentType.TextAndImage,size:"small"}),f.ejButton({width:"75px",height:"28px",showRoundedCorner:!1,contentType:ej.ContentType.TextAndImage,size:"small"}));f.text(this.dashboardDesigner.locale.alertWindow.noBtnText);u.text(this.dashboardDesigner.locale.alertWindow.yesBtnText);u.css("margin-right","10px");f.css("display","block");u.off("click",$.proxy(this.onFooterOkClick,this.ejInstance));f.off("click",$.proxy(this.onFooterCancelClick,this.ejInstance));u.on("click",$.proxy(this.onFooterOkClick,this.ejInstance,i,r));f.on("click",$.proxy(this.onFooterCancelClick,this.ejInstance,i,r))}return t},n.prototype.alertShowDetails=function(n){var i=ejDashboardDesigner.getInstance("DashboardDesigner"),t=$("#"+n+"_msg_container"),r;t.is(":visible")?(t.css("display","none"),$("#"+n+"_alert_link_detail").text(i.locale.alertWindow.showDetailsText),$("#"+n+"_alert_footerCopy").css("visibility","hidden"),r=$("#"+n+"_designer_alert").data("ejDialog"),r.setModel({Width:400})):($("#"+n+"_designer_alert_wrapper").children(".e-dialog-scroller").css("height","auto"),$("#"+n+"_designer_alert").css("height","auto"),t.css("display","block"),t.data("ejScroller").refresh(),$("#"+n+"_alert_link_detail").text(i.locale.alertWindow.hideDetailsText),$("#"+n+"_alert_footerCopy").css("visibility","visible"))},n.prototype.copyDetailContent=function(n){ej.DashboardUtil.copyToClipboard($("#"+n+"_detail_content"))},n.prototype.onFooterOkClick=function(n,t){var i=$("#"+t+"_designer_alert").data("ejDialog");i&&i.close();n&&n.instance&&n.method&&ej.DashboardUtil.invokeMethod(n.instance,n.method,[!0,n.dataInfo])},n.prototype.onFooterCancelClick=function(n,t){var i=$("#"+t+"_designer_alert").data("ejDialog");i&&i.close();n&&n.instance&&n.method&&ej.DashboardUtil.invokeMethod(n.instance,n.method,[!1,n.dataInfo])},n.copyToClipboard=function(n){var t=$("<input>");t.appendTo(document.body);t.val(n.text()).select();document.execCommand("copy",!1,null);t.remove()},n.prototype.validateAndUpdateParameterColumn=function(){var t=[],e=ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.Name,f,r,i,n,u;for(t=this.createParameterColumn(e,t,null),f=ejDashboardDesigner.getInstance("DesignPanel").designCanvas,r=f.find(".e-reportitem"),i=0;i<r.length;i++)n=ej.DashboardUtil.getWidgetInstance(r.eq(i)),ej.isNullOrUndefined(n)||(r.eq(i).hasClass("e-label-item")?t=this.createParameterColumn(n.labelContentText,t,null):(n.getReportItemJson().ContainerSettings.SubTitle!==" "&&(t=this.createParameterColumn(n.getReportItemJson().ContainerSettings.SubTitle,t,n.getReportItemJson().Data.Id)),!ej.isNullOrUndefined(n.getReportItemJson().SubTitleSettings)&&n.getReportItemJson().SubTitleSettings.Visibility&&n.getReportItemJson().SubTitleSettings.Text!==" "&&(t=this.createParameterColumn(n.getReportItemJson().SubTitleSettings.Text,t,n.getReportItemJson().Data.Id)),n.getReportItemJson().ContainerSettings.Description!==" "&&(t=this.createParameterColumn(n.getReportItemJson().ContainerSettings.Description,t,n.getReportItemJson().Data.Id)),n.getReportItemJson().ContainerSettings.Title!==" "&&(t=this.createParameterColumn(n.getReportItemJson().ContainerSettings.Title,t,n.getReportItemJson().Data.Id))),u=n.getWidgetParameterColumnContent(),t=this.createParameterColumn(u.Value,t,u.Id));ej.DashboardDesignerUtility.Serialization.getInstance().dashboardPropertyJson.ParameterColumns=t;ej.DashboardDesignerUtility.Serialization.notifyChange()},n.prototype.createParameterColumn=function(n,t,i){var v=this,y=RegExp("{{:(.*?)}}","g"),p=RegExp("^DistinctCount([(.*?)])|^DCount([(.*?)])|^Minimum([(.*?)])|^Maximum([(.*?)])|^Average([(.*?)])|^StandardDeviation([(.*?)])|^Variance([(.*?)])|^WeightedAvg([(.*?)])|^WeightedAverage([(.*?)])|^StDev([(.*?)])|^Var([(.*?)])|^Sum([(.*?)])|^Avg([(.*?)])|^Count([(.*?)])|^Year([(.*?)])|^MonthYear([(.*?)])|^MonthName([(.*?)])|^DayMonthYear([(.*?)])|^MonthDayYear([(.*?)])|^QuarterYear([(.*?)])|^Quarter([(.*?)])|^DateHour([(.*?)])|^DayOfWeek([(.*?)])|^DayOfYear([(.*?)])|^Hours([(.*?)])|^Minutes([(.*?)])|^Seconds([(.*?)])|^WeekOfMonth([(.*?)])|^WeekOfYear([(.*?)])|^Day([(.*?)])|^Max([(.*?)])|^Min([(.*?)])|^WeekYear([(.*?)])|^Time([(.*?)])|^DateTime([(.*?)])|^Date([(.*?)])|^TimeSpan([(.*?)])|^TimeSpanHours([(.*?)])|^TimeSpanMinutes([(.*?)])|^TimeSpanDays([(.*?)])|^TimeSpanWeeks([(.*?)])|^TimeSpanMonths([(.*?)])|^TimeSpanYears([(.*?)])|^TimeSpanInMinutes([(.*?)])|^TimeSpanInHours([(.*?)])|^Month([(.*?)])","ig"),h=!1,s,u,a=!1,r,f,c,l;if(y.test(n)){var e=n.match(y),w=function(n){var g,w,b,y,l,k,d;h=!1;r=SummaryType.SUM;f=DateAndTimeFormat.None;u=e[n].substring(3,e[n].length-2);p.test(u)?(g=u.match(p),w=g[0].substring(0,g[0].length-1),!ej.isNullOrUndefined(w)&&w.length>0&&(r=o.getValidSummaryType(w.toLowerCase()),r===null||r==="None"?(f=DateTimeFormat[o.getValidDateFormat(w.toLowerCase())],h=!1):h=!0,u=u.replace(w,""),s=u.substring(1,u.length-1),a=!0)):(s=u,a=!1);b=o.validateColumn(s,h,r,f,a,i);b.isValid&&(c=o.checkIfKeyPresent(b.datasourceId,t),y=b.field,l=new ParameterColumnItem,y!==null&&y.length!==0&&(c==null?(k=[],l.MatchText=e[n],l.ColumnName=y[0].Name,l.ColumnType=o.getColumnType(y[0].TypeName),l.SummaryType=r,l.DateFormat=f,k.filter(function(t){return t.ColumnName===s&&t.SummaryType===r&&t.DateFormat===f&&t.MatchText===e[n]&&t.ColumnType===v.getColumnType(y[0].TypeName)}).length===0&&(k.push(l),d=new ParameterColumn,d.DataSourceId=b.datasourceId,d.ColumnList=k,t.push(d))):c.ColumnList.filter(function(t){return t.ColumnName===s&&t.SummaryType===r&&t.DateFormat===f&&t.MatchText===e[n]&&t.ColumnType===v.getColumnType(y[0].TypeName)}).length===0&&(l.MatchText=e[n],l.ColumnName=y[0].Name,l.ColumnType=o.getColumnType(y[0].TypeName),l.SummaryType=r,l.DateFormat=f,c.ColumnList.push(l))))},o=this;for(l=0;l<e.length;l++)w(l)}return t},n.prototype.getParameterizedText=function(n,t,i){return n.forEach(function(n){t=t.replace(n,"<span data-param='"+n+"' data-source='"+i+"' style= 'font-weight: bold ' > "+n+"<\/span>")}),t},n.prototype.getResultantParameterString=function(n,t){var i=ejDashboardDesigner.getInstance("PropertyPanel").GetValidParameterCollection(n,t);return ej.DashboardUtil.getInstance().getParameterizedText(i,n,t)},n.prototype.getValidSummaryType=function(n){switch(n){case"sum":return"SUM";case"count":return"COUNT";case"distinctcount":case"dcount":return"COUNTD";case"avg":case"average":return"AVG";case"max":case"maximum":return"MAX";case"min":case"minimum":return"MIN";case"var":case"variance":return"VAR";case"stdev":return"STDEV"}return"None"},n.prototype.getValidDateFormat=function(n){switch(n){case"year":return"Year";case"none":return"None";case"month":return"Month";case"day":return"Day";case"quarter":return"Quarter";case"monthyear":return"MonthYear";case"quarteryear":return"QuarterYear";case"daymonthyear":return"DayMonthYear";case"minutes":return"Minute";case"datehour":return"DateHour";case"dayofweek":return"DayOfWeek";case"weekofyear":return"WeekofYear";case"timespan":return"TimeSpan";case"timespanhours":return"TimeSpanHours";case"timespanminutes":return"TimeSpanMinutes";case"timespandays":return"TimeSpanDays";case"timespanweeks":return"TimeSpanWeeks";case"timespanmonths":return"TimeSpanMonths";case"timespanyears":return"TimeSpanYears";case"timespaninminutes":return"TimeSpanInMinutes";case"timespaninhours":return"TimeSpanInHours";case"monthdayyear":return"MonthDayYear";case"datetime":return"DateTime";case"date":return"Date"}return""},n.prototype.GetPreviewFeatureValue=function(n,t){var r=null,i;if(!ej.isNullOrUndefined(n)){for(i=0;i<n.length;i++)if(n[i].FeatureName===t){r=JSON.parse(n[i].Value);break}return r}return null},n.prototype.checkIfKeyPresent=function(n,t){for(var r=null,i=0;i<t.length;i++)if(t[i].DataSourceId===n){r=t[i];break}return r},n.prototype.validateColumn=function(n,t,i,r,u,f){var e=ejDashboardDesigner.getInstance("DataSet").datasets,h=null,o,c,s;if(n.split(".").length>1)for(o=0;o<e.length;o++)n.split(".")[0]===e[o].Name&&(f=e[o].Id);for(c=ej.isNullOrUndefined(f)?e:e.filter(function(n){return n.Id===f}),s=0;s<c.length;s++)if(h=this.getFieldInfo(c[s],n,t,i,r,u,f),h.isValid)break;return h},n.prototype.getFieldInfo=function(n,t,i,r,u,f,e){var o=null,s=!1,h=e;return t.split(".").length>1&&t.split(".")[0]===n.Name&&(t=t.replace(n.Name+".","")),o=n.Fields.filter(function(n){return n.Name===t}),o.length!==0&&(h=n.Id,i&&o[0].TypeName!=="Date"&&o[0].TypeName!=="String"&&o[0].TypeName!=="Datetime"?s=!0:!i&&(u===0||u==="None")||f&&(r===SummaryType[SummaryType.COUNT]||SummaryType[SummaryType.COUNTD])?s=!0:i||u===0&&u==="None"||o[0].TypeName!=="Date"||(s=!0)),{field:o,datasourceId:h,isValid:s}},n.prototype.getColumnType=function(n){return n==="String"||n==="Boolean"?FieldType.Dimensions:n==="Date"?FieldType.DateTime:FieldType.Measures},n.createDataSource=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DataSources.DataSource",Name:"",Id:"",SiteId:"",Transaction:!1,DataSourceReference:null,SecurityType:"DataBase",ServerName:"",Permission:{CanWrite:!0},ConnectionProperties:{__type:"Syncfusion.Dashboard.Web.Serialization.Model.Connection.ConnectionProperties",ConnectString:"",EmbedCredentials:!1,DataProvider:"",IsDesignState:!1,IntegratedSecurity:!1,UserName:"",PassWord:"",Prompt:"",DSNName:"",Service:"",Port:"",Database:"",ServerName:""}}},n.getColorCode=function(n){if(!ej.isNullOrUndefined(n)){var t=n.toLowerCase(),i={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4","indianred ":"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};if(ej.isNullOrUndefined(i[t])){if(t==="transparent"||t==="#00ffffff")return""}else return i[t];return n}},n.validateDataDrag=function(n){var t=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),i=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DesignPanel"),"getWidgetItemType",[t.getReportItemJson()]);switch(i){case"e-treemap-item":return!(n.categoryType===CategoryType[CategoryType.Non_Numeric]&&n.fieldType===FieldType[FieldType.Measures]);case"e-bubblemap-item":return!(n.categoryType===CategoryType[CategoryType.Non_Numeric]&&n.fieldType===FieldType[FieldType.Measures]);case"e-choroplethmap-item":return!(n.categoryType===CategoryType[CategoryType.Non_Numeric]&&n.fieldType===FieldType[FieldType.Measures]);case"e-card-item":return!(n.categoryType===CategoryType[CategoryType.Non_Numeric]&&n.fieldType===FieldType[FieldType.Measures])}return!0},n.validateDataDrop=function(n){var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),e=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DesignPanel"),"getWidgetItemType",[i.getReportItemJson()]),f=ejDashboardDesigner.getInstance("DashboardDesigner"),r=!0,u="",t;switch(e){case"e-chart-bar":if(!ej.isNullOrUndefined(n.fieldType)&&n.fieldType.toLowerCase()==="dimensions")for(t=0;t<i.dataGroupInfo.Values.length;t++)if(u=i.dataGroupInfo.Values[t].Name.toLowerCase()===n.elementCategoryInfo.toLowerCase()?n.elementCategoryInfo.toLowerCase():"",u==="column"&&i.dataGroupInfo.Values[t].Values.length===0){r=!0;break}else u==="column"&&i.dataGroupInfo.Values[t].Values.length===1&&(ej.DashboardUtil.getInstance().alertDialog(f.locale.multiLevelDrillDialog.titleText,f.locale.multiLevelDrillDialog.dialogContentText,IconType.question,AlertType.Confirm,!1,"",{height:140,width:500,method:"getDialogOutput",instance:this,dataInfo:{eventInfo:n}}),r=!1);break;default:r=!0}return r},n.getDialogOutput=function(n,t){ejDashboardDesigner.getInstance("DragOnDrop").dragStop(t.eventInfo.eventObject,n,t.eventInfo.droppedItem)},n.getDefaultSummaryType=function(n,t){var i;return t===CategoryType[CategoryType.Numeric]?n==="Measures"?i=SummaryType.SUM:n==="Dimensions"&&(i=SummaryType.COUNT):i=SummaryType.NONE,i},n.getDefaultDateFormat=function(){var t=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),i=t.controlType,n;switch(i){case"DatePicker":n=DateTimeFormat[DateTimeFormat.Date]}return n},n.formattedText=function(n,t,i,r,u,f,e,o){var h;if(ej.isNullOrUndefined(n)||n==="(Blanks)"||n==="null"||isNaN(n))return"";if(o==="false")return n;var s=n,c="",y=1,v=Math.pow(10,3),l=Math.pow(10,6),a=Math.pow(10,9);if(r!==DataValueFormat.Percentage)switch(e){case NumberFormat.Auto:n>=v&&n<l||n<=-v&&n>-l?(s=n/v,c="K"):n>=l&&n<a||n<=-l&&n>-a?(s=n/l,c="M"):(n>=a||n<=-a)&&(s=n/a,c="B");break;case NumberFormat.Ones:s=n/y;break;case NumberFormat.Thousands:s=n/v;c="k";break;case NumberFormat.Millions:s=n/l;c="M";break;case NumberFormat.Billions:s=n/a;c="B"}else s=n/y;if(h="",o!=null){e===NumberFormat.Auto&&(i=2);switch(r){case DataValueFormat.Currency:h="C"+i;break;case DataValueFormat.Number:h="N"+i;break;case DataValueFormat.Percentage:h="P"+i;break;default:h=""}e===NumberFormat.Auto&&i!==0&&(s===0||s===parseInt(s.toString(),10)||s%i==0)&&r!==DataValueFormat.Percentage&&(h=h.replace(i,"0"))}return u=u==="null"||u===null?"":u,f=f==="null"||f===null?"":f,u+ej.globalize.format(s,h,t)+c+f},n.formattedValue=function(n,t,i,r){var v=t.Culture,o=t.DecimalPoints,l=t.FormatType,e;if(ej.isNullOrUndefined(n)||n==="(Blanks)"||n==="null")return"";if(r==="false")return n;var u=n,f="",a=1,c=Math.pow(10,3),s=Math.pow(10,6),h=Math.pow(10,9);if(l!==DataValueFormat.Percentage)switch(i){case NumberFormat.Auto:n>=c&&n<s||n<=-c&&n>-s?(u=n/c,f="K"):n>=s&&n<h||n<=-s&&n>-h?(u=n/s,f="M"):(n>=h||n<=-h)&&(u=n/h,f="B");break;case NumberFormat.Ones:u=n/a;break;case NumberFormat.Thousands:u=n/c;f="K";break;case NumberFormat.Millions:u=n/s;f="M";break;case NumberFormat.Billions:u=n/h;f="B"}else u=n/a;if(e="",r!=null){i===NumberFormat.Auto&&(o=2);switch(l){case DataValueFormat.Currency:e="C"+o;break;case DataValueFormat.Number:e="N"+o;break;case DataValueFormat.Percentage:e="P"+o;break;default:e=""}i===NumberFormat.Auto&&o!==0&&(u===0||u===parseInt(u.toString(),10)||u%o==0)&&l!==DataValueFormat.Percentage&&(e=e.replace(o,"0"))}return{formattedText:ej.globalize.format(u,e,v)+f,formattedValue:u,numberFormat:f}},n.getFormattedValue=function(n,t){var i=0,r=Math.pow(10,3),u=Math.pow(10,6),f=Math.pow(10,9),e=Math.pow(10,5),o=Math.pow(10,7),s=Math.pow(10,12);switch(t){case"K":i=n/r;break;case"L":i=n/e;break;case"M":i=n/u;break;case"C":i=n/o;break;case"B":i=n/f;break;case"T":i=n/s;break;default:i=n/1}return i},n.AddActivityLog=function(n,t,i,r){r===void 0&&(r=null);var f=ejDashboardDesigner.getInstance("DashboardDesigner"),u=new ActivityLog;u.Action=ej.DashboardDesignerUtility.Serialization.enumToString(ActivityLogEvents,n);u.ItemId=r!=null?r:f.model.itemId;u.ItemSubType=ej.DashboardDesignerUtility.Serialization.enumToString(ActivityLogItemSubTypes,i);u.ItemType=ej.DashboardDesignerUtility.Serialization.enumToString(ActivityLogItemType,t);ej.DashboardUtil.getInstance().doAjaxPost("POST",f.model.serviceUrl+"/addactivitylog",{data:JSON.stringify({activityLog:u})},{},!0)},n.getFontNames=function(){return["Andale Mono","Arial","Arial Black","Arial Narrow","Bodoni MT","Book Antiqua","Brush Script MT","Calibri","Calisto MT","Cambria","Candara","Century Gothic","Consolas","Copperplate","Courier New","Didot","Garamond","Georgia","Goudy Old Style","Helvetica","Impact","Lucida Bright","Lucida Console","Lucida Sans Typewriter","Papyrus","Perpetua","Roboto","Rockwell","Segoe UI","Tahoma","Times New Roman","Trebuchet MS","Verdana"]},n.getCultures=function(){return[{Name:"af-ZA",DisplayName:"Afrikaans (South Africa)",CurrencySymbol:"R",CurrencyCode:"ZAR"},{Name:"sq-AL",DisplayName:"Albanian (Albania)",CurrencySymbol:"Lekë",CurrencyCode:"ALL"},{Name:"gsw-FR",DisplayName:"Alsatian (France)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"am-ET",DisplayName:"Amharic (Ethiopia)",CurrencySymbol:"ብር",CurrencyCode:"AMD"},{Name:"ar-AE",DisplayName:"Arabic (U.A.E.)",CurrencySymbol:"د.إ.‏",CurrencyCode:"AED"},{Name:"hy-AM",DisplayName:"Armenian (Armenia)",CurrencySymbol:"֏",CurrencyCode:"AMD"},{Name:"ar-BH",DisplayName:"Arabic (Bahrain)",CurrencySymbol:"د.ب.‏",CurrencyCode:"BHD"},{Name:"ar-DZ",DisplayName:"Arabic (Algeria)",CurrencySymbol:"د.ج.‏",CurrencyCode:"DZD"},{Name:"ar-EG",DisplayName:"Arabic (Egypt)",CurrencySymbol:"ج.م.‏",CurrencyCode:"EGP"},{Name:"ar-IQ",DisplayName:"Arabic (Iraq)",CurrencySymbol:"د.ع.‏",CurrencyCode:"IQD"},{Name:"ar-JO",DisplayName:"Arabic (Jordan)",CurrencySymbol:"د.ا.‏",CurrencyCode:"JOD"},{Name:"ar-KW",DisplayName:"Arabic (Kuwait)",CurrencySymbol:"د.ك.‏",CurrencyCode:"KWD"},{Name:"ar-LB",DisplayName:"Arabic (Lebanon)",CurrencySymbol:"ل.ل.‏",CurrencyCode:"LBP"},{Name:"ar-LY",DisplayName:"Arabic (Libya)",CurrencySymbol:"د.ل.‏",CurrencyCode:"LYD"},{Name:"ar-MA",DisplayName:"Arabic (Morocco)",CurrencySymbol:"د.م.‏",CurrencyCode:"MAD"},{Name:"ar-OM",DisplayName:"Arabic (Oman)",CurrencySymbol:"ر.ع.‏",CurrencyCode:"OMR"},{Name:"ar-QA",DisplayName:"Arabic (Qatar)",CurrencySymbol:"ر.ق.‏",CurrencyCode:"QAR"},{Name:"ar-SA",DisplayName:"Arabic (Saudi Arabia)",CurrencySymbol:"ر.س.‏",CurrencyCode:"SAR"},{Name:"ar-SY",DisplayName:"Arabic (Syria)",CurrencySymbol:"ل.س.‏",CurrencyCode:"SYP"},{Name:"ar-TN",DisplayName:"Arabic (Tunisia)",CurrencySymbol:"د.ت.‏",CurrencyCode:"TND"},{Name:"ar-YE",DisplayName:"Arabic (Yemen)",CurrencySymbol:"ر.ي.‏",CurrencyCode:"YER"},{Name:"as-IN",DisplayName:"Assamese (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"az-Cyrl-AZ",DisplayName:"Azerbaijani (Cyrillic, Azerbaijan)",CurrencySymbol:"₼",CurrencyCode:"AZN"},{Name:"az-Latn-AZ",DisplayName:"Azerbaijani (Latin, Azerbaijan)",CurrencySymbol:"₼",CurrencyCode:"AZN"},{Name:"bn-BD",DisplayName:"Bangla (Bangladesh)",CurrencySymbol:"৳",CurrencyCode:"BDT"},{Name:"eu-ES",DisplayName:"Basque (Basque)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"bn-IN",DisplayName:"Bangla (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"ba-RU",DisplayName:"Bashkir (Russia)",CurrencySymbol:"₽",CurrencyCode:"RUB"},{Name:"be-BY",DisplayName:"Belarusian (Belarus)",CurrencySymbol:"Br",CurrencyCode:"BYN"},{Name:"bs-Cyrl-BA",DisplayName:"Bosnian (Cyrillic, Bosnia and Herzegovina)",CurrencySymbol:"КМ",CurrencyCode:"BAM"},{Name:"bs-Latn-BA",DisplayName:"Bosnian (Latin, Bosnia and Herzegovina)",CurrencySymbol:"KM",CurrencyCode:"BAM"},{Name:"br-FR",DisplayName:"Breton (France)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"bg-BG",DisplayName:"Bulgarian (Bulgaria)",CurrencySymbol:"лв.",CurrencyCode:"BGN"},{Name:"tzm-Tfng-MA",DisplayName:"Central Atlas Tamazight (Tifinagh, Morocco)",CurrencySymbol:"??",CurrencyCode:"MAD"},{Name:"ku-Arab-IQ",DisplayName:"Central Kurdish (Iraq)",CurrencySymbol:"د.ع.‏",CurrencyCode:"IQD"},{Name:"zh-TW",DisplayName:"Chinese (Traditional, Taiwan)",CurrencySymbol:"NT$",CurrencyCode:"TWD"},{Name:"zh-SG",DisplayName:"Chinese (Simplified, Singapore)",CurrencySymbol:"$",CurrencyCode:"SGD"},{Name:"zh-MO",DisplayName:"Chinese (Traditional, Macao S.A.R.)",CurrencySymbol:"MOP",CurrencyCode:"MOP"},{Name:"zh-HK",DisplayName:"Chinese (Traditional, Hong Kong S.A.R.)",CurrencySymbol:"HK$",CurrencyCode:"HKD"},{Name:"zh-Hans-HK",DisplayName:"Chinese (Simplified Han, Hong Kong SAR)",CurrencySymbol:"$",CurrencyCode:"HKD"},{Name:"zh-CN",DisplayName:"Chinese (Simplified, PRC)",CurrencySymbol:"¥",CurrencyCode:"CNY"},{Name:"zh-Hans-MO",DisplayName:"Chinese (Simplified Han, Macao SAR)",CurrencySymbol:"MOP$",CurrencyCode:"MOP"},{Name:"chr-Cher-US",DisplayName:"Cherokee (Cherokee)",CurrencySymbol:"$",CurrencyCode:"USD"},{Name:"co-FR",DisplayName:"Corsican (France)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"hr-HR",DisplayName:"Croatian (Croatia)",CurrencySymbol:"kn",CurrencyCode:"HRK"},{Name:"hr-BA",DisplayName:"Croatian (Latin, Bosnia and Herzegovina)",CurrencySymbol:"KM",CurrencyCode:"BAM"},{Name:"cs-CZ",DisplayName:"Czech (Czech Republic)",CurrencySymbol:"Kč",CurrencyCode:"CZK"},{Name:"da-DK",DisplayName:"Danish (Denmark)",CurrencySymbol:"kr.",CurrencyCode:"DKK"},{Name:"prs-AF",DisplayName:"Dari (Afghanistan)",CurrencySymbol:"؋",CurrencyCode:"AFN"},{Name:"dv-MV",DisplayName:"Divehi (Maldives)",CurrencySymbol:"ރ.",CurrencyCode:"MVR"},{Name:"nl-BE",DisplayName:"Dutch (Belgium)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"nl-NL",DisplayName:"Dutch (Netherlands)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"en-029",DisplayName:"English (Caribbean)",CurrencySymbol:"EC$",CurrencyCode:"XCD"},{Name:"en-AU",DisplayName:"English (Australia)",CurrencySymbol:"$",CurrencyCode:"AUD"},{Name:"en-BZ",DisplayName:"English (Belize)",CurrencySymbol:"$",CurrencyCode:"BZD"},{Name:"en-CA",DisplayName:"English (Canada)",CurrencySymbol:"$",CurrencyCode:"CAD"},{Name:"en-GB",DisplayName:"English (United Kingdom)",CurrencySymbol:"£",CurrencyCode:"GBP"},{Name:"en-IE",DisplayName:"English (Ireland)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"en-IN",DisplayName:"English (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"en-JM",DisplayName:"English (Jamaica)",CurrencySymbol:"$",CurrencyCode:"JMD"},{Name:"en-MY",DisplayName:"English (Malaysia)",CurrencySymbol:"RM",CurrencyCode:"MYR"},{Name:"en-NZ",DisplayName:"English (New Zealand)",CurrencySymbol:"$",CurrencyCode:"NZD"},{Name:"en-PH",DisplayName:"English (Republic of the Philippines)",CurrencySymbol:"₱",CurrencyCode:"PHP"},{Name:"en-SG",DisplayName:"English (Singapore)",CurrencySymbol:"$",CurrencyCode:"SGD"},{Name:"en-TT",DisplayName:"English (Trinidad and Tobago)",CurrencySymbol:"$",CurrencyCode:"TTD"},{Name:"en-US",DisplayName:"English (United States)",CurrencySymbol:"$",CurrencyCode:"USD"},{Name:"en-ZA",DisplayName:"English (South Africa)",CurrencySymbol:"R",CurrencyCode:"ZAR"},{Name:"en-ZW",DisplayName:"English (Zimbabwe)",CurrencySymbol:"US$",CurrencyCode:"USD"},{Name:"et-EE",DisplayName:"Estonian (Estonia)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"fo-FO",DisplayName:"Faroese (Faroe Islands)",CurrencySymbol:"kr",CurrencyCode:"DKK"},{Name:"fil-PH",DisplayName:"Filipino (Philippines)",CurrencySymbol:"PhP",CurrencyCode:"PHP"},{Name:"fi-FI",DisplayName:"Finnish (Finland)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"fr-BE",DisplayName:"French (Belgium)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"fr-CA",DisplayName:"French (Canada)",CurrencySymbol:"$",CurrencyCode:"CAD"},{Name:"fr-CH",DisplayName:"French (Switzerland)",CurrencySymbol:"CHF",CurrencyCode:"CHF"},{Name:"fr-FR",DisplayName:"French (France)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"fr-LU",DisplayName:"French (Luxembourg)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"fr-MC",DisplayName:"French (Monaco)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"fy-NL",DisplayName:"Frisian (Netherlands)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"ff-Latn-SN",DisplayName:"Fulah (Latin, Senegal)",CurrencySymbol:"CFA",CurrencyCode:"XOF"},{Name:"gl-ES",DisplayName:"Galician (Galician)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"de-AT",DisplayName:"German (Austria)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"de-CH",DisplayName:"German (Switzerland)",CurrencySymbol:"CHF",CurrencyCode:"CHF"},{Name:"de-DE",DisplayName:"German (Germany)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"de-LI",DisplayName:"German (Liechtenstein)",CurrencySymbol:"CHF",CurrencyCode:"CHF"},{Name:"de-LU",DisplayName:"German (Luxembourg)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"de-LI",DisplayName:"German (Liechtenstein)",CurrencySymbol:"CHF",CurrencyCode:"CHF"},{Name:"de-LU",DisplayName:"German (Luxembourg)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"el-GR",DisplayName:"Greek (Greece)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"ka-GE",DisplayName:"Georgian (Georgia)",CurrencySymbol:"₾",CurrencyCode:"GEL"},{Name:"kl-GL",DisplayName:"Greenlandic (Greenland)",CurrencySymbol:"kr.",CurrencyCode:"DKK"},{Name:"gu-IN",DisplayName:"Gujarati (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"ha-Latn-NG",DisplayName:"Hausa (Latin, Nigeria)",CurrencySymbol:"₦",CurrencyCode:"NGN"},{Name:"haw-US",DisplayName:"Hawaiian (United States)",CurrencySymbol:"$",CurrencyCode:"USD"},{Name:"he-IL",DisplayName:"Hebrew (Israel)",CurrencySymbol:"₪",CurrencyCode:"ILS"},{Name:"hi-IN",DisplayName:"Hindi (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"hu-HU",DisplayName:"Hungarian (Hungary)",CurrencySymbol:"Ft",CurrencyCode:"HUF"},{Name:"is-IS",DisplayName:"Icelandic (Iceland)",CurrencySymbol:"ISK",CurrencyCode:"ISK"},{Name:"id-ID",DisplayName:"Indonesian (Indonesia)",CurrencySymbol:"Rp",CurrencyCode:"IDR"},{Name:"ig-NG",DisplayName:"Igbo (Nigeria)",CurrencySymbol:"₦",CurrencyCode:"NGN"},{Name:"xh-ZA",DisplayName:"isiXhosa (South Africa)",CurrencySymbol:"R",CurrencyCode:"ZAR"},{Name:"zu-ZA",DisplayName:"isiZulu (South Africa)",CurrencySymbol:"R",CurrencyCode:"ZAR"},{Name:"iu-Latn-CA",DisplayName:"Inuktitut (Latin, Canada)",CurrencySymbol:"$",CurrencyCode:"CAD"},{Name:"iu-Cans-CA",DisplayName:"Inuktitut (Syllabics, Canada)",CurrencySymbol:"$",CurrencyCode:"CAD"},{Name:"ga-IE",DisplayName:"Irish (Ireland)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"it-IT",DisplayName:"Italian (Italy)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"ja-JP",DisplayName:"Japanese (Japan)",CurrencySymbol:"¥",CurrencyCode:"JPY"},{Name:"kn-IN",DisplayName:"Kannada (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"kk-KZ",DisplayName:"Kazakh (Kazakhstan)",CurrencySymbol:"₸",CurrencyCode:"KZT"},{Name:"km-KH",DisplayName:"Khmer (Cambodia)",CurrencySymbol:"៛",CurrencyCode:"KHR"},{Name:"rw-RW",DisplayName:"Kinyarwanda (Rwanda)",CurrencySymbol:"RF",CurrencyCode:"RWF"},{Name:"sw-KE",DisplayName:"Kiswahili (Kenya)",CurrencySymbol:"Ksh",CurrencyCode:"KES"},{Name:"kok-IN",DisplayName:"Konkani (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"ko-KR",DisplayName:"Korean (Korea)",CurrencySymbol:"₩",CurrencyCode:"KRW"},{Name:"ko-KP",DisplayName:"Korean (North Korea)",CurrencySymbol:"₩",CurrencyCode:"KPW"},{Name:"ky-KG",DisplayName:"Kyrgyz (Kyrgyzstan)",CurrencySymbol:"сом",CurrencyCode:"KGS"},{Name:"mi-NZ",DisplayName:"Maori (New Zealand)",CurrencySymbol:"$",CurrencyCode:"NZD"},{Name:"mk-MK",DisplayName:"Macedonian (Former Yugoslav Republic of Macedonia)",CurrencySymbol:"ден",CurrencyCode:"MKD"},{Name:"lo-LA",DisplayName:"Lao (Lao P.D.R.)",CurrencySymbol:"₭",CurrencyCode:"LAK"},{Name:"lv-LV",DisplayName:"Latvian (Latvia)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"lt-LT",DisplayName:"Lithuanian (Lithuania)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"dsb-DE",DisplayName:"Lower Sorbian (Germany)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"lb-LU",DisplayName:"Luxembourgish (Luxembourg)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"ml-IN",DisplayName:"Malayalam (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"mn-Mong-CN",DisplayName:"Mongolian (Traditional Mongolian, PRC)",CurrencySymbol:"¥",CurrencyCode:"MNT"},{Name:"mgo-CM",DisplayName:"Meta' (Cameroon)",CurrencySymbol:"FCFA",CurrencyCode:"XAF"},{Name:"mr-IN",DisplayName:"Marathi (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"ms-BN",DisplayName:"Malay (Brunei Darussalam)",CurrencySymbol:"$",CurrencyCode:"BND"},{Name:"ms-MY",DisplayName:"Malay (Malaysia)",CurrencySymbol:"RM",CurrencyCode:"MYR"},{Name:"mt-MT",DisplayName:"Maltese (Malta)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"arn-CL",DisplayName:"Mapudungun (Chile)",CurrencySymbol:"$",CurrencyCode:"CLP"},{Name:"ne-NP",DisplayName:"Nepali (Nepal)",CurrencySymbol:"रु",CurrencyCode:"NPR"},{Name:"nn-NO",DisplayName:"Norwegian, Nynorsk (Norway)",CurrencySymbol:"kr",CurrencyCode:"NOK"},{Name:"nb-NO",DisplayName:"Norwegian, Bokmål (Norway)",CurrencySymbol:"kr",CurrencyCode:"NOK"},{Name:"or-IN",DisplayName:"Odia (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"oc-FR",DisplayName:"Occitan (France)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"ps-AF",DisplayName:"Pashto (Afghanistan)",CurrencySymbol:"؋",CurrencyCode:"AFN"},{Name:"fa-IR",DisplayName:"Persian (Iran)",CurrencySymbol:"ريال",CurrencyCode:"IRR"},{Name:"pt-BR",DisplayName:"Portuguese (Brazil)",CurrencySymbol:"R$",CurrencyCode:"BRL"},{Name:"pt-PT",DisplayName:"Portuguese (Portugal)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"pl-PL",DisplayName:"Polish (Poland)",CurrencySymbol:"zł",CurrencyCode:"PLN"},{Name:"pa-IN",DisplayName:"Punjabi (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"pa-Arab-PK",DisplayName:"Punjabi (Islamic Republic of Pakistan)",CurrencySymbol:"Rs",CurrencyCode:"PKR"},{Name:"quz-BO",DisplayName:"Quechua (Bolivia)",CurrencySymbol:"Bs.",CurrencyCode:"BOB"},{Name:"quz-EC",DisplayName:"Quechua (Ecuador)",CurrencySymbol:"$",CurrencyCode:"USD"},{Name:"quz-PE",DisplayName:"Quechua (Peru)",CurrencySymbol:"S/.",CurrencyCode:"PEN"},{Name:"ro-RO",DisplayName:"Romanian (Romania)",CurrencySymbol:"RON",CurrencyCode:"RON"},{Name:"rm-CH",DisplayName:"Romansh (Switzerland)",CurrencySymbol:"CHF",CurrencyCode:"CHF"},{Name:"ru-RU",DisplayName:"Russian (Russia)",CurrencySymbol:"₽",CurrencyCode:"RUB"},{Name:"sah-RU",DisplayName:"Sakha (Russia)",CurrencySymbol:"₽",CurrencyCode:"RUB"},{Name:"smn-FI",DisplayName:"Sami, Inari (Finland)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"smj-NO",DisplayName:"Sami, Lule (Norway)",CurrencySymbol:"kr",CurrencyCode:"NOK"},{Name:"smj-SE",DisplayName:"Sami, Lule (Sweden)",CurrencySymbol:"kr",CurrencyCode:"SEK"},{Name:"se-FI",DisplayName:"Sami, Northern (Finland)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"se-NO",DisplayName:"Sami, Northern (Norway)",CurrencySymbol:"kr",CurrencyCode:"NOK"},{Name:"se-SE",DisplayName:"Sami, Northern (Sweden)",CurrencySymbol:"kr",CurrencyCode:"SEK"},{Name:"sms-FI",DisplayName:"Sami, Skolt (Finland)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"sma-NO",DisplayName:"Sami, Southern (Norway)",CurrencySymbol:"kr",CurrencyCode:"NOK"},{Name:"sma-SE",DisplayName:"Sami, Southern (Sweden)",CurrencySymbol:"kr",CurrencyCode:"SEK"},{Name:"sa-IN",DisplayName:"Sanskrit (India)",CurrencySymbol:"₹",CurrencyCode:"INR"},{Name:"nso-ZA",DisplayName:"Sesotho sa Leboa (South Africa)",CurrencySymbol:"R",CurrencyCode:"ZAR"},{Name:"gd-GB",DisplayName:"Scottish Gaelic (United Kingdom)",CurrencySymbol:"£",CurrencyCode:"GBP"},{Name:"sr-Cyrl-BA",DisplayName:"Serbian (Cyrillic, Bosnia and Herzegovina)",CurrencySymbol:"??",CurrencyCode:"BAM"},{Name:"sr-Cyrl-ME",DisplayName:"Serbian (Cyrillic, Montenegro)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"sr-Cyrl-RS",DisplayName:"Serbian (Cyrillic, Serbia)",CurrencySymbol:"???.",CurrencyCode:"RSD"},{Name:"sr-Latn-BA",DisplayName:"Serbian (Latin, Bosnia and Herzegovina)",CurrencySymbol:"KM",CurrencyCode:"BAM"},{Name:"sr-Latn-ME",DisplayName:"Serbian (Latin, Montenegro)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"sr-Latn-RS",DisplayName:"Serbian (Latin, Serbia)",CurrencySymbol:"RSD",CurrencyCode:"RSD"},{Name:"tn-ZA",DisplayName:"Setswana (South Africa)",CurrencySymbol:"R",CurrencyCode:"ZAR"},{Name:"tn-BW",DisplayName:"Setswana (Botswana)",CurrencySymbol:"P",CurrencyCode:"BWP"},{Name:"sd-Arab-PK",DisplayName:"Sindhi (Islamic Republic of Pakistan)",CurrencySymbol:"Rs",CurrencyCode:"PKR"},{Name:"si-LK",DisplayName:"Sinhala (Sri Lanka)",CurrencySymbol:"රු.",CurrencyCode:"LKR"},{Name:"sk-SK",DisplayName:"Slovak (Slovakia)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"sl-SI",DisplayName:"Slovenian (Slovenia)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"es-AR",DisplayName:"Spanish (Argentina)",CurrencySymbol:"$",CurrencyCode:"ARS"},{Name:"es-VE",DisplayName:"Spanish (Bolivarian Republic of Venezuela)",CurrencySymbol:"Bs.",CurrencyCode:"VEF"},{Name:"es-BO",DisplayName:"Spanish (Bolivia)",CurrencySymbol:"Bs",CurrencyCode:"BOB"},{Name:"es-CL",DisplayName:"Spanish (Chile)",CurrencySymbol:"$",CurrencyCode:"CLP"},{Name:"es-CO",DisplayName:"Spanish (Colombia)",CurrencySymbol:"$",CurrencyCode:"COP"},{Name:"es-CR",DisplayName:"Spanish (Costa Rica)",CurrencySymbol:"₡",CurrencyCode:"CRC"},{Name:"es-DO",DisplayName:"Spanish (Dominican Republic)",CurrencySymbol:"$",CurrencyCode:"DOP"},{Name:"es-EC",DisplayName:"Spanish (Ecuador)",CurrencySymbol:"$",CurrencyCode:"USD"},{Name:"es-SV",DisplayName:"Spanish (El Salvador)",CurrencySymbol:"$",CurrencyCode:"USD"},{Name:"es-GT",DisplayName:"Spanish (Guatemala)",CurrencySymbol:"Q",CurrencyCode:"GTQ"},{Name:"es-HN",DisplayName:"Spanish (Honduras)",CurrencySymbol:"L",CurrencyCode:"HNL"},{Name:"es-MX",DisplayName:"Spanish (Mexico)",CurrencySymbol:"$",CurrencyCode:"MXN"},{Name:"es-NI",DisplayName:"Spanish (Nicaragua)",CurrencySymbol:"C$",CurrencyCode:"NIO"},{Name:"es-PA",DisplayName:"Spanish (Panama)",CurrencySymbol:"B/.",CurrencyCode:"PAB"},{Name:"es-PY",DisplayName:"Spanish (Paraguay)",CurrencySymbol:"₲",CurrencyCode:"PYG"},{Name:"es-PE",DisplayName:"Spanish (Peru)",CurrencySymbol:"S/.",CurrencyCode:"PEN"},{Name:"es-PR",DisplayName:"Spanish (Puerto Rico)",CurrencySymbol:"$",CurrencyCode:"USD"},{Name:"es-ES",DisplayName:"Spanish (Spain)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"es-US",DisplayName:"Spanish (United States)",CurrencySymbol:"$",CurrencyCode:"USD"},{Name:"es-UY",DisplayName:"Spanish (Uruguay)",CurrencySymbol:"$",CurrencyCode:"UYU"},{Name:"sv-SE",DisplayName:"Swedish (Sweden)",CurrencySymbol:"kr",CurrencyCode:"SEK"},{Name:"sv-FI",DisplayName:"Swedish (Finland)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"syr-SY",DisplayName:"Syriac (Syria)",CurrencySymbol:"?.?.?",CurrencyCode:"SYP"},{Name:"tg-Cyrl-TJ",DisplayName:"Tajik (Cyrillic, Tajikistan)",CurrencySymbol:"???",CurrencyCode:"TJS"},{Name:"tzm-Latn-DZ",DisplayName:"Tamazight (Latin, Algeria)",CurrencySymbol:"DA",CurrencyCode:"DZD"},{Name:"ta-IN",DisplayName:"Tamil (India)",CurrencySymbol:"?",CurrencyCode:"INR"},{Name:"ta-LK",DisplayName:"Tamil (Sri Lanka)",CurrencySymbol:"Rs.",CurrencyCode:"LKR"},{Name:"tt-RU",DisplayName:"Tatar (Russia)",CurrencySymbol:"?",CurrencyCode:"RUB"},{Name:"th-TH",DisplayName:"Thai (Thailand)",CurrencySymbol:"?",CurrencyCode:"THB"},{Name:"bo-CN",DisplayName:"Tibetan (PRC)",CurrencySymbol:"¥",CurrencyCode:"CNY"},{Name:"ti-ET",DisplayName:"Tigrinya (Ethiopia)",CurrencySymbol:"Br",CurrencyCode:"ETB"},{Name:"ti-ER",DisplayName:"Tigrinya (Eritrea)",CurrencySymbol:"Nfk",CurrencyCode:"ERN"},{Name:"tk-TM",DisplayName:"Turkmen (Turkmenistan)",CurrencySymbol:"m.",CurrencyCode:"TMT"},{Name:"tr-TR",DisplayName:"Turkish (Turkey)",CurrencySymbol:"?",CurrencyCode:"TRY"},{Name:"uk-UA",DisplayName:"Ukrainian (Ukraine)",CurrencySymbol:"?",CurrencyCode:"UAH"},{Name:"hsb-DE",DisplayName:"Upper Sorbian (Germany)",CurrencySymbol:"€",CurrencyCode:"EUR"},{Name:"ur-PK",DisplayName:"Urdu (Islamic Republic of Pakistan)",CurrencySymbol:"Rs",CurrencyCode:"PKR"},{Name:"uz-Latn-UZ",DisplayName:"Uzbek (Latin, Uzbekistan)",CurrencySymbol:"so?m",CurrencyCode:"UZS"},{Name:"uz-Cyrl-UZ",DisplayName:"Uzbek (Cyrillic, Uzbekistan)",CurrencySymbol:"???",CurrencyCode:"UZS"},{Name:"vi-VN",DisplayName:"Vietnamese (Vietnam)",CurrencySymbol:"?",CurrencyCode:"VND"},{Name:"ii-CN",DisplayName:"Yi (PRC)",CurrencySymbol:"¥",CurrencyCode:"CNY"},{Name:"yo-NG",DisplayName:"Yoruba (Nigeria)",CurrencySymbol:"?",CurrencyCode:"NGN"},{Name:"cy-GB",DisplayName:"Welsh (United Kingdom)",CurrencySymbol:"£",CurrencyCode:"GBP"},{Name:"wo-SN",DisplayName:"Wolof (Senegal)",CurrencySymbol:"CFA",CurrencyCode:"XOF"}]},n.ConvertEnumasKeyValuePairArray=function(n){for(var u=Object.keys(n),f=Object.keys(n).map(function(t){return n[t]}),i,r=[],t=0;t<u.length;t++)i=new ValueAliasPair,i.value=u[t],i.text=f[t],r.push(i);return r},n.closeDialog=function(n){n.model.position={X:0,Y:0}},n.buttonEnable=function(n,t){var i=n.data("ejButton");ej.isNullOrUndefined(i)||(t?(n.css("opacity","1").data("ejButton").enable(),n.addClass("e-dbrd-hand-cursor"),n.removeClass("e-dashboarddesigner-btn-disabled")):(n.css("opacity",".5").data("ejButton").disable(),n.removeClass("e-dbrd-hand-cursor"),n.addClass("e-dashboarddesigner-btn-disabled")))},n.clientId="",n}();window.ej.createObject("ej.DashboardUtil",InternalReportUtil,window),function(n){n.Alert="alert";n.Confirm="confirm"}(AlertType||(AlertType={})),function(n){n.warning="e-dashboarddesigner-warn-icon";n.errors="e-dashboarddesigner-error-icon";n.success="e-dashboarddesigner-success-icon";n.question="e-dashboarddesigner-question-icon";n.information="e-dashboarddesigner-information-icon"}(IconType||(IconType={}));ValueAliasPair=function(){function n(){this.text="";this.value=""}return n}();InternalImageReportItem=function(){function n(){this.cellInfo=null;this.controlContainer=null;this.itemName="Image";this.isMasterByDefault=!1;this.rootCss="e-image";this.pluginId="";this.menuSettingsIconVisible=!1;this.propertyPanel=null;this.containerProperties=null;this.dataGroupInfo=null;this.imageJson=null;this.contentContainer=null;this.dataValues=null;this.reportName=null;this.showSubTitle=!1;this.dataObj=null;this.filterObject=null;this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.rdlParser=ejDashboardDesigner.getInstance("RDLParser");this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.id=this.designPanel.designId;this.isDataEnabled=!0;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.dataGroupInfo=ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataConfiguration"),"createDataGroupInfo");this.controlType=ControlType.Image;this.containerProperties=ejDashboardDesigner.getInstance("ContainerPropertyItem");this.filterObject=ejDashboardDesigner.getInstance("MasterSlaveFilter")}return n.prototype.render=function(n){this.renderImageItem(n)},n.prototype.updateData=function(n){this.updateImageItemData(n)},n.prototype.dispose=function(){this.imageItemDispose()},n.prototype.getPropertyPanelItems=function(){return this.getPropertyGridItems()},n.prototype.setJson=function(n){this.imageJson=n},n.prototype.getJson=function(){return this.getReportItemJson()},n.prototype.updatePropertyChange=function(n,t,i,r){this.updateImageItemPropertyChange(n,t,i,r)},n.prototype.updateSize=function(n){this.updateWidgetSize(n)},n.prototype.updatePosition=function(n){this.updateItemPosition(n)},n.prototype.getDefaultCategoriesInfo=function(){return this.getItemDefaultCategoriesInfo()},n.prototype.getDataCategoriesInfo=function(){return this.getItemDataCategoriesInfo()},n.prototype.onFieldDragDrop=function(){return!0},n.prototype.onSettingsClick=function(){return null},n.prototype.onSettingsMenuClick=function(){},n.prototype.updateDataGroupInfo=function(n,t){this.updateImageItemDataGroupInfo(n,t)},n.prototype.onWidgetSelect=function(n){this.widgetSelect(n)},n.prototype.onWidgetUnSelect=function(){this.widgetUnSelect()},n.prototype.getContainerInstance=function(){return this.getImageContainerInstance()},n.prototype.refresh=function(){},n.prototype.supportedColumnsForFiltering=function(){return null},n.prototype.getDefaultFormat=function(){return null},n.prototype.getWidgetParameterColumnContent=function(){return this.getParameterColumn()},n.prototype.widgetItems=function(){var n=ej.DashboardDesigner.Locale[Object.keys(ej.DashboardDesigner.Locale)[0]];ejDashboardDesigner.widgetItems.push({GroupName:n.itemPanel.groupItems.miscellaneous,GroupId:"764ccc8f-f006-46ab-aef5-68973d12d2a6",Items:[{id:"0eb3a830-346d-4dac-bf53-e2f63536d82b",widgetName:"Image",widgetDisplayName:n.itemPanel.widgetTitle.image,cssClass:"e-widgeticon e-reportdesigner-widget-image",widgetNameSpace:"ej.DashboardDesignerUtility.ImageItem",searchCategory:["image","miscellaneous"],widgetconfiginfo:null,useIconTemplate:!0,iconTemplate:"<span class='path1'><\/span><span class='path2'><\/span>",tooltip:{title:n.itemPanel.widgetTitle.image,description:n.itemPanel.widgetDescription.imageDesc,dataRequirement:n.itemPanel.widgetDataRequirements.imageDataReq}}]})},n.prototype.getImageContainerInstance=function(){return this.containerProperties},n.prototype.setWidgetJson=function(n){this.imageJson=n},n.prototype.renderImageReportElement=function(n){try{this.imageJson=ejDashboardDesigner.editManager.isPerformAction?$.extend(!0,{},n):n;this.cellInfo={row:this.imageJson.ContainerSettings.Bounds.Row,column:this.imageJson.ContainerSettings.Bounds.Column,rowSpan:this.imageJson.ContainerSettings.Bounds.RowSpan,colSpan:this.imageJson.ContainerSettings.Bounds.ColumnSpan};this.renderImageElement();ejDashboardDesigner.editManager.isPerformAction&&this.designPanel.performItemSelection(this.controlContainer)}catch(t){this.designPanel.logError({Source:this.imageJson.Name,Error:t,Type:t.name})}},n.prototype.renderImageItem=function(){try{this.renderImageElement();this.imageJson.ContainerSettings.Bounds=ej.DashboardDesignerUtility.Serialization.updateBoundsData(this.cellInfo);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Created,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Image)}catch(n){this.designPanel.logError({Source:this.imageJson.UniqueName,Error:n,Type:n.name})}},n.prototype.renderImageElement=function(){this.imageItem=ej.buildTag("div.imageItem e-dbrd-widget e-dbrd-control","",{width:"100%",height:"100%","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"0",overflow:"hidden"},{id:this.designPanel.designId+"_imageItem_"+this.imageJson.UniqueName});this.defaultImgDiv=ej.buildTag("div.imageitem e-draggable e-reportdesigner-default-image","",{width:"100%",height:"100%"},{id:this.designPanel.designId+"_imageitem_"+this.imageJson.UniqueName});this.imageElement=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_image_"+this.imageJson.UniqueName,display:"none"});ej.isNullOrUndefined(this.imageJson.ImageUrl)?ej.isNullOrUndefined(this.imageJson.ImagePath)||ej.isNullOrUndefined(this.imageJson.ImageName)||(this.defaultImgDiv.css("display","none"),this.updateLocalSource(this.imageJson.ImagePath)):this.updateURLSource(this.imageJson.ImageUrl);this.imageItem.append(this.defaultImgDiv);this.imageItem.append(this.imageElement);this.contentContainer.append(this.imageItem);this.controlContainer.data("widgetInstance",this)},n.prototype.getItemDefaultCategoriesInfo=function(){var n=[];return n.push({Name:"Dimensions",SupportedTypes:["e-reportdesigner-dataset-number","e-reportdesigner-dataset-boolean","e-reportdesigner-dataset-char","e-reportdesigner-dataset-string"]}),n},n.prototype.getItemDataCategoriesInfo=function(){var n=[];return n.push({Name:"Column",CategoryType:CategoryType.Non_Numeric}),n},n.prototype.updateImageItemPropertyChange=function(n,t,i,r){var o=!1,u,f,s,e;switch(n){case"Name":this.imageJson.ContainerSettings.Title=i;this.propertyPanel.setTitle(this.imageJson);break;case"Mode":this.imageJson.Stretch=i==="Uniform To Fill"?"UniformToFill":i;this.updateImageMode(i);break;case"ExporttoPdf":this.imageJson.EnablePdfExport=i;break;case"ImageSource":this.imageJson.ImageSource=i==="Parameterized URL"?"ParameterizedURL":i;this.updateImageSourceVisibility(i);this.resetImageSource(r);this.updatePatternVisibility(i);this.setIgnoreFilterSelection();break;case"Datasource":this.imageJson.DataSource=i;this.updatePatternVisibility(i);break;case"ImageURL":this.imageJson.ImageUrl=i;this.updateURLSource(i);break;case"ImgExport":this.imageJson.EnableImageExport=i;break;case"IgnoreFilter":this.imageJson.IgnoreFilterActions=i;this.filterObject.IgnoreFilterActionPropertyChange(i);break;case"Pattern":this.imageJson.URLPattern=i;this.getUrlFormat();break;default:o=!0}if(!o){if(ejDashboardDesigner.editManager.isPerformAction&&(u=this.designPanel.selectedReportItems,u.length>0))for(f=0;f<u.length;f++)s=u[f],s.attr("id")===this.controlContainer.attr("id")&&(e=$.extend(!0,{},r),e.categoryName=r.categoryName,e.valueList=r.valueList,this.propertyPanel.updatePropertyValue(e,"Image",i));ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemPropertyChanged,"updatePropertyChange","e-image",this.imageItem.attr("id"),[n,i,t,r],[n,t,i,r])}},n.prototype.updatePatternVisibility=function(n){n===ImgSource.ParameterizedURL.toString()?this.propertyPanel.updateItemVisibility("Image","BasicSettings","Pattern",!0):this.propertyPanel.updateItemVisibility("Image","BasicSettings","Pattern",!1)},n.prototype.updateImageSourceVisibility=function(n){n===ImgSource.URL.toString()?(this.propertyPanel.updateItemVisibility("Image","BasicSettings","Pattern",!1),this.propertyPanel.updateItemVisibility("Image","BasicSettings","Browse",!1),this.propertyPanel.updateItemVisibility("Image","BasicSettings","ImageURL",!0),this.propertyPanel.updateCategoryVisibility("Image","Filter",!1),this.imageJson.IsInPackage=!1,this.imageJson.IsURL=!0,this.imageJson.BindDataIsChecked=!1,this.imageJson.IgnoreFilterActions=!0):n===ImgSource.Local.toString()?(this.propertyPanel.updateItemVisibility("Image","BasicSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility("Image","BasicSettings","Browse",!0),this.propertyPanel.updateItemVisibility("Image","BasicSettings","Pattern",!1),this.propertyPanel.updateCategoryVisibility("Image","Filter",!1),this.imageJson.IsInPackage=!0,this.imageJson.IsURL=!1,this.imageJson.BindDataIsChecked=!1,this.imageJson.EnableImageExport=!0,this.imageJson.IgnoreFilterActions=!0):n===ImgSource.ParameterizedURL.toString()&&(this.propertyPanel.updateItemVisibility("Image","BasicSettings","Browse",!1),this.propertyPanel.updateItemVisibility("Image","BasicSettings","ImageURL",!1),this.propertyPanel.updateItemVisibility("Image","BasicSettings","Pattern",!0),this.propertyPanel.updateCategoryVisibility("Image","Filter",!0),this.imageJson.BindDataIsChecked=!0,this.imageJson.IsURL=!0,this.imageJson.IgnoreFilterActions=!1,this.imageJson.URLPattern=$("#"+this.id+"_"+this.controlType+"_BasicSettings_Pattern").val(),this.getUrlFormat())},n.prototype.resetImageSource=function(n){var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),t;$("#"+this.id+"_image_path").val("");t=i.imageJson.ImagePath;$("#"+this.id+"_image_progress_tr").css("display","none");this.imageJson.DataSource=DataSource.BinaryData;this.imageJson.ImageUrl=null;this.imageJson.URLPattern="{0}";$("#"+this.id+"_"+this.controlType+"_"+n.categoryName+"_ImageURL").val("");$("#"+this.id+"_"+this.controlType+"_"+n.categoryName+"_Pattern").val("{0}");this.imageElement.css("display","none");this.defaultImgDiv.css("display","inline-block");t!=null&&this.deleteImage(this.imageJson.ImagePath);this.fileName=null;this.fileExt=null;this.imageJson.ImagePath=null;this.imageJson.URLPattern="{0}"},n.prototype.deleteImage=function(n){var t=this;ej.isNullOrUndefined(n)||ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/deleteimage",{data:JSON.stringify({fileName:n})},{fnction:$.proxy(function(n){n.Status||(t.imageJson.ImagePath=null)},this)})},n.prototype.updateURLSource=function(n){this.imageJson.URLPattern=n;n.trim().length>0?(this.defaultImgDiv.css("display","none"),this.imageElement.css({display:"inline-block","background-image":"url("+n+")"}),this.imageJson.imageSrc=n,this.updateImageMode(ej.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.imageJson.Stretch))):(this.imageElement.css("display","none"),this.defaultImgDiv.css("display","inline-block"))},n.prototype.updateLocalSource=function(n){var t=this;ej.isNullOrUndefined(n)||(ejDashboardDesigner.getInstance("DesignPanel").showLoadingIndicator(this.controlContainer),ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/assignimage",{data:JSON.stringify({fileName:n})},{fnction:$.proxy(function(n){n.Status||(ejDashboardDesigner.getInstance("DesignPanel").hideLoadingIndicator(t.controlContainer),t.imageElement.css({display:"inline-block","background-repeat":"no-repeat","background-image":"url(data:image/"+n.ext+";base64,"+n.source+")"}),t.imageJson.imageSrc="data: image / "+n.ext+"; base64, "+n.source,t.updateImageMode(ej.DashboardDesignerUtility.Serialization.enumToString(ImageMode,t.imageJson.Stretch)))},this)}))},n.prototype.updateImageItemData=function(n){this.dataValues=n;this.contentContainer.find(".e-dbrd-control-error").remove();this.contentContainer.css({display:"block"});this.imageItem.show();this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","none");ej.DashboardDesignerUtility.Serialization.updateWidgetData(this.imageJson,this.dataGroupInfo);ej.isNullOrUndefined(n.Error)||n.Error?ej.isNullOrUndefined(n.Message)||this.designPanel.showControlError(this.contentContainer,n,this.cellInfo):n.noDataAvailable?(this.imageItem.hide(),this.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block"),this.defaultImgDiv.css("display","inline-block")):ej.isNullOrUndefined(n)||n.data==="[]"||!ej.isNullOrUndefined(n.isDataSetEmpty)||typeof n=="string"&&n.indexOf("Sf_Exception")!==-1?this.imageJson.ImageSource.toString().toLowerCase()==="parameterizedurl"&&(this.defaultImgDiv.css("display","inline-block"),this.imageElement.css("display","none")):(this.dataObj=JSON.parse(n.data),this.getUrlFormat(),this.updateImageMode(ej.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.imageJson.Stretch)))},n.prototype.updateImageItemDataGroupInfo=function(n){this.dataGroupInfo=n},n.prototype.isFieldValid=function(){return!0},n.prototype.getUrlFormat=function(){var n=this;ej.isNullOrUndefined(this.imageJson.URLPattern)?this.defaultImgDiv.css("display","inline-block"):!ej.isNullOrUndefined(this.dataObj)&&Object.keys(this.dataObj[0]).length>0&&this.imageJson.ImageSource.toString()==="ParameterizedURL"&&ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/formUrlpattern",{action:ej.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({UrlText:this.imageJson.URLPattern,Colums:this.dataObj[0]})},{fnction:$.proxy(function(t){t.Status?(n.defaultImgDiv.css("display","none"),n.imageElement.css({display:"inline-block","background-image":"url("+t.patternText+")"}),n.imageJson.imageSrc=t.patternText,n.updateImageMode(ej.DashboardDesignerUtility.Serialization.enumToString(ImageMode,n.imageJson.Stretch))):(n.contentContainer.find(".e-dbrd-control-nodatainfo.e-nodata-container").css("display","block"),n.imageElement.css("display","none"))},this)})},n.prototype.updateImageMode=function(n){switch(n){case ImageMode.Default.toString():if(!ej.isNullOrUndefined(this.imageJson.imageSrc)){var t=new Image,i=this.imageElement;t.onload=function(){t.height<i.height()?i.css({"background-position-y":"50%","background-position-x":"50%"}):i.css({"background-position-y":"","background-position-x":""})};t.src=this.imageJson.imageSrc}this.imageElement.css({height:"100%",width:"100%",overflow:"hidden",border:"none","background-size":"auto","background-repeat":"no-repeat",position:"absolute"});break;case ImageMode.Fill.toString():this.imageElement.css({height:"100%",width:"100%",overflow:"hidden",border:"none","background-size":"100% 100%","-webkit-background-repeat":"no-repeat",position:"absolute"});break;case ImageMode.Uniform.toString():this.imageElement.css({height:"100%",width:"100%",overflow:"hidden",border:"none","background-size":"contain","background-position":"50% 50%","background-repeat":"no-repeat",position:"absolute"});break;case ImageMode.UniformToFill.toString():this.imageElement.css({height:"100%",width:"100%",overflow:"hidden",border:"none","background-size":"cover","background-repeat":"no-repeat",position:"absolute"})}},n.prototype.getPropertyGridItems=function(){return{Header:this.imageJson.ContainerSettings.Title,Type:"Image",Items:[{CategoryName:"Basic Settings",Items:[{name:"Mode",displayName:"Mode",value:ej.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.imageJson.Stretch),itemType:"dropdown",valueList:["Default","Fill","Uniform","Uniform To Fill"]},{name:"ImageSource",displayName:"Image Source",value:ej.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.imageJson.ImageSource),itemType:"dropdown",valueList:["Local","URL","Parameterized URL"]},{name:"Browse",displayName:"Browse Image",isVisible:ej.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.imageJson.ImageSource)==="Local"?!0:!1,itemType:"object",callbackInstance:this,callbackMethod:"renderBrowseBox"},{name:"ImageURL",displayName:"URL",itemType:"string",value:this.imageJson.ImageUrl,isVisible:ej.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.imageJson.ImageSource)==="URL"?!0:!1},{name:"Pattern",displayName:"Pattern",itemType:"string",value:this.imageJson.URLPattern,isVisible:this.getPatternVisibility()}]},{CategoryName:"Filter",IsVisible:this.getIgnoreFilterVisibility(),Items:[{name:"IgnoreFilter",displayName:"Ignore Filter Actions",value:this.imageJson.IgnoreFilterActions,itemType:"bool"}]},{CategoryName:"Container Appearance",Items:[{name:"ImgExport",displayName:"Image Export",value:this.imageJson.EnableImageExport,itemType:"bool"},{name:"ExporttoPdf",displayName:"PDF Export",value:this.imageJson.EnablePdfExport,itemType:"bool"}]}]}},n.prototype.getPatternVisibility=function(){return ej.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.imageJson.ImageSource)===ImgSource.ParameterizedURL.toString()?!0:!1},n.prototype.getIgnoreFilterVisibility=function(){return ej.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.imageJson.ImageSource)===ImgSource.ParameterizedURL.toString()?!0:!1},n.prototype.setIgnoreFilterSelection=function(){return ej.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.imageJson.ImageSource)===ImgSource.Local.toString()||ej.DashboardDesignerUtility.Serialization.enumToString(ImgSource,this.imageJson.ImageSource)===ImgSource.URL.toString()?(this.propertyPanel.updateItemDisable("bool","Image","Filter","IgnoreFilter",!0),!0):(this.propertyPanel.updateItemDisable("bool","Image","Filter","IgnoreFilter",!1),!1)},n.prototype.renderBrowseBox=function(n,t,i){ej.isNullOrUndefined(n)?(this.propertyPanel.updateItemVisibility("Image","BasicSettings","Browse",i.isVisible),this.resetConfiguration()):(this.sampleContainer=ej.buildTag("div","",{width:"100%",height:"100%",display:ej.isNullOrUndefined(i.isVisible)?"inline-block":i.isVisible?"inline-block":"none"},{id:this.id+"_"+t+"_"+i.name+"_container"}),this.localFieldTable=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%",height:"50px"},{unselectable:"on",id:this.id+"_image_local_table"}),this.renderBrowseTable(),this.renderUploadBox(),this.sampleContainer.append(this.localFieldTable),this.sampleContainer.append(this.uploadbox),n.append(this.sampleContainer))},n.prototype.renderBrowseTable=function(){var t=ej.buildTag("tr","",{}),s=ej.buildTag("td","",{}),n=ej.buildTag("table","",{unselectable:"on"}),i=ej.buildTag("tr","",{},{}),r=ej.buildTag("tr","",{},{}),p=ej.buildTag("td","",{}),u,f;this.progressTxt=ej.buildTag("label.editLabel e-designer-title-label","",{float:"left"},{id:this.id+"_image_progress_tr"});u=ej.buildTag("td","",{},{id:this.id+"_image_path_error_icon_td"});f=ej.buildTag("td","",{},{colspan:"2"});ej.DashboardUtil.renderErrIndictor(u,this.id);var e=ej.buildTag("tr","",{height:"22.5px"},{id:this.id+"_image_path_td"}),h=ej.buildTag("tr.e-progresserrmsg","",{height:"22.5px",display:"none"},{id:this.id+"_image_progresserr_tr"}),c=ej.buildTag("td","",{}),w=ej.buildTag("label.editLabel e-designer-title-label","",{"font-size":"12px","font-weight":"normal"},{id:this.id+"_image_progresserr_tr"}),l=ej.buildTag("td","",{},{colspan:"2"}),a=ej.buildTag("td","",{},{}),v=ej.buildTag("td","",{float:"right",width:"170px"},{});this.filePath=ej.buildTag("input.e-textbox e-designer-content-label","",{height:"25px","border-right":"0px","padding-bottom":"0.5px","padding-top":"0.5px",width:"218px"},{id:this.id+"_image_path",type:"text",readonly:"readonly"});ej.isNullOrUndefined(this.imageJson.ImageName)||this.filePath.val(this.imageJson.ImageName);var o=ej.buildTag("div.e-designer-content-label e-dbrd-hand-cursor","",{display:"inline-block","margin-left":"-32px"},{id:this.id+"_file_datasource_browse"}),b=ej.buildTag("span.e-reportdesigner-horizontal-browse e-reportdesigner-browse-icon","",{"font-size":"16px","margin-top":"6px"}),y=ej.buildTag("label.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden",float:"right","margin-top":"13px"});y.text("Browse Image");v.append(y);this.localFieldTable.append(t);t.append(v);s.append(n);t.append(s);n.append(i);i.append(p);i.append(u);n.append(e,r.clone(),r);l.append(this.filePath);e.append(l);e.append(a);a.append(o);f.append(this.progressTxt);r.append(f);c.append(w);h.append(c);o.ejButton({width:"18px",height:"21.5px",showRoundedCorner:!1,click:$.proxy(this.onBrowseClick,this)});o.append(b);n.append(h);this.uploadbox=ej.buildTag("div","",{id:this.id+"_image_upload"})},n.prototype.onBrowseClick=function(){$("#"+this.id+"_image_upload .e-uploadinput").click()},n.prototype.renderUploadBox=function(){var n=this,t=ej.buildTag("div","",{height:"0px"},{id:this.id+"_image_upload"});this.dashboardDesigner.element.append(t);this.ejUploadBox=t.ejUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.dashboardDesigner.element},fileSize:78643200,saveUrl:this.dashboardDesigner.model.serviceUrl+"/uploadimage",fileSelect:$.proxy(this.onfileSelect,this),error:$.proxy(this.onuploadError,this),success:$.proxy(this.onuploadSuccess,this),inProgress:$.proxy(this.fileProgress,this),beforeSend:$.proxy(function(t){ej.DashboardUtil.clientId!==""&&t.xhr.setRequestHeader("ClientID",ej.DashboardUtil.clientId);ej.isNullOrUndefined(n.dashboardDesigner.model.serviceAuthorizationToken)||t.xhr.setRequestHeader("Authorization",n.dashboardDesigner.model.serviceAuthorizationToken)},this)}).data("ejUploadbox");$(this.id+"_img_upload_SelectButton").hide()},n.prototype.onfileSelect=function(n){this.resetConfiguration();n.files.length!==0&&(n.files[0].size>n.model.fileSize?(n.cancel=!0,this.progressTxt.text("")):($("#"+this.id+"_image_progress_tr").css("display","inline-block"),this.progressTxt.text("Initiating upload..."),this.fileName=this.fileExt=null,this.filePath.val(n.files[0].name)));ej.browserInfo().name!=="msie"&&this.ejUploadBox._uploadFileListDelete()},n.prototype.resetConfiguration=function(){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);$("#"+this.id+"_image_path").val(this.imageJson.ImageName);this.fileName=n.fileName;this.fileExt=n.fileExt;$("#"+this.id+"_image_progress_tr").css("display","none")},n.prototype.fileProgress=function(n){this.progressTxt.text("Uploading..."+n.percentage+"%")},n.prototype.onuploadError=function(){this.progressTxt.text("Upload failed.")},n.prototype.onuploadSuccess=function(n){var i=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),t;this.progressTxt.css("display","none");t=JSON.parse(n.responseText);t&&t.Status?(i.fileExt=t.Data.ext,i.fileName=t.Data.fileId+t.Data.ext,i.fileId=t.Data.fileId,i.defaultImgDiv.css("display","none"),i.imageElement.css({display:"inline-block","background-repeat":"no-repeat","background-image":"url(data:image/"+t.Data.ext+";base64,"+t.Data.source+")"}),i.imageJson.imageSrc="data: image / "+t.Data.ext+"; base64, "+t.Data.source,i.imageJson.ImageName=t.Data.fileName,i.imageJson.ImagePath="Image\\"+t.Data.fileId+t.Data.ext,i.imageJson.IsInPackage=!0,this.updateImageMode(this.imageJson.Stretch.toString())):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.upload,this.dashboardDesigner.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},n.prototype.getReportItem=function(){return this.controlContainer},n.prototype.getReportItemJson=function(){return ej.isNullOrUndefined(this.imageJson)&&(this.imageJson=this.getImageJson()),this.imageJson.FilterSettings.IgnoreFilterActions=this.imageJson.ImageSource.toString()===ImgSource.Local.toString()||this.imageJson.ImageSource.toString()===ImgSource.URL.toString()?!0:this.imageJson.IgnoreFilterActions,this.imageJson},n.prototype.updateItemPosition=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.imageJson,CommandAction.ItemMove,"updatePosition","e-image")},n.prototype.updateWidgetSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.imageJson,CommandAction.ItemResize,"updateSize","e-image");this.designPanel.updateWidgetSelectionBox(this.defaultImgDiv);this.updateImageMode(ej.DashboardDesignerUtility.Serialization.enumToString(ImageMode,this.imageJson.Stretch))},n.prototype.updateItemSize=function(n){this.cellInfo=n;this.designPanel.updateWidgetItem(n,this.controlContainer,this.imageJson,CommandAction.ItemResize,"updateItemSize","e-image");this.designPanel.updateWidgetSelectionBox(this.defaultImgDiv)},n.prototype.imageItemDispose=function(){ejDashboardDesigner.editManager.isPerformAction||ejDashboardDesigner.editManager.addCmdAction(CommandAction.ItemDelete,"renderReportItem","DesignPanel",this.dashboardDesigner._id+"_"+this.imageJson.UniqueName,[this.imageJson],null);$("#"+this.dashboardDesigner._id+"_"+this.imageJson.UniqueName).removeData("widgetInstance");$("#"+this.dashboardDesigner._id+"_"+this.imageJson.UniqueName).remove();this.designPanel.selectedReportItems=[];this.imageJson.ImagePath!==null&&this.deleteImage(this.imageJson.ImagePath);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Deleted,ActivityLogItemType.Widget,ActivityLogItemSubTypes.Image)},n.prototype.getImageJson=function(){var n=new ImageProperties;return n.ContainerSettings.ShowHeader=!1,n.UniqueName=n.ContainerSettings.Title=this.reportName,n},n.prototype.widgetUnSelect=function(){this.designPanel.selectedReportItems.length>0&&(this.designPanel.updatePreviousSelectedItem(),this.designPanel.selectedReportItems[0].find(".e-widget-selectionbox").remove(),this.designPanel.selectedReportItems[0].removeClass("e-selected-item"),this.designPanel.selectedReportItems=[],this.designPanel.updateRptToolbarActions())},n.prototype.widgetSelect=function(n){n.controlContainer.length>0&&(this.designPanel.createWidgetSelectionBox(n.controlContainer,"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",3),n.controlContainer.hasClass("e-selected-item")||(n.controlContainer.addClass("e-selected-item"),this.designPanel.selectedReportItems=[n.controlContainer]),this.designPanel.updateRptToolbarActions());this.designPanel.invokePropertyPanel()},n.prototype.getParameterColumn=function(){return{Value:this.imageJson.ContainerSettings.Title,Id:this.imageJson.Data.Id}},n.prototype.getSettingsInfo=function(){return{className:"e-reportdesigner-selection-move e-moveicon e-toolbarfonticonbasic",pathLength:3}},n}();window.ej.createObject("ej.DashboardDesignerUtility.ImageItem",InternalImageReportItem,window);ej.DashboardDesignerUtility.ImageItem.prototype.widgetItems();InternalWebDatasource=function(){function n(){this.templateStrings=[];this.connectionType="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.dashboardDesigner._id;this.field={id:"id",text:"text",value:"value"};this.methodJson=[{id:"get",text:"GET",value:"Get"},{id:"Post",text:"POST",value:"Post"}];this.maxRowsJson=[{id:"5h",text:"500",value:"500"},{id:"1k",text:"1000",value:"1000"},{id:"2k",text:"2000",value:"2000"},{id:"5k",text:"5000",value:"5000"},{id:"10k",text:"10000",value:"10000"},]}return Object.defineProperty(n,"WebDatasource",{get:function(){return(this.webDatasource===null||this.webDatasource===undefined)&&(this.webDatasource=new ej.DashboardDesignerUtility.WebDatasource),this.webDatasource},enumerable:!0,configurable:!0}),Object.defineProperty(n,"WebReconnectDataSource",{get:function(){return(this.webReconnectDataSource===null||this.webReconnectDataSource===undefined)&&(this.webReconnectDataSource=new ej.DashboardDesignerUtility.WebDatasource),this.webReconnectDataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n,t,i,r){this.connectionModel=r;t==="_editConnection"&&(this.editConnection=ejDashboardDesigner.getInstance("EditConnection"));this.connectionType=t;n.find("#"+this.id+this.connectionType+"_web_datasource").length>0?this.resetConfiguration(i):(this.webConfig=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType+"_web_datasource"}),n.append(this.webConfig),this.renderWebDatasourcePanel(i));this.showOAuthSettingsIfAny(i);this.showConfiguration(!0);ej.isNullOrUndefined(this.connectionModel)||(!ej.isNullOrUndefined(this.connectionModel.templates)&&this.connectionModel.templates.length>0&&this.updateModelToUi(this.connectionModel.templates[0]),!ej.isNullOrUndefined(this.connectionModel.hasMaxRow)&&this.connectionModel.hasMaxRow?(this.maxRowsElement.show(),ej.isNullOrUndefined(this.connectionModel.defaultRowLimit)||this.maxRowsDrpdwn.option("value",this.connectionModel.defaultRowLimit),ej.isNullOrUndefined(this.connectionModel.maxRowLimit)||this.maxRowsDrpdwn.option("maxValue",this.connectionModel.maxRowLimit)):this.maxRowsElement.hide());this.scrollerRefresh(this.dashboardDesigner.element.find("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.hidePasswordRow=function(n){ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.showPassword)||n.showPassword||this.pwd.hide()},n.prototype.updateUsernameLabel=function(n){ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.usernameLabel)||!n.usernameLabel?this.userName.find(".e-designer-title-label").html("User Name"):this.userName.find(".e-designer-title-label").html(n.usernameLabel)},n.prototype.updatePasswordLabel=function(n){ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.passwordLabel)?this.pwd.find(".e-designer-title-label").html("Password"):this.pwd.find(".e-designer-title-label").html(n.passwordLabel)},n.prototype.getOAuthServiceName=function(n){switch(n){case"gmail":return this.dashboardDesigner.locale.dataSource.oauthConnectors.gmail;case"analytics":return this.dashboardDesigner.locale.dataSource.oauthConnectors.googleAnalytics;case"youtube":return this.dashboardDesigner.locale.dataSource.oauthConnectors.youtube;case"drive":return this.dashboardDesigner.locale.dataSource.oauthConnectors.googleDrive;case"onedrive":return this.dashboardDesigner.locale.dataSource.oauthConnectors.microsoftOneDrive;case"sharepoint":return this.dashboardDesigner.locale.dataSource.oauthConnectors.microsoftSharePoint;case"googleplus":return this.dashboardDesigner.locale.dataSource.oauthConnectors.googleplus;case"buffer":return this.dashboardDesigner.locale.dataSource.oauthConnectors.buffer;case"linkedin":return this.dashboardDesigner.locale.dataSource.oauthConnectors.linkedin;case"todoist":return this.dashboardDesigner.locale.dataSource.oauthConnectors.todoist;case"outlookcalendar":return this.dashboardDesigner.locale.dataSource.oauthConnectors.microsoftOutlookCalendar;case"bitly":return this.dashboardDesigner.locale.dataSource.oauthConnectors.bitly;case"salesforceReports":return this.dashboardDesigner.locale.dataSource.oauthConnectors.salesforceReports;case"quickbooksonline":return this.dashboardDesigner.locale.dataSource.oauthConnectors.quickBooksOnline;case"quickbookspayments":return this.dashboardDesigner.locale.dataSource.oauthConnectors.quickBooksPayments;case"surveymonkey":return this.dashboardDesigner.locale.dataSource.oauthConnectors.surveyMonkey;case"freshbooks":return this.dashboardDesigner.locale.dataSource.oauthConnectors.freshBooks;case"searchconsole":return this.dashboardDesigner.locale.dataSource.oauthConnectors.googleSearchConsole;case"basecamp2":return this.dashboardDesigner.locale.dataSource.oauthConnectors.basecamp2;case"infusionsoft":return this.dashboardDesigner.locale.dataSource.oauthConnectors.infusionsoft;case"twitter":return this.dashboardDesigner.locale.dataSource.oauthConnectors.twitter;case"slack":return this.dashboardDesigner.locale.dataSource.oauthConnectors.slack;case"pinterest":return this.dashboardDesigner.locale.dataSource.oauthConnectors.pinterest}return n},n.prototype.getAuthTypeJson=function(n){var t=[{id:"None",text:"None",value:"None"},{id:"basichttpauthentication",text:"Basic Http Authentication",value:"BasicHttpAuthentication"}];return n&&t.push({id:n.serviceId,provider:n.provider,service:n.service,text:ej.isNullOrUndefined(this.connectionModel)?this.getOAuthServiceName(n.service):this.connectionModel.name,value:"oauth"}),t},n.prototype.getRefreshSettingsJson=function(){var t=ejDashboardDesigner.getInstance("DashboardDesigner").previewFeaturesJson,n=ej.DashboardUtil.getInstance().GetPreviewFeatureValue(t,PreviewFeatureName.RefreshSettings);return ej.isNullOrUndefined(n)?[{id:"never",text:"Never",value:"Never"},{id:"1hours",text:"1 Hour",value:"OneHours"},{id:"6hours",text:"6 Hours",value:"SixHours"},{id:"12hours",text:"12 Hours",value:"TwelveHours"},{id:"24hours",text:"24 Hours",value:"TwentyFourHours"},{id:"1week",text:"1 Week",value:"OneWeek"},{id:"1month",text:"1 Month",value:"OneMonth"}]:n},n.prototype.renderSplArea=function(n){var i,t,r;this.jiraRow=n;ej.isNullOrUndefined(this.connectionModel)||this.connectionModel.itemType!=="e-web-jira"?(this.datasource.renderTextArea(this.dashboardDesigner.locale.dataSource.webDataSource.urlText,this.id+this.connectionType+"_webDs_url",this.jiraRow),this.templateWarning=ej.buildTag("tr.e-dbrd-designer-tpl-warning","<td><span class='e-dbrd-designer-warning-icon'><\/span><span>Replace<\/span><\/td>",{},{id:this.id+this.connectionType+"_web_tpl_warning_tr"}),this.jiraRow.append(this.templateWarning),this.methodElement=$("<tr id="+this.id+this.connectionType+"_method_type_row/>"),this.jiraRow.append(this.methodElement),this.datasource.renderDropDownItem(this.dashboardDesigner.locale.dataSource.webDataSource.methodText,this.id+this.connectionType+"_webDs_methodType",this.methodElement,this.methodJson,this.field,"0",this.onMethodSelect,this),this.templateWarning.hide()):(i=[{id:this.id+this.connectionType+"_jirads_Jql_type",isChecked:!0,name:"JQL",value:"JQL"},{id:this.id+this.connectionType+"jirads_Url_type",isChecked:!1,name:"Raw Query",value:"RawQuery"}],this.renderRadioButtonGroup(this.id+this.connectionType+"_webDs_query_type",i,"Request Body","types",n,this.onRequestBodyTypeSelected,this),this.datasource.renderTextBoxItem("Domain URL",this.id+this.connectionType+"_webDs_domain",!1,n,427,"https://<:your_domain>.atlassian.net"),this.datasource.renderTextArea("JQL",this.id+this.connectionType+"_webDs_jql",n),this.customFieldRow=$("<tr id="+this.id+this.connectionType+"_include_customfield_txt/>"),t=$("<td style=' float:left; ' />"),r=ej.buildTag("label.editLabel e-designer-title-label","* Include custom field ids separated by comma",{},{}),t.append(r),this.customFieldRow.append(t),this.datasource.renderCheckboxItem("Include Custom Fields",this.id+this.connectionType+"_chk_ignore_customfield",n,this.callBackIgnoreCustomField,this),this.datasource.renderTextBoxItem("",this.id+this.connectionType+"_txt_customfield_val",!1,n,427,null,null,"Split by comma"),n.append(this.customFieldRow),this.datasource.renderTextArea(this.dashboardDesigner.locale.dataSource.webDataSource.urlText,this.id+this.connectionType+"_webDs_url",n),this.urlElement=this.jiraRow.find("#"+this.id+this.connectionType+"_webDs_url_tr"),this.urlElement.hide(),this.templateWarning=ej.buildTag("tr.e-dbrd-designer-tpl-warning","<td><span class='e-dbrd-designer-warning-icon'><\/span><span>Replace<\/span><\/td>",{},{id:this.id+this.connectionType+"_web_tpl_warning_tr"}),this.jiraRow.append(this.templateWarning),this.methodElement=$("<tr id="+this.id+this.connectionType+"_method_type_row/>"),this.jiraRow.append(this.methodElement),this.datasource.renderDropDownItem(this.dashboardDesigner.locale.dataSource.webDataSource.methodText,this.id+this.connectionType+"_webDs_methodType",this.methodElement,this.methodJson,this.field,"0",this.onMethodSelect,this),this.methodElement.hide(),this.templateWarning.hide(),this.domainText=this.jiraRow.find("#"+this.id+this.connectionType+"_webDs_domain"),this.domainrowEle=this.jiraRow.find("#"+this.id+this.connectionType+"_webDs_domain_tr"),this.jqlRadioButton=this.jiraRow.find("#"+this.id+this.connectionType+"_jirads_Jql_type").data("ejRadioButton"),this.jqlTextArea=this.jiraRow.find("#"+this.id+this.connectionType+"_webDs_jql"),this.jqlrowElement=this.jiraRow.find("#"+this.id+this.connectionType+"_webDs_jql_tr"),this.jiraIgnoreCutomField=this.jiraRow.find("#"+this.id+this.connectionType+"_txt_customfield_val_tr"),this.customFieldCheckBox=this.jiraRow.find("#"+this.id+this.connectionType+"_chk_ignore_customfield_tr"),this.chkIgnoreButton=this.jiraRow.find("#"+this.id+this.connectionType+"_chk_ignore_customfield").data("ejCheckBox"),this.txtCustomField=this.jiraRow.find("#"+this.id+this.connectionType+"_txt_customfield_val"),this.txtCustomField.attr("disabled","true"),this.queryType=this.webConfig.find("#"+this.id+this.connectionType+"_webDs_query_type"));this.urlText=this.jiraRow.find("#"+this.id+this.connectionType+"_webDs_url");this.urlText.unbind("keyup",$.proxy(this.inputFocus,this));this.urlText.bind("keyup",$.proxy(this.inputFocus,this));this.jiraRow.find("#"+this.id+this.connectionType+"_webDs_methodType")&&(this.methodTypeDrpdwn=this.webConfig.find("#"+this.id+this.connectionType+"_webDs_methodType").data("ejDropDownList"))},n.prototype.callBackIgnoreCustomField=function(n){this.isCustomField(n.isChecked)},n.prototype.isCustomField=function(n){n?this.txtCustomField.removeAttr("disabled"):this.txtCustomField.attr("disabled",!0)},n.prototype.renderWebDatasourcePanel=function(n){var h=this.getRefreshSettingsJson(),o=this.getAuthTypeJson(n),r=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+this.connectionType+"_web_basic_config"}),u,t,f,i,s,e;this.webConfig.append(r);u=$("<tr id="+this.id+this.connectionType+"_spl_row/>");r.append(u);this.renderSplArea(u);t=$("<tr />");r.append(t);f=$("<tr id='"+this.id+this.connectionType+"_webDs_body_type' />");i=$("<table />");f.append(i);s=[{id:this.id+this.connectionType+"_webDs_req_type_parameters",isChecked:!0,name:this.dashboardDesigner.locale.dataSource.webDataSource.parametersText,value:"Parameters"},{id:this.id+this.connectionType+"_webDs_req_type_raw",isChecked:!1,name:"Raw",value:"Raw"}];this.renderRadioButtonGroup(this.id+this.connectionType+"_webDs_req_type",s,"Request Body","reqtype",i,this.onRequestTypeSelected,this);this.renderParameterFields(i,this.id+this.connectionType+"_webDS_parameters","parameters",this.dashboardDesigner.locale.dataSource.webDataSource.parametersText);this.datasource.renderTextArea("",this.id+this.connectionType+"_webDs_reqtype_raw_txt",i);t.append(f);this.datasource.renderNumericItem("Max Rows",this.id+this.connectionType+"_max_count",t,null,null,null,!1,"439px",!0,1,1e4);this.maxRowsElement=this.webConfig.find("#"+this.id+this.connectionType+"_max_count_tr");this.maxRowsElement.hide();this.renderParameterFields(t,this.id+this.connectionType+"_webDS_headers","headers",this.dashboardDesigner.locale.dataSource.webDataSource.headersText);this.multiRequestRow=ej.buildTag("tr","",{display:"none"},{id:this.id+this.connectionType+"_webDs_multi_req_opts"});e=$("<table />");this.multiRequestRow.append(e);t.append(this.multiRequestRow);this.datasource.renderDropDownItem("Page(s)",this.id+this.connectionType+"_webDs_multi_pages",e,[1,2,3,4,5,6,7,8,9,10],{},"0",null);this.datasource.renderDropDownItem("Refresh Settings",this.id+this.connectionType+"_webDs_refresh",t,h,this.field,"0");this.datasource.renderDropDownItem("Data Format",this.id+this.connectionType+"_webDs_dataFormat",t,[{id:"json",text:"JSON",value:"Json"},{id:"csv",text:"CSV",value:"Csv"}],this.field,"0");this.datasource.renderDropDownItem("Authentication Type",this.id+this.connectionType+"_webDs_authentication",t,o,this.field,null,this.onAuthSelect,this);this.datasource.renderTextBoxItem("User Name",this.id+this.connectionType+"_basic_auth_username",!1,t,427);this.datasource.renderTextBoxItem("Password",this.id+this.connectionType+"_basic_auth_pwd",!0,t,427);this.userName=this.webConfig.find("#"+this.id+this.connectionType+"_basic_auth_username_tr");this.pwd=this.webConfig.find("#"+this.id+this.connectionType+"_basic_auth_pwd_tr");this.rawBody=this.webConfig.find("#"+this.id+this.connectionType+"_webDs_reqtype_raw_txt");this.bodyType=this.webConfig.find("#"+this.id+this.connectionType+"_webDs_req_type");this.webConfig.find("#"+this.id+this.connectionType+"_webDs_authentication")&&(this.authTypeDrpdwn=this.webConfig.find("#"+this.id+this.connectionType+"_webDs_authentication").data("ejDropDownList"),n?(this.authTypeDrpdwn.selectItemsByIndices(o.length-1),this.authTypeDrpdwn.option("enabled",!1)):(this.authTypeDrpdwn.option("enabled",!0),this.authTypeDrpdwn.selectItemsByIndices("0")));this.webConfig.find("#"+this.id+this.connectionType+"_webDs_refresh")&&(this.refreshSettingsDrpdwn=this.webConfig.find("#"+this.id+this.connectionType+"_webDs_refresh").data("ejDropDownList"));this.webConfig.find("#"+this.id+this.connectionType+"_webDs_dataFormat")&&(this.dataFormatDrpdwn=this.webConfig.find("#"+this.id+this.connectionType+"_webDs_dataFormat").data("ejDropDownList"));this.maxRowsDrpdwn=this.webConfig.find("#"+this.id+this.connectionType+"_max_count").data("ejNumericTextbox");this.maxRowsDrpdwn.option("value",100);this.maxRowsDrpdwn.option("incrementStep",100);this.populateParameterVal([],"parameters");this.rawBody.hide();this.webConfig.find("#"+this.id+this.connectionType+"_webDs_body_type").hide()},n.prototype.onRequestBodyTypeSelected=function(n){if(n.isChecked)switch(n.model.value){case"JQL":this.selectJql(!0);break;case"RawQuery":this.selectUrl(!0)}this.scrollerRefresh(this.dashboardDesigner.element.find("#"+this.id+"_dsConfigBodyContainer"));this.connectionType==="_editConnection"&&this.scrollerRefresh(this.editConnection.divContainer)},n.prototype.selectJql=function(){this.urlElement.hide();this.templateWarning.hide();this.methodElement.hide();this.jqlrowElement.show();this.domainrowEle.show();this.jiraIgnoreCutomField.show();this.customFieldRow.show();this.customFieldCheckBox.show();this.maxRowsElement.show();this.methodTypeDrpdwn.selectItemByIndex(0)},n.prototype.selectUrl=function(){this.urlElement.show();this.methodElement.show();this.jqlrowElement.hide();this.domainrowEle.hide();this.jiraIgnoreCutomField.hide();this.customFieldRow.hide();this.customFieldCheckBox.hide();this.maxRowsElement.hide()},n.prototype.showOAuthSettingsIfAny=function(n){if(!ej.isNullOrUndefined(n)&&ej.DashboardDesignerUtility.Serialization.stringtoEnum(OAuthProvider,n.provider)===OAuthProvider.Google&&n.service==="analytics"){this.multiRequestRow.show();var t=this.multiRequestRow.find("table td:first span.e-dbrd-info-icon");t.css("display","inline").ejTooltip({content:"<span>The <b>Page(s)<\/b> option allows you to retrieve more than one page of data.<br> You can use the <a target='_blank' href='https://developers.google.com/analytics/devguides/reporting/core/v3/reference#maxResults'>max-results<\/a> parameter in your query to select upto 10000 records in a single page.<\/span>",showShadow:!0})}},n.prototype.inputFocus=function(){this.hideValidationMsg();this.getUrlText()},n.prototype.unWiredEvents=function(){this.urlText.unbind("keyup",$.proxy(this.inputFocus,this))},n.prototype.destroy=function(){this.unWiredEvents()},n.prototype.renderParameterFields=function(n,t,i,r){var h=ej.buildTag("tr","",{},{}),c=ej.buildTag("td","",{},{}),f=ej.buildTag("div","",{width:"auto",height:"100%",display:"block","margin-top":"0px",overflow:"auto","margin-left":"4px"},{id:t}),l=ej.buildTag("div","",{},{}),a=ej.buildTag("table","",{},{}),v=ej.buildTag("tr","",{},{}),u=ej.buildTag("td","",{width:"433px"},{}),y=ej.buildTag("Label.e-designer-add-label",r,{},{type:"label"}),e=ej.buildTag("div","",{cursor:"pointer",float:"right"}),p=ej.buildTag("span.e-chk-image e-icon e-plus e-designer-add-icon","",{display:"block"},{id:this.id+this.connectionType+"_"+i+"_add_span"}),o=ej.buildTag("div","",{cursor:"pointer",float:"right"},{}),w=ej.buildTag("span.e-btntxt e-designer-add-btn ","ADD",{},{}),s=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control e-designer-border-dialog","",{margin:"0px 0px 4px 0px",height:"126px",width:"436px",padding:"5px 0px"},{id:this.id+this.connectionType+"_"+i+"_val_parent"}),b=ej.buildTag("div.e-items","",{},{id:this.id+this.connectionType+"_"+i+"_container_div"});n.append(h);h.append(c);c.append(f);f.append(l);l.append(a);a.append(v);v.append(u);u.append(y);u.append(o);o.append(w);u.append(e);e.append(p);f.append(s);s.append(b);s.ejScroller({height:"126px",scrollerSize:9,autoHide:!0,buttonSize:14,enableTouchScroll:!0});e.bind("click",$.proxy(this.renderSetValueFields,this,i));o.bind("click",$.proxy(this.renderSetValueFields,this,i))},n.prototype.renderSetValueFields=function(n){var y=this.webConfig.find("#"+this.id+this.connectionType+"_"+n+"_container_div"),r=this.webConfig.find("#"+this.id+this.connectionType+"_"+n+"_val_parent"),t=ej.getGuid(this.id+this.connectionType+"_row_"),u=ej.buildTag("div","",{padding:"4px"},{id:t,rowId:t,"class":"e-reportdesigner-webParam-row"}),f,v;y.append(u);var e=ej.buildTag("table.e-designer-table-dialog","",{width:"100%"},{}),i=ej.buildTag("tr","",{height:"30px"},{}),o=ej.buildTag("td","",{width:"114px"},{id:t+"_"+n+"_lbl_txtCol"}),s=ej.buildTag("input.e-textbox e-designer-textbox-border e-designer-border e-designer-exclude","",{height:"20px",width:"130px"},{type:"text",id:t+"_"+n+"_lbl_txt"});ej.DashboardUtil.txtWaterMark(s,"Name");u.append(e);e.append(i);i.append(o);o.append(s);var h=ej.buildTag("td","",{width:"20px","padding-right":"5px"},{}),c=ej.buildTag("span.e-chk-image e-icon e-cross-circle e-designer-delete-icon","",{cursor:"default","padding-top":"4px"},{id:t+"_"+n+"_del_icon"}),l=ej.buildTag("td","",{width:"114px","padding-left":"4px"},{}),a=ej.buildTag("input.e-textbox e-designer-textbox-border e-designer-border e-designer-exclude","",{height:"20px",width:"200px"},{type:"text",id:t+"_"+n+"_value_txt"});return ej.DashboardUtil.txtWaterMark(a,"Value"),f=ej.buildTag("td","",{"padding-top":"1px",width:"20px"},{id:t+"_webParam_error_td"}),ej.DashboardUtil.renderErrIndictor(f,this.id),i.append(l),l.append(a),i.append(f),i.append(h),h.append(c),c.bind("click",$.proxy(this.deleteRow,this,u,r)),v=this.webConfig.find("#"+this.id+this.connectionType+"_"+n+"_container_div").height(),r.height()>v?r.find(".e-content").removeClass("e-content"):(this.scrollerRefresh(r),this.connectionType==="_editConnection"&&this.scrollerRefresh(this.editConnection.divContainer)),t},n.prototype.populateParameterVal=function(n,t){var i;if(!ej.isNullOrUndefined(n)&&n.length>0)for(i=0;i<n.length;i++){var u=this.renderSetValueFields(t),r=n[i],f=this.webConfig.find("#"+u+"_"+t+"_lbl_txt"),e=this.webConfig.find("#"+u+"_"+t+"_value_txt");f.removeClass("e-designer-txtmark");e.removeClass("e-designer-txtmark");f.val(r.Key||r.key);e.val(r.Value||r.value)}},n.prototype.oAuthConnectionType=function(n){return{provider:n.Provider,service:n.Service,serviceId:n.ServiceId}},n.prototype.editConfiguration=function(n,t){var u=ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypeObject(t.ProviderType,this.dashboardDesigner.locale),i,r,f;this.connectionModel=u;i=ej.isNullOrUndefined(t.OAuthConnection)?null:t.OAuthConnection;ej.isNullOrUndefined(i)||(i=this.oAuthConnectionType(i));this.renderConfiguration(n,"_editConnection",i,u);this.hideValidationMsg();t&&(this.setUrl(ej.isNullOrUndefined(t.WebUrl)?"":t.WebUrl),this.setAuthType(t.SecurityType),this.setRefreshInterval(t.RefreshInterval),this.setDataFormat(t.DataFormat),this.setUsername(ej.isNullOrUndefined(t.Username)?"":t.Username),t.IsJQL||(this.setMethodType(t.MethodType),this.rawBody.val(ej.isNullOrUndefined(t.RawData)?"":t.RawData)),ej.isNullOrUndefined(this.maxRowsDrpdwn)||this.maxRowsDrpdwn.option("value",t.Rows),ej.isNullOrUndefined(this.jqlTextArea)||this.jqlTextArea.val(ej.isNullOrUndefined(t.JQLQuery)?"":t.JQLQuery),ej.isNullOrUndefined(this.domainText)||this.domainText.val(ej.isNullOrUndefined(t.DomainURL)?"https://<:your_domain>.atlassian.net":t.DomainURL),t.Parameters&&(this.webConfig.find("#"+this.id+this.connectionType+"_parameters_container_div").empty(),this.setParameters(ej.isNullOrUndefined(t.Parameters)?"":t.Parameters)),t.Headers&&(this.webConfig.find("#"+this.id+this.connectionType+"_headers_container_div").empty(),this.setHeaders(ej.isNullOrUndefined(t.Headers)?"":t.Headers)),t.Pages&&(r=this.multiRequestRow.find("#"+this.id+this.connectionType+"_webDs_multi_pages").data("ejDropDownList"),r&&r.setModel({selectedIndex:t.Pages-1})),t.IsCustomField&&(f=this.customFieldCheckBox.find("#"+this.id+this.connectionType+"_chk_ignore_customfield"),f.ejCheckBox({checked:!0}),this.isCustomField(t.IsCustomField),this.txtCustomField.val(t.CustomField)),this.setBodyType(ej.isNullOrUndefined(t.BodyType)?"":t.BodyType),t.ProviderType==="e-web-jira"&&(t.IsJQL===!0?(this.setQueryType("JQL"),this.selectJql(!1)):(this.setQueryType("RawQuery"),this.selectUrl(!1))))},n.prototype.hideValidationMsg=function(){this.datasource.showValidationMsg(this.urlText.attr("id"),!1)},n.prototype.resetConfiguration=function(n){var t,i;this.multiRequestRow.hide();this.templateWarning.hide();this.templateStrings=[];t=this.multiRequestRow.find("#"+this.id+this.connectionType+"_webDs_multi_pages").data("ejDropDownList");t&&t.setModel({selectedIndex:0});this.hideValidationMsg();this.urlText.val("");this.updateUsernameLabel(null);this.updatePasswordLabel(null);this.userName.find("input").val("");this.pwd.find("input").val("");this.methodTypeDrpdwn.setModel({selectedIndex:0});this.refreshSettingsDrpdwn.setModel({selectedIndex:0});this.dataFormatDrpdwn.setModel({selectedIndex:0});i=this.getAuthTypeJson(n);this.authTypeDrpdwn.option("dataSource",i);n?(this.authTypeDrpdwn.option("enabled",!1),this.authTypeDrpdwn.setModel({selectedIndex:i.length-1})):(this.authTypeDrpdwn.option("enabled",!0),this.authTypeDrpdwn.setModel({selectedIndex:0}));this.webConfig.find("#"+this.id+this.connectionType+"_spl_row").empty();this.renderSplArea(this.webConfig.find("#"+this.id+this.connectionType+"_spl_row"));this.webConfig.find("#"+this.id+this.connectionType+"_parameters_container_div").empty();this.webConfig.find("#"+this.id+this.connectionType+"_headers_container_div").empty();this.webConfig.find("#"+this.id+this.connectionType+"_webDS_parameters").show();this.webConfig.find("#"+this.id+this.connectionType+"_webDs_reqtype_raw_txt").val("").hide();this.bodyType.find("input.e-radiobtn[value=Parameters]").ejRadioButton({checked:!0});this.scrollerRefresh(this.webConfig.find("#"+this.id+this.connectionType+"_parameters_container_div"));this.scrollerRefresh(this.webConfig.find("#"+this.id+this.connectionType+"_headers_container_div"));this.maxRowsDrpdwn.option("value",100);this.maxRowsDrpdwn.option("maxValue",1e4);this.maxRowsElement.hide();this.connectionType==="_editConnection"&&this.scrollerRefresh(this.editConnection.divContainer)},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.BodyType=t.BodyType;n.DataFormat=t.DataFormat;n.DomainURL=t.DomainURL;n.Headers=t.Headers;n.IsJQL=t.IsJQL;n.JQLQuery=t.JQLQuery;n.MethodType=t.MethodType;n.OAuthConnection=t.OAuthConnection;n.Pages=t.Pages;n.Parameters=t.Parameters;n.Password=t.Password;n.Provider=t.Provider;n.ProviderType=t.ProviderType;n.RawData=t.RawData;n.RefreshInterval=t.RefreshInterval;n.Rows=t.Rows;n.SecurityType=t.SecurityType;n.Username=t.Username;n.WebUrl=t.WebUrl;n.IsCustomField=t.IsCustomField;n.CustomField=t.CustomField},n.prototype.UpdateDataSourceInfo=function(n,t){this.UpdateDSInfo(n,t)},n.prototype.showConfiguration=function(n){this.webConfig.css("display",n?"table-row":"none");this.webConfig.children().show()},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n.prototype.deleteRow=function(n,t){n.remove();this.scrollerRefresh(t);this.connectionType==="_editConnection"&&this.scrollerRefresh(this.editConnection.divContainer)},n.prototype.getParameters=function(n){var t=this,r=[],i="",u=!1,f=this.webConfig.find("#"+this.id+this.connectionType+"_"+n+"_container_div .e-reportdesigner-webParam-row");return(f.each(function(f,e){var o=$(e).attr("id"),s=t.getValues(t.webConfig.find("#"+o+"_"+n+"_lbl_txt")),h=t.getValues(t.webConfig.find("#"+o+"_"+n+"_value_txt"));i+=t.validateValues(s,i,t.webConfig.find("#"+o+"_"+n+"_lbl_txt"));i+=t.validateValues(h,i,t.webConfig.find("#"+o+"_"+n+"_value_txt"));ej.isNullOrUndefined(i)||i.length===0?(r.push({Key:s,Value:h}),ej.DashboardUtil.showErrIndictor(t.webConfig.find("#"+o+"_webParam_error_td"),!1,i)):(ej.DashboardUtil.showErrIndictor(t.webConfig.find("#"+o+"_webParam_error_td"),!0,i),i="",u=!0)}),!u)?(this.extractTemplateStrings(JSON.stringify(r)),{hasErrors:!1,parametersVal:r}):{hasErrors:!0,parametersVal:r}},n.prototype.validateValues=function(n,t,i){var r="";return!ej.isNullOrUndefined(n)&&n.length===0||ej.isNullOrUndefined(n)?(r+="Specify value in fields",this.updateHighlighter(i,!0)):this.updateHighlighter(i,!1),ej.DashboardUtil.contains(t,r,!0)&&(r=""),r},n.prototype.updateHighlighter=function(n,t){t?n.addClass("e-designer-error").addClass("e-designer-error-radius"):n.removeClass("e-designer-error").removeClass("e-designer-error-radius")},n.prototype.getValues=function(n){var t=n.val();return n.hasClass("e-designer-txtmark")?"":t},n.prototype.onMethodSelect=function(n){n.selectedValue==="Get"?this.webConfig.find("#"+this.id+this.connectionType+"_webDs_body_type").hide():this.webConfig.find("#"+this.id+this.connectionType+"_webDs_body_type").show();this.scrollerRefresh(this.dashboardDesigner.element.find("#"+this.id+"_dsConfigBodyContainer"));this.connectionType==="_editConnection"&&this.scrollerRefresh(this.editConnection.divContainer)},n.prototype.onRequestTypeSelected=function(n){if(n.isChecked)switch(n.model.value){case"Raw":this.webConfig.find("#"+this.id+this.connectionType+"_webDS_parameters").hide();this.rawBody.show();break;case"Parameters":this.webConfig.find("#"+this.id+this.connectionType+"_webDS_parameters").show();this.rawBody.hide()}this.scrollerRefresh(this.dashboardDesigner.element.find("#"+this.id+"_dsConfigBodyContainer"));this.connectionType==="_editConnection"&&this.scrollerRefresh(this.editConnection.divContainer)},n.prototype.renderRadioButtonGroup=function(n,t,i,r,u,f,e){var v=$("<tr/>"),l=$("<table id='"+n+"'/>"),s=$("<tr/>"),h=$("<td unselectable='on'/>"),p=ej.buildTag("label.editLabel e-designer-title-label",i,{},{}),o,c,a,y;for(h.append(p),s.append(h),l.append(s),s=$("<tr/>"),h=$("<td unselectable='on' />"),s.append(h),l.append(s),v.append(l),u.append(v),o=0;o<t.length;o++)c=ej.buildTag("div","",{float:"left","margin-left":o===0?"0px":"15px"},{}),a=ej.buildTag("input","",{},{type:"radio",name:r,id:t[o].id}),c.append(a),y=ej.buildTag("label.editLabel e-designer-content-label",t[o].name,{"margin-left":"6px"},{"for":t[o].id}),c.append(y),h.append(c),a.ejRadioButton({checked:t[o].isChecked,change:$.proxy(f,e),value:t[o].value})},n.prototype.onAuthSelect=function(n){n.selectedValue==="BasicHttpAuthentication"?(this.userName.show(),this.pwd.show(),!ej.isNullOrUndefined(this.connectionModel)&&!ej.isNullOrUndefined(this.connectionModel.templates)&&this.connectionModel.templates.length>0&&this.hidePasswordRow(this.connectionModel.templates[0])):(this.userName.hide(),this.pwd.hide());this.scrollerRefresh(this.dashboardDesigner.element.find("#"+this.id+"_dsConfigBodyContainer"));this.connectionType==="_editConnection"&&this.scrollerRefresh(this.editConnection.divContainer)},n.prototype.updateModelToUi=function(n){ej.isNullOrUndefined(n)||(ej.isNullOrUndefined(n.url)||this.setUrl(n.url),ej.isNullOrUndefined(n.username)||n.username===""||this.setUsername(n.username),this.setDataFormat(n.dataFormat),this.setAuthType(n.authenticationType),this.setMethodType(n.method),this.setHeaders(n.headers),this.setParameters(n.parameters),this.hidePasswordRow(n),this.updateUsernameLabel(n),this.updatePasswordLabel(n))},n.prototype.validateTemplateStringPresence=function(){return this.templateStrings.length!==0?(this.templateWarning.show().find("span:nth(1)").html(this.dashboardDesigner.locale.dataSource.webDataSource.replaceText+this.templateStrings.join(",")+this.dashboardDesigner.locale.dataSource.webDataSource.withUserDataText),this.scrollerRefresh(this.connectionType==="_editConnection"?this.editConnection.divContainer:this.dashboardDesigner.element.find("#"+this.id+"_dsConfigBodyContainer")),!0):(this.templateWarning.hide(),!1)},n.prototype.setUsername=function(n){this.userName.find("input").val(n);this.extractTemplateStrings(n)},n.prototype.setUrl=function(n){this.urlText.val(n);this.extractTemplateStrings(n)},n.prototype.setRefreshInterval=function(n){this.refreshSettingsDrpdwn.selectItemByValue(n)},n.prototype.setDataFormat=function(n){this.dataFormatDrpdwn.selectItemByValue(n.toString())},n.prototype.setAuthType=function(n){this.authTypeDrpdwn.selectItemByValue(n.toString())},n.prototype.setMethodType=function(n){this.methodTypeDrpdwn.selectItemByValue(n.toString())},n.prototype.setParameters=function(n){ej.isNullOrUndefined(n)||(this.extractTemplateStrings(JSON.stringify(n)),this.populateParameterVal(n,"parameters"))},n.prototype.setHeaders=function(n){ej.isNullOrUndefined(n)||(this.extractTemplateStrings(JSON.stringify(n)),this.populateParameterVal(n,"headers"))},n.prototype.setBodyType=function(n){var t=this.bodyType.find("input.e-radiobtn[value="+n+"]");t.length!==0&&t.ejRadioButton({checked:!0})},n.prototype.setQueryType=function(n){var t=this.queryType.find("input.e-radiobtn[value="+n+"]");t.length!==0&&t.ejRadioButton({checked:!0})},n.prototype.extractTemplateStrings=function(n){var r=new RegExp("<:(.*?)>","g"),i=n.match(r),t;if(!ej.isNullOrUndefined(i))for(t=0;t<i.length;t++)this.templateStrings.push("<strong>"+i[t]+"<\/strong>")},n.prototype.isJqlSelected=function(){return!ej.isNullOrUndefined(this.connectionModel)&&this.connectionModel.itemType==="e-web-jira"&&!ej.isNullOrUndefined(this.jqlRadioButton)&&this.jqlRadioButton.model.checked},n.prototype.isIgnoreSelected=function(){return!ej.isNullOrUndefined(this.connectionModel)&&this.connectionModel.itemType==="e-web-jira"&&!ej.isNullOrUndefined(this.chkIgnoreButton)&&this.chkIgnoreButton.model.checked},n.prototype.getMethodType=function(){return this.isJqlSelected()?this.methodJson[1].value:this.methodTypeDrpdwn.getSelectedValue()},n.prototype.getUrlText=function(){var n="";return this.isJqlSelected()?(n=this.domainText.val()+"/rest/api/2/search",this.extractTemplateStrings(n)):(n=this.urlText.val(),this.extractTemplateStrings(n)),n},n.prototype.getBodyType=function(){if(this.isJqlSelected()&&!ej.isNullOrUndefined(this.jqlTextArea))return"Raw";var n=this.bodyType.find(".e-radiobtn-wrap[aria-checked=true]>input").data("ejRadioButton");return n?n.model.value:""},n.prototype.getCustomField=function(){return this.isIgnoreSelected()&&!ej.isNullOrUndefined(this.txtCustomField)?this.txtCustomField.val():""},n.prototype.getRawData=function(){var n="",u,t,i,r;if(this.isJqlSelected()&&!ej.isNullOrUndefined(this.jqlTextArea)){if(u=this.maxRowsDrpdwn.getValue()<100?this.maxRowsDrpdwn.getValue():100,t=null,this.isIgnoreSelected()&&(t=this.txtCustomField.val().split(",")),i="",!ej.isNullOrUndefined(t))for(r=0;r<t.length;r++)i=i+',"'+t[r]+'"';n='{"jql": "'+this.jqlTextArea.val().replace(/"/g,'\\"')+'","startAt": 0,"maxResults": "'+u+'", "validateQuery": "strict", "fieldsByKeys": false ,"fields":["versions","assignee","components","created","description","duedate","issuekey","labels","lastViewed","security","timeoriginalestimate","priority","project","timeestimate","reporter","resolution","resolutiondate","status","summary","timespent","updated","votes","watches","workratio","attachment","environment","fixVersions"'+i+"]}";this.extractTemplateStrings(n)}else n=this.rawBody.val(),this.extractTemplateStrings(n);return n},n.prototype.getUsername=function(){var n=this.userName.find("input").val();return this.extractTemplateStrings(n),n},n.prototype.getDatasourceInfo=function(n){var t;this.templateStrings=[];var i=!0,r=this.getUrlText(),l=this.getMethodType(),u=this.getParameters("parameters"),f=this.getParameters("headers"),a=this.refreshSettingsDrpdwn.getSelectedValue(),v=this.dataFormatDrpdwn.getSelectedValue(),e=0;this.maxRowsDrpdwn&&(e=this.maxRowsDrpdwn.getValue());var o=this.authTypeDrpdwn.getSelectedValue(),y=this.getUsername(),p=this.pwd.find("input").val(),s=this.getBodyType(),w=this.getRawData(),h=this.multiRequestRow.find("#"+this.id+this.connectionType+"_webDs_multi_pages").data("ejDropDownList"),b=this.isIgnoreSelected(),k=this.getCustomField(),c=null;return(r.length===0?(this.datasource.showValidationMsg(this.urlText.attr("id"),!0,this.dashboardDesigner.locale.dataSource.specifyURL),i=!1):this.hideValidationMsg(),o==="oauth"&&(t=this.authTypeDrpdwn.model.dataSource[this.authTypeDrpdwn.model.selectedIndex],c={Provider:t.provider,Service:t.service,ServiceId:t.id}),i&&!u.hasErrors&&!f.hasErrors&&!this.validateTemplateStringPresence())?{Name:n,Provider:"WEB",ProviderType:ej.isNullOrUndefined(this.connectionModel)?"":this.connectionModel.connector,IsJQL:this.isJqlSelected(),JQLQuery:this.isJqlSelected()?this.jqlTextArea.val():"",DomainURL:this.isJqlSelected()?this.domainText.val():"",MethodType:l,WebUrl:r,Parameters:u.parametersVal,Headers:f.parametersVal,RefreshInterval:a,DataFormat:v,SecurityType:o,Username:y,Password:p,OAuthConnection:c,BodyType:s,RawData:s==="Raw"?w:null,Pages:h?h.getSelectedValue():"1",Rows:e,IsCustomField:b,CustomField:k}:null},n}();window.ej.createObject("ej.DashboardDesignerUtility.WebDatasource",InternalWebDatasource,window);var __extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),ComboBoxProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ComboBoxProperties",t.EnableMultiSelection=!1,t.SelectFirstItemByDefault=!1,t.DefaultSelectedIndices="0",t}return __extends(t,n),t}(WidgetProperties),GridProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.GridProperties",t.AllowSorting=!0,t.AllowPaging=!1,t.FitContent=!1,t.AllowFilter=!1,t.HorizontalGridLine=!0,t.VerticalGridLine=!0,t.EnableDataGrouping=!0,t.DisplayNames=[],t.UrlLink=new UrlLink,t.GridTemplate=[],t.HeaderSettings=new HeaderSettings,t}return __extends(t,n),t}(WidgetProperties),GridColumnSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.GridColumnSetting"}return n}(),HeaderSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.HeaderSettings";this.Foreground="#FFFFFFFF";this.Background="#FF77A7FB"}return n}(),HeatMapProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMapProperties",t.CellSettings=new CellSettings,t.XAxisSettings=new AxisSettings,t.YAxisSettings=new AxisSettings,t.LegendSettings=new LegendSettings,t.UrlLink=new UrlLink,t.ColorSettings=new ColorSettings,t}return __extends(t,n),t}(WidgetProperties),ColorSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.DOM.Model.DOM.HeatMap";this.MinColor="#FFA8E1F4";this.MaxColor="#FF77A7FB"}return n}(),AxisSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.AxisSettings";this.AxisTitle="";this.ShowAxisLabel=!0;this.ShowAxisTitle=!0;this.InversedAxis=!1;this.OpposedAxis=!1;this.LabelIntersectAction=ej.DashboardDesignerUtility.Serialization.enumToString(LabelIntersectAction,LabelIntersectAction.Trim);this.LabelRotation=ej.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.None)}return n}(),LegendSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.LegendSettings";this.ShowLegend=!1;this.Position=ej.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Right)}return n}(),CellSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.HeatMap.CellSettings";this.CellBorder=1;this.CellRadius=3;this.ShowDataLabel=!1;this.TileType=ej.DashboardDesignerUtility.Serialization.enumToString(TileType,TileType.Rect)}return n}(),TileType;(function(n){n[n.Bubble="Bubble"]="Bubble";n[n.Rect="Rect"]="Rect"})(TileType||(TileType={})),function(n){n[n.Center="Center"]="Center";n[n.Near="Near"]="Near";n[n.Far="Far"]="Far"}(LegendAlignment||(LegendAlignment={})),function(n){n[n.None="None"]="None";n[n.Trim="Trim"]="Trim"}(LabelIntersectAction||(LabelIntersectAction={}));UrlLink=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.UrlLink";this.EnableLink=!1;this.PassingParameters=[];this.ColumnUrlDetails=[]}return n}();ColumnUrl=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.ColumnUrl"}return n}(),function(n){n[n.Dashboard=0]="Dashboard";n[n.Tab=1]="Tab";n[n.Url=2]="Url"}(LinkType||(LinkType={})),function(n){n[n.Row=0]="Row";n[n.Column=1]="Column"}(UrlLinkType||(UrlLinkType={}));var GridTemplate=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.gridTemplate";this.DisplayType=DisplayType.Value}return n}(),ConditionalFormatting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.ConditionalFormatting";this.TargetMeasureColumn=new Column;this.MeasureConditionType=MeasureConditionType.Equals;this.DimensionConditionType=DimensionConditionType.Equals;this.FormatType=ConditionalFormatType.Column;this.ColorStyle=ColorType.SingleColor}return n}(),Column=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.Column"}return n}(),MeasureConditionType;(function(n){n[n.Equals="Equals"]="Equals";n[n.LessThan="Less Than"]="LessThan";n[n.LessThanOrEqual="Less Than Or Equal To"]="LessThanOrEqual";n[n.GreaterThanOrEqual="Greater Than Or Equal To"]="GreaterThanOrEqual";n[n.GreaterThan="Greater Than"]="GreaterThan";n[n.NotEquals="Does Not Equal"]="NotEquals";n[n.Between="Between"]="Between"})(MeasureConditionType||(MeasureConditionType={})),function(n){n[n.Equals="Equals"]="Equals";n[n.NotEquals="Does Not Equal"]="NotEquals";n[n.Contains="Contains"]="Contains";n[n.NotContains="Does Not Contains"]="NotContains";n[n.StartsWith="Starts With"]="StartsWith";n[n.EndsWith="Ends With"]="EndsWith"}(DimensionConditionType||(DimensionConditionType={})),function(n){n[n.Column="Column"]="Column";n[n.Row="Row"]="Row";n[n.Indication="Indication"]="Indication"}(ConditionalFormatType||(ConditionalFormatType={})),function(n){n[n.Number="Number"]="Number";n[n.Currency="Currency"]="Currency";n[n.Percentage="Percentage"]="Percentage"}(MeasureFormatType||(MeasureFormatType={})),function(n){n[n.SingleColor="Single Color"]="SingleColor";n[n.GradientColor="Gradient Color"]="GradientColor"}(ColorType||(ColorType={}));var Styles=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.Styles"}return n}(),FontFormats=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Grid.FontFormats"}return n}(),TreeMapProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.TreeMapProperties",t.ShowLegend=!1,t.EnableDrilldown=!1,t.IsCustomRange=!1,t.SaturatedColor="#FF77A7FB",t.MaxColor="#FFFBCB43",t.MidColor="#FFE57368",t.MinColor="#FF77A7FB",t.UrlLink=new UrlLink,t}return __extends(t,n),t}(WidgetProperties),MapsCommonProp=function(n){function t(){var t=n.call(this)||this;return t.ShapeData="WorldMap_Countries",t.ShapePropertyPath="name",t}return __extends(t,n),t}(WidgetProperties),BubbleMapProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.BubbleMapProperties",t.BubbleColor="#FF77A7FB",t.UrlLink=new UrlLink,t}return __extends(t,n),t}(MapsCommonProp),ChoroplethMapProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChoroplethMapProperties",t.ShowLegend=!1,t.IsPaletteColor=!0,t.MaxColor="#FF77A7FB",t.MinColor="#FFA8E1F4",t.UrlLink=new UrlLink,t}return __extends(t,n),t}(MapsCommonProp),LabelProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LabelProperties",t.Name="Label1",t.LineCollection=[],t.LabelBackgroundColor="#ffffff",t}return __extends(t,n),t}(WidgetProperties),LineProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.LineProperties";this.TextCollections=[];this.LineStyleProperties=new LineStyleProperties}return n}(),TextCollectionProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextCollectionProperties";this.Text=[]}return n}(),TextProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextProperties";this.Content="";this.TextStyle=new TextStyleProperties}return n}(),TextStyleProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.TextStyleProperties";this.FontSize="10px";this.FontFamily="Arial";this.FontColor="Black";this.FontStyle="Normal";this.TextDecoration="Normal";this.FontWeight="Normal";this.TextHighlightColor="#f5ea14"}return n}(),LineStyleProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Label.LineStyleProperties";this.LineTextAlignment="Left"}return n}(),DatePickerProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.DatePickerProperties",t.LimitDates=!0,t.Type=DatePickerType.Single,t.HighlightAvailableDates=!1,t}return __extends(t,n),t}(WidgetProperties),DatePickerType;(function(n){n[n.Single=0]="Single";n[n.Range=1]="Range"})(DatePickerType||(DatePickerType={}));RangeSliderProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.RangeSliderProperties",t.Type=RangeSliderType.Range,t.Orientation=RangeSliderOrientation.Horizontal,t}return __extends(t,n),t}(WidgetProperties),function(n){n[n.MinRange=0]="MinRange";n[n.Range=1]="Range"}(RangeSliderType||(RangeSliderType={})),function(n){n[n.Horizontal=0]="Horizontal";n[n.Vertical=1]="Vertical"}(RangeSliderOrientation||(RangeSliderOrientation={}));ListBoxProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ListBoxProperties",t.EnableMultiSelection=!1,t}return __extends(t,n),t}(WidgetProperties);GaugeSettings=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.GaugeProperties",t.RangeColor="#77A7FB",t.Direction=GaugeDirection.HighIsGood,t.MinValue=0,t.MaxValue=100,t.CustomTarget=70,t.RangeCollection=[new GaugeRangeSettings(0,33,"#F03E3E","Range-1",""),new GaugeRangeSettings(33,66,"#FFDD00","Range-2",""),new GaugeRangeSettings(66,100,"#30B32D","Range-3","")],t.GaugeType=GaugeTypes.HorseShoe,t.RangeWidth=RangeWidth.Medium,t.TicksPosition=TicksPosition.Outside,t.ValuePointer=ValuePointers.RangePointer,t.TargetPointer=TargetPointers.InvertedTriangle,t.ValueLabelPosition=ValueLabelPosition.Inside,t.ScaleLabelPosition=ScaleLabelPosition.Outside,t.ShowValueLabel=!0,t.ShowScaleLabel=!0,t.ShowTicks=!1,t.EnableAnimation=!1,t.TicksHeight=5,t.TicksWidth=1,t.ScaleWidth=40,t.ShowRange=!1,t.NeedlePointerHeight=60,t.LabelType=LabelType.ValueLabel,t.TargetPointerColor="#424242",t.NeedlePointerColor="#424242",t.UrlLink=new UrlLink,t}return __extends(t,n),t}(WidgetProperties),function(n){n[n.HalfRadialGauge="Half Circle"]="HalfRadialGauge";n[n.HorseShoe="Horse Shoe"]="HorseShoe";n[n.FullRadialGauge="Full Circle"]="FullRadialGauge";n[n.Auto="Auto"]="Auto"}(GaugeTypes||(GaugeTypes={}));GaugeRangeSettings=function(){function n(n,t,i,r,u){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Gauge.GaugeRangeSettings";this.Start=n;this.End=t;this.Color=i;this.Name=r;this.Label=u}return n}(),function(n){n[n.HighIsGood=0]="HighIsGood";n[n.LowIsGood=1]="LowIsGood"}(GaugeDirection||(GaugeDirection={})),function(n){n[n.RangePointer="Range Pointer"]="RangePointer";n[n.NeedlePointer="Needle Pointer"]="NeedlePointer";n[n.RangeWithNeedle="Range with Needle"]="RangeWithNeedle"}(ValuePointers||(ValuePointers={})),function(n){n[n.Triangle="Triangle"]="Triangle";n[n.InvertedTriangle="Inverted Triangle"]="InvertedTriangle";n[n.Line="Line"]="Line"}(TargetPointers||(TargetPointers={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(TicksPosition||(TicksPosition={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(ValueLabelPosition||(ValueLabelPosition={})),function(n){n[n.Inside=0]="Inside";n[n.Outside=1]="Outside"}(ScaleLabelPosition||(ScaleLabelPosition={})),function(n){n[n.Thin=0]="Thin";n[n.Medium=1]="Medium";n[n.Thick=2]="Thick"}(RangeWidth||(RangeWidth={})),function(n){n[n.ValueLabel="Value Label"]="ValueLabel";n[n.RangeLabel="Range Label"]="RangeLabel"}(LabelType||(LabelType={}));var CardProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.CardProperties",t.PrimaryValueType=PrimaryValueType.PercentOfTarget,t.SecondaryValueType="Variation",t.ActualValueForeground="#686262",t.TitleSettings=new TitleSetting,t.SubTitleSettings=new SubTitleSetting,t.CustomRangeSettings=new CardCustomRangeSetting,t.ActualValuePrefix="",t.TargetValuePrefix="",t.Direction=!0,t.HasCustomTitle=!1,t.ValueAlignment=TextAlignment.Right,t.UrlLink=new UrlLink,t.ShowIndicatorOnly=!1,t.EnableCompactView=!1,t.ShowActualValue=!0,t.ShowSecondaryValue=!0,t.ShowPrimaryValue=!0,t.ShowIndicator=!0,t.UniformSizing=!1,t.SparklineSettings=new SparkLineSettings,t.ActualValueTextAlignment=TextAlignment.Right,t.AdditionalValueAlignment=TextAlignment.Right,t.SecondaryValueAlignment=TextAlignment.Right,t.PrimaryValueAlignment=TextAlignment.Right,t}return __extends(t,n),t}(WidgetProperties),TitleSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.TitleSetting";this.Visibility=!0;this.Alignment=TextAlignment.Left;this.Color="#686262"}return n}(),SubTitleSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.SubTitleSetting";this.Visibility=!1;this.Color="#686262"}return n}(),CardCustomRangeSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.CardCustomRangeSetting";this.Type=CustomRangeType.Absolute;this.Ranges=[]}return n}(),CustomRangeType;(function(n){n[n.Absolute=0]="Absolute";n[n.Percent=1]="Percent"})(CustomRangeType||(CustomRangeType={})),function(n){n[n.AbsoluteDifference="Absolute Difference"]="AbsoluteDifference";n[n.PercentOfDifference="Percent of Difference"]="PercentOfDifference";n[n.PercentOfTarget="Percent of Target"]="PercentOfTarget";n[n.ActualValue="Actual Value"]="ActualValue";n[n.PercentOfChange="Percent of Change"]="PercentOfChange"}(PrimaryValueType||(PrimaryValueType={}));SparkLineSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.SparkLineSettings";this.LowValueColor="#1F497D";this.HighValueColor="#FFC000";this.ShowMarker=!0;this.Opacity=1;this.Type=SparkLineType.Line}return n}(),function(n){n[n.Line=0]="Line";n[n.Area=1]="Area";n[n.Column=2]="Column"}(SparkLineType||(SparkLineType={}));var CardCustomRange=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Card.CardCustomRange"}return n}(),ChartProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ChartProperties",t.ChartType=ej.DashboardDesignerUtility.Serialization.enumToString(ChartTypes,ChartTypes.Column),t.EnableAnimation=!1,t.ShowLegend=!0,t.ShowValueLabels=!1,t.ValueLabelRotation=ej.DashboardDesignerUtility.Serialization.enumToString(ValueLabelRotations,ValueLabelRotations.None),t.LegendPosition=ej.DashboardDesignerUtility.Serialization.enumToString(LegendPositions,LegendPositions.Bottom),t.ShowValueLabelSuffix=!1,t.ValueLabelSuffix="",t.PrimaryValueGridLines=!0,t.CategoryGridLines=!1,t.ShowMarker=!0,t.Axis=new Axis,t.DataLabel=ej.DashboardDesignerUtility.Serialization.enumToString(DataLabel,DataLabel.Percentage),t.IsEnableDrillDown=!1,t.DisplayNames=[],t.IsBasicChartType=!1,t.CustomLegendBtnVisibilty=!1,t.CustomLegendInfo=new CustomLegendSettings,t.IsCustomLegend=!1,t.IsColorPaletteCategoryVisible=!1,t.IsDefaultColorPalette=!0,t.ColorPaletteModel=[],t.TrendLineSettings=[],t.UrlLink=new UrlLink,t}return __extends(t,n),t}(WidgetProperties),ColorPaletteModelSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ColorPaletteModelSetting";this.Name="";this.Name="";this.IsModified=!1;this.Id=""}return n}(),TrendLineSettings=function(){function n(){this._type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.TrendLineSettings";this.CustomName="";this.LineColor="#77A7FB";this.LineStyle="";this.LineType="Linear";this.LineVisible=!0;this.Order=0;this.Name="";this.UniqueName="";this.Id=""}return n}(),CustomLegendSettings=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendSettings";this.Type=ej.DashboardDesignerUtility.Serialization.enumToString(CustomLegendType,CustomLegendType.Individual);this.Format="{{:Row}}({{:Value}})";this.SingleValues=[];this.GroupValues=new CustomLegendsForGroup}return n}(),CustomLegendsForIndividual=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendsForIndividual";this.Name="";this.Value="";this.IsModified=!1;this.Id=""}return n}(),CustomLegendsForGroup=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CustomLegendsForGroup";this.Values=[];this.Series=[]}return n}(),Axis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.Axis";this.CategoryAxis=new CategoryAxis;this.PrimaryValueAxis=new PrimaryValueAxis;this.CategoryVlaueAxis=new SecondaryValueAxis}return n}(),CategoryAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.CategoryAxis";this.IsEnabled=!0;this.LabelOverflowMode=LabelOverFlowMode.Trim.toString();this.LabelRotation="None";this.ShowTitle=!0;this.Title=""}return n}(),PrimaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.PrimaryValueAxis";this.IsEnabled=!0;this.ShowTitle=!0;this.Title=""}return n}(),SecondaryValueAxis=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.SecondaryValueAxis";this.IsEnabled=!1;this.ShowTitle=!0;this.Title=""}return n}(),ChartColumnSettinng=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Chart.ChartColumnSetting"}return n}(),ValueLabelRotations;(function(n){n[n.None="None"]="None";n[n.Plus45="+45"]="Plus45";n[n.Minus45="-45"]="Minus45";n[n.Plus90="+90"]="Plus90";n[n.Minus90="-90"]="Minus90"})(ValueLabelRotations||(ValueLabelRotations={})),function(n){n[n.Bottom="Bottom"]="Bottom";n[n.Right="Right"]="Right";n[n.Left="Left"]="Left";n[n.Top="Top"]="Top"}(LegendPositions||(LegendPositions={})),function(n){n[n.Column="Column"]="Column";n[n.Bar="Bar"]="Bar";n[n.Line="Line"]="Line";n[n.Area="Area"]="Area";n[n.Spline="Spline"]="Spline";n[n.SplineArea="Spline Area"]="SplineArea";n[n.StackedColumn="Stacked Column"]="StackedColumn";n[n.StackedBar="Stacked Bar"]="StackedBar";n[n.StackedArea="Stacked Area"]="StackedArea";n[n.PercentStackedColumn="100% Stacked Column"]="PercentStackedColumn";n[n.PercentStackedBar="100% Stacked Bar"]="PercentStackedBar";n[n.PercentStackedArea="100% Stacked Area"]="PercentStackedArea";n[n.Pie="Pie"]="Pie";n[n.Doughnut="Doughnut"]="Doughnut";n[n.Pyramid="Pyramid"]="Pyramid";n[n.Funnel="Funnel"]="Funnel"}(ChartTypes||(ChartTypes={})),function(n){n[n.Trim="trim"]="Trim";n[n.Hide="hide"]="Hide"}(LabelOverFlowMode||(LabelOverFlowMode={})),function(n){n[n.Value="Value"]="Value";n[n.Percentage="Percentage"]="Percentage";n[n.ValueAndPercentage="Value And Percentage"]="ValueAndPercentage"}(DataLabel||(DataLabel={})),function(n){n.Individual="Individual";n.Group="Group"}(CustomLegendType||(CustomLegendType={}));ImageProperties=function(n){function t(){var t=n.call(this)||this;return t.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.ImageProperties",t.UrlLink=new UrlLink,t.EnableImageExport=!0,t.EnablePdfExport=!0,t.IgnoreFilterActions=!0,t.BindFromDatasource=!0,t.Stretch=ImageMode.Default,t.ImageSource=ImgSource.Local,t.DataSource=DataSource.BinaryData,t.URLPattern="{0}",t.ImageUrl=null,t.ImagePath=null,t.IsURL=!1,t.IsImageExist=!1,t.BindDataIsChecked=!1,t.ImageName=null,t.IsInPackage=!1,t.Name="",t.UniqueName="",t.imageSrc=null,t}return __extends(t,n),t}(WidgetProperties),function(n){n[n.Default="Default"]="Default";n[n.Fill="Fill"]="Fill";n[n.Uniform="Uniform"]="Uniform";n[n.UniformToFill="Uniform To Fill"]="UniformToFill"}(ImageMode||(ImageMode={})),function(n){n[n.BinaryData="Binary Data"]="BinaryData";n[n.URI="URI"]="URI"}(DataSource||(DataSource={})),function(n){n[n.Local="Local"]="Local";n[n.URL="URL"]="URL";n[n.ParameterizedURL="Parameterized URL"]="ParameterizedURL"}(ImgSource||(ImgSource={}));LinkProperties=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.Common.LinkProperties";this.Linking=new LinkSetting}return n}();LinkSetting=function(){function n(){this.__type="Syncfusion.Dashboard.Web.Serialization.Model.DOM.LinkSetting"}return n}(),function(n){n[n.Filter=0]="Filter";n[n.NonFilter=1]="NonFilter"}(WidgetType||(WidgetType={}));InternalXMLDataSource=function(){function n(){this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.dashboardDesigner._id}return Object.defineProperty(n,"XMLDataSource",{get:function(){return(this.xmldataSource===null||this.xmldataSource===undefined)&&(this.xmldataSource=new ej.DashboardDesignerUtility.XMLDataSource),this.xmldataSource},enumerable:!0,configurable:!0}),n.prototype.renderConfiguration=function(n){n.find("#"+this.id+"_xml_datasource").length>0?this.resetConfiguration():(this.xmlConfig=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_xml_datasource"}),n.append(this.xmlConfig),this.renderXmlPanel());this.showConfiguration(!0)},n.prototype.renderXmlPanel=function(){this.xmlPanel=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_xml_Panel"});var n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+"_xml_config"});this.xmlConfig.append(this.xmlPanel);this.xmlPanel.append(n);this.datasource.renderTextArea("Connection String",this.id+"_xml_conStr",n);this.conncString=$("#"+this.id+"_xml_conStr")},n.prototype.editConfiguration=function(n){this.renderConfiguration(this.datasource.configTable);this.conncString.val(n.ConnectionProperties.ConnectString)},n.prototype.showConfiguration=function(n){this.xmlConfig.css("display",n?"table-row":"none");this.xmlConfig.children().show()},n.prototype.resetConfiguration=function(){this.conncString.val("")},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.ConnectionProperties.ConnectString=t.ConnectionString;n.ConnectionProperties.IsDesignState=t.IsDesignState;n.ConnectionProperties.IntegratedSecurity=t.IsIntegrated;n.ConnectionProperties.UserName="";n.ConnectionProperties.PassWord="";n.ConnectionProperties.Prompt="";n.SecurityType=t.SecurityType},n.prototype.getDatasourceInfo=function(n){return{Name:n,Provider:"XML",IsIntegrated:!1,SecurityType:"None",Username:"",Password:"",ConnectionString:this.conncString.val()}},n}();window.ej.createObject("ej.DashboardDesignerUtility.XMLDataSource",InternalXMLDataSource,window);InternalEditColumnNames=function(){function n(){this.columnNameInfo=null;this.editColumnNamesDialog=null;this.individualContainer=null;this.individualScrollElement=null;this.targetInstance=null;this.targetMethod=null;this.footerTag=null;this.settingsContainer=null;this.lastModifiedTextInfo=null;this.id=ejDashboardDesigner.getInstance("DashboardDesigner")._id;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.renderEditColumnNamesWindow()}return Object.defineProperty(n,"EditColumnNames",{get:function(){return(this.editColumnNames===null||this.editColumnNames===undefined)&&(this.editColumnNames=new ej.DashboardDesignerUtility.EditColumnNames),this.editColumnNames},enumerable:!0,configurable:!0}),n.prototype.renderEditColumnNamesWindow=function(){var n=this.editColumnNamesDialog=ej.buildTag("div.e-userselect","",{},{id:this.id+"_editColumnNames_settings"}),f=this.settingsContainer=ej.buildTag("div","",{}),e=ej.buildTag("div","",{display:"block"},{id:this.id+"_editColumnNames_settings_edit"}),o=ej.buildTag("div","",{height:"283px",width:"418px"},{}),i,r,u;e.append(o);var t=this.individualContainer=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{height:"282px",display:"block"},{id:this.id+"_editColumnNames_settings_individual_container"}),s=ej.buildTag("div","",{}),h=this.individualScrollElement=ej.buildTag("div","",{height:"272px","padding-top":"5px","padding-bottom":"5px"},{id:this.id+"_editColumnNames_settings_individual_elements"});s.append(h);t.append(s);o.append(t);i=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_editColumnNames_settings_cancel"});r=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_editColumnNames_settings_ok"});f.append(e);n.append(f);$(document.body).append(n);n.ejDialog({title:this.dashboardDesigner.locale.editColumnNames.editTableColumnNames,width:"auto",height:"auto",minWidth:420,minHeight:320,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.footerTag=$("#"+this.id+"_editColumnNames_settings_foot");this.footerTag.append(i).append(r);u=this.dashboardDesigner.locale.dialogOptions;r.ejButton({text:u.okButtonText,showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.updateColumnInfo,this)});i.ejButton({text:u.cancelButtonText,showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.closeEditColumnNamesSettings,this)});t.ejScroller({height:"282px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.renderColumns=function(n){for(var t=0;t<this.columnNameInfo.length;t++)this.renderRowElement(n,this.columnNameInfo[t],t)},n.prototype.scrollerRefresh=function(n){n.data("ejScroller")&&n.data("ejScroller").refresh()},n.prototype.renderRowElement=function(n,t,i){var u=ej.buildTag("div","",{"margin-top":"10px",display:"inline-block",width:"388px",padding:"0px 10px"},{id:this.id+"_EditcolumnNames"+i}),e=ej.buildTag("div","",{width:"194px",float:"left","margin-left":"3px","margin-top":"8.5px"}),o=ej.buildTag("div.e-designer-fontfamily","",{"font-size":"12px",overflow:"hidden","margin-right":"11px","white-space":"nowrap","text-overflow":"ellipsis"}),f,r;o.text(t.CaptionName);e.append(o);u.append(e);f=ej.buildTag("div","",{display:"inline-block","margin-top":"3px",border:"0px solid","border-color":"red","margin-left":"5px"},{id:this.id+"_EditcolumnNamesValue"+i+"_parent"});r=ej.buildTag("input.e-textbox e-designer-content-label","",{width:"170px",height:"25px"},{id:this.id+"_EditcolumnNamesValue"+i,type:"text"});r.val(t.DisplayName);f.append(r);r.off("blur",$.proxy(this.textFocusOut,this,i));r.off("keyup",$.proxy(this.textKeyUp,this,i));r.on("blur",$.proxy(this.textFocusOut,this,i));r.on("keyup",$.proxy(this.textKeyUp,this,i));u.append(f);n.append(u)},n.prototype.textFocusOut=function(n){var t=this.settingsContainer.find("#"+this.id+"_EditcolumnNamesValue"+n).val();this.lastModifiedTextInfo=null;this.onValueChange(n,t)},n.prototype.onValueChange=function(n,t){this.columnNameInfo[n].DisplayName!==t&&t.length>0&&(this.columnNameInfo[n].IsEdited=!0);t.length>0?this.columnNameInfo[n].DisplayName=t:(this.columnNameInfo[n].DisplayName=this.columnNameInfo[n].DisplayName,this.settingsContainer.find("#"+this.id+"_EditcolumnNamesValue"+n).val(this.columnNameInfo[n].CaptionName))},n.prototype.textKeyUp=function(n,t){var i=this.settingsContainer.find("#"+this.id+"_EditcolumnNamesValue"+n).val();if(t.keyCode===13)this.onValueChange(n,i);else this.lastModifiedTextInfo={rowIndex:n,value:i}},n.prototype.populateColumnName=function(){this.renderColumns(this.individualScrollElement);this.scrollerRefresh(this.individualContainer)},n.prototype.updateColumnInfo=function(){if(!ej.isNullOrUndefined(this.targetInstance)){if(!ej.isNullOrUndefined(this.lastModifiedTextInfo)){this.onValueChange(this.lastModifiedTextInfo.rowIndex,this.lastModifiedTextInfo.value);this.lastModifiedTextInfo=null}ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.columnNameInfo]);this.editColumnNamesDialog.data("ejDialog").close()}},n.prototype.closeEditColumnNamesSettings=function(){this.editColumnNamesDialog.data("ejDialog").close()},n.prototype.openColumnNameSettings=function(n,t,i){this.editColumnNamesDialog.data("ejDialog").open();this.resetLengendSettings();this.targetInstance=n;this.targetMethod=t;this.columnNameInfo=JSON.parse(JSON.stringify(i));this.populateColumnName(this.columnNameInfo)},n.prototype.resetLengendSettings=function(){this.targetInstance=null;this.targetMethod=null;this.columnNameInfo=null;this.individualScrollElement.empty()},n}();window.ej.createObject("ej.DashboardDesignerUtility.EditColumnNames",InternalEditColumnNames,window);__extends=this&&this.__extends||function(){var n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,t){n.__proto__=t}||function(n,t){for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i])};return function(t,i){function r(){this.constructor=t}n(t,i);t.prototype=i===null?Object.create(i):(r.prototype=i.prototype,new r)}}(),function(n){n[n.Text="Text"]="Text";n[n.Procedure="Procedure"]="Procedure"}(CommandMode||(CommandMode={}));ejQueryDesigner=function(n){function t(t,i){var r=n.call(this)||this;return(r.rootCss="e-querydesigner",r.setFirst=!1,r.pluginName="ejQueryDesigner",r._id=$(r.element).attr("id"),r.model=null,r.defaults={serviceUrl:null,serviceAuthorizationToken:"",toolbarSettings:{items:511,showToolbar:!0},id:null,dataSources:[],parameters:[],dataSet:null,selectDataSource:null,validateNames:[],locale:"en-US"},r.waterMarkText="Search",r.procedureObj={},r.commandMode=CommandMode.Text,r.schemaIcons=null,r.isKeyDown=!1,r.selectedItems={},r.tableItems={},r.dragging=null,r.dragX=0,r.dragY=0,r.queryParameters=[],r.isHeight=!1,r.isWidth=!1,r.isPercentWidth=-1,r.isPercentHeight=-1,r.resizeTO=null,r.previewTO=null,r.editColVal=null,r.renameColVal=null,r.referenceParam=[],r.codeEditor=null,r.typeCast={},r.dashboardDesigner=null,r.storedParameter=null,r.fileSchema=null,r.isTreeMouseDown=!1,r.datasourceInfo=null,r.sharedDataMapping=null,r.credentials=null,r.dbSchema=null,r.sharedDbSchema=null,r.queryJoiner=[],r.queryFilter=[],r.queryExp=[],r.isEdit=!1,r.isEditMode=!1,r.isInitialFilterApplied=!1,r.queryInputVals=[],r.isNewTableAdded=!1,r.addedTableNames=[],r.isJoin=!1,r.columnList=[],r.tableList=[],r.editDataSource=!1,r.dragSurfaceTag=null,r.tableContainer=null,r.isEditconnection=!1,r.designToolbar=null,r.queryEditorTag=null,r.previewHeader=null,r.schemaHeader=null,r.noRecordSpan=null,r.schemaDiv=null,r.previewGrid=null,r.designSwitcher=null,r.codeChkSwitcher=null,r.schemaSearch=null,r.dropdwnData=null,r.btnSaveTag=null,r.schemaTree=null,r.bodySchemaTag=null,r.sharedSchemaTag=null,r.isCodeView=!1,r.defaultQuery=null,r.btnEditConnection=null,r.ajaxPostCollection=[],r.btnContinueToDashboardTag=null,r.ejPreviewGrid=null,r.ejSchemaTree=null,r.ejSharedSchemaTree=null,r.ejSchemaScroller=null,r.ejQueryTool=null,r.ejSurfaceSplitter=null,r.ejPreviewSplitter=null,r.ejDrpdwnData=null,r.sharedTableScroller=null,r.sharedTableSplitter=null,r.collapseIcon=null,r.shareTableSearch=null,r.schemaAreaPaneSize=null,r.isContinueToDashboardbtn=null,t&&(t.jquery||(t=$("#"+t)),t.length))?$(t).ejQueryDesigner(i).data(r.pluginName):r}return __extends(t,n),t.prototype._destroy=function(){ej.destroyWidgets(this.element);this.unWiredEvents()},t.prototype._setModel=function(n){for(var t in n)switch(t){}},t.prototype._init=function(){this.id=this._id;var n=ej.DashboardUtil.getInstance();this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.storedParameter=ej.DashboardUtil.getQueryInstance("StoreParameter");this.model.id?this.id=this.model.id:(this._on($(document),"click",this.designerClick),this._on($(window),"resize",this.designerResize));ej.isNullOrUndefined(n)&&(n=new ej.DashboardUtil(this,this.model.itemId));this.browserInfo=ej.browserInfo();this.updateElementSize();this.initializeControl();this.initializeDesigner();this.updateToolbar();this.loadControl()},t.prototype.initializeControl=function(){this.queryJoiner=[];this.queryFilter=[];this.queryExp=[];this.procedureObj={};this.sqlEditor=ej.DashboardUtil.getQueryInstance("SqlEditor");this.credentialWin=ej.DashboardDesignerUtility.CredentialDialog.CredentialDialog;this.schemaIcons={schema:"e-designer-content-icon e-reportdesigner-dataset-folder",tables:"e-designer-content-icon e-reportdesigner-dataset-schema-column",views:"e-designer-content-icon e-reportdesigner-dataset-schema-column",procedures:"e-designer-content-icon e-reportdesigner-dataset-schema-column",table:"e-designer-content-icon e-reportdesigner-dataset-schema",view:"e-designer-content-icon e-reportdesigner-dataset-schema",procedure:"e-designer-content-icon e-reportdesigner-dataset-schema"};this.typeCast={integer:"Number",date:"DateTime",text:"Text",dNumber:"Default(Integer)",dText:"Default(String)",dDate:"Default(DateTime)",dBool:"Default(Boolean)"}},t.prototype.loadControl=function(){this.model.dataSources&&this.model.dataSources.length>0&&(this.model.selectDataSource?this.datasourceSelection(this.model.selectDataSource):this.model.dataSet?(this.isEdit=!0,this.editDataSetItem(this.model.dataSet.Id)):this.newQueryDesigner())},t.prototype.initializeDesigner=function(){this.renderDesignerArea(this.element);this.unWiredEvents();this.wiredEvents()},t.prototype.isRendered=function(){return $("#"+this.id+"_div_designerTool").length>0},t.prototype.renderDesignerArea=function(n){var a=this.designToolbar=ej.buildTag("div.e-userselect e-querydesigner-toolbarcontainer","",{width:this.element.width(),height:"35px"},{id:this.id+"_div_designerTool"}),s=ej.buildTag("div.e-userselect","",{display:"block",width:"100%",height:this.element.height()-this.designToolbar.height()+"px"},{id:this.id+"_div_designerArea"}),t=ej.buildTag("div.e-designer-surface","",{display:"block",width:"100%",height:"100%"},{id:this.id+"_div_target_designArea"}),v=ej.buildTag("div.e-designer-table-schemaarea","",{display:"block",width:"232px",height:"100%",float:"left","box-sizing":"border-box","border-top":"0px none"},{id:this.id+"_table_schemaArea"}),i=ej.buildTag("div","",{display:"block","border-right-width":"0px",width:"100%",height:"100%",float:"left","box-sizing":"border-box"},{id:this.id+"_div_draggableArea"}),f=ej.buildTag("div","",{display:"block","border-style":"none !important",overflow:"hidden",width:"100%",height:"100%"},{id:this.id+"_div_queryDesigner"}),h=this.dragSurfaceTag=ej.buildTag("div.e-drag-surface e-designer-hint-newtable","",{display:"block",overflow:"auto",position:"relative",width:"100%",height:"100%","background-color":"#ececec"},{id:this.id+"_div_dragSurface"}),y=this.queryEditorTag=ej.buildTag("div.e-query-editor","",{display:"none",overflow:"auto",width:"100%",height:"100%"},{id:this.id+"_div_queryEditor"}),r=ej.buildTag("div","",{display:"block",overflow:"hidden",width:"100%",height:"100%"},{id:this.id+"_div_previewArea"}),u=this.previewHeader=ej.buildTag("div","",{"border-bottom":"1px Solid #c8c8c8",height:"32px",display:"table","box-sizing":"border-box",width:this.element.width()-$("#"+this.id+"_table_schemaArea").width()-6,"background-color":"#f4f4f4"},{id:this.id+"_div_previewHeader"}),p=ej.buildTag("div","",{width:"100%",display:"table-cell","vertical-align":"middle"},{}),w=ej.buildTag("div","",{width:"auto",display:"table-cell","vertical-align":"middle"},{}),e=ej.buildTag("div","",{color:"white"},{id:this.id+"_div_previewData"}),c=this.noRecordSpan=ej.buildTag("div.e-reportdesigner-dataset-noRecordMsg","",{"vertical-align":"middle","text-align":"center",display:"none",width:this.element.width()-$("#"+this.id+"_table_schemaArea").width()-6},{id:this.id+"_div_no_records"}),k=ej.buildTag("span.e-reportdesigner-dataset-noRecordMsg","No records to display",{},{id:this.id+"_span_no_records"}),o=this.previewGrid=ej.buildTag("div.e-reportdesigner-preview-grid e-dbrd-control","",{border:"none"},{id:this.id+"_div_previewGrid"}),d=ej.buildTag("span.e-reportdesigner-dataset-dataHeader","Data Preview",{},{}),b=ej.buildTag("div","",{display:this.browserInfo.name==="mozilla"?"-moz-inline-box":"block"},{id:this.id+"_div_part_record"}),g=ej.buildTag("span.e-reportdesigner-dataset-dataContent","",{"white-space":"nowrap","margin-right":"5px","vertical-align":"middle"},{id:this.id+"_record_count"}),l;b.append(g);w.append(b);u.append(p);u.append(w);p.append(d);f.append(y);f.append(h);r.append(u);c.append(k);e.append(c);e.append(o);r.append(e);i.append(f);i.append(r);t.append(v);t.append(i);s.append(t);n.append(a);n.append(s);this.renderToolbarItem(a);this.renderSchemaArea(v);i.ejSplitter({orientation:ej.Orientation.Vertical,properties:[{paneSize:"70%",collapsible:!1,expandable:!1},{paneSize:"200px",minSize:"200px",collapsible:!1}],enableAutoResize:!0,resize:$.proxy(this.splitterResize,this)});t.ejSplitter({orientation:ej.Orientation.Horizontal,height:"100%",width:"100%",cssClass:"e-designer-h-splitter",properties:[{paneSize:"280px",collapsible:!1,minSize:"280px",expandable:!1},{paneSize:"70%",collapsible:!1}],enableAutoResize:!0,resize:$.proxy(this.horizontalResize,this)});e.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});o.ejGrid({allowScrolling:!0,allowResizing:!0,columns:[{field:"Preview",headerText:"Preview",width:80}]});s.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});f.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});this.renderContextMenu(h);this.ejPreviewGrid=o.data("ejGrid");o.hide();this.ejSurfaceSplitter=t.data("ejSplitter");this.ejPreviewSplitter=i.data("ejSplitter");this.renderTooltip();this.renderQueryEditor(y);l=this.getSurfaceAreaWidth();u.width(l);c.css({height:r.height()-this.previewHeader.height(),width:u.width});this.ejPreviewGrid.option("scrollSettings",{width:l+"px",height:r.height()-this.previewHeader.height()+40+"px",allowVirtualScrolling:!1,virtualScrollMode:"normal",scrollerSize:10,autoHide:!0});h.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-designer-loader"})},t.prototype.renderQueryEditor=function(n){window.CodeMirror?(this.codeEditor=window.CodeMirror(n[0],{mode:"text/x-sql",indentWithTabs:!0,smartIndent:!0,lineNumbers:!0,matchBrackets:!0,autofocus:!0,extraKeys:{"Ctrl-Space":"autocomplete"},hintOptions:{}}),this.codeEditor.setSize("100%","100%"),this.codeEditor.refresh()):this.sqlEditor.renderQueryEditor(n)},t.prototype.renderToolbarItem=function(n){var r=ej.buildTag("ul.e-reportdesigner-toolbarul","",{padding:"5px 12px"}),i,t,u,f,e;n.append(r);this.renderDataSourceSelection(r);r.css("height",this.calculateToolbarItemHeight(r));i=ej.buildTag("ul.e-reportdesigner-toolbarul","",{padding:"5px 12px"});n.append(i);this.renderDataSetName(i);i.css("height",this.calculateToolbarItemHeight(i));t=ej.buildTag("ul.e-reportdesigner-toolbarul","",{});n.append(t);this.appendToolbarItems(t,this.id+"_dataset_tool_run","Run","e-reportdesigner-dataset-preview e-reportdesigner-toolbar-run e-dbrd-hand-cursor","24px");t=ej.buildTag("ul.e-reportdesigner-toolbarul","",{});this.appendToolbarItems(t,this.id+"_dataset_tool_join","Join","e-reportdesigner-dataset-join e-reportdesigner-toolbar-join e-dbrd-hand-cursor","22px");this.appendToolbarItems(t,this.id+"_dataset_tool_exp","Expression","e-reportdesigner-expression e-reportdesigner-toolbar-exp e-dbrd-hand-cursor","25px");this.appendToolbarItems(t,this.id+"_dataset_tool_filter","Filter","e-reportdesigner-dataset-filter e-reportdesigner-query-filter e-dbrd-hand-cursor","16px");n.append(t);u=ej.buildTag("ul","",{padding:"3.5px 3px","border-right":"0px none"});n.append(u);this.renderCodeSwitcher(u);f=ej.buildTag("ul.e-reportdesigner-toolbarul","",{float:"right",padding:"3.5px 3px","border-right":"1px solid #c8c8c8"});n.append(f);e=ej.buildTag("ul.e-reportdesigner-toolbarul","",{});n.append(e);this.renderEditConnectionBtn(e);this.renderActionBtn(f);this.triggerEvents("toolbarRendering",{target:this.designToolbar});n.ejToolbar({isResponsive:!0,enableSeparator:!0,height:n.height(),cssClass:"e-designer-toolbar",width:n.width(),click:$.proxy(this.toolbarClick,this)});this.ejQueryTool=n.data("ejToolbar")},t.prototype.calculateToolbarItemHeight=function(n){return this.designToolbar.height()-(parseInt(n.css("padding-top"),10)+parseInt(n.css("padding-bottom"),10))},t.prototype.appendToolbarItems=function(n,t,i,r,u){var f=ej.buildTag("li.e-reportdesigner-toolbarli e-designer-toolbar-align","",{},{id:t}),e=ej.buildTag("span.e-reportdesigner-toolbarIconBasic e-toolbarfonticonbasic "+r,"",{"font-size":u},{});f.append(e);n.append(f);f.ejTooltip({content:i,cssClass:"e-defaultIndex-template",isBalloon:!1})},t.prototype.renderDataSourceSelection=function(n){var r=$("<td style='padding-left:12px;'><\/td>"),t=this.dropdwnData=ej.buildTag("input.e-textbox","",{"margin-top":"1px","padding-left":"5px","line-height":"normal"},{type:"text",id:this.id+"_drd_datasource"});r.append(t);var u=ej.buildTag("table.e-querydesigner-toolbar-table","",{"margin-top":"1px"},{unselectable:"on",id:this.id+"_table_select_data"}),i=$("<tr><\/tr>"),f=ej.buildTag("td","",{"padding-left":"10px"},{}),e=ej.buildTag("label.e-designer-label","DataSource ",{},{});f.append(e);i.append(f);i.append(r);u.append(i);n.append(u);t.ejDropDownList({watermarkText:"Select a DataSource",width:"190px",height:"22px",fields:{id:"Id",text:"Name",value:"Id"},change:$.proxy(this.datasourceChange,this),cssClass:"e-reportdesigner-dataset-selection e-designer-ejwidgets"});$("#"+this.id+"_drd_datasource_"+this.id).css({"border-radius":"2px"});this.ejDrpdwnData=t.data("ejDropDownList")},t.prototype.renderDataSetName=function(n){var u=ej.buildTag("table.e-querydesigner-toolbar-table","",{"margin-top":"1px"},{unselectable:"on",id:this.id+"_table_edit_dataset"}),t=$("<tr><\/tr>"),f=ej.buildTag("td","",{},{}),e=ej.buildTag("label.e-designer-label","Name",{},{}),i,r;f.append(e);t.append(f);i=$("<td style='padding-left:12px;'><\/td>");r=ej.buildTag("input.e-textbox e-querydesigner-dataset-text","",{width:"160px",height:"18px","border-radius":"2px","line-height":"normal"},{edittype:"stringedit",value:"DataSet2",id:this.id+"_dataset_txt"});i.append(r);r.bind("focusout",$.proxy(this.datasetChange,this));t.append(i);u.append(t);n.append(u)},t.prototype.datasetChange=function(){var n=$("#"+this.id+"_dataset_txt");this.validateDataSetName()&&(this.dataSetName=n.val(),ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.editDataSetName,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.editDataSetName,dataSetName:this.dataSetName,dataSetId:this.dataset.Id})},{}))},t.prototype.renderCodeSwitcher=function(n){var t=this.designSwitcher=ej.buildTag("div","",{display:"block",float:"right",padding:"4px 0","margin-left":"6px"},{id:this.id+"_design_switcher"}),r=ej.buildTag("span.e-designer-label","Code",{display:"inline-block",float:"left","line-height":"1.7","margin-right":"7px","margin-left":"4px",cursor:"default"}),i=ej.buildTag("label.e-reportdesigner-switch","",{display:"inline-block",float:"left"},{id:this.id+"_code_switcher"});this.codeChkSwitcher=$("<input type='checkbox' id="+this.id+"_chck_on>");i.append(this.codeChkSwitcher);i.append("<div style='cursor:pointer;' class='e-reportdesigner-slider round'/>");t.append(r);t.append(i);n.append(t);this.codeChkSwitcher.prop("checked",!1);this.codeChkSwitcher.unbind("change",$.proxy(this.switcherChanged,this));this.codeChkSwitcher.bind("change",$.proxy(this.switcherChanged,this))},t.prototype.renderEditConnectionBtn=function(n){var i=ej.buildTag("div","",{margin:"1px 5px",display:"inline-block","margin-top":"2px",padding:"2.5px 3px"},{id:this.id+"_div_dataset_editconnection"}),t=this.btnEditConnection=ej.buildTag("button.e-dashboarddesigner-ds-editconnectionbtn e-dbrd-hand-cursor","",{},{id:this.id+"_editConnectionButton"}),r=ej.buildTag("span.e-btntxt","Edit Connection");t.append(r);i.append(t);n.append(i);t.ejButton({width:"150px",showRoundedCorner:!1,size:"medium",contentType:ej.ContentType.TextOnly,height:"24px",click:$.proxy(this.renderEditConnectionWindow,this)})},t.prototype.renderActionBtn=function(n){var u=ej.buildTag("div","",{margin:"1px 5px",float:"right",display:"inline-block","margin-top":"2px"},{id:this.id+"_div_dataset_save"}),t,i,r;this.btnSaveTag=ej.buildTag("button.e-reportdesigner-dataset-okbtn e-dbrd-hand-cursor",ej.isNullOrUndefined(this.model.serviceAuthorizationToken)||this.model.serviceAuthorizationToken===""?"Finish":this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource?"Save and Exit":"Save",{},{id:this.id+"_saveButton"});u.append(this.btnSaveTag);t=ej.buildTag("div","",{margin:"1px 5px",display:"inline-block","margin-top":"2px"},{id:this.id+"_div_design_view"});this.btnContinueToDashboardTag=ej.buildTag("button.e-reportdesigner-dataset-okbtn e-dbrd-hand-cursor","Continue to Dashboard",{display:"none"},{id:this.id+"_continue_dashboard_button",title:"Continue to Dashboard"});t.append(this.btnContinueToDashboardTag);i=ej.buildTag("div","",{margin:"1px 5px",display:"inline-block","margin-top":"2px",float:"right"},{id:this.id+"_div_dataset_close"});r=ej.buildTag("button.e-reportdesigner-dataset-cancelbtn e-dbrd-hand-cursor","Cancel",{},{id:this.id+"_cancelButton",title:"Cancel"});i.append(r);n.append(i);n.append(u);n.append(t);r.ejButton({width:"70px",showRoundedCorner:!1,size:"mini",contentType:ej.ContentType.TextOnly,height:"24px",click:$.proxy(this.cancelDataSource,this)});this.btnContinueToDashboardTag.ejButton({width:"auto",showRoundedCorner:!1,size:"mini",contentType:ej.ContentType.TextOnly,height:"24px",click:$.proxy(this.continueToDashboard,this)});this.btnSaveTag.ejButton({width:this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource?"auto":"70px",showRoundedCorner:!1,size:"mini",contentType:ej.ContentType.TextOnly,height:"24px",click:$.proxy(this.saveQueryDataSet,this)});this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource&&this.btnContinueToDashboardTag.css("display","block")},t.prototype.renderSchemaArea=function(n){var s=this.element.height()-this.designToolbar.height(),t=ej.buildTag("div.e-designer-schemaarea","",{width:"100%",height:"100%",overflow:"hidden"},{id:this.id+"_schemaArea"}),i;this.schemaDiv=ej.buildTag("div","",{display:"inline-block",width:"100%",height:"100%","background-color":"#f9f9f9"},{id:this.id+"_div_schemaArea"});this.schemaHeader=ej.buildTag("div.e-designer-schemaHeader","",{display:"none",width:"94%",border:"1px solid #c8c8c8",margin:"8px 6px","border-radius":"4px","background-color":"rgb(236, 236, 236)"},{id:this.id+"_div_headSchema"});this.schemaHeader.append(this.getsearchbox());this.schemaSearch=this.schemaHeader.find(".e-shared-tables-searchbox");this.bodySchemaTag=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{display:"block","background-color":"white",width:"100%"},{id:this.id+"_div_bodySchema"});i=ej.buildTag("div","",{},{});this.sharedSchemaTag=ej.buildTag("div.e-reportdesigner-scroller e-dbrd-control e-sharedtable-schema",this.getSharedSchemaTemplate(),{},{id:this.id+"_div_shared_schema"});var u=ej.buildTag("div.e-tree-area","",{},{}),f=ej.buildTag("div","",{display:"none",width:"100%",height:"100%"},{id:this.id+"_schema_empty_msg"}),h=ej.buildTag("div.e-designer-empty-msg","No matches found",{display:"table-cell"}),e=ej.buildTag("div","",{display:"none",width:"100%",height:"100%"},{id:this.id+"_sharedtable_schema_empty_msg"}),c=ej.buildTag("div.e-designer-sharedtabled-empty-msg","No matches found",{display:"table-cell"}),r=this.schemaTree=ej.buildTag("ul.e-dataset-treeview","",{"margin-left":"6px",overflow:"hidden",display:"table","margin-top":"5px"},{id:this.id+"_ul_treeSchema"}),o=ej.buildTag("div.e-schemaareawrap","",{},{id:this.id+"_div_schemaarea_wrap"});f.append(h);u.append(r);i.append(u,f);this.bodySchemaTag.append(i);this.renderSharedTableIcon();o.append(this.schemaHeader,this.bodySchemaTag,this.collapseIcon);e.append(c);this.sharedSchemaTag.append(e);this.schemaDiv.append(o);t.append(this.schemaDiv);n.append(t);t.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});r.ejTreeView({fullRowSelect:!1,loadOnDemand:!0,template:this.getTreeViewTemplate(),nodeExpand:$.proxy(this.nodeExpand,this,this.bodySchemaTag),fields:{id:"id",parentId:"pid",text:"displayName",htmlAttribute:"nodeProperty",hasChild:"hasChild",expanded:"expanded"},beforeExpand:$.proxy(this.beforeExpand,this,!1),nodeCollapse:$.proxy(this.scrollerRefresh,this,this.bodySchemaTag),beforeDelete:function(n){n.event&&n.event.type==="keydown"&&(n.cancel=!0)}});this.ejSchemaScroller=this.bodySchemaTag.ejScroller({scrollerSize:9,enableTouchScroll:!1,autoHide:!0,height:s-(2+this.schemaHeader.height()+20+2*(parseFloat(this.schemaHeader.css("margin-top"))+1)+this.collapseIcon.outerHeight(!0))+"px",width:this.schemaDiv.width(),buttonSize:14}).data("ejScroller");this.sharedTableScroller=this.sharedSchemaTag.find(".e-shared-tables-content").ejScroller({buttonSize:0,scrollerSize:9,enableTouchScroll:!0,height:"0px",width:this.schemaDiv.width()-5}).data("ejScroller");this.sharedSchemaTag.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-designer-loader"});this.ejSchemaTree=r.data("ejTreeView");this.sharedSchemaTag.find(".e-shared-tables-action-items .e-shared-tables-action-info").ejTooltip({content:this.dashboardDesigner.locale.queryDesigner.sharedTable.info,isBalloon:!0,collision:ej.Tooltip.Collision.FlipFit,trigger:ej.Tooltip.Trigger.Click,showRoundedCorner:!0,showShadow:!0});this.ejSharedSchemaTree=this.sharedSchemaTag.find("#"+this.id+"_shared_tables_tree").ejTreeView({fullRowSelect:!1,loadOnDemand:!0,template:this.getSharedTableTreeViewTemplate(),nodeExpand:$.proxy(this.nodeExpand,this,this.sharedSchemaTag.find(".e-shared-tables-content")),fields:{id:"id",parentId:"pid",text:"displayName",htmlAttribute:"nodeProperty",hasChild:"hasChild"},nodeCollapse:$.proxy(this.scrollerRefresh,this,this.sharedSchemaTag.find(".e-shared-tables-content")),beforeExpand:$.proxy(this.beforeExpand,this,!0),beforeDelete:function(n){n.event&&n.event.type==="keydown"&&(n.cancel=!0)}}).data("ejTreeView");this.sharedTableSplitter=this.schemaDiv.ejSplitter({orientation:ej.Orientation.Vertical,properties:[{paneSize:"calc(100% - 40px)",minSize:"180px",expandable:!1,collapsible:!0},{paneSize:"40px",minSize:"40",collapsible:!1}],enableAutoResize:!0,resize:$.proxy(this.sharedTableSplitterResize,this)}).data("ejSplitter")},t.prototype.beforeExpand=function(n,t){var f,i,r,u;if(!t.isChildLoaded){if(f=t.id,i=null,t.model.fields.dataSource.length>0)for(r=0;r<t.model.fields.dataSource.length;r++)t.model.fields.dataSource[r].id===f&&(i=t.model.fields.dataSource[r]);ej.isNullOrUndefined(i.value)||(u=i.value.tableName.length>0,ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.GetChildList,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.GetChildList,dataSetName:this.dataset.Name,dataSetId:this.dataset.Id,tableName:i.value.tableName,schemaName:i.value.schema,viewType:i.value.viewType,rootName:t.id,isColumn:u})},{fnction:$.proxy(this.getColumnDetails,this,t.id,n,u),indicator:[$.proxy(function(){setTimeout(function(){t.currentElement.find("a:first").siblings("div").addClass("e-icon e-load")},100)},this),$.proxy(function(){t.currentElement.find("a:first").siblings("div").removeClass("e-load")},this)]}))}},t.prototype.renderSharedTableIcon=function(){this.collapseIcon=ej.buildTag("div.e-sharedtable-collapseiconwrap","",{},{id:this.id+"div_sharedTableCollapseIcon_wrap"});var n=ej.buildTag("div.e-sharedtable-collapseicon","",{},{id:this.id+"div_sharedTableCollapseIcon"}),t=ej.buildTag("div.e-sharedtable-collapseiconspan1","",{},{id:this.id+"div_sharedTableCollapseIconspan1"}),i=ej.buildTag("div.e-sharedtable-collapseiconspan2","",{},{id:this.id+"div_sharedTableCollapseIconspan2"});n.append(t,i);this.collapseIcon.append(n)},t.prototype.sharedTableSplitterResize=function(n){ej.isNullOrUndefined(n.nextPane.size)||ej.isNullOrUndefined(this.sharedTableScroller)||(this.schemaAreaPaneSize=null,this.ejSchemaScroller.model.height=this.getSchemaAreaHeight(n.nextPane.size),this.sharedSchemaTag.find(".e-shared-tables-content-wrap").css("display","block"),n.nextPane.size>40?(this.sharedTableScroller.model.height=this.getSharedSchemaTreeHeight(n.nextPane.size),this.sharedTableScroller.refresh(),this.ejSchemaScroller.refresh(),this.toggleSharedTable("expand")):this.sharedTableClose())},t.prototype.getSharedSchemaTreeHeight=function(n){return n-(this.sharedSchemaTag.find(".e-shared-tables-header-items").outerHeight(!0)+this.sharedSchemaTag.find(".e-shared-tables-header").outerHeight(!0))-30},t.prototype.getSchemaAreaHeight=function(n){var t=this.element.height()-this.designToolbar.height(),i=this.schemaHeader.css("display")==="block"?this.schemaHeader.outerHeight(!0):0;return t-i-this.collapseIcon.outerHeight(!0)-n},t.prototype.getSharedSchemaTemplate=function(){return"<div class='e-shared-tables-header'><span class='e-shared-tables-title'>"+this.dashboardDesigner.locale.queryDesigner.sharedTable.header+"<\/span><\/div><div class='e-shared-tables-content-wrap'>"+this.renderShareTableSearchboxAndActionitems()+"<div class='e-shared-tables-content'><div><ul id='"+this.id+"_shared_tables_tree' class='e-sharedtable-list'><\/ul><div class='e-shared-tables-error-msg' id='"+this.id+"_shared_table_error'><\/div><\/div><\/div>"},t.prototype.getsearchbox=function(){return"<div class='e-shared-tables-searchbox-wrap'><input class ='e-shared-tables-searchbox' placeholder='"+this.dashboardDesigner.locale.sharedDSMenu.searchBoxText+"'><span class ='e-shared-ds-searchbox-btn e-shared-tables-searchbtn'><\/div>"},t.prototype.renderShareTableSearchboxAndActionitems=function(){return"<div class= 'e-shared-tables-header-items'><span class='e-shared-tables-action-items'><span class='e-shared-tables-action-info'> <\/span><span class='e-shared-tables-action-reload'><\/span><\/span><\/div>"},t.prototype.getTreeViewTemplate=function(){return"<div style='margin-top:0.5px'>{{if value}}<span class='e-widgeticons e-reportdesigner-double-drag' style='font-size:12.5px;margin-right:2px'/>{{/if}}<span class='{{:spriteImage}}'/><span>{{:displayName}}<\/span><\/div>"},t.prototype.getSharedTableTreeViewTemplate=function(){return"<div>{{if value}}<span class='e-widgeticons e-reportdesigner-double-drag' style='font-size:12.5px;margin-right:2px'/>{{/if}}<span class='{{:spriteImage}}'/><span title={{:displayName}} class='e-sharedtable-displaytext'>{{:displayName}}<\/span><span class='{{:icon}}'/><\/div>"},t.prototype.nodeExpand=function(n,t){if(t.value==="Tables"||t.value==="Views"||t.value==="Procedures"){var i=$(t.currentElement).find(".ej-table-drag>div:not('.e-drop')");if(i.length>0){i.addClass("e-drop");i.on(ej.DashboardUtil.MouseEvent.mouseDown,$.proxy(this.treeMouseDown,this));i.on(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.treeMouseUp,this));i.on(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.dragStart,this))}}n&&this.scrollerRefresh(n)},t.prototype.resetDrag=function(){this.dragging!==null&&(this.dragging.remove(),this.dragging=null)},t.prototype.treeMouseDown=function(){this.isTreeMouseDown=!0;this.resetDrag()},t.prototype.treeMouseUp=function(){this.isTreeMouseDown=!1;this.resetDrag()},t.prototype.renderContextMenu=function(n){var i=this.dashboardDesigner.locale.queryDesigner,u=ej.buildTag("ul.e-designer-menu e-aggr-menu","",{},{id:this.id+"_ds_tableMenu"}),t,f,r;u.append("<li class='e-separator'><a>"+i.rename+"<\/a><\/li>");t=$("<ul/>");t.append(this.getMenuItem("GroupBy",this.id+"_field_GroupBy",!0));t.append(this.getMenuItem("Sum",this.id+"_field_Sum",!1));t.append(this.getMenuItem("Avg",this.id+"_field_Avg",!1));t.append(this.getMenuItem("Min",this.id+"_field_Min",!1));t.append(this.getMenuItem("Max",this.id+"_field_Max",!1));t.append(this.getMenuItem("Count",this.id+"_field_Count",!0));t.append(this.getMenuItem("StDev",this.id+"_field_StDev",!1));t.append(this.getMenuItem("StDevP",this.id+"_field_StDevP",!1));t.append(this.getMenuItem("Var",this.id+"_field_Var",!1));t.append(this.getMenuItem("VarP",this.id+"_field_VarP",!1));t.append(this.getMenuItem("SumDistinct",this.id+"_field_SumDistinct",!1));t.append(this.getMenuItem("AvgDistinct",this.id+"_field_AvgDistinct",!1));t.append(this.getMenuItem("MinDistinct",this.id+"_field_MinDistinct",!1));t.append(this.getMenuItem("MaxDistinct",this.id+"_field_MaxDistinct",!1));t.append(this.getMenuItem("CountDistinct",this.id+"_field_CountDistinct",!0));f=$("<li><a>"+i.changeColumnType+"<\/a><li>");r=$("<ul class='e-typecastUl'/>");r.append(this.getColumnItem("Date",i.columnType.dateField,this.id+"_DateTime","e-datetime"));r.append(this.getColumnItem("Integer",i.columnType.numberField,this.id+"_Number","e-integer"));r.append(this.getColumnItem("String",i.columnType.stringField,this.id+"_Text","e-text"));r.append(this.getColumnItem("Default",i.columnType.defaultField,this.id+"_Default","e-default"));f.append(r);u.append(f);n.append(u);u.ejMenu({menuType:ej.MenuType.ContextMenu,openOnClick:!1,ontextMenuTarget:"#"+n.attr("id"),width:184,click:$.proxy(this.settingMenuClick,this)})},t.prototype.showTooltip=function(n){var t=$("#"+this.id+"_drd_datasource_wrapper");$("#"+this.id+"_designer_tooltip").css({display:n?"block":"none",top:t.offset().top+t.height()+10,left:t.offset().left})},t.prototype.renderTooltip=function(){var n=ej.buildTag("div.e-designer-top-tip e-tooltip-wrap e-widget e-designer-tooltip","",{display:"none"},{id:this.id+"_designer_tooltip"}),t=ej.buildTag("div.e-arrowTip","",{}),r=ej.buildTag("div.e-arrowTipOuter","",{}),u=ej.buildTag("div.e-arrowTipInner","",{}),i=ej.buildTag("div.e-tipContainer"),f=ej.buildTag("div","Select a DataSource to Configure Report DataSet",{},{});t.append(r).append(u);i.append(f);n.append(i);n.append(t);$(document.body).append(n)},t.prototype.renderSchemaTree=function(n){var t=n;this.showTreeContainer(t&&t.length>0);this.ejSchemaTree.option("fields.dataSource",t);this.bodySchemaTag.find(".e-tree-area").is(":visible")&&this.scrollerRefresh(this.bodySchemaTag)},t.prototype.renderSharedSchemaTree=function(n){var t=this.getSharedTreeDataSource(n);this.showSharedTreeContainer(t&&t.length>0);this.ejSharedSchemaTree.option("fields.dataSource",t);this.sharedSchemaTag.find(".e-shared-tables-content").is(":visible")&&this.scrollerRefresh(this.sharedSchemaTag.find(".e-shared-tables-content"))},t.prototype.getColumnDetails=function(n,t,i,r){var u=[],f=JSON.parse(r.treeData),e=JSON.parse(r.tableData);u=f;i&&(this.columnList.push(e),this.tableList.push(r.tableName));t?this.ejSharedSchemaTree.addNodes(u,ej.DashboardUtil.escapeSelector(n)):t||(u.length>0?this.ejSchemaTree.addNodes(u,ej.DashboardUtil.escapeSelector(n)):this.schemaTree.find("#"+n+" div.e-icon:first").removeClass("e-icon"))},t.prototype.isExtractModeDataSource=function(){return this.datasourceInfo.ConnectionProperties.DataProvider==="File"||this.datasourceInfo.ConnectionProperties.DataProvider==="WEB"||this.datasourceInfo.ConnectionProperties.DataProvider==="Salesforce"||this.datasourceInfo.ConnectionProperties.DataProvider==="MongoDB"},t.prototype.isSqlExtractMode=function(){return this.datasourceInfo.ConnectionProperties.DataProvider==="SQL"&&!ej.isNullOrUndefined(this.datasourceInfo.SQLExtractionParams)&&!ej.isNullOrUndefined(this.datasourceInfo.SQLExtractionParams.ExtractionModeDetails)&&this.datasourceInfo.SQLExtractionParams.ExtractionModeDetails.Mode==="Extract"||this.datasourceInfo.Mode==="Extract"},t.prototype.searchSharedtableData=function(n){for(var i=this.ejSharedSchemaTree.getVisibleNodes(),r=!1,t=0;t<i.length;t++)i[t].children[0].innerText.includes(n)&&(this.ejSharedSchemaTree.expandNode(i[t].id),r=!0);this.showSharedTreeContainer(r);this.sharedSchemaTag.find(".e-shared-tables-content").is(":visible")&&this.scrollerRefresh(this.sharedSchemaTag.find(".e-shared-tables-content"))},t.prototype.searchData=function(n){for(var i=this.ejSchemaTree.getVisibleNodes(),r=!1,t=0;t<i.length;t++)i[t].children[0].innerText.includes(n)&&(this.ejSchemaTree.expandNode(i[t].id),r=!0);this.showTreeContainer(r);this.bodySchemaTag.find(".e-tree-area").is(":visible")&&this.scrollerRefresh(this.bodySchemaTag)},t.prototype.onSearchClick=function(n){if(n.keyCode!==13){var t=this.schemaSearch.val();t.length>0?(this.schemaSearch.siblings(".e-shared-ds-searchbox-btn").addClass("e-shared-tables-closebtn").removeClass("e-shared-tables-searchbtn"),this.searchData(t)):(this.schemaSearch.siblings(".e-shared-ds-searchbox-btn").removeClass("e-shared-tables-closebtn").addClass("e-shared-tables-searchbtn"),this.renderSchemaTree(this.dbSchema));this.isKeyDown=!0}},t.prototype.onCloseClick=function(){this.schemaSearch.val("");this.schemaSearch.siblings(".e-shared-ds-searchbox-btn").removeClass("e-shared-tables-closebtn").addClass("e-shared-tables-searchbtn");this.renderSchemaTree(this.dbSchema)},t.prototype.onSharedTableSearchClick=function(){var n=this.sharedSchemaTag.find(".e-shared-tables-searchbox");n.val().trim().length>0&&n.val().trim()!==this.dashboardDesigner.locale.sharedDSMenu.searchBoxText?(n.siblings(".e-shared-ds-searchbox-btn").removeClass("e-shared-tables-searchbtn").addClass("e-shared-tables-closebtn"),this.searchSharedtableData(n.val())):(n.siblings(".e-shared-ds-searchbox-btn").addClass("e-shared-tables-searchbtn").removeClass("e-shared-tables-closebtn"),this.renderSharedSchemaTree(this.sharedDbSchema))},t.prototype.onSharedTableCloseClick=function(){var n=this.sharedSchemaTag.find(".e-shared-tables-searchbox");n.val("");n.siblings(".e-shared-ds-searchbox-btn").addClass("e-shared-tables-searchbtn").removeClass("e-shared-tables-closebtn");this.renderSharedSchemaTree(this.sharedDbSchema)},t.prototype.onSharedTableSplitterMouseOver=function(){this.collapseIcon.find(".e-sharedtable-collapseicon").css("display","block");this.dashboardDesigner.element.find(".e-designer-table-schemaarea .e-split-divider.e-v-bar").css("border","1px solid #1E90FF")},t.prototype.onSharedTableSplitterMouseLeave=function(){this.dashboardDesigner.element.find(".e-designer-table-schemaarea .e-split-divider.e-v-bar").css("border","1px solid #cecece");this.collapseIcon.removeClass("e-sharetables-hideicon").removeClass("e-sharetables-visibleicon");this.collapseIcon.find(".e-sharedtable-collapseicon").css("display","none")},t.prototype.onSharedTableCollapseIconMouseOver=function(){this.sharedSchemaTag.find(".e-shared-tables-content").height()<=0?this.collapseIcon.removeClass("e-sharetables-hideicon").addClass("e-sharetables-visibleicon"):this.collapseIcon.removeClass("e-sharetables-visibleicon").addClass("e-sharetables-hideicon")},t.prototype.onSharedTableCollapseIconMouseLeave=function(){this.collapseIcon.removeClass("e-sharetables-hideicon").removeClass("e-sharetables-visibleicon")},t.prototype.collapseIconClick=function(n){this.sharedSchemaTag.find(".e-shared-tables-content").height()<=0?this.sharedTableOpen():this.sharedTableClose();this.onSharedTableCollapseIconMouseOver(n)},t.prototype.sharedTableOpen=function(){this.sharedSchemaTag.find(".e-shared-tables-content-wrap").css("display","block");this.setSchemaPaneHeight(!0);this.toggleSharedTable("expand")},t.prototype.sharedTableClose=function(){this.sharedSchemaTag.ejWaitingPopup("instance").hide();this.sharedSchemaTag.find(".e-shared-tables-content-wrap").css("display","none");this.setSchemaPaneHeight(!1);this.toggleSharedTable("collapse")},t.prototype.getSharedTableContentHeight=function(n){var i=this.element.height()-this.designToolbar.height(),t=0;return n&&(t=i/2-this.sharedSchemaTag.find(".e-shared-tables-header").outerHeight(!0)-this.sharedSchemaTag.find(".e-shared-tables-header-items").outerHeight(!0)-30),t},t.prototype.getSchemaTreeBodyHeight=function(n){var t=this.element.height()-this.designToolbar.height(),i=this.schemaHeader.css("display")==="block"?this.schemaHeader.outerHeight(!0):0;return this.isExtractModeDataSource()||this.isSqlExtractMode()?n?t/2-(i+this.collapseIcon.outerHeight(!0)):t-i-this.collapseIcon.outerHeight(!0)-this.sharedSchemaTag.find(".e-shared-tables-header").outerHeight(!0):t-i-2},t.prototype.setSchemaPaneHeight=function(n){var t=this.element.height()-this.designToolbar.height(),i;this.isExtractModeDataSource()||this.isSqlExtractMode()?n?this.sharedTableSplitter.model.properties[0].paneSize=this.sharedTableSplitter.model.properties[1].paneSize=t/2:(i=t-(this.schemaHeader.outerHeight(!0)+this.collapseIcon.outerHeight(!0)+this.sharedSchemaTag.find(".e-shared-tables-header").outerHeight(!0)),this.sharedTableSplitter.model.properties[0].paneSize=this.schemaHeader.outerHeight(!0)+this.collapseIcon.outerHeight(!0)+i,this.sharedTableSplitter.model.properties[1].paneSize=t-this.sharedTableSplitter.model.properties[0].paneSize):this.sharedTableSplitter.model.properties=[{paneSize:"calc(100% - 2px)",minSize:"180px",expandable:!1,collapsible:!0},{paneSize:"2px",collapsible:!1}];this.schemaAreaPaneSize={firstPaneSize:this.sharedTableSplitter.model.properties[0].paneSize,secondPaneSize:this.sharedTableSplitter.model.properties[1].paneSize}},t.prototype.showTreeContainer=function(n){n?(this.element.find("#"+this.id+"_schema_empty_msg").css("display","none"),this.bodySchemaTag.find(".e-tree-area").css("display","block")):(this.element.find("#"+this.id+"_schema_empty_msg").css("display","table"),this.bodySchemaTag.find(".e-tree-area").css("display","none"))},t.prototype.showSharedTreeContainer=function(n){n?(this.element.find("#"+this.id+"_sharedtable_schema_empty_msg").css("display","none"),this.sharedSchemaTag.find(".e-shared-tables-content").css("display","block")):(this.element.find("#"+this.id+"_sharedtable_schema_empty_msg").css("display","table"),this.sharedSchemaTag.find(".e-shared-tables-content").css("display","none"))},t.prototype.droptable=function(n,t){var u;this.tableContainer=null;var i=ej.buildTag("div.e-lv subpage e-"+n.viewType+" e-data-table "+ej.DashboardUtil.escapeSelector("e-"+n.schema+"-"+n.name)+" e-tableName","",{top:t.top,left:t.left,width:"220px",position:"absolute"},{}),r=ej.buildTag("div.e-header e-box e-querydesigner-table-boxshadow","",{display:"block",height:"30px",background:"white","border-width":"0px"},{}),f=ej.buildTag("div.e-designer-table-close","",{float:"right"},{title:"Close"}),h=ej.buildTag("span.e-icon e-close_01","",{cursor:"pointer"},{}),c=ej.buildTag("span.e-designer-fontfamily e-tableSpan"+(ej.DashboardUtil.textWidth(n.name,"segoe ui 600 13px")>(n.viewType==="Stored Procedures"?133:163)?" e-title-tip":""),n.displayName,{float:"left","font-weight":"600","font-size":"13px",padding:"5px 0px 5px 10px",overflow:"hidden","vertical-align":"middle",width:n.viewType==="Stored Procedures"?"130px":"150px","text-overflow":"ellipsis","white-space":"nowrap"});r.append(c);f.append(h);r.append(f);var e=ej.buildTag("div.e-lv e-js e-parentlv e-dbrd-designer-scroller e-dbrd-control","",{display:"block",width:"100%"},{id:this.id+"_table_"+ej.DashboardUtil.escapeSelector(n.name)+"_column_container"}),o=ej.buildTag("div","",{},{}),s=ej.buildTag("div.e-list-container e-js e-widget","",{"border-top-width":"0px",padding:"5px"},{id:this.id+"_table_"+n.name}),l=ej.buildTag("div","",{height:"1px",border:"0px Solid","border-top-width":"0.5px","border-color":"#bdc3c2",margin:"0px 6px"},{}),a=ej.buildTag("ul.e-list-hdr e-clearall","",{width:"auto",height:"auto"});s.append(a);i.append(r);i.append(l);o.append(s);e.append(o);i.append(e);i.data("e-table",n);n.viewType==="Stored Procedures"?(u=ej.buildTag("span.e-icon e-settings","",{padding:"6px 0px 6px 0px","margin-top":"2px","vertical-align":"middle",float:"right"}),r.append(u),u.bind("click",$.proxy(this.procSetting,this))):this.dragSurfaceTag.append(i);this.tableContainer=i},t.prototype.renderTable=function(n,t,i,r,u){var w=0,y=null,e=null,h=null,c,p,b,f,l,d,s,g,k,nt,a,v,tt,it;if(this.columnList.length>0)for(f=0;f<this.columnList.length;f++)if(this.tableList[f]===n.id){y=this.columnList[f];break}if(n.viewType!=="Stored Procedures"&&ej.isNullOrUndefined(y))return!1;if(c=this.dragSurfaceTag.find("div.e-lv.subpage"),c.length>0)for(f=0;f<c.length;f++)$(c[f]).hasClass(ej.DashboardUtil.escapeSelector("e-"+n.schema+"-"+n.name))&&(e=$(c[f]),h=e.find(".e-list-hdr.e-clearall"));else h=this.tableContainer.find(".e-list-hdr.e-clearall");if(n.viewType==="Stored Procedures"){for($("#"+this.id+"_div_dragSurface .e-Stored.Procedures").length===0&&(this.dragSurfaceTag.append(this.tableContainer),e=this.tableContainer),p=i.length>9?103:113,w=i.length,h.find("li").length!==0&&h.empty(),f=0;f<i.length;f++)b=this.getColumnTag(i[f],p),b.attr("datatype",i[f].DataType),h.append(b);this.commandMode=CommandMode.Procedure}else{var rt=Object.keys(y).shift(),o=y[rt],p=o.length>9?103:113;for(f=0;f<o.length;f++)l=void 0,w=o.length,r&&u&&u[o[f].Name]?l=this.getColumnTag(o[f],p,null,u[o[f].Name]):(d=this.isExistColName(o[f].Name),l=this.getColumnTag(o[f],p,d?n.displayName:null)),l.attr("datatype",o[f].DataType),h.append(l);this.commandMode=CommandMode.Text}return s=e.find("li"),$(s[0]).addClass("e-table-user-selection-active"),$(s[0]).find("span").addClass("e-table-user-selection-active"),$(s[0]).find(".e-reportdesigner-dataset-column-deselect").length===0?$(s[0]).find(".e-settings").css("display","inline-block"):$(s[0]).find(".e-settings").css("display","none"),e.find("li .e-designer-select").bind("click",$.proxy(this.onColumnClick,this)),g=e.find(".e-designer-table-close"),g.bind("click",$.proxy(this.tableClose,this)),e.find(".e-header.e-box.e-querydesigner-table-boxshadow").bind(ej.DashboardUtil.MouseEvent.mouseDown,$.proxy(this.dragSurfaceStart,this)),s.bind(ej.isTouchDevice()?"doubletap":"dblclick",$.proxy(this.editColumnName,this)),s.bind(ej.DashboardUtil.MouseEvent.mouseOver,$.proxy(this.enableTableSettings,this)),s.bind(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.disableTableSettings,this)),e.find("li .e-edit-column").bind("blur",$.proxy(this.editColumnBlur,this)),e.find("li .e-edit-column").bind("keypress",$.proxy(this.editColumnKeyPress,this)),this.nodeTableSelector(n),this.updateToolbarItems(),this.showTableHint(!0),n.viewType==="Stored Procedures"&&(r=!0),r||this.joinQueryTable(e),k=e.find(".e-lv.e-js.e-parentlv.e-dbrd-designer-scroller.e-dbrd-control"),k.ejScroller({scrollerSize:9,enableTouchScroll:!0,autoHide:!0,height:w>9?"280px":"auto",buttonSize:14}),nt=e.find(".e-list-container.e-js.e-widget"),k.bind("keydown",$.proxy(this.listKeyDown,this,nt)),a=$("#"+this.id+"_div_queryDesigner"),v={right:t.left+e.width(),bottom:t.top+e.height()},v.right>a.width()+this.dragSurfaceTag.scrollLeft()&&(tt=v.right-(a.width()+this.dragSurfaceTag.scrollLeft()),this.dragSurfaceTag.scrollLeft(this.dragSurfaceTag.scrollLeft()+tt)),v.bottom>a.height()+this.dragSurfaceTag.scrollTop()&&(it=v.bottom-(a.height()+this.dragSurfaceTag.scrollTop()),this.dragSurfaceTag.scrollTop(this.dragSurfaceTag.scrollTop()+it)),!0},t.prototype.getColumnList=function(n){var i=null,t;if(this.columnList.length>0)for(t=0;t<this.columnList.length;t++)if(this.tableList[t]===n.id){i=this.columnList[t];break}return i},t.prototype.showDragSurfaceLoader=function(){this.dragSurfaceTag.ejWaitingPopup("instance").show()},t.prototype.hideDragSurfaceLoader=function(){this.dragSurfaceTag.ejWaitingPopup("instance").hide()},t.prototype.getColumnToRenderTable=function(n,t,i,r,u){this.tableList.indexOf(n.id)===-1?ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.GetChildList,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.GetChildList,dataSetName:this.dataset.Name,dataSetId:this.dataset.Id,tableName:n.name,categoryName:"Columns",schemaName:n.schema,viewType:n.viewType,tableId:n.id})},{fnction:$.proxy(this.columnData,this,n,t,i,r,u),indicator:[$.proxy(this.showDragSurfaceLoader,this),$.proxy(this.hideDragSurfaceLoader,this)]}):this.columnData(n,t,i,r,u,null,!0)},t.prototype.columnData=function(n,t,i,r,u,f,e){var h,o,s;(ej.isNullOrUndefined(e)||e===!1)&&(this.columnList.push(JSON.parse(f.tableData)),this.tableList.push(f.tableName));h=ej.isNullOrUndefined(u)?null:u.Query.QueryDesignerState;ej.isNullOrUndefined(h)||(ej.isNullOrUndefined(h.Tables)||this.columnList.length!==h.Tables.length)&&!h.StoredProcedure?r||(n.viewType==="Stored Procedures"?(o=ej.DashboardUtil.getQueryInstance("StoreParameter"),this.procedureObj={tableData:n,xy:t},o.renderProcParameters(n)?(this.showLoadMoreOpt(!1),s=null,ej.isNullOrUndefined(i)||(s=i.Parameters),s&&s.length>0?(o.updatedParameters=$.extend([],!0,s),o.setParameter(s),this.loadProcedureSchema(i)):(o.updatedParameters=[],o.showParameterDialog())):this.loadProcedureSchema(i),this.executeUIQuery()):this.renderTable(n,t,null,!1,null)):this.populateDesignerState(u)},t.prototype.getTblSel=function(n,t){return".e-"+ej.DashboardUtil.escapeSelector(n+"-"+t)},t.prototype.getColumnTag=function(n,t,i,r){var u=n.Name,f=ej.DashboardUtil.escapeSelector(n.Name),e=!1,h,o="e-reportdesigner-dataset-column-select";i?(u=n.Name+" ("+i+")",e=!0):r&&(r.IsDuplicate===!0||typeof r.IsDuplicate=="string"&&r.IsDuplicate.toLowerCase()==="true")?(u=n.Name+" ("+r.AliasName+")",e=!0):r&&r.AliasName&&(u=r.AliasName);r&&(r.IsSelected===!1||typeof r.IsSelected=="string"&&r.IsSelected.toLowerCase()==="false")&&(o="e-reportdesigner-dataset-column-deselect");h=r&&r.TypeCast?ej.DashboardUtil.getDataTypeStyle(n,r.TypeCast):ej.DashboardUtil.getDataTypeStyle(n);var s=ej.buildTag("li.e-user-select e-list e-list-check e-reportdesigner-dataset-column","",{padding:"0 8px"},{id:this.id+"_li_"+f,name:n.Name,aliasName:ej.DashboardUtil.escapeSelector(u)}),c=ej.buildTag("a.e-chevron-right_01 e-remove-shadow","",{padding:"3.5px 0"}),a=ej.buildTag("span.e-list-text e-rel e-user-select e-designer-fontfamily"+(ej.DashboardUtil.textWidth(u,"12px segoe ui")>=t?" e-title-tip":""),u,{width:t,"text-overflow":"ellipsis",overflow:"hidden",display:"inline-block","margin-top":"3px","white-space":"nowrap","font-size":"12px","margin-left":"1px"},{name:n.Name,id:this.id+"_txtSpan_"+f,isDuplicate:e?"true":"false",title:u,aliasName:ej.DashboardUtil.escapeSelector(u)}),v=ej.buildTag("input.e-textbox e-edit-column e-designer-fontfamily","",{width:t-18,height:"16px","line-height":"normal","margin-top":"1px",display:"none","border-radius":"2px","font-size":"12px"},{liTag:this.id+"_txtSpan_"+f,type:"text",id:this.id+"_txtEdit_"+f}),l=ej.buildTag("span.e-designer-content-icon e-reportdesigner-selection e-settings e-designer-click","",{display:"none","margin-top":"3.5px",width:"20px",float:"right","margin-right":"-3px"},{id:this.id+"_edit_"+f,"e-target":"e-aggr-menu",title:"Options"}),y=ej.buildTag("span.e-query-selection "+o+" e-designer-select","",{display:"block",float:"left",padding:"2px"},{id:this.id+"_"+f,name:n.Name,aliasName:ej.DashboardUtil.escapeSelector(u),title:o==="e-reportdesigner-dataset-column-select"?"Show":"Hide"}),p=ej.buildTag("span.e-query-datatype "+h,"",{display:"block",float:"left",padding:"0px 10px 1px 7px","margin-top":"1px"},{id:this.id+"_type_"+f});return c.append(y).append(p).append(a).append(v).append(l),l.bind("click",$.proxy(this.showSettingsMenu,this)),s.bind(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.onListItemMouseUp,this)),s.append(c),s},t.prototype.renderProcedure=function(n,t){var i,r,u;if(t&&t.table&&t.type){i=JSON.parse(t.table);this.tableType=JSON.parse(t.type);var o=JSON.parse(t.spType),f=[],e=this.previewHeader.width(),s=150*this.tableType.length>e?150:(e-20)/this.tableType.length;for(r=0;r<this.tableType.length;r++)f.push({field:this.tableType[r].ID,headerText:this.tableType[r].Name,width:s});this.showNoRecord(!1);this.ejPreviewGrid.setModel({dataSource:i,columns:f});this.ejPreviewGrid.getScrollObject().setModel({scrollLeft:0,scrollTop:0});this.ejPreviewGrid.element.find(".e-table").css("width","100%");$("#"+this.id+"_record_count").text(i.length+" Record"+(i.length>1?"s":"")+" Retrieved");this.showLoadMoreOpt(i.length===100);this.renderTable(this.procedureObj.tableData,this.procedureObj.xy,o);ej.isNullOrUndefined(n)||(u=this.dragSurfaceTag.find(this.getTblSel(n.Schema,n.Name)),this.setColumnType(n.Columns,u),this.setIconType(n.Columns,u))}else t&&t.indexOf("Sf_Exception")!==-1&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.errorMessage.failedToRetrieveDataSetTable,IconType.errors,AlertType.Alert,!0,t,{height:200})},t.prototype.renderTableElement=function(n,t,i,r){this.droptable(n,t);r||this.dragging.remove();this.getColumnToRenderTable(n,t,i,!1,null)},t.prototype.encrptDataSourceInfo=function(n){var t=$.extend(!0,{},n);return t.ConnectionProperties&&(t.ConnectionProperties.ConnectString=ej.DashboardUtil.encryptData(t.ConnectionProperties.ConnectString),t.ConnectionProperties.UserName&&(t.ConnectionProperties.UserName=ej.DashboardUtil.encryptData(t.ConnectionProperties.UserName)),t.ConnectionProperties.PassWord&&(t.ConnectionProperties.PassWord=ej.DashboardUtil.encryptData(t.ConnectionProperties.PassWord))),t},t.prototype.loadProcedureSchema=function(n){var t=this.procedureObj.tableData,i=this.dataset.Name,r=t.name,u=t.schema,f=t.id;this.isEditMode?(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.editDataSet,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.editDataSet,dataSetName:i,dataSetId:this.dataset.Id})},{fnction:$.proxy(this.renderProcedure,this,n),indicator:[$.proxy(this.showDragIndicator,this),$.proxy(this.hideDragIndicator,this)]}),this.isEditMode=!1):(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.addNewTable,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.addNewTable,datasource:this.encrptDataSourceInfo(this.datasourceInfo),sqlQuery:t.schema+"."+t.name,commandType:"Procedure",parameters:this.getProcParams(),tableName:r,tableSchema:u,dataSetId:this.dataset.Id,dataSetName:i,joinInfo:[],tableId:f,addProcedure:!0,category:t.viewType})},{fnction:$.proxy(this.renderProcedure,this,n),indicator:[$.proxy(this.showDragIndicator,this),$.proxy(this.hideDragIndicator,this)]}),this.isNewTableAdded=!1,this.isJoin=!1)},t.prototype.procSetting=function(){var n=ej.DashboardUtil.getQueryInstance("StoreParameter");n.showParameterDialog()},t.prototype.nodeTableSelector=function(n){var f=ej.DashboardUtil.escapeSelector(n.schema),u=ej.DashboardUtil.escapeSelector(n.name),e=$("#"+this.id+"_"+f+"_"+u+" .e-text .e-reportdesigner-dataset-schema, #"+this.id+"_"+u+" .e-text .e-reportdesigner-dataset-schema"),i,r,t;if(e.length>0)e.removeClass(this.schemaIcons.table).removeClass(this.schemaIcons.view).removeClass(this.schemaIcons.procedure),e.addClass("e-icon e-checkmark");else{if(i=this.ejSchemaTree.model.fields.dataSource,r=this.ejSharedSchemaTree.model.fields.dataSource,i&&i.length>0)for(t=0;t<i.length;t++)if(this.id+"_"+f+"_"+u===i[t].id){i[t].spriteImage="e-designer-query-treeview e-icon e-checkmark";break}if(r&&r.length>0)for(t=0;t<r.length;t++)if(this.id+"_"+f+"_"+u===r[t].id){r[t].spriteImage="e-designer-query-treeview e-icon e-checkmark";break}}this.selectedItems[n.schema]||(this.selectedItems[n.schema]={});this.selectedItems[n.schema][n.name]=!0;this.tableItems[n.id]=!0},t.prototype.nodeTableRemover=function(n){var t,i;if(n){this.removedTableName=n.name;this.removedTableSchemaName=ej.DashboardUtil.escapeSelector(n.schema);var u=ej.DashboardUtil.escapeSelector(n.schema),f=ej.DashboardUtil.escapeSelector(n.name),e=n.viewType==="Procedures"?this.schemaIcons.procedure:this.schemaIcons.table,r=$("#"+this.id+"_"+u+"_"+f+" .e-text .e-checkmark");if(r.length>0)r.removeClass("e-icon").removeClass("e-checkmark"),r.addClass(e);else if(t=this.ejSchemaTree.model.fields.dataSource,t&&t.length>0)for(i=0;i<t.length;i++)if(this.id+"_"+u+"_"+f===t[i].id){t[i].spriteImage="e-designer-query-treeview "+e;break}this.selectedItems[n.schema][n.name]=!1;this.tableItems[n.id]=!1}},t.prototype.removeExpression=function(n,t){var f,r,i,u;if(this.queryExp&&this.queryExp.length>0){for(f=this.dragSurfaceTag.find(this.getTblSel(t,n)),r=[],i=0;i<this.queryExp.length;i++)this.isExistExpField(f,this.queryExp[i].expression)&&(r.indexOf(this.queryExp[i].name)===-1&&r.push(this.queryExp[i].name),this.gethierarchyExpField(this.queryExp[i].name,r));if(r&&r.length>0)for(i=0;i<r.length;i++)for(u=0;u<this.queryExp.length;u++)if(r[i]===this.queryExp[u].name){this.queryExp.splice(u,1);break}}},t.prototype.gethierarchyExpField=function(n,t){for(var i=0;i<this.queryExp.length;i++)ej.DashboardUtil.contains(this.queryExp[i].expression,"["+n+"]",!0)&&(t.indexOf(this.queryExp[i].name)===-1&&t.push(this.queryExp[i].name),this.gethierarchyExpField(this.queryExp[i].name,t))},t.prototype.validateColumn=function(n,t){for(var i=0;i<n.dataFields.length;i++)if(n.dataFields[i].value===t)return!0;return!1},t.prototype.validateTopNFilterInfo=function(n){var t=!1,i=ej.DashboardUtil.getQueryInstance("QueryFilter");return this.queryFilter[n].DimensionFilterSchemaInfo.IsTopNApplied&&(t=this.validateColumn(i,this.queryFilter[n].DimensionFilterSchemaInfo.TopNFilterConditionInfo.ColumnId)),this.queryFilter[n].DateFilterSchemaInfo.IsTopNApplied&&(t=this.validateColumn(i,this.queryFilter[n].DateFilterSchemaInfo.TopNFilterConditionInfo.ColumnId)),this.queryFilter[n].BooleanFilterSchemaInfo.IsTopNApplied&&(t=this.validateColumn(i,this.queryFilter[n].BooleanFilterSchemaInfo.TopNFilterConditionInfo.ColumnId)),t},t.prototype.updateTopNFilterInfo=function(n){var i=ej.DashboardUtil.getQueryInstance("QueryFilter"),t;this.queryFilter.length>0&&this.queryFilter[n].DimensionFilterSchemaInfo.IsTopNApplied&&(t=this.validateColumn(i,this.queryFilter[n].DimensionFilterSchemaInfo.TopNFilterConditionInfo.ColumnId),t&&(this.queryFilter[n].DimensionFilterSchemaInfo.IsCheckAll?this.queryFilter.splice(n,1):(this.queryFilter[n].DimensionFilterSchemaInfo.IsTopNApplied=!1,this.queryFilter[n].DimensionFilterSchemaInfo.TopNFilterConditionInfo=null)));this.queryFilter.length>0&&this.queryFilter[n].DateFilterSchemaInfo.IsTopNApplied&&(t=this.validateColumn(i,this.queryFilter[n].DateFilterSchemaInfo.TopNFilterConditionInfo.ColumnId),t&&(this.queryFilter[n].DateFilterSchemaInfo.IsCheckAll?this.queryFilter.splice(n,1):(this.queryFilter[n].DateFilterSchemaInfo.IsTopNApplied=!1,this.queryFilter[n].DateFilterSchemaInfo.TopNFilterConditionInfo=null)));this.queryFilter.length>0&&this.queryFilter[n].BooleanFilterSchemaInfo.IsTopNApplied&&(t=this.validateColumn(i,this.queryFilter[n].BooleanFilterSchemaInfo.TopNFilterConditionInfo.ColumnId),t&&(this.queryFilter[n].BooleanFilterSchemaInfo.IsCheckAll?this.queryFilter.splice(n,1):(this.queryFilter[n].BooleanFilterSchemaInfo.IsTopNApplied=!1,this.queryFilter[n].BooleanFilterSchemaInfo.TopNFilterConditionInfo=null)))},t.prototype.removeFilter=function(n){if(!ej.isNullOrUndefined(this.queryFilter)&&this.queryFilter.length>0)for(var t=this.queryFilter.length-1;t>=0;t--)this.queryFilter[t].TableId===n?this.queryFilter.splice(t,1):this.updateTopNFilterInfo(t)},t.prototype.tableClose=function(n){var r,u;if(!$(n.target).hasClass("e-close-disable")){var t=$(n.currentTarget).closest(".e-data-table"),f=this.hasQueryFilterTable(t.data("e-table").name),e=this.hasExpressionTable(t.data("e-table").name),i=this.deleteQueryTable(t);if(i.tables.length>0){for(r="",r=this.dashboardDesigner.locale.alertWindowMesages.tableList,u=0;u<i.tables.length;u++)r+="<br />&emsp;&emsp;&emsp;-"+i.tables[u].name;ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.RemoveTable+"(s)",this.dashboardDesigner.locale.alertWindowMesages.tableremove,IconType.warning,AlertType.Confirm,!0,r,{method:"confirmAction",instance:this,dataInfo:{nonReltable:i,removeTable:t}});return}f||e||this.updateQueryJoiner(t);(f||e)&&i.tables.length===0?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.RemoveTable,this.dashboardDesigner.locale.alertWindowMesages.tableRemoveMessage,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:t,instance:this,method:"enableTableRemove"}):this.removeTable(t)}},t.prototype.confirmAction=function(n,t){var i,r,f,u;if(n){for(i=t.nonReltable,this.queryJoiner=[],$.merge(this.queryJoiner,i.tableJoins),r=0;r<i.tables.length;r++)f=i.tables[r].id,u=i.tables[r].name,this.removeFilter(f),this.removeExpression(u,i.tables[r].schema),this.dragSurfaceTag.find(this.getTblSel(i.tables[r].schema,u)).remove(),this.nodeTableRemover(i.tables[r]);this.removeTable(t.removeTable)}},t.prototype.enableTableRemove=function(n,t){n&&(this.updateQueryJoiner(t),this.removeTable(t))},t.prototype.removeTable=function(n){if(this.nodeTableRemover(n.data("e-table")),this.removeFilter(n.data("e-table").id),this.removeExpression(n.data("e-table").name,n.data("e-table").schema),this.dragSurfaceTag.find(".e-Stored.Procedures").length>0&&!ej.isNullOrUndefined(this.storedParameter)&&(this.storedParameter.updatedParameters=[]),n.remove(),this.postRemovedTable(),this.updateToolbarItems(),this.showTableHint(this.dragSurfaceTag.find(".e-data-table").length),this.dragSurfaceTag.find(".e-data-table").length===0&&this.removeNonColumnExpression(),this.columnList.length>0)for(var t=0;t<this.columnList.length;t++)if(this.tableList[t]===this.removedTableName){this.columnList.splice(t,1);this.tableList.splice(t,1);break}},t.prototype.removeNonColumnExpression=function(){this.queryExp.length>0&&(this.queryExp=[])},t.prototype.updateQueryJoiner=function(n){var t=this.deleteQueryTable(n);this.dragSurfaceTag.find(".e-data-table").not(n).length===1?this.queryJoiner=[]:t.tableJoins.length>0&&(this.queryJoiner=[],$.merge(this.queryJoiner,t.tableJoins))},t.prototype.deleteTableNodes=function(n,t){for(var u,r=[],i=0;i<n.length;i++){if(i===0&&(n[i].leftTable===t||n[i].rightTable===t))return u=null,n[i].rightTable===t&&(u=n[i].leftTable),{relJoiner:r,remainingTable:u};if(n[i].rightTable===t)return{relJoiner:r,remainingTable:null};r.push(n[i])}return{relJoiner:r,remainingTable:null}},t.prototype.deleteTable=function(n){var t=this,i=this.dragSurfaceTag.find(".e-data-table");n.length===0&&(i=i.not(":first"));i.each(function(i,r){for(var u=$(r).data("e-table"),e=!1,f=0;f<n.length;f++)if(n[f].leftTable===u.id||n[f].rightTable===u.id){e=!0;break}e||(t.removeFilter(u.id),t.removeExpression(u.name,u.schema),t.dragSurfaceTag.find(t.getTblSel(u.schema,u.name)).remove(),t.nodeTableRemover(u))});this.updateToolbarItems();this.showTableHint(this.dragSurfaceTag.find(".e-data-table").length)},t.prototype.deleteQueryTable=function(n){var u=this.dragSurfaceTag.find(".e-data-table").not(n),f=[],t=[],i=null,r;return u.length>=1&&(r=n.data("e-table"),i=this.deleteTableNodes($.extend(this.queryJoiner,{},!0),r.id),t=i.relJoiner,u.each(function(n,u){for(var e=$(u).data("e-table"),s=!1,o=0;o<t.length;o++)if(t[o].leftTable===e.id||t[o].rightTable===e.id||r.id===e.id){s=!0;break}s||i.remainingTable===e.id||f.push(e)})),{tableJoins:t,tables:f}},t.prototype.joinerActionRes=function(n){n.isCancel&&n.data?(this.dragSurfaceTag.find(this.getTblSel(n.data.schema,n.data.name)).remove(),this.nodeTableRemover(n.data),this.updateToolbarItems()):n.joiners&&(ej.DashboardUtil.isEqualObj(this.queryJoiner,n.joiners)||(this.isJoin=!0,this.queryJoiner=n.joiners,this.deleteTable(this.queryJoiner),this.executeUIQuery()))},t.prototype.exprActionRes=function(n){this.queryExp=n},t.prototype.joinQueryTable=function(n){var t=this.dragSurfaceTag.find(".e-data-table").not(n),i=n.data("e-table"),r=this.joinQuery(t,i),u;r.length>0?($.merge(this.queryJoiner,r),this.executeUIQuery()):t.length!==0?(u=ej.DashboardUtil.getQueryInstance("QueryJoiner"),u.openQueryJoiner(i)):t.length===0&&this.executeUIQuery()},t.prototype.joinQuery=function(n,t){var o=this.getColumnList(t),s=[],f,i,u;if(n.length!==0){var r=this.getTableData(n),h=Object.keys(o),e=!1;for(u=0;u<h.length;u++)if(e=!1,!ej.isNullOrUndefined(o[h][u].ForeignKey)){for(f=o[h][u].ForeignKey,i=0;i<r.length;i++)if(f.RelationTable===r[i].table.name){e=!0;s.push({key:r[i].table.name+"-"+t.name,leftTable:r[i].table.name,rightTable:t.name,leftSchema:r[i].table.schema,rightSchema:f.RelationSchema,join:Join.Inner,primaryTable:r[i].table.name,keyFields:f.Field+Operator.Equal+f.RelationField,fields:[{operator:Operator.Equal,leftField:f.RelationField,rightField:f.Field}]});break}if(e)break}if(!e)for(i=0;i<r.length;i++){for(u=0;u<r[i].foreignKey.length;u++)if(r[i].foreignKey[u].RelationTable===t.name){e=!0;s.push({key:r[i].table.name+"-"+t.name,leftTable:r[i].table.name,rightTable:t.name,rightSchema:t.schema,leftSchema:r[i].foreignKey[u].RelationSchema,join:Join.Inner,primaryTable:t.name,keyFields:r[i].foreignKey[u].RelationField+Operator.Equal+r[i].foreignKey[u].Field,fields:[{rightField:r[i].foreignKey[u].RelationField,leftField:r[i].foreignKey[u].Field,operator:Operator.Equal}]});break}if(e)break}}return s},t.prototype.getTableData=function(n){var i=this,t=[];return n.each(function(n,r){for(var h=$(r).data("e-table"),u=i.getColumnList(h),o=[],s=[],e=Object.keys(u),f=0;f<u[e].length;f++)u[e][f].IsPrimaryKey&&o.push(u[e][f].Name),ej.isNullOrUndefined(u[e][f].ForeignKey)||s.push(u[e][f].ForeignKey);t.push({table:$(r).data("e-table"),primaryKey:o,foreignKey:s})}),t},t.prototype.dragStart=function(n){this.isTreeMouseDown&&this.dragging===null?this.dragTableStart(n):this.isTreeMouseDown||this.resetDrag()},t.prototype.dragTableStart=function(n){if(this.isTreeMouseDown){var i=$(n.currentTarget).closest("li"),t=this.getTreeData(i.attr("id"),i.parents("ul.e-treeview.e-js").data("ejTreeView"));if(t)if(this.dragSurfaceTag.find(this.getTblSel(t.value.schema,t.name)).length===0&&t.value.viewType!=="Procedures"&&this.dragSurfaceTag.find(".e-Stored.Procedures").length===0||t.value.viewType==="Procedures"&&this.dragSurfaceTag.find(".e-data-table").length===0){$("body").on(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.dragItem,this));$("body").on(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.dropItem,this));this.resetDrag();this.dragging=ej.buildTag("div","",{height:"auto",width:"185px",position:"absolute",display:"none","border-style":"none"},{});this.dragging.append(this.getDragTableHeader($(n.currentTarget).find("a").text()));$("body").append(this.dragging);this.dragging.data("ej-table-data",{schema:t.value.schema,viewType:t.value.viewType,name:t.name,displayName:t.displayName,isShared:i.parents(".e-shared-tables-content").length!==0,id:"",sourceId:t.sourceId})}else this.isTreeMouseDown=!1}else this.resetDrag()},t.prototype.getTreeData=function(n,t){if(t&&t.model.fields&&t.model.fields.dataSource)for(var i=0;i<t.model.fields.dataSource.length;i++)if(n===t.model.fields.dataSource[i].id)return t.model.fields.dataSource[i];return null},t.prototype.getDragTableHeader=function(n){var t=ej.buildTag("div.e-reportdesigner-dataset-dragHeader","",{display:"block",height:"30px",background:"white"},{}),i=ej.buildTag("span.e-designer-fontfamily",n,{float:"left","font-weight":"600","font-size":"13px",padding:"5px 0px 5px 10px",overflow:"hidden","vertical-align":"middle",width:"165px","text-overflow":"ellipsis","white-space":"nowrap"});return t.append(i),t},t.prototype.dragItem=function(n){if(this.isTreeMouseDown&&this.dragging!=null){var t=n.originalEvent&&n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageX:n.pageX,i=n.originalEvent&&n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageY:n.pageY;this.dragging.css({display:"block",top:i+1.5,left:t+1.5})}n.stopPropagation()},t.prototype.updateDroppedItem=function(n,t){if(n.data=this.dragging.data("ej-table-data"),n.data.id=t,n.element.hasClass("e-drag-surface"))this.isNewTableAdded=!0,this.renderTableElement(n.data,{top:n.element.scrollTop()+(n.pageY-n.element.offset().top),left:n.element.scrollLeft()+(n.pageX-n.element.offset().left)});else if(n.element.parents(".e-drag-surface").length>0){var i=n.element.parents(".e-drag-surface");this.isNewTableAdded=!0;this.renderTableElement(n.data,{top:i.scrollTop()+(n.pageY-i.offset().top),left:i.scrollLeft()+(n.pageX-i.offset().left)})}else n.element.hasClass("e-query-editor")&&this.renderText(n.data);this.isTreeMouseDown=!1;this.dragging.remove();this.dragging=null},t.prototype.dropItem=function(n){var u,i=$(n.target),f=n.originalEvent&&n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].pageX:n.pageX,e=n.originalEvent&&n.originalEvent.changedTouches?n.originalEvent.changedTouches[0].pageY:n.pageY,t,r;n.type==="touchend"&&(t=n.originalEvent.changedTouches[0],i=$(document.elementFromPoint(t.clientX,t.clientY)));this.dragging&&this.isTreeMouseDown&&(r={data:u,element:i,pageX:f,pageY:e},ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/getnewguid/",{},{fnction:$.proxy(this.updateDroppedItem,this,r)}));$("body").off(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.dragItem,this));$("body").off(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.dropItem,this))},t.prototype.dragSurfaceStart=function(n){this.dragSurfaceTag.on(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.dragSurfaceItem,this));this.dragSurfaceTag.on(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.dropSurfaceItem,this));this.dragSurfaceTag.on(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.dropSurfaceItem,this));this.dragging=$(n.currentTarget).parent("div.e-lv");var t=n.originalEvent&&n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageX:n.pageX,i=n.originalEvent&&n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageY:n.pageY;this.dragX=t-this.dragging.offset().left;this.dragY=i-this.dragging.offset().top},t.prototype.dragSurfaceItem=function(n){if(this.dragging!=null){var t=$(n.currentTarget),i=this.dragging.parent(),r=n.originalEvent&&n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageX:n.pageX,u=n.originalEvent&&n.originalEvent.targetTouches?n.originalEvent.targetTouches[0].pageY:n.pageY;this.dragging.css({top:i.scrollTop()+(u-t.offset().top)-this.dragY,left:i.scrollLeft()+(r-t.offset().left)-this.dragX,cursor:"move"})}},t.prototype.dropSurfaceItem=function(){this.dragging&&this.dragging.css("cursor","pointer");this.dragging=null;this.dragX=this.dragY=0;this.dragSurfaceTag.off(ej.DashboardUtil.MouseEvent.mouseMove,$.proxy(this.dragSurfaceItem,this));this.dragSurfaceTag.off(ej.DashboardUtil.MouseEvent.mouseUp,$.proxy(this.dropSurfaceItem,this));this.dragSurfaceTag.off(ej.DashboardUtil.MouseEvent.mouseLeave,$.proxy(this.dropSurfaceItem,this))},t.prototype.buildSQLStatement=function(n,t){var i="",f=this.dragSurfaceTag.find(".e-Stored.Procedures"),r=this.dragSurfaceTag.find(".e-data-table"),u;return f.length>0?(i=this.buildStoreProcedure(f),t&&(t.hasColumns=!0)):r.length>0&&(i=n?"SELECT top 100 ":"SELECT ",u=this.buildSelectClause(r),i+=u,i+=this.buildExpClause(r,u?!0:!1),i=i+" FROM "+this.buildFromClause(r),i+=this.buildGroupByClause(r),u&&u.length>0&&t&&(t.hasColumns=!0)),i},t.prototype.buildSelectClause=function(n){var t=this,r="",i=this.id;return n.each(function(n,u){for(var a,c,o=$(u).data("e-table"),f=t.getColumnList(o),s=Object.keys(f),e=0;e<f[s].length;e++){var h=ej.DashboardUtil.escapeSelector(f[s][e].Name),p=$(u).find("#"+i+"_"+h),l=$(u).find("#"+t.id+"_txtSpan_"+h);if(p.hasClass("e-reportdesigner-dataset-column-select")){a=l.text();c="";l.attr("isDuplicate")==="true"?c=" AS ["+/\(([^)]+)\)/.exec(l.text())[1]+"]":a.toLowerCase()!==f[s][e].Name.toLowerCase()&&(c=" AS ["+a+"]");var w=$(u).find("#"+i+"_li_"+h).attr("e-data-aggregate"),v="["+o.schema+"].["+o.name+"].["+f[s][e].Name+"]",y=$(u).find("#"+i+"_li_"+h).attr("e-column-type");y&&(c=" AS ["+o.schema+"_"+o.name+"_"+f[s][e].Name+"]");v=t.getTypeCastField(v,y,$(u).find("#"+i+"_li_"+h).attr("datatype"));r+=(r?",\n":"")+(t.getAggregateField(v,w)+c)}}}),r},t.prototype.buildExpClause=function(n,t){var i="",r,u,f;if(this.queryExp&&this.queryExp.length>0){for(r=0;r<this.queryExp.length;r++)u=this.queryExp[r].name,f=this.buildExpColumn(n,this.queryExp[r]),i+=(i?",\n":"")+f+" AS ["+u+"]";i&&t&&(i=",\n"+i)}return i},t.prototype.buildExpColumn=function(n,t){var r=this,i=t.expression,u=t.name;return i=this.gethierarchyExp(u,i),n.each(function(n,t){for(var s,v,h=$(t).data("e-table"),u=r.getColumnList(h),o=Object.keys(u),f=0;f<u[o].length;f++){var c=ej.DashboardUtil.escapeSelector(u[o][f].Name),l=$(t).find("#"+r.id+"_txtSpan_"+c),e=u[o][f].Name,a=l.text();e=l.attr("isDuplicate")==="true"?"["+e+"("+/\(([^)]+)\)/.exec(l.text())[1]+")]":a.toLowerCase()!==u[o][f].Name.toLowerCase()?"["+e+"("+a+")]":"["+e+"]";s="["+h.schema+"].["+h.name+"].["+u[o][f].Name+"]";v=$(t).find("#"+r.id+"_li_"+c).attr("e-column-type");s=r.getTypeCastField(s,v,$(t).find("#"+r.id+"_li_"+c).attr("datatype"));i&&ej.DashboardUtil.contains(i,e,!0)&&(i=i.split(e).join("("+s+")"))}}),i},t.prototype.gethierarchyExp=function(n,t){for(var r,u,i=0;i<this.queryExp.length;i++)if(this.queryExp[i].name!==n&&(r="["+this.queryExp[i].name+"]",u=this.queryExp[i].expression,t&&t.indexOf(r)!==-1))return t=t.split(r).join("("+u+")"),this.gethierarchyExp(n,t);return t},t.prototype.buildGroupByClause=function(n){var i=this,t="",r=this.id;return n.each(function(n,u){for(var h,o=$(u).data("e-table"),f=i.getColumnList(o),s=Object.keys(f),e=0;e<f[s].length;e++)h=$(u).find("#"+r+"_li_"+ej.DashboardUtil.escapeSelector(f[s][e].Name)).attr("e-data-aggregate"),ej.isNullOrUndefined(h)||h.toLowerCase()!=="groupby"||(t+=(t?",":" GROUP BY ")+"["+o.schema+"].["+o.name+"].["+f[s[e]].Name+"]")}),t},t.prototype.buildFilterQuery=function(n,t){n.toLowerCase()!=="date"||t.isParameter||(t.value1="'"+t.value1+"'",t.value2="'"+t.value2+"'");var i="["+t.schema+"].["+t.tableName+"].["+t.colName+"]";return t.isTypecast&&(i=this.getTypeCastField(i,t.typeCastValue,t.defaultType)),"("+i+" "+t.operator+" "+(t.operator==="Between"||t.operator==="Not Between"?t.value1+" AND "+t.value2:t.value1)+")"},t.prototype.buildStringQuery=function(n){var t="["+n.schema+"].["+n.tableName+"].["+n.colName+"]",i,r;return(n.isTypecast&&(t=this.getTypeCastField(t,n.typeCastValue,n.defaultType)),i=n.isParameter?n.value1:"N'"+n.value1+"'",n.operator==="Starts With"||n.operator==="Ends With")?(r=n.operator==="Starts With"?"LEFT("+t+", LEN("+i+"))":"RIGHT(RTRIM("+t+"), LEN("+i+" ))","((((CASE WHEN LEN( "+i+" ) >= 0 THEN "+r+"ELSE NULL END) = "+i+" ) AND("+t+" <> '' )) AND (NOT("+t+" IS NULL)))"):n.operator==="Contains"?"(((ISNULL(CHARINDEX( "+i+","+t+"),0) > 0) AND ("+t+" <> '' )) AND (NOT("+t+" IS NULL)))":n.operator==="Not Contains"?"(((NOT(ISNULL(CHARINDEX( "+i+" ,"+t+"),0) > 0)) AND ("+t+" <> '' )) AND (NOT("+t+" IS NULL)))":n.operator==="="?"("+t+" "+n.operator+" "+i+")":void 0},t.prototype.buildGuidQuery=function(n){var t="["+n.schema+"].["+n.tableName+"].["+n.colName+"]",i,r;return(n.isTypecast&&(t=this.getTypeCastField(t,n.typeCastValue,n.defaultType)),i=n.isParameter?n.value1:"N'"+n.value1+"'",n.operator==="Starts With"||n.operator==="Ends With")?(r=n.operator==="Starts With"?"LEFT(["+t+"], LEN( "+i+"))":"RIGHT(RTRIM("+t+"), LEN( "+i+" ))","(((CASE WHEN LEN( "+i+" ) >= 0 THEN "+r+"ELSE NULL END) = "+i+") AND (NOT("+t+" IS NULL)))"):n.operator==="Contains"||n.operator==="Not Contains"?"("+(n.operator==="Not Contains"?"NOT(":"(")+"ISNULL(CHARINDEX( "+i+", "+t+"]), 0) > 0) AND (NOT("+t+" IS NULL)))":n.operator==="="?"("+t+" "+n.operator+" "+i+")":void 0},t.prototype.buildBoolQuery=function(n){var r=n.isParameter?n.parameter1:"'"+n.value1+"'",i=n.isParameter?n.parameter2:"'"+n.value2+"'",t=n.schema+"].["+n.tableName+"].["+n.colName;return n.value1==="NULL"&&n.value2.length===0?"(["+t+"] IS NULL)":n.value2.length===0&&n.value1==="True"||n.value1==="False"?"(["+t+"] "+(n.isParameter?" =  "+n.parameter1+" )":"IN ("+r+"))"):n.value1==="True"&&n.value2==="False"?"(["+t+"] IN ( "+r+" , "+i+" ))":n.value1==="NULL"&&n.value2==="True"||n.value2==="False"?"(["+t+"] IS NULL or ["+t+"] "+(n.isParameter?" = "+i+")":" IN ("+i+"))"):void 0},t.prototype.buildWhereClause=function(n){var u=this,r="",o,t=$.extend(this.queryFilter,!0,{}),i,f=" AND ",e=" WHERE  (";if(!ej.isNullOrUndefined(t)&&t.length>0)for(i=0;i<t.length;i++)n.each(function(n,s){var l=$(s).data("e-table"),w=u.getColumnList(l),b=Object.keys(w),h,c,k;if(t[i].TableName===l.name){for(h=t[i].IsTypeCast?t[i].TypeCastValue:t[i].DataType,c=0;c<w[b].length;c++)if(t[i].Name===b[c]){o=w[b][c].Name;break}var a=t[i].Value,v=t[i].ParameterName,y=t[i].IsQueryParameter,p={schema:l.schema,tableName:t[i].TableName,colName:o,operator:t[i].Operator,value1:y?v.Parameter1:a.Value1,value2:y?v.Parameter2:a.Value2,isParameter:y,isTypecast:t[i].IsTypeCast,typeCastValue:t[i].TypeCastValue,defaultType:t[i].DataType};h==="System.Int32"||h==="System.Int16"||h==="System.Int64"||h==="System.Double"||h==="System.Single"||h==="System.Decimal"||h==="System.Byte"||h==="integer"?r+=(r?f:e)+u.buildFilterQuery("int",p):h==="System.Boolean"?(k={schema:l.schema,tableName:t[i].TableName,colName:o,operator:t[i].Operator,value1:a.Value1,value2:a.Value2,parameter1:v.Parameter1,parameter2:v.Parameter2,isParameter:y},r+=(r?f:e)+u.buildBoolQuery(k)):h==="System.String"||h==="string"?r+=(r?f:e)+u.buildStringQuery(p):h==="System.Guid"?r+=(r?f:e)+u.buildGuidQuery(p):(h==="System.DateTime"||h==="date")&&(r+=(r?f:e)+u.buildFilterQuery("date",p))}});return r+=r?")":""},t.prototype.buildFromClause=function(){var f="",s=this.dragSurfaceTag.find(".e-data-table"),i={},l={},h,o,t;if(s.length===1)h=s.data("e-table"),f="["+h.schema+"].["+h.name+"]";else if(s.length>1&&this.queryJoiner.length>0){var r=$.extend(this.queryJoiner,!0,{}),e=0,n=0,a=0;for(f+="["+this.queryJoiner[0].leftSchema+"].["+this.queryJoiner[0].leftTable+"]",i[this.queryJoiner[0].leftTable]=this.queryJoiner[0].leftTable;e<this.queryJoiner.length;){var c="",v="",u=[];if((!ej.isNullOrUndefined(i[this.queryJoiner[n].leftTable])||!ej.isNullOrUndefined(this.queryJoiner[n].rightTable))&&ej.isNullOrUndefined(l[this.queryJoiner[n].key])){for(u=this.queryJoiner[n].fields,ej.isNullOrUndefined(i[this.queryJoiner[n].leftTable])?(c="["+this.queryJoiner[n].leftSchema+"].["+this.queryJoiner[n].leftTable+"]",v=r[n].join===Join.LeftOuter?Join.RightOuter.toString().toUpperCase()+" JOIN ":r[n].join===Join.RightOuter?Join.LeftOuter.toString().toUpperCase()+" JOIN ":r[n].join.toString().toUpperCase()+" JOIN ",i[this.queryJoiner[n].leftTable]=this.queryJoiner[n].leftTable):(c="["+this.queryJoiner[n].rightSchema+"].["+this.queryJoiner[n].rightTable+"]",v=r[n].join.toString().toUpperCase()+" JOIN ",i[this.queryJoiner[n].rightTable]=this.queryJoiner[n].rightTable),o="",t=0;t<u.length;t++)o+=(o?"AND":"")+("["+this.queryJoiner[n].leftSchema+"].["+this.queryJoiner[n].leftTable+"].["+u[t].leftField+"]"+u[t].operator+"["+this.queryJoiner[n].rightSchema+"].["+this.queryJoiner[n].rightTable+"].["+u[t].rightField+"]");f+=" "+r[n].join.toString().toUpperCase()+" JOIN "+c+" ON "+o;l[this.queryJoiner[n].key]=this.queryJoiner[n].key;e++}if(n++,n===this.queryJoiner.length)if(n=0,a===e)break;else a=e}}return f},t.prototype.buildIntChangeQuery=function(n,t){var i="";switch(t){case"date":i="CAST("+n+" AS datetime)";break;case"string":i="CAST("+n+" AS nvarchar)";break;default:i=n}return i},t.prototype.buildDateChangeQuery=function(n,t){var i="";switch(t){case"integer":i="CAST("+n+" AS float)";break;case"string":i="CAST("+n+" AS nvarchar)";break;default:i=n}return i},t.prototype.buildStringChangeQuery=function(n,t){var i="";switch(t){case"date":i="(CASE WHEN 0 = ISDATE(CAST("+n+" AS VARCHAR))THEN NULL ELSE CAST(CAST("+n+" AS VARCHAR)AS datetime)END )";break;case"integer":i="(CASE WHEN 0 = ( ISNUMERIC(CAST("+n+" AS VARCHAR)))or ("+n+") Like '%[^a-zA-Z0-9.]%' THEN NULL ELSE CAST(CAST("+n+" AS VARCHAR)AS float)END ) ";break;default:i=n}return i},t.prototype.buildBoolChangeQuery=function(n,t){var i="";switch(t){case"date":i="CAST("+n+" AS datetime)";break;case"string":i="(CASE WHEN("+n+" <> 0)THEN '1' WHEN NOT("+n+" <> 0)THEN '0' ELSE NULL END)";break;case"integer":i="(CASE WHEN("+n+" <> 0)THEN 1 WHEN NOT("+n+" <> 0)THEN 0 ELSE NULL END)";break;default:i=n}return i},t.prototype.getTypeCastField=function(n,t,i){var r="";return t?(this.isNumberType(i)?r=this.buildIntChangeQuery(n,t):this.isStringType(i)?r=this.buildStringChangeQuery(n,t):this.isDateType(i)?r=this.buildDateChangeQuery(n,t):(i.toLowerCase()==="bit"||i.toLowerCase()==="system.boolean")&&(r=this.buildBoolChangeQuery(n,t)),r):n},t.prototype.getAggregateField=function(n,t){var i="";switch(t){case"Sum":i="SUM("+n+")";break;case"Avg":i="AVG("+n+")";break;case"Min":i="MIN("+n+")";break;case"Max":i="MAX("+n+")";break;case"Count":i="COUNT("+n+")";break;case"StDev":i="STDEV("+n+")";break;case"StDevP":i="STDEVP("+n+")";break;case"Var":i="VAR("+n+")";break;case"VarP":i="VARP("+n+")";break;case"SumDistinct":i="SUM(DISTINCT "+n+")";break;case"AvgDistinct":i="AVG(DISTINCT "+n+")";break;case"MinDistinct":i="MIN(DISTINCT "+n+")";break;case"MaxDistinct":i="MAX(DISTINCT "+n+")";break;case"CountDistinct":i="COUNT(DISTINCT "+n+")";break;default:i=n}return i},t.prototype.buildStoreProcedure=function(n){var u=n.data("e-table"),t,i,r,f;if(this.commandMode===CommandMode.Text){if(t="exec ",i=this.getProcParams(),t+=u.schema+"."+u.name+" ",i&&i.length>0)for(r=0;r<i.length;r++)f=i[r],r!==0&&(t+=","),t+=f.Name+"='"+f.Value+"'";return t}return u.schema+"."+u.name},t.prototype.showSettingsMenu=function(n){var e,o;this.argument=n;var t=$(n.target),u=t.offset(),i=$("#"+this.id+"_ds_tableMenu").data("ejMenu"),f=i._targetEjElement=t.closest("li"),r=$(i._targetEjElement).attr("e-column-type");this.updateColType(f,r);this.isNumberType(f.attr("datatype"))?$("#"+this.id+"_ds_tableMenu .e-commonType").css("display","block"):($("#"+this.id+"_ds_tableMenu .e-commonType:not(.e-string)").css("display","none"),$("#"+this.id+"_ds_tableMenu .e-string").css("display","block"));$("#"+this.id+"_ds_tableMenu .e-chk-image").css("display","none");$("#"+this.id+"_field_"+$(i._targetEjElement).attr("e-data-aggregate")).css("display","block");e=$("#"+this.id+"_Default").attr("data-default");o=this.isDefault(r)?"Default":this.getTypeText(r,e);$("#"+this.id+"_"+o+"_tick").css("display","block");i.show(u.left-$("#"+this.id+"_ds_tableMenu").width(),u.top+t.height(),t,{})},t.prototype.getTypeText=function(n,t){var i="Default";return this.isNumberType(n)?i="Number":this.isDateType(n)?i="DateTime":this.isStringType(n)&&(i="Text"),i===t&&(i="Default"),i},t.prototype.isDefault=function(n){return ej.isNullOrUndefined(n)?!0:!1},t.prototype.updateColType=function(n,t){var i=this.dashboardDesigner.locale.queryDesigner.columnType,r=n.attr("datatype"),u=i.defaultField,o=$("#"+this.id+"_ds_tableMenu"),f=o.data("ejMenu"),e=o.find("#"+this.id+"_Default"),s;r.toLowerCase()==="time"?f.showItems(["#"+this.id+"_Text","#"+this.id+"_DateTime"]):f.showItems(["#"+this.id+"_Number","#"+this.id+"_Text","#"+this.id+"_DateTime"]);this.isNumberType(r)?(f.hideItems(["#"+this.id+"_Number"]),e.attr("itemType","Integer").attr("data-default","Number"),u=i.numberField):this.isStringType(r)?(f.hideItems(["#"+this.id+"_Text"]),e.attr("itemType","String").attr("data-default","Text"),u=i.stringField):this.isDateType(r)?(f.hideItems(["#"+this.id+"_DateTime"]),e.attr("itemType","Date").attr("data-default","DateTime"),u=i.dateField):(r==="bit"||r.toLowerCase()==="boolean")&&(e.attr("itemType","Boolean"),u=i.booleanField);this.updateIconType(t,n);s=$("#"+this.id+"_ds_tableMenu").find("#"+this.id+"_Default").find("a");s.first()[0].childNodes[0].nodeValue=i.defaultField+" ("+u+")"},t.prototype.updateIconType=function(n,t){var f=ej.isNullOrUndefined(n)?t.attr("datatype"):n,r={DataType:f.toLowerCase(),IsPrimaryKey:!1},u="",i;switch(f.toLowerCase()){case"integer":case"real":r={DataType:"int",IsPrimaryKey:!1};u=ej.DashboardUtil.getDataTypeStyle(r);break;case"date":r={DataType:"datetime",IsPrimaryKey:!1};u=ej.DashboardUtil.getDataTypeStyle(r);break;case"string":r={DataType:"text",IsPrimaryKey:!1};u=ej.DashboardUtil.getDataTypeStyle(r);break;case"boolean":r={DataType:"bit",IsPrimaryKey:!1};u=ej.DashboardUtil.getDataTypeStyle(r);break;default:r={DataType:t.attr("datatype"),IsPrimaryKey:!1};u=ej.DashboardUtil.getDataTypeStyle(r)}i=t.find(".e-query-datatype");i.hasClass("e-reportdesigner-dataset-datetime")?i.removeClass("e-reportdesigner-dataset-datetime"):i.hasClass("e-reportdesigner-dataset-time")?i.removeClass("e-reportdesigner-dataset-time"):i.hasClass("e-reportdesigner-dataset-time")?i.removeClass("e-reportdesigner-dataset-time"):i.hasClass("e-reportdesigner-dataset-number")?i.removeClass("e-reportdesigner-dataset-number"):i.hasClass("e-reportdesigner-dataset-boolean")?i.removeClass("e-reportdesigner-dataset-boolean"):i.hasClass("e-reportdesigner-dataset-char")?i.removeClass("e-reportdesigner-dataset-char"):i.hasClass("e-reportdesigner-dataset-string")&&i.removeClass("e-reportdesigner-dataset-string");i.addClass(u)},t.prototype.isNumberType=function(n){var t=n.toLowerCase();return t==="tinyint"||t==="smallint"||t==="int"||t==="bigint"||t==="smallmoney"||t==="money"||t==="numeric"||t==="decimal"||t==="real"||t==="float"||t==="uniqueidentifier"||n==="System.Int32"||n==="System.Int16"||n==="System.Int64"||n==="System.Double"||t==="integer"||n==="System.Single"||n==="System.Decimal"||n==="System.Byte"?!0:!1},t.prototype.isStringType=function(n){var t=n.toLowerCase();return t==="nchar"||t==="ntext"||t==="nvarchar"||t==="text"||t==="varchar"||t==="char"||n==="System.Guid"||n==="System.String"||n==="Text"||t==="string"?!0:!1},t.prototype.isDateType=function(n){var t=n.toLowerCase();return t==="datetime"||t==="datetime2"||n==="System.DateTimeOffset"||n==="System.DateTime"||t==="smalldatetime"||t==="date"||t==="datetimeoffset"||t==="timestamp"||t==="time"?!0:!1},t.prototype.onListItemMouseUp=function(n){var t=$(n.target).closest("li");t.hasClass("e-table-user-selection-active")||(t.parent().children().each(function(){var n=$(this);n.removeClass("e-table-user-selection-active");n.find("span").removeClass("e-table-user-selection-active");n.find(".e-settings").css("display","none")}),t.addClass("e-table-user-selection-active"),t.find("span").addClass("e-table-user-selection-active"),t.find(".e-reportdesigner-dataset-column-deselect").length===0?t.find(".e-settings").css("display","inline-block"):t.find(".e-settings").css("display","none"))},t.prototype.enableTableSettings=function(n){var t=$(n.currentTarget);t.find(".e-settings").css("display","inline-block");t.find(".e-reportdesigner-dataset-column-deselect").length===0?t.find(".e-settings").css("display","inline-block"):t.find(".e-settings").css("display","none");t.find(".e-title-tip").length>0&&ej.DashboardUtil.getInstance().tagOverTip({currentTarget:t.find(".e-title-tip")[0]})},t.prototype.disableTableSettings=function(n){var t=$(n.currentTarget),i=t.find(".e-settings");i.hasClass("e-table-user-selection-active")||i.css("display","none");t.find(".e-title-tip").length>0&&ej.DashboardUtil.getInstance().tagOutTip({currentTarget:t.find(".e-title-tip")[0]})},t.prototype.enableSharedTableSettings=function(n){$(n.currentTarget).addClass("e-shared-ds-hover-enable")},t.prototype.disableSharedTableSettings=function(n){$(n.currentTarget).hasClass("e-shared-ds-hover-enable")&&$(n.currentTarget).removeClass("e-shared-ds-hover-enable")},t.prototype.isAggregateTypeChange=function(n){return!ej.isNullOrUndefined(n)&&(n.toLowerCase()==="date"||n.toLowerCase()==="integer"||n.toLowerCase()==="string"||n.toLowerCase()==="boolean")?!1:!0},t.prototype.settingMenuClick=function(n){var t=$("#"+this.id+"_ds_tableMenu").data("ejMenu"),i=$(n.element).closest("li").attr("itemType"),r=this.isAggregateTypeChange(i),u=this.dashboardDesigner.locale.queryDesigner;n.text===u.rename?this.editColumnName({currentTarget:t._targetEjElement[0]}):r?this.setTickAttribute(n,t._targetEjElement,r):this.postColumnUpdate(this.argument,"",i,"typeEdit",n)},t.prototype.setTickAttribute=function(n,t,i){var r=$(n.element).find(".e-chk-image"),u;r.length===1&&($("#"+this.id+"_ds_tableMenu").find(".e-chk-image").not(r).css("display","none"),u=$(n.element).attr("itemType"),r.css("display")==="block"?(r.css("display","none"),$(t).attr(i?"e-data-aggregate":"e-column-type","")):(r.css("display","block"),$(t).attr(i?"e-data-aggregate":"e-column-type",u)),this.updateIconType(u,$(t)))},t.prototype.getColumnItem=function(n,t,i,r){var u=ej.buildTag("li","",{},{id:i,itemType:n}),f=ej.buildTag("a."+r+"-anchor",t),e=ej.buildTag("span.e-chk-image e-icon e-checkmark e-lv-checkdiv","",{display:"none"},{id:i+"_tick"});return f.append(e),u.append(f),u},t.prototype.getMenuItem=function(n,t,i){var f=i?" e-string":"",r=ej.buildTag("li.e-commonType"+f),u=ej.buildTag("a",n),e=ej.buildTag("span.e-chk-image e-icon e-checkmark e-lv-checkdiv","",{display:"none"},{id:t});return u.append(e),r.append(u),r},t.prototype.setDataType=function(n,t,i,r){var o=$(t[0]).find(".e-list-text"),p=t.closest("li"),u=p.attr("dataId"),f=o.attr("name"),e=o.text().trim(),v,y;f!==e&&o.attr("isDuplicate")==="false"&&(e=f+"("+e+")");ej.isNullOrUndefined(u)&&!ej.isNullOrUndefined(r.columnInfo[0])&&(u=r.columnInfo[0].Id);var l=$(t).closest(".e-tableName").find(".e-tableSpan").text(),s=this.hasQueryFilter(u,l),h=this.hasWidgetFilter(u,f),c=this.hasSorting(u,f),a="",w=!ej.isNullOrUndefined(n.text)&&n.text.indexOf("Default")!==-1;(s||h||c)&&(a=this.dashboardDesigner.locale.alertWindowMesages.columnTypeChangeValidationMsgCommon);s||h||c?(v={hasFilter:s,hasWidgetFilter:h,hasSorting:c},ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dashboard,a,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{name:f,id:u,tableName:l,target:t,isAggregate:i,menuElement:n,expCol:e,result:v,dataConfig:{tableName:r.tableName,tableSchema:r.tableSchema,tableId:r.tableId,schema:r.schema,columnInfo:r.columnInfo,format:r.format}},instance:this,method:"enableTick"})):(this.setTickAttribute(n,t,i),y=JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.columnFormatting,dataSet:this.dataset.Id,tableName:r.tableName,tableSchema:r.tableSchema,tableId:r.tableId,schema:r.schema,columnInfo:r.columnInfo,format:r.format,isdefaultdatatype:w}),this.updatePreview(y))},t.prototype.enableTick=function(n,t){if(n&&!ej.isNullOrUndefined(t)){this.removeFilterTypeCast(t.name,t.dataConfig.tableId);t.result.hasWidgetFilter&&this.removeWidgetFilterTypeCast(t.id,t.name);t.result.hasSorting&&this.removeSortingTypeCast(t.id,t.name);this.setTickAttribute(t.menuElement,t.target,t.isAggregate);var i=JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.columnFormatting,dataSet:this.dataset.Id,tableName:t.dataConfig.tableName,tableSchema:t.dataConfig.tableSchema,tableId:t.dataConfig.tableId,schema:t.dataConfig.schema,columnInfo:t.dataConfig.columnInfo,format:t.dataConfig.format});this.updatePreview(i)}},t.prototype.removeWidgetFilterTypeCast=function(n,t){for(var e,r,i,f=ej.DashboardUtil.getAllWidgets(),u=0;u<f.length;u++)if(f[u].dataGroupInfo.DatasetId===this.dataset.Id)for(e=0;e<f[u].dataGroupInfo.Values.length;e++)for(r=f[u].dataGroupInfo.Values[e],i=0;i<r.Values.length;i++)ej.isNullOrUndefined(r.Values[i].FilterInfo)||ej.isNullOrUndefined(r.Values[i].FilterInfo.DimensionFilterInfo)||(ej.isNullOrUndefined(r.Values[i].FilterInfo.DimensionFilterInfo.ConditionFilterInfo)||r.Values[i].FilterInfo.DimensionFilterInfo.ConditionFilterInfo.ColumnName!==t||(r.Values[i].FilterInfo.DimensionFilterInfo.ConditionFilterInfo=null),ej.isNullOrUndefined(r.Values[i].FilterInfo.DimensionFilterInfo.TopNFilterInfo)||r.Values[i].FilterInfo.DimensionFilterInfo.TopNFilterInfo.ColumnId!==n||(r.Values[i].FilterInfo.DimensionFilterInfo.TopNFilterInfo=null))},t.prototype.removeSortingTypeCast=function(n){for(var f,i,t,u=ej.DashboardUtil.getAllWidgets(),r=0;r<u.length;r++)if(u[r].dataGroupInfo.DatasetId===this.dataset.Id)for(f=0;f<u[r].dataGroupInfo.Values.length;f++)for(i=u[r].dataGroupInfo.Values[f],t=0;t<i.Values.length;t++)ej.isNullOrUndefined(i.Values[t].CustomSorting)||ej.isNullOrUndefined(i.Values[t].CustomSorting.CustomSortType)||i.Values[t].CustomSorting.CustomSortType!=="Field"||i.Values[t].CustomSorting.FieldId!==n||(i.Values[t].CustomSorting=null)},t.prototype.hasQueryFilter=function(n,t){if(!ej.isNullOrUndefined(this.queryFilter)&&this.queryFilter.length>0)for(var i=0;i<this.queryFilter.length;i++)if(n===this.queryFilter[i].Id&&t===this.queryFilter[i].TableName||!ej.isNullOrUndefined(this.queryFilter[i].BooleanFilterSchemaInfo)&&this.queryFilter[i].BooleanFilterSchemaInfo.IsTopNApplied&&n===this.queryFilter[i].BooleanFilterSchemaInfo.TopNFilterConditionInfo.ColumnId||!ej.isNullOrUndefined(this.queryFilter[i].DimensionFilterSchemaInfo)&&this.queryFilter[i].DimensionFilterSchemaInfo.IsTopNApplied&&n===this.queryFilter[i].DimensionFilterSchemaInfo.TopNFilterConditionInfo.ColumnId||!ej.isNullOrUndefined(this.queryFilter[i].DateFilterSchemaInfo)&&this.queryFilter[i].DateFilterSchemaInfo.IsTopNApplied&&n===this.queryFilter[i].DateFilterSchemaInfo.TopNFilterConditionInfo.ColumnId)return!0;return!1},t.prototype.hasQueryFilterTable=function(n){var i=!1,t;if(!ej.isNullOrUndefined(this.queryFilter)&&this.queryFilter.length>0)for(t=0;t<this.queryFilter.length;t++)if(n===this.queryFilter[t].TableName){i=!0;break}else if(i=this.validateTopNFilterInfo(t),i)break;return i},t.prototype.hasExpressionTable=function(n){for(var u,i,r=ej.DashboardUtil.getQueryInstance("QueryFilter"),t=0;t<r.dataFields.length;t++)if(r.dataFields[t].table===n&&(u=r.dataFields[t].columnName,!ej.isNullOrUndefined(this.queryExp)&&this.queryExp.length>0))for(i=0;i<this.queryExp.length;i++)if(u&&ej.DashboardUtil.contains(this.queryExp[i].expression,u,!0))return!0;return!1},t.prototype.hasExpression=function(n){if(!ej.isNullOrUndefined(this.queryExp)&&this.queryExp.length>0)for(var t=0;t<this.queryExp.length;t++)if(n&&ej.DashboardUtil.contains(this.queryExp[t].expression,n,!0))return!0;return!1},t.prototype.hasDataAssign=function(n){for(var r,f,u,i=ej.DashboardUtil.getAllWidgets(),t=0;t<i.length;t++)if(i[t].dataGroupInfo.DatasetId===this.dataset.Id)for(r=0;r<i[t].dataGroupInfo.Values.length;r++)for(f=i[t].dataGroupInfo.Values[r],u=0;u<f.Values.length;u++)if(f.Values[u].DataId===n)return!0;return!1},t.prototype.hasWidgetFilter=function(n,t){for(var e,r,i,f=ej.DashboardUtil.getAllWidgets(),u=0;u<f.length;u++)if(f[u].dataGroupInfo.DatasetId===this.dataset.Id)for(e=0;e<f[u].dataGroupInfo.Values.length;e++)for(r=f[u].dataGroupInfo.Values[e],i=0;i<r.Values.length;i++)if(!ej.isNullOrUndefined(r.Values[i].FilterInfo)&&!ej.isNullOrUndefined(r.Values[i].FilterInfo.DimensionFilterInfo))if(ej.isNullOrUndefined(r.Values[i].FilterInfo.DimensionFilterInfo.ConditionFilterInfo)||r.Values[i].FilterInfo.DimensionFilterInfo.ConditionFilterInfo.ColumnName!==t){if(!ej.isNullOrUndefined(r.Values[i].FilterInfo.DimensionFilterInfo.TopNFilterInfo)&&r.Values[i].FilterInfo.DimensionFilterInfo.TopNFilterInfo.ColumnId===n)return!0}else return!0;return!1},t.prototype.hasSorting=function(n){for(var f,i,t,u=ej.DashboardUtil.getAllWidgets(),r=0;r<u.length;r++)if(u[r].dataGroupInfo.DatasetId===this.dataset.Id)for(f=0;f<u[r].dataGroupInfo.Values.length;f++)for(i=u[r].dataGroupInfo.Values[f],t=0;t<i.Values.length;t++)if(!ej.isNullOrUndefined(i.Values[t].CustomSorting)&&!ej.isNullOrUndefined(i.Values[t].CustomSorting.CustomSortType)&&i.Values[t].CustomSorting.CustomSortType==="Field"&&i.Values[t].CustomSorting.FieldId===n)return!0;return!1},t.prototype.removeExpTypecast=function(n){var t,i;if(this.hasExpression(n)){for(t=0;t<this.queryExp.length;t++)n&&ej.DashboardUtil.contains(this.queryExp[t].expression,"["+n+"]",!0)&&(this.removeHierarchyExp(this.queryExp[t].name),this.queryExp.splice(t,1));if(this.queryExp&&this.queryExp.length>0)for(i=0;i<this.queryExp.length;i++)if(ej.DashboardUtil.contains(this.queryExp[i].expression,"["+n+"]",!0)){this.queryExp.splice(i,1);break}}},t.prototype.removeFilterTypeCast=function(n,t){if(!ej.isNullOrUndefined(this.queryFilter)&&this.queryFilter.length>0)for(var i=this.queryFilter.length-1;i>=0;i--)if(this.queryFilter[i].Name===n&&this.queryFilter[i].TableId===t){this.queryFilter.splice(i,1);break}},t.prototype.removeHierarchyExp=function(n){for(var t=0;t<this.queryExp.length;t++)ej.DashboardUtil.contains(this.queryExp[t].expression,n,!0)&&(this.removeHierarchyExp(this.queryExp[t].name),this.queryExp.splice(t,1))},t.prototype.designerClick=function(n){var t=$(n.target).parents("ul.e-designer-menu"),i;t.length>0?(i=this.element.find(".e-designer-menu:visible").not(t),i.hide()):$(n.target).hasClass("e-designer-click")||$(n.target).closest(".e-designer-click").length>0||($(".e-designer-menu:visible").hide(),$(".e-designer-tooltip:visible").css("display","none"))},t.prototype.editColumnBlur=function(n){var i=$(n.currentTarget),f=i.closest("li"),e=i.attr("liTag"),t=f.find("#"+e),u=i.val().trim(),r;if(this.isExistColName(u,t))ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.dataSource.columnNameExist,IconType.warning,AlertType.Alert,!1,""),i.css("display","none"),t.css("display","inline-block");else if(u){for(i.css("display","none"),t.css("display","inline-block").text(u.trim()),ej.DashboardUtil.isExistTextWidth(t)?t.addClass("e-title-tip"):t.removeClass("e-title-tip"),this.postColumnUpdate(n,u,null,"nameEdit"),r=0;r<this.queryExp.length;r++)this.queryExp[r].expression.indexOf(this.renameColVal)!==-1&&(this.queryExp[r].expression=this.queryExp[r].expression.replace(this.renameColVal,u));this.editColVal=null;this.renameColVal=null}else ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.dataSource.columnName,IconType.warning,AlertType.Alert,!1,""),i.css("display","none"),t.css("display","inline-block")},t.prototype.editColumnName=function(n){var i=$(n.currentTarget).find(".e-edit-column"),u=i[0],r=this.dragSurfaceTag.find(".e-edit-column:visible").not(i),f=$(n.currentTarget).find(".e-list-text"),t;i.css("display")==="none"&&r.length===0?(t=f.text().trim(),f.css("display","none"),i.css("display","inline-block").val(t).focus(),this.editColVal=t,this.renameColVal=t,u.selectionStart=u.selectionEnd=t.length):r.length>0&&this.editColumnBlur({currentTarget:r[0]})},t.prototype.editColumnKeyPress=function(n){if(n.keyCode===13){var i=$(n.currentTarget),u=i.closest("li"),f=i.attr("liTag"),t=u.find("#"+f),r=i.val().trim();this.isExistColName(r,t)&&r!==this.editColVal?(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.dataSource.columnNameExist,IconType.warning,AlertType.Alert,!1,""),i.css("display","none"),t.css("display","inline-block")):r?(i.css("display","none"),t.css("display","inline-block").text(r.trim()),ej.DashboardUtil.isExistTextWidth(t)?t.addClass("e-title-tip"):t.removeClass("e-title-tip"),this.editColVal=null):(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.dataSource.columnName,IconType.warning,AlertType.Alert,!1,""),i.css("display","none"),t.css("display","inline-block"))}},t.prototype.isExistExpField=function(n,t){var i=this,r=!1;return n.each(function(n,u){for(var c=$(u).data("e-table"),f=i.getColumnList(c),s=Object.keys(f),e=0;e<f[s].length;e++){var a=ej.DashboardUtil.escapeSelector(f[s][e].Name),h=$(u).find("#"+i.id+"_txtSpan_"+a),o=f[s][e].Name,l=h.text();if(o=h.attr("isDuplicate")==="true"?"["+o+" ("+/\(([^)]+)\)/.exec(h.text())[1]+")]":l.toLowerCase()!==f[s][e].Name.toLowerCase()?"["+o+" ("+l+")]":"["+o+"]",t&&ej.DashboardUtil.contains(t,o,!0)||c.viewType==="Procedures"){r=!0;return}}}),r},t.prototype.isExistColName=function(n,t){var r=this,u=this.dragSurfaceTag.find(".e-data-table"),f=this.id,i=!1;return u.each(function(u,e){for(var o,c,a=$(e).data("e-table"),s=r.getColumnList(a),l=Object.keys(s),h=0;h<s[l].length;h++)if(o=$(e).find("#"+f+"_txtSpan_"+ej.DashboardUtil.escapeSelector(s[l][h].Name)),ej.isNullOrUndefined(t)||!o.is(t)){if(c=o.text(),o.attr("isDuplicate")==="true"&&n.toLowerCase()===c.toLowerCase()){i=!0;return}if(n.toLowerCase()===c.toLowerCase()){i=!0;return}}}),i},t.prototype.onColumnClick=function(n){var t=$(n.target),r=t.attr("name"),s=t.closest("li"),h=$(t).closest(".e-tableName").find(".e-tableSpan").text(),i=s.attr("dataId"),u=this.hasQueryFilter(i,h),f=this.hasExpression(r),e=this.hasDataAssign(i),c=this.dashboardDesigner.locale.alertWindowMesages.columnDisableMessage,o;t.hasClass("e-designer-select")&&(t.hasClass("e-reportdesigner-dataset-column-select")?u||f||e?(o={dataId:i,dataField:r,hasFilter:u,hasExp:f,hasDataAssign:e},ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.RemoveColumn,c,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{event:n,dataInfo:o},instance:this,method:"deselectColumn"})):(t.addClass("e-reportdesigner-dataset-column-deselect").removeClass("e-reportdesigner-dataset-column-select"),t.attr("title","Hide"),t.siblings().last().css("display","none"),this.postColumnUpdate(n,"",null,"visibility")):(t.removeClass("e-reportdesigner-dataset-column-deselect").addClass("e-reportdesigner-dataset-column-select"),t.attr("title","Show"),t.siblings().last().css("display","inline-block"),this.postColumnUpdate(n,"",null,"visibility")))},t.prototype.deselectColumn=function(n,t){n&&($(t.event.target).addClass("e-reportdesigner-dataset-column-deselect").removeClass("e-reportdesigner-dataset-column-select"),$(t.event.target).attr("title","Hide"),$(t.event.target).siblings().last().css("display","none"),this.postColumnUpdate(t.event,"",null,"visibility"),this.updateDataFields(t.dataInfo))},t.prototype.removedInvalidExpressions=function(n){for(var i=[],t=this.queryExp.length-1;t>=0;t--)(this.queryExp[t].name===n||this.queryExp[t].expression.indexOf("["+n+"]")>-1)&&(i.push(this.queryExp[t].name),this.queryExp.splice(t,1));if(i.length>0)for(t=i.length-1;t>=0;t--)this.removedInvalidExpressions(i[t])},t.prototype.updateDataFields=function(n){var i,u,f,r,e,t;if(n.hasDataAssign)for(i=ej.DashboardUtil.getAllWidgets(),t=0;t<i.length;t++)if(i[t].dataGroupInfo.DatasetId===this.dataset.Id)for(u=0;u<i[t].dataGroupInfo.Values.length;u++)for(f=i[t].dataGroupInfo.Values[u],r=0;r<f.Values.length;r++)f.Values[r].DataId===n.dataId&&f.Values.splice(r,1);if(n.hasExp&&!ej.isNullOrUndefined(this.queryExp)&&this.queryExp.length>0){for(e=[],t=this.queryExp.length-1;t>=0;t--)n.dataField&&ej.DashboardUtil.contains(this.queryExp[t].expression,n.dataField,!0)&&(e.push(this.queryExp[t].name),this.queryExp.splice(t,1));for(t=0;t<e.length;t++)this.removedInvalidExpressions(e[t])}if(n.hasFilter&&!ej.isNullOrUndefined(this.queryFilter)&&this.queryFilter.length>0)for(t=this.queryFilter.length-1;t>=0;t--)(n.dataId===this.queryFilter[t].Id||!ej.isNullOrUndefined(this.queryFilter[t].BooleanFilterSchemaInfo)&&this.queryFilter[t].BooleanFilterSchemaInfo.IsTopNApplied&&this.queryFilter[t].BooleanFilterSchemaInfo.TopNFilterConditionInfo.ColumnId===n.dataId||!ej.isNullOrUndefined(this.queryFilter[t].DimensionFilterSchemaInfo)&&this.queryFilter[t].DimensionFilterSchemaInfo.IsTopNApplied&&this.queryFilter[t].DimensionFilterSchemaInfo.TopNFilterConditionInfo.ColumnId===n.dataId||!ej.isNullOrUndefined(this.queryFilter[t].DateFilterSchemaInfo)&&this.queryFilter[t].DateFilterSchemaInfo.IsTopNApplied&&this.queryFilter[t].DateFilterSchemaInfo.TopNFilterConditionInfo.ColumnId===n.dataId)&&this.queryFilter.splice(t,1)},t.prototype.postColumnUpdate=function(n,t,i,r,u){for(var l,e,o,b,s=$(n.target),v=$(n.target).closest(".e-data-table").data("e-table").name,y=$(n.target).closest(".e-data-table").data("e-table").schema,p=$(n.target).closest(".e-data-table").data("e-table").id,w=$(n.target).closest(".e-data-table").data("e-table").schema,h=s.closest("li").text(),a,c=this.tableType,f=0;f<c.length;f++)if(ej.isNullOrUndefined(this.renameColVal)&&h===c[f].Name||this.renameColVal===c[f].Name){a=c[f].ID;ej.DashboardUtil.isEmptyString(t)||s.closest("li").attr("name",t);break}if(r==="nameEdit"?(h=this.renameColVal,l=$(n.currentTarget).siblings("span.e-query-selection").hasClass("e-reportdesigner-dataset-column-select")?!0:!1):l=r==="typeEdit"?$(n.currentTarget).siblings("span.e-query-selection").hasClass("e-reportdesigner-dataset-column-select")?!0:!1:s.hasClass("e-reportdesigner-dataset-column-select")?!0:!1,e=s.closest("li").attr("datatype"),this.datasourceInfo.ConnectionProperties.DataProvider===this.dashboardDesigner.locale.dataSource.dataSourceType.postgres&&i==="Date"&&(e==="Boolean"||e==="String"))e==="Boolean"?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.alertDialog,this.dashboardDesigner.locale.alertWindowMesages.columnFormattingMessageforBool,IconType.errors,AlertType.Alert,!1,""):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.alertDialog,this.dashboardDesigner.locale.alertWindowMesages.columnFormattingMessageforString,IconType.errors,AlertType.Alert,!1,"");else if(o=[],i!=null?o.push({ColumnName:h,Id:a,AliasName:t,IsVisible:l,DataType:i}):o.push({ColumnName:h,Id:a,AliasName:t,IsVisible:l,DataType:e}),ej.isNullOrUndefined(u))b=JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.columnFormatting,dataSet:this.dataset.Id,tableName:v,tableSchema:y,tableId:p,schema:w,columnInfo:o,format:r}),this.updatePreview(b);else{var k=$("#"+this.id+"_ds_tableMenu").data("ejMenu"),d=this.isAggregateTypeChange($(u.element).closest("li").attr("itemType")),g={tableName:v,tableSchema:y,tableId:p,schema:w,columnInfo:o,format:r};this.setDataType(u,k._targetEjElement,d,g)}},t.prototype.updatePreview=function(n){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.columnFormatting,data:n},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]})},t.prototype.activeNode=function(n,t){t?(n.addClass("e-table-user-selection-active"),n.find("span").addClass("e-table-user-selection-active"),n.find(".e-settings").css("display","block")):(n.removeClass("e-table-user-selection-active"),n.find("span").removeClass("e-table-user-selection-active"),n.find(".e-settings").css("display","none"))},t.prototype.calcScrollTop=function(n,t){for(var e=t.outerHeight(),r=t.find("li"),u=0,f=n,i=0;i<f;i++)u+=r.eq(i).outerHeight();return u-(e-r.eq(f).outerHeight())/2},t.prototype.listKeyDown=function(n,t){var e=t.keyCode,u,i,r,f;return e===40?(i=void 0,r=$(n).find("li.e-table-user-selection-active"),r.length>0?(this.activeNode(r,!1),u=r.next(),u.length>0?(i=u,this.activeNode(u,!0)):(i=$(n).find("li").eq(0),this.activeNode(i,!0))):(i=$(n).find("li").eq(0),this.activeNode(i,!0)),$(t.currentTarget).data("ejScroller").setModel({scrollTop:this.calcScrollTop(i.index(),n)}),t.preventDefault(),!1):e===38?(i=void 0,r=$(n).find("li.e-table-user-selection-active"),r.length>0?(this.activeNode(r,!1),f=r.prev(),f.length>0?(i=f,this.activeNode(f,!0)):(i=$(n).find("li").last(),this.activeNode(i,!0))):(i=$(n).find("li").last(),this.activeNode(i,!0)),$(t.currentTarget).data("ejScroller").setModel({scrollTop:this.calcScrollTop(i.index(),n)}),t.preventDefault(),!1):void 0},t.prototype.showQueryEditor=function(n){n?(this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_join"),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_filter"),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_exp"),$("#"+this.id+"_table_schemaArea").css("display","none"),this.designSwitcher.css("display","none"),this.queryEditorTag.css("display","block"),this.dragSurfaceTag.css("display","none"),this.updateEditorSize()):(this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_join"),this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_filter"),this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_exp"),$("#"+this.id+"_table_schemaArea").css("display","inline-block"),this.designSwitcher.css("display","block"),this.queryEditorTag.css("display","none"),this.dragSurfaceTag.css("display","block"),this.resetSize())},t.prototype.confirmExecution=function(n){var t=null,i;n&&(this.dashboardDesigner.isExecute=n,i=ej.DashboardUtil.parseQuery(t),t=this.getQueryText(),t!==""&&(this.dragSurfaceTag.find(".e-data-table").remove(),this.executeTempQuery(t)))},t.prototype.confirmSwitcher=function(n){n?(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.switchtoDesignView,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.switchtoDesignView,dataSetId:this.dataset.Id})},{}),this.showLoadMoreOpt(!1),this.showNoRecord(!0),this.showLoadRecordMsg(!1),this.setQueryText(""),this.dragSurfaceTag.find(".e-data-table").remove(),this.showTableHint(this.dragSurfaceTag.find(".e-data-table").length),this.queryJoiner=[],this.queryExp=[],this.queryFilter=[],this.commandMode=this.dragSurfaceTag.find(".e-Stored.Procedures").length>0?CommandMode.Procedure:CommandMode.Text,this.dashboardDesigner.isExecute=!1,this.codeSwitcher(!1),this.defaultQuery=null):this.codeChkSwitcher.prop("checked",!0)},t.prototype.codeSwitcher=function(n){n?(this.showLoadRecordMsg(!0),this.showNoRecord(!0),this.showLoadMoreOpt(0),this.queryEditorTag.css("display","block"),this.dragSurfaceTag.css("display","none"),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_join"),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_filter"),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_exp"),this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_run")):(this.dragSurfaceTag.css("display","block"),this.queryEditorTag.css("display","none"),this.updateToolbarItems())},t.prototype.renderText=function(n){for(var t="",u=this.queryEditorTag,i=this.getColumnList(n),f=Object.keys(i),r=0;r<i[f].length;r++)t+=(t?",":"")+n.schema+"."+n.name+"."+i[f][r].Name;t="Select "+t+" From "+n.schema+"."+n.name;u.text(u.text()+t)},t.prototype.updateToolbarItems=function(){var n=this.dragSurfaceTag.find(".e-data-table");n.length===0?(this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_filter"),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_exp")):(this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_filter"),this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_exp"));n.length>1?this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_join"):this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_join");this.dragSurfaceTag.is(":visible")&&n.length>0||this.dragSurfaceTag.is(":hidden")?this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_run"):this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_run");this.commandMode===CommandMode.Procedure&&(this.designSwitcher.attr("disabled","true").css("opacity",".3"),this.codeChkSwitcher.attr("disabled","true"))},t.prototype.enableDataSourceDwn=function(n){n?this.ejDrpdwnData.enable():this.ejDrpdwnData.disable()},t.prototype.isEnableCodeSwticher=function(n,t){return(n.ConnectionProperties.DataProvider==="SQL"||n.ConnectionProperties.DataProvider==="AzureSQLDataWarehouse"||n.ConnectionProperties.DataProvider==="PostgreSQL"||n.ConnectionProperties.DataProvider==="Oracle"||n.ConnectionProperties.DataProvider==="Redshift"||n.ConnectionProperties.DataProvider==="MySQL"||n.ConnectionProperties.DataProvider==="File"||n.ConnectionProperties.DataProvider==="WEB"||n.ConnectionProperties.DataProvider==="MariaDB"||n.ConnectionProperties.DataProvider==="MemSQL"||n.ConnectionProperties.DataProvider==="AmazonAuroraMySQL"||n.ConnectionProperties.DataProvider==="AmazonAuroraPostgreSQL"||n.ConnectionProperties.DataProvider==="GoogleCloudMySQL"||n.ConnectionProperties.DataProvider==="GoogleCloudPostgreSQL")&&t!==CommandMode.Procedure},t.prototype.enableToolbarItems=function(n){if(n){var t=this.dragSurfaceTag.find(".e-data-table");ej.DashboardUtil.buttonEnable(this.btnSaveTag,!0);ej.DashboardUtil.buttonEnable(this.btnContinueToDashboardTag,!0);this.schemaHeader.removeAttr("disabled").css("opacity","1");this.isEnableCodeSwticher(this.datasourceInfo,this.commandMode)?(this.designSwitcher.removeAttr("disabled").css("opacity","1"),this.codeChkSwitcher.removeAttr("disabled")):this.ejQueryTool.disableItemByID(this.id+"_code_switcher");$("#"+this.id+"_dataset_txt").removeAttr("disabled").css("opacity","1");t.length>0&&!this.queryEditorTag.is(":visible")&&(this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_filter"),this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_exp"));this.enableEditConnection(!0);t.length>1&&!this.queryEditorTag.is(":visible")&&this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_join");(this.dragSurfaceTag.is(":visible")&&t.length>0||this.dragSurfaceTag.is(":hidden"))&&this.ejQueryTool.enableItemByID(this.id+"_dataset_tool_run")}else ej.DashboardUtil.buttonEnable(this.btnSaveTag,!1),ej.DashboardUtil.buttonEnable(this.btnContinueToDashboardTag,!1),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_filter"),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_join"),this.enableEditConnection(!1),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_run"),this.ejQueryTool.disableItemByID(this.id+"_dataset_tool_exp"),$("#"+this.id+"_dataset_txt").attr("disabled","true").css("opacity",".3"),this.codeChkSwitcher.attr("disabled","true"),this.schemaHeader.attr("disabled","true").css("opacity",".3"),this.designSwitcher.attr("disabled","true").css("opacity",".3")},t.prototype.toolbarClick=function(n){var t=n.event.target,i;$(t).hasClass("e-reportdesigner-toolbarli")&&(t=$(t).find("span"));$(t).hasClass("e-reportdesigner-toolbar-run")?(i=this.triggerEvents("toolbarClick",{target:t,click:"Execute"}),i||this.executeQuery()):$(t).hasClass("e-reportdesigner-toolbar-join")?(i=this.triggerEvents("toolbarClick",{target:t,click:"Join"}),i||this.openJoinEditor()):$(t).hasClass("e-reportdesigner-dataset-filter")?(i=this.triggerEvents("toolbarClick",{target:t,click:"Filter"}),i||this.openInitialFilter()):$(t).hasClass("e-reportdesigner-toolbar-exp")?(i=this.triggerEvents("toolbarClick",{target:t,click:"Expression"}),i||this.openQueryExpression()):this.triggerEvents("toolbarClick",{target:event,click:"External"})},t.prototype.openJoinEditor=function(){var n=ej.DashboardUtil.getQueryInstance("QueryJoiner");n.showQueryJoiner(this.queryJoiner,!0,$.proxy(this.joinerActionRes,this))},t.prototype.openQueryExpression=function(){var n=ej.DashboardUtil.getQueryInstance("QueryExpression");n.openExpression(this.queryExp,this.datasourceInfo.ConnectionProperties.DataProvider)},t.prototype.openInitialFilter=function(){var n=ej.DashboardUtil.getQueryInstance("QueryFilter");n.openQueryFilterDialog()},t.prototype.enableDataSourceDrp=function(){this.model.dataSources&&this.model.dataSources.length>0?this.ejDrpdwnData.enable():this.ejDrpdwnData.disable()},t.prototype.updateToolbar=function(){var n=this.model.toolbarSettings;this.showToolBar(n.showToolbar);this.showDataSourceDdn(n.items&ej.QueryDesigner.ToolbarItems.SelectDataSource);this.showDataSetName(n.items&ej.QueryDesigner.ToolbarItems.InputDataSet);this.showExecuteQuery(n.items&ej.QueryDesigner.ToolbarItems.Execute);this.showTableJoiner(n.items&ej.QueryDesigner.ToolbarItems.Join);this.showTableExp(n.items&ej.QueryDesigner.ToolbarItems.Expression);this.showTableFilter(n.items&ej.QueryDesigner.ToolbarItems.Filter);this.showCodeSwitcher(n.items&ej.QueryDesigner.ToolbarItems.Switcher);this.showSaveBtn(n.items&ej.QueryDesigner.ToolbarItems.Save);this.showCancelBtn(n.items&ej.QueryDesigner.ToolbarItems.Cancel)},t.prototype.enableToolbar=function(n){n?(this.ejQueryTool.enable(),ej.DashboardUtil.buttonEnable(this.btnSaveTag,!0),ej.DashboardUtil.buttonEnable(this.btnContinueToDashboardTag,!0)):(this.ejQueryTool.disable(),ej.DashboardUtil.buttonEnable(this.btnSaveTag,!1),ej.DashboardUtil.buttonEnable(this.btnContinueToDashboardTag,!1))},t.prototype.enableEditConnection=function(n){n?this.btnEditConnection.css("opacity","1").removeAttr("disabled"):this.btnEditConnection.css("opacity",".3").attr("disabled","disabled")},t.prototype.showToolBar=function(n){this.designToolbar.css("display",n?"block":"none")},t.prototype.showDataSourceDdn=function(n){$("#"+this.id+"_table_select_data").css("display",n?"block":"none")},t.prototype.showDataSetName=function(n){$("#"+this.id+"_table_edit_dataset").css("display",n?"block":"none")},t.prototype.showExecuteQuery=function(n){$("#"+this.id+"_dataset_tool_run").css("display",n?"block":"none")},t.prototype.showTableJoiner=function(n){$("#"+this.id+"_dataset_tool_join").css("display",n?"block":"none")},t.prototype.showTableExp=function(n){$("#"+this.id+"_dataset_tool_exp").css("display",n?"block":"none")},t.prototype.showTableFilter=function(n){$("#"+this.id+"_dataset_tool_filter").css("display",n?"block":"none")},t.prototype.showCodeSwitcher=function(n){$("#"+this.id+"_design_switcher").css("display",n?"block":"none")},t.prototype.showEditConnectionBtn=function(){var n=this.datasourceInfo&&this.datasourceInfo.ConnectionProperties?this.datasourceInfo.ConnectionProperties.DataProvider:"SQL";switch(n){case"SQL":case"AzureSQLDataWarehouse":case"MongoDB":case"PostgreSQL":case"Redshift":case"Oracle":case"File":case"MySQL":case"AmazonAuroraMySQL":case"AmazonAuroraPostgreSQL":case"GoogleCloudMySQL":case"GoogleCloudPostgreSQL":case"MariaDB":case"MemSQL":case"WEB":case"Salesforce":$("#"+this.id+"_div_dataset_editconnection").css("visibility","visible");break;default:$("#"+this.id+"_div_dataset_editconnection").css("visibility","hidden")}},t.prototype.showSaveBtn=function(n){$("#"+this.id+"_div_dataset_save").css("display",n?"inline-block":"none")},t.prototype.showCancelBtn=function(n){$("#"+this.id+"_div_dataset_close").css("display",n?"inline-block":"none")},t.prototype.getDesignerParameters=function(){var r=[],i,t,n;if(this.queryFilter&&this.queryFilter.length>0)for(i=0;i<this.queryFilter.length;i++)this.queryFilter[i].IsQueryParameter&&(t=this.queryFilter[i],n=t.ParameterName,n.Parameter1&&n.Parameter1.length>0&&r.push({Name:n.Parameter1,DataType:t.DataType,Value:t.Value.Value1}),n.Parameter2&&n.Parameter2.length>0&&r.push({Name:n.Parameter2,DataType:t.DataType,Value:t.Value.Value2}));return r},t.prototype.executeReconnectUIQuery=function(n,t,i){var u={},r=this.buildSQLStatement(!0,u);u.hasColumns&&r&&r.length>0?this.executeReconnectTempQuery(r,n,t,i):(this.showLoadMoreOpt(!1),this.showNoRecord(!0),this.showLoadRecordMsg(!1))},t.prototype.executeUIQuery=function(n){var i={},t=this.buildSQLStatement(!0,i);i.hasColumns&&t&&t.length>0&&!this.editDataSource?this.executeTempQuery(t,n):(this.showLoadMoreOpt(!1),this.showNoRecord(!0),this.showLoadRecordMsg(!1))},t.prototype.postRemovedTable=function(){var u=this.dataset.Name,f=this.buildSQLStatement(!0,{}),i=[],n,r,t;if(this.queryJoiner.length>=1)for(n=0;n<this.queryJoiner.length;n++){for(r=[],i.push({JoinType:this.queryJoiner[n].join,LeftTableId:this.queryJoiner[n].leftTable,RightTableId:this.queryJoiner[n].rightTable}),t=0;t<this.queryJoiner[n].fields.length;t++)r.push({Condition:this.queryJoiner[n].fields[t].condition,LeftTableFieldId:this.queryJoiner[n].fields[t].leftField,RightTableFieldId:this.queryJoiner[n].fields[t].rightField,Operator:this.queryJoiner[n].fields[t].operator,IsValueChecked:this.queryJoiner[n].fields[t].isValueChecked,Value:this.queryJoiner[n].fields[t].value});i[n].JoinedFields=r}f.length===0?(this.showLoadMoreOpt(!1),this.showNoRecord(!0),this.showLoadRecordMsg(!1),ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.executeQuery,tableName:this.removedTableName||"",tableSchema:this.removedTableSchemaName||"",dataSetName:u,dataSetId:this.dataset.Id,selectedItem:this.tableItems,joinInfo:i,action:"close"})},{})):this.ajaxPostCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.executeQuery,tableName:this.removedTableName||"",tableSchema:this.removedTableSchemaName||"",dataSetName:u,dataSetId:this.dataset.Id,selectedItem:this.tableItems,joinInfo:i,action:"close"})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]}))},t.prototype.executeQuery=function(){var n=null;this.queryEditorTag.is(":visible")?this.isSQLProvider(this.datasourceInfo)?this.dragSurfaceTag.find(".e-data-table").length!==0?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SwitchDataView,this.dashboardDesigner.locale.alertWindowMesages.tableViewMessage,IconType.warning,AlertType.Confirm,!1,"",{instance:this,method:"confirmExecution"}):this.confirmExecution(!0):this.connectData(!1):(this.showLoadMoreOpt(!0),n=this.buildSQLStatement(!0),this.executeTempQuery(n))},t.deleteDataSet=function(n,t){var i=ejDashboardDesigner.getInstance("DataSet");ej.DashboardUtil.getInstance().doAjaxPost("POST",t+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.deleteDataSet,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.deleteDataSet,dataSetId:n})},{fnction:$.proxy(i.removeDataSetItem,this,n)})},t.prototype.executeReconnectTempQuery=function(n,t,i,r){var u=this.dragSurfaceTag.find(".e-data-table"),y=this.dataset.Name,f,s,e,h,c,l,a,v=!1,o;this.queryEditorTag.is(":visible")?(v=!0,f="",e=""):(v=!1,f=$(u[u.length-1]).data("e-table").name,a=$(u[u.length-1]).data("e-table").viewType,e=$(u[u.length-1]).data("e-table").id,s=$(u[u.length-1]).data("e-table").schema,h=$(u[u.length-1]).data("e-table").isShared,c=$(u[u.length-1]).data("e-table").sourceId,l=$(u[u.length-1]).data("e-table").displayName);this.addedTableNames.push(f);o=[];ej.isNullOrUndefined(r)&&(o=[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]);this.ajaxPostCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getTableFields,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getTableFields,datasource:this.encrptDataSourceInfo(this.datasourceInfo),parameters:this.getParameters(!1),tableName:f,tableSchema:s,tableId:e,dataSetName:y,dataSetId:this.dataset.Id,IsReconnect:!0,isShared:h,sourceId:c,alias:l,category:a})},{fnction:$.proxy(this.updatePreviewGridData,this,t,i),indicator:o}))},t.prototype.updatePreviewGridData=function(n,t,i){for(var c,l,p,h,w,b,r,o,e,f=JSON.parse(i.data),a=this.queryExp,v=this.queryFilter,s=this.queryJoiner,y=!1,nt=ej.DashboardUtil.getQueryInstance("QueryFilter"),u=a.length-1;u>=0;u--){for(c=!1,r=0;r<f.length;r++)if(a[u].name===f[r].Name){c=!0;break}c||this.queryExp.splice(u,1)}for(u=v.length-1;u>=0;u--){for(l=!1,r=0;r<f.length;r++)if(v[u].Id===f[r].ID){l=!0;break}l||(this.queryFilter.splice(u,1),nt.deleteFilter(u))}for(p=JSON.parse(i.ValidTables),r=this.dataset.Query.QueryDesignerState.Tables.length-1;r>=0;r--)h=this.dataset.Query.QueryDesignerState.Tables[r],p.indexOf(h.Id)===-1&&(y=!0,w={schema:h.Schema,name:h.Name,viewType:"Tables"},this.nodeTableRemover(w),this.dataset.Query.QueryDesignerState.Tables.splice(r,1));if(y&&(b=this.dragSurfaceTag.context.childNodes.length,this.dragSurfaceTag.context.childNodes[b-1].remove()),this.dataset.Query.QueryDesignerState.Tables.length===1)this.queryJoiner=[];else for(r=s.length-1;r>=0;r--){for(o=s[r].fields.length-1;o>=0;o--){var k=s[r].fields,d=!1,g=!1;for(e=0;e<f.length;e++)if(f[e].ID===k[o].leftField){d=!0;break}for(e=0;e<f.length;e++)if(f[e].ID===k[o].rightField){g=!0;break}d&&g||this.queryJoiner[r].fields.splice(o,1)}s[r].fields.length===0&&this.queryJoiner.splice(r,1)}this.dragSurfaceTag.context.childNodes.length<this.dataset.Query.QueryDesignerState.Tables.length?this.renderReconnectTable(this.dataset.Query.QueryDesignerState,n,t):this.ajaxPostCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.editDataSet,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.editDataSet,dataSetName:this.dataset.Name,dataSetId:this.dataset.Id})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]}))},t.prototype.executeTempQuery=function(n,t){var h=null,i=this.dragSurfaceTag.find(".e-data-table"),o=this.dataset.Name,f,s,e,c=!1,a,v,p,y,l=[],r,w,u,k,b;if(this.queryEditorTag.is(":visible")?(c=!0,f="",e=""):(c=!1,f=$(i[i.length-1]).data("e-table").name,y=$(i[i.length-1]).data("e-table").viewType,e=$(i[i.length-1]).data("e-table").id,s=$(i[i.length-1]).data("e-table").schema,a=$(i[i.length-1]).data("e-table").isShared,v=$(i[i.length-1]).data("e-table").sourceId,p=$(i[i.length-1]).data("e-table").displayName),this.queryJoiner.length>=1)for(r=0;r<this.queryJoiner.length;r++){for(w=[],l.push({JoinType:this.queryJoiner[r].join,LeftTableId:this.queryJoiner[r].leftTable,RightTableId:this.queryJoiner[r].rightTable}),u=0;u<this.queryJoiner[r].fields.length;u++)w.push({Condition:this.queryJoiner[r].fields[u].condition,LeftTableFieldId:this.queryJoiner[r].fields[u].leftField,RightTableFieldId:this.queryJoiner[r].fields[u].rightField,Operator:this.queryJoiner[r].fields[u].operator,IsValueChecked:this.queryJoiner[r].fields[u].isValueChecked,Value:this.queryJoiner[r].fields[u].value});l[r].JoinedFields=w}this.isEditMode?h=ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.editDataSet,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.editDataSet,dataSetName:o,dataSetId:this.dataset.Id})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]}):this.isNewTableAdded?(k={query:n,tableName:f,tableSchema:s,tableId:e,datasetName:o,isCodeView:c,joinInfoList:l,isShared:a,sourceId:v},this.addedTableNames.push(f),b=[],ej.isNullOrUndefined(t)&&(b=[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]),h=ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getTableFields,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getTableFields,datasource:this.encrptDataSourceInfo(this.datasourceInfo),parameters:this.getParameters(!1),tableName:f,tableSchema:s,tableId:e,dataSetName:o,dataSetId:this.dataset.Id,isShared:a,sourceId:v,alias:p,category:y})},{fnction:$.proxy(this.joinTable,this,k,t),indicator:b},!0),this.isNewTableAdded=!1,this.isJoin=!1):this.isJoin&&!this.isNewTableAdded?(h=ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.addNewTable,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.addNewTable,dataSetName:o,dataSetId:this.dataset.Id,joinInfo:l,parameters:this.getParameters(!1),tableName:f,tableSchema:s,tableId:e,addProcedure:!1,isShared:a,sourceId:v,alias:p,category:y})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]}),this.isJoin=!1):h=this.isInitialFilterApplied?ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.initialFilterAction,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.initialFilterAction,datasource:this.encrptDataSourceInfo(this.datasourceInfo),sqlQuery:n,parameters:this.getParameters(!1),tableName:f,tableSchema:s,tableId:e,dataSetName:o,dataSetId:this.dataset.Id,isCodeView:c,filter:this.queryFilter,isInitialFilter:this.isInitialFilterApplied})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]}):ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.executeQuery,datasource:this.encrptDataSourceInfo(this.datasourceInfo),sqlQuery:n,commandType:this.commandMode,parameters:this.getParameters(!1),tableName:f,tableSchema:s,tableId:e,dataSetName:o,dataSetId:this.dataset.Id,isCodeView:c,filter:this.queryFilter,isInitialFilter:this.isInitialFilterApplied,joinInfo:l,category:y})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]});this.ajaxPostCollection.push(h)},t.prototype.switcherChanged=function(){var n=null,t;if(this.codeChkSwitcher.is(":checked")){this.codeSwitcher(!0);this.commandMode=CommandMode.Text;t=this.dragSurfaceTag.find(".e-data-table");this.commandMode=this.dragSurfaceTag.find(".e-Stored.Procedures").length>0?CommandMode.Procedure:CommandMode.Text;var r=this.dataset.Name,i=void 0,u=void 0;this.queryEditorTag.is(":visible")?(i="",ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.codeView,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.codeView,datasource:this.encrptDataSourceInfo(this.datasourceInfo),commandType:this.commandMode,parameters:this.getParameters(!1),tableName:i,dataSetName:r,type:"SwitchCodeView"})},{fnction:$.proxy(this.sqlQuery,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]})):(i=$(t).data("e-table").name,u=$(t).data("e-table").id)}else this.dashboardDesigner.isExecute?(n=this.getQueryText(),n!==""?(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SwitchDataView,this.dashboardDesigner.locale.alertWindowMesages.visualDesignerMsgOnQuery,IconType.warning,AlertType.Alert,!1,null),this.confirmSwitcher(!1)):this.confirmSwitcher(!0)):(n=this.getQueryText(),ej.isNullOrUndefined(this.defaultQuery)&&n.replace(/\s+/g,"")!==""||!ej.isNullOrUndefined(this.defaultQuery)&&n.replace(/\s+/g,"")!==this.defaultQuery.replace(/\s+/g,"")&&n!==""?(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SwitchDataView,this.dashboardDesigner.locale.alertWindowMesages.visualDesignerSwitcherMsg,IconType.warning,AlertType.Alert,!1,null),this.confirmSwitcher(!1)):(this.setQueryText(""),this.codeSwitcher(!1),this.defaultQuery=null,this.commandMode=this.dragSurfaceTag.find(".e-Stored.Procedures").length>0?CommandMode.Procedure:CommandMode.Text))},t.prototype.sqlQuery=function(n){this.codeSwitcher(!0);this.setQueryText(n);this.defaultQuery=n},t.prototype.getProcParams=function(){var n=ej.DashboardUtil.getQueryInstance("StoreParameter");return n.getProcParams()},t.prototype.getQueryParameters=function(){var n=ej.DashboardUtil.getQueryInstance("QueryParameter");return n.getQueryParams()},t.prototype.getParameters=function(n){var t=this.queryEditorTag,i=ej.DashboardUtil.getQueryInstance("QueryParameter");return this.commandMode===CommandMode.Procedure?this.getProcParams():t.css("display")!=="block"?this.getDesignerParameters():n?i.getQueryParameters(this.selectTopNQuery(this.getQueryText())):this.getQueryParameters()},t.prototype.selectTopNQuery=function(n){return this.isSQLProvider(this.datasourceInfo)?"select * from ("+n+") table1":n},t.prototype.connectData=function(n){if(this.datasourceInfo.ConnectionProperties.IntegratedSecurity||this.datasourceInfo.SecurityType===0||this.datasourceInfo.SecurityType==="None"||this.datasourceInfo.SecurityType==="oauth"||!(ej.isNullOrUndefined(this.datasourceInfo.ConnectionProperties.UserName)||this.datasourceInfo.ConnectionProperties.UserName.length===0||ej.isNullOrUndefined(this.datasourceInfo.ConnectionProperties.PassWord)||this.datasourceInfo.ConnectionProperties.PassWord.length===0))n?this.excuteQrySchema(this.getQueryText()):this.excuteQryWithParams();else{var t=this.credentials&&(this.credentials.length>0||Object.keys(this.credentials).length>0)?this.credentials[this.datasourceInfo.Name]:null;t&&t.UserName&&t.UserName.length>0&&t.PassWord&&t.PassWord.length>0?(this.datasourceInfo.ConnectionProperties.PassWord=t.PassWord,this.datasourceInfo.ConnectionProperties.UserName=t.UserName,n?this.excuteQrySchema(this.getQueryText()):this.excuteQryWithParams()):this.credentialWin.openCredentialDialog(this.datasourceInfo.Name,this.datasourceInfo,this,n?"excuteOtherProviderQrySchema":"excuteQryData")}},t.prototype.excuteQryData=function(){this.datasourceInfo=this.datasourceInfo;this.excuteQryWithParams()},t.prototype.excuteQryWithParams=function(){var n=this.getQueryText(),t;!ej.isNullOrUndefined(n)&&n.length>0&&(t=ej.DashboardUtil.getQueryInstance("QueryParameter"),t.showQueryDialog(n,this.queryInputVals))},t.prototype.setSQLHint=function(){var t,e,i,n,r,u,f;if(this.codeEditor)try{for(t={},e=Object.keys(this.dbSchema.Schemas),i=0;i<e.length;i++)n=this.dbSchema.Schemas[e[i]],r=Object.keys(n.Tables),r&&r.length>0&&this.setSQLHintTables(n.Tables,r,t),u=Object.keys(n.Viewes),u&&u.length>0&&this.setSQLHintTables(n.Viewes,u,t),f=Object.keys(n.Procedures),f&&f.length>0&&this.setSQLHintTables(n.Procedures,f,t);this.codeEditor.setOption("hintOptions",{tables:t})}catch(o){}},t.prototype.setSQLHintTables=function(n,t,i){var r,o,u,e,f;if(t&&t.length>0)for(r=0;r<t.length;r++)if(o=n[t[r]],u=Object.keys(o),u&&u.length>0){for(e=[],f=0;f<u.length;f++)e.push(u[f]);i[t[r]]=e}else i[t[r]]=[]},t.prototype.getQueryText=function(){return this.codeEditor?this.codeEditor.getValue():this.sqlEditor.getQuery()},t.prototype.setQueryText=function(n){ej.isNullOrUndefined(n)&&(n="");this.codeEditor?this.codeEditor.setValue(n):this.sqlEditor.setQuery(n)},t.prototype.previewData=function(n){var i,t;this.setColumnFieldId(n.type);n&&n.table&&n.type&&(i=ej.DashboardUtil.getQueryInstance("QueryJoiner"),i.setAvailableTable(n.type),t=this,this.previewTO&&clearTimeout(this.previewTO),this.showPreviewIndicator(),this.previewTO=setTimeout(function(){var r=JSON.parse(n.table),i,o;t.tableType=JSON.parse(n.type);var u=[],f=[],e=t.previewHeader.width(),s=150*t.tableType.length>e?150:(e-20)/t.tableType.length;for(i=0;i<t.tableType.length;i++)u.push({field:t.tableType[i].ID,headerText:t.tableType[i].Name,width:s,textAlign:t.getAlignType(t.tableType[i].DataType),type:t.getType(t.tableType[i].DataType)}),f.push(t.tableType[i].ID);for(i=f.length-1;i>=0;i--)(r.length>0&&Object.keys(r[0]).indexOf(f[i])===-1||r.length===0&&t.tableType[i].IsVisible===!1)&&u.splice(i,1);u.length>0?(t.showNoRecord(!1),t.ejPreviewGrid.option("dataSource",[]),t.ejPreviewGrid.getScrollObject().setModel({scrollLeft:0,scrollTop:0}),t.ejPreviewGrid.option("columns",u),t.ejPreviewGrid.option("dataSource",r),t.ejPreviewGrid.element.find(".e-table").css("width","100%"),o=r.length+" Record"+(r.length>1?"s":"")+" Retrieved",$("#"+t.id+"_record_count").text(o),t.showLoadMoreOpt(r.length===100)):t.showNoRecord(!0);t.hidePreviewIndicator()},500,n));!ej.isNullOrUndefined(n.HasError)&&n.HasError&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.errorMessage.failedToPreviewTable,IconType.errors,AlertType.Alert,!0,n.Message);this.isEditMode=!1},t.prototype.joinTable=function(n,t,i){var u,r,f,e;i&&!ej.isNullOrUndefined(i.Message)&&(i.Message.indexOf("Sf_Exception")!==-1||i==="Not Found")?(r=ej.DashboardUtil.getQueryInstance("QueryJoiner"),r.selectedTableInfo(t,i.StatusMessage,$.proxy(this.joinerActionRes,this))):(u=this.element.find("#"+this.id+"_div_dragSurface .e-data-table"),r=ej.DashboardUtil.getQueryInstance("QueryJoiner"),r.showCancelBtn(!0),u.length===1?(f=void 0,f=$(u[u.length-1]).data("e-table").viewType,this.ajaxPostCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.addNewTable,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.addNewTable,datasource:this.encrptDataSourceInfo(this.datasourceInfo),sqlQuery:n.query,commandType:this.commandMode,parameters:this.getParameters(!1),tableName:n.tableName,tableSchema:n.tableSchema,tableId:n.tableId,dataSetName:n.datasetName,dataSetId:this.dataset.Id,isCodeView:n.isCodeView,filter:this.queryFilter,isInitialFilter:this.isInitialFilterApplied,joinInfo:n.joinInfoList,addProcedure:!1,category:f})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]}))):(e=ej.DashboardUtil.getQueryInstance("QueryJoiner"),e.updateQueryJoiner(i,t,$.proxy(this.joinerActionRes,this))))},t.prototype.setColumnFieldId=function(n){if(!ej.isNullOrUndefined(n)){var i=this.element.find("#"+this.id+"_div_dragSurface .e-data-table"),t=JSON.parse(n);i.each(function(n,i){var u=$(i),f=u.data("e-table"),r;if(!ej.isNullOrUndefined(f)&&ej.isNullOrUndefined(u.attr("data-id-loaded"))){for(r=0;r<t.length;r++)t[r].TableId===f.id&&u.find("[aliasName="+ej.DashboardUtil.escapeSelector(t[r].Name)+"]").closest("li").attr("dataId",t[r].ID);u.attr("data-id-loaded","true")}})}},t.prototype.getAlignType=function(n){return n.toLowerCase()==="string"||n.toLowerCase()==="boolean"||n.toLowerCase()==="date"?ej.TextAlign.Left:n.toLowerCase()==="integer"||n.toLowerCase()==="real"?ej.TextAlign.Right:ej.TextAlign.Left},t.prototype.getType=function(n){return n.toLowerCase()==="string"||n.toLowerCase()==="boolean"?"string":n.toLowerCase()==="integer"||n.toLowerCase()==="real"?"number":n.toLowerCase()==="date"?"date":"string"},t.prototype.loadMoreData=function(n){if(this.queryEditorTag.css("display")!=="block"){var t=null;t=this.buildSQLStatement(!1);this.executeTempQuery(t);$(n.target).css("display","none").attr("isClick","true")}},t.prototype.showLoadMoreOpt=function(n){var t=$("#"+this.id+"_load_data");(this.queryEditorTag.is(":visible")||t.attr("isClick")==="true")&&(n=!1);t.css("display",n?"inline-block":"none");t.attr("isClick","false")},t.prototype.showNoRecord=function(n){this.noRecordSpan.css("display",n?"table-cell":"none");this.previewGrid.css("display",n?"none":"block");n&&$("#"+this.id+"_record_count").text("")},t.prototype.showLoadRecordMsg=function(n){this.noRecordSpan.text(n?"Execute to preview records":"No records to display")},t.prototype.updateNoDataInfo=function(){this.dragSurfaceTag.empty();this.showNoRecord(!0);this.showLoadRecordMsg(!1);this.showLoadMoreOpt(!1);this.queryExp=[];this.queryFilter=[];this.queryJoiner=[];this.codeEditor.setValue("")},t.prototype.updatePreviewData=function(){this.showNoRecord(!0);this.showLoadRecordMsg(!0);this.showLoadMoreOpt(!1)},t.prototype.setAggregation=function(n,t){for(var i=0;i<n.length;i++)ej.isNullOrUndefined(n[i].AggregateTye)||t.find("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(n[i].Name)).attr("e-data-aggregate",n[i].AggregateTye)},t.prototype.setColumnType=function(n,t){for(var i=0;i<n.length;i++)ej.isNullOrUndefined(n[i].TypeCast)||t.find("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(n[i].Name)).attr("e-column-type",n[i].TypeCast)},t.prototype.setIconType=function(n,t){for(var r,i=0;i<n.length;i++)ej.isNullOrUndefined(n[i].TypeCast)||(r=t.find("#"+this.id+"_li_"+ej.DashboardUtil.escapeSelector(n[i].Name)),this.updateIconType(n[i].TypeCast,r))},t.prototype.renderReconnectTable=function(n,t,i){var o={},r=n.Tables[$("#"+this.id+"_div_dragSurface")[0].children.length],s={},h={schema:r.Schema,viewType:r.IsView?"Viewes":"Tables",name:r.Name,id:r.Id,displayName:r.Name},u,f,e;for(o[r.Name]=r.Schema,u=0;u<r.Columns.length;u++)s[r.Columns[u].Name]=r.Columns[u];f={top:i,left:t};this.droptable(h,f);this.renderTable(h,f,null,!0,s);e=this.dragSurfaceTag.find(this.getTblSel(r.Schema,r.Name));this.setAggregation(r.Columns,e);this.setColumnType(r.Columns,e);t+=230;this.populateJoinState(n.Joins,o);this.populateQueryFilterState(n.Filters);this.populateExpressionState(n.Expressions);n.Tables&&n.Tables.length>0&&this.executeReconnectUIQuery(t,i)},t.prototype.populateReconnectDesignerState=function(){var n;try{if(this.dataset&&this.dataset.Query&&this.dataset.Query.QueryDesignerState&&(n=this.dataset.Query.QueryDesignerState,n.Tables&&n.Tables.length>0)){var t=10,i=this.dragSurfaceTag.width(),r=n.Tables.length*220+(n.Tables.length-1)*20;r<i&&(t=(i-r)/2);this.renderReconnectTable(n,t,25)}}catch(u){this.codeChkSwitcher.prop("checked",!0);this.codeSwitcher(!0);this.setQueryEditor()}},t.prototype.getTableInfo=function(n){var i=n.Query.QueryDesignerState,l=n.Query.CommandType,a={},f,r,s;if(i.Tables&&i.Tables.length>0){var u=10,h=this.dragSurfaceTag.width(),c=i.Tables.length*220+(i.Tables.length-1)*20;for(c<h&&(u=(h-c)/2),f=0;f<i.Tables.length;f++){var t=i.Tables[f],v={},e={schema:t.Schema,viewType:l===1?"Stored Procedures":t.IsView?"Viewes":"Tables",name:t.Name,displayName:ej.isNullOrUndefined(t.DisplayName)?t.Name:t.DisplayName,id:t.Id,isShared:t.IsShared,sourceId:t.SourceId};for(a[t.Id]=t.Schema,r=0;r<t.Columns.length;r++)v[t.Columns[r].Name]=t.Columns[r];s={top:25,left:u};this.droptable(e,s);u+=230;this.getColumnToRenderTable(e,null,null,!0,n)}}else if(i.StoredProcedure){var u=this.dragSurfaceTag.width()/2-110,o=i.StoredProcedure,e={schema:o.Schema,viewType:"Stored Procedures",name:o.Name,id:o.Id,displayName:o.Name},s={top:25,left:u};this.droptable(e,s);this.getColumnToRenderTable(e,null,null,!0,n)}},t.prototype.populateDesignerState=function(n){var e,r,s,p,h;try{if(n&&n.Query&&n.Query.QueryDesignerState){var i=n.Query.QueryDesignerState,c={},l=[];if(i.Tables&&i.Tables.length>0){var f=10,a=this.dragSurfaceTag.width(),v=i.Tables.length*220+(i.Tables.length-1)*20;for(v<a&&(f=(a-v)/2),e=0;e<i.Tables.length;e++){var t=i.Tables[e],y={},o={schema:t.Schema,viewType:t.IsView?"Viewes":"Tables",name:t.Name,displayName:ej.isNullOrUndefined(t.DisplayName)?t.Name:t.DisplayName,id:t.Id,isShared:t.IsShared,sourceId:t.SourceId};for(c[t.Id]=t.Schema,r=0;r<t.Columns.length;r++)y[t.Columns[r].Name]=t.Columns[r];s={top:25,left:f};p=this.renderTable(o,s,null,!0,y);p?(h=this.dragSurfaceTag.find(this.getTblSel(t.Schema,t.Name)),this.setAggregation(t.Columns,h),this.setColumnType(t.Columns,h),f+=230):(l.push(o),this.resetTableFromDataSet(i,t))}}else if(i.StoredProcedure){var u=i.StoredProcedure,f=this.dragSurfaceTag.width()/2-110,o={schema:u.Schema,viewType:"Stored Procedures",name:u.Name,id:u.Id,displayName:u.Name},s={top:25,left:f};this.renderTableElement(o,s,u,!0)}this.editDataSource=!1;this.populateJoinState(i.Joins,c);this.populateQueryFilterState(i.Filters);this.populateExpressionState(i.Expressions);l.length!==0?this.postRemovedTable():i.Tables&&i.Tables.length>0&&this.executeUIQuery()}}catch(w){ejDashboardDesigner.getInstance("DesignPanel").logError({Source:"Query Designer Render table",Error:w,Type:w.name})}},t.prototype.populateJoinState=function(n){var r,i,u,f,t,e;if(this.queryJoiner=[],n&&n.length>0)for(r=0;r<n.length;r++){for(i=n[r],u={leftTable:i.LeftTable,rightTable:i.RightTable,leftSchema:null,rightSchema:null,join:i.JoinType},u.fields=[],f=0;f<i.JoinFields.length;f++)t=i.JoinFields[f],e={condition:t.Condition,isValueChecked:t.IsValueChecked,operator:t.OperatorType,leftField:t.LeftField,rightField:t.RightField,value:t.Value},u.fields.push(e);this.queryJoiner.push(u)}},t.prototype.populateQueryFilterState=function(n){var e;if(this.queryFilter=[],n&&n.length>0)for(e=0;e<n.length;e++){var t=n[e],f=t.MeasureFilterSchemaInfo,r=t.DimensionFilterSchemaInfo,u=t.BooleanFilterSchemaInfo,i=t.DateFilterSchemaInfo,o={Name:t.Name,Id:t.Id,MeasureFilterSchemaInfo:{ColumnName:f.ColumnName,ColumnId:f.ColumnId,MeasureFilterCondition:f.MeasureFilterCondition,FilterValues:f.FilterValues,IsIncludeNull:f.IsIncludeNull},DimensionFilterSchemaInfo:{ColumnName:r.ColumnName,ColumnId:r.ColumnId,FilterValues:r.FilterValues,DimensionFilterCondition:r.DimensionFilterCondition,IsInclude:r.IsInclude,IsCheckAll:r.IsCheckAll,IsTopNApplied:r.IsTopNApplied,TopNFilterConditionInfo:r.TopNFilterConditionInfo},DateFilterSchemaInfo:{ColumnName:i.ColumnName,ColumnId:i.ColumnId,DateAndTimeFormatCondition:i.DateAndTimeFormatCondition,IsCheckAll:i.IsCheckAll,IsInclude:i.IsInclude,FilterValues:i.FilterValues,IsTopNApplied:i.IsTopNApplied,TopNFilterConditionInfo:i.TopNFilterConditionInfo,DateFormatInfo:i.DateFormatInfo},BooleanFilterSchemaInfo:{ColumnName:u.ColumnName,ColumnId:u.ColumnId,IsNullEnabled:u.IsNullEnabled,IsTrueEnabled:u.IsTrueEnabled,IsFalseEnabled:u.IsFalseEnabled,IsTopNApplied:u.IsTopNApplied,TopNFilterConditionInfo:u.TopNFilterConditionInfo},OperatorType:t.OperatorType,Schema:t.Schema,DataType:t.DataType,TableName:t.TableName,IsTypeCast:t.IsTypeCast,TypeCastValue:t.TypeCastValue,TableId:t.TableId};this.queryFilter.push(o)}},t.prototype.populateExpressionState=function(n){if(this.queryExp=[],n&&n.length>0)for(var t=0;t<n.length;t++)this.queryExp.push({name:n[t].Name,expression:n[t].QueryExp})},t.prototype.saveDesignerState=function(){var h=this,n,r,s,f,e;if(this.dragSurfaceTag.css("display")==="block"){if(n=t.createQueryDesigner(),r=this.dragSurfaceTag.find(".e-data-table"),r.hasClass("Procedures")&&r.length===1){var i=this.createSProcedure(),o=r.data("e-table"),u=this.getProcParams();if(i.Name=o.name,i.Schema=o.schema,i.Columns=this.tableType,i.Id=o.id,s=r.find(".e-reportdesigner-dataset-column"),s.each(function(n,t){i.Columns[n].TypeCast=$(t).attr("e-column-type")}),u&&u.length>0)for(i.Parameters=[],f=0;f<u.length;f++)e=this.createProcParameter(),e.Name=u[f].Name,e.Value=u[f].Value,e.IsNull=u[f].IsNull,e.DataType=u[f].DataType,i.Parameters.push(e);n.StoredProcedure=i}else r.length>0&&(n.Tables=[],r.each(function(i,r){var u=t.createDesignerTable(),f=$(r).data("e-table");u.DisplayName=f.displayName;u.Name=f.name;u.Id=f.id;u.Schema=f.schema;u.IsView=f.viewType==="Tables"?!1:!0;u.Columns=h.getColumnsState($(r));u.IsShared=f.isShared||!1;u.sourceId=f.sourceId;n.Tables.push(u)}),n.Joins=this.getJoinerState());return n.Filters=this.getQueryFilterState(),n.Expressions=this.getExpressionState(),n}return null},t.prototype.getJoinerState=function(){var e=null,u,t,r,f,i,n;if(this.queryJoiner&&this.queryJoiner.length>0)for(e=[],u=0;u<this.queryJoiner.length;u++){for(t=this.createJoin(),r=this.queryJoiner[u],t.LeftTable=r.leftTable,t.RightTable=r.rightTable,t.JoinType=r.join,t.JoinFields=[],f=0;f<r.fields.length;f++)i=r.fields[f],n=this.createJoinField(),n.Condition=i.condition,n.LeftField=i.leftField,n.RightField=i.rightField,n.OperatorType=i.operator,n.IsValueChecked=i.isValueChecked,n.Value=i.value,t.JoinFields.push(n);e.push(t)}return e},t.prototype.getQueryFilterState=function(){var r=[],i,n,t;if(this.queryFilter&&this.queryFilter.length>0)for(i=0;i<this.queryFilter.length;i++)n=new InitialFilterInfo,t=this.queryFilter[i],n.Name=t.Name,n.Id=t.Id,n.MeasureFilterSchemaInfo=t.MeasureFilterSchemaInfo,n.DimensionFilterSchemaInfo=t.DimensionFilterSchemaInfo,n.DateFilterSchemaInfo=t.DateFilterSchemaInfo,n.BooleanFilterSchemaInfo=t.BooleanFilterSchemaInfo,n.OperatorType=t.OperatorType,n.Schema=t.Schema,n.DataType=t.DataType,n.TableName=t.TableName,n.IsTypeCast=t.IsTypeCast,n.TypeCastValue=t.TypeCastValue,n.TableId=t.TableId,r.push(n);return r},t.prototype.getExpressionState=function(){var i=null,n,t;if(this.queryExp&&this.queryExp.length>0)for(i=[],n=0;n<this.queryExp.length;n++)t=this.createExpression(),t.Name=this.queryExp[n].name,t.QueryExp=this.queryExp[n].expression,i.push(t);return i},t.prototype.getColumnsState=function(n){for(var c=[],o=this.id,a=n.data("e-table"),i=this.getColumnList(a),u=Object.keys(i),r=0;r<i[u].length;r++){var f=ej.DashboardUtil.escapeSelector(i[u][r].Name),t=this.createColumn(),s=n.find("#"+o+"_"+f),e=n.find("#"+this.id+"_txtSpan_"+f),l=e.text(),h=null;e.attr("isDuplicate")==="true"?h=/\(([^)]+)\)/.exec(e.text())[1]:l.toLowerCase()!==i[u][r].Name.toLowerCase()&&(h=l);t.Name=i[u][r].Name;t.IsSelected=s.hasClass("e-reportdesigner-dataset-column-select");t.AggregateTye=n.find("#"+o+"_li_"+f).attr("e-data-aggregate");t.IsDuplicate=e.attr("isDuplicate")==="true";t.AliasName=h;t.TypeCast=n.find("#"+o+"_li_"+f).attr("e-column-type");c.push(t);s.attr("title",s.hasClass("e-reportdesigner-dataset-column-select")?"Show":"Hide")}return c},t.prototype.renderEditConnectionWindow=function(){var n=ej.DashboardUtil.getQueryInstance("EditConnection"),t=$("#"+this.id+"_dataset_txt").val();n.openEditConnectionWindow(this.datasourceInfo,t)},t.prototype.saveQueryDataSet=function(){this.isContinueToDashboardbtn="saveDataSource";this.saveDataSourceInformation()},t.prototype.continueToDashboard=function(){this.isContinueToDashboardbtn="ContinueToDashboard";this.saveDataSourceInformation()},t.prototype.saveDataSourceInformation=function(){this.hideResponsiveToolBar();this.saveQueryInfo()},t.prototype.addActivityLogForSaveDS=function(){var n=ejDashboardDesigner.getInstance("DataSource"),t=!ej.isNullOrUndefined(this.datasourceInfo.PublishId)&&this.datasourceInfo.PublishId!==""?this.datasourceInfo.PublishId:null,i=this.isEdit?ActivityLogEvents.Updated:ActivityLogEvents.Saved,r=ej.isNullOrUndefined(this.datasourceInfo.ProviderType)?this.datasourceInfo.ConnectionProperties.DataProvider:this.datasourceInfo.ProviderType;ej.DashboardUtil.AddActivityLog(i,ActivityLogItemType.Datasource,n.getDatasourceSubTypes(r),t)},t.prototype.isValidateQryInfo=function(n){if(this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource||this.validateDataSetName()){if(!n){var t=this.queryEditorTag.is(":visible")?this.dashboardDesigner.locale.dataSource.specifyQueryText:this.dashboardDesigner.locale.alertWindowMesages.selectTableMessage;return ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SelectTable,t,IconType.warning,AlertType.Alert,!1,""),!1}}else return!1;return!0},t.prototype.updateDataSource=function(n){var r,t,u,i;this.codeChkSwitcher.is(":checked")?this.isSQLProvider(this.datasourceInfo)&&(ej.isNullOrUndefined(n)?this.executeCodeViewQuery():(r=this.dragSurfaceTag.find(".e-data-table"),r.length>0&&(u="",i=ej.DashboardUtil.getQueryInstance("QueryDesigner"),i.addedTableNames.length>0&&(u=i.addedTableNames[0]),r.each(function(r,f){for(var e=$(f).data("e-table"),s=Object.keys(n),o=0;o<s.length;o++)n[s[o]].indexOf(e.name)!==-1&&(e.schema=s[o]);u===e.name&&(t=e,i.addedTableNames.splice(0,1))}),ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getTableFields,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getTableFields,datasource:this.encrptDataSourceInfo(this.datasourceInfo),parameters:[],tableName:t.name,tableSchema:t.schema,tableId:t.id,dataSetName:this.dataset.Name,dataSetId:this.dataset.Id,IsReconnect:!0})},{fnction:$.proxy(this.updateTableInfo,this,n)})))):this.ajaxPostUpdateColumnListForReconnect(n)},t.prototype.failedUpdateColumnList=function(n,t){if(t){var i=t.responseText+"<div><\/br>"+this.dashboardDesigner.locale.alertWindowMesages.retryforEditConnection+"<\/div>";ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.dataSource.alertboxHeaderEditConnectionText,i,IconType.warning,AlertType.Confirm,!1,"",{instance:this,method:"confirmRetryForReconnect",dataInfo:n})}},t.prototype.ajaxPostUpdateColumnListForReconnect=function(n){var t=this,r=this.dragSurfaceTag.find(".e-data-table"),i=[];r.each(function(n,r){var u=$(r).data("e-table"),f={dataSetName:t.dataset.Name,dataSetId:t.dataset.Id,tableName:u.name,categoryName:"Columns",schemaName:u.schema,viewType:u.viewType,tableId:u.id};i.push(f)});ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.GetChildList,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.GetChildList,tableData:i})},{fnction:$.proxy(this.updateColumnListForReconnect,this,n),errfnction:$.proxy(this.failedUpdateColumnList,this,n)},!0)},t.prototype.confirmRetryForReconnect=function(n,t){n?this.ajaxPostUpdateColumnListForReconnect(t):this.updateNoDataInfo()},t.prototype.updateColumnListForReconnect=function(n,t){var i,r;if(!ej.isNullOrUndefined(t.tableData)&&!ej.isNullOrUndefined(t.tableName))for(i=0;i<t.tableData.length;i++)r=this.tableList.indexOf(t.tableName[i]),r>=0&&(this.tableList.splice(r,1),this.columnList.splice(r,1)),this.columnList.push(JSON.parse(t.tableData[i])),this.tableList.push(t.tableName[i]);this.addedTableNames=[];this.updateTables(n);this.editDataSource=!0;this.executeUIQuery();this.dragSurfaceTag.empty();this.populateReconnectDesignerState();this.editDataSource=!1},t.prototype.executeCodeViewQuery=function(){var n=null,t=this.dashboardDesigner.isExecute;this.dashboardDesigner.isExecute=!0;this.isCodeView=!0;n=this.getQueryText();this.queryExp=[];this.queryFilter=[];this.queryJoiner=[];ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.executeQuery,datasource:this.encrptDataSourceInfo(this.datasourceInfo),sqlQuery:n,commandType:this.commandMode,parameters:this.getParameters(!1),tableName:"",tableSchema:"",tableId:"",dataSetName:this.dataset.Name,dataSetId:this.dataset.Id,isCodeView:this.isCodeView,filter:this.queryFilter,isInitialFilter:this.isInitialFilterApplied,joinInfo:[],isReconnect:!0,isExecute:t})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]})},t.prototype.updateTableInfo=function(n,t){this.addedTableNames.length>0?this.updateDataSource(t):ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.codeView,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.codeView,datasource:this.encrptDataSourceInfo(this.datasourceInfo),commandType:this.commandMode,parameters:this.getParameters(!1),tableName:"",dataSetName:this.dataset.Name,type:"SwitchCodeView"})},{fnction:$.proxy(this.reconnectSqlQuery,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]})},t.prototype.reconnectSqlQuery=function(n){this.setQueryText(n);this.executeCodeViewQuery()},t.prototype.designState=function(){return this.queryEditorTag.is(":visible")&&this.dashboardDesigner.isExecute},t.prototype.updateTables=function(n){var i=this,r,u;this.isSQLProvider(this.datasourceInfo)&&(r=this.dragSurfaceTag.find(".e-data-table"),u="schema",r.length>0&&r.each(function(r,f){var e=t.createDesignerTable(),o=$(f).data("e-table"),c=Object.keys(n),l,h,s;if(i.datasourceInfo.ConnectionProperties.DataProvider!=="File"&&i.datasourceInfo.ConnectionProperties.DataProvider!=="WEB"&&i.datasourceInfo.ConnectionProperties.DataProvider!=="Salesforce"&&i.datasourceInfo.ConnectionProperties.DataProvider!=="MongoDB")for(s=0;s<c.length;s++)n[c[s]].indexOf(o.name)!==-1&&(o[u]=c[s]);else ej.isNullOrUndefined(i.fileSchema)||(o[u]=i.fileSchema);if(e.DisplayName=o.DisplayName,e.IsShared=o.IsShared||!1,e.sourceId=o.sourceId,e.Name=o.name,e.Id=o.id,e.Schema=o.schema,e.IsView=o.viewType==="Tables"?!1:!0,e.Columns=i.getColumnsState($(f)),i.dataset.Query.QueryDesignerState===null||i.dataset.Query.QueryDesignerState.Tables===null)l=t.createQueryDesigner(),l.Tables=[],l.Tables.push(e);else for(h=i.dataset.Query.QueryDesignerState.Tables,s=0;s<h.length;s++)if(h[s].Name===e.Name){h.splice(s,1);h.push(e);break}}))},t.prototype.saveQueryInfo=function(n,t){var i=null,r,u;this.isSQLProvider(this.datasourceInfo)?this.queryEditorTag.is(":visible")?(i=this.getQueryText(),this.isValidateQryInfo(i)&&this.excuteQrySchema(i,t,n)):(r=this.dragSurfaceTag.find(".e-Stored.Procedures"),u=this.dragSurfaceTag.find(".e-data-table"),u.length>0||r.length>0?this.excuteQrySchema(i,t,n):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SelectTable,this.dashboardDesigner.locale.alertWindowMesages.selectTableMessage,IconType.warning,AlertType.Alert,!1,"")):this.queryEditorTag.is(":visible")&&(i=this.getQueryText(),this.isValidateQryInfo(i)&&this.connectData(!0))},t.prototype.excuteOtherProviderQrySchema=function(n){this.datasourceInfo=n;this.excuteQrySchema(this.getQueryText())},t.prototype.excuteQrySchema=function(n,t,i){var r;ej.isNullOrUndefined(this.dataSetName)?r=this.dataset.Name:this.dataset.Name=r=this.dataSetName;this.codeChkSwitcher.is(":checked")?this.executeCodeViewQueryBeforeDataSourceSave(n,r,t,i):this.excuteQrySchemaInternal(n,r,t,i)},t.prototype.excuteQrySchemaInternal=function(n,t,i,r){if(ej.isNullOrUndefined(this.model.serviceAuthorizationToken)||this.model.serviceAuthorizationToken===""||r)this.updateQuerySchema(n,t,i);else{var u=new ej.DashboardDesignerUtility.DatasourceSaveDialog(this.datasourceInfo,this.dataset,$.proxy(this.updateQueryInfo,this));u.trySavingDataSource($.proxy(this.showDesignIndicator,this,i),$.proxy(this.hideDesignIndicator,this,i))}},t.prototype.executeCodeViewQueryBeforeDataSourceSave=function(n,t,i,r){n!=null&&(this.isCodeView=!0);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.executeQuery,datasource:this.encrptDataSourceInfo(this.datasourceInfo),sqlQuery:n,commandType:this.commandMode,dataSetName:t,dataSetId:this.dataset.Id,isCodeView:this.isCodeView})},{fnction:$.proxy(this.excuteQrySchemaInternal,this,n,t,i,r),indicator:[$.proxy(this.showDesignIndicator,this,i),$.proxy(this.hideDesignIndicator,this,i)]})},t.prototype.updateQuerySchema=function(n,t,i){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.querySchema,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.querySchema,datasource:this.encrptDataSourceInfo(this.datasourceInfo),sqlQuery:n,commandType:this.commandMode,parameters:this.getParameters(!0),dataSetName:t,dataSetId:this.dataset.Id})},{fnction:$.proxy(this.updateQueryInfo,this),indicator:[$.proxy(this.showDesignIndicator,this,i),$.proxy(this.hideDesignIndicator,this,i)]})},t.prototype.updateQueryInfo=function(n){var h,r,u,c,t;if(n&&n.schema){var f=JSON.parse(n.schema),l=n.query,i=$.extend(!0,{},this.dataset);for((ej.isNullOrUndefined(this.model.serviceAuthorizationToken)||this.model.serviceAuthorizationToken==="")&&(i.Name=$("#"+this.id+"_dataset_txt").val()),i.Fields=[],this.queryParameters=[],i.Query.CommandText=l,i.Query.DataSourceId=this.datasourceInfo.Id,i.Query.QueryDesignerState=this.saveDesignerState(),h=[],t=0;t<f.length;t++)r=this.createField(),r.Name=f[t].Name,h.indexOf(r.Name)!==-1&&(r.Name=r.Name+"_"+f[t].TableName),r.DataField=f[t].Name,r.TableId=f[t].TableId,r.TableName=f[t].TableName,r.TypeName=f[t].DataType,r.Id=f[t].ID,r.IsExpression=f[t].IsExpression,r.IsAggregatedExpression=f[t].IsAggregatedExpression,h.push(r.Name),i.Fields.push(r);if(this.commandMode===CommandMode.Procedure){if(i.Query.CommandType=1,u=this.getProcParams(),u.length>0)for(t=0;t<u.length;t++){var e=u[t],s=e.Name.substring(1),o=this.createQueryParameter();o.Name=e.Name;o.Value="=Parameters!"+s+".Value";i.Query.QueryParameters.push(o);this.newDependentParameter(s,e)}}else if(this.commandMode===CommandMode.Text&&(i.Query.CommandType=0,u=void 0,this.queryEditorTag.css("display")==="block"?(c=ej.DashboardUtil.getQueryInstance("QueryParameter"),u=c.getQueryParameters(i.Query.CommandText)):u=this.getDesignerParameters(),!ej.isNullOrUndefined(u)&&u.length>0))for(t=0;t<u.length;t++){var e=u[t],s=e.Name.substring(1),o=this.createQueryParameter();o.Name=e.Name;o.Value="=Parameters!"+s+".Value";i.Query.QueryParameters.push(o);this.newDependentParameter(s,e)}for(this.editDataSource?(this.dataset=i,this.editDataSource=!1,this.addActivityLogForSaveDS()):(this.callBackfn?(ej.DashboardUtil.invokeCallBack(this.callBackfn,{oldDataSet:this.model.dataSet,newDataSet:i,parameters:this.queryParameters}),this.isEdit&&(!ej.DashboardUtil.isEqualObj(this.model.dataSet,i)||this.isCodeView)&&ejDashboardDesigner.getInstance("DataConfiguration").updateDataset(i.Id)):this.invokefn&&ej.DashboardUtil.invokeCallBack(this.invokefn,{oldDataSet:this.model.dataSet,newDataSet:i,newSharedDataSet:this.getSharedDataSet(i),parameters:this.queryParameters,sharedDataMapping:this.sharedDataMapping}),this.addActivityLogForSaveDS(),this.isEdit=!1,this.columnList=[],this.tableList=[]),t=0;t<ejDashboardDesigner.getInstance("DataSet").dataSource.datasources.length;t++)ejDashboardDesigner.getInstance("DataSet").dataSource.datasources[t].Id===ej.DashboardDesignerUtility.EditConnection.EditConnection.queryDesigner.datasourceInfo.Id&&(ejDashboardDesigner.getInstance("DataSet").dataSource.datasources[t]=ej.DashboardDesignerUtility.EditConnection.EditConnection.queryDesigner.datasourceInfo);this.hidePreviewIndicator();this.hideDesignIndicator();this.hideDragIndicator()}else if(n&&n.indexOf("Sf_Exception")!==-1)ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.errorMessage.failedToSaveSelectedTableQuery,IconType.errors,AlertType.Alert,!0,n);else if(!ej.isNullOrUndefined(this.dashboardDesigner.model.mode)&&this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource&&!ej.isNullOrUndefined(this.dashboardDesigner.model.serviceAuthorizationToken))this.onActionSuccess(n)},t.prototype.onActionSuccess=function(n){if(n){var t={element:null,data:n},i={mode:ej.dashboardDesigner.mode.datasource,event:this.isContinueToDashboardbtn,source:t};this.dashboardDesigner._trigger("actionComplete",{eventType:ej.DashboardDesignerUtility.Serialization.stringtoEnum(DashboardDesignerEvent,this.isContinueToDashboardbtn),data:i})}},t.prototype.onCancelActionSuccess=function(n){if(n){var t={element:null,data:n},i={mode:ej.dashboardDesigner.mode.datasource,event:"cancelDataSource",source:t};this.dashboardDesigner._trigger("actionComplete",{eventType:DashboardDesignerEvent.CancelDataSource,data:i})}},t.prototype.getSharedDataSet=function(n){var t=this.createSharedDataset();return t.Name=n.Name,t.Query.CommandText=n.Query.CommandText,t.Query.CommandType=n.Query.CommandType,t.Query.QueryDesignerState=n.Query.QueryDesignerState,t.Query.DataSourceReference=this.datasourceInfo.Name,t.QueryParameters=n.Query.QueryParameters,t.Fields=n.Fields,t},t.prototype.newDependentParameter=function(n,t){this.referenceParam=$.extend(this.model.parameters,{},!0);var i=this.createParameter();i.Name=n;i.Prompt=n;i.DataType=t.DataType==="bit"||t.DataType==="System.Boolean"?DataTypes.Boolean:ej.DashboardUtil.contains("int",t.DataType,!0)||t.DataType==="System.Int32"||t.DataType==="System.Int16"||t.DataType==="System.Int64"||t.DataType==="System.Byte"||t.DataType==="System.Single"?DataTypes.Integer:ej.DashboardUtil.contains("money",t.DataType,!0)||t.DataType==="float"||t.DataType==="numeric"||t.DataType==="System.Double"?DataTypes.Float:t.DataType==="decimal"||t.DataType==="System.Decimal"?DataTypes.Decimal:ej.DashboardUtil.contains("date",t.DataType,!0)||t.DataType==="System.DateTime"?DataTypes.DateTime:DataTypes.String;ej.isNullOrUndefined(t.Value)||(i.DefaultValue=this.createDefaultValues(),i.DefaultValue.Values.push(t.Value),i.DefaultValue.DataSetReference=null);this.isExistParameter(i,t.isQueryMode)||this.queryParameters.push(i)},t.prototype.isExistParameter=function(n,t){for(var i=0;i<Object.keys(this.referenceParam).length;i++)if(this.referenceParam[i].Name===n.Name)return ej.isNullOrUndefined(t)&&!t&&!ej.DashboardUtil.isEqualObj(this.referenceParam,n)?(this.referenceParam[i]=n,!1):!0;if(this.queryParameters&&this.queryParameters.length>0)for(i=0;i<this.queryParameters.length;i++)if(this.queryParameters[i].Name===n.Name)return!0;return!1},t.prototype.cancelDataSource=function(){this.isEdit?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.EditDataSourceConnection,this.dashboardDesigner.locale.alertWindowMesages.datasourceEditing,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmCancel"}):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.CancelDataSourceCreation,this.dashboardDesigner.locale.alertWindowMesages.queryViewDSCancel,IconType.warning,AlertType.Confirm,!1,"",{dataInfo:{},instance:this,method:"confirmCancel"})},t.prototype.confirmCancel=function(n){var t;if(n&&(t=this.isEdit,this.cancelDataSet(null),!t)){var i=ejDashboardDesigner.getInstance("DataSource"),r=!ej.isNullOrUndefined(this.datasourceInfo.PublishId)&&this.datasourceInfo.PublishId!==""?this.datasourceInfo.PublishId:null,u=i.getDatasourceSubTypes(ej.isNullOrUndefined(this.datasourceInfo.ProviderType)?this.datasourceInfo.ConnectionProperties.DataProvider:this.datasourceInfo.ProviderType);ej.DashboardUtil.AddActivityLog(ActivityLogEvents.Cancelled,ActivityLogItemType.Datasource,u,r)}},t.prototype.cancelDataSet=function(){if(this.hideResponsiveToolBar(),this.hideDragIndicator(),this.hideDesignIndicator(),this.hidePreviewIndicator(),this.hideIndicator(),this.killPendingRequest(),this.postCancelledDataSetEdit(),this.isEdit=!1,this.isEditMode=!1,this.columnList=[],this.tableList=[],this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource)if(this.dashboardDesigner.model.isDraft===!0)ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/deletedatasource",{action:"",data:JSON.stringify({datasourceId:this.dashboardDesigner.model.datasource})},{indicator:[$.proxy(this.showDesignIndicator,this,!1),$.proxy(this.hideDesignIndicator,this,!1)],fnction:$.proxy(this.onCancelActionSuccess,this)},!1,!0);else this.onCancelActionSuccess(!0);else this.callBackfn?ej.DashboardUtil.invokeCallBack(this.callBackfn,{isCancel:!0}):this.invokefn&&ej.DashboardUtil.invokeCallBack(this.invokefn,{isCancel:!0})},t.prototype.killPendingRequest=function(){if(this.ajaxPostCollection.length>0)for(var n=0;n<this.ajaxPostCollection.length;n++)this.ajaxPostCollection[n].readyState<4&&this.ajaxPostCollection[n].abort();this.ajaxPostCollection=[]},t.prototype.postCancelledDataSetEdit=function(){var n=this.dataset.Name;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.cancelDataSetEdit,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.cancelDataSetEdit,datasource:this.encrptDataSourceInfo(this.datasourceInfo),datasetName:n,isEdit:this.isEdit,datasetId:this.dataset.Id})},{indicator:this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource?[$.proxy(this.showDesignIndicator,this,!1),$.proxy(this.hideDesignIndicator,this,!1)]:null})},t.prototype.hideResponsiveToolBar=function(){$("#"+this.id+"_div_designerTool_target").length>0&&$("#"+this.id+"_div_designerTool_hiddenlist").is(":visible")&&$("#"+this.id+"_div_designerTool_target").mousedown()},t.prototype.validateDataSetName=function(){var n=$("#"+this.id+"_dataset_txt").val();if(!this.dashboardDesigner.nameValidation(n)){ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.getInvalidNameAlertTitle("datasourceName",!0),this.dashboardDesigner.getInvalidNameAlertTitle("datasourceName",!1),IconType.errors,AlertType.Alert,!1,"");return}if(n){if(this.isAvailable(n))return ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SaveDataSource,this.dashboardDesigner.locale.dataSource.dataSetNameExist,IconType.warning,AlertType.Alert,!1,""),!1}else return ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.SaveDataSource,this.dashboardDesigner.locale.dataSource.dataSetName,IconType.warning,AlertType.Alert,!1,""),!1;return!0},t.prototype.AssignDataSet=function(n){this.dataset=n},t.prototype.setDataSetName=function(n){var t=$("#"+this.id+"_dataset_txt"),r,i;n&&t.val(n.Name);r=this.dashboardDesigner.element.find("#"+this.id+"_datasource_dsname").val();i=this.dashboardDesigner.element.find("#"+this.id+"_googledrive_datasource_dsname");this.isEdit&&!ej.isNullOrUndefined(this.model.dataSet.Name)?t.val(this.model.dataSet.Name):ej.isNullOrUndefined(r)||r===""?ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i.val())||i.val()===""?ej.isNullOrUndefined(this.datasourceInfo)||ej.isNullOrUndefined(this.datasourceInfo.Name)?t.val(""):t.val(this.datasourceInfo.Name):t.val(i.val()):t.val(r);this.isEdit?this.dataset=this.model.dataSet:this.dataset.Name=t.val()},t.prototype.getAvailableName=function(){var t="DataSource",n=0,i;do n++,i=this.model.validateNames.indexOf(t+n);while(i!==-1);return t+n},t.prototype.isAvailable=function(n){for(var t=0;t<this.model.validateNames.length;t++)if(this.model.validateNames[t]===n&&!(this.model.dataSet&&n===this.model.dataSet.Name))return!0;return!1},t.prototype.splitterResize=function(){var t=$("#"+this.id+"_div_previewArea"),i=this.previewHeader.height(),n=this.previewGrid.find(".e-gridheader").height()+1;n=n>2?n:40;this.noRecordSpan.css("height",t.height()-i);this.ejPreviewGrid.setModel({scrollSettings:{height:t.height()-n-i}})},t.prototype.horizontalResize=function(n){this.ejPreviewSplitter.refresh();this.previewHeader.width(n.nextPane.size-1);this.ejPreviewGrid.setModel({scrollSettings:{width:n.nextPane.size-1}});this.noRecordSpan.width(n.nextPane.size);this.sharedTableScroller&&(this.sharedTableScroller.model.width=n.prevPane.size,this.sharedTableScroller.refresh());this.ejSchemaScroller&&(this.ejSchemaScroller.model.width=n.prevPane.size);this.bodySchemaTag.find(".e-tree-area").is(":visible")?this.ejSchemaScroller&&this.ejSchemaScroller.refresh():this.bodySchemaTag.width(n.prevPane.size)},t.prototype.resetSize=function(){var n;this.sharedTableClose();var t=this.element.height()-this.designToolbar.height(),e=this.schemaHeader.css("display")==="block"?t-this.schemaHeader.outerHeight(!0):0,r=this.isExtractModeDataSource()||this.isSqlExtractMode()?this.getSchemaAreaHeight(this.sharedSchemaTag.find(".e-shared-tables-header").outerHeight(!0)):t-e;$("#"+this.id+"_div_designerArea").height(t);$("#"+this.id+"_div_draggableArea").css("height","100%");this.ejSurfaceSplitter.model.properties=[{paneSize:"230px",collapsible:!1,minSize:"200px",expandable:!1},{collapsible:!1}];this.ejSurfaceSplitter.option("height",t,!0);this.sharedTableScroller&&this.sharedTableScroller.setModel({width:this.schemaDiv.width()});this.bodySchemaTag.height(r);this.ejSchemaScroller&&this.ejSchemaScroller.setModel({height:r-2+"px",width:this.schemaDiv.width()+"px"});n=this.getSurfaceAreaWidth();this.ejPreviewSplitter.model.properties=[{paneSize:"67%",collapsible:!1,expandable:!1},{paneSize:"33%",collapsible:!1}];this.ejPreviewSplitter.option("width",n,!0);var u=$("#"+this.id+"_div_previewArea"),f=this.previewHeader.height(),i=this.previewGrid.find(".e-gridheader").height()+1;i=i>2?i:40;this.previewHeader.width(n);this.noRecordSpan.css({height:u.height()-f,width:n});this.ejPreviewGrid.setModel({scrollSettings:{width:n,height:u.height()-i-f}});this.updateToolBarSize()},t.prototype.updateEditorSize=function(){var i=this.element.height()-this.designToolbar.height(),r=$("#"+this.id+"_div_draggableArea"),n=this.element.width()-1;$("#"+this.id+"_div_designerArea").height(i);$("#"+this.id+"_div_target_designArea").height(i);r.width(this.element.width()-1);r.height(i);this.ejPreviewSplitter.model.properties=[{paneSize:"67%",collapsible:!1,expandable:!1},{paneSize:"33%",collapsible:!1}];this.ejPreviewSplitter.option("width",n,!0);var u=$("#"+this.id+"_div_previewArea"),f=this.previewHeader.height(),t=this.previewGrid.find(".e-gridheader").height()+1;t=t>2?t:40;this.previewHeader.width(n);this.noRecordSpan.css({height:u.height()-f,width:n});this.ejPreviewGrid.setModel({scrollSettings:{width:n,height:u.height()-t-f}})},t.prototype.updateSize=function(){var n,t,i;if(this.updateToolBarSize(),$("#"+this.id+"_div_target_designArea>.e-split-divider.e-h-bar").css("display")==="none")this.updateEditorSize();else{n=this.element.height()-this.designToolbar.height();$("#"+this.id+"_div_designerArea").height(n);$("#"+this.id+"_div_draggableArea").css("height","100%");$("#"+this.id+"_div_target_designArea").height(n);this.ejSurfaceSplitter.option("height",n);t=this.isExtractModeDataSource()||this.isSqlExtractMode()?this.getSchemaAreaHeight(n/2):n-this.schemaHeader.outerHeight(!0);this.sharedTableScroller&&this.sharedTableScroller.model.height!==0?(this.setSchemaPaneHeight(!0),this.sharedTableSplitter.refresh(),this.sharedTableScroller.setModel({height:this.getSharedSchemaTreeHeight(n/2),width:this.schemaDiv.width()}),this.bodySchemaTag.height(t),this.ejSchemaScroller&&(this.ejSchemaScroller.model.width=this.schemaDiv.width(),this.ejSchemaScroller.model.height=t-2)):this.sharedTableClose();(!this.isExtractModeDataSource()||this.isSqlExtractMode())&&(this.bodySchemaTag.height(t),this.ejSchemaScroller&&(this.ejSchemaScroller.model.width=this.schemaDiv.width(),this.ejSchemaScroller.model.height=t-2));this.bodySchemaTag.find(".e-tree-area").is(":visible")?this.ejSchemaScroller&&this.ejSchemaScroller.refresh():(this.bodySchemaTag.width(this.schemaDiv.width()),this.bodySchemaTag.height(t-2));i=this.getSurfaceAreaWidth();this.ejPreviewSplitter.option("width",i);this.ejPreviewSplitter.model.properties=[{paneSize:"65%",collapsible:!1,expandable:!1},{paneSize:"35%",collapsible:!1}];this.ejPreviewSplitter.refresh();var u=$("#"+this.id+"_div_previewArea"),f=this.previewHeader.height(),r=this.previewGrid.find(".e-gridheader").height()+1;r=r>2?r:40;this.previewHeader.width(i);this.noRecordSpan.css({height:u.height()-f,width:i});this.ejPreviewGrid.setModel({scrollSettings:{width:i,height:u.height()-r-f}})}},t.prototype.getSurfaceAreaWidth=function(){var n=$("#"+this.id+"_table_schemaArea"),i=n.width(),r=parseFloat(n.css("border-left-width")),u=parseFloat(n.css("border-right-width")),t=$("#"+this.id+"_div_target_designArea>.e-split-divider"),f=t.width(),e=parseFloat(t.css("border-left-width")),o=parseFloat(t.css("border-right-width"));return this.element.width()-(i+r+u+f+e+o+.5)},t.prototype.updateToolBarSize=function(){this.ejQueryTool.option("width",this.element.width());this.ejQueryTool._activeItem=undefined;this.ejQueryTool._reSizeHandler()},t.prototype.updateElementSize=function(){var i=this.element.height(),r=this.element.width(),u,n,f,t;this.element[0].style.height||this.element[0].parentElement.clientHeight===0||(this.isHeight=!0);this.element[0].style.width||this.element[0].parentElement.clientWidth===0||(this.isWidth=!0);i===0&&this.element[0].parentElement.clientHeight!==0?(this.element.height(this.element[0].parentElement.clientHeight),i=this.element.height()):this.browserInfo.name==="msie"&&this.browserInfo.version==="8.0"&&this.element[0].style.height.indexOf("%")!==-1&&(u=parseFloat(this.element[0].style.height),n=this.element[0].parentElement.clientHeight,n=n/100*u,this.element.height(n));r===0&&this.element[0].parentElement.clientWidth!==0?(this.element.width(this.element[0].parentElement.clientWidth),r=this.element.width()):this.browserInfo.name==="msie"&&this.browserInfo.version==="8.0"&&this.element[0].style.width.indexOf("%")!==-1&&(f=parseFloat(this.element[0].style.width),t=this.element[0].parentElement.clientWidth,t=t/100*f,this.element.width(t))},t.prototype.designerResize=function(){var t=this.browserInfo,n=this;this.resizeTO&&clearTimeout(this.resizeTO);this.resizeTO=setTimeout(function(){var e=n.isWidth?n.element[0].parentElement.style.width:n.element[0].style.width,o=n.isHeight?n.element[0].parentElement.style.height:n.element[0].style.height,i=$(n.element).height(),r=$(n.element).width(),u,f;o.indexOf("%")!==-1?(n.isPercentHeight=parseFloat(o),u=n.isHeight?$(n.element).parent().height():i,i=n.isHeight?u:u/100*n.isPercentHeight):n.element[0].parentElement.clientHeight!==0&&n.isPercentHeight!==-1?i=n.isHeight?n.element[0].parentElement.clientHeight:n.element[0].parentElement.clientHeight/100*n.isPercentHeight:n.isHeight&&n.element[0].parentElement.clientHeight!==0?i=n.element[0].parentElement.clientHeight:t.name==="msie"&&t.version==="8.0"&&n.element[0].parentElement.clientHeight!==0&&(i=n.element[0].parentElement.clientHeight);n.element.height(i);e.indexOf("%")!==-1?(n.isPercentWidth=parseFloat(e),f=n.isWidth?$(n.element).parent().width():r,r=n.isWidth?f:f/100*n.isPercentWidth):n.element[0].parentElement.clientWidth!==0&&n.isPercentWidth!==-1?r=n.isWidth?n.element[0].parentElement.clientWidth:n.element[0].parentElement.clientWidth/100*n.isPercentWidth:n.isWidth&&n.element[0].parentElement.clientWidth!==0?r=n.element[0].parentElement.clientWidth:t.name==="msie"&&t.version==="8.0"&&n.element[0].parentElement.clientWidth!==0&&(r=n.element[0].parentElement.clientWidth);n.element.width(r);n.updateSize()},200)},t.prototype.wiredEvents=function(){this.schemaSearch.on("keyup",$.proxy(this.onSearchClick,this));this.element.on(ej.DashboardUtil.MouseEvent.mouseDown,".ej-table-drag>div",$.proxy(this.treeMouseDown,this));this.element.on(ej.DashboardUtil.MouseEvent.mouseUp,".ej-table-drag>div",$.proxy(this.treeMouseUp,this));this.element.on(ej.DashboardUtil.MouseEvent.mouseMove,".ej-table-drag>div",$.proxy(this.dragStart,this));this.element.on("click",".e-designer-schemaHeader .e-shared-tables-closebtn",$.proxy(this.onCloseClick,this));this.element.on("click",".e-shared-tables-header-items .e-shared-tables-action-items span",$.proxy(this.onSharedTablesIconClick,this));this.element.on(ej.DashboardUtil.MouseEvent.mouseOver,".e-shared-datasource-header",$.proxy(this.enableSharedTableSettings,this));this.element.on(ej.DashboardUtil.MouseEvent.mouseLeave,".e-shared-datasource-header",$.proxy(this.disableSharedTableSettings,this));this.element.on("click",".e-shared-datasource-header .e-sharedtable-menu-icon",$.proxy(this.sharedTableMenuList,this));this.element.on("mouseover",".e-designer-schemaarea .e-sharedtable-collapseiconwrap",$.proxy(this.onSharedTableSplitterMouseOver,this));this.element.on("mouseleave",".e-designer-schemaarea .e-sharedtable-collapseiconwrap",$.proxy(this.onSharedTableSplitterMouseLeave,this));this.element.on("mouseover",".e-designer-schemaarea .e-sharedtable-collapseicon",$.proxy(this.onSharedTableCollapseIconMouseOver,this));this.element.on("mouseleave",".e-designer-schemaarea .e-sharedtable-collapseicon",$.proxy(this.onSharedTableCollapseIconMouseLeave,this));this.element.on("click",".e-designer-schemaarea .e-sharedtable-collapseicon",$.proxy(this.collapseIconClick,this));this.element.on("keyup",".e-shared-tables-header-items .e-shared-tables-searchbox",$.proxy(this.onSharedTableSearchClick,this));this.element.on("click",".e-shared-tables-header-items .e-shared-tables-closebtn",$.proxy(this.onSharedTableCloseClick,this));this.element.on("mouseover",".e-designer-schemaarea .e-split-divider.e-v-bar",$.proxy(this.onSharedTableSplitterMouseOver,this));this.element.on("mouseleave",".e-designer-schemaarea .e-split-divider.e-v-bar",$.proxy(this.onSharedTableSplitterMouseLeave,this))},t.prototype.unWiredEvents=function(){this.schemaSearch.off("keyup",$.proxy(this.onSearchClick,this));this.element.off("click","#"+this.id+"_schema_searchIcon",$.proxy(this.onCloseClick,this));this.element.off(ej.DashboardUtil.MouseEvent.mouseDown,".ej-table-drag>div",$.proxy(this.treeMouseDown,this));this.element.off(ej.DashboardUtil.MouseEvent.mouseUp,".ej-table-drag>div",$.proxy(this.treeMouseUp,this));this.element.off(ej.DashboardUtil.MouseEvent.mouseMove,".ej-table-drag>div",$.proxy(this.dragStart,this));this.element.off("click",".e-shared-tables-header-items .e-shared-tables-action-items span",$.proxy(this.onSharedTablesIconClick,this));this.element.off(ej.DashboardUtil.MouseEvent.mouseOver,".e-shared-datasource-header",$.proxy(this.enableSharedTableSettings,this));this.element.off(ej.DashboardUtil.MouseEvent.mouseLeave,".e-shared-datasource-header",$.proxy(this.disableSharedTableSettings,this));this.element.off("click",".e-shared-datasource-header .e-sharedtable-menu-icon",$.proxy(this.sharedTableMenuList,this));this.element.off("mouseover",".e-designer-schemaarea .e-sharedtable-collapseiconwrap",$.proxy(this.onSharedTableSplitterMouseOver,this));this.element.off("mouseleave",".e-designer-schemaarea .e-sharedtable-collapseiconwrap",$.proxy(this.onSharedTableSplitterMouseLeave,this));this.element.off("mouseover",".e-designer-schemaarea .e-sharedtable-collapseicon",$.proxy(this.onSharedTableCollapseIconMouseOver,this));this.element.off("click",".e-designer-schemaarea .e-sharedtable-collapseicon",$.proxy(this.collapseIconClick,this));this.element.off("keyup",".e-shared-tables-header-items .e-shared-tables-searchbox",$.proxy(this.onSharedTableSearchClick,this));this.element.off("click",".e-shared-tables-header-items .e-shared-tables-closebtn",$.proxy(this.onSharedTableCloseClick,this));this.element.off("mouseover",".e-designer-schemaarea .e-split-divider.e-v-bar",$.proxy(this.onSharedTableSplitterMouseOver,this));this.element.off("mouseleave",".e-designer-schemaarea .e-split-divider.e-v-bar",$.proxy(this.onSharedTableSplitterMouseLeave,this))},t.prototype.triggerEvents=function(n,t){var i,r=t;switch(n){case"ajaxBeforeLoad":i=this._trigger(n,r);break;case"ajaxSuccess":i=this._trigger(n,r);break;case"ajaxError":i=this._trigger(n,r);break;case"clickAction":i=this._trigger(n,r);break;case"toolbarRendering":i=this._trigger(n,r)}},t.prototype.sharedTableMenuList=function(n){var i=$(n.currentTarget).closest("li"),t=this.getTreeData(i.attr("id"),i.parents("ul.e-treeview.e-js").data("ejTreeView"));if(t){var r=this.dashboardDesigner.model.localeSettings.dateFormat+" "+this.dashboardDesigner.model.localeSettings.timeFormat,u={Id:t.id,DsLastUpdatedTime:ej.format(new Date(t.lastUpdatedTime),r),OwnerName:t.ownerName},f=ejDashboardDesigner.getInstance("SharedDSMenu");f.openSharedDSMenu(u,i,n)}},t.prototype.loadSharedDataSet=function(n){var i=n,r=n,t;ej.DashboardUtil.contains(n,"/",!0)&&(i=n.substr(n.lastIndexOf("/")+1),r=n.substr(0,n.lastIndexOf("/")));t=ej.DashboardUtil.createDataSource();t.ConnectionProperties=null;t.DataSourceReference=i;t.Name=i;this.datasourceInfo=t;this.sharedDataMapping={Name:r,DataSourceId:i};this.selectDropDwnVal(r?r:n);this.loadSharedDataSourceSettings()},t.prototype.loadDataSourceSettings=function(n){this.datasourceInfo=this.getDataSource(n);this.resetSharedSchemaUI();ej.isNullOrUndefined(this.datasourceInfo.DataSourceReference)?this.loadDesignerContainer(n):(this.sharedDataMapping={Name:this.datasourceInfo.Name,DataSourceId:this.datasourceInfo.DataSourceReference},this.enableDataSourceDrp(),this.loadSharedDataSourceSettings())},t.prototype.loadSharedDataSourceSettings=function(){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.sharedDataSource,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.sharedDataSource,reportInfo:{dataSourceRefer:this.datasourceInfo.DataSourceReference}})},{fnction:$.proxy(this.loadSharedDataSource,this),indicator:[$.proxy(this.showDesignIndicator,this,!1),$.proxy(this.hideDesignIndicator,this,!1)]})},t.prototype.loadSharedDataSource=function(n){n&&(this.updateSharedDsConnection(n,this.datasourceInfo),this.loadDesignerContainer(this.datasourceInfo.Name))},t.prototype.loadDesignerContainer=function(n){this.selectDropDwnVal(n);this.loadDataSetItem(n)},t.prototype.loadDataSetItem=function(n){var t=this.isQueryEditor(this.datasourceInfo);this.codeChkSwitcher.prop("checked",t);this.showQueryEditor(t);this.showSplitter(!t);this.loadSettings(n);t?(this.enableToolbarItems(!0),this.enableDataSourceDwn(!0),this.setQueryEditor()):(this.enableToolbarItems(!1),this.enableDataSourceDwn(!1),this.loadDataSet())},t.prototype.loadSettings=function(){this.showNoRecord(!0);this.showLoadMoreOpt(0);this.ejPreviewGrid.setModel({dataSource:[]});this.ejSchemaTree.option("fields.dataSource",[]);this.setQueryText("");this.dragSurfaceTag.empty()},t.prototype.loadDataSet=function(){this.loadDatabaseSchema(this.datasourceInfo)},t.prototype.loadDatabaseSchema=function(n){this.datasourceInfo=n;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.databaseSchema,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.databaseSchema,datasource:this.encrptDataSourceInfo(n),isEdit:this.isEditMode,dataSetId:this.dataset.Id,viewType:"Schema"})},{fnction:$.proxy(this.updateSchemaArea,this),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]})},t.prototype.updateSchemaArea=function(n,t){var r,i;if(n&&n.tableData){if((ej.isNullOrUndefined(this.dbSchema)||t)&&(this.dbSchema=JSON.parse(n.tableData),this.selectedItems={},this.tableItems={},this.renderSchemaTree(this.dbSchema)),!ej.isNullOrUndefined(n.sharedTables)){r=this.onSharedTableFetchSuccess(n.sharedTables,n);this.onSharedTablesIconClick({currentTarget:this.sharedSchemaTag.find(".e-shared-tables-header-items .e-shared-tables-action-items .e-shared-tables-action-expand")});if(r){n.sharedTables=null;return}}this.fileSchema=n.schema;this.setSQLHint();this.dashboardDesigner.model.mode!==ej.dashboardDesigner.mode.datasource||this.isEditconnection||(i=ejDashboardDesigner.getInstance("DataSet").datasets[0],i&&i.Query&&i.Query.QueryDesignerState?this.getTableInfo(i):(this.codeChkSwitcher.prop("checked",!0),this.codeSwitcher(!0),this.setQueryEditor()));this.isEditconnection=!1;this.isEdit&&(this.model.dataSet&&this.model.dataSet.Query&&this.model.dataSet.Query.QueryDesignerState?this.getTableInfo(this.model.dataSet):(this.codeChkSwitcher.prop("checked",!0),this.codeSwitcher(!0),this.setQueryEditor()));this.enableToolbarItems(!0);this.enableDataSourceDwn(!0)}else n&&n.indexOf("Sf_Exception")!==-1&&ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.dataSet,this.dashboardDesigner.locale.errorMessage.failedToGetQuerySchema,IconType.errors,AlertType.Alert,!0,n)},t.prototype.setQueryEditor=function(){var t=this.dataset.Name,n;this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource?(n=ejDashboardDesigner.getInstance("DataSet").datasets[0],n&&!ej.isNullOrUndefined(n.Query.CommandText)&&n.Query.CommandText!==""&&this.setQueryText(n.Query.CommandText)):this.isEdit&&this.model.dataSet&&!ej.isNullOrUndefined(this.model.dataSet.Query.CommandText)&&this.model.dataSet.Query.CommandText!==""&&this.setQueryText(this.model.dataSet.Query.CommandText);(this.isEditMode||this.dashboardDesigner.model.mode===ej.dashboardDesigner.mode.datasource)&&this.ajaxPostCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.editDataSet,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.editDataSet,dataSetName:t,dataSetId:this.dataset.Id})},{fnction:$.proxy(this.previewData,this),indicator:[$.proxy(this.showPreviewIndicator,this),$.proxy(this.hidePreviewIndicator,this)]}))},t.prototype.isQueryEditor=function(n){switch(n.ConnectionProperties.DataProvider){case"SQL":case"AzureSQLDataWarehouse":case"Oracle":case"PostgreSQL":case"Redshift":case"MySQL":case"AmazonAuroraMySQL":case"AmazonAuroraPostgreSQL":case"GoogleCloudMySQL":case"GoogleCloudPostgreSQL":case"MariaDB":case"MemSQL":case"File":case"MongoDB":case"WEB":case"Salesforce":return!1}return!0},t.prototype.isSQLProvider=function(n){switch(n.ConnectionProperties.DataProvider){case"SQL":case"AzureSQLDataWarehouse":case"MySQL":case"AmazonAuroraMySQL":case"AmazonAuroraPostgreSQL":case"GoogleCloudMySQL":case"GoogleCloudPostgreSQL":case"MariaDB":case"MemSQL":case"Oracle":case"PostgreSQL":case"Redshift":case"File":case"WEB":case"MongoDB":case"Salesforce":return!0}return!1},t.prototype.updateSharedDsConnection=function(n,t){var i={};i.__type="Syncfusion.Dashboard.Web.Serialization.Model.Connection.ConnectionProperties";i.ConnectString=ej.DashboardUtil.decryptData(n.ConnectString);i.EmbedCredentials=!1;i.DataProvider=n.Extension;i.Prompt="";switch(n.CredentialRetrieval){case 0:i.IntegratedSecurity=!1;i.Prompt=n.Prompt;t.SecurityType=2;i.UserName=ej.DashboardUtil.decryptData(n.UserName);i.PassWord=ej.DashboardUtil.decryptData(n.Password);t.SecurityType=n.WindowsCredentials?3:2;break;case 1:n.ImpersonateUser?(t.SecurityType=2,i.IntegratedSecurity=!0,i.UserName=ej.DashboardUtil.decryptData(n.UserName)):n.WindowsCredentials?(t.SecurityType=3,i.IntegratedSecurity=!0):(t.SecurityType=2,i.IntegratedSecurity=!1,i.UserName=ej.DashboardUtil.decryptData(n.UserName),i.PassWord=ej.DashboardUtil.decryptData(n.Password));break;case 2:i.IntegratedSecurity=!0;t.SecurityType=1;break;case 3:i.IntegratedSecurity=!1;t.SecurityType=0}t.ConnectionProperties=i},t.prototype.newDataSet=function(n,t){t&&(this.model.dataSources=t);n?(this.model.selectDataSource=n,this.datasourceSelection(n)):this.newQueryDesigner()},t.prototype.editDataSet=function(n,t){t?(this.model.dataSources=t,this.setDataSourceToDd()):this.model.dataSources&&this.model.dataSources.length>0&&this.setDataSourceToDd();n&&(this.isEdit=!0,this.model.dataSet=n,this.editDataSetItem(n.Id))},t.prototype.editDataSetItem=function(){this.isEdit=!0;this.isEditMode=!0;this.resetQueryDesigner();this.model.dataSet&&this.model.dataSet.Query&&(this.model.dataSet.Query.DataSourceId?this.loadDataSourceSettings(this.model.dataSet.Query.DataSourceId):this.model.dataSet.Query.DataSourceReference&&this.loadSharedDataSet(this.model.dataSet.Query.DataSourceReference))},t.prototype.datasourceSelection=function(n){this.isEdit=!1;this.model.dataSet=null;this.resetQueryDesigner();this.setDataSourceToDd();this.selectDropDwnVal(n);this.loadDataSourceSettings(n)},t.prototype.datasourceChange=function(n){n.isInteraction&&(this.datasourceInfo=this.getDataSource(n.selectedValue),this.resetQueryDesigner(),this.ejSchemaTree.option("fields.dataSource",[]),this.setQueryText(""),this.dragSurfaceTag.empty(),this.loadDataSourceSettings(n.selectedValue))},t.prototype.resetQueryDesigner=function(){this.dbSchema=null;this.dataSetName=null;this.queryParameters=[];this.queryJoiner=[];this.queryFilter=[];this.queryExp=[];this.queryInputVals=[];this.referenceParam=[];this.sharedDataMapping=null;this.showTooltip(!1);this.setDataSetName();this.resetUIElement()},t.prototype.resetUIElement=function(){this.sharedSchemaTag.css("display","none");this.ejPreviewGrid.model.columns=[];this.ejPreviewGrid.model.dataSource=[];this.ejSchemaTree&&this.ejSchemaTree.option("fields.dataSource",[]);this.setQueryText("");this.dragSurfaceTag.empty();this.showTreeContainer(!0);this.schemaSearch.val("");this.schemaSearch.siblings(".e-shared-ds-searchbox-btn").removeClass("e-shared-tables-closebtn").addClass("e-shared-tables-searchbtn")},t.prototype.hideCollapseIcon=function(){this.collapseIcon.css("display","none");this.dashboardDesigner.element.find(".e-designer-schemaarea .e-split-divider.e-v-bar").css("display","none")},t.prototype.showCollapseIcon=function(){this.collapseIcon.css("display","block");this.dashboardDesigner.element.find(".e-designer-schemaarea .e-split-divider.e-v-bar").css("display","block")},t.prototype.resetSharedSchemaUI=function(){this.sharedSchemaTag.find("#"+this.id+"_shared_table_error").hide();this.sharedSchemaTag.find("#"+this.id+"_shared_tables_tree").show();var n=this.sharedSchemaTag.find(".e-shared-tables-searchbox");n.val("");n.siblings(".e-shared-ds-searchbox-btn").addClass("e-shared-tables-searchbtn").removeClass("e-shared-tables-closebtn");this.showSharedTreeContainer(!0);this.ejSharedSchemaTree&&this.ejSharedSchemaTree.option("fields.dataSource",[]);this.isExtractModeDataSource()||this.isSqlExtractMode()?(this.showCollapseIcon(),this.sharedSchemaTag.css("display","block")):(this.hideCollapseIcon(),this.sharedSchemaTag.css("display","none"))},t.prototype.selectDropDwnVal=function(n){this.ejDrpdwnData.selectItemByValue(n)},t.prototype.setDataSourceToDd=function(){var n=this.model.dataSources,i,t;if(n&&n.length>0){for(i=[],t=0;t<n.length;t++)i.push({Name:n[t].Name,Id:n[t].Id}),$("#"+this.id+"_dataset_txt").val()===""&&($("#"+this.id+"_dataset_txt").val(n[t].Name),this.dataset.Name=n[t].Name);this.ejDrpdwnData.setModel({dataSource:i})}},t.prototype.newQueryDesigner=function(){this.isEdit=!1;this.model.dataSet=null;this.resetQueryDesigner();this.setDataSourceToDd();this.showQueryEditor(!1);this.showSplitter(!0);this.showNoRecord(!0);this.showLoadMoreOpt(0);this.enableToolbarItems(!1);this.enableDataSourceDwn(!0);this.showTooltip(!0)},t.prototype.showSplitter=function(n){var t=$("#"+this.id+"_div_target_designArea");n?(this.ejSurfaceSplitter.expand(0),t.find(".e-split-divider.e-h-bar").css("display","block")):(this.ejSurfaceSplitter.collapse(0),t.find(".e-split-divider.e-h-bar").css("display","none"))},t.prototype.getDataSource=function(n){var t=this.model.dataSources,i;if(!ej.isNullOrUndefined(t)&&t.length>0)for(i=0;i<t.length;i++)if(t[i].Id===n)return $.extend(!0,{},t[i])},t.prototype.showTableHint=function(n){n?this.dragSurfaceTag.removeClass("e-designer-hint-newtable"):this.dragSurfaceTag.addClass("e-designer-hint-newtable")},t.prototype.showIndicator=function(){$("#"+this.id+"_schemaArea").data("ejWaitingPopup").show()},t.prototype.hideIndicator=function(){$("#"+this.id+"_schemaArea").data("ejWaitingPopup").hide()},t.prototype.showPreviewIndicator=function(){$("#"+this.id+"_div_previewData").data("ejWaitingPopup").show();$(".e-icon.e-close_01").addClass("e-close-disable").css({cursor:"default",opacity:"0.3"});this.enableToolbarItems(!1);this.enableEditConnection(!1)},t.prototype.hidePreviewIndicator=function(){$("#"+this.id+"_div_previewData").data("ejWaitingPopup").hide();$(".e-icon.e-close_01").removeClass("e-close-disable").css({cursor:"pointer",opacity:"1"});this.enableToolbarItems(!0);this.enableEditConnection(!0)},t.prototype.showDesignIndicator=function(n){(ej.isNullOrUndefined(n)||!n)&&($("#"+this.id+"_div_designerArea").data("ejWaitingPopup").show(),this.enableToolbar(!1))},t.prototype.hideDesignIndicator=function(n){(ej.isNullOrUndefined(n)||!n)&&($("#"+this.id+"_div_designerArea").data("ejWaitingPopup").hide(),this.enableToolbar(!0))},t.prototype.showDragIndicator=function(){$("#"+this.id+"_div_queryDesigner").data("ejWaitingPopup").show()},t.prototype.hideDragIndicator=function(){$("#"+this.id+"_div_queryDesigner").data("ejWaitingPopup").hide()},t.prototype.scrollerRefresh=function(n){var t=n.data("ejScroller");ej.isNullOrUndefined(t)||t.refresh()},t.prototype.hasChanges=function(){var t=this.model.dataSet&&this.model.dataSet.Query&&this.model.dataSet.Query.CommandText?this.model.dataSet.Query.CommandText:"",n;return t=t.trim().toLowerCase(),n=this.queryEditorTag.css("display")==="block"?this.getQueryText():this.buildSQLStatement(!1),n=n?n.trim().toLowerCase():"",n===t},t.prototype.getDataSet=function(n){this.callBackfn=null;this.invokefn=n;this.saveQueryInfo()},t.createDataSet=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.DataSet",Name:"",Id:"",PublishId:"",Fields:[],Query:{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.Query",DataSourceId:"",CommandType:0,CommandText:"",QueryParameters:[],Timeout:0,QueryDesignerState:null},InitialFilterInfo:[],CaseSensitivity:0,Collation:null,AccentSensitivity:0,KanatypeSensitivity:0,WidthSensitvity:0,Filters:[],SharedDataSet:null,InterpretSubtotalsAsDetails:0,DataSetInfo:null,DataSetObject:null}},t.prototype.createParameter=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.ReportParameter",Name:"",DataType:0,Nullable:!1,DefaultValue:null,AllowBlank:!1,Prompt:"",Hidden:!1,ValidValues:null,MultiValue:!1,UsedInQuery:0}},t.prototype.createDefaultValues=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.DefaultValue",Values:[],DataSetReference:{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.DataSetReference",DataSetName:null,ValueField:null}}},t.createQueryDesigner=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.QueryDesignerState",Tables:null,Joins:null,StoredProcedure:null,Expressions:null,Filters:null}},t.createDesignerTable=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.Table",DisplayName:"",Name:"",Schema:null,Columns:null,IsView:!1,Id:null,IsShared:!1,SourceId:""}},t.prototype.createColumn=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.Column",Name:"",AliasName:null,AggregateTye:null,IsSelected:!0,IsDuplicate:!1,TypeCast:""}},t.prototype.createJoin=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.Join",LeftTable:null,RightTable:null,JoinType:null,JoinFields:null}},t.prototype.createJoinField=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.JoinField",Condition:null,LeftField:null,RightField:null,OperatorType:null,IsValueChecked:null,Value:null}},t.prototype.createSProcedure=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.StoredProcedure",Name:null,Schema:null,Parameters:null,Id:null}},t.prototype.createProcParameter=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.SParameter",Name:null,Value:null,DataType:null,IsNull:!1}},t.prototype.createQueryParameter=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.QueryParameter",Name:"",Value:""}},t.prototype.createExpression=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.Expression",Name:null,QueryExp:null}},t.prototype.createField=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.Field",Name:"",DataField:"",Value:null,TypeName:"",Id:"",IsExpression:!1,IsAggregatedExpression:!1}},t.prototype.createQueryFilter=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.QueryFilter",Name:"",DataType:"",Operator:"",Value:"",IsQueryParameter:!1,ParameterName:"",IsTypeCast:!1,TypeCastValue:""}},t.prototype.createQueryFilterVal=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.QueryFilterValue",Value1:null,Value2:null}},t.prototype.createQueryParameterName=function(){return{__type:"Syncfusion.Dashboard.Web.Serialization.Model.DOM.Data.QueryParameterName",Parameter1:null,Parameter2:null}},t.prototype.createSharedDataset=function(){return{__type:"Syncfusion.RDL.Data.DataSetShared",Name:null,Query:{__type:"Syncfusion.RDL.Data.SharedQuery",DataSourceReference:"",CommandText:"",CommandType:0,QueryDesignerState:null},Fields:[],QueryParameters:[]}},t.prototype.onSharedTablesIconClick=function(n){var i=$(n.currentTarget).attr("class"),t;switch(i){case"e-shared-tables-action-reload":t=this.sharedSchemaTag.find(".e-shared-tables-searchbox");t.val("");t.siblings(".e-shared-ds-searchbox-btn").addClass("e-shared-tables-searchbtn").removeClass("e-shared-tables-closebtn");this.fetchSharedTableSchemas()}},t.prototype.toggleSharedTable=function(n){var t=this;if(!ej.isNullOrUndefined(this.schemaAreaPaneSize)){var u=this.dashboardDesigner.element.find(".e-schemaareawrap.e-v-pane"),f=this.dashboardDesigner.element.find(".e-sharedtable-schema.e-v-pane"),i=this.getSharedTableContentHeight(n==="expand"),r=this.getSchemaTreeBodyHeight(n==="expand");this.sharedTableScroller.element.height(i);this.ejSchemaScroller.element.height(r);this.sharedTableScroller.option("height",i);this.ejSchemaScroller.option("height",r);u.animate({height:this.schemaAreaPaneSize.firstPaneSize},{queue:!1,duration:500,specialEasing:{height:"linear"},complete:$.proxy(function(){t.sharedTableSplitter.refresh()},this)});f.animate({height:this.schemaAreaPaneSize.secondPaneSize},{queue:!1,duration:500,specialEasing:{height:"linear"},complete:$.proxy(function(){t.sharedTableSplitter.refresh();n==="expand"&&t.ejSharedSchemaTree&&t.ejSharedSchemaTree.model.fields.dataSource.length===0&&t.sharedSchemaTag.find("#"+t.id+"_shared_table_error").css("display")!=="block"&&t.fetchSharedTableSchemas()},this)})}},t.prototype.fetchSharedTableSchemas=function(){this.ajaxPostCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.model.serviceUrl+"/sharedtables",{data:JSON.stringify({datasource:this.datasourceInfo})},{indicator:[$.proxy(this.showSharedTableLoader,this),$.proxy(this.hideSharedTableLoader,this)],fnction:$.proxy(this.onSharedTableFetchSuccess,this)},!0,!0))},t.prototype.onSharedTableFetchSuccess=function(n,t){var i=!1,r;return n.ApiStatus?(this.sharedSchemaTag.find("#"+this.id+"_shared_table_error").hide(),this.sharedSchemaTag.find("#"+this.id+"_shared_tables_tree").show(),this.sharedDbSchema=$.parseJSON(n.Data),r=this.getSharedTreeDataSource(this.sharedDbSchema),this.ejSharedSchemaTree.option("fields.dataSource",r),this.scrollerRefresh(this.sharedSchemaTag.find(".e-shared-tables-content")),i=this.showSharedTableInfoOrError(n,t)):i=this.showSharedTableInfoOrError(n,t),i},t.prototype.showSharedTableInfoOrError=function(n,t){var r=!1,i;if(!ej.isNullOrUndefined(n.StatusCode)){i=n.Message;switch(n.StatusCode){case"4004":i=this.dashboardDesigner.locale.queryDesigner.sharedTable.error4004;break;case"4006":i=this.dashboardDesigner.locale.queryDesigner.sharedTable.error4006;r=!0}r?(ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.queryDesigner.sharedTable.header,i,IconType.information,AlertType.Confirm,!0,this.dashboardDesigner.locale.queryDesigner.sharedTable.errorDesc4006,{instance:this,method:"onSharedTableConfirmClick",dataInfo:t}),i=""):n.ApiStatus||(this.sharedSchemaTag.find("#"+this.id+"_shared_table_error").css("line-height",this.sharedTableScroller.model.height+"px").show().html(i),this.sharedSchemaTag.find("#"+this.id+"_shared_tables_tree").hide())}return r},t.prototype.onSharedTableConfirmClick=function(n,t){n?this.updateSchemaArea(t):this.cancelDataSet(null)},t.prototype.showSharedTableLoader=function(){this.sharedSchemaTag.ejWaitingPopup("instance").show()},t.prototype.hideSharedTableLoader=function(){this.sharedSchemaTag.ejWaitingPopup("instance").hide()},t.prototype.getSharedTreeDataSource=function(n){for(var f,e,i,t,o,s,u=[],r=0;r<n.length;r++){for(f=[],e=this.id+"_"+ej.DashboardUtil.escapeSelector(n[r].Key.dsName),u.push({id:e,name:n[r].Key.dsName,displayName:n[r].Key.dsName,ownerName:n[r].Key.dsOwnerName,lastUpdatedTime:n[r].Key.dsLastUpdatedTime,hasChild:!0,nodeProperty:{"class":"e-shared-datasource-header"},spriteImage:"e-designer-query-treeview e-reporticon e-reportdesigner-configuration-dataset e-reportdesigner-itempanel-icon",icon:"e-sharedtable-menu-icon"}),i=n[r].Value,t=0;t<i.length;t++)o=this.id+"_"+ej.DashboardUtil.escapeSelector(i[t].id),s=!ej.isNullOrUndefined(this.selectedItems[i[t].schema])&&!ej.isNullOrUndefined(this.selectedItems[i[t].schema][i[t].name])?"e-icon e-checkmark":this.schemaIcons.table,f.push({id:o,pid:this.id+"_"+ej.DashboardUtil.escapeSelector(n[r].Key.dsName),name:i[t].name,displayName:i[t].name,hasChild:!0,spriteImage:"e-designer-query-treeview "+s,nodeProperty:{"class":"ej-table-drag"},value:{schema:i[t].schema,viewType:"Tables",tableName:i[t].name},sourceId:i[t].sourceId});$.merge(u,f)}return u},t.prototype.resetTableFromDataSet=function(n,t){var i,r;if(!ej.isNullOrUndefined(n.Joins))for(i=n.Joins.length-1;i>=0;i--)if(r=n.Joins[i],r.LeftTable===t.Id||r.RightTable===t.Id){this.removeJoinAffectedTables(n,n.Joins.splice(i,n.Joins.length));break}this.removeFiltersOfDeletedTable(n,t);this.removeExpressionOfDeletedTable(n,t);this.tableItems[t.Id]=!1},t.prototype.removeJoinAffectedTables=function(n,t){var u,f,r,i;if(t.length!==0)for(u=t.length-1;u>0;u--)for(f=t[u],r=n.Tables.length-1;r>=0;r--)i=n.Tables[r],(i.Id===f.LeftTable||i.Id===f.RightTable)&&(n.Tables.splice(r,1),this.tableItems[i.Id]=!1,this.removeFiltersOfDeletedTable(n,i),this.removeExpressionOfDeletedTable(n,i))},t.prototype.removeFiltersOfDeletedTable=function(n,t){if(!ej.isNullOrUndefined(n.Filters))for(var i=n.Filters.length-1;i>=0;i--)n.Filters[i].TableId===t.Id&&n.Filters.splice(i,1)},t.prototype.removeExpressionOfDeletedTable=function(n,t){var r,i,u;if(!ej.isNullOrUndefined(n.Expressions))try{for(r=[],i=0;i<n.Expressions.length;i++)this.isExpFromUnavailableTable(t.Columns,n.Expressions[i].QueryExp)&&(r.indexOf(n.Expressions[i].Name)===-1&&r.push(n.Expressions[i].Name),this.getUnavailableTablehierarchyExpField(n,n.Expressions[i].Name,r));if(r&&r.length>0)for(i=0;i<r.length;i++)for(u=0;u<n.Expressions.length;u++)if(r[i]===n.Expressions[u].Name){n.Expressions.splice(u,1);break}}catch(f){ejDashboardDesigner.getInstance("DesignPanel").logError({Source:"Query Designer",Error:f,Type:f.name})}},t.prototype.isExpFromUnavailableTable=function(n,t){for(var i,r,f=!1,u=0;u<n.length;u++)if(i=n[u],r=i.Name,r=i.IsDuplicate?"["+i.Alias+"]":"["+r+"]",t&&ej.DashboardUtil.contains(t,r,!0)){f=!0;break}return f},t.prototype.getUnavailableTablehierarchyExpField=function(n,t,i){for(var r=0;r<n.Expressions.length;r++)ej.DashboardUtil.contains(n.Expressions[r].QueryExp,"["+t+"]",!0)&&(i.indexOf(n.Expressions[r].Name)===-1&&i.push(n.Expressions[r].Name),this.getUnavailableTablehierarchyExpField(n,n.Expressions[r].Name,i))},t}(ej.WidgetBase);window.ej.widget("ejQueryDesigner","ej.QueryDesigner",new ejQueryDesigner);ej.QueryDesigner.ToolbarItems={SelectDataSource:1,InputDataSet:2,Save:4,Execute:8,Join:16,Expression:32,Filter:64,Switcher:128,Cancel:256,All:511},function(n){n[n.Inner="Inner"]="Inner";n[n.LeftOuter="Left Outer"]="LeftOuter";n[n.RightOuter="Right Outer"]="RightOuter";n[n.FullOuter="Full Outer"]="FullOuter"}(Join||(Join={})),function(n){n[n.Equal="="]="Equal";n[n.LessThanEqual=">="]="LessThanEqual";n[n.GreaterThanEqual="<="]="GreaterThanEqual";n[n.NotEqual="!="]="NotEqual"}(Operator||(Operator={})),function(n){n[n.String=0]="String";n[n.Boolean=1]="Boolean";n[n.DateTime=2]="DateTime";n[n.Integer=3]="Integer";n[n.Float=4]="Float";n[n.Decimal=5]="Decimal"}(DataTypes||(DataTypes={})),function(n){n[n.None=0]="None";n[n.Google=1]="Google";n[n.Facebook=2]="Facebook";n[n.Twitter=3]="Twitter";n[n.Salesforce=4]="Salesforce";n[n.Smartsheet=5]="Smartsheet";n[n.Bitly=6]="Bitly";n[n.Asana=7]="Asana";n[n.Slack=8]="Slack";n[n.ZohoCRM=9]="ZohoCRM";n[n.Buffer=10]="Buffer";n[n.Todoist=11]="Todoist";n[n.QuickBooks=12]="QuickBooks";n[n.BaseCrm=13]="BaseCrm";n[n.Basecamp3=14]="Basecamp3";n[n.Intercom=15]="Intercom";n[n.Optimizely=16]="Optimizely";n[n.Pipedrive=17]="Pipedrive";n[n.Hubspot=18]="Hubspot";n[n.Pinterest=19]="Pinterest";n[n.LinkedIn=20]="LinkedIn";n[n.Microsoft=21]="Microsoft";n[n.SurveyMonkey=22]="SurveyMonkey";n[n.FreshBooks=23]="FreshBooks";n[n.Basecamp2=24]="Basecamp2";n[n.Infusionsoft=25]="Infusionsoft";n[n.Box=26]="Box"}(OAuthProvider||(OAuthProvider={}));InternalOAuthLoginHelper=function(){function n(){this.oAuthModel=null;this.designerInstance=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.designerInstance._id+"_oauth_config";ej.DashboardDesignerUtility.OAuthHelper.instance=this}return n.prototype.initialize=function(n,t){$(window).off("message",$.proxy(this.notifyOAuthStatus,this));$(window).on("message",$.proxy(this.notifyOAuthStatus,this));this.isWindowPresent()&&this.closeOAuthWindow();this.oAuthModel=n;this.launchWindow(t)},n.prototype.launchWindow=function(n){var t=this,i;this.isWindowPresent()&&this.closeOAuthWindow();i=ej.isNullOrUndefined(n)?this.getConnectUrl():this.getReAuthUrl(n);this.oAuthWindow=window.open(i,"OAuthPopUp","width=600,height=800,scrollbars=yes");ej.isNullOrUndefined(this.oAuthModel.windowCloseHandler)||(this.timer=setInterval($.proxy(function(){t.isWindowPresent()||t.notifyChildWindowClose()},this),2e3))},n.prototype.notifyChildWindowClose=function(){clearInterval(this.timer);ej.isNullOrUndefined(this.oAuthModel.windowCloseHandler)||ej.DashboardUtil.invokeCallBack(this.oAuthModel.windowCloseHandler,{})},n.prototype.getReAuthUrl=function(n){var t=this.designerInstance.model.serviceUrl+"../../oauth/re-authorize?";return this.designerInstance.model.serviceAuthorizationToken&&(t+="token="+this.designerInstance.model.serviceAuthorizationToken),ej.isNullOrUndefined(n.id)||(t+="&id="+n.id),ej.isNullOrUndefined(this.designerInstance.model.serverUrl)||(t+="&server="+this.designerInstance.model.serverUrl),this.oAuthModel.serviceId&&(t+="&service="+this.oAuthModel.serviceId),t+("&origin="+window.location.origin)},n.prototype.getConnectUrl=function(){var n=this.designerInstance.model.serviceUrl+"../../oauth/authenticate?";return this.oAuthModel.provider&&(n+="provider="+ej.DashboardDesignerUtility.Serialization.enumToString(OAuthProvider,this.oAuthModel.provider)),this.oAuthModel.serviceId&&(n+="&service="+this.oAuthModel.serviceId),this.designerInstance.model.serviceAuthorizationToken&&(n+="&token="+this.designerInstance.model.serviceAuthorizationToken),n+="&origin="+window.location.origin,ej.isNullOrUndefined(this.designerInstance.model.serverUrl)||(n+="&server="+this.designerInstance.model.serverUrl),n},n.prototype.closeOAuthWindow=function(){this.windowCheckInterval&&(clearInterval(this.windowCheckInterval),this.windowCheckInterval=null);this.oAuthWindow&&!this.oAuthWindow.closed&&this.oAuthWindow.close()},n.prototype.isWindowPresent=function(){return this.oAuthWindow&&!this.oAuthWindow.closed},n.prototype.notifyOAuthStatus=function(n){$(window).off("message",$.proxy(this.notifyOAuthStatus,this));this.notifyChildWindowClose();this.oAuthModel.handler&&ej.DashboardUtil.invokeCallBack(this.oAuthModel.handler,JSON.parse(n.originalEvent.data))},n}();window.ej.createObject("ej.DashboardDesignerUtility.OAuthHelper",InternalOAuthLoginHelper,window);InternalTableSelector=function(){function n(n,t){this.tableName=null;this.okBtnTag=null;this.isEditConnection=!1;this.codeChkSwitcher=null;this.designSwitcher=null;this.parameters=[];this.storedparameters=[];this.parameterCollection=[];this.refreshColumnCollection=[];this.noRecordSpan=null;this.refreshColumn=[];this.designerInstance=ejDashboardDesigner.getInstance("DashboardDesigner");this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.designerInstance._id+"_table_selector";this.dsInfo=n;this.isEditConnection=t;this.renderSchemaSelectorDialog();this.wireEvents()}return n.prototype.renderSchemaSelectorDialog=function(){var i=this,n,f,e,s,r,h,c,nt,tt;$("#"+this.id+"_dialog").length!==0&&this.dispose();var u=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect e-dashboarddesigner-schema-table","",{height:"530px"},{title:this.dsInfo.Provider==="WEB"&&this.dsInfo.DataFormat==="json"?this.designerInstance.locale.tableSelectorWindow.titleChooseSchema:!ej.isNullOrUndefined(this.dsInfo.OAuthConnection)&&this.dsInfo.OAuthConnection.Service==="analytics"||this.dsInfo.Provider==="Salesforce"?"Data Preview":this.designerInstance.locale.tableSelectorWindow.titleChooseTable,id:this.id+"_dialog"}),o=this.noRecordSpan=ej.buildTag("div.e-reportdesigner-dataset-noRecordMsg","",{"vertical-align":"middle","text-align":"center",display:"none",width:"650px",height:"400px","margin-top":"150px"},{id:this.id+"_div_no_records"}),it=ej.buildTag("span.e-reportdesigner-dataset-noRecordMsg","None of the columns are checked",{},{id:this.id+"_span_no_records"});o.append(it);n=ej.buildTag("div.e-dbrd-content","",{},{id:this.id+"_dialog_content"});f=ej.buildTag("div","",{float:"left","border-right":"1px solid #cecece",width:"100%"},{id:this.id+"_table_schemas"});this.tablesListDiv=ej.buildTag("div.e-dbrd-preview-grid-wrapper-dropdown","",{},{id:this.id+"_table_listDiv"});this.previewGridWrapper=ej.buildTag("div.e-dbrd-preview-grid-wrapper","",{});this.tableListRange=ej.buildTag("input","",{},{width:"160px",type:"text",id:this.id+"_table_listdrop"});this.previewWrapper=ej.buildTag("div","",{float:"right",height:"400px",width:"660px"},{id:this.id+"_table_preview_wrapper","class":"e-dbrd-table-preview-wrapper"});this.refreshColumnWrapper=ej.buildTag("div","",{float:"left",height:"380px",width:"600px"},{id:this.id+"_table_combobox_wrapper","class":"e-dbrd-table-combobox-wrapper"});this.storedParameterWrapper=ej.buildTag("div","",{float:"right",height:"380px",width:"660px"},{id:this.id+"_stored_parameter_wrapper","class":"e-dbrd-stored-parameter-wrapper"});this.refreshPreview=ej.buildTag("div","",{float:"right",height:"352px",width:"660px"},{id:this.id+"_table_preview_refresh","class":"e-dbrd-designer-schema-reload-overlay"});e=ej.buildTag("button.e-dbrd-designer-schema-refresh-button e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_refresh_btn"});this.refreshPreview.append(e);s=ej.buildTag("div","Preview",{float:"left","text-align":"left",height:"10px","padding-top":"5px","padding-bottom":"8px","font-family":"Roboto","font-weight":"Bold","font-size":"13px"});this.previewWrapper.append(s);r=ej.buildTag("div","",{float:"left",width:"650px"},{id:this.id+"_table_preview","class":"e-dbrd-designer-schema-preview"});r.append(this.refreshPreview);h=ej.buildTag("div","* Maximum 10 records are shown for preview purpose",{float:"left","text-align":"left",height:"10px","padding-top":"5px","font-family":"Roboto","font-style":"normal","font-size":"10px"});this.previewWrapper.append(r);this.previewWrapper.append(h);this.storedProcedureMsgWrapper=ej.buildTag("div","",{float:"left",height:"20px",width:"600px",display:"none"},{id:this.id+"_table_proc_msg_wrapper"});c=ej.buildTag("div","One or more stored procedures are selected. Ensure that proper parameters are set.",{height:"100%",width:"100%",overflow:"hidden","white-space":"pre","text-overflow":"ellipsis",color:"red","margin-left":"10px","font-size":"12px"},{id:this.id+"_table_proc_msg_test"});this.storedProcedureMsgWrapper.append(c);var l=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_cancel_btn"}),a=this.okBtnTag=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_ok_btn"}),v=ej.buildTag("div","",{float:"left"},{id:this.id+"_select_all_div"}),y=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_select_all_chk_box"});v.append(y,ej.buildTag("label.e-designer-content-label",this.designerInstance.locale.tableSelectorWindow.selectAllText,{"margin-left":"10px"},{"for":this.id+"_select_all_chk_box"}));this.tablesListDiv.append(this.tableListRange);this.previewGridWrapper.append(this.tablesListDiv);this.previewGridWrapper.append(this.previewWrapper);this.previewGridWrapper.append(o);n.append(f);n.append(this.previewGridWrapper);n.append(this.refreshColumnWrapper);n.append(this.storedParameterWrapper);n.append(this.storedProcedureMsgWrapper);var t=ej.buildTag("table","",{width:"550px"},{id:this.id+"_refresh_column_table"}),p=$("<tr id='"+this.id+"refresh_combobox_title_row' style='display: table-row'/>"),w=$("<td id='"+this.id+"refresh_combobox_title_td'/>"),b=$("<tr id='"+this.id+"refresh_combobox_row' style='display: table-row'/>"),k=$("<tr id='"+this.id+"switcher_row'/>"),d=$("<tr id='"+this.id+"refresh_max_limit_row_tr style='display: table-row'/>"),g=$("<td id='"+this.id+"refresh_max_limit_row'/>");d.append(g);t.append(p);t.append(k);t.append(b);t.append(d);this.refreshColumnWrapper.append(t);u.append(n);nt=ej.buildTag("label.editLabel e-designer-choose-table-title-label",this.designerInstance.locale.sqlExtactModeLocale.refreshColumnTitle,{"margin-left":"6px"},{});w.append(nt);p.append(w);this.renderDropDownList(b);this.renderCodeSwitcher(k);this.renderStoredParameter(this.storedParameterWrapper);this.datasource.renderNumericItem("Max Rows",this.id+"_max_count",g,null,null,null,!1,"250px",!0,1);this.maxRowsDrpdwn=t.find("#"+this.id+"_max_count").data("ejNumericTextbox");this.maxRowsDrpdwn.option("value",1e4);this.maxRowsDrpdwn.option("incrementStep",1e3);this.maxRowsElement=t.find("#"+this.id+"_max_count_tr");this.maxRowsElement.hide();this.designerInstance.element.append(u);this.tableListRange.ejDropDownList({width:"160px",height:"28px",fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,popupWidth:"170px",cssClass:"e-designer-param-assign e-designer-ejwidgets e-dbrd-control"});this.previewGrid=r.ejGrid({allowScrolling:!0,allowSelection:!1,allowResizing:!0,enableAltRow:!0,dataSource:[{expand:"schema,names",startAt:0,maxResults:100,total:287}],scrollSettings:{width:650,height:310,allowVirtualScrolling:!0,autoHide:!0},commonWidth:100}).data("ejGrid");this.ejTreeView=f.ejTreeView({height:"430",width:"300",showCheckbox:!0,fields:{hasChild:"HasChild",id:"id",parentId:"parentId",text:"name",htmlAttribute:"htmlAttribute"},template:this.getTableTreeViewTemplate(),enableAnimation:!0,nodeExpand:$.proxy(function(){i.dialog.scroller&&i.dialog.scroller.refresh()},this),nodeCollapse:$.proxy(function(){i.dialog.scroller&&i.dialog.scroller.refresh()},this)}).data("ejTreeView");this.dialog=u.ejDialog({enableModal:!0,minWidth:1e3,width:1e3,maxWidth:1e3,enableResize:!1,showOnInit:!1,cssClass:"e-designer-dialog e-dashboarddesigner e-dbrd-control",minHeight:500,height:530,maxHeight:530,showFooter:!0,close:$.proxy(ej.DashboardUtil.closeDialog,this),beforeClose:$.proxy(this.onDialogClose,this),containment:"#"+this.designerInstance._id}).data("ejDialog");tt=this.footerTag=$("#"+this.id+"_dialog_foot");tt.append(v,l,a);this.okButton=a.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.dataSource.connectButtonText,click:$.proxy(this.okButtonClick,this)}).data("ejButton");this.cancelButton=l.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.tableSelectorWindow.cancelButtonText,click:$.proxy(this.cancelButtonClick,this)}).data("ejButton");this.reloadButton=e.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.tableSelectorWindow.reloadButtonText,click:$.proxy(this.reloadButtonClick,this)}).data("ejButton");this.ejSelectAllChkBx=y.ejCheckBox({change:$.proxy(this.onSelectAllCheckChange,this)}).data("ejCheckBox");$("#"+this.id+"_table_preview_wrapper").ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"});$("#"+this.id+"_dialog_wrapper").ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader",text:this.designerInstance.locale.tableSelectorWindow.waitingPopupText});this.previewGrid.element.find(".e-table").css("width","100%");this.refreshPreview.hide()},n.prototype.renderStoredParameter=function(n){var i=ej.buildTag("div.e-userselect","",{display:"block"},{title:"Parameters",id:this.id+"_parameter_dialog"});n.append(i);var r=ej.buildTag("div","",{height:"360px",width:"100%",margin:"4px 0px"}),t=ej.buildTag("div.e-dbrd-designer-scroller e-dbrd-control","",{border:"0.5px solid #c9cbcc","border-radius":"2px",height:"360px",width:"100%","background-color":"white"},{id:this.id+"_topDiv_parameter_dialog"}),u=ej.buildTag("div","",{},{}),f=ej.buildTag("table.e-designer-exp-table","",{padding:"0px 8px"},{id:this.id+"_proc_parameters"});u.append(f);t.append(u);r.append(t);i.append(r);t.ejScroller({height:"360px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14})},n.prototype.renderParameter=function(n,t){var i=n.Name.substring(1),o=ej.buildTag("tr","",{height:"36px"}),a=ej.buildTag("td",n.Name,{height:"30px",width:"150px"}),v=ej.buildTag("td",n.DataType,{height:"30px",width:"100px"}),s=ej.buildTag("td","",{height:"30px",width:"100px"}),r=ej.buildTag("td","",{height:"30px",width:"150px"}),h=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_chk_"+i}),u,c,f,e,l;o.append(a).append(v).append(s).append(r);t.append(o);s.append(h);h.ejCheckBox({change:$.proxy(this.checkNullable,this,{id:this.id+"_proc_"+i,dataType:n.DataType}),showRoundedCorner:!0,cssClass:"e-designer-border"});n.DataType==="bit"?(u=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_proc_"+i}),r.append(u),u.ejCheckBox({showRoundedCorner:!0,cssClass:"e-designer-border"})):ej.DashboardUtil.contains(n.DataType,"int",!0)||ej.DashboardUtil.contains(n.DataType,"money",!0)||n.DataType==="float"||n.DataType==="numeric"||n.DataType==="decimal"?(c=ej.buildTag("input.e-textbox e-animation e-designer-border","",{height:"25px",width:"140px"},{type:"number",id:this.id+"_proc_"+i}),r.append(c)):ej.DashboardUtil.contains(n.DataType,"datetime",!0)?(f=ej.buildTag("input","",{"font-style":"normal"},{type:"text",id:this.id+"_proc_"+i}),r.append(f),f.ejDateTimePicker({width:"100%",height:"30px",cssClass:"e-designer-border e-dashboarddesigner-widget"})):ej.DashboardUtil.contains(n.DataType,"date",!0)?(e=ej.buildTag("input","",{"font-style":"normal"},{type:"text",id:this.id+"_proc_"+i}),r.append(e),e.ejDatePicker({width:"100%",height:"30px",showRoundedCorner:!0,cssClass:"e-designer-border e-dbrd-designer-relative-picker e-dashboarddesigner-widget"})):(l=ej.buildTag("input.e-textbox e-animation e-designer-border","",{height:"25px",width:"140px"},{type:"text",id:this.id+"_proc_"+i}),r.append(l))},n.prototype.checkNullable=function(n,t){this.checkNullparameter(n,t.isChecked)},n.prototype.checkNullparameter=function(n,t){n.dataType==="bit"?t?$("#"+n.id).data("ejCheckBox").disable():$("#"+n.id).data("ejCheckBox").enable():ej.DashboardUtil.contains(n.dataType,"datetime",!0)?t?$("#"+n.id).data("ejDateTimePicker").disable():$("#"+n.id).data("ejDateTimePicker").enable():ej.DashboardUtil.contains(n.dataType,"date",!0)?t?$("#"+n.id).data("ejDatePicker").disable():$("#"+n.id).data("ejDatePicker").enable():t?($("#"+n.id).attr("disabled","disabled"),$("#"+n.id).val(""),$("#"+n.id).val("null")):($("#"+n.id).removeAttr("disabled"),$("#"+n.id).val(""))},n.prototype.renderProcParameters=function(n){var t=$("#"+this.id+"_proc_parameters"),i,f,e,o,s;t.removeClass("e-designer-no-params");t.empty();var r=ej.buildTag("tr"),h=ej.buildTag("td","<b>Parameter<\/b>",{height:"30px",width:"150px"}),c=ej.buildTag("td","<b>DataType<\/b>",{height:"30px",width:"100px"}),l=ej.buildTag("td","<b>Null<\/b>",{height:"30px",width:"100px"}),a=ej.buildTag("td","<b>Value<\/b>",{height:"30px",width:"150px"}),u=this.storedparameters.Schemas[n.SchemaName][n.Type][n.name];if(this.selectedCurrentItem=n,i=ej.isNullOrUndefined(u)?null:Object.keys(u),i!==null&&i.length>0){for(this.parameters=u,r.append(h).append(c).append(l).append(a),t.append(r),f=0;f<i.length;f++)e=u[i[f]],this.renderParameter(e,t);return!0}return o=this.renderNoParameter(),s=ej.buildTag("td",o,{}),r.append(s),t.append(r).addClass("e-designer-no-params"),this.parameters=null,!1},n.prototype.renderNoParameter=function(){return"<div class='e-dbrd-no-params-msg-wrap' style='text-align: center'><label class='e-dbrd--no-params-msg'>"+this.designerInstance.locale.sqlExtactModeLocale.noParamsText+"<\/label><\/div>"},n.prototype.renderDropDownList=function(n){var t=$("<td style=' float:left;  margin: 6px 0 0 6px;' />"),i=$("<td style=' float:left;' />"),r=this.designSwitcher=ej.buildTag("div","",{display:"block",padding:"4px 0","margin-left":"6px"},{id:this.id+"_design_switcher"}),f=this.designSwitcher=ej.buildTag("div","",{display:"block",padding:"4px 0","margin-left":"6px"},{id:this.id+"_switcher_label"}),u=ej.buildTag("label.editLabel e-designer-title-label",this.designerInstance.locale.sqlExtactModeLocale.incrementalRefreshText,{},{});this.refreshColumnDropDownList=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_drd_datasource"});n.append(t);n.append(i);f.append(u);r.append(this.refreshColumnDropDownList);t.append(u);i.append(r);n.append(n);this.refreshColumnDropDownList.ejDropDownList({width:"250px",watermarkText:this.designerInstance.locale.sqlExtactModeLocale.noDateColumns,cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control",showRoundedCorner:!0});this.refreshColumnDropDownList.data("ejDropDownList").disable()},n.prototype.renderCodeSwitcher=function(n){var i=$("<td style=' float:left;' />"),r=$("<td style=' float:left; margin: 3px 0 0 10px;' />"),u=$("<td style=' float:left; margin: 3px 0 0 10px;' class = 'e-designer-schema-refresh-msg-td'/>"),f=this.designSwitcher=ej.buildTag("div","",{display:"block",padding:"4px 0","margin-left":"6px"},{id:this.id+"_design_switcher"}),o=this.designSwitcher=ej.buildTag("div","",{display:"block",padding:"4px 0","margin-left":"6px"},{id:this.id+"_switcher_label"}),e=ej.buildTag("label.editLabel e-designer-title-label",this.designerInstance.locale.sqlExtactModeLocale.incrementalRefresh,{},{}),t=ej.buildTag("label.e-reportdesigner-switch","",{display:"inline-block",float:"left"},{id:this.id+"_code_switcher"}),s=ej.buildTag("label.editLabel",this.designerInstance.locale.sqlExtactModeLocale.nodateErrMsg,{"font-size":"12px",color:"red"},{});this.codeChkSwitcher=$("<input type='checkbox' id="+this.id+"_chck_on class='e-designer-schema-refresh-switch'>");t.append(this.codeChkSwitcher);t.append("<div style='cursor:pointer;' class='e-reportdesigner-slider round'/>");n.append(i);n.append(r);n.append(u);o.append(e);f.append(t);i.append(f);r.append(e);u.append(s);this.codeChkSwitcher.addClass("e-disable");this.codeChkSwitcher.prop("checked",!1);this.designerInstance.element.off("change",".e-designer-schema-refresh-switch",$.proxy(this.switcherChanged,this));this.designerInstance.element.on("change",".e-designer-schema-refresh-switch",$.proxy(this.switcherChanged,this))},n.prototype.switcherChanged=function(){this.codeChkSwitcher.hasClass("e-disable")?this.codeChkSwitcher.prop("checked",!1):this.codeChkSwitcher.is(":checked")?this.refreshColumnDropDownList.data("ejDropDownList").enable():this.refreshColumnDropDownList.data("ejDropDownList").disable()},n.prototype.getTableTreeViewTemplate=function(){return"<div><div title={{:name}} class='e-schema-table-text'>{{:name}}<\/div>{{if refreshColumn}}<div id="+this.id+"_refresh_setting-icon' class='{{:refreshColumn}}' data-schemaId='{{:id}}'/><\/div>{{/if}}"},n.prototype.getTableNameList=function(n){for(var i=[],t=0;t<n.Name.length;t++)i.push({text:n.Name[t],value:n.Name[t]});return this.tableList=$.extend(!0,{},i),i},n.prototype.changeTableName=function(n,t){for(var u=JSON.parse(n),f=null,i=t.value,e=this.getSelectedTables(this.ejTreeView.element),o=function(n){var t=e[n],r;t.name===i&&t.items.length!==u.PreviewSchema[i].length&&(r=u.PreviewSchema[i].filter(function(n){return t.items.some(function(t){return n.id===t.id})}),f=u.PreviewSchema[i].filter(function(n){return r.indexOf(n)<0}))},r=0;r<e.length;r++)o(r);if(this.alterGridColumnSize(u.PreviewSchema[i]),this.previewGrid.setModel({dataSource:u.PreviewData[i],columns:u.PreviewSchema[i]}),this.previewGridRefresh(),!ej.isNullOrUndefined(f))for(r=0;r<f.length;r++)this.previewGrid.hideColumns(f[r].headerText)},n.prototype.previewGridRefresh=function(){this.previewGrid.refreshScrollerEvent();this.previewGrid.getScrollObject().refresh();this.previewGrid.element.find(".e-gridcontent .e-content").css("height","unset");this.previewGrid.element.find(".e-gridcontent .e-content").css("width","unset")},n.prototype.schemaCheck=function(n){var t,i,r,u;this.showNoColumnMessage(!1);this.updateSelectAllStatus();this.isSupportedDatabaseType(this.dsInfo.Provider)?(t=this.getTreeViewDataItem(n.id),ej.isNullOrUndefined(t)||t.Type!=="Procedures"?(i=$(this.ejTreeView.element.find("#"+n.id).find(">ul>li")[0]),r=this.getTreeViewDataItem(i.attr("id")),ej.isNullOrUndefined(r)||r.Type!=="Procedures"||(i.addClass("e-dbrd-schema-stored-proc"),this.procMsgVisibilityUpdate(!0))):(this.ejTreeView.getCheckedNodes().filter("#"+n.id).addClass("e-dbrd-schema-stored-proc"),this.procMsgVisibilityUpdate(!0))):this.isFlatType(this.dsInfo)||this.dsInfo.DataFormat===WebDataFormat.csv?(u=this.ejTreeView.model.fields.dataSource.filter(function(t){return t.id===n.id})[0],this.tablesListDiv.css("display")==="block"?this.checkSchemaForFlatType(u):this.previewGrid.showColumns(u.name)):this.refreshPreview.show()},n.prototype.checkSchemaForFlatType=function(n){var i,u,e,o,s,f,r,t;if(this.showNoColumnMessage(!1),i=this.tableListRange.data("ejDropDownList"),u=this.tableListRange.val(),u.replace(" ","").toLocaleLowerCase()===n.parentId)if(!ej.isNullOrUndefined(i.model.disableItemsByIndex)&&i.model.disableItemsByIndex.length>0){for(r=i.model.dataSource,t=0;t<r.length;t++)if(r[t].value.toLocaleLowerCase()===n.parentId.toLocaleLowerCase()){i.enableItemByIndex(t);i.enable();this.previewGrid.showColumns(n.name);return}}else this.previewGrid.showColumns(n.name);else if(n.parentId===""){if(r=i.model.dataSource,u.toLocaleLowerCase()===n.field.toLocaleLowerCase())for(t=0;t<this.previewGrid.model.columns.length;t++)this.previewGrid.showColumns(this.previewGrid.model.columns[t].headerText);for(t=0;t<r.length;t++)if(r[t].value===n.headerText){e=r.filter(function(n){return n.value===u})[0];o=ej.isNullOrUndefined(i.model.disableItemsByIndex)?[]:i.model.disableItemsByIndex.split(",");i.enableItemByIndex(t);i.enable();s=r.indexOf(e).toString();o.indexOf(s)!==-1&&this.tableListRange.ejDropDownList({selectedIndex:t});return}}else if(!ej.isNullOrUndefined(i.model.disableItemsByIndex)&&i.model.disableItemsByIndex.length>0&&(f=i.model.disableItemsByIndex.split(","),r=i.model.dataSource,f.length===r.length))for(t=0;t<r.length;t++){if(r[t].value===n.headerText){i.enableItemByIndex(t);i.enable();return}if(r[t].value.replace(" ","").toLocaleLowerCase()===n.parentId&&u!==r[t].value){i.enableItemByIndex(t);i.enable();f.indexOf(t.toString())!==-1&&this.tableListRange.ejDropDownList({selectedIndex:t});return}}},n.prototype.showNoColumnMessage=function(n){this.noRecordSpan.css("display",n?"inline-block":"none");this.previewWrapper.css("display",n?"none":"block")},n.prototype.procMsgVisibilityUpdate=function(n){n?this.storedProcedureMsgWrapper.css("display","block"):this.storedProcedureMsgWrapper.css("display","none")},n.prototype.schemaSelect=function(){var n=this.getTreeViewDataItem(this.ejTreeView.getSelectedNode().attr("id")),t;n.Type==="Procedures"?(ej.isNullOrUndefined(this.selectedCurrentItem)||this.getParameterValues(),ej.isNullOrUndefined(this.selectedCurrentTable)||this.getRefreshColumns(),this.refreshColumnWrapper.hide(),this.storedParameterWrapper.show(),this.renderProcParameters(n),this.setProcParams(),$("#"+this.id+"_topDiv_parameter_dialog").data("ejScroller")!==null&&$("#"+this.id+"_topDiv_parameter_dialog").data("ejScroller").refresh(),this.selectedCurrentTable=null):(t=this.getTreeViewDataItem(this.ejTreeView.getSelectedNode().attr("id")),ej.isNullOrUndefined(this.selectedCurrentItem)||this.getParameterValues(),ej.isNullOrUndefined(this.selectedCurrentTable)||this.getRefreshColumns(),this.selectedCurrentTable=t,this.setRefreshColumns(),this.storedParameterWrapper.hide(),this.refreshColumnWrapper.show(),this.selectedCurrentItem=null)},n.prototype.setRefreshColumns=function(){var a=this,u=[],i=this.getTreeViewDataItem(this.ejTreeView.getSelectedNode().attr("id")),f,r,t,n,e;if(i.Type==="Views"){var h="Schemas",c="SchemaName",l=this.storedparameters[h][i[c]]["Viewes"],o=Object.keys(l);for(r=0;r<o.length;r++)o[r]===i.name&&(f=l[o[r]]);for(t=Object.keys(f),n=0;n<t.length;n++)f[t[n]].DataType==="Date"&&u.push(f[t[n]].Name)}else{var h="Schemas",c="SchemaName",s=this.storedparameters[h][i[c]][i["Type"]][i["name"]],t=Object.keys(s);for(n=0;n<t.length;n++)s[t[n]].DataType==="Date"&&u.push(s[t[n]].Name)}this.refreshColumnDropDownList.data("ejDropDownList").setModel({dataSource:u});u.length>0?(this.dialog.element.find(".e-designer-schema-refresh-msg-td").css("display","none"),this.codeChkSwitcher.removeClass("e-disable")):(this.dialog.element.find(".e-designer-schema-refresh-msg-td").css("display","block"),this.codeChkSwitcher.addClass("e-disable"));e=this.refreshColumnCollection.filter(function(n){return n.Id===a.selectedCurrentTable.id});e.length>0&&e[0].IsRefreshColumn?(this.refreshColumnDropDownList.data("ejDropDownList").selectItemByText(e[0].ColumnName),this.codeChkSwitcher.prop("checked",!0),this.refreshColumnDropDownList.data("ejDropDownList").enable()):(this.refreshColumnDropDownList.data("ejDropDownList").selectItemsByIndices("0"),this.codeChkSwitcher.prop("checked",!1),this.refreshColumnDropDownList.data("ejDropDownList").disable())},n.prototype.getRefreshColumns=function(){for(var u=this,n=this.refreshColumnDropDownList.data("ejDropDownList").getSelectedValue(),r=this.codeChkSwitcher.is(":checked"),i=this.refreshColumnCollection.filter(function(n){return n.Id===u.selectedCurrentTable.id}),t=0;t<i.length;t++)n===i[t].ColumnName&&this.refreshColumnCollection.splice($.inArray(i[t],this.refreshColumnCollection),1);r&&n!==""&&!ej.isNullOrUndefined(n)&&this.refreshColumnCollection.push({ColumnName:n,IsRefreshColumn:r,MaxLimit:null,Id:this.selectedCurrentTable.id,TableName:this.selectedCurrentTable.name})},n.prototype.getParameterValues=function(){var u=this,n=this.getProcParams(),t,r,i;if(!ej.isNullOrUndefined(n)&&n.length>0)for(t=0;t<n.length;t++){for(r=this.parameterCollection.filter(function(n){return n.Id===u.selectedCurrentItem.id}),i=0;i<r.length;i++)n[t].Name===r[i].Name&&this.parameterCollection.splice($.inArray(r[i],this.parameterCollection),1);n[t].Value!==""&&this.parameterCollection.push({Name:n[t].Name,IsNull:n[t].IsNull,Value:n[t].Value,DataType:n[t].DataType,ParentSchemaName:this.selectedCurrentItem.ParentSchemaName,Id:this.selectedCurrentItem.id,TableName:this.selectedCurrentItem.name})}},n.prototype.setProcParams=function(){var f=this,r,t,u,n,i;if(this.parameters&&(r=this.parameterCollection.filter(function(n){return n.Id===f.selectedCurrentItem.id}),t=Object.keys(this.parameters),t.length>0))for(u=function(i){var u=n.parameters[t[i]],f=u.Name.substring(1),e=r.filter(function(n){return n.Name===u.Name}),h=$("#"+n.id+"_chk_"+f),s,o;e.length>0&&(e[0].IsNull?(h.ejCheckBox({checked:!0}),n.checkNullparameter({id:n.id+"_proc_"+f,dataType:u.DataType},!0)):u.DataType==="bit"?(s=$("#"+n.id+"_proc_"+f),s.ejCheckBox({checked:e[0].Value})):ej.DashboardUtil.contains(u.DataType,"datetime",!0)?(o=$("#"+n.id+"_proc_"+f).data("ejDateTimePicker"),o.setModel({value:e[0].Value})):ej.DashboardUtil.contains(u.DataType,"date",!0)?(o=$("#"+n.id+"_proc_"+f).data("ejDatePicker"),o.setModel({value:e[0].Value})):ej.DashboardUtil.contains(u.DataType,"int",!0)||u.DataType==="numeric"?$("#"+n.id+"_proc_"+f).val(e[0].Value):ej.DashboardUtil.contains(u.DataType,"money",!0)||u.DataType==="float"||u.DataType==="decimal"?$("#"+n.id+"_proc_"+f).val(e[0].Value):$("#"+n.id+"_proc_"+f).val(e[0].Value))},n=this,i=0;i<t.length;i++)u(i)},n.prototype.getProcParams=function(){var t=[],r,u;if(this.parameters&&(r=Object.keys(this.parameters),r.length>0)){for(u=0;u<r.length;u++){var n=this.parameters[r[u]],i=n.Name.substring(1),f=$("#"+this.id+"_chk_"+i).data("ejCheckBox");f.isChecked()?t.push({Name:n.Name,IsNull:!0,DataType:n.DataType,Value:null}):n.DataType==="bit"?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:$("#"+this.id+"_proc_"+i).data("ejCheckBox").isChecked()}):ej.DashboardUtil.contains(n.DataType,"datetime",!0)?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:$("#"+this.id+"_proc_"+i).data("ejDateTimePicker").getValue()}):ej.DashboardUtil.contains(n.DataType,"date",!0)?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:$("#"+this.id+"_proc_"+i).data("ejDatePicker").getValue()}):ej.DashboardUtil.contains(n.DataType,"int",!0)||n.DataType==="numeric"?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:parseInt($("#"+this.id+"_proc_"+i).val(),10)}):ej.DashboardUtil.contains(n.DataType,"money",!0)||n.DataType==="float"||n.DataType==="decimal"?t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:parseFloat($("#"+this.id+"_proc_"+i).val())}):t.push({Name:n.Name,IsNull:!1,DataType:n.DataType,Value:$("#"+this.id+"_proc_"+i).val()})}return t}return null},n.prototype.schemaUnCheck=function(n){var t,i;this.updateSelectAllStatus();this.isFlatType(this.dsInfo)||this.dsInfo.DataFormat===WebDataFormat.csv?(t=this.ejTreeView.model.fields.dataSource.filter(function(t){return t.id===n.id})[0],this.tablesListDiv.css("display")==="block"?this.uncheckSchemaForFlatType(t):this.previewGrid.hideColumns(t.name)):this.isSupportedDatabaseType(this.dsInfo.Provider)?(i=this.getTreeViewDataItem(n.id),ej.isNullOrUndefined(i)||i.Type!=="Procedures"||this.ejTreeView.getCheckedNodes().filter("#"+n.id).removeClass("e-dbrd-schema-stored-proc"),this.ejTreeView.getCheckedNodes().filter(".e-dbrd-schema-stored-proc").length===0&&this.procMsgVisibilityUpdate(!1)):this.refreshPreview.show()},n.prototype.uncheckSchemaForFlatType=function(n){var s=this.tableListRange.val(),r,i,t,e,o,u,f;if(s.replace(" ","").toLocaleLowerCase()===n.parentId)this.previewGrid.hideColumns(n.name);else if(n.parentId==="")for(r=this.tableListRange.data("ejDropDownList"),i=r.model.dataSource,t=0;t<i.length;t++){if(i[t].value===this.tableListRange.val()&&i[t].value===n.headerText){if(r.disableItemByIndex(t),t<i.length)if(e=r.model.disableItemsByIndex,ej.isNullOrUndefined(e))this.tableListRange.ejDropDownList({selectedIndex:t+1});else if(o=this.getEnabledItems(i,e),o.length>0)this.tableListRange.ejDropDownList({selectedIndex:this.getSelectedIndex(o,t,i.length)});else{for(r.disable(),u=0;u<this.previewGrid.model.columns.length;u++)this.previewGrid.hideColumns(this.previewGrid.model.columns[u].headerText);this.showNoColumnMessage(!0)}else{for(r.disable(),f=0;f<this.previewGrid.model.columns.length;f++)this.previewGrid.hideColumns(this.previewGrid.model.columns[f].headerText);this.showNoColumnMessage(!0)}return}if(n.headerText===i[t].value){r.disableItemByIndex(t);return}}},n.prototype.getEnabledItems=function(n,t){for(var r=[],i=0;i<n.length;i++)t.indexOf(i)===-1&&r.push(i);return r},n.prototype.getSelectedIndex=function(n,t,i){for(var r=-1,u=!1;t+1<i;){if(n.indexOf(t+1)!==-1)return r=t+1,u=!0,r;t=t+1}if(!u)while(t>0){if(n.indexOf(t-1)!==-1)return t-1;t=t-1}return r},n.prototype.updateSelectAllStatus=function(){this.ejSelectAllChkBx.model.change=null;ej.DashboardUtil.buttonEnable(this.okBtnTag,!0);this.ejTreeView.getCheckedNodes().length===0?(this.ejSelectAllChkBx.option("checked",!1),ej.DashboardUtil.buttonEnable(this.okBtnTag,!1)):this.ejTreeView.getCheckedNodes().length===this.ejTreeView.model.fields.dataSource.length?(this.ejSelectAllChkBx.option("checked",!0),this.ejSelectAllChkBx.setModel({enableTriState:!1})):this.ejSelectAllChkBx.setModel({enableTriState:!0,checkState:"indeterminate"});this.ejSelectAllChkBx.model.change=$.proxy(this.onSelectAllCheckChange,this)},n.prototype.alterGridColumnSize=function(n){!ej.isNullOrUndefined(n)&&n.length<=6?this.previewGrid.setModel({commonWidth:650/n.length}):this.previewGrid.setModel({commonWidth:100});this.previewGrid.getScrollObject().setModel({scrollLeft:0,scrollTop:0})},n.prototype.showDialog=function(n,t){var u=this.isSupportedDatabaseType(this.dsInfo.Provider)?this.getTreeViewTableDataSource(ej.isNullOrUndefined(n)?[]:n.Table):ej.isNullOrUndefined(n)?[]:n.Table,i,r;this.ejTreeView.option("fields.dataSource",u);i=this.dialog.element.find("#"+this.id+"_table_schemas");r=this.footerTag.find("#"+this.id+"_select_all_div");this.originalData=JSON.stringify(n);i.css("display")==="none"&&(i.css("display","block"),r.css("display","block"));ej.isNullOrUndefined(n.hasTreeView)||n.hasTreeView||(i.css("display","none"),r.css("display","none"));this.isSupportedDatabaseType(this.dsInfo.Provider)&&this.dsInfo.Mode==="Extract"?(ej.isNullOrUndefined(t)||(this.storedparameters=JSON.parse(t)),this.hasPreview=!0,this.tablesListDiv.css("display","none"),this.dialog.setModel({width:1e3,minWidth:1e3,maxWidth:1e3}),i.css("border-right","1px solid #cecece"),i.css("padding-left","0px"),this.ejTreeView.setModel({width:300}),this.previewGridWrapper.hide(),this.storedParameterWrapper.hide()):n.hasPreviewData?(this.hasPreview=!0,this.previewWrapper.show(),n.hasTreeView?(this.dialog.setModel({width:1e3,minWidth:1e3,maxWidth:1e3}),i.css("border-right","1px solid #cecece"),i.css("padding-left","0px"),this.ejTreeView.setModel({width:300})):this.dialog.setModel({width:700,minWidth:700,maxWidth:700}),this.tableListRange.ejDropDownList({dataSource:this.getTableNameList(n),selectedIndex:0,change:$.proxy(this.changeTableName,this,this.originalData)}),n.Name.length===1&&(this.tablesListDiv.css("display","none"),this.dialog.setModel({height:500,maxHeight:500}),this.ejTreeView.setModel({height:400}),this.previewGridWrapper.css("height","400px")),this.alterGridColumnSize(n.PreviewSchema[n.Name[0]]),this.previewGrid.setModel({dataSource:n.PreviewData[n.Name[0]],columns:n.PreviewSchema[n.Name[0]]}),this.previewGridRefresh(),this.storedParameterWrapper.hide(),this.refreshColumnWrapper.hide()):(this.hasPreview=!1,this.previewWrapper.hide(),this.dialog.setModel({width:500,minWidth:500,maxWidth:500}),this.ejTreeView.setModel({width:450}),i.css("border-right","none"),i.css("padding-left","20px"),this.storedParameterWrapper.hide(),this.refreshColumnWrapper.hide());this.tableName=n.Name[0];this.dialog.open();this.isSupportedDatabaseType(this.dsInfo.Provider)?(ej.DashboardUtil.buttonEnable(this.okBtnTag,!1),this.ejSelectAllChkBx.option("checked",!1)):(this.ejTreeView.checkAll(),this.ejSelectAllChkBx.option("checked",!0));this.previewGrid.element.find(".e-pagerstatusbar").hide();this.dialog.scroller&&(this.dialog.scroller.model.autoHide=!0,this.dialog.scroller.model.scrollerSize=10,this.dialog.scroller.refresh());this.ejTreeView.option("nodeCheck",$.proxy(this.schemaCheck,this));this.ejTreeView.option("nodeUncheck",$.proxy(this.schemaUnCheck,this));this.ejTreeView.option("nodeSelect",$.proxy(this.schemaSelect,this));this.previewGridRefresh()},n.prototype.getTreeViewTableDataSource=function(n){var r,i,t;if(n.length>0)for(r=n.filter(function(n){return n.HasChild===!1}),i=r.filter(function(n){return n.DataType==="Date"}),t=0;t<i.length;t++)i[t].refreshColumn="e-refresh-column-icon";return n},n.prototype.dispose=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_dialog"));this.cancelButton=null;this.okButton=null;this.ejTreeView=null;this.dialog=null;$("#"+this.id+"_dialog").remove();this.unwireEvents()},n.prototype.okButtonClick=function(){if(this.isEditConnection&&!this.queryDesigner.designState()){this.isDriveFilePicker&&(this.editConnection=ejDashboardDesigner.getInstance("EditConnection"),this.editConnection.setInfo(this.dsInfo,this.isEditConnection,this.dialog,this.editTableSelector));var t=this.getSelectedTables(this.ejTreeView.element),n=new ExtractionModeDetails;n=this.getExtractionDetail(n);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designerInstance.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.ReconnectDatabase,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.ReconnectDatabase,datasource:this.editConnection.encryptPostBack(this.dsInfo),dataSetId:this.queryDesigner.dataset.Id,schemas:t,codeView:this.queryDesigner.designState(),extractionDetails:n})},{fnction:$.proxy(this.editConnection.validateConnection,this.editConnection),indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)]})}else this.isEditConnection&&this.queryDesigner.designState()?ej.DashboardUtil.getInstance().alertDialog(this.designerInstance.locale.alertDialogTitle.SchemaMismatch,this.designerInstance.locale.alertWindowMesages.schemaMatchforCodeView,IconType.warning,AlertType.Confirm,!1,"",{height:140,width:500,method:"confirmAction",instance:this}):this.getFileData()},n.prototype.confirmAction=function(n){n?this.getFileData():(this.dialog.close(),this.dispose(),this.editConnection.divEditor.data("ejDialog").open())},n.prototype.getFileData=function(n){var t,i;this.isSupportedDatabaseType(this.dsInfo.Provider)?(t=new ExtractionModeDetails,t=this.getExtractionDetail(t),this.processExtractAction(t,n)):(i=ej.DashboardDesignerUtility.DesignerHub.DesignerHub,i.GetStatusFromServer("GetStatusFromServer",{indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)],fnction:$.proxy(this.onActionSuccess,this,n)}),i.StartHubConnection({indicator:[$.proxy(this.showIndicator,this)],fnction:$.proxy(this.processFileData,this)}))},n.prototype.isSupportedDatabaseType=function(n){return["SQL","PostgreSQL","Oracle","MySQL","MariaDB","AmazonAuroraMySQL","AmazonAuroraPostgreSQL","GoogleCloudMySQL","GoogleCloudPostgreSQL","MemSQL"].indexOf(n)!==-1},n.prototype.getExtractionDetail=function(n){var u,i,r,t;for(ej.isNullOrUndefined(this.selectedCurrentItem)||this.getParameterValues(),ej.isNullOrUndefined(this.selectedCurrentTable)||this.getRefreshColumns(),u=this.getSelectedTables(this.ejTreeView.element),i=this.getsSelectedTablesList(u),n.Mode=this.dsInfo.Mode,r=[],t=0;t<i.length;t++)r.push({tableName:i[t].name,schemaName:i[t].SchemaName,type:i[t].Type,refreshColumn:this.getRefreshColumnName(i[t]),parameters:this.getSelectedParameters(i[t]),refrehSettings:this.dsInfo.RefreshInterval,maxRowLimit:null});return n.SelectedTables=r,n},n.prototype.processExtractAction=function(n,t){this.isEditConnection&&(this.dsInfo.Id=this.queryDesigner.dataset.Id);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designerInstance.model.serviceUrl+"/PostExtractDesignerAction/",{action:"",data:JSON.stringify({extractionDetails:n,datasource:this.dsInfo,isEditConnection:this.isEditConnection,mode:this.designerInstance.model.mode})},{indicator:[$.proxy(this.showIndicator,this),$.proxy(this.hideIndicator,this)],fnction:$.proxy(this.onActionSuccess,this,t)})},n.prototype.getSelectedParameters=function(n){var r=[],i=this.parameterCollection.filter(function(t){return t.Id===n.id}),t;if(i.length>0){for(t=0;t<i.length;t++)r.push({columnName:i[t].Name,paramter:i[t].Value,isNull:i[t].IsNull,dataType:i[t].DataType});return r}return null},n.prototype.getRefreshColumnName=function(n){var t=this.refreshColumnCollection.filter(function(t){return t.Id===n.id});return t.length>0?t[0].ColumnName===""?null:t[0].ColumnName:null},n.prototype.getsSelectedTablesList=function(n){for(var i,r,u=[],t=0;t<n.length;t++)for(i=0;i<n[t].items.length;i++)if(n[t].items[i].items.length>0)for(r=0;r<n[t].items[i].items.length;r++)u.push(n[t].items[i].items[r]);else u.push(n[t].items[i]);return u},n.prototype.processFileData=function(){var n=ej.DashboardDesignerUtility.DesignerHub.DesignerHub,t=n.connectionId,i=this.getSelectedTables(this.ejTreeView.element);this.isEditConnection&&(this.dsInfo.Id=this.queryDesigner.dataset.Id);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designerInstance.model.serviceUrl+"/processfiledata/",{action:"",data:JSON.stringify({schemas:i,datasource:this.dsInfo,clientid:t,mode:this.designerInstance.model.mode})},{})},n.prototype.getSelectedTables=function(n){for(var i,t,u=[],f=n.find(">ul li span.e-chkbox-wrap[aria-checked='mixed'],>ul li span.e-chkbox-wrap[aria-checked='true']").closest(".e-item").filter(function(){return $(this).parents().eq(1).attr("id")===n.attr("id")}),r=0;r<f.length;r++)i=f.eq(r),t=this.getTreeViewDataItem(i.attr("id")),t===null&&(t={name:this.ejTreeView.getText(i)}),t.items=this.getSelectedTables(i),u.push(t);return u},n.prototype.getTreeViewDataItem=function(n){for(var t=0;t<this.ejTreeView.model.fields.dataSource.length;t++)if(this.ejTreeView.model.fields.dataSource[t].id===n)return this.ejTreeView.model.fields.dataSource[t];return null},n.prototype.cancelButtonClick=function(){this.ejTreeView&&this.ejTreeView.option("fields.dataSource",[]);this.dialog.close();this.isEditConnection&&this.editConnection.divEditor.data("ejDialog").open()},n.prototype.reloadButtonClick=function(){var n=this.getSelectedTables(this.ejTreeView.element);this.refreshPreview.hide();this.isEditConnection&&(this.dsInfo.Id=this.queryDesigner.dataset.Id);ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designerInstance.model.serviceUrl+"/getpreviewdata/",{action:"",data:JSON.stringify({schemas:n,datasource:this.dsInfo})},{fnction:$.proxy(this.refreshPreviewGridData,this),indicator:[$.proxy(this.showPreviewIndiacator,this),$.proxy(this.hidePreviewIndiacator,this)]})},n.prototype.refreshPreviewGridData=function(n){var t=JSON.parse(n),i;t.Result&&t.HasPreviewData&&(this.tablesListDiv.css("display")==="block"?(i=this.tableListRange.val(),this.alterGridColumnSize(t.PreviewSchemaListInfo[i]),this.previewGrid.setModel({dataSource:t.PreviewDataList[i],columns:t.PreviewSchemaListInfo[i]})):(this.alterGridColumnSize(t.PreviewSchemaListInfo[t.TableList[0]]),this.previewGrid.setModel({dataSource:t.PreviewDataList[t.TableList[0]],columns:t.PreviewSchemaListInfo[t.TableList[0]]})))},n.prototype.showPreviewIndiacator=function(){ej.DashboardUtil.buttonEnable(this.okBtnTag,!1);$("#"+this.id+"_table_preview_wrapper").data("ejWaitingPopup").show()},n.prototype.hidePreviewIndiacator=function(){ej.DashboardUtil.buttonEnable(this.okBtnTag,!0);$("#"+this.id+"_table_preview_wrapper").data("ejWaitingPopup").hide()},n.prototype.showIndicator=function(){ej.DashboardUtil.buttonEnable(this.okBtnTag,!1);$("#"+this.id+"_dialog_wrapper").data("ejWaitingPopup").show()},n.prototype.hideIndicator=function(){ej.DashboardUtil.buttonEnable(this.okBtnTag,!0);$("#"+this.id+"_dialog_wrapper").data("ejWaitingPopup").hide()},n.prototype.onActionSuccess=function(n){this.isEditConnection?(this.showIndicator(),this.queryDesigner.designState()?ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designerInstance.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.ReconnectDatabase,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.ReconnectDatabase,datasource:this.editConnection.encryptPostBack(this.dsInfo),dataSetId:this.queryDesigner.dataset.Id,schemas:null,codeView:this.queryDesigner.designState(),extractionDetails:null})},{fnction:$.proxy(this.reconnectCodeViewforExtract,this),indicator:[$.proxy(this.showIndicator,this)]}):this.editConnection.updateSchemaDetails(n)):(this.hideIndicator(),this.dialog.close(),this.dispose(),this.isDriveFilePicker?ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("FilePickerDialog"),"validateConnection",["true"]):ej.DashboardUtil.invokeMethod(ejDashboardDesigner.getInstance("DataSource"),"validateConnection",["true"]))},n.prototype.reconnectCodeViewforExtract=function(n){var t={IsRetainSchema:n.RetainSchema.toLocaleLowerCase()==="true"?!0:!1,Tables:null};this.editConnection.updateSchemaDetails(t)},n.prototype.onSelectAllCheckChange=function(n){var r,u,t,i,f;if(n.isInteraction){if(ej.DashboardUtil.buttonEnable(this.okBtnTag,!0),n.model.enableTriState=!1,this.ejTreeView.model.nodeCheck=null,this.ejTreeView.model.nodeUncheck=null,n.isChecked){if(this.ejTreeView.checkAll(),this.isFlatType(this.dsInfo)){for(this.showNoColumnMessage(!1),t=0;t<this.previewGrid.model.columns.length;t++)this.previewGrid.showColumns(this.previewGrid.model.columns[t].headerText);if(this.tablesListDiv.css("display")==="block"){if(i=this.tableListRange.data("ejDropDownList"),r=i.model.disableItemsByIndex,!ej.isNullOrUndefined(r)&&r.length>0)for(u=0;u<r.length;u++)i.enableItemByIndex(u);i.enable()}}}else if(this.ejTreeView.unCheckAll(),ej.DashboardUtil.buttonEnable(this.okBtnTag,!1),this.isFlatType(this.dsInfo)){for(t=0;t<this.previewGrid.model.columns.length;t++)this.previewGrid.hideColumns(this.previewGrid.model.columns[t].headerText);if(this.showNoColumnMessage(!0),this.previewWrapper.css("height","400px"),this.tablesListDiv.css("display")==="block"){for(i=this.tableListRange.data("ejDropDownList"),f=0;f<i.model.dataSource.length;f++)i.disableItemByIndex(f);i.disable()}}this.ejTreeView.option("nodeCheck",$.proxy(this.schemaCheck,this));this.ejTreeView.option("nodeUncheck",$.proxy(this.schemaUnCheck,this))}},n.prototype.onDialogClose=function(){this.hideIndicator();this.hidePreviewIndiacator()},n.prototype.isFlatType=function(n){return n.Provider==="File"||n.Provider==="MongoDB"||n.IsJQL||n.Provider==="WEB"&&!ej.isNullOrUndefined(n.OAuthConnection)&&n.OAuthConnection.Service==="analytics"?!0:!1},n.prototype.settingsBtnClick=function(n){var i=$(n.currentTarget),u,r,t,s,h;if(!i.hasClass("e-disable")){if(u=i.parents("li"),r=u.attr("id"),$("#"+this.id+"_table_schemas_refresh_menu").length===0){var f=ej.buildTag("ul.e-designer-menu e-schema-menu","",{},{id:this.id+"_table_schemas_refresh_menu"}),e=ej.buildTag("li.e-refresh-li","",{},{"data-schemaId":r}),o=ej.buildTag("a","",{},{});o.text("Set as refresh column");f.append(e);e.append(o);f.ejMenu({width:180,height:30,container:"#"+this.designerInstance._id,menuType:ej.MenuType.ContextMenu,cssClass:"e-designer-menu",click:$.proxy(this.setRefreshColumn,this)})}t=$("#"+this.id+"_table_schemas_refresh_menu").data("ejMenu");ej.isNullOrUndefined(t)||(t.element.find(".e-refresh-li").attr("data-schemaId",r),t.option("contextMenuTarget",i),s=this.designerInstance.element.height()-n.clientY>30?n.clientY:n.clientY-30,h=this.designerInstance.element.width()-n.clientX>180?n.clientX:n.clientX-180,t.show(h,s,i,n))}},n.prototype.setRefreshColumn=function(n){var i=$(n.element).attr("data-schemaid"),f=this.designerInstance.element.find(".e-dashboarddesigner-schema-table #"+i+" .e-refresh-column-icon"),r,u,t;if(!f.hasClass("e-disable")){for(r=this.ejTreeView.model.fields.dataSource.filter(function(n){return n.id===i})[0].parentId,u=!1,t=0;t<this.refreshColumn.length;t++)this.refreshColumn[t].tableId===r&&(this.refreshColumn[t].columnId=i,u=!0);u||this.refreshColumn.push({tableId:r,columnId:i});this.designerInstance.element.find(".e-dashboarddesigner-schema-table #"+r+" .e-refresh-column-icon").removeClass("e-disable");f.addClass("e-disable")}},n.prototype.wireEvents=function(){this.designerInstance.element.on("click",".e-refresh-column-icon",$.proxy(this.settingsBtnClick,this))},n.prototype.unwireEvents=function(){this.designerInstance.element.off("click",".e-refresh-column-icon",$.proxy(this.settingsBtnClick,this))},n.prototype.setDriveFile=function(n){this.isDriveFilePicker=!0;this.editTableSelector=n},n}();window.ej.createObject("ej.DashboardDesignerUtility.TableSelector",InternalTableSelector,window);InternalCreateCategoryDialog=function(){function n(n){this.designerInstance=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.designerInstance._id+"_create_category_dlg";this.callBackFn=n;this.renderDialog();this.wireEvents()}return n.prototype.renderDialog=function(){var u;$("#"+this.id+"_dialog").length!==0&&this.dispose();var t=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect e-designer-category-dlg","",{height:"auto"},{title:this.designerInstance.locale.alertDialogTitle.NewCategory,id:this.id+"_dialog"}),n=ej.buildTag("div","",{height:"100%",width:"100%"},{id:this.id+"_dialog_content"}),f="<table style='width:100%;height:100%;border-collapse:collapse;' cellspacing='0' cellpadding='0'><tr><td style='width:15%'><label class='e-designer-label' style='vertical-align:top;'>"+this.designerInstance.locale.createCategoryDialog.nameLabelText+" * <\/label><\/td><td style='width:75%'><input type=\"text\" style='width:95%;'  id='"+this.id+"_data_source_name' class='e-textbox e-designer-category-name-text'/><label style='display:none;' class='e-designer-tile-content e-reportdesigner-errorLog'>"+this.designerInstance.locale.createCategoryDialog.emptyCategoryNameLabelText+"<\/label>    <\/td> <\/tr>       <tr style='height:50px'>      <td style='width:15%'><label class='e-designer-label' style='vertical-align:top;' >"+this.designerInstance.locale.createCategoryDialog.descriptionLabelText+"<\/label><\/td>    <td>       <textarea style='width:95%;resize:none;height:80px;text-indent:0px;' id='"+this.id+"_data_source_description' class='e-textarea e-ejinputtext e-designer-content-label e-designer-constr-textarea'><\/textarea><label class='e-designer-tile-content'>"+this.designerInstance.locale.createCategoryDialog.descriptionMaxLengthText+"<\/label>        <\/td>     <\/tr><\/table>",e=ej.buildTag("label.e-designer-label e-dbrd-browse-category-msg",this.designerInstance.locale.alertWindowMesages.createCategoryMessage,{float:"left",color:"#a94442","line-height":2},{id:this.id+"_alertMsg_label"}),i=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_save_btn"}),r=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_cancel_btn"});n.html(f);t.append(n);this.designerInstance.element.append(t);this.dialog=t.ejDialog({enableModal:!0,width:600,maxWidth:600,maxHeight:300,enableResize:!1,showOnInit:!1,cssClass:"e-designer-dialog",containment:"#"+this.designerInstance._id,height:300,showFooter:!0,close:$.proxy(this.dialogClosing,this)}).data("ejDialog");u=this.designerInstance.element.find("#"+this.id+"_dialog_foot");u.append(e,r,i);i.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.createCategoryDialog.saveButtonText,click:$.proxy(this.saveButtonClick,this)});r.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.createCategoryDialog.cancelButtonText,click:$.proxy(this.cancelButtonClick,this)});this.categoryNameEle=n.find("#"+this.id+"_data_source_name");this.categoryDescEle=n.find("#"+this.id+"_data_source_description");this.waitingPopup=$("#"+this.id+"_dialog_wrapper").ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup "+this.id+"_designer_waiting_popup e-designer-loader"}).data("ejWaitingPopup")},n.prototype.saveButtonClick=function(){var n=this.categoryNameEle.val(),t=this.categoryDescEle.val(),i=this.designerInstance.element.find("#"+this.id+"_dialog_foot .e-dbrd-browse-category-msg");i.hide();ej.DashboardUtil.getInstance().doAjaxPost("POST",this.designerInstance.model.serviceUrl+"/createcategory",{action:"",data:JSON.stringify({name:n,description:t})},{indicator:[$.proxy(this.showWaitingPopup,this),$.proxy(this.hideWaitingPopup,this)],fnction:$.proxy(this.onSuccess,this)})},n.prototype.showWaitingPopup=function(){this.waitingPopup.show()},n.prototype.hideWaitingPopup=function(){this.waitingPopup.hide()},n.prototype.cancelButtonClick=function(){this.dialog.close();this.dispose()},n.prototype.dialogClosing=function(n){this.waitingPopup.hide();n.model.position={X:0,Y:0}},n.prototype.dispose=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_dialog"),!0);$("#"+this.id+"_dialog").remove();this.unwireEvents()},n.prototype.onSuccess=function(n){var t=this.designerInstance.element.find("#"+this.id+"_dialog_foot");n.ApiStatus?(t.find(".e-dbrd-browse-category-msg").hide(),this.dialog.close(),ejDashboardDesigner.getInstance("BrowseDialog").browseDialog.data("ejDialog").open(),ejDashboardDesigner.getInstance("BrowseDialog").reloadCategory(this.categoryNameEle.val())):(t.find(".e-dbrd-browse-category-msg").text(this.getErrorMessage(n.StatusCode,n.Message)),t.find(".e-dbrd-browse-category-msg").show())},n.prototype.getErrorMessage=function(n,t){var i=t;switch(n){case"2021":i=this.designerInstance.locale.createCategoryDialog.noCreatePermission}return i},n.prototype.showDialog=function(n){var t=this.designerInstance.element.find("#"+this.id+"_dialog_foot");ej.isNullOrUndefined(n)&&n?t.find(".e-dbrd-browse-category-msg").show():t.find(".e-dbrd-browse-category-msg").hide();this.dialog.open()},n.prototype.categoryNameValidation=function(){var n=this.categoryNameEle.val(),t;this.categoryNameEle.siblings(".e-reportdesigner-errorLog").hide();this.categoryNameEle.removeClass("e-designer-error");ej.DashboardUtil.buttonEnable(this.designerInstance.element.find("#"+this.id+"_save_btn"),!0);t=this.designerInstance.nameValidation(n)?this.designerInstance.locale.createCategoryDialog.emptyCategoryNameLabelText:this.designerInstance.locale.browseDialogMessages.dashboardNameErrorMsg;n!==""&&this.designerInstance.nameValidation(n)||(this.categoryNameEle.siblings(".e-reportdesigner-errorLog").html(t),this.categoryNameEle.siblings(".e-reportdesigner-errorLog").show(),this.categoryNameEle.addClass("e-designer-error"),ej.DashboardUtil.buttonEnable(this.designerInstance.element.find("#"+this.id+"_save_btn"),!1))},n.prototype.wireEvents=function(){this.designerInstance.element.on("focusout",".e-designer-category-name-text",$.proxy(this.categoryNameValidation,this))},n.prototype.unwireEvents=function(){this.designerInstance.element.off("focusout",".e-designer-category-name-text",$.proxy(this.categoryNameValidation,this))},n}();window.ej.createObject("ej.DashboardDesignerUtility.CreateCategoryDialog",InternalCreateCategoryDialog,window);InternalRangeFilterDialog=function(){function n(){this.dashboardDesigner=null;this.dialogContainer=null;this.isModified=!1;this.filterInfo=null;this.fieldDetails=null;this.loadTimer=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.rowId=this.id+"_range_filter_dialog";this.renderRangeFilterDialog()}return Object.defineProperty(n,"FilterInstance",{get:function(){return(this.rangeFilterDialog===null||this.rangeFilterDialog===undefined)&&(this.rangeFilterDialog=new ej.DashboardDesignerUtility.RangeFilterDialog),this.rangeFilterDialog},enumerable:!0,configurable:!0}),n.prototype.renderRangeFilterDialog=function(){this.dialogContainer=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{height:"auto"},{title:this.dashboardDesigner.locale.dateRangeFilterDialog.titleText,id:this.rowId});$(document.body).append(this.dialogContainer);this.renderTopContainer();this.renderFieldContainer();this.dialogContainer.ejDialog({width:"auto",height:"auto",minWidth:400,minHeight:235,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-dashboarddesigner e-designer-dialog e-flat-mode",close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.renderFooter()},n.prototype.renderTopContainer=function(){var i=ej.buildTag("div","",{height:"25px","border-bottom":"1px solid #dddddd",padding:"15px 20px"}),r=ej.buildTag("table","",{width:"100%"},{}),n=ej.buildTag("tr","",{},{}),t=this.dashboardDesigner.locale.dateRangeFilterDialog;this.renderRadioButton(t.rangesText,this.rowId+"_RangeBtn",!0,n,this.onRangeTypeChange,this);this.renderRadioButton(t.startDateText,this.rowId+"_startBtn",!1,n,this.onRangeTypeChange,this);this.renderRadioButton(t.endDateText,this.rowId+"_endBtn",!1,n,this.onRangeTypeChange,this);r.append(n);i.append(r);this.dialogContainer.append(i)},n.prototype.renderFieldContainer=function(){var n=ej.buildTag("div","",{height:"140px","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",padding:"10px 20px"},{id:this.rowId+"_dateRange_fieldDiv"}),i=ej.buildTag("div","",{"margin-top":"15px"},{id:this.rowId+"_dateRange_start_tr"}),r=ej.buildTag("div","",{"margin-top":"15px"},{id:this.rowId+"_dateRange_end_tr"}),u=ej.buildTag("table","",{width:"100%"},{}),f=ej.buildTag("table","",{width:"100%"},{}),e=ej.buildTag("tr","",{},{}),o=ej.buildTag("tr","",{},{}),t;n.append(i,r);i.append(u);u.append(e);r.append(f);f.append(o);t=this.dashboardDesigner.locale.dateRangeFilterDialog;this.renderDateRangePicker(this.rowId+"_dateRange_Start",t.startLabel,e,this.onPickerChange,this);this.renderDateRangePicker(this.rowId+"_dateRange_end",t.endLabel,o,this.onPickerChange,this);this.dialogContainer.append(n);n.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-propertyPanel-waitingPopup"})},n.prototype.renderFooter=function(){var r=$("#"+this.rowId+"_foot"),i=ej.buildTag("input.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.rowId+"_btn_cancel"}),n=ej.buildTag("input.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.rowId+"_btn_ok"}),t;r.append(i,n);t=this.dashboardDesigner.locale.dialogOptions;n.ejButton({text:t.applyButtonText,width:"60px",height:"23px",size:"mini",cssClass:"e-designer-okbtn",enabled:!1,showRoundedCorner:!1,click:$.proxy(this.saveDateRangeAttr,this)});i.ejButton({text:t.cancelButtonText,width:"60px",height:"23px",cssClass:"e-designer-cancelbtn",showRoundedCorner:!1,size:"mini",click:$.proxy(this.closeDialog,this,!0)});n.css("opacity","0.3")},n.prototype.renderRadioButton=function(n,t,i,r,u,f){var e=$("<td unselectable='on'/>"),o,s;r.append(e);o=ej.buildTag("input","",{},{type:"radio",name:this.rowId,id:t});e.append(o);s=ej.buildTag("label.editLabel e-designer-title-label",n,{"margin-left":"6px"},{"for":t,id:t});e.append(s);o.ejRadioButton({checked:i,cssClass:"e-designer-radio",size:"small",change:$.proxy(u,f)})},n.prototype.renderDateRangePicker=function(n,t,i,r,u){var f=ej.buildTag("td","",{width:"25%"}),s=ej.buildTag("Label.e-designer-add-label",t,{},{type:"label"}),e=ej.buildTag("td","",{},{id:n}),o=ej.buildTag("input.e-popup-button","",{},{type:"text",id:n+"_picker"});f.append(s);e.append(o);i.append(f,e);o.ejDateTimePicker({width:"225px",height:"26px",cssClass:"e-designer-border e-popup-button e-dashboarddesigner-widget",change:$.proxy(r,u)})},n.prototype.openFilterDialog=function(n,t,i,r){this.dialogContainer.data("ejDialog").open();this.targetInstance=n;this.targetMethod=t;this.dataSetId=i.grpInfo.Name;this.fieldDetails=i.grpInfo;this.filterInfo=ej.isNullOrUndefined(r)?new DimensionFilterInfo:$.extend(!0,{},r);this.dataInfo=i.item;this.resetRadioBtnSelection();this.resetAttributes();this.getStartTr().css("display","none");this.getEndTr().css("display","none");r=[{Id:this.fieldDetails.DataId,Name:this.fieldDetails.Field,SummaryType:"None",Sorting:"Ascending",FieldType:"Dimensions",MeasureFormatting:null,DateTimeFormat:"Date",FilterInfo:null}];this.loadTimer&&(clearTimeout(this.loadTimer),this.loadTimer=null);var u=this;this.loadTimer=setTimeout($.proxy(function(){u.showLoadingIndicator();ej.DashboardUtil.getInstance().doAjaxPost("POST",u.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getDateRange,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getDateRange,fieldInfo:r,dataset:u.dataSetId,type:"date"})},{fnction:$.proxy(u.setFieldInformation,u)});clearTimeout(u.loadTimer);u.loadTimer=null},this),300)},n.prototype.resetAttributes=function(){this.dialogContainer.removeAttr("Range");this.dialogContainer.removeAttr("StartDate");this.dialogContainer.removeAttr("EndDate");this.getStartPicker().removeAttr("minDateTime");this.getEndPicker().removeAttr("minDateTime")},n.prototype.setFieldInformation=function(n){var r=$("#"+this.rowId+"_dateRange_Start_picker"),u=$("#"+this.rowId+"_dateRange_end_picker"),t=this.getConvertedDateTime(new Date(n.MinValue)),i=this.getConvertedDateTime(new Date(n.MaxValue));r.attr({minDateTime:t,maxDateTime:i});u.attr({minDateTime:t,maxDateTime:i});r.data("ejDateTimePicker").setModel({minDateTime:t,maxDateTime:i,value:t});u.data("ejDateTimePicker").setModel({minDateTime:t,maxDateTime:i,value:i});this.getStartTr().css("display","block");this.getEndTr().css("display","block");this.hideLoadingIndicator();ej.isNullOrUndefined(this.filterInfo)||ej.isNullOrUndefined(this.filterInfo.AllowFilterInfo)||ej.isNullOrUndefined(this.filterInfo.AllowFilterInfo.DateFilterInfo)||this.populateDateRangeFilter(this.filterInfo.AllowFilterInfo.DateFilterInfo)},n.prototype.getConvertedDateTime=function(n){var i=(n.getMonth()+1>=10?"":"0")+(n.getMonth()+1),t=n.getHours()===0?12:n.getHours()>12?n.getHours()-12:n.getHours(),r=n.getHours()>=12?"PM":"AM",u=(t<10?"0":"")+t,f=(n.getMinutes()<10?"0":"")+n.getMinutes();return i+"/"+n.getDate()+"/"+n.getFullYear()+" "+u+":"+f+" "+r},n.prototype.showLoadingIndicator=function(){this.getFieldDiv().ejWaitingPopup("show");this.getRangeRadioBtn().data("ejRadioButton").disable();this.getStartRadioBtn().data("ejRadioButton").disable();this.getEndRadioBtn().data("ejRadioButton").disable()},n.prototype.hideLoadingIndicator=function(){this.getRangeRadioBtn().data("ejRadioButton").enable();this.getStartRadioBtn().data("ejRadioButton").enable();this.getEndRadioBtn().data("ejRadioButton").enable();this.getFieldDiv().ejWaitingPopup("hide")},n.prototype.populateDateRangeFilter=function(n){this.isModified=!1;this.dialogContainer.attr({StartDate:n.StartDate,EndDate:n.EndDate,Range:n.DateFormatCondition});var r=n.DateFormatCondition,u=this.getRangeRadioBtn().data("ejRadioButton"),f=this.getStartRadioBtn().data("ejRadioButton"),e=this.getEndRadioBtn().data("ejRadioButton"),t="block",i="block";r===DateFormatOption.StartDate.toString()?(u.setModel({checked:!1}),f.setModel({checked:!0}),e.setModel({checked:!1}),i="none",t="block"):r===DateFormatOption.EndDate.toString()?(u.setModel({checked:!1}),f.setModel({checked:!1}),e.setModel({checked:!0}),i="block",t="none"):this.resetRadioBtnSelection();this.getStartTr().css("display",t);this.getEndTr().css("display",i);this.getStartPicker().data("ejDateTimePicker").setModel({value:n.StartDate});this.getEndPicker().data("ejDateTimePicker").setModel({value:n.EndDate})},n.prototype.resetRadioBtnSelection=function(){var n=this.getRangeRadioBtn().data("ejRadioButton"),t=this.getStartRadioBtn().data("ejRadioButton"),i=this.getEndRadioBtn().data("ejRadioButton");n.setModel({checked:!0});t.setModel({checked:!1});i.setModel({checked:!1})},n.prototype.onRangeTypeChange=function(n){var r=this.getStartRadioBtn().data("ejRadioButton").model.checked,u=this.getEndRadioBtn().data("ejRadioButton").model.checked,t=this.getStartTr(),i=this.getEndTr();n.isInteraction&&(r?(t.css("display","block"),i.css("display","none")):u?(t.css("display","none"),i.css({display:"block"})):(t.css("display","block"),i.css({display:"block"})))},n.prototype.onPickerChange=function(n){n.isInteraction&&this.enableApplyButton()},n.prototype.saveDateRangeAttr=function(){var n,t;if(!ej.isNullOrUndefined(this.targetInstance)){var i=this.getStartRadioBtn().data("ejRadioButton").model.checked,r=this.getEndRadioBtn().data("ejRadioButton").model.checked,u=this.getStartPicker().data("ejDateTimePicker").getValue(),f=this.getEndPicker().data("ejDateTimePicker").getValue();this.isModified=this.validateDateRangeValues();this.dialogContainer.attr({StartDate:u,EndDate:f});r?this.dialogContainer.attr("Range",DateFormatOption.EndDate.toString()):i?this.dialogContainer.attr("Range",DateFormatOption.StartDate.toString()):this.dialogContainer.attr("Range",DateFormatOption.Range.toString());n=this.getDateRangeValues();this.filterInfo=new DimensionFilterInfo;this.filterInfo.IsAllowFilteringApplied=!0;ej.isNullOrUndefined(this.filterInfo.AllowFilterInfo)&&(this.filterInfo.AllowFilterInfo=new AllowFilteringInfo);this.filterInfo.AllowFilterInfo.IsDateFormatFilteringApplied=!0;this.filterInfo.AllowFilterInfo.DateFilterInfo=new DateRangeFilterInfo;this.filterInfo.AllowFilterInfo.DateFilterInfo.DateFormatCondition=n.DateFormatCondition;this.filterInfo.AllowFilterInfo.DateFilterInfo.StartDate=n.StartDate;this.filterInfo.AllowFilterInfo.DateFilterInfo.EndDate=n.EndDate;t=[this.filterInfo,this.fieldDetails.DataField,this.dataInfo];ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,t)}this.closeDialog()},n.prototype.closeDialog=function(){var n=this.getStartPicker().data("ejDateTimePicker"),t=this.getEndPicker().data("ejDateTimePicker");!ej.isNullOrUndefined(n)&&n.isPopupOpen?n.hide():!ej.isNullOrUndefined(t)&&t.isPopupOpen&&t.hide();this.dialogContainer.data("ejDialog").close()},n.prototype.validateDateRangeValues=function(){var n=this.getStartPicker().data("ejDateTimePicker").getValue(),t=this.getEndPicker().data("ejDateTimePicker").getValue(),i=!ej.isNullOrUndefined(this.filterInfo)&&!ej.isNullOrUndefined(this.filterInfo.AllowFilterInfo)&&!ej.isNullOrUndefined(this.filterInfo.AllowFilterInfo.DateFilterInfo)?this.filterInfo.AllowFilterInfo.DateFilterInfo.DateFormatCondition:DateFormatOption.Range;return this.dialogContainer.attr("StartDate")!==n||this.dialogContainer.attr("EndDate")!==t||this.dialogContainer.attr("Range")!==i.toString()?!0:!1},n.prototype.getDateRangeValues=function(){var n="Range",t=ej.isNullOrUndefined(this.dialogContainer.attr("Range"))?DateFormatOption.Range.toString():this.dialogContainer.attr("Range"),i,r;return n=t===DateFormatOption.StartDate.toString()?DateFormatOption.StartDate.toString():t===DateFormatOption.EndDate.toString()?DateFormatOption.EndDate.toString():DateFormatOption.Range.toString(),i=ej.isNullOrUndefined(this.dialogContainer.attr("StartDate"))?"":this.dialogContainer.attr("StartDate"),r=ej.isNullOrUndefined(this.dialogContainer.attr("EndDate"))?"":this.dialogContainer.attr("EndDate"),{StartDate:i,EndDate:r,DateFormatCondition:n,IsModified:this.isModified}},n.prototype.enableApplyButton=function(){var t=this.getStartPicker().data("ejDateTimePicker").getValue(),i=this.getEndPicker().data("ejDateTimePicker").getValue(),u=this.getStartPicker().attr("minDateTime"),n=this.getStartPicker().attr("maxDateTime"),f=this.getApplyBtn(),e=this.getStartRadioBtn().data("ejRadioButton").model.checked,o=this.getEndRadioBtn().data("ejRadioButton").model.checked,r=!0;r=e?t!==u:o?i!==n:t!==n||i!==n;ej.DashboardUtil.buttonEnable(f,r)},n.prototype.getRangeRadioBtn=function(){return this.dialogContainer.find("#"+this.rowId+"_RangeBtn")},n.prototype.getStartRadioBtn=function(){return this.dialogContainer.find("#"+this.rowId+"_startBtn")},n.prototype.getEndRadioBtn=function(){return this.dialogContainer.find("#"+this.rowId+"_endBtn")},n.prototype.getStartPicker=function(){return this.dialogContainer.find("#"+this.rowId+"_dateRange_Start_picker")},n.prototype.getEndPicker=function(){return this.dialogContainer.find("#"+this.rowId+"_dateRange_end_picker")},n.prototype.getStartTr=function(){return this.dialogContainer.find("#"+this.rowId+"_dateRange_start_tr")},n.prototype.getEndTr=function(){return this.dialogContainer.find("#"+this.rowId+"_dateRange_end_tr")},n.prototype.getApplyBtn=function(){return $("#"+this.rowId+"_btn_ok")},n.prototype.getFieldDiv=function(){return this.dialogContainer.find("#"+this.rowId+"_dateRange_fieldDiv")},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects(this.dialogContainer);this.dialogContainer.length>0&&$("#"+this.rowId).remove()},n}();window.ej.createObject("ej.DashboardDesignerUtility.RangeFilterDialog",InternalRangeFilterDialog,window);InternalRelativeDateFilter=function(){function n(){this.dashboardDesigner=null;this.dateFilterDialog=null;this.footerTag=null;this.formatDropdown=null;this.periodDropdown=null;this.rangeNumeric=null;this.textDiv=null;this.rangeFormat=null;this.previewTag=null;this.linkDate=null;this.anchorDate=null;this.targetInstance=null;this.targetMethod=null;this.dateFilterInfo=null;this.columnDetails=null;this.endDate=null;this.startDate=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id;this.renderRelativeDateFilterWindow()}return Object.defineProperty(n,"RelativeDateFilter",{get:function(){return(this.relativeDateFilter===null||this.relativeDateFilter===undefined)&&(this.relativeDateFilter=new ej.DashboardDesignerUtility.RelativeDateFilter),this.relativeDateFilter},enumerable:!0,configurable:!0}),n.prototype.renderRelativeDateFilterWindow=function(){var n=this.dateFilterDialog=ej.buildTag("div.e-userselect","",{},{id:this.id+"_relative_date_filter"}),f=ej.buildTag("div","",{},{id:this.id+"_relative_date_filter_container"}),e=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"5px 0px 15px"},{}),o=$("<tr><\/tr>"),s=ej.buildTag("td","",{width:"80px"},{}),ht=ej.buildTag("editLabel.e-designer-fontfamily","Range",{"font-size":"12px"},{type:"label"}),h=ej.buildTag("td","",{},{}),c=this.formatDropdown=ej.buildTag("input","",{},{type:"text",id:this.id+"_relative_date_filter_formatdrop"}),t,st,i,r,u;s.append(ht);h.append(c);o.append(s).append(h);e.append(o);var ct=ej.buildTag("div","",{width:"100%",height:"5px","border-top":"1px solid #cecece"},{}),l=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"10px 0px 5px"},{}),a=$("<tr><\/tr>"),v=ej.buildTag("td","",{width:"80px"},{}),lt=ej.buildTag("editLabel.e-designer-fontfamily","Period",{"font-size":"12px"},{type:"label"}),y=ej.buildTag("td","",{},{}),p=this.periodDropdown=ej.buildTag("input","",{},{type:"text",id:this.id+"_relative_date_filter_perioddrop"}),w=ej.buildTag("td","",{"padding-left":"5px"},{}),b=this.rangeNumeric=ej.buildTag("input","",{},{type:"text",id:this.id+"_relative_date_filter_rangeNumeric"}),k=ej.buildTag("td","",{width:"70px"},{}),d=this.textDiv=ej.buildTag("div","",{padding:"0px 5px"},{id:this.id+"_relative_date_filter_rangeFormatDiv"}),at=this.rangeFormat=ej.buildTag("editLabel.e-designer-fontfamily","",{"font-size":"12px"},{type:"label",id:this.id+"_relative_date_filter_rangeFormat"});v.append(lt);y.append(p);w.append(b);k.append(d);d.append(at);a.append(v).append(y).append(w).append(k);l.append(a);var g=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"5px 0px"},{}),nt=ej.buildTag("tr","",{},{}),vt=ej.buildTag("td.e-designer-fontfamily","",{"font-size":"12px",width:"80px"},{}),tt=ej.buildTag("td","",{}),it=this.linkDate=ej.buildTag("input","",{},{type:"checkbox",id:this.id+"_relative_date_filter_linkDate"});tt.append(it);nt.append(vt).append(tt);g.append(nt);var rt=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"5px 0px"},{}),ut=ej.buildTag("tr","",{},{}),yt=ej.buildTag("td.e-designer-fontfamily","",{"font-size":"12px",width:"80px"},{}),ft=ej.buildTag("td","",{}),et=ej.buildTag("div","",{float:"left"}),ot=this.anchorDate=ej.buildTag("input.e-designer-param-assign","",{},{id:this.id+"_relative_date_filter_anchorDate"});ft.append(et);et.append(ot);ut.append(yt).append(ft);rt.append(ut);t=ej.buildTag("div","",{width:"210px",height:"28px",display:"table","padding-left":"3px",float:"left"},{});st=this.previewTag=ej.buildTag("span","",{display:"table-cell","font-size":"10px","vertical-align":"middle"},{id:this.id+"_relative_date_filter_preview"});t.append(st);i=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_relative_date_filter_cancel"});r=ej.buildTag("button.e-designer-okbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_relative_date_filter_ok"});f.append(e).append(ct).append(l).append(g).append(rt);n.append(f);$(document.body).append(n);n.ejDialog({title:"Relative Date Filter",width:"auto",height:"auto",minWidth:240,minHeight:250,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});this.footerTag=$("#"+this.id+"_relative_date_filter_foot");this.footerTag.append(t).append(i).append(r);u=this.dashboardDesigner.locale.dialogOptions;r.ejButton({text:u.okButtonText,showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.updateDateFilterInfo,this)});i.ejButton({text:u.cancelButtonText,showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.closeRelativeDateFilter,this)});c.ejDropDownList({width:"150px",height:"28px",dataSource:this.formatTypeList(),fields:{text:"text",value:"value"},enabled:!0,showRoundedCorner:!0,popupWidth:"160px",cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changeFormatType,this)});p.ejDropDownList({width:"150px",height:"28px",dataSource:[],fields:{text:"text",value:"dateInstance"},enabled:!0,showRoundedCorner:!0,popupWidth:"160px",popupHeight:"100px",cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changePeriodType,this)});b.ejNumericTextbox({showSpinButton:!0,decimalPlaces:0,minValue:1,maxvalue:1e9,value:1,width:"70px",height:"28px",showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",change:$.proxy(this.changeTextBoxValue,this)});it.ejCheckBox({text:"Link to specific date",checked:!1,width:"35px",cssClass:"e-designer-case-sensitive",change:$.proxy(this.changeCheckBoxValue,this)});ot.ejDatePicker({width:"150px",height:"28px",showRoundedCorner:!0,cssClass:"e-designer-border e-designer-relative-datepicker",enabled:!1,minDate:"01/01/0001",maxDate:"01/01/9999",change:$.proxy(this.changeDatePickerValue,this)})},n.prototype.changeDatePickerValue=function(n){ej.isNullOrUndefined(n)||this.UpdatePreviewRelativeDate()},n.prototype.changeTextBoxValue=function(n){ej.isNullOrUndefined(n.value)?this.rangeNumeric.data("ejNumericTextbox").setModel({value:1}):this.UpdatePreviewRelativeDate()},n.prototype.changeFormatType=function(n){var i;if(!ej.isNullOrUndefined(n)&&n.text.length>0){var f=this.linkDate.data("ejCheckBox").isChecked(),r=this.periodTypeList(n.text,f),t=this.periodDropdown.data("ejDropDownList"),u=$(t.getSelectedItem()).attr("data-value");if(t.setModel({dataSource:r}),ej.isNullOrUndefined(u))t.selectItemsByIndices(1);else for(i=0;i<r.length;i++)if(r[i].dateInstance===u){t.selectItemsByIndices(i);break}else if(u===DateInstance.Custom&&(n.value===RelativeDateFormat.Day||n.value===RelativeDateFormat.Hour)){t.selectItemsByIndices(1);break}this.UpdatePreviewRelativeDate()}},n.prototype.changeCheckBoxValue=function(n){var t;if(!ej.isNullOrUndefined(n)){var f=this.formatDropdown.data("ejDropDownList").getSelectedValue(),r=this.periodTypeList(f,n.isChecked),i=this.periodDropdown.data("ejDropDownList"),u=$(i.getSelectedItem()).attr("data-value");if(i.setModel({dataSource:r}),ej.isNullOrUndefined(u))i.selectItemsByIndices(1);else for(t=0;t<r.length;t++)if(r[t].dateInstance===u){i.selectItemsByIndices(t);break}this.anchorDate.data("ejDatePicker").setModel({enabled:n.isChecked});this.UpdatePreviewRelativeDate()}},n.prototype.changePeriodType=function(n){if(!ej.isNullOrUndefined(n)&&n.text.length>0){var t=n.text;t==="Last"||t==="Next"||t==="Past"||t==="Upcoming"?this.enableRangeNumericTextBox(!0):this.enableRangeNumericTextBox(!1);this.UpdatePreviewRelativeDate()}},n.prototype.enableRangeNumericTextBox=function(n){if(n){var t=this.formatDropdown.data("ejDropDownList").getSelectedValue();this.rangeNumeric.data("ejNumericTextbox").enable();this.rangeFormat.text(t.toLowerCase()+"(s)")}else this.rangeNumeric.data("ejNumericTextbox").disable(),this.rangeFormat.text("")},n.prototype.UpdatePreviewRelativeDate=function(){var t=this.formatDropdown.data("ejDropDownList").getSelectedValue(),n=null,i;t==="Year"?n=this.filterRelativeDateByYear():t==="Quarter"?n=this.filterRelativeDateByQuarter():t==="Month"?n=this.filterRelativeDateByMonth():t==="Week"?n=this.filterRelativeDateByWeek():t==="Day"?n=this.filterRelativeDateByDay():t==="Hour"&&(n=this.filterRelativeDateByHour());ej.isNullOrUndefined(n)?this.previewTag.text(""):(i=n.startPreviewDate.length>0?n.startPreviewDate+" to "+n.endPreviewDate:n.endPreviewDate,this.previewTag.text(i))},n.prototype.getPreviewRelatedDetails=function(){var t=this.periodDropdown.data("ejDropDownList").getListData(),n=t[this.periodDropdown.data("ejDropDownList").model.selectedIndex].dateInstance,i=this.isCommonDateInstance(n)?this.rangeNumeric.data("ejNumericTextbox").getValue():1;return{useAnchorDate:this.linkDate.data("ejCheckBox").isChecked(),anchorDate:this.anchorDate.data("ejDatePicker").getValue(),dateInstance:n,range:i}},n.prototype.filterRelativeDateByYear=function(){var f=this.getPreviewRelatedDetails(),h=f.anchorDate,u=f.range,t=new Date,e,o,s;f.useAnchorDate&&!ej.isNullOrUndefined(h)&&(e=h.split("/"),t=new Date(e[2],e[0]-1,e[1],0,0,0,999));var r=t.getFullYear(),n=null,i=null;switch(f.dateInstance){case DateInstance.Current:n=new Date(r,0,1,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear()+1,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Previous:r--;n=new Date(r,0,1,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear()+1,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Succeeding:r++;n=new Date(r,0,1,0,0,0);i=this.updateEndDate(new Date(n.getFullYear()+u,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.ToDate:n=new Date(r,0,1,0,0,0,0);i=this.updateEndDate(new Date(r,t.getMonth(),t.getDate()+1));break;case DateInstance.Last:r-=u;n=new Date(r,0,1,0,0,0);i=this.updateEndDate(new Date(n.getFullYear()+u,n.getMonth()));break;case DateInstance.Next:n=new Date(r+1,0,1,0,0,0);i=this.updateEndDate(new Date(n.getFullYear()+u,n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Past:n=new Date(r-u,t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());i=this.updateEndDate(t);break;case DateInstance.Upcoming:n=t;i=this.updateEndDate(new Date(r+u,t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))}return o=null,s=null,ej.isNullOrUndefined(n)||(o=this.convertDateToString(n)),ej.isNullOrUndefined(i)||(s=this.convertDateToString(i)),ej.isNullOrUndefined(n)||(n=this.convertDateTimeToMeridiemTimeString(n)),ej.isNullOrUndefined(i)||(i=this.convertDateTimeToMeridiemTimeString(i)),this.startDate=n,this.endDate=i,{startPreviewDate:o,endPreviewDate:s}},n.prototype.filterRelativeDateByQuarter=function(){var f=this.getPreviewRelatedDetails(),h=f.anchorDate,u=f.range,n=new Date,e,o,s;f.useAnchorDate&&!ej.isNullOrUndefined(h)&&(e=h.split("/"),n=new Date(e[2],e[0]-1,e[1],0,0,0,999));var r=Math.ceil((n.getMonth()+1)/3),t=null,i=null;switch(f.dateInstance){case DateInstance.Current:t=new Date(n.getFullYear(),Math.ceil((r-1)*3),1,0,0,0,0);i=this.updateEndDate(new Date(t.getFullYear(),t.getMonth()+3,1,0,0,0,0));break;case DateInstance.Previous:t=new Date(n.getFullYear(),Math.ceil((r-1)*3-3),1,0,0,0,0);i=this.updateEndDate(new Date(t.getFullYear(),t.getMonth()+3,1,0,0,0,0));break;case DateInstance.Succeeding:t=new Date(n.getFullYear(),Math.ceil((r-1)*3+3),1,0,0,0,0);i=this.updateEndDate(new Date(t.getFullYear(),t.getMonth()+3,1,0,0,0,0));break;case DateInstance.ToDate:t=new Date(n.getFullYear(),Math.ceil((r-1)*3),1,0,0,0,0);i=new Date(n.getFullYear(),n.getMonth(),n.getDate(),23,59,59,99);break;case DateInstance.Next:t=new Date(n.getFullYear(),Math.ceil((r-1)*3+3),1,0,0,0);i=this.updateEndDate(new Date(t.getFullYear(),t.getMonth()+3*u,1,0,0,0,0));break;case DateInstance.Last:t=new Date(n.getFullYear(),Math.ceil((r-1)*3-3*u),1,0,0,0);i=this.updateEndDate(new Date(t.getFullYear(),t.getMonth()+3*u,1,0,0,0,0));break;case DateInstance.Past:t=new Date(n.getFullYear(),n.getMonth()-3*u,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds());i=this.updateEndDate(n);break;case DateInstance.Upcoming:t=n;i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth()+3*u,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))}return o=null,s=null,ej.isNullOrUndefined(t)||(o=this.convertDateToString(t)),ej.isNullOrUndefined(i)||(s=this.convertDateToString(i)),ej.isNullOrUndefined(t)||(t=this.convertDateTimeToMeridiemTimeString(t)),ej.isNullOrUndefined(i)||(i=this.convertDateTimeToMeridiemTimeString(i)),this.startDate=t,this.endDate=i,{startPreviewDate:o,endPreviewDate:s}},n.prototype.filterRelativeDateByMonth=function(){var u=this.getPreviewRelatedDetails(),h=u.anchorDate,f=u.range,t=new Date,e,o,s;u.useAnchorDate&&!ej.isNullOrUndefined(h)&&(e=h.split("/"),t=new Date(e[2],e[0]-1,e[1],0,0,0,999));var r=t.getFullYear(),n=null,i=null;switch(u.dateInstance){case DateInstance.Current:n=new Date(r,t.getMonth(),1,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth()+1));break;case DateInstance.Previous:n=new Date(r,t.getMonth()-1,1,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth()+1));break;case DateInstance.Succeeding:n=new Date(r,t.getMonth()+1,1,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth()+1));break;case DateInstance.ToDate:n=new Date(r,t.getMonth(),1,0,0,0,0);i=t;break;case DateInstance.Last:n=new Date(r,t.getMonth()-f,1,0,0,0,0);i=this.updateEndDate(new Date(r,t.getMonth(),1,0,0,0,0));break;case DateInstance.Next:n=new Date(r,t.getMonth()+1,1,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth()+f));break;case DateInstance.Past:n=new Date(r,t.getMonth()-f,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());i=this.updateEndDate(t);break;case DateInstance.Upcoming:n=t;i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth()+f,n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))}return o=null,s=null,ej.isNullOrUndefined(n)||(o=this.convertDateToString(n)),ej.isNullOrUndefined(i)||(s=this.convertDateToString(i)),ej.isNullOrUndefined(n)||(n=this.convertDateTimeToMeridiemTimeString(n)),ej.isNullOrUndefined(i)||(i=this.convertDateTimeToMeridiemTimeString(i)),this.startDate=n,this.endDate=i,{startPreviewDate:o,endPreviewDate:s}},n.prototype.filterRelativeDateByWeek=function(){var e=this.getPreviewRelatedDetails(),l=e.anchorDate,o=e.range,t=new Date,s,r,h,c;e.useAnchorDate&&!ej.isNullOrUndefined(l)&&(s=l.split("/"),t=new Date(s[2],s[0]-1,s[1],0,0,0,999));var u=t.getFullYear(),n=null,i=null,f=0-t.getDay();switch(e.dateInstance){case DateInstance.Current:n=new Date(u,t.getMonth(),t.getDate()+f,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+7,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Previous:n=new Date(u,t.getMonth(),t.getDate()+f-7,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+7,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Succeeding:n=new Date(u,t.getMonth(),t.getDate()+f+7,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+7,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.ToDate:n=new Date(u,t.getMonth(),t.getDate()+f,0,0,0,0);i=new Date(n.getFullYear(),n.getMonth(),n.getDate()+t.getDay(),n.getHours()+t.getHours(),n.getMinutes()+t.getMinutes(),n.getSeconds()+t.getSeconds(),n.getMilliseconds()+t.getMilliseconds());break;case DateInstance.Next:r=o*7;n=new Date(u,t.getMonth(),t.getDate()+f+7,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+r,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Last:r=o*7;n=new Date(u,t.getMonth(),t.getDate()+f-r,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+r,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Past:r=o*7;n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-r,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());i=this.updateEndDate(t);break;case DateInstance.Upcoming:r=o*7;n=t;i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+r,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()))}return h=null,c=null,ej.isNullOrUndefined(n)||(h=this.convertDateToString(n)),ej.isNullOrUndefined(i)||(c=this.convertDateToString(i)),ej.isNullOrUndefined(n)||(n=this.convertDateTimeToMeridiemTimeString(n)),ej.isNullOrUndefined(i)||(i=this.convertDateTimeToMeridiemTimeString(i)),this.startDate=n,this.endDate=i,{startPreviewDate:h,endPreviewDate:c}},n.prototype.filterRelativeDateByDay=function(){var u=this.getPreviewRelatedDetails(),h=u.anchorDate,r=u.range,f=!1,t=new Date,e,n,i,o,s;u.useAnchorDate&&!ej.isNullOrUndefined(h)&&(e=h.split("/"),t=new Date(e[2],e[0]-1,e[1],0,0,0,999));n=null;i=null;switch(u.dateInstance){case DateInstance.Current:n=new Date(t.getFullYear(),t.getMonth(),t.getDate(),0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));f=!0;break;case DateInstance.Previous:n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-1,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));f=!0;break;case DateInstance.Succeeding:n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+1,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));f=!0;break;case DateInstance.Last:n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-r,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+r,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Next:n=new Date(t.getFullYear(),t.getMonth(),t.getDate()+1,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate()+r,n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Past:n=new Date(t.getFullYear(),t.getMonth(),t.getDate()-r,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds());i=this.updateEndDate(t);break;case DateInstance.Upcoming:n=t;i=this.updateEndDate(new Date(t.getFullYear(),t.getMonth(),t.getDate()+r,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))}return o=null,s=null,ej.isNullOrUndefined(n)||(o=f?"":this.convertDateToString(n)),ej.isNullOrUndefined(i)||(s=this.convertDateToString(i)),ej.isNullOrUndefined(n)||(n=this.convertDateTimeToMeridiemTimeString(n)),ej.isNullOrUndefined(i)||(i=this.convertDateTimeToMeridiemTimeString(i)),this.startDate=n,this.endDate=i,{startPreviewDate:o,endPreviewDate:s}},n.prototype.filterRelativeDateByHour=function(){var f=this.getPreviewRelatedDetails(),h=f.anchorDate,u=f.range,t=new Date,e,o,s;f.useAnchorDate&&!ej.isNullOrUndefined(h)&&(e=h.split("/"),t=new Date(e[2],e[0]-1,e[1],0,0,0,999));var r=t.getFullYear(),n=null,i=null;switch(f.dateInstance){case DateInstance.Current:n=new Date(r,t.getMonth(),t.getDate(),t.getHours(),0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()+1,n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Previous:n=new Date(r,t.getMonth(),t.getDate(),t.getHours()-1,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()+1,n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Succeeding:n=new Date(r,t.getMonth(),t.getDate(),t.getHours()+1,0,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()+1,n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.ToDate:n=new Date(r,t.getMonth(),t.getDate(),t.getHours(),0,0,0);i=t;break;case DateInstance.Next:n=new Date(r,t.getMonth(),t.getDate(),t.getHours()+u,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()+u,n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Last:n=new Date(r,t.getMonth(),t.getDate(),t.getHours()-u,0,0);i=this.updateEndDate(new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours()+u,n.getMinutes(),n.getSeconds(),n.getMilliseconds()));break;case DateInstance.Past:n=new Date(r,t.getMonth(),t.getDate(),t.getHours()-u,t.getMinutes(),t.getSeconds(),t.getMilliseconds());i=this.updateEndDate(t);break;case DateInstance.Upcoming:n=t;i=this.updateEndDate(new Date(r,t.getMonth(),t.getDate(),t.getHours()+u,t.getMinutes(),t.getSeconds(),t.getMilliseconds()))}return o=null,s=null,ej.isNullOrUndefined(n)||(o=this.convertDateTimeToMeridiemTimeString(n)),ej.isNullOrUndefined(i)||(s=this.convertDateTimeToMeridiemTimeString(i)),ej.isNullOrUndefined(n)||(n=this.convertDateTimeToMeridiemTimeString(n)),ej.isNullOrUndefined(i)||(i=this.convertDateTimeToMeridiemTimeString(i)),this.startDate=n,this.endDate=i,{startPreviewDate:o,endPreviewDate:s}},n.prototype.convertDateTimeToMeridiemTimeString=function(n){var i=(n.getMonth()+1>=10?"":"0")+(n.getMonth()+1),t=n.getHours()===0?12:n.getHours()>12?n.getHours()-12:n.getHours(),r=n.getHours()>=12?"PM":"AM",u=(t<10?"0":"")+t,f=(n.getMinutes()<10?"0":"")+n.getMinutes();return i+"/"+n.getDate()+"/"+n.getFullYear()+" "+u+":"+f+" "+r},n.prototype.updateEndDate=function(n){return new Date(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()-2)},n.prototype.isCommonDateInstance=function(n){return n===DateInstance.Last||n===DateInstance.Next||n===DateInstance.Past||n===DateInstance.Upcoming},n.prototype.populateDateFilterInfo=function(n){this.formatDropdown.data("ejDropDownList").selectItemByValue(n.RelativeDateFormat);this.periodDropdown.data("ejDropDownList").selectItemByValue(n.DateInstance);this.isCommonDateInstance(n.DateInstance)?(this.enableRangeNumericTextBox(!0),this.rangeNumeric.data("ejNumericTextbox").setModel({value:n.Range>0?n.Range:1})):this.enableRangeNumericTextBox(!1);this.linkDate.data("ejCheckBox").setModel({checked:n.UseAnchorDate});var t=null;t=!ej.isNullOrUndefined(n.AnchorDate)&&n.AnchorDate.length>0?n.AnchorDate:this.getCurrentDate();this.anchorDate.data("ejDatePicker").setModel({enabled:n.UseAnchorDate,value:new Date(t)});this.startDate=n.StartDate;this.endDate=n.EndDate;this.UpdatePreviewRelativeDate()},n.prototype.getRelativeDateFilterInfo=function(){var n=this.createDateFilterInfo(),t;return n.RelativeDateFormat=this.formatDropdown.data("ejDropDownList").getSelectedValue(),t=this.periodDropdown.data("ejDropDownList").getSelectedValue(),n.DateInstance=t,n.Range=this.isCommonDateInstance(t)?this.rangeNumeric.data("ejNumericTextbox").getValue():1,n.StartDate=this.startDate,n.EndDate=this.endDate,n.UseAnchorDate=this.linkDate.data("ejCheckBox").isChecked(),n.AnchorDate=this.convertDateTimeToMeridiemTimeString(new Date(this.anchorDate.data("ejDatePicker").getValue())),n},n.prototype.getCurrentDate=function(){var n=new Date;return this.convertDateToString(n)},n.prototype.convertDateToString=function(n){if(!ej.isNullOrUndefined(n)){var t=(n.getMonth()+1>=10?"":"0")+(n.getMonth()+1);return t+"/"+n.getDate()+"/"+n.getFullYear()}return null},n.prototype.updateDateFilterInfo=function(){var n=this.getRelativeDateFilterInfo();ej.isNullOrUndefined(this.targetInstance)||(ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[n,this.columnDetails]),this.closeRelativeDateFilter())},n.prototype.openRelativeDateFilter=function(n,t,i,r){this.dateFilterDialog.data("ejDialog").open();this.resetDateFilerDialog();this.targetInstance=n;this.targetMethod=t;this.dateFilterInfo=i;this.columnDetails=r;ej.isNullOrUndefined(i)?this.formatDropdown.data("ejDropDownList").setModel({selectedIndex:0}):this.populateDateFilterInfo(i)},n.prototype.closeRelativeDateFilter=function(){this.dateFilterDialog.data("ejDialog").close()},n.prototype.resetDateFilerDialog=function(){this.targetInstance=null;this.targetMethod=null;this.dateFilterInfo=null;this.columnDetails=null;this.rangeNumeric.data("ejNumericTextbox").setModel({value:1});this.enableRangeNumericTextBox(!1);this.anchorDate.data("ejDatePicker").setModel({enabled:!1,value:new Date(this.getCurrentDate())});this.startDate=null;this.endDate=null;this.previewTag.text("");this.linkDate.data("ejCheckBox").setModel({checked:!1})},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_relative_date_filter"));$("#"+this.id+"_relative_date_filter").length>0&&$("#"+this.id+"_relative_date_filter").remove()},n.prototype.createDateFilterInfo=function(){return{RelativeDateFormat:"Year",DateInstance:DateInstance.Current,AnchorDate:null,StartDate:null,EndDate:null,Range:1,ColumnId:null,ColumnName:null,UniqueColumnName:"",UseAnchorDate:!1}},n.prototype.periodTypeList=function(n,t){var r=[],i,u;return t?r=[{text:"Previous "+n,value:"Previous "+n,dateInstance:DateInstance.Previous},{text:"Link "+n,value:"Link "+n,dateInstance:DateInstance.Current},{text:"Next "+n,value:"Next "+n,dateInstance:DateInstance.Succeeding}]:(i=n==="Day",r=[{text:i?"Yesterday":"Previous "+n,value:i?"Yesterday":"Previous "+n,dateInstance:DateInstance.Previous},{text:i?"Today":"Current "+n,value:i?"Today":"Current "+n,dateInstance:DateInstance.Current},{text:i?"Tomorrow":"Next "+n,value:i?"Tomorrow":"Next "+n,dateInstance:DateInstance.Succeeding}]),u=[{text:"Last",value:"Last",dateInstance:DateInstance.Last},{text:"Next",value:"Next",dateInstance:DateInstance.Next},{text:"Past",value:"Past",dateInstance:DateInstance.Past},{text:"Upcoming",value:"Upcoming",dateInstance:DateInstance.Upcoming}],n!=="Day"&&n!=="Hour"&&u.push({text:n+" to "+(t?"LINK":"date"),value:n+" to "+(t?"LINK":"date"),dateInstance:DateInstance.ToDate}),r.concat(u)},n.prototype.formatTypeList=function(){return[{text:"Year",value:"Year"},{text:"Quarter",value:"Quarter"},{text:"Month",value:"Month"},{text:"Week",value:"Week"},{text:"Day",value:"Day"},{text:"Hour",value:"Hour"}]},n}();window.ej.createObject("ej.DashboardDesignerUtility.RelativeDateFilter",InternalRelativeDateFilter,window);InternalRelativeDates=function(){function n(){this.relativeDatesDialog=null;this.relativeDateItemTable=null;this.rangeTextBoxTd=null;this.formatDropdownTd=null;this.startDateTd=null;this.endDateTd=null;this.customTextBoxTd=null;this.addButtonTd=null;this.confirmationTd=null;this.previewTag=null;this.containerDiv=null;this.deleteIcon=null;this.editIcon=null;this.upIcon=null;this.downIcon=null;this.relativeDateList=[];this.targetInstance=null;this.targetMethod=null;this.addBtnTag=null;this.applyButton=null;this.periodDropdown=null;this.rangeTextBox=null;this.formatDropdown=null;this.startDatePicker=null;this.endDatePicker=null;this.customTextBox=null;this.listBoxContent=null;this.id=ejDashboardDesigner.getInstance("DashboardDesigner")._id;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.queryDesigner=ej.DashboardUtil.getQueryInstance("QueryDesigner");this.designPanel=ejDashboardDesigner.getInstance("DesignPanel");this.renderRelativeDatesWindow()}return Object.defineProperty(n,"RelativeDates",{get:function(){return(this.relativeDates===null||this.relativeDates===undefined)&&(this.relativeDates=new ej.DashboardDesignerUtility.RelativeDates),this.relativeDates},enumerable:!0,configurable:!0}),n.prototype.renderRelativeDatesWindow=function(){var u=this.relativeDatesDialog=ej.buildTag("div.e-userselect","",{},{id:this.id+"_relative_dates"}),f=ej.buildTag("div","",{}),k=this.relativeDateItemTable=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"5px 0px"},{}),d=$("<tr><\/tr>"),g=ej.buildTag("td","",{"padding-left":"3px"},{id:this.id+"_relative_dates_periodTd"}),e=ej.buildTag("input","",{},{type:"text",id:this.id+"_relative_dates_perioddrop"}),o,n,s,t,h,i,c,r,a,v,et,y,ot,p,w,st,b;g.append(e);o=this.rangeTextBoxTd=ej.buildTag("td","",{"padding-left":"5px",float:"left",display:"block"},{id:this.id+"_relative_dates_rangeTd"});n=ej.buildTag("input","",{},{type:"text",id:this.id+"_relative_dates_range_textbox"});o.append(n);s=this.formatDropdownTd=ej.buildTag("td","",{"padding-left":"5px",float:"right",display:"block"},{id:this.id+"_relative_dates_formatTd"});t=ej.buildTag("input","",{},{type:"text",id:this.id+"_relative_dates_formatdrop"});s.append(t);h=this.startDateTd=ej.buildTag("td","",{float:"right","padding-right":"7px",display:"none"},{id:this.id+"_relative_dates_startDateTd"});i=ej.buildTag("input.e-designer-param-assign","",{},{type:"text",id:this.id+"_relative_dates_startDatePicker"});h.append(i);c=this.endDateTd=ej.buildTag("td","",{float:"right",display:"none"},{id:this.id+"_relative_dates_endDateTd"});r=ej.buildTag("input.e-designer-param-assign","",{},{type:"text",id:this.id+"_relative_dates_endDatePicker"});c.append(r);d.append(g).append(o).append(s).append(c).append(h);k.append(d);var nt=this.relativeDateItemTable=ej.buildTag("table.e-designer-exp-table","",{width:"100%",padding:"5px 0px 10px"},{}),tt=$("<tr><\/tr>"),it=this.customTextBoxTd=ej.buildTag("td","",{"padding-left":"3px",float:"left",display:"none"},{id:this.id+"_relative_dates_customTd"}),l=ej.buildTag("input.e-designer-param-assign","",{},{type:"text",id:this.id+"_relative_dates_customTextBox"});it.append(l);var rt=this.confirmationTd=ej.buildTag("td","",{display:"none"},{id:this.id+"_relative_dates_confirmationTd"}),ut=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_relative_dates_cancel"}),ft=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_relative_dates_update"});rt.append(ut).append(ft);a=this.addButtonTd=ej.buildTag("td","",{"padding-left":"3px",display:"block"},{id:this.id+"_relative_dates_addTd"});v=this.addBtnTag=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_relative_dates_add"});a.append(v);tt.append(it).append(rt).append(a);nt.append(tt);et=ej.buildTag("div","",{height:"5px",margin:"0px 2px 0px 5px","border-top":"1px solid #cecece"},{});f.append(k).append(nt).append(et);this.renderDateOptionsContainer(f);y=ej.buildTag("div","",{width:"210px",height:"28px",display:"table","padding-left":"3px",float:"left"},{});ot=this.previewTag=ej.buildTag("span","",{display:"table-cell","font-size":"10px","vertical-align":"middle"},{id:this.id+"_relative_dates_preview"});y.append(ot);p=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_relative_dates_close"});w=this.applyButton=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_relative_dates_ok"});u.append(f);$(document.body).append(u);u.ejDialog({title:"Relative Date Options",width:"auto",height:"auto",minWidth:500,minHeight:400,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,cssClass:"e-designer-dialog e-dashboarddesigner",close:$.proxy(ej.DashboardUtil.closeDialog,this)});st=$("#"+this.id+"_relative_dates_foot");st.append(y).append(p).append(w);b=this.dashboardDesigner.locale.dialogOptions;w.ejButton({text:b.applyButtonText,showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.applyRelativeDateInfo,this)});p.ejButton({text:b.cancelButtonText,showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.closeRelativeDateInfo,this)});t.ejDropDownList({width:"160px",height:"28px",dataSource:this.formatTypeList(),fields:{text:"text",value:"value"},showRoundedCorner:!0,popupWidth:"170px",cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changeFormatType,this)});n.ejNumericTextbox({showSpinButton:!0,decimalPlaces:0,minValue:1,maxvalue:1e9,value:1,width:"120px",height:"28px",showRoundedCorner:!0,cssClass:"e-designer-ejwidgets e-designer-ejwidgets-updown e-designer-content-label",change:$.proxy(this.getPreviewDateRange,this)});e.ejDropDownList({width:"160px",height:"28px",dataSource:[],fields:{text:"text",value:"value"},showRoundedCorner:!0,popupWidth:"170px",cssClass:"e-designer-param-assign e-designer-border e-designer-ejwidgets e-dbrd-control",change:$.proxy(this.changePeriodType,this)});i.ejDatePicker({width:"145px",height:"28px",watermarkText:"Start date",showRoundedCorner:!0,cssClass:"e-designer-border e-dbrd-designer-relative-picker e-dashboarddesigner-widget",startDate:"01/01/0001",endDate:"01/01/9999",change:$.proxy(this.getPreviewDateRange,this)});r.ejDatePicker({width:"145px",height:"28px",watermarkText:"End date",showRoundedCorner:!0,cssClass:"e-designer-border e-dbrd-designer-relative-picker e-dashboarddesigner-widget",startDate:"01/01/0001",endDate:"01/01/9999",change:$.proxy(this.getPreviewDateRange,this)});l.ejMaskEdit({inputMode:ej.InputMode.Text,width:"200px",height:"26px",watermarkText:"Custom date range",showRoundedCorner:!0,cssClass:"e-designer-border",change:$.proxy(this.changeCustomValue,this)});v.ejButton({text:"Add",showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.appendRelativeDateList,this)});ft.ejButton({text:"Update",showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.updateRelativeDateInfo,this)});ut.ejButton({text:"Cancel",showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.cancelDateInfoUpdation,this)});this.periodDropdown=e.data("ejDropDownList");this.rangeTextBox=n.data("ejNumericTextbox");this.formatDropdown=t.data("ejDropDownList");this.startDatePicker=i.data("ejDatePicker");this.endDatePicker=r.data("ejDatePicker");this.customTextBox=l.data("ejMaskEdit")},n.prototype.renderDateOptionsContainer=function(n){var i=ej.buildTag("div.e-dashboarddesigner-relative-filter-toolbar","",{height:"20px",margin:"5px","margin-right":"2px"},{}),s=ej.buildTag("span","Date Options",{float:"left"},{}),r=this.upIcon=ej.buildTag("span.e-icon e-widgeticon e-dashboarddesigner-up-arrow","",{float:"right","font-size":"14px",width:"30px",height:"100%","line-height":"20px"},{id:this.id+"_relative_dates_up_icon",title:"Move Up"}),u=this.downIcon=ej.buildTag("span.e-icon e-widgeticon e-dashboarddesigner-down-arrow","",{float:"right","font-size":"14px",width:"30px",height:"100%","line-height":"20px"},{id:this.id+"_relative_dates_down_icon",title:"Move Down"}),f=this.deleteIcon=ej.buildTag("span.e-icon e-widgeticon e-reportdesigner-toolbar-delete","",{float:"right","font-size":"14px","padding-right":"3px",width:"30px",height:"100%","line-height":"20px",cursor:"pointer"},{id:this.id+"_relative_dates_delete_icon",title:"Delete"}),e=this.editIcon=ej.buildTag("span.e-icon e-widgeticon e-reportdesigner-parameter-edit","",{float:"right","font-size":"14px",width:"30px",height:"100%","line-height":"20px",cursor:"pointer"},{id:this.id+"_relative_dates_edit_icon",title:"Edit"}),o=this.containerDiv=ej.buildTag("div","",{"margin-left":"5px"},{id:this.id+"_relative_dates_display_container_div"}),t=ej.buildTag("ul","",{},{id:this.id+"_relative_dates_display_container"}),h=ej.buildTag("span","",{float:"right",height:"21px",width:"1px",background:"gray","margin-right":"3px","margin-left":"3px"},{id:this.id+"_relative_separator"});o.append(t);i.append(s).append(f,e,h,r,u);n.append(i).append(o);e.bind("click",$.proxy(this.editDateListInfo,this));f.bind("click",$.proxy(this.deleteDateListInfo,this));r.bind("click",$.proxy(this.moveUpDateListInfo,this));u.bind("click",$.proxy(this.moveDownDateListInfo,this));t.ejListBox({height:"216px",width:"466px",fields:{text:"DisplayText",value:"DisplayText"},dataSource:[],showRoundedCorner:!0,cssClass:"e-designer-param-assign e-designer-border e-dbrd-control",create:$.proxy(this.createScrollBar,this),change:$.proxy(this.getPreviewDateRangeForSelectedItems,this),select:$.proxy(this.disableUpandDownArrow,this)});this.listBoxContent=t.data("ejListBox")},n.prototype.createScrollBar=function(){$(this.relativeDatesDialog.find("#"+this.id+"_relative_dates_display_container").ejListBox("instance").listContainer).ejScroller({enableTouchScroll:!1,autoHide:!0,buttonSize:14,scrollerSize:9,cssClass:"e-dbrd-designer-scroller e-dbrd-control"})},n.prototype.disableUpandDownArrow=function(n){n.isSelected&&(n.model.dataSource.length===1?(this.upIcon.addClass("e-relativedate-filter-icon-disable").attr("disabled","disabled"),this.downIcon.addClass("e-relativedate-filter-icon-disable").attr("disabled","disabled")):n.index===0&&n.model.dataSource.length>1?(this.upIcon.addClass("e-relativedate-filter-icon-disable").attr("disabled","disabled"),this.downIcon.removeClass("e-relativedate-filter-icon-disable").removeAttr("disabled")):n.index===n.model.dataSource.length-1?(this.downIcon.addClass("e-relativedate-filter-icon-disable").attr("disabled","disabled"),this.upIcon.removeClass("e-relativedate-filter-icon-disable").removeAttr("disabled")):(this.upIcon.removeClass("e-relativedate-filter-icon-disable").removeAttr("disabled"),this.downIcon.removeClass("e-relativedate-filter-icon-disable").removeAttr("disabled")))},n.prototype.moveUpDateListInfo=function(n){ej.isNullOrUndefined($(n.currentTarget).attr("disabled"))&&(this.listBoxContent.moveUp(),this.swapData(this.listBoxContent.model.selectedIndex,this.listBoxContent.model.selectedIndex-1),this.disableUpandDownArrow({isSelected:!0,index:--this.listBoxContent.model.selectedIndex,model:this.listBoxContent.model}))},n.prototype.moveDownDateListInfo=function(n){ej.isNullOrUndefined($(n.currentTarget).attr("disabled"))&&(this.listBoxContent.moveDown(),this.swapData(this.listBoxContent.model.selectedIndex,this.listBoxContent.model.selectedIndex+1),this.disableUpandDownArrow({isSelected:!0,index:++this.listBoxContent.model.selectedIndex,model:this.listBoxContent.model}))},n.prototype.swapData=function(n,t){if(n!==-1&&t!==-1){var i=this.listBoxContent.model.dataSource[n];this.listBoxContent.model.dataSource[n]=this.listBoxContent.model.dataSource[t];this.listBoxContent.model.dataSource[t]=i}},n.prototype.editDateListInfo=function(){var n=this.listBoxContent.model.selectedIndex;ej.isNullOrUndefined(n)||(this.populateDateListInfo(this.listBoxContent.model.dataSource[n]),this.showUpdateButton(!0),this.disableDateOptionsContainer(!0))},n.prototype.deleteDateListInfo=function(){var n=this.listBoxContent.model.selectedIndex;ej.isNullOrUndefined(n)||(this.listBoxContent.removeItemByIndex(n),this.relativeDateList=this.listBoxContent.model.dataSource,this.listBoxContent.model.dataSource.length>0?(this.listBoxContent.selectItemByIndex(0),this.disableApplyButton(!1)):(this.disableToobarIcons(!0),this.disableApplyButton(!0)))},n.prototype.updateRelativeDateInfo=function(){var f=this.periodDropdown.getSelectedValue(),r=!1,u=f==="Custom",t,n,i;u&&(t=this.customTextBox.get_UnstrippedValue(),r=ej.isNullOrUndefined(t)||t.length===0);r?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.relativeDateOptions,this.dashboardDesigner.locale.relativeDateMessages.relativeRangeNotEmpty,IconType.errors,AlertType.Alert,!1,""):(n=this.getRelativeDateInfo(),ej.isNullOrUndefined(n)?(this.disableDateOptionsContainer(!1),this.showUpdateButton(!1)):(i=this.listBoxContent.model.selectedIndex,this.isExistDateInfo(n,i)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.relativeDateOptions,this.dashboardDesigner.locale.relativeDateMessages.itemExist,IconType.warning,AlertType.Alert,!1,""):(u&&this.resetCustomValues(),this.listBoxContent.model.dataSource[i]=n,this.listBoxContent.refresh(!0),this.relativeDateList=this.listBoxContent.model.dataSource,this.disableDateOptionsContainer(!1),this.showUpdateButton(!1),this.disableApplyButton(!1),this.previewTag[0].innerText===""&&this.getPreviewDateRangeForSelectedItems())))},n.prototype.cancelDateInfoUpdation=function(){var n=this.periodDropdown.getSelectedValue();n==="Custom"&&this.resetCustomValues();this.showUpdateButton(!1);this.disableDateOptionsContainer(!1)},n.prototype.appendRelativeDateList=function(){var n=this.getRelativeDateInfo(),t,i;ej.isNullOrUndefined(n)||(this.isExistDateInfo(n)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.relativeDateOptions,this.dashboardDesigner.locale.relativeDateMessages.itemExist,IconType.warning,AlertType.Alert,!1,""):(t=this.periodDropdown.getSelectedValue(),t==="Custom"&&this.resetCustomValues(),this.listBoxContent.model.dataSource.length===0&&this.disableApplyButton(!1),i=this.listBoxContent.model.dataSource.length===0,this.listBoxContent.addItem(n,this.listBoxContent.model.dataSource.length),this.relativeDateList=this.listBoxContent.model.dataSource,this.listBoxContent.selectItemByIndex(i?0:this.listBoxContent.model.selectedIndex),this.disableUpandDownArrow({isSelected:!0,index:this.listBoxContent.model.selectedIndex||0,model:this.listBoxContent.model}),this.disableToobarIcons(!1),this.previewTag[0].innerText===""&&this.getPreviewDateRangeForSelectedItems()))},n.prototype.isExistDateInfo=function(n,t){for(var r,f,u,i=0;i<this.relativeDateList.length;i++){if(r=!1,ej.isNullOrUndefined(t)||t!==i||(r=!0),f=this.relativeDateList[i],u=f.DisplayText===n.DisplayText,u&&r)return!1;if(u&&!r)return!0}return!1},n.prototype.resetCustomValues=function(){this.customTextBox.setModel({value:""});this.startDatePicker.setModel({value:""});this.endDatePicker.setModel({value:""})},n.prototype.dateComparison=function(n,t){var i=Date.parse(n),r=Date.parse(t);return i>r},n.prototype.getPreviewDateRangeForSelectedItems=function(){var n=this.listBoxContent.model,i,r,t;if(ej.isNullOrUndefined(this.queryDesigner)||ej.isNullOrUndefined(this.queryDesigner.dataset)?(r=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0],i=ej.DashboardUtil.getWidgetInstance(r).dataGroupInfo.DatasetId):i=this.queryDesigner.dataset.Id,!ej.isNullOrUndefined(n.dataSource)&&n.dataSource.length>1&&!ej.isNullOrUndefined(n.selectedText)&&n.selectedText!=="")for(t=0;t<n.dataSource.length;t++)n.selectedText===n.dataSource[t].DisplayText&&ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getDateRange,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getDateRange,fieldInfo:n.dataSource[t],dataset:i,type:"date",dateRangeType:"RelativeDate"})},{fnction:$.proxy(this.updatePreviewDateRange,this)});else!ej.isNullOrUndefined(n.dataSource)&&n.dataSource.length>0&&ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getDateRange,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getDateRange,fieldInfo:n.dataSource[0],dataset:i,type:"date",dateRangeType:"RelativeDate"})},{fnction:$.proxy(this.updatePreviewDateRange,this)})},n.prototype.getPreviewDateRange=function(){var t,n,r;if(!ej.isNullOrUndefined(this.startDatePicker)&&!ej.isNullOrUndefined(this.endDatePicker)&&!ej.isNullOrUndefined(this.periodDropdown)){var i=this.startDatePicker.getValue(),u=this.endDatePicker.getValue(),f=this.periodDropdown.getSelectedValue();f==="Custom"&&ej.isNullOrUndefined(i)||!ej.isNullOrUndefined(i)&&ej.isNullOrUndefined(u)?this.previewTag.text(""):(t=this.getRelativeDateInfo(),ej.isNullOrUndefined(t)?this.previewTag.text(""):(n=void 0,ej.isNullOrUndefined(this.queryDesigner)||ej.isNullOrUndefined(this.queryDesigner.dataset)?(r=ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0],n=ej.DashboardUtil.getWidgetInstance(r).dataGroupInfo.DatasetId):n=this.queryDesigner.dataset.Id,ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getDateRange,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getDateRange,fieldInfo:t,dataset:n,type:"date",dateRangeType:"RelativeDate"})},{fnction:$.proxy(this.updatePreviewDateRange,this)})))}},n.prototype.updatePreviewDateRange=function(n){var t=null;ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.DateRange)?this.previewTag.text(""):(t=ej.isNullOrUndefined(n.DateRange.StartDateTime)||ej.isNullOrUndefined(n.DateRange.EndDateTime)?n.DateRange.StartDate.length>0?n.DateRange.StartDate+" to "+n.DateRange.EndDate:n.DateRange.EndDate:n.DateRange.StartDateTime+" to "+n.DateRange.EndDateTime,this.previewTag.text(t))},n.prototype.getRelativeDateInfo=function(){var n=this.formatDropdown.getSelectedValue(),t=this.periodDropdown.getSelectedValue();return t==="Custom"?this.getCustomDateInfo(n):n==="Year to date"?this.getTillNowDateInfo("Year",n):n==="Quarter to date"?this.getTillNowDateInfo("Quarter",n):n==="Month to date"?this.getTillNowDateInfo("Month",n):n==="Week to date"?this.getTillNowDateInfo("Week",n):this.getPeriodBasedDateInfo(n)},n.prototype.getCustomDateInfo=function(n){var t=null,i=this.startDatePicker.getValue(),r=this.endDatePicker.getValue(),f=this.customTextBox.get_UnstrippedValue(),u=" 12:00:00 AM";return!ej.isNullOrUndefined(i)&&!ej.isNullOrUndefined(r)&&i.length>0&&r.length>0?this.dateComparison(i,r)?ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.relativeDateOptions,this.dashboardDesigner.locale.relativeDateMessages.startDateNotLessEndDate,IconType.errors,AlertType.Alert,!1,""):(t=this.createRelativeInfo(),t.DisplayText=f,t.IsCustomRange=!0,t.Filter.RelativeDateFormat=n,t.Filter.DateInstance=DateInstance.Custom,t.Filter.Range=0,t.Filter.StartDate=i+u,t.Filter.EndDate=r+u):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.relativeDateOptions,this.dashboardDesigner.locale.relativeDateMessages.dateNotEmpty,IconType.errors,AlertType.Alert,!1,""),t},n.prototype.getPeriodBasedDateInfo=function(n){var i=this.createRelativeInfo(),f=this.periodDropdown.getListData(),t=f[this.periodDropdown.model.selectedIndex].dateInstance,r=t===DateInstance.Last||t===DateInstance.Next||t===DateInstance.Past||t===DateInstance.Upcoming,u=r?this.rangeTextBox.getValue():1,e=this.formatDropdown.model.dataSource[this.formatDropdown.model.selectedIndex].text,o=t+" "+(r?u:"")+" "+e;return i.DisplayText=o,i.Filter.RelativeDateFormat=n,i.Filter.DateInstance=t,i.Filter.Range=u,i},n.prototype.getTillNowDateInfo=function(n,t){var i=this.createRelativeInfo();return i.DisplayText=t,i.Filter.RelativeDateFormat=n,i.Filter.DateInstance=DateInstance.TillNow,i},n.prototype.changeCustomValue=function(n){var t=ej.isNullOrUndefined(n.value)||n.value===0;this.addButtonTd.is(":visible")&&this.disableAddButton(t)},n.prototype.changeFormatType=function(n){if(!ej.isNullOrUndefined(n)&&n.value.length>0){var t=n.value,i=ej.isNullOrUndefined(this.periodDropdown.model.selectedIndex)?1:this.periodDropdown.model.selectedIndex;this.periodDropdown.setModel({dataSource:this.periodTypeList(t==="Day")});this.periodDropdown.selectItemsByIndices(i);t==="Year to date"||t==="Quarter to date"||t==="Month to date"||t==="Week to date"?this.disablePeriodDropdown(!0):this.disablePeriodDropdown(!1)}this.getPreviewDateRange()},n.prototype.changePeriodType=function(n){if(!ej.isNullOrUndefined(n)&&n.text.length>0){var t=n.text,i=t==="Custom";this.showFormatDropdown(!i);this.disableAddButton(i);t==="Last"||t==="Next"||t==="Past"||t==="Upcoming"?this.rangeTextBox.enable():this.rangeTextBox.disable()}this.getPreviewDateRange()},n.prototype.disableToobarIcons=function(n){n?(this.deleteIcon.addClass("e-relativedate-filter-icon-disable").attr("disabled","disabled"),this.editIcon.addClass("e-relativedate-filter-icon-disable").attr("disabled","disabled"),this.upIcon.addClass("e-relativedate-filter-icon-disable").attr("disabled","disabled"),this.downIcon.addClass("e-relativedate-filter-icon-disable").attr("disabled","disabled")):(this.deleteIcon.removeClass("e-relativedate-filter-icon-disable").removeAttr("disabled"),this.editIcon.removeClass("e-relativedate-filter-icon-disable").removeAttr("disabled"))},n.prototype.disableDateOptionsContainer=function(n){n?this.listBoxContent.disable():this.listBoxContent.enable();this.disableToobarIcons(n)},n.prototype.showUpdateButton=function(n){n?(this.confirmationTd.css("display","block"),this.addButtonTd.css("display","none")):(this.addButtonTd.css("display","block"),this.confirmationTd.css("display","none"))},n.prototype.showFormatDropdown=function(n){n?(this.rangeTextBoxTd.css("display","block"),this.formatDropdownTd.css("display","block"),this.startDateTd.css("display","none"),this.endDateTd.css("display","none"),this.customTextBoxTd.css("display","none")):(this.rangeTextBoxTd.css("display","none"),this.formatDropdownTd.css("display","none"),this.startDateTd.css("display","block"),this.endDateTd.css("display","block"),this.customTextBoxTd.css("display","block"))},n.prototype.disableAddButton=function(n){n?ej.DashboardUtil.buttonEnable(this.addBtnTag,!1):ej.DashboardUtil.buttonEnable(this.addBtnTag,!0)},n.prototype.disableApplyButton=function(n){n?ej.DashboardUtil.buttonEnable(this.applyButton,!1):ej.DashboardUtil.buttonEnable(this.applyButton,!0)},n.prototype.disablePeriodDropdown=function(n){n?(this.periodDropdown.disable(),this.rangeTextBox.disable()):(this.periodDropdown.enable(),this.rangeTextBox.enable())},n.prototype.populateDateListInfo=function(n){var t=n.Filter,f=t.DateInstance===DateInstance.TillNow,e=t.DateInstance===DateInstance.Custom,o=t.RelativeDateFormat+(f?" to date":""),r=null,u,i;if(this.formatDropdown.selectItemByValue(o),f||e)f?r="Last":e&&(r="Custom");else for(u=this.periodDropdown.getListData(),i=0;i<u.length;i++)t.DateInstance===u[i].dateInstance&&(r=u[i].text);this.periodDropdown.selectItemByText(r);this.rangeTextBox.setModel({value:t.Range===0?1:t.Range});e?(this.startDatePicker.setModel({value:new Date(t.StartDate)}),this.endDatePicker.setModel({value:new Date(t.EndDate)}),this.customTextBox.setModel({value:n.DisplayText})):(this.startDatePicker.setModel({value:""}),this.endDatePicker.setModel({value:""}),this.customTextBox.setModel({value:""}))},n.prototype.populateRelativeDateInfo=function(n){n.length>0&&(this.listBoxContent.setModel({dataSource:n}),this.listBoxContent.selectItemByIndex(0),this.disableUpandDownArrow({isSelected:!0,index:0,model:this.listBoxContent.model}),this.populateDateListInfo(n[0]),this.disableToobarIcons(!1))},n.prototype.applyRelativeDateInfo=function(){ej.isNullOrUndefined(this.targetInstance)||(ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[$.extend([],!0,this.relativeDateList)]),this.closeRelativeDateInfo())},n.prototype.openRelativeDatesDialog=function(n,t,i){this.relativeDatesDialog.data("ejDialog").open();this.resetRelativeDateDialog();this.targetInstance=n;this.targetMethod=t;!ej.isNullOrUndefined(i)&&i.length>0?(this.relativeDateList=i,this.populateRelativeDateInfo(i)):(this.formatDropdown.setModel({selectedIndex:0}),this.disableApplyButton(!0));this.previewTag[0].innerText===""&&this.getPreviewDateRangeForSelectedItems()},n.prototype.resetRelativeDateDialog=function(){this.targetInstance=null;this.targetMethod=null;this.relativeDateList=[];this.listBoxContent.setModel({dataSource:[]});this.rangeTextBox.setModel({value:1});this.disableToobarIcons(!0);this.listBoxContent.enable();this.showFormatDropdown(!0);this.showUpdateButton(!1);this.formatDropdown.setModel({selectedIndex:0});this.periodDropdown.setModel({selectedIndex:1});this.resetCustomValues()},n.prototype.closeRelativeDateInfo=function(){this.relativeDatesDialog.data("ejDialog").close()},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_relative_dates"));$("#"+this.id+"_relative_dates").length>0&&$("#"+this.id+"_relative_dates").remove()},n.prototype.createRelativeInfo=function(){return{DisplayText:null,Filter:this.getRelativeDateFilterInfo(),IsCustomRange:!1}},n.prototype.getRelativeDateFilterInfo=function(){return{RelativeDateFormat:"Year",DateInstance:DateInstance.Current,AnchorDate:null,StartDate:null,EndDate:null,Range:1,ColumnId:null,ColumnName:null,UniqueColumnName:"",UseAnchorDate:!1}},n.prototype.periodTypeList=function(n){return[{text:n?"Today":"Current",value:n?"Today":"Current",dateInstance:DateInstance.Current},{text:"Last",value:"Last",dateInstance:DateInstance.Last},{text:"Next",value:"Next",dateInstance:DateInstance.Next},{text:"Past",value:"Past",dateInstance:DateInstance.Past},{text:"Upcoming",value:"Upcoming",dateInstance:DateInstance.Upcoming},{text:"Custom",value:"Custom",dateInstance:DateInstance.Custom}]},n.prototype.formatTypeList=function(){return[{text:"Year(s)",value:"Year"},{text:"Quarter(s)",value:"Quarter"},{text:"Month(s)",value:"Month"},{text:"Week",value:"Week"},{text:"Day(s)",value:"Day"},{text:"Hour",value:"Hour"},{text:"Year to date",value:"Year to date"},{text:"Quarter to date",value:"Quarter to date"},{text:"Month to date",value:"Month to date"},{text:"Week to date",value:"Week to date"}]},n}();window.ej.createObject("ej.DashboardDesignerUtility.RelativeDates",InternalRelativeDates,window);InternalSalesForceDataSource=function(){function n(){this.codeChkSwitcher=null;this.connectionType="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.datasource=ejDashboardDesigner.getInstance("DataSource");this.id=this.dashboardDesigner._id+"_sales_force_ds"}return Object.defineProperty(n,"SalesForceDataSource",{get:function(){return(this.salesForceDataSource===null||this.salesForceDataSource===undefined)&&(this.salesForceDataSource=new ej.DashboardDesignerUtility.SalesForceDataSource),this.salesForceDataSource},enumerable:!0,configurable:!0}),Object.defineProperty(n,"SalesForceReconnectDataSource",{get:function(){return(this.salesForceReconnectDataSource===null||this.salesForceReconnectDataSource===undefined)&&(this.salesForceReconnectDataSource=new ej.DashboardDesignerUtility.SalesForceDataSource),this.salesForceReconnectDataSource},enumerable:!0,configurable:!0}),n.prototype.getId=function(){return this.id},n.prototype.renderConfiguration=function(n,t,i){this.oAuthData=i;this.connectionType=t;n.find("#"+this.id+this.connectionType).length!==0?(this.resetConfiguration(),this.wrapperEle.show()):(this.wrapperEle=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+this.connectionType}),n.append(this.wrapperEle),this.renderPanel())},n.prototype.renderPanel=function(){var r=[{id:"never",text:"Never",value:"Never"},{id:"1hours",text:"1 Hour",value:"OneHours"},{id:"6hours",text:"6 Hours",value:"SixHours"},{id:"12hours",text:"12 Hours",value:"TwelveHours"},{id:"24hours",text:"24 Hours",value:"TwentyFourHours"},{id:"1week",text:"1 Week",value:"OneWeek"},{id:"1month",text:"1 Month",value:"OneMonth"}],c=ejDashboardDesigner.getInstance("DashboardDesigner").previewFeaturesJson,u=ej.DashboardUtil.getInstance().GetPreviewFeatureValue(c,PreviewFeatureName.RefreshSettings),n,f,t,e,i;ej.isNullOrUndefined(u)||(r=u);n=ej.buildTag("table.e-designer-dsconfig-table","",{width:"100%"},{unselectable:"on",id:this.id+this.connectionType+"_basic_config"});this.wrapperEle.append(n);f=[{id:this.id+this.connectionType+"_query_type_simple",isChecked:!1,name:this.dashboardDesigner.locale.salesForceDataSource.queryModeSimpleText+"<sup>*<\/sup>",value:"simple"},{id:this.id+this.connectionType+"_query_type_advanced",isChecked:!0,name:this.dashboardDesigner.locale.salesForceDataSource.queryModeAdvancedText,value:"advanced"}];this.renderRadioButtonGroup(this.id+this.connectionType+"_query_type",f,this.dashboardDesigner.locale.salesForceDataSource.queryModeText,"querytype",n,$.proxy(this.onQueryModeChange,this));this.wrapperEle.find("#"+this.id+this.connectionType+"_query_type").hide();this.advancedOptRow=$("<tr id='"+this.id+this.connectionType+"_qm_adv_tr' />");t=$("<table />");this.advancedOptRow.append(t);n.append(this.advancedOptRow);this.datasource.renderTextArea(this.dashboardDesigner.locale.salesForceDataSource.soqlQueryText,this.id+this.connectionType+"_qm_adv_txt_area",t);e="<tr><td><lable style='padding-left:5px;padding-right:5px;' class='editLabel e-designer-tile-content'>"+this.dashboardDesigner.locale.salesForceDataSource.helpText+"<a href='http://www.salesforce.com/us/developer/docs/soql_sosl/' target='_blank'>"+this.dashboardDesigner.locale.salesForceDataSource.helpHyperlinkText+"<\/a><\/label><\/td><\/tr>";t.append(e);this.simpleOptRow=$("<tr id='"+this.id+this.connectionType+"_qm_simple_tr' />");i=$("<table  style='width:100%;'/>");this.simpleOptRow.append(i);n.append(this.simpleOptRow);this.datasource.renderAccordionItem(this.dashboardDesigner.locale.salesForceDataSource.objectText,this.id+this.connectionType+"_qm_simple_objs_ddl",i,$.proxy(this.loadObjects,this));this.datasource.renderAccordionItem(this.dashboardDesigner.locale.salesForceDataSource.fieldsText,this.id+this.connectionType+"_qm_simple_fields_ddl",i,$.proxy(this.loadFields,this));this.simpleOptRow.hide();var o=ej.buildTag("table.e-designer-refresh-column-table","",{},{id:this.id+this.connectionType+"_refresh_column_table"}),s=ej.buildTag("tr","",{},{id:this.id+"switcher_row"}),h=ej.buildTag("tr","",{},{id:this.id+"refresh_combobox_row"});o.append(s).append(h);this.wrapperEle.append(o);this.renderDropDownList(h);this.renderCodeSwitcher(s);this.incrementalRefreshComponents=$("#"+this.id+this.connectionType+"_refresh_column_table");this.datasource.renderDropDownItem(this.dashboardDesigner.locale.salesForceDataSource.refreshSettingsText,this.id+this.connectionType+"_qm_simple_refresh_settings",n,r,{id:"id",text:"text",value:"value"},"0",this.enableIncrementalRefreshSwitch,this);this.appendWaringText(n);this.ejObjects=this.wrapperEle.find("#"+this.id+this.connectionType+"_qm_simple_objs_ddl").data("ejAutocomplete");this.ejObjects.model.select=$.proxy(this.onObjectSelected,this);this.ejFields=this.wrapperEle.find("#"+this.id+this.connectionType+"_qm_simple_fields_ddl").data("ejAutocomplete");this.ejFields.model.select=$.proxy(this.onFieldSelect,this);this.ejIncrementalRefresh=this.wrapperEle.find("#"+this.id+this.connectionType+"_incremental_refresh").data("ejCheckBox");this.ejFields.option("multiSelectMode","visualmode");this.ejFields.model.showResetIcon=!0;this.ejFields.disable();this.ejRefreshSettingsObj=this.wrapperEle.find("#"+this.id+this.connectionType+"_qm_simple_refresh_settings").data("ejDropDownList");this.hideWarningText();this.incrementalRefreshComponents.css("display","none")},n.prototype.renderDropDownList=function(n){var t=ej.buildTag("td.e-designer-salesforce-title-label-tag","",{},{}),i=ej.buildTag("td.e-designer-salesforce-lastmodified-column-tag","",{},{}),r=ej.buildTag("div.e-designer-salesforce-design-switcher","",{},{id:this.id+"_lastmodified_column_container"}),u=ej.buildTag("label.editLabel e-designer-title-label",this.dashboardDesigner.locale.sqlExtactModeLocale.incrementalRefreshText,{},{});this.refreshColumnDropDownList=ej.buildTag("input.e-textbox","",{},{type:"text",id:this.id+"_lastmodified_column_datasource"});n.append(t).append(i);r.append(this.refreshColumnDropDownList);t.append(u);i.append(r);this.refreshColumnDropDownList.ejDropDownList({width:"250px",watermarkText:this.dashboardDesigner.locale.sqlExtactModeLocale.noDateColumns,cssClass:"e-designer-ejwidgets e-designer-content-label e-dbrd-control",showRoundedCorner:!0});this.refreshColumnDropDownList.data("ejDropDownList").disable()},n.prototype.enableIncrementalRefreshSwitch=function(n){ej.isNullOrUndefined(this.codeChkSwitcher)||ej.isNullOrUndefined(this.refreshColumnDropDownList.data("ejDropDownList"))||(n.selectedValue==="Never"?(this.codeChkSwitcher.prop("checked",!1),this.refreshColumnDropDownList.data("ejDropDownList").disable(),this.incrementalRefreshComponents.css("display","none")):this.incrementalRefreshComponents.css("display","block"))},n.prototype.renderCodeSwitcher=function(n){var t=ej.buildTag("td.e-designer-salesforce-incremental-switcher-td-tag","",{},{}),i=ej.buildTag("td.e-designer-salesforce-incremental-switcher-Lable-td-tag","",{},{}),r=ej.buildTag("div.e-designer-salesforce-toggle-container","",{},{id:this.id+"_salesforce_incremental_refresh_switcher"}),e=ej.buildTag("div.e-designer-salesforce-toggle-label","",{},{id:this.id+"_switcher_label"}),u=ej.buildTag("label.editLabel e-designer-title-label",this.dashboardDesigner.locale.sqlExtactModeLocale.incrementalRefresh,{},{}),f=ej.buildTag("label.e-reportdesigner-switch e-designer-code-switcher","",{},{id:this.id+"_code_switcher"});this.codeChkSwitcher=$("<input type='checkbox' id="+this.id+"_chck_on class='e-designer-schema-refresh-switch'>");f.append(this.codeChkSwitcher).append(ej.buildTag("div.e-reportdesigner-slider round e-designer-switcher-pointer","",{},{}));n.append(i).append(t);e.append(u);r.append(f);t.append(r);i.append(u);this.codeChkSwitcher.prop("checked",!1);this.dashboardDesigner.element.off("change",".e-designer-schema-refresh-switch",$.proxy(this.switcherChanged,this));this.dashboardDesigner.element.on("change",".e-designer-schema-refresh-switch",$.proxy(this.switcherChanged,this))},n.prototype.switcherChanged=function(){this.codeChkSwitcher.is(":checked")?this.enableLastModifiedColumnDropdown():this.refreshColumnDropDownList.data("ejDropDownList").disable()},n.prototype.resetConfiguration=function(){this.prevSelectedObj=this.selectedObject=null;this.ejObjects.option("dataSource",[]);this.ejFields.option("dataSource",[]);this.ejObjects.clearText();this.ejFields.clearText();this.ejRefreshSettingsObj.selectItemByIndex(0);this.advancedOptRow.find("#"+this.id+this.connectionType+"_qm_adv_txt_area").val("");ej.isNullOrUndefined(this.codeChkSwitcher)||this.codeChkSwitcher.prop("checked",!1);this.refreshColumnDropDownList.data("ejDropDownList").disable();this.incrementalRefreshComponents.css("display","none");this.ejFields.disable();this.advancedOptRow.show();this.simpleOptRow.hide();this.hideValidationMessages();this.hideWarningText()},n.prototype.onQueryModeChange=function(){this.simpleOptRow.hide();this.advancedOptRow.show();this.hideWarningText()},n.prototype.hideWarningText=function(){this.wrapperEle.find("#"+this.id+this.connectionType+"_sales_row_war_tr").hide()},n.prototype.appendWaringText=function(n){var i=$("<tr id="+this.id+this.connectionType+"_sales_row_war_tr/>"),r=$("<td unselectable='on'/>"),t,u,f;i.append(r);n.append(i);t=$("<table unselectable='on'><\/table>");r.append(t);u=$('<tr style="height:5px"><\/tr>');t.append(u);f=$('<span class="e-designer-content-label">'+this.dashboardDesigner.locale.salesForceDataSource.simplemodelimtText+"<\/span>");t.append(f)},n.prototype.onObjectSelected=function(n){ej.isNullOrUndefined(this.selectedObject)||this.selectedObject===""||(this.prevSelectedObj=this.selectedObject);this.datasource.showValidationMsg(this.id+this.connectionType+"_qm_simple_objs_ddl",!1);this.selectedObject=n.key;this.ejFields.clearText();this.ejFields.model.enabled||this.ejFields.enable()},n.prototype.onFieldSelect=function(){this.datasource.showValidationMsg(this.id+this.connectionType+"_qm_simple_fields_ddl",!1);this.datasource.updateEJComponentSize();this.datasource.scrollerRefresh($("#"+this.dashboardDesigner._id+"_dsConfigBodyContainer"))},n.prototype.loadFields=function(){!ej.isNullOrUndefined(this.selectedObject)&&this.selectedObject!==""&&this.prevSelectedObj!==this.selectedObject&&$("#"+this.id+this.connectionType+"_qm_simple_fields_ddl_dropdown>span").hasClass("e-search")&&this.fetchFields(this.selectedObject)},n.prototype.loadObjects=function(n){(ej.isNullOrUndefined(n.model.dataSource)||n.model.dataSource.length===0)&&$("#"+this.id+this.connectionType+"_qm_simple_objs_ddl_dropdown>span").hasClass("e-search")&&this.fetchObjects()},n.prototype.fetchFields=function(n){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/salesforce-fields-list",{data:JSON.stringify({objectId:n,serviceId:this.oAuthData.serviceId})},{fnction:$.proxy(this.onFieldFetchSuccess,this),indicator:[$.proxy(this.showLoadingIndicator,this,"_qm_simple_fields_ddl"),$.proxy(this.hideLoadingIndicator,this,"_qm_simple_fields_ddl")]},!0,!0)},n.prototype.fetchObjects=function(){ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/salesforce-objects-list",{data:JSON.stringify({serviceId:this.oAuthData.serviceId})},{fnction:$.proxy(this.onFetchObjectsSuccess,this),indicator:[$.proxy(this.showLoadingIndicator,this,"_qm_simple_objs_ddl"),$.proxy(this.hideLoadingIndicator,this,"_qm_simple_objs_ddl")]},!0,!0)},n.prototype.onFieldFetchSuccess=function(n){n.Status?(this.ejFields.model.fields={key:"FieldName",text:"Label"},this.ejFields.option("dataSource",n.Data),this.ejFields.open(),this.prevSelectedObj=this.selectedObject):ej.DashboardUtil.getInstance().alertDialog("Dashboard Designer",n.Message,IconType.errors,AlertType.Alert,!1,"")},n.prototype.onFetchObjectsSuccess=function(n){n.Status?(this.ejObjects.model.fields={key:"ObjectName",text:"Label"},this.ejObjects.option("dataSource",n.Data),this.ejObjects.open()):ej.DashboardUtil.getInstance().alertDialog("Dashboard Designer",n.Message,IconType.information,AlertType.Alert,!1,"")},n.prototype.renderRadioButtonGroup=function(n,t,i,r,u,f,e){var v=$("<tr/>"),l=$("<table id='"+n+"'/>"),s=$("<tr/>"),h=$("<td unselectable='on'/>"),p=ej.buildTag("label.editLabel e-designer-title-label",i,{},{}),o,c,a,y;for(h.append(p),s.append(h),l.append(s),s=$("<tr/>"),h=$("<td unselectable='on' />"),s.append(h),l.append(s),v.append(l),u.append(v),o=0;o<t.length;o++)c=ej.buildTag("div","",{float:"left","margin-left":o===0?"0px":"15px"},{}),a=ej.buildTag("input","",{},{type:"radio",name:r,id:t[o].id}),c.append(a),y=ej.buildTag("label.editLabel e-designer-content-label",t[o].name,{"margin-left":"6px"},{"for":t[o].id}),c.append(y),h.append(c),a.ejRadioButton({checked:t[o].isChecked,change:$.proxy(f,e),value:t[o].value})},n.prototype.showLoadingIndicator=function(n){$("#"+this.id+this.connectionType+n+"_dropdown>span").removeClass("e-search");$("#"+this.id+this.connectionType+n+"_dropdown>span").addClass("e-load").addClass("e-input");$("#"+this.id+this.connectionType+n+"_dropdown>span").css("background-position","center")},n.prototype.hideLoadingIndicator=function(n){$("#"+this.id+this.connectionType+n+"_dropdown>span").removeClass("e-input").removeClass("e-load");$("#"+this.id+this.connectionType+n+"_dropdown>span").addClass("e-search")},n.prototype.hideValidationMessages=function(){for(var t=["_qm_simple_objs_ddl","_qm_simple_fields_ddl","_qm_adv_txt_area"],n=void 0;n<t.length;n++)this.datasource.showValidationMsg(this.id+this.connectionType+t[n],!1)},n.prototype.getDatasourceInfo=function(n){this.hideValidationMessages();var t=!0,i=this.ejRefreshSettingsObj.getSelectedValue(),r=this.advancedOptRow.find("#"+this.id+this.connectionType+"_qm_adv_txt_area").val();return(r===""&&(this.datasource.showValidationMsg(this.id+this.connectionType+"_qm_adv_txt_area",!0,this.dashboardDesigner.locale.salesForceDataSource.soqlEmptyValidation),t=!1),t)?{Name:n,Provider:"Salesforce",RefreshInterval:i,OAuthConnection:this.oAuthData,SecurityType:"oauth",SalesForceConnection:{Fields:null,Object:null,QueryMode:"advanced",SoqlQuery:r,RefreshInterval:i,IncrementalRefresh:this.codeChkSwitcher.is(":checked")}}:null},n.prototype.UpdateDSInfo=function(n,t){n.ConnectionProperties.DataProvider=t.Provider;n.SalesForceConnection=t.SalesForceConnection;n.OAuthConnection=t.OAuthConnection;n.SecurityType=t.SecurityType;n.RefreshInterval=t.RefreshInterval},n.prototype.UpdateDataSourceInfo=function(n,t){this.UpdateDSInfo(n,t)},n.prototype.editConfiguration=function(n,t){var i=ej.isNullOrUndefined(t.OAuthConnection)?null:t.OAuthConnection;ej.isNullOrUndefined(i)||ej.isNullOrUndefined(i.Provider)||(i=this.oAuthConnectionType(i));this.renderConfiguration(n,"_editConnection",i);ej.isNullOrUndefined(t.SalesForceConnection)||(this.ejRefreshSettingsObj.selectItemByValue(t.SalesForceConnection.RefreshInterval),this.advancedOptRow.find("#"+this.id+this.connectionType+"_qm_adv_txt_area").val(t.SalesForceConnection.SoqlQuery),t.SalesForceConnection.IncrementalRefresh&&(ej.isNullOrUndefined(this.codeChkSwitcher)||this.codeChkSwitcher.prop("checked",!0),this.enableLastModifiedColumnDropdown()))},n.prototype.enableLastModifiedColumnDropdown=function(){this.refreshColumnDropDownList.data("ejDropDownList").enable();this.refreshColumnDropDownList.data("ejDropDownList").setModel({dataSource:["LastModifiedDate"]});this.refreshColumnDropDownList.data("ejDropDownList").selectItemsByIndices("0")},n.prototype.oAuthConnectionType=function(n){return{provider:n.Provider,service:n.Service,serviceId:n.ServiceId}},n}();window.ej.createObject("ej.DashboardDesignerUtility.SalesForceDataSource",InternalSalesForceDataSource,window);InternalLinkedAccounts=function(){function n(n,t,i){this.designerInstance=n;this.id=this.designerInstance._id+"_linked_accounts";this.fnConfigTableResetter=t;this.datasourceInst=i;this.renderLinkedAccountsDialog()}return n.prototype.renderLinkedAccountsDialog=function(){var i=this,o;this.wrapperDiv=ej.buildTag("div.e-reportdesigner-designer-configuration e-userselect","",{height:"auto"},{id:this.id+"_dialog"});var r=ej.buildTag("button.e-designer-cancelbtn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_close_btn"}),u=ej.buildTag("button.e-designer-default-btn e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_continue_btn"}),n=ej.buildTag("div","",{width:"100%",height:"90%"},{id:this.id+"_content"}),s=ej.buildTag("div.e-dbrd-designer-linked-accounts-container-wrapper","",{},{id:this.id+"_content_title"}),t=ej.buildTag("div.e-dbrd-designer-linked-accounts-container-wrapper",this.getAccountListTemplate(),{},{id:this.id+"_content_acc_list_wrapper"}),f=ej.buildTag("div.e-dbrd-designer-linked-accounts-container-wrapper","",{},{id:this.id+"_content_signin_container"}),h=ej.buildTag("div.e-dbrd-desginer-linked-accounts-error-msg","<p><\/p>",{},{id:this.id+"_content_error_msg"}),e=ej.buildTag("button.e-designer-default-btn e-dbrd-hand-cursor",this.designerInstance.locale.linkedAccountsWindow.signinButtonText,{},{id:this.id+"_signin_btn"}),c=ej.buildTag("a.e-dbrd-desginer-linked-accounts-link",this.designerInstance.locale.linkedAccountsWindow.manageAccountsText,{},{target:"_blank",href:this.designerInstance.model.serverUrl+"/profile/connected-accounts",id:this.id+"_manage_acc_link"});f.append(e);n.append(s,t,f,h);this.wrapperDiv.append(n);this.designerInstance.element.append(this.wrapperDiv);this.dialog=this.wrapperDiv.ejDialog({title:this.designerInstance.locale.linkedAccountsWindow.title,enableModal:!0,minWidth:600,width:600,maxWidth:600,maxHeight:250,enableResize:!1,showOnInit:!1,cssClass:"e-designer-dialog e-dashboarddesigner",minHeight:250,height:250,showFooter:!0,containment:"#"+this.designerInstance._id,close:$.proxy(ej.DashboardUtil.closeDialog,this),beforeClose:$.proxy(function(){i.loaderInstance.hide();i.dialogLoader.hide()},this)}).data("ejDialog");o=this.designerInstance.element.find("#"+this.id+"_dialog_foot");o.append(r,u,c);r.ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.linkedAccountsWindow.closeButtonText,click:$.proxy(this.closeButtonClick,this)});e.ejButton({showRoundedCorner:!1,width:"155px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.linkedAccountsWindow.signinButtonText,click:$.proxy(this.signInBtnClick,this)});this.continueBtnInstance=u.ejButton({showRoundedCorner:!1,width:"95px",enabled:!1,size:"small",height:"30px",type:"button",text:this.designerInstance.locale.linkedAccountsWindow.continueButtonText,click:$.proxy(this.onContinueButtonClick,this)}).data("ejButton");this.loaderInstance=n.ejWaitingPopup({showOnInit:!1,showImage:!0,cssClass:"e-designer-waitingpopup e-designer-loader"}).data("ejWaitingPopup");t.find("#"+this.id+"_authorize_btn").ejButton({showRoundedCorner:!1,width:"95px",size:"small",height:"30px",type:"button",text:this.designerInstance.locale.linkedAccountsWindow.authorizeText,click:$.proxy(this.authorizeBtnClick,this)});this.accListInst=t.find("#"+this.id+"_content_acc_list").ejDropDownList({cssClass:"e-dbrd-control",fields:{value:"Id",text:"Name"},selectedIndex:0,width:"250px",change:$.proxy(this.onAccountChange,this)}).data("ejDropDownList");this.dialogLoader=this.designerInstance.element.find("#"+this.id+"_dialog_wrapper").ejWaitingPopup({showOnInit:!1,showImage:!0,text:this.designerInstance.locale.linkedAccountsWindow.waitForAuthCompletionText,cssClass:"e-designer-waitingpopup e-designer-loader"}).data("ejWaitingPopup")},n.prototype.setDsName=function(n){this.wrapperDiv.find("#"+this.id+"_content_title").html(this.getDsTitleTemplate(n.cssClass,n.name))},n.prototype.getDsTitleTemplate=function(n,t){return"<span class='e-dbrd-designer-linked-accounts-container-icon "+n+"'><\/span><label class='e-dbrd-designer-linked-accounts-container-label'>"+this.designerInstance.locale.linkedAccountsWindow.connectToAccountText+" "+t+" "+this.designerInstance.locale.linkedAccountsWindow.accountText+"<\/label><\/div>"},n.prototype.getAccountListTemplate=function(){return"<div id='"+this.id+"_content_acc_list_div'><div class='e-dbrd-designer-linked-accounts-container-acc-list-wrapper'><input type='text' id='"+this.id+"_content_acc_list'/><\/div><button id='"+this.id+"_authorize_btn' class='e-designer-okbtn e-dbrd-hand-cursor e-dbrd-designer-linked-accounts-container-authorize-btn'><\/button><label class='e-dbrd-designer-linked-accounts-container-warn-label'>"+this.designerInstance.locale.linkedAccountsWindow.authorizeRequiredText+"<\/label><\/div><div id='"+this.id+"_new_acc_name_container' class='e-dbrd-designer-linked-accounts-new-acc'><label class='e-designer-label'>"+this.designerInstance.locale.linkedAccountsWindow.chooseAccNameText+"<\/label><input class='e-textbox e-designer-content-label' type='text' id='"+this.id+"_new_acc_name'/><label id='"+this.id+"_new_acc_name_validation_errormsg'class='e-dbrd-designer-linked-accounts-container-warn-label'>"+this.designerInstance.locale.linkedAccountsWindow.nameCannotBeEmpty+"<\/label><\/div>"},n.prototype.signInBtnClick=function(){this.authenticateOAuth()},n.prototype.authorizeBtnClick=function(){this.initializeOAuthData();ej.DashboardDesignerUtility.OAuthHelper.instance.initialize(this.oAuthData,{id:this.selectedAccount.Id})},n.prototype.initializeOAuthData=function(){this.oAuthData.handler=$.proxy(this.onOAuthLoginSuccess,this);this.showDialogLoader();this.oAuthData.windowCloseHandler=$.proxy(this.hideDialogLoader,this)},n.prototype.closeButtonClick=function(){this.closeDialog()},n.prototype.onAccountChange=function(n){this.selectedAccount=n.model.dataSource[n.itemId];ej.isNullOrUndefined(this.oAuthData)||this.validateAccount()},n.prototype.validateAccount=function(){this.selectedAccount.Services.indexOf(this.oAuthData.serviceId)!==-1?(this.hideAuthorizeAction(),this.enableContinueBtn()):(this.showAuthorizeAction(),this.disableContinueBtn())},n.prototype.isAccountPresent=function(n,t){if(!ej.isNullOrUndefined(t))for(var i=0;i<t.length;i++)if(t[i].Id===n)return i;return-1},n.prototype.hideErroMsg=function(){this.wrapperDiv.find("#"+this.id+"_content_error_msg").hide()},n.prototype.showErroMsg=function(n){this.wrapperDiv.find("#"+this.id+"_content_error_msg").css("display","table");this.wrapperDiv.find("#"+this.id+"_content_error_msg p").html(n)},n.prototype.hideSignInContainer=function(){this.wrapperDiv.find("#"+this.id+"_content_signin_container").hide()},n.prototype.showSignInContainer=function(){this.wrapperDiv.find("#"+this.id+"_content_signin_container").css("display","block")},n.prototype.hideAccNameInput=function(){this.wrapperDiv.find("#"+this.id+"_new_acc_name_container").hide();this.wrapperDiv.find("#"+this.id+"_new_acc_name").removeData("data-acc")},n.prototype.showAccNameErrorLabel=function(){this.wrapperDiv.find(".e-dbrd-designer-linked-accounts-new-acc .e-dbrd-designer-linked-accounts-container-warn-label").show()},n.prototype.hideAccNameErrorLabel=function(){this.wrapperDiv.find(".e-dbrd-designer-linked-accounts-new-acc .e-dbrd-designer-linked-accounts-container-warn-label").hide()},n.prototype.validateAccName=function(){var t=this.wrapperDiv.find("#"+this.id+"_new_acc_name_validation_errormsg"),n;return this.wrapperDiv.find("#"+this.id+"_new_acc_name").val().trim()===""?(t.html(this.designerInstance.locale.linkedAccountsWindow.nameCannotBeEmpty),this.showAccNameErrorLabel(),this.wrapperDiv.find("#"+this.id+"_new_acc_name").css({"border-color":"red"}),!1):(n=this.wrapperDiv.find("#"+this.id+"_new_acc_name").data("data-acc"),ej.isNullOrUndefined(n)||(n.Name=this.wrapperDiv.find("#"+this.id+"_new_acc_name").val(),this.wrapperDiv.find("#"+this.id+"_new_acc_name").data("data-acc",n)),!this.checkAccountNameValidation(n.Name))?(t.html(this.designerInstance.locale.linkedAccountsWindow.specialCharNotAllowed),this.showAccNameErrorLabel(),this.wrapperDiv.find("#"+this.id+"_new_acc_name").css({"border-color":"red"}),!1):(this.wrapperDiv.find("#"+this.id+"_new_acc_name").css({"border-color":""}),this.hideAccNameErrorLabel(),!0)},n.prototype.checkAccountNameValidation=function(n){var t=new RegExp(/[*\[\\\]\|\/\:\<\>\%\+\#\?\'\"\;\,]/);return!t.test(n)},n.prototype.setAccount=function(){var t=this.wrapperDiv.find("#"+this.id+"_new_acc_name").data("data-acc"),n;ej.isNullOrUndefined(t)||(n=this.accListInst.model.dataSource||[],this.isAccountPresent(t.id,n)===-1&&(n.push(t),this.accListInst.setModel({dataSource:[]}),this.accListInst.setModel({dataSource:n}),this.accListInst.option("selectedIndex",n.length-1)))},n.prototype.showAccNameInput=function(n){this.wrapperDiv.find("#"+this.id+"_new_acc_name_container").css("display","table-cell");this.wrapperDiv.find("#"+this.id+"_new_acc_name").val(n.Name).data("data-acc",n)},n.prototype.hideAccountsWrapper=function(){this.wrapperDiv.find("#"+this.id+"_content_acc_list_wrapper").hide()},n.prototype.showAccountsWrapper=function(){this.wrapperDiv.find("#"+this.id+"_content_acc_list_wrapper").css("display","table")},n.prototype.hideAccList=function(){this.wrapperDiv.find("#"+this.id+"_content_acc_list_div").css("display","none")},n.prototype.showAccList=function(){this.wrapperDiv.find("#"+this.id+"_content_acc_list_div").css("display","table-cell")},n.prototype.hideAuthorizeAction=function(){this.wrapperDiv.find("#"+this.id+"_authorize_btn").css("display","none");this.wrapperDiv.find(".e-dbrd-designer-linked-accounts-container-warn-label").css("display","none")},n.prototype.showAuthorizeAction=function(){this.wrapperDiv.find("#"+this.id+"_authorize_btn").css("display","block");this.wrapperDiv.find(".e-dbrd-designer-linked-accounts-container-warn-label").css("display","block")},n.prototype.disableContinueBtn=function(){this.continueBtnInstance.disable()},n.prototype.enableContinueBtn=function(){this.continueBtnInstance.enable()},n.prototype.switchContinueBtn=function(n){n==="next"?this.continueBtnInstance.element.addClass("e-btn-next").html(this.designerInstance.locale.linkedAccountsWindow.nextButtonText):this.continueBtnInstance.element.removeClass("e-btn-next").html(this.designerInstance.locale.linkedAccountsWindow.continueButtonText)},n.prototype.showDialogLoader=function(){this.dialogLoader.show()},n.prototype.hideDialogLoader=function(){this.dialogLoader.hide()},n.prototype.onContinueButtonClick=function(){var n,t,i;this.continueBtnInstance.element.hasClass("e-btn-next")?this.validateAccName()&&(n=this.wrapperDiv.find("#"+this.id+"_new_acc_name").data("data-acc"),ej.isNullOrUndefined(n)||(this.disableContinueBtn(),this.saveAccName(n.Id,n.Name))):(this.oAuthData.serviceId==="drive"||this.oAuthData.serviceId==="onedrive"||this.oAuthData.serviceId==="sharepoint"||this.oAuthData.serviceId==="box"?(t=ejDashboardDesigner.getInstance("FilePickerDialog"),i=this.getServiceId(),t.showDialog(this.connectionType,i,this.oAuthData.provider,this.oAuthData.serviceId,!1,null)):this.navigateToWebDsPanel({service:this.oAuthData.serviceId,serviceId:this.selectedAccount.Id,provider:this.selectedAccount.Provider}),this.dialog.close())},n.prototype.authenticateOAuth=function(){this.initializeOAuthData();ej.DashboardDesignerUtility.OAuthHelper.instance.initialize(this.oAuthData)},n.prototype.onOAuthLoginSuccess=function(n){var i,t,r;n.Status&&(i=this.accListInst.model.dataSource||[],t=this.isAccountPresent(n.serviceId,i),this.showAccountsWrapper(),t!==-1?(this.showAccList(),i[t].Services.push(n.service),this.selectedAccount=i[t],this.validateAccount(),this.accListInst.option("selectedIndex",t),this.enableContinueBtn()):(r={Id:n.serviceId,Name:n.name,Services:[n.service],Provider:n.provider,CreatedOn:n.UpdatedOn,AuthorizedOn:n.UpdatedOn},this.showAccNameInput(r),this.hideAccList(),this.hideAuthorizeAction(),this.hideSignInContainer(),this.switchContinueBtn("next"),this.enableContinueBtn()))},n.prototype.navigateToWebDsPanel=function(n){var t,i,r;ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.ConfigPanel);ej.DashboardUtil.invokeCallBack(this.fnConfigTableResetter,"");this.oAuthData.serviceId.toLowerCase()==="salesforce"?(this.configTable.data("selected","e-oauth-salesforce"),t=ejDashboardDesigner.getInstance("SalesForceDataSource"),t.renderConfiguration(this.configTable,"_newConnection",n)):this.oAuthData.serviceId.toLowerCase()==="salesforcereports"?(this.configTable.data("selected","e-oauth-salesforce-reports"),i=ejDashboardDesigner.getInstance("SalesforceReportsDataSource"),i.renderConfiguration(this.configTable,"_newConnection",n)):(this.configTable.data("selected","e-oauth"),r=ejDashboardDesigner.getInstance("WebDatasource"),r.renderConfiguration(this.configTable,"_newConnection",n,this.connectionType));this.datasourceInst.connectButton.element.html()==="Connect"&&(this.datasourceInst.connectButton.setModel({width:"150px"}),this.datasourceInst.connectButton.element.html(this.designerInstance.locale.dataSource.previewAndConnect));this.datasourceInst.updateEJComponentSize();this.datasourceInst.scrollerRefresh($("#"+this.id+"_dsConfigBodyContainer"))},n.prototype.getOAuthData=function(n){var t=null;switch(n){case"e-oauth-gmail":t={provider:OAuthProvider.Google,serviceId:"gmail"};break;case"e-oauth-google-analytics":t={provider:OAuthProvider.Google,serviceId:"analytics"};break;case"e-oauth-google-plus":t={provider:OAuthProvider.Google,serviceId:"googleplus"};break;case"e-oauth-youtube":t={provider:OAuthProvider.Google,serviceId:"youtube"};break;case"e-oauth-google-drive":t={provider:OAuthProvider.Google,serviceId:"drive"};break;case"e-oauth-microsoft-onedrive":t={provider:OAuthProvider.Microsoft,serviceId:"onedrive"};break;case"e-oauth-intercom":t={provider:OAuthProvider.Intercom,serviceId:"intercom"};break;case"e-oauth-box":t={provider:OAuthProvider.Box,serviceId:"box"};break;case"e-oauth-bitly":t={provider:OAuthProvider.Bitly,serviceId:"bitly"};break;case"e-oauth-salesforce":t={provider:OAuthProvider.Salesforce,serviceId:"salesforce"};break;case"e-oauth-salesforce-reports":t={provider:OAuthProvider.Salesforce,serviceId:"salesforceReports"};break;case"e-oauth-facebook":t={provider:OAuthProvider.Facebook,serviceId:"facebook"};break;case"e-oauth-facebook-ads":t={provider:OAuthProvider.Facebook,serviceId:"facebookads"};break;case"e-oauth-twitter":t={provider:OAuthProvider.Twitter,serviceId:"twitter"};break;case"e-oauth-instagram":t={provider:OAuthProvider.Facebook,serviceId:"instagram"};break;case"e-oauth-asana":t={provider:OAuthProvider.Asana,serviceId:"asana"};break;case"e-oauth-slack":t={provider:OAuthProvider.Slack,serviceId:"slack"};break;case"e-oauth-buffer":t={provider:OAuthProvider.Buffer,serviceId:"buffer"};break;case"e-oauth-todoist":t={provider:OAuthProvider.Todoist,serviceId:"todoist"};break;case"e-oauth-smartsheet":t={provider:OAuthProvider.Smartsheet,serviceId:"smartsheet"};break;case"e-oauth-linkedin":t={provider:OAuthProvider.LinkedIn,serviceId:"linkedin"};break;case"e-oauth-zohocrm":t={provider:OAuthProvider.ZohoCRM,serviceId:"zohocrm"};break;case"e-oauth-quickbooks-online":t={provider:OAuthProvider.QuickBooks,serviceId:"quickbooksonline"};break;case"e-oauth-quickbooks-payments":t={provider:OAuthProvider.QuickBooks,serviceId:"quickbookspayments"};break;case"e-oauth-survey-monkey":t={provider:OAuthProvider.SurveyMonkey,serviceId:"surveymonkey"};break;case"e-oauth-freshbooks":t={provider:OAuthProvider.FreshBooks,serviceId:"freshbooks"};break;case"e-oauth-microsoft-sharepoint":t={provider:OAuthProvider.Microsoft,serviceId:"sharepoint"};break;case"e-oauth-microsoft-outlookcalendar":t={provider:OAuthProvider.Microsoft,serviceId:"outlookcalendar"};break;case"e-oauth-google-search-console":t={provider:OAuthProvider.Google,serviceId:"searchconsole"};break;case"e-oauth-google-adsense":t={provider:OAuthProvider.Google,serviceId:"adsense"};break;case"e-oauth-basecamp2":t={provider:OAuthProvider.Basecamp2,serviceId:"basecamp2"};break;case"e-oauth-infusionsoft":t={provider:OAuthProvider.Infusionsoft,serviceId:"infusionsoft"};break;case"e-oauth-pinterest":t={provider:OAuthProvider.Pinterest,serviceId:"pinterest"}}return t},n.prototype.fetchAccountInfo=function(){this.requestObj=ej.DashboardUtil.getInstance().doAjaxPost("GET",this.designerInstance.model.serviceUrl+"/linked-accounts/"+ej.DashboardDesignerUtility.Serialization.enumToString(OAuthProvider,this.oAuthData.provider),{},{fnction:$.proxy(this.onAccountFetchSuccess,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)],errfnction:$.proxy(this.onAccountFetchError,this)},!0,!0)},n.prototype.saveAccName=function(n,t){var i=this;this.requestObj=ej.DashboardUtil.getInstance().doAjaxPost("PATCH",this.designerInstance.model.serviceUrl+"/linked-accounts/"+n+"/"+t+"/",{},{fnction:$.proxy(this.onAccNameSaveSuccess,this),indicator:[$.proxy(this.showLoadingIndicator,this),$.proxy(this.hideLoadingIndicator,this)],errfnction:$.proxy(function(){i.enableContinueBtn()},this)},!0,!0)},n.prototype.onAccNameSaveSuccess=function(n){n.Status?(this.switchContinueBtn("continue"),this.showSignInContainer(),this.showAccList(),this.setAccount(),this.hideAccNameInput(),this.enableContinueBtn()):(this.enableContinueBtn(),ej.DashboardUtil.getInstance().alertDialog(this.designerInstance.locale.linkedAccountsWindow.title,n.Message,IconType.errors,AlertType.Alert,!1,""))},n.prototype.onAccountFetchSuccess=function(n){n.Status?(this.showAccountsWrapper(),ej.isNullOrUndefined(n.Data)||n.Data.length===0?this.hideAccountsWrapper():(this.accListInst.setModel({dataSource:n.Data}),this.showAccList(),this.accListInst.setModel({selectedIndex:0})),this.showSignInContainer()):this.showErroMsg(n.Message)},n.prototype.onAccountFetchError=function(n){n.status===401?this.showErroMsg(this.designerInstance.locale.errorMessage.authenticationFailed+this.designerInstance.locale.errorMessage.invalidSession):ej.isNullOrUndefined(n.responseText)||n.responseText===""?this.showErroMsg(this.designerInstance.locale.errorMessage.errorOnLoadingAccountInfo):this.showErroMsg(n.responseText)},n.prototype.showLoadingIndicator=function(){this.loaderInstance.show()},n.prototype.hideLoadingIndicator=function(){this.loaderInstance.hide()},n.prototype.resetDialog=function(){this.hideAccList();this.hideAuthorizeAction();this.hideAccountsWrapper();this.hideAccNameInput();this.hideSignInContainer();this.hideErroMsg();this.disableContinueBtn();this.accListInst.setModel({dataSource:[]});this.selectedAccount=null;this.oAuthData=null;this.configTable=null},n.prototype.closeDialog=function(){this.oAuthData=null;this.loaderInstance.hide();this.dialog.close()},n.prototype.showDialog=function(n,t,i){this.connectionType=n;this.resetDialog();this.dialog.open();this.setDsName(n);this.configTable=t;this.fncPanelSwitcher=i;this.oAuthData=this.getOAuthData(n.itemType);this.fetchAccountInfo()},n.prototype.destroy=function(){ej.destroyWidgets(this.designerInstance.element.find("#"+this.id+"_dialog"));this.designerInstance.element.find("#"+this.id+"_dialog").remove()},n.prototype.getServiceId=function(){return this.designerInstance.element.find("#"+this.id+"_content_acc_list").val()},n}();window.ej.createObject("ej.DashboardDesignerUtility.LinkedAccounts",InternalLinkedAccounts,window);InternalWebDsTemplate=function(){function n(n,t){this.designerInstance=n;this.id=this.designerInstance._id+"_ds_web_template";this.fnConfigTableResetter=t}return n.prototype.renderTemplateContainer=function(){var n;if(this.wrapperDiv=this.targetTag.find("#"+this.id+"_wrapper"),this.wrapperDiv.length===0){this.wrapperDiv=ej.buildTag("div.e-dbrd-designer-webds-template-wrapper","",{},{id:this.id+"_wrapper"});n=ej.buildTag("div","<span class='e-designer-header-icon e-reportdesigner-backarrow e-dbrd-designer-configuration-backarrow '><\/span><span class='e-designer-header e-designer-cursor' style='display:inline-block;vertical-align:text-top;'>"+this.designerInstance.locale.dataSource.headerNewConnectionText+"<\/span>",{},{id:this.id+"_header"});this.contentBody=ej.buildTag("div.e-dbrd-designer-webds-template-content","",{},{id:this.id+"_body"});var t=ej.buildTag("div","<div><\/div>",{},{id:this.id+"_ds_content_header"}),r=ej.buildTag("div.e-dbrd-designer-webds-template-header-description",this.designerInstance.locale.dataSource.webDsTemplatesDescriptionText),i=ej.buildTag("div.e-dbrd-designer-webds-template-content-container e-dbrd-designer-scroller e-dbrd-control","<div><\/div>",{},{id:this.id+"_ds_body_content"});t.append(r);this.contentBody.append(t,i);this.wrapperDiv.append(n,this.contentBody,this.renderTooltipContainer());this.targetTag.append(this.wrapperDiv);this.scrollerObj=i.ejScroller({autoHide:!0,scrollerSize:9,buttonSize:14,height:this.getTemplateContainerHeight()}).data("ejScroller");this.wireEvents()}},n.prototype.updateDataSourceHeader=function(n){this.contentBody.find("#"+this.id+"_ds_content_header>div:first").html(this.getDataSourceHeaderTemplate(n))},n.prototype.getDataSourceHeaderTemplate=function(n){return"<span class='e-dbrd-designer-webds-template-header-icon "+n.cssClass+"'><\/span><label class='e-dbrd-designer-webds-template-header-label'>"+n.name+"<\/label><a class='e-dbrd-designer-webds-template-header-link' href='"+n.docUrl+"' target='_blank'>"+n.name+this.designerInstance.locale.dataSource.webDataSource.apiDocumentationText+"<\/a>"},n.prototype.cancelButtonClick=function(){ej.isNullOrUndefined(this.fncPanelSwitcher)||ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.DataType)},n.prototype.renderTooltipContainer=function(){return"<div id='"+this.id+"_template_tooltip' class='e-dbrd-designer-webds-tooltip'><\/div>"},n.prototype.wireEvents=function(){this.contentBody.on("click",".e-dbrd-designer-webds-template-content-container .e-dbrd-designer-webds-tpl-container",$.proxy(this.onTemplateClick,this));this.contentBody.on("mouseover",".e-dbrd-designer-webds-template-content-container .e-dbrd-designer-webds-tpl-container",$.proxy(this.onTemplateHover,this));this.contentBody.on("mouseleave",".e-dbrd-designer-webds-template-content-container .e-dbrd-designer-webds-tpl-container",$.proxy(this.onTemplateMouseLeave,this));this.wrapperDiv.on("click",".e-dbrd-designer-configuration-backarrow",$.proxy(this.cancelButtonClick,this))},n.prototype.unWireEvents=function(){this.contentBody.off("click",".e-dbrd-designer-webds-template-content-container .e-dbrd-designer-webds-tpl-container",$.proxy(this.onTemplateClick,this));this.contentBody.off("mouseover",".e-dbrd-designer-webds-template-content-container .e-dbrd-designer-webds-tpl-container",$.proxy(this.onTemplateHover,this));this.contentBody.off("mouseleave",".e-dbrd-designer-webds-template-content-container .e-dbrd-designer-webds-tpl-container",$.proxy(this.onTemplateMouseLeave,this));this.wrapperDiv.off("click",".e-dbrd-designer-configuration-backarrow",$.proxy(this.cancelButtonClick,this))},n.prototype.onTemplateClick=function(){},n.prototype.setWebTemplateConfiguration=function(n){this.webDsInstance=ejDashboardDesigner.getInstance("WebDatasource");ej.DashboardUtil.invokeCallBack(this.fnConfigTableResetter,"e-web");ej.DashboardUtil.invokeCallBack(this.fncPanelSwitcher,PanelList.ConfigPanel);var t="_newConnection";ej.isNullOrUndefined(n)?this.webDsInstance.renderConfiguration(this.configTable,t):this.webDsInstance.renderConfiguration(this.configTable,t,null,n)},n.prototype.onTemplateHover=function(n){var t=$(n.currentTarget),i=t.data("template-data"),r,u,f;if(!ej.isNullOrUndefined(i)){if(r=ej.DashboardUtil.textWidth(i.description,"12px Roboto"),r<t.width())return;u=t.offset();f=t.parent().offset();this.wrapperDiv.find("#"+this.id+"_template_tooltip").html(i.description).show().css({top:u.top,left:f.left-this.wrapperDiv.find("#"+this.id+"_template_tooltip").width()-20})}},n.prototype.getTemplateContainerHeight=function(){return this.contentBody.outerHeight()-this.contentBody.find(".e-dbrd-designer-webds-template-header-description").outerHeight()-this.contentBody.find("#"+this.id+"_ds_content_header").outerHeight()},n.prototype.onTemplateMouseLeave=function(){this.wrapperDiv.find("#"+this.id+"_template_tooltip").hide()},n.prototype.render=function(n){this.targetTag=n;this.renderTemplateContainer()},n.prototype.showTemplates=function(n,t,i){this.configTable=i;this.fncPanelSwitcher=n;this.updateDataSourceHeader(t);this.setWebTemplateConfiguration(t)},n.prototype.destroy=function(){this.unWireEvents();ej.destroyWidgets(this.wrapperDiv);this.wrapperDiv.remove()},n.prototype.isVisible=function(){return this.wrapperDiv.is(":visible")},n.prototype.hide=function(){this.isVisible()&&this.wrapperDiv.hide()},n.prototype.resize=function(){this.isVisible()&&this.scrollerObj.setModel({height:this.getTemplateContainerHeight()})},n}();window.ej.createObject("ej.DashboardDesignerUtility.WebDsTemplate",InternalWebDsTemplate,window);InternalDataSourceTypes=function(){function n(){}return n.getDataSourceTypes=function(n,t){return[{id:n+"_mySql",cssClass:"e-reportdesigner-datasource-mysql",itemType:"e-mysql",connector:"MySql",name:t.dataSource.dataSourceType.mySql,tags:["sql","mysql","db","database","relational"],category:DataSourceCategory.sql,isVisible:!1},{id:n+"_mariadb",cssClass:"e-dashboarddesigner-datasource-mariadb",itemType:"e-mariadb",connector:"MariaDB",name:"MariaDB",tags:["sql","mysql","db","database","relational","mariadb"],category:DataSourceCategory.sql,isVisible:!1},{id:n+"_memsql",cssClass:"e-dashboarddesigner-datasource-memsql",itemType:"e-memsql",connector:"MemSQL",name:"MemSQL",tags:["sql","mysql","db","database","relational","memsql"],category:DataSourceCategory.sql,isVisible:!1},{id:n+"_amazon_aurora",cssClass:"e-reportdesigner-datasource-amazon-aurora",itemType:"e-amazon-aurora",connector:"AmazonAurora",name:t.dataSource.dataSourceType.amazonAurora,tags:["sql","amazon","aurora","db","database","relational"],category:DataSourceCategory.sql,isVisible:!1},{id:n+"_google_cloud",cssClass:"e-reportdesigner-datasource-google-cloud",itemType:"e-google-cloud",connector:"GoogleCloud",name:t.dataSource.dataSourceType.googleCloud,tags:["sql","google","cloud","db","database","relational"],category:DataSourceCategory.sql,isVisible:!1},{id:n+"_sql",cssClass:"e-reportdesigner-datasource-sql",itemType:"e-sql",connector:"MSSql",name:t.dataSource.dataSourceType.msSql,tags:["sql","mssql","db","database","relational"],category:DataSourceCategory.sql,isVisible:!0},{id:n+"_azureSqlDW",cssClass:"e-reportdesigner-datasource-azuresqldw",itemType:"e-azuresqldw",connector:"AzureSqlDataWarehouse",name:t.dataSource.dataSourceType.azureSqlDataWarehouse,tags:["sql","azuresqldatawarehouse","db","database","relational","warehouse"],category:DataSourceCategory.sql,isVisible:!1},{id:n+"_mongodb",cssClass:"e-reportdesigner-datasource-mongodb",itemType:"e-mongodb",connector:"MongoDB",name:t.dataSource.dataSourceType.mongodb,tags:["mongo","nosql ","document-oriented"],category:DataSourceCategory.nosql,isVisible:!1},{id:n+"_smartsheet",cssClass:"e-dashboarddesigner-datasource-oath-smartsheet",itemType:"e-oauth-smartsheet",connector:"Smartsheet",name:t.dataSource.dataSourceType.smartSheet.name,category:DataSourceCategory.projectManagement,hasMaxRow:!0,defaultRowLimit:100,maxRowLimit:1e4,docUrl:"https://smartsheet-platform.github.io/api-docs/",tags:["smartsheet","projectmanagement","rest","spreadsheet"],templates:[{name:"",description:"",url:"https://api.smartsheet.com/2.0/<:your_end_point>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.oauth,isDefault:!0}],isVisible:!1},{id:n+"_google_adsense",cssClass:"e-dashboarddesigner-datasource-oauth-google-adsense",itemType:"e-oauth-google-adsense",connector:"GoogleAdsense",name:t.dataSource.oauthConnectors.googleAdsense,tags:["adsense","ads","google"],category:DataSourceCategory.marketing,docUrl:"https://developers.google.com/adsense/management/v1.4/reference/",templates:[{name:"",description:"",url:"https://www.googleapis.com/adsense/v1.4/accounts",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.oauth,isDefault:!0}],isVisible:!1},{id:n+"_web_servicenow",cssClass:"e-dashboarddesigner-datasource-servicenow",itemType:"e-web-servicenow",connector:"ServiceNow",name:t.dataSource.dataSourceType.servicenow.name,category:DataSourceCategory.salesCrm,docUrl:"https://developer.servicenow.com/app.do#!/rest_api_doc",hasMaxRow:!0,defaultRowLimit:100,maxRowLimit:1e4,tags:["Servicenow","CRM","incident"],templates:[{name:"",description:"",url:"https://<:your_instance>.service-now.com/api/<:your_end_point>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0}],isVisible:!0},{id:n+"_web_wistia",cssClass:"e-dashboarddesigner-datasource-wistia",itemType:"e-web-wistia",connector:"Wistia",name:t.dataSource.dataSourceType.wistia.name,category:DataSourceCategory.marketing,tags:["marketing","video","hosting","download","recording","video player","upload"],hasMaxRow:!0,defaultRowLimit:100,maxRowLimit:1e4,docUrl:"https://wistia.com/support/developers/data-api",templates:[{name:"",description:"",url:"https://api.wistia.com/v1/<:your_end_point>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0}],isVisible:!0},{id:n+"_web_42matters",cssClass:"e-dashboarddesigner-datasource-42matters",itemType:"e-web-42matters",connector:"42matters",name:t.dataSource.dataSourceType.fortytwomatters.name,category:DataSourceCategory.mobileAnalytics,tags:["42matters","42 matters","android","ios","tencent","mobile","mobile analytics","mobile intelligence","mobile marketing"],hasMaxRow:!0,defaultRowLimit:50,maxRowLimit:1e4,docUrl:"https://42matters.com/docs/overview",templates:[{name:"",description:"",url:"https://data.42matters.com/api/v2.0/android/apps/reviews.json?p=<:package_name>&access_token=<:access_token>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0}],isVisible:!0},{id:n+"_redshift",cssClass:"e-dashboarddesigner-datasource-redshift",itemType:"e-redshift",connector:"AmazonRedshift",name:"Amazon Redshift",tags:["sql","db","database","relational","warehouse"],category:DataSourceCategory.sql,isVisible:!0},{id:n+"_psql",cssClass:"e-reportdesigner-datasource-psql",itemType:"e-psql",connector:"PostgresSql",name:t.dataSource.dataSourceType.postgres,tags:["sql","db","database","relational"],category:DataSourceCategory.sql,isVisible:!0},{id:n+"_file_excel",cssClass:"e-reportdesigner-datasource-file-excel",itemType:"e-file",connector:"Excel",name:t.dataSource.dataSourceType.excel,tags:["excel","xlsx","xls"],category:DataSourceCategory.files,isVisible:!0},{id:n+"_file_csv",cssClass:"e-reportdesigner-datasource-file-csv",itemType:"e-file",connector:"Csv",name:t.dataSource.dataSourceType.csv,tags:["csv","text","txt"],category:DataSourceCategory.files,isVisible:!0},{id:n+"_file_json",cssClass:"e-reportdesigner-datasource-file-json",itemType:"e-file",connector:"Json",name:t.dataSource.dataSourceType.json,category:DataSourceCategory.files,isVisible:!0},{id:n+"_oracle",cssClass:"e-reportdesigner-datasource-oracle",itemType:"e-oracle",connector:"Oracle",name:t.dataSource.dataSourceType.oracle,tags:["sql","db","database","relational"],category:DataSourceCategory.sql,isVisible:!1},{id:n+"_webDs",cssClass:"e-reportdesigner-datasource-web",itemType:"e-web",connector:"Web",name:t.dataSource.dataSourceType.webDataSource,tags:["rest","api","web","url"],category:DataSourceCategory.rest,isVisible:!0},{id:n+"_google",cssClass:"e-dashboarddesigner-datasource-oath-gmail",itemType:"e-oauth-gmail",connector:"Gmail",name:t.dataSource.oauthConnectors.gmail,tags:["mail","email","google"],category:DataSourceCategory.email,docUrl:"https://developers.google.com/gmail/api/v1/reference/",isVisible:!1},{id:n+"_google_analytics",cssClass:"e-dashboarddesigner-datasource-oath-google-analytics",itemType:"e-oauth-google-analytics",connector:"GoogleAnalytics",name:t.dataSource.oauthConnectors.googleAnalytics,tags:["analytics","google"],category:DataSourceCategory.marketing,docUrl:"https://ga-dev-tools.appspot.com/query-explorer/",isVisible:!1},{id:n+"_google_search_console",cssClass:"e-dashboarddesigner-datasource-oath-google-search-console",itemType:"e-oauth-google-search-console",connector:"GoogleSearchConsole",name:t.dataSource.oauthConnectors.googleSearchConsole,tags:["search","google","console","webmaster"],category:DataSourceCategory.marketing,docUrl:"https://developers.google.com/webmaster-tools/search-console-api-original/v3/parameters",hasMaxRow:!0,defaultRowLimit:1e3,maxRowLimit:1e5,isVisible:!1},{id:n+"_youtube",cssClass:"e-dashboarddesigner-datasource-oath-youtube",itemType:"e-oauth-youtube",connector:"Youtube",name:t.dataSource.oauthConnectors.youtube,tags:["video","social"],category:DataSourceCategory.socialMedia,docUrl:"https://developers.google.com/youtube/v3/docs/",isVisible:!1},{id:n+"_google_plus",cssClass:"e-dashboarddesigner-datasource-oath-google-plus",itemType:"e-oauth-google-plus",connector:"GooglePlus",name:t.dataSource.oauthConnectors.googleplus,tags:["plus","google"],category:DataSourceCategory.socialMedia,docUrl:"https://developers.google.com/+/web/api/rest/",isVisible:!1},{id:n+"_google_drive",cssClass:"e-dashboarddesigner-datasource-oath-google-drive",itemType:"e-oauth-google-drive",connector:"GoogleDrive",name:t.dataSource.oauthConnectors.googleDrive,tags:["drive","google","storage"],category:DataSourceCategory.cloudStorage,docUrl:"https://developers.google.com/drive/v3/reference/",isVisible:!1},{id:n+"_bitly",cssClass:"e-dashboarddesigner-datasource-oauth-bitly",itemType:"e-oauth-bitly",connector:"Bitly",name:t.dataSource.oauthConnectors.bitly,tags:["bitly","shorturl"],docUrl:"https://dev.bitly.com/v4_documentation.html",category:DataSourceCategory.marketing,hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",url:"https://api-ssl.bitly.com/v4/groups/<:group_guid>/bitlinks",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.oauth,isDefault:!0}],isVisible:!1},{id:n+"_salesforce",cssClass:"e-dashboarddesigner-datasource-oauth-salesforce",itemType:"e-oauth-salesforce",connector:"Salesforce",name:t.dataSource.oauthConnectors.salesforce,tags:["accounts","leads","opportunity","crm"],category:DataSourceCategory.salesCrm,isVisible:!1},{id:n+"_salesforce_reports",cssClass:"e-dashboarddesigner-datasource-oauth-salesforce-reports",itemType:"e-oauth-salesforce-reports",connector:"SalesforceReports",name:t.dataSource.oauthConnectors.salesforceReports,tags:["accounts","leads","opportunity","crm","reports"],category:DataSourceCategory.salesCrm,isVisible:!1},{id:n+"_microsoft_onedrive",cssClass:"e-dashboarddesigner-datasource-oauth-microsoft-onedrive",itemType:"e-oauth-microsoft-onedrive",connector:"MicrosoftOneDrive",name:t.dataSource.oauthConnectors.microsoftOneDrive,tags:["drive","microsoft","storage","cloud"],category:DataSourceCategory.cloudStorage,isVisible:!1},{id:n+"_microsoft_sharepoint",cssClass:"e-dashboarddesigner-datasource-oauth-microsoft-sharepoint",itemType:"e-oauth-microsoft-sharepoint",connector:"MicrosoftSharePoint",name:t.dataSource.oauthConnectors.microsoftSharePoint,tags:["share","microsoft","storage","cloud"],category:DataSourceCategory.cloudStorage,isVisible:!1},{id:n+"_buffer",cssClass:"e-dashboarddesigner-datasource-oauth-buffer",itemType:"e-oauth-buffer",connector:"Buffer",name:t.dataSource.oauthConnectors.buffer,tags:["buffer","social"],category:DataSourceCategory.socialMedia,docUrl:"https://buffer.com/developers/api",templates:[{name:"",description:"",authenticationType:WebAuthenticationType.oauth,method:HTTPMethod.get,url:"https://api.bufferapp.com/1/profiles.json",dataFormat:WebDataFormat.json,isDefault:!0}],isVisible:!1},{id:n+"_todoist",cssClass:"e-dashboarddesigner-datasource-oath-todoist",itemType:"e-oauth-todoist",connector:"Todoist",name:t.dataSource.oauthConnectors.todoist,tags:["todoist","project","management"],category:DataSourceCategory.projectManagement,docUrl:"https://developer.todoist.com/sync/v7",templates:[{name:"",description:"",authenticationType:WebAuthenticationType.oauth,method:HTTPMethod.post,url:"https://todoist.com/api/v7/sync",dataFormat:WebDataFormat.json,isDefault:!0,parameters:[{key:"resource_types",value:'[\\"items\\"]'}]}],isVisible:!1},{id:n+"_web_jira",cssClass:"e-dashboarddesigner-datasource-jira",itemType:"e-web-jira",name:t.dataSource.dataSourceType.jira.name,connector:"Jira",category:DataSourceCategory.projectManagement,docUrl:"https://developer.atlassian.com/docs/",hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",authenticationType:WebAuthenticationType.basichttpauthentication,method:HTTPMethod.get,url:"https://<:your_domain>.atlassian.net/rest/api/2/project",dataFormat:WebDataFormat.json,isDefault:!0},{name:t.dataSource.dataSourceType.jira.templates.projects.name,description:t.dataSource.dataSourceType.jira.templates.projects.desc,authenticationType:WebAuthenticationType.basichttpauthentication,url:"https://<:your_domain>.atlassian.net/rest/api/2/project",method:HTTPMethod.get,dataFormat:WebDataFormat.json},{name:t.dataSource.dataSourceType.jira.templates.boards.name,description:t.dataSource.dataSourceType.jira.templates.boards.desc,authenticationType:WebAuthenticationType.basichttpauthentication,url:"https://<:your_domain>.atlassian.net/rest/agile/1.0/board?maxResults=100&orderBy=name",method:HTTPMethod.get,dataFormat:WebDataFormat.json},{name:t.dataSource.dataSourceType.jira.templates.servicedesk.name,description:t.dataSource.dataSourceType.jira.templates.servicedesk.desc,authenticationType:WebAuthenticationType.basichttpauthentication,url:"https://<:your_domain>.atlassian.net/rest/servicedeskapi/servicedesk",method:HTTPMethod.get,dataFormat:WebDataFormat.json},{name:t.dataSource.dataSourceType.jira.templates.cusIssuesinQ.name,description:t.dataSource.dataSourceType.jira.templates.cusIssuesinQ.desc,authenticationType:WebAuthenticationType.basichttpauthentication,url:"https://<:your_domain>.atlassian.net/rest/servicedeskapi/servicedesk/<:serviceDeskId>/queue?includeCount=true",method:HTTPMethod.get,dataFormat:WebDataFormat.json},{name:t.dataSource.dataSourceType.jira.templates.pendingCR.name,description:t.dataSource.dataSourceType.jira.templates.pendingCR.desc,authenticationType:WebAuthenticationType.basichttpauthentication,url:"https://<:your_domain>.atlassian.net/rest/servicedeskapi/request?approvalStatus=MY_PENDING_APPROVAL",method:HTTPMethod.get,dataFormat:WebDataFormat.json},{name:t.dataSource.dataSourceType.jira.templates.completedCR.name,description:t.dataSource.dataSourceType.jira.templates.completedCR.desc,authenticationType:WebAuthenticationType.basichttpauthentication,url:"https://<:your_domain>.atlassian.net/rest/servicedeskapi/request?requestStatus=CLOSED_REQUESTS",method:HTTPMethod.get,dataFormat:WebDataFormat.json}],isVisible:!1},{id:n+"_web_twilio",cssClass:"e-dashboarddesigner-datasource-twilio",itemType:"e-web-twilio",connector:"Twilio",name:t.dataSource.dataSourceType.twilio.name,category:DataSourceCategory.support,docUrl:"https://www.twilio.com/docs/api",templates:[{name:"",description:"",url:"https://api.twilio.com/2010-04-01/Accounts/<:your_account_sid>/Calls",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0},{name:t.dataSource.dataSourceType.twilio.templates.calls.name,description:t.dataSource.dataSourceType.twilio.templates.calls.desc,url:"https://api.twilio.com/2010-04-01/Accounts/<:your_account_sid>/Calls",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:t.dataSource.dataSourceType.twilio.templates.usageRecordCM.name,description:t.dataSource.dataSourceType.twilio.templates.usageRecordCM.desc,url:"https://api.twilio.com/2010-04-01/Accounts/<:your_account_sid>/Usage/Records/ThisMonth.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:t.dataSource.dataSourceType.twilio.templates.usageRecordLM.name,description:t.dataSource.dataSourceType.twilio.templates.usageRecordLM.desc,url:"https://api.twilio.com/2010-04-01/Accounts/<:your_account_sid>/Usage/Records/ThisMonth.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication}],isVisible:!0},{id:n+"_web_asknicely",cssClass:"e-dashboarddesigner-datasource-asknicely",itemType:"e-web-asknicely",connector:"AskNicely",name:t.dataSource.dataSourceType.askNicely.name,category:DataSourceCategory.marketing,docUrl:"https://asknicely.asknice.ly/help/apidocs",templates:[{name:"",description:"",url:"https://<:your_asknicely_domain>.asknice.ly/datafeed/v1/line?apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0},{name:t.dataSource.dataSourceType.askNicely.templates.projects.name,description:t.dataSource.dataSourceType.askNicely.templates.projects.desc,url:"https://<:your_asknicely_domain>.asknice.ly/datafeed/v1/line?apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication}],isVisible:!0},{id:n+"_web_callrail",cssClass:"e-dashboarddesigner-datasource-callrail",itemType:"e-web-callrail",connector:"CallRail",name:t.dataSource.dataSourceType.callRail.name,category:DataSourceCategory.support,docUrl:"https://apidocs.callrail.com",templates:[{name:"",description:"",url:"https://api.callrail.com/v1/calls.json?start_date=<:enter_start_date>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Token token=<:token-key>"}],isDefault:!0},{name:t.dataSource.dataSourceType.callRail.templates.todayscall.name,description:t.dataSource.dataSourceType.callRail.templates.todayscall.desc,url:"https://api.callrail.com/v1/calls.json?start_date=<:enter_start_date>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Token token=<:token-key>"}]}],isVisible:!0},{id:n+"_web_campaign_monitor",cssClass:"e-dashboarddesigner-datasource-campaign-monitor",itemType:"e-web-campaign-monitor",connector:"CampaignMonitor",name:t.dataSource.dataSourceType.campaignMonitor.name,category:DataSourceCategory.marketing,docUrl:"https://www.campaignmonitor.com/api/",templates:[{name:"",description:"",url:"https://api.createsend.com/api/v3.1/clients.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0},{name:t.dataSource.dataSourceType.campaignMonitor.templates.lists.name,description:t.dataSource.dataSourceType.campaignMonitor.templates.lists.desc,url:"https://api.createsend.com/api/v3.1/clients.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication}],isVisible:!0},{id:n+"_web_chargify",cssClass:"e-dashboarddesigner-datasource-chargify",itemType:"e-web-chargify",connector:"Chargify",name:t.dataSource.dataSourceType.chargify.name,category:DataSourceCategory.finance,docUrl:"https://reference.chargify.com/",hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",url:"https://<:your_account_name>.chargify.com/<:api_end_point>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,usernameLabel:t.dataSource.webDataSource.accountKeyText,showPassword:!1,isDefault:!0},{name:t.dataSource.dataSourceType.chargify.templates.subscr.name,description:t.dataSource.dataSourceType.chargify.templates.subscr.desc,url:"https://<:your_account_name>.chargify.com/subscriptions.json?per_page=200",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,usernameLabel:t.dataSource.webDataSource.accountKeyText,showPassword:!1}],isVisible:!0},{id:n+"_web_chartmogul",cssClass:"e-dashboarddesigner-datasource-chartmogul",itemType:"e-web-chartmogul",connector:"ChartMogul",name:t.dataSource.dataSourceType.chartMogul.name,category:DataSourceCategory.salesCrm,docUrl:"https://dev.chartmogul.com/reference",templates:[{name:"",description:"",url:"https://api.chartmogul.com/v1/metrics/arr?start-date=<:enter_start_date>&end-date=<:enter_end_date>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0},{name:t.dataSource.dataSourceType.chartMogul.templates.arr.name,description:t.dataSource.dataSourceType.chartMogul.templates.arr.desc,url:"https://api.chartmogul.com/v1/metrics/arr?start-date=<:enter_start_date>&end-date=<:enter_end_date>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:t.dataSource.dataSourceType.chartMogul.templates.avgrevday.name,description:t.dataSource.dataSourceType.chartMogul.templates.avgrevday.desc,url:"https://api.chartmogul.com/v1/metrics/arpa?start-date=<:enter_start_date>&end-date=<:enter_end_date>&interval=day",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none},{name:t.dataSource.dataSourceType.chartMogul.templates.avgrevmonth.name,description:t.dataSource.dataSourceType.chartMogul.templates.avgrevmonth.desc,url:"https://api.chartmogul.com/v1/metrics/arpa?start-date=<:enter_start_date>&end-date=<:enter_end_date>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:t.dataSource.dataSourceType.chartMogul.templates.ccpday.name,description:t.dataSource.dataSourceType.chartMogul.templates.ccpday.desc,url:"https://api.chartmogul.com/v1/metrics/customer-count?start-date=<:enter_start_date>&end-date=<:enter_end_date>&interval=day",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:t.dataSource.dataSourceType.chartMogul.templates.ccpmonth.name,description:t.dataSource.dataSourceType.chartMogul.templates.ccpmonth.desc,url:"https://api.chartmogul.com/v1/metrics/customer-count?start-date=<:enter_start_date>&end-date=<:enter_end_date>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:t.dataSource.dataSourceType.chartMogul.templates.rrpday.name,description:t.dataSource.dataSourceType.chartMogul.templates.rrpday.desc,url:"https://api.chartmogul.com/v1/metrics/mrr?start-date=<:enter_start_date>&end-date=<:enter_end_date>&interval=day",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:t.dataSource.dataSourceType.chartMogul.templates.rrpmonth.name,description:t.dataSource.dataSourceType.chartMogul.templates.rrpmonth.desc,url:"https://api.chartmogul.com/v1/metrics/mrr?start-date=<:enter_start_date>&end-date=<:enter_end_date>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication}],isVisible:!0},{id:n+"_web_chartbeat",cssClass:"e-dashboarddesigner-datasource-chartbeat",itemType:"e-web-chartbeat",connector:"ChartBeat",name:t.dataSource.dataSourceType.chartBeat.name,category:DataSourceCategory.marketing,docUrl:"http://support.chartbeat.com/docs/api.html",templates:[{name:"",description:"",url:"http://api.chartbeat.com/live/toppages/v3/?apikey=<:your_api_key>&host=<:your_site_domain>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0},{name:"Engagement Series",description:"Retrieves engagement data for the last 2 days.",url:"http://api.chartbeat.com/historical/engagement/series/?apikey=<:your_api_key>&host=<:your_site_domain>&human=true&frequency=60&days_ago=1",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none},{name:"Top 10 Pages",description:"Gets the list of top 10 pages based on users’ visits.",url:"http://api.chartbeat.com/live/toppages/v3/?apikey=<:your_api_key>&host=<:your_site_domain>&limit=10",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none},{name:"Top Referrers",description:"Reveals the top referrers in your domain.",url:"http://api.chartbeat.com/live/referrers/v3/?apikey=<:your_api_key>&host=<:your_site_domain>&by_type=1",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none},{name:"Traffic series",description:"Gets the traffic metrics for your domain.",url:" http://api.chartbeat.com/historical/traffic/series/?apikey=<:your_api_key>&host=<:your_site_domain>&fields=people,new,return&days_ago=1&frequency=60&human=true",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none}],isVisible:!0},{id:n+"_web_flurry",cssClass:"e-dashboarddesigner-datasource-flurry",itemType:"e-web-flurry",connector:"Flurry",name:t.dataSource.dataSourceType.flurry.name,category:DataSourceCategory.advertising,docUrl:"https://developer.yahoo.com/flurry/docs",templates:[{name:"",description:"",url:"https://api-metrics.flurry.com/public/v1/data/appUsage/month/app?metrics=activeDevices&dateTime=<:start_month_(in YYYY-MM format)>/<:end_month_(in YYYY-MM format)>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"}],isDefault:!0},{name:"Active Devices by Month",description:"Retrieves the number of active devices for a given period.",url:"https://api-metrics.flurry.com/public/v1/data/appUsage/month/app?metrics=activeDevices&dateTime=<:start_month_(in YYYY-MM format)>/<:end_month_(in YYYY-MM format)>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"}]},{name:"Average Time Per Session",description:"Retrieves the average response time of a session for a given period.",url:"https://api-metrics.flurry.com/public/v1/data/appUsage/month/app?metrics=averageTimePerSession&dateTime=<:start_month_(in YYYY-MM format)>/<:end_month_(in YYYY-MM format)>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"}]},{name:"Campaign",description:"Retrieves the campaign metrics for a given period.",url:"https://api-metrics.flurry.com/public/v1/data/attribution/month/app/category/campaign?metrics=campaignClicks,campaignConversions,campaignConversionRate&dateTime=<:start_month_(in YYYY-MM format)>/<:end_month_(in YYYY-MM format)>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"}]},{name:"Purchases",description:"Retrieves the data of Purchases for the given period",url:"https://api-metrics.flurry.com/public/v1/data/iapRevenue/month/app/product?metrics=purchases,revenueOriginalCurrency&dateTime=<:start_month_(in YYYY-MM format)>/<:end_month_(in YYYY-MM format)>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"}]},{name:"Sessions",description:"Retrieves the sessions data for a given period.",url:"https://api-metrics.flurry.com/public/v1/data/appUsage/month/app?metrics=sessions&dateTime=<:start_month_(in YYYY-MM format)>/<:end_month_(in YYYY-MM format)>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"}]},{name:"Time Spent",description:"Retrieves the data on time spent for a given period.",url:"https://api-metrics.flurry.com/public/v1/data/appUsage/month/app?metrics=timeSpent&dateTime=<:start_month_(in YYYY-MM format)>/<:end_month_(in YYYY-MM format)>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"}]}],isVisible:!0},{id:n+"_web_freshdesk",cssClass:"e-dashboarddesigner-datasource-freshdesk",itemType:"e-web-freshdesk",connector:"Freshdesk",name:t.dataSource.dataSourceType.freshdesk.name,category:DataSourceCategory.support,docUrl:"https://developers.freshdesk.com/api/",templates:[{name:"",description:"",url:"https://<:your_domain>.freshdesk.com/api/v2/tickets?filter=new_and_my_open&order_by=created_at&order_type=desc&per_page=100",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0},{name:"Latest 100 New and My Open Tickets",description:"Gets the new and open tickets.",url:"https://<:your_domain>.freshdesk.com/api/v2/tickets?filter=new_and_my_open&order_by=created_at&order_type=desc&per_page=100",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Satisfaction Ratings",description:"Gets the satisfaction score from the given date to the current date.",url:"https://<:your_domain>.freshdesk.com/api/v2/surveys/satisfaction_ratings?created_since=<:since_date_(in yyyy-MM-ddTHH:mm:ssZ format>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Ticket Search",description:"Filters your tickets based on its priority and status.",url:'https://<:your_domain>.freshdesk.com/api/v2/search/tickets?query="status:2 AND (priority:3 OR priority:4)',method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Tickets",description:"Gets ticket details of your domain",url:"https://<:your_domain>.freshdesk.com/api/v2/tickets?per_page=100",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Time Entries",description:"Gets data of time entries in your domain.",url:"https://<:your_domain>.freshdesk.com/api/v2/time_entries",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication}],isVisible:!0},{id:n+"_web_fusebill",cssClass:"e-dashboarddesigner-datasource-fusebill",itemType:"e-web-fusebill",connector:"Fusebill",name:t.dataSource.dataSourceType.fusebill.name,category:DataSourceCategory.finance,docUrl:"https://developer.fusebill.com/reference",templates:[{name:"",description:"",url:"https://secure.fusebill.com/v1/customers/?pageNumber=0&pageSize=20&sortOrder=descending&sortExpression=createdTimestamp",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Basic <:your_api_key>"}],isDefault:!0},{name:"20 Most Recent Customers",description:"Gets the list of your most recent customers.",url:"https://secure.fusebill.com/v1/customers/?pageNumber=0&pageSize=20&sortOrder=descending&sortExpression=createdTimestamp",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Basic <:your_api_key>"}]}],isVisible:!0},{id:n+"_web_gosquared",cssClass:"e-dashboarddesigner-datasource-gosquared",itemType:"e-web-gosquared",connector:"GoSquared",name:t.dataSource.dataSourceType.goSquared.name,category:DataSourceCategory.marketing,docUrl:"https://www.gosquared.com/docs/api/",templates:[{name:"",description:"",url:"https://api.gosquared.com/now/v3/overview?api_key=<:your_api_key>&site_token=<:your_site_token>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0},{name:"Overview",description:"Retrieves a summary of data for the site, including people online, the number of active pages, and min, max, and average of historical visits.",url:"https://api.gosquared.com/now/v3/overview?api_key=<:your_api_key>&site_token=<:your_site_token>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none}],isVisible:!0},{id:n+"_web_harvest",cssClass:"e-dashboarddesigner-datasource-harvest",itemType:"e-web-harvest",connector:"Harvest",name:t.dataSource.dataSourceType.harvest.name,category:DataSourceCategory.salesCrm,docUrl:"https://help.getharvest.com/api-v2/",templates:[{name:"",description:"",url:"https://<:your_sub_domain>.harvestapp.com/projects.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0},{name:"List of projects",description:"Returns a list of your projects. The projects return sorted by creation date, with the most recently created projects appearing first.",url:"https://<:your_sub_domain>.harvestapp.com/projects.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication}],isVisible:!0},{id:n+"_web_helpscout",cssClass:"e-dashboarddesigner-datasource-helpscout",itemType:"e-web-helpscout",connector:"HelpScout",name:t.dataSource.dataSourceType.helpScout.name,category:DataSourceCategory.support,docUrl:"https://developer.helpscout.com/",templates:[{name:"",description:"",url:"https://api.helpscout.net/v1/reports/productivity/first-response-time.json?start=<:enter_start_date(in yyyy-MM-ddTHH:mm:ssZ format)>&end=<:enter_end_date(in yyyy-MM-ddTHH:mm:ssZ format)>&viewBy=day",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0},{name:"Average first response time",description:"Returns the average of first response times for each period in a specified time range.",url:"https://api.helpscout.net/v1/reports/productivity/first-response-time.json?start=<:enter_start_date(in yyyy-MM-ddTHH:mm:ssZ format)>&end=<:enter_end_date(in yyyy-MM-ddTHH:mm:ssZ format)>&viewBy=day",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Company performance",description:"Returns statistics about your company’s performance for a given time range.",url:"https://api.helpscout.net/v1/reports/company.json?start=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)>&previousStart=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&previousEnd=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Conversation volume",description:"Provides statistics about conversation volume for a given time range.",url:"https://api.helpscout.net/v1/reports/conversations.json?start=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&end=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&previousStart=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&previousEnd=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Conversations with response time of 1-2 days",description:"Returns statistics about productivity. It drills down and returns the conversation data.",url:"https://api.helpscout.net/v1/reports/productivity/drilldown.json?start=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&end=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&range=responseTime&rangeid=8",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Happiness report",description:"Provides information about how many great, okay, and not good ratings your company received for each period in a specified time range.",url:"https://api.helpscout.net/v1/reports/productivity/drilldown.json?start=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&end=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&range=responseTime&rangeid=8",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"User activity",description:"Provides a summary of the user or team activity over a specified time range.",url:"https://api.helpscout.net/v1/reports/user.json?start=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&end=<:enter_date(in yyyy-MM-ddTHH:mm:ssZ format)&user=<:user_id>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication}],isVisible:!0},{id:n+"_web_kissmetrics",cssClass:"e-dashboarddesigner-datasource-kissmetrics",itemType:"e-web-kissmetrics",connector:"Kissmetrics",name:t.dataSource.dataSourceType.kissMetrics.name,category:DataSourceCategory.salesCrm,docUrl:"https://developers.kissmetrics.com/reference#overview",hasMaxRow:!1,templates:[{name:"",description:"",url:"https://query.kissmetrics.com/v3/products/<:product_id>/reports",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0}],isVisible:!0},{id:n+"_web_insightly",cssClass:"e-dashboarddesigner-datasource-insightly",itemType:"e-web-insightly",connector:"Insightly",name:t.dataSource.dataSourceType.insightly.name,category:DataSourceCategory.salesCrm,docUrl:"https://api.insight.ly/v2.1/Help",hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",url:"https://api.insight.ly/v2.2/opportunities?Brief=True",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0,usernameLabel:t.dataSource.webDataSource.accountKeyText,showPassword:!1},{name:"List of opportunities",description:"Returns a list of opportunities available for your business.",url:"https://api.insight.ly/v2.2/opportunities?Brief=True",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0,usernameLabel:t.dataSource.webDataSource.accountKeyText,showPassword:!1},{name:"List of leads",description:"Returns a list of leads available for your business.",url:"https://api.insight.ly/v2.3/Leads?Brief=True",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0,usernameLabel:t.dataSource.webDataSource.accountKeyText,showPassword:!1}],isVisible:!0},{id:n+"_web_intervals",cssClass:"e-dashboarddesigner-datasource-intervals",itemType:"e-web-intervals",connector:"Intervals",name:t.dataSource.dataSourceType.intervals.name,category:DataSourceCategory.projectManagement,docUrl:"https://www.myintervals.com/api",templates:[{name:"",description:"",url:"https://api.myintervals.com/project/",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,username:"<:your_api_key>",isDefault:!0},{name:"Projects",description:"Retrieves the list of projects.",url:"https://api.myintervals.com/project/",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,username:"<:your_api_key>"},{name:"Task",description:"Retrieves the list of tasks.",url:"https://api.myintervals.com/task/",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,username:"<:your_api_key>"},{name:"Invoice",description:"Retrieves the list of invoices.",url:"https://api.myintervals.com/task/",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,username:"<:your_api_key>"}],isVisible:!0},{id:n+"_web_keenio",cssClass:"e-dashboarddesigner-datasource-keenio",itemType:"e-web-keenio",connector:"KeepIo",name:t.dataSource.dataSourceType.keenIo.name,category:DataSourceCategory.salesCrm,docUrl:"https://keen.io/docs/api/",templates:[{name:"",description:"",url:"https://api.keen.io/3.0/projects/<:project_id>/queries/saved/<:save_query_name>/result",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"authorization",value:"Basic <:project_read_key>"}],isDefault:!0},{name:"Saved query",description:"Returns the saved query result.",url:"https://api.keen.io/3.0/projects/<:project_id>/queries/saved/<:save_query_name>/result",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"authorization",value:"Basic <:project_read_key>"}]}],isVisible:!0},{id:n+"_gitlab",category:DataSourceCategory.projectManagement,itemType:"e-web-gitlab",connector:"Gitlab",docUrl:"https://docs.gitlab.com/ee/api/",cssClass:"e-dashboarddesigner-datasource-gitlab",name:t.dataSource.dataSourceType.gitlab.name,templates:[{name:"",description:"",url:"https://<:your_gitlab_domain>.com/api/v4/merge_requests?state=opened&scope=assigned-to-me",dataFormat:WebDataFormat.json,method:HTTPMethod.get,authenticationType:WebAuthenticationType.none,headers:[{key:"Private-Token",value:"<:your_access_token>"}],isDefault:!0},{name:"Merge requests to be reviewed",description:"Gets all the merge requests that are in open state and needs to be reviewed by an authenticated user.",url:"https://<:your_gitlab_domain>.com/api/v4/merge_requests?state=opened&scope=assigned-to-me",dataFormat:WebDataFormat.json,method:HTTPMethod.get,authenticationType:WebAuthenticationType.none,headers:[{key:"Private-Token",value:"<:your_access_token>"}]}],isVisible:!0},{id:n+"_web_liveagent",cssClass:"e-dashboarddesigner-datasource-liveagent",itemType:"e-web-liveagent",connector:"LiveAgent",name:t.dataSource.dataSourceType.liveAgent.name,category:DataSourceCategory.support,docUrl:"https://www.ladesk.com/features/api/",templates:[{name:"",description:"",url:"https://<:your_site>.ladesk.com/api/reports/performance?date_from=<:enter_date(in yyyy-MM-dd format)>&date_to=<:enter_date(in yyyy-MM-dd format)>&apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0},{name:"Performance",description:"Returns the performance metrics of your site for a given period.",url:"https://<:your_site>.ladesk.com/api/reports/performance?date_from=<:enter_date(in yyyy-MM-dd format)>&date_to=<:enter_date(in yyyy-MM-dd format)>&apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"List of companies",description:"Retrieves details of 1000 companies.",url:"https://<:your_site>.ladesk.com/api/companies?limitcount=1000&apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Channel report",description:"Returns the channels’ report for a given period.",url:"https://<:your_site>.ladesk.com/api/reports/channels?date_from=<:enter_date(in yyyy-MM-dd format)>&date_to=<:enter_date(in yyyy-MM-dd format)>&limitcount=1000&apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Agent report",description:"Returns the agents’ report for a given period.",url:"https://<:your_site>.ladesk.com/api/reports/agents?date_from=<:enter_date(in yyyy-MM-dd format)>&date_to=<:enter_date(in yyyy-MM-dd format)>&limitcount=1000&apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},{name:"Tickets",description:"Returns ticket details for a given period.",url:"https://<:your_site>.ladesk.com/api/reports/tickets/load?date_from=<:enter_date(in yyyy-MM-dd format)>&date_to=<:enter_date(in yyyy-MM-dd format)>&limitcount=1000&apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication},],isVisible:!0},{id:n+"_web_nicereply",cssClass:"e-dashboarddesigner-datasource-nicereply",itemType:"e-web-nicereply",connector:"NiceReply",name:t.dataSource.dataSourceType.nicereply.name,category:DataSourceCategory.marketing,docUrl:"https://api.nicereply.com/docs/v1",templates:[{name:"",description:"",url:"https://www.nicereply.com/api/getCompanyStats?apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0},{name:"Company stats",description:"Returns statistics of your company from Nicereply.",url:"https://www.nicereply.com/api/getCompanyStats?apikey=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none}],isVisible:!0},{id:n+"_web_pipelinedeals",cssClass:"e-dashboarddesigner-datasource-pipelinedeals",itemType:"e-web-pipelinedeals",connector:"PipelineDeals",name:t.dataSource.dataSourceType.pipelineDeals.name,category:DataSourceCategory.salesCrm,docUrl:"https://app.pipelinedeals.com/api/docs",templates:[{name:"",description:"",url:"https://api.pipelinedeals.com/api/v3/deals.json?api_key=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0},{name:"Deals",description:"Retrieves all the deals from your PipelineDeals account",url:"https://api.pipelinedeals.com/api/v3/deals.json?api_key=<:your_api_key>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none}],isVisible:!0},{id:n+"_web_prosperworks",cssClass:"e-dashboarddesigner-datasource-prosperworks",itemType:"e-web-prosperworks",connector:"ProsperWorkds",name:t.dataSource.dataSourceType.prosperWorks.name,category:DataSourceCategory.salesCrm,docUrl:"https://developer.prosperworks.com",templates:[{name:"",description:"",url:"https://api.prosperworks.com/developer_api/v1/leads/search",method:HTTPMethod.post,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-PW-AccessToken",value:"<:access_token>"},{key:"X-PW-Application",value:"developer_api"},{key:"X-PW-UserEmail",value:"<:token_owner_email_address>"}],parameters:[{key:"page_size",value:"100"}],isDefault:!0},{name:"Leads list",description:"Retrieves all the leads for your business.",url:"https://api.prosperworks.com/developer_api/v1/leads/search",method:HTTPMethod.post,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-PW-AccessToken",value:"<:access_token>"},{key:"X-PW-Application",value:"developer_api"},{key:"X-PW-UserEmail",value:"<:token_owner_email_address>"}]}],isVisible:!0},{id:n+"_web_sendgrid",cssClass:"e-dashboarddesigner-datasource-sendgrid",itemType:"e-web-sendgrid",connector:"SendGrid",name:t.dataSource.dataSourceType.sendGrid.name,category:DataSourceCategory.emailCompaign,docUrl:"https://sendgrid.com/docs/API_Reference/api_getting_started.html",templates:[{name:"",description:"",url:"https://api.sendgrid.com/v3/campaigns?limit=100",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_api_key>"}],isDefault:!0},{name:"Campaigns",description:"Retrieves 100 recent campaigns.",url:"https://api.sendgrid.com/v3/campaigns?limit=100",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_api_key>"}]},{name:"Contacts list",description:"Retrieve 100 recent contacts.",url:"https://api.sendgrid.com/v3/contactdb/lists?limit=100",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_api_key>"}]},{name:"Segments",description:"Retrieves 100 recent segments.",url:"https://api.sendgrid.com/v3/contactdb/segments?limit=100",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_api_key>"}]},{name:"Global email stats",description:"Retrieves your global email statistics for a given date range.",url:"https://api.sendgrid.com/v3/stats?start_date=<:enter_date(in yyyy-MM-dd format)>&end_date=<:enter_date(in yyyy-MM-dd format)>&aggregated_by=day",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_api_key>"}]}],isVisible:!0},{id:n+"_web_newrelic",cssClass:"e-dashboarddesigner-datasource-newrelic",itemType:"e-web-newrelic",connector:"NewRelic",name:t.dataSource.dataSourceType.newRelic.name,category:DataSourceCategory.projectManagement,docUrl:"https://docs.newrelic.com/docs/apis",templates:[{name:"",description:"",url:"https://api.newrelic.com/v2/applications.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-Api-Key",value:"Bearer <:your_api_key>"}],isDefault:!0},{name:"Applications",description:"This API endpoint returns a list of the applications associated with your New Relic account.",url:"https://api.newrelic.com/v2/applications.json ",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-Api-Key",value:"Bearer <:your_api_key>"}]},{name:"Servers",description:"This API endpoint returns a list of the servers associated with your New Relic account.",url:"https://api.newrelic.com/v2/servers.json ",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-Api-Key",value:"Bearer <:your_api_key>"}]},{name:"Users",description:"Gets a list of all users.",url:"https://api.newrelic.com/v2/users.json ",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-Api-Key",value:"Bearer <:your_api_key>"}]},{name:"Alerts",description:"This API endpoint allows you to list the alert events for your account.",url:"https://api.newrelic.com/v2/alerts_events.json ",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-Api-Key",value:"Bearer <:your_api_key>"}]},{name:"Dashboards",description:"This API endpoint allows you to fetch a list of Insights dashboards.",url:"https://api.newrelic.com/v2/dashboards.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-Api-Key",value:"Bearer <:your_api_key>"}]},{name:"Components",description:"This API endpoint returns a list of the plugin components associated with your New Relic account.",url:"https://api.newrelic.com/v2/components.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-Api-Key",value:"Bearer <:your_api_key>"}]},{name:"Labels",description:"This API endpoint returns a paginated list of labels available to the account.",url:"https://api.newrelic.com/v2/labels.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"X-Api-Key",value:"Bearer <:your_api_key>"}]},],isVisible:!0},{id:n+"_web_mixpanel",cssClass:"e-dashboarddesigner-datasource-mixpanel",itemType:"e-web-mixpanel",connector:"MixPanel",name:t.dataSource.dataSourceType.mixpanel.name,category:DataSourceCategory.marketing,docUrl:"https://mixpanel.com/help/reference/data-export-api",templates:[{name:"",description:"",url:"https://mixpanel.com/api/2.0/events/?interval=7&type=average&event=[<:event_1>,<:event_2>]&unit=day",authenticationType:WebAuthenticationType.basichttpauthentication,dataFormat:WebDataFormat.json,method:HTTPMethod.get,username:"<:your_api_key>",isDefault:!0},{name:"Events",description:"Gets the events for the last 7 days",url:"https://mixpanel.com/api/2.0/events/?interval=7&type=average&event=[<:event_1>,<:event_2>]&unit=day",authenticationType:WebAuthenticationType.basichttpauthentication,dataFormat:WebDataFormat.json,method:HTTPMethod.get,username:"<:your_api_key>"},{name:"Funnel",description:"Gets the data of the given funnel in the current week",url:"https://mixpanel.com/api/2.0/funnels/?funnel_id=<:funnel_id>&unit=week",authenticationType:WebAuthenticationType.basichttpauthentication,dataFormat:WebDataFormat.json,method:HTTPMethod.get,username:"<:your_api_key>"},{name:"Event Properties",description:"Gets the properties of the selected event for today",url:"https://mixpanel.com/api/2.0/events/properties?name=feature&interval=1&type=unique&event=<:event>&unit=day",authenticationType:WebAuthenticationType.basichttpauthentication,dataFormat:WebDataFormat.json,method:HTTPMethod.get,username:"<:your_api_key>"}],isVisible:!0},{id:n+"_web_stripe",cssClass:"e-dashboarddesigner-datasource-stripe",itemType:"e-web-stripe",connector:"Stripe",name:t.dataSource.dataSourceType.stripe.name,category:DataSourceCategory.finance,docUrl:"https://stripe.com/docs/api",hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",url:"https://api.stripe.com/v1/charges",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0,usernameLabel:"Account Key",showPassword:!1}],isVisible:!0},{id:n+"_web_odata",cssClass:"e-dashboarddesigner-datasource-odata",itemType:"e-web-odata",connector:"OData",name:t.dataSource.dataSourceType.odata.name,tags:["rest","api","web","url"],category:DataSourceCategory.rest,docUrl:"https://www.odata.org/documentation/",hasMaxRow:!0,defaultRowLimit:500,templates:[{name:"",description:"",url:"",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0}],isVisible:!0},{id:n+"_web_zendesk",cssClass:"e-dashboarddesigner-datasource-zendesk",itemType:"e-web-zendesk",connector:"Zendesk",name:t.dataSource.dataSourceType.zendesk.name,category:DataSourceCategory.salesCrm,docUrl:"https://developer.zendesk.com/rest_api/docs/zendesk-apis/resources ",hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",url:"https://domainname.zendesk.com/api/v2/<:yourendpoint>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0}],isVisible:!0},{id:n+"_web_mailchimp",cssClass:"e-dashboarddesigner-datasource-mailchimp",itemType:"e-web-mailchimp",connector:"MailChimp",name:t.dataSource.dataSourceType.mailchimp.name,category:DataSourceCategory.emailCompaign,docUrl:"https://developer.mailchimp.com/documentation/mailchimp/guides/",hasMaxRow:!0,defaultRowLimit:10,templates:[{name:"",description:"",url:"https://<:usid>.api.mailchimp.com/3.0/",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,passwordLabel:"API Key",isDefault:!0}],isVisible:!0},{id:n+"_web_pipedrive",category:DataSourceCategory.salesCrm,itemType:"e-web-pipedrive",connector:"Pipedrive",docUrl:"https://pipedrive.readme.io/docs",cssClass:"e-dashboarddesigner-datasource-pipedrive",name:t.dataSource.dataSourceType.pipedrive.name,hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",url:"https://api.pipedrive.com/v1/deals?api_token=<:yourApiToken>",dataFormat:WebDataFormat.json,method:HTTPMethod.get,authenticationType:WebAuthenticationType.none,isDefault:!0},{name:"Deals",description:"Retrieves a list of all deals from PipeDrive",url:"https://api.pipedrive.com/v1/deals?api_token=<:yourApiToken>",dataFormat:WebDataFormat.json,method:HTTPMethod.get,authenticationType:WebAuthenticationType.none}],isVisible:!0},{id:n+"_web_activecampaign",cssClass:"e-dashboarddesigner-datasource-activecampaign",itemType:"e-web-activecampaign",connector:"ActiveCampaign",name:t.dataSource.dataSourceType.activeCampaign.name,category:DataSourceCategory.digitalMarketing,docUrl:"https://developers.activecampaign.com/reference",hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",url:"https://<:your_account>.api-us1.com/api/3/<:resource> ",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0,headers:[{key:"Api-Token",value:"<:your_app_token>"}]}],isVisible:!0},{id:n+"_web_optimizely",cssClass:"e-dashboarddesigner-datasource-optimizely",itemType:"e-web-optimizely",connector:"Optimizely",name:t.dataSource.dataSourceType.optimizely.name,category:DataSourceCategory.webAnalytics,docUrl:"https://developers.optimizely.com/classic/rest/v1/",hasMaxRow:!0,defaultRowLimit:25,templates:[{name:"",description:"",url:"https://api.optimizely.com/v2/projects",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"}],isDefault:!0}],isVisible:!0},{id:n+"_web_basecrm",cssClass:"e-dashboarddesigner-datasource-basecrm",itemType:"e-web-basecrm",connector:"BaseCrm",name:t.dataSource.dataSourceType.basecrm.name,category:DataSourceCategory.salesCrm,docUrl:"https://developers.getbase.com/docs/rest/articles/introduction",hasMaxRow:!0,defaultRowLimit:25,templates:[{name:"",description:"",url:"https://api.getbase.com/v2/contacts",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,headers:[{key:"Authorization",value:"Bearer <:your_app_token>"},{key:"User-Agent",value:"Syncfusion Dashboards"}],isDefault:!0}],isVisible:!0},{id:n+"_web_sendible",category:DataSourceCategory.all,itemType:"e-web-sendible",connector:"Sendible",docUrl:"https://developers.sendible.com/docs/",cssClass:"e-dashboarddesigner-datasource-sendible",name:t.dataSource.dataSourceType.sendible.name,hasMaxRow:!0,defaultRowLimit:10,templates:[{name:"",description:"",url:"https://api.sendible.com/api/v2/profile",dataFormat:WebDataFormat.json,method:HTTPMethod.get,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0},{name:"Profile",description:"Retrieves the Sendible profile details",url:"https://api.sendible.com/api/v2/profile",dataFormat:WebDataFormat.json,method:HTTPMethod.get,authenticationType:WebAuthenticationType.basichttpauthentication}],isVisible:!0},{id:n+"_web_chargebee",cssClass:"e-dashboarddesigner-datasource-chargebee",itemType:"e-web-chargebee",connector:"ChargeBee",name:t.dataSource.dataSourceType.chargebee.name,category:DataSourceCategory.finance,docUrl:"https://apidocs.chargebee.com/docs/api",hasMaxRow:!0,defaultRowLimit:100,templates:[{name:"",description:"",url:"https://<:site>.chargebee.com/api/v2/subscriptions",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0,usernameLabel:t.dataSource.webDataSource.accountKeyText,showPassword:!1}],isVisible:!0},{id:n+"_web_toggl",cssClass:"e-dashboarddesigner-datasource-toggl",itemType:"e-web-toggl",connector:"Toggl",name:t.dataSource.dataSourceType.toggl.name,category:DataSourceCategory.projectManagement,docUrl:"https://github.com/toggl/toggl_api_docs/",hasMaxRow:!0,defaultRowLimit:50,templates:[{name:"",description:"",url:"https://www.toggl.com/api/v8/dashboard/<:workspace_id>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0}],isVisible:!0},{id:n+"_web_github",category:DataSourceCategory.projectManagement,itemType:"e-web-github",connector:"GitHub",docUrl:"https://developer.github.com/v3/",cssClass:"e-dashboarddesigner-datasource-github",name:t.dataSource.dataSourceType.github.name,hasMaxRow:!0,defaultRowLimit:30,templates:[{name:"",description:"",url:"https://api.github.com/user/repos",dataFormat:WebDataFormat.json,method:HTTPMethod.get,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0,headers:[{key:"User-Agent",value:"Syncfusion Dashboards"}]},{name:"Respositories",description:"Retrieves a list of repositories",url:"https://api.github.com/user/repos",dataFormat:WebDataFormat.json,method:HTTPMethod.get,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0,headers:[{key:"User-Agent",value:"Syncfusion Dashboards"}]}],isVisible:!0},{id:n+"_pinterest",cssClass:"e-dashboarddesigner-datasource-oauth-pinterest",itemType:"e-oauth-pinterest",connector:"Pinterest",name:t.dataSource.oauthConnectors.pinterest,tags:["pinterest","social"],category:DataSourceCategory.communications,docUrl:"https://developers.pinterest.com",templates:[{name:"",description:"",authenticationType:WebAuthenticationType.oauth,method:HTTPMethod.get,url:"https://api.pinterest.com/v1/me/pins/",dataFormat:WebDataFormat.json,isDefault:!0}],isVisible:!1},{id:n+"_web_lighthouse",cssClass:"e-dashboarddesigner-datasource-lighthouse",itemType:"e-web-lighthouse",connector:"LightHouse",name:t.dataSource.dataSourceType.lighthouse.name,category:DataSourceCategory.projectManagement,docUrl:"http://help.lighthouseapp.com/kb/api/api-basics",templates:[{name:"",description:"",url:"https://<:domain>.lighthouseapp.com",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0,headers:[{key:"X-LighthouseToken",value:"<:access_token>"}]}],isVisible:!0},{id:n+"_web_freshsales",cssClass:"e-dashboarddesigner-datasource-freshsales",itemType:"e-web-freshsales",connector:"Freshsales",name:t.dataSource.dataSourceType.freshsales.name,category:DataSourceCategory.salesCrm,docUrl:"https://www.freshsales.io/api/#getting-started",hasMaxRow:!0,defaultRowLimit:100,maxRowLimit:1e4,tags:["sales","CRM","cloud","Eventtracking"],templates:[{name:"",description:"",url:"https://<:your_domain>.freshsales.io/api/tasks/<:id>",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.none,isDefault:!0,headers:[{key:"Authorization",value:"Token token=<:your_api_token>"}]}],isVisible:!0},{id:n+"_web_freshservice",cssClass:"e-dashboarddesigner-datasource-freshservice",itemType:"e-web-freshservice",connector:"Freshservice",name:t.dataSource.dataSourceType.freshservice.name,category:DataSourceCategory.support,docUrl:"https://api.freshservice.com/",hasMaxRow:!0,defaultRowLimit:100,maxRowLimit:1e4,tags:["support","assetmanagement","cloud"],templates:[{name:"",description:"",url:"https://<:your_domain>.freshservice.com/helpdesk/tickets/<:id>.json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.basichttpauthentication,isDefault:!0}],isVisible:!0},{id:n+"_microsoft_outlookcalendar",cssClass:"e-dashboarddesigner-datasource-oauth-microsoft-outlookcalendar",itemType:"e-oauth-microsoft-outlookcalendar",connector:"MicrosoftOutlookCalendar",name:t.dataSource.oauthConnectors.microsoftOutlookCalendar,tags:["outlook","calendar","project","management","microsoft"],category:DataSourceCategory.projectManagement,docUrl:"https://developer.microsoft.com/en-us/graph/docs/api-reference/v1.0/resources/event",templates:[{name:"",description:"",url:"https://graph.microsoft.com/v1.0/me/events?$select=subject,body,bodyPreview,organizer,attendees,start,end,location",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.oauth,isDefault:!0}],isVisible:!1},{id:n+"_oauth_linkedin",cssClass:"e-dashboarddesigner-datasource-oauth-linkedin",itemType:"e-oauth-linkedin",connector:"LinkedIn",name:t.dataSource.oauthConnectors.linkedin,tags:["employment","jobs","profiles","social","linkedin"],category:DataSourceCategory.socialMedia,hasMaxRow:!0,docUrl:"https://developer.linkedin.com/docs",templates:[{name:"",description:"",url:"https://api.linkedin.com/v1/companies/<:id>/updates?format=json",method:HTTPMethod.get,dataFormat:WebDataFormat.json,authenticationType:WebAuthenticationType.oauth,isDefault:!0}],isVisible:!1}]},n.getDataSourceTypeObject=function(n,t){return ej.DashboardDesignerUtility.DataSourceTypes.getDataSourceTypes("",t).filter(function(t){return t.itemType===n||t.connector.toLowerCase()===n.toLowerCase()})[0]},n}();ej.createObject("ej.DashboardDesignerUtility.DataSourceTypes",InternalDataSourceTypes,window),function(n){n[n.json="Json"]="json";n[n.csv="Csv"]="csv"}(WebDataFormat||(WebDataFormat={})),function(n){n[n.none="None"]="none";n[n.basichttpauthentication="BasicHttpAuthentication"]="basichttpauthentication";n[n.oauth="oauth"]="oauth"}(WebAuthenticationType||(WebAuthenticationType={})),function(n){n[n.get="Get"]="get";n[n.post="Post"]="post"}(HTTPMethod||(HTTPMethod={}));InternalColorCustomization=function(){function n(){this.dashboardDesigner=null;this.selectedColumnIndex=0;this.bindedColumnsList=[];this.colorContainer=null;this.colorFields=[];this.isAdvanceEnable=!1;this.isBasicEnable=!1;this.defaultColor="#77A7FB";this.dataGroupInfo=null;this.measureColumnsList=[];this.dimensionColumnsList=[];this.isColorSupportForText=!1;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.id=this.dashboardDesigner._id}return Object.defineProperty(n,"getColorSets",{get:function(){return(this.colorSets===null||this.colorSets===undefined)&&(this.colorSets=new ej.DashboardDesignerUtility.ColorCustomization),this.colorSets},enumerable:!0,configurable:!0}),n.prototype.renderColorSettings=function(n,t,i,r){var u=this.id+"_"+t+"_"+i.categoryName;if(this.colorContainer=$("#"+u),this.colorContainer.length!==0||ej.isNullOrUndefined(n))this.colorContainer.length>0&&this.propertyPanel.updateItemVisibility(i.elementType,"ColorSettings","ColorSettings",i.isVisible);else{this.colorContainer=ej.buildTag("div.e-dashbrd-customcolor-container","",{},{id:u});var f=ej.buildTag("div.e-dashbrd-customcolor-container-wrap","",{},{id:u+"_wrap"}),e=ej.buildTag("div.e-column-type","",{display:this.isColorSupportForText?"block":"none"},{id:this.id+"_"+t+"_columnType"}),o=ej.buildTag("div.e-columns-list","",{},{id:this.id+"_"+t+"_columnList"}),s=ej.buildTag("div.e-basic-advance-panel-wrap","",{},{id:this.id+"_"+t+"_basicAdvancePanel"}),h=ej.buildTag("div.e-header-row","",{},{});this.isColorSupportForText&&(h.append(this.getNumberRadioBtn(),this.getTextRadioBtn()),e.append(h));var c=ej.buildTag("ul.e-color-custom-ul","",{},{id:this.id+"_column_list"}),l=this.getColorUI(),a=this.getBasic(),v=this.getAdvance();o.append(c);s.append(a,v);f.append(o,s);this.colorContainer.append(e,f,l);n.append(this.colorContainer);this.renderElements()}this.updateColorSettingsValue(r)},n.prototype.getColorUI=function(){var n=ej.buildTag("div.e-custom-color-formatting-wrapper","",{},{id:this.id+"_color_formatting_wrapper"}),t=ej.buildTag("div.e-advance-settings-condition-div","",{},{}),r=ej.buildTag("label.e-advance-settings-condition-label",this.dashboardDesigner.locale.colorCustomBasicLocale.conditionalColorFormatting,{"font-color":"#303541"},{"for":this.id+"_color_formatting_label",type:"label"}),u=ej.buildTag("label.e-advance-panel-primary-condition-label",this.dashboardDesigner.locale.colorCustomBasicLocale.basedOnPrimaryValue,{"font-color":"#303541"},{"for":this.id+"_color_formatting_primary_value_label",type:"label"}),i;return t.append(r).append(u),i=ej.buildTag("button.e-custom-color-formatting-button","",{},{id:this.id+"_advance_settings_button"}),n.append(t),n.append(i),n},n.prototype.updateColorSettingsValue=function(n){var t,i;this.colorFields=n.colorFields;this.isBasicEnable=n.isBasicEnable;this.isAdvanceEnable=n.isAdvanceEnable;this.bindedColumnsList=n.columns.columns;this.measureColumnsList=n.columns.measureFields;this.dimensionColumnsList=n.columns.dimensionFields;this.datasetId=n.datasetId;this.dataGroupInfo=n.dataGroupInfo;this.datasetId=n.datasetId;this.isColorSupportForText&&this.updateCategoryRadioBtn();!this.isBasicEnable&&this.isAdvanceEnable?this.hideColumnList(!0):this.hideColumnList(!1);this.updateBasicAdvancePanelVisiblity();this.populateColumnsForColorSettings();t=this.getColorSettings();!ej.isNullOrUndefined(t)&&t.length>0&&(i=!ej.isNullOrUndefined(t[this.selectedColumnIndex].AdvancedColorSettings),this.setTextForButton(i))},n.prototype.hideColumnList=function(n){var t=this.colorContainer.attr("id"),i=this.colorContainer.find("#"+t+"_wrap"),r=this.colorContainer.find("#"+this.id+"_color_formatting_wrapper");i.css("display",n?"none":"inline-block");r.css("display",n?"inline-block":"none")},n.prototype.copy=function(n){var r=this,i,t;return i=Array.isArray(n)?[]:{},Object.keys(n).forEach(function(u){t=n[u];i[u]=typeof t=="object"&&t!==null?r.copy(t):t}),i},n.prototype.updateCategoryRadioBtn=function(){this.measureColumnsList.length>0?this.showNumber():this.dimensionColumnsList.length>0&&this.showText();this.dimensionColumnsList.length===0?this.colorContainer.find(".e-column-type").css("display","none"):this.colorContainer.find(".e-column-type").css("display","block")},n.prototype.showNumber=function(){var n=this.colorContainer.find("#"+this.id+"_numberData").data("ejRadioButton");this.colorContainer.find(".e-basic-option-color-wrap").css("display","block");this.colorContainer.find(".e-basic-option-btn-wrap").css("display","none");ej.isNullOrUndefined(n)||n.option("checked",!0)},n.prototype.showText=function(){var n=this.colorContainer.find("#"+this.id+"_textData").data("ejRadioButton");this.colorContainer.find(".e-basic-option-color-wrap").css("display","none");this.colorContainer.find(".e-basic-option-btn-wrap").css("display","block");ej.isNullOrUndefined(n)||n.option("checked",!0)},n.prototype.updateBasicAdvancePanelVisiblity=function(){this.isAdvanceEnable?this.showAdvance():this.hideAdvance();this.isBasicEnable?this.showBasic():this.hideBasic()},n.prototype.showAdvance=function(){this.colorContainer.find(".e-advance-row").css("display","block")},n.prototype.hideAdvance=function(){this.colorContainer.find(".e-advance-row").css("display","none")},n.prototype.showBasic=function(){var n=this.getColorSettings(),t;this.isColorSupportForText&&(this.isDimension()?(this.colorContainer.find(".e-basic-option-color-wrap").css("display","none"),this.colorContainer.find(".e-basic-option-btn-wrap").css("display","block")):(this.colorContainer.find(".e-basic-option-color-wrap").css("display","block"),this.colorContainer.find(".e-basic-option-btn-wrap").css("display","none")));ej.isNullOrUndefined(n)||(t=n.length>0&&!ej.isNullOrUndefined(n[this.selectedColumnIndex])&&n[this.selectedColumnIndex].AdvancedColorSettings!==null,t||this.colorContainer.find(".e-basic-row").css("display","block"),t&&this.isAdvanceEnable&&this.showAdvance())},n.prototype.hideBasic=function(){this.colorContainer.find(".e-basic-row").css("display","none");this.updateBasicColorPickerVal(this.defaultColor)},n.prototype.isDimension=function(){var n=this.colorContainer.find("#"+this.id+"_textData").data("ejRadioButton");return!ej.isNullOrUndefined(n)&&n.model.checked?!0:!1},n.prototype.getNumberRadioBtn=function(){var n=ej.buildTag("div.e-number-row","",{display:"block"},{id:this.id+"_numberRow_table"}),t=ej.buildTag("input.e-number-radio-btn","",{},{type:"radio",id:this.id+"_numberData"}),i=ej.buildTag("label.e-advance-panel-condition-label",this.dashboardDesigner.locale.colorCustomBasicLocale.measureRadioBtnText,{"font-color":"#303541"},{"for":this.id+"_numberData",type:"label"});return n.append(t,i)},n.prototype.getTextRadioBtn=function(){var n=ej.buildTag("div.e-text-row","",{display:"block"},{id:this.id+"_textRow_table"}),t=ej.buildTag("input.e-text-radio-btn","",{},{type:"radio",id:this.id+"_textData"}),i=ej.buildTag("label.e-advance-panel-condition-label",this.dashboardDesigner.locale.colorCustomBasicLocale.dimensionRadioBtnText,{"font-color":"#303541"},{"for":this.id+"_textData",type:"label"});return n.append(t).append(i)},n.prototype.getBasic=function(){var u=ej.buildTag("div.e-basic-row","",{},{id:this.id+"_basicRow_table"}),f=ej.buildTag("label.e-advance-panel-condition-label e-basic-condition-label",this.dashboardDesigner.locale.colorCustomBasicLocale.basicText,{"font-color":"#303541"},{"for":this.id+"_basicData",type:"label"}),n=ej.buildTag("div.e-basic-option-wrap","",{},{}),t=ej.buildTag("div.e-basic-option-color-wrap","",{},{}),e=ej.buildTag("input.e-basic-option-color-picker","",{},{id:this.id+"_seriespalette__LabelValue_colorpicker"}),i=ej.buildTag("div.e-basic-option-btn-wrap","",{},{}),r;return t.append(e),r=ej.buildTag("button.e-edit-button-basic-settings e-dbrd-hand-cursor","",{},{id:this.id+"_edit_basic_btn"}),i.append(r),n.append(t,i),u.append(f,n)},n.prototype.getAdvance=function(){var i=ej.buildTag("div.e-advance-row","",{},{id:this.id+"_advanceRow_table"}),n=ej.buildTag("div.e-advance-option-wrap","",{},{}),r=ej.buildTag("label.e-advance-settings-condition-label",this.dashboardDesigner.locale.colorCustomBasicLocale.advancedConditionalFormatting,{"font-color":"#303541"},{"for":this.id+"_color_formatting_label1",type:"label"}),t;return n.append(r),t=ej.buildTag("button.e-custom-color-formatting-button","",{},{id:this.id+"_advance_settings_button"}),n.append(t),i.append(n)},n.prototype.renderElements=function(){var n=this.colorContainer.find(".e-basic-option-color-picker"),t=this.colorContainer.find(".e-color-custom-ul"),i=this.colorContainer.find(".e-edit-button-basic-settings"),r=this.colorContainer.find(".e-number-radio-btn"),u=this.colorContainer.find(".e-text-radio-btn"),f=this.colorContainer.find(".e-custom-color-formatting-button");n.ejColorPicker({value:this.defaultColor,cssClass:"e-designer-ejwidgets-colorpicker e-designer-content-label",select:$.proxy(this.onValueChange,this),width:"40px",height:"26px",modelType:"palette",palette:"basicpalette"});this.isColorSupportForText&&(r.ejRadioButton({checked:!0,change:$.proxy(this.numberChooser,this),cssClass:"e-designer-radiobtn",name:"Category"}),u.ejRadioButton({checked:!1,change:$.proxy(this.textChooser,this),cssClass:"e-designer-radiobtn",name:"Category"}));t.ejListBox({datasource:this.bindedColumnsList,fields:{text:"DisplayName",id:"UniqueColumnName"},width:"200",height:"230",selectedIndex:0,select:$.proxy(this.updateIndex,this),cssClass:"e-dbrd-control"});i.ejButton({text:this.dashboardDesigner.locale.colorCustomAdvanceLocale.editButtonText,enabled:!0,showRoundedCorner:!0,size:"mini",width:"100px",height:"26px",click:$.proxy(this.editColumnCondition,this,!0)});f.ejButton({text:this.dashboardDesigner.locale.colorCustomBasicLocale.addConditions,enabled:!0,showRoundedCorner:!0,size:"mini",width:"130px",height:"28px",click:$.proxy(this.editCondition,this,!0)});this.colorContainer.off("click",".e-advancecondition-link",$.proxy(this.editCondition,this));this.colorContainer.on("click",".e-advancecondition-link",$.proxy(this.editCondition,this))},n.prototype.onValueChange=function(n){var t=this.getColorSettings();ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.value)||(t[this.selectedColumnIndex].DefaultSettings.DefaultColors[0].Color=n.value,t[this.selectedColumnIndex].DefaultSettings.DefaultColors[0].IsEdited=!0);this.updateWidgetInfo(t)},n.prototype.populateColumnsForColorSettings=function(){var n=this.colorContainer.find("#"+this.id+"_numberData").data("ejRadioButton");this.isColorSupportForText?this.updateFiledList(!ej.isNullOrUndefined(n)&&n.model.checked?this.measureColumnsList:this.dimensionColumnsList):this.updateFiledList(this.bindedColumnsList);this.updatebasicAdvancePanel()},n.prototype.updateFiledList=function(n){var t=this.colorContainer.find("#"+this.id+"_column_list").data("ejListBox");this.bindedColumnsList.length<=this.selectedColumnIndex&&(this.selectedColumnIndex=0);ej.isNullOrUndefined(t)||(t.option("dataSource",n),t.option("fields",{id:"UniqueColumnName",text:"DisplayName"}),t.option("selectedIndex",this.selectedColumnIndex))},n.prototype.numberChooser=function(){this.colorContainer.find(".e-basic-option-color-wrap").css("display","block");this.colorContainer.find(".e-basic-option-btn-wrap").css("display","none");this.populateColumnsForColorSettings()},n.prototype.textChooser=function(){this.colorContainer.find(".e-basic-option-color-wrap").css("display","none");this.colorContainer.find(".e-basic-option-btn-wrap").css("display","block");this.populateColumnsForColorSettings()},n.prototype.updateIndex=function(n){ej.isNullOrUndefined(n)||n.index===-1||(this.selectedColumnIndex=n.index);this.updatebasicAdvancePanel()},n.prototype.updatebasicAdvancePanel=function(){var t=this.getColorSettings(),n,i;!ej.isNullOrUndefined(t)&&t.length>0&&this.selectedColumnIndex>-1&&(n=t[this.selectedColumnIndex],this.isAdvanceEnable?!ej.isNullOrUndefined(n.AdvancedColorSettings)&&!ej.isNullOrUndefined(n.AdvancedColorSettings.Ranges)&&n.AdvancedColorSettings.Ranges.length>0&&this.showAdvance():n.AdvancedColorSettings=null,this.isBasicEnable?(this.showBasic(),i=!ej.isNullOrUndefined(n.DefaultSettings)&&n.DefaultSettings.DefaultColors.length>0&&!ej.isNullOrUndefined(n.DefaultSettings.DefaultColors[0].Color)&&n.DefaultSettings.DefaultColors[0].Color!==""?n.DefaultSettings.DefaultColors[0].Color:this.defaultColor,this.updateBasicColorPickerVal(i)):n.DefaultSettings=null)},n.prototype.updateBasicColorPickerVal=function(n){var t=this.colorContainer.find("#"+this.id+"_seriespalette__LabelValue_colorpicker").data("ejColorPicker"),i;ej.isNullOrUndefined(t&&n!=="")||(i=t.model.select,t.option("select",null),t.option("value",n),t.option("select",i))},n.prototype.editCondition=function(){var u=ejDashboardDesigner.getInstance("ColorCustomizationAdvanceSettings"),n=null,r=this.colorContainer.find("#"+this.id+"_numberData").data("ejRadioButton"),t=null,i;this.isColorSupportForText?(t=this.getSelectedColorSettings(!ej.isNullOrUndefined(r)&&r.model.checked),n={selectedColumn:t.SelectedColumn,colorFields:this.colorFields,advancedColorSettings:t.AdvancedColorSettings,dataSetId:this.datasetId}):(i=this.getColorSettings(),n={selectedColumn:i[this.selectedColumnIndex].SelectedColumn,colorFields:this.colorFields,advancedColorSettings:i[this.selectedColumnIndex].AdvancedColorSettings,dataSetId:this.datasetId});u.openAdvanceModeDlg(this,"updateAdvanceSettingsVal",n)},n.prototype.getColorSettings=function(){var n=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]),t;if(!ej.isNullOrUndefined(n))return t=n.getJson(),this.copy(t.ColorSets.ColorSettingsList)},n.prototype.getSelectedColorSettings=function(n){var t=this,i=this.getColorSettings();return i.filter(function(i){return i.SelectedColumn.UniqueColumnName===(n?t.measureColumnsList[t.selectedColumnIndex].UniqueColumnName:t.dimensionColumnsList[t.selectedColumnIndex].UniqueColumnName)})[0]},n.prototype.editColumnCondition=function(){var r=ejDashboardDesigner.getInstance("ColorCustomizationBasicSettings"),t=null,i=this.colorContainer.find("#"+this.id+"_numberData").data("ejRadioButton"),n=null;this.isColorSupportForText&&(n=this.getSelectedColorSettings(!ej.isNullOrUndefined(i)&&i.model.checked),t={selectedColumn:n.SelectedColumn,colorFields:this.colorFields,defaultColorSettings:n.DefaultSettings});r.openBasicSettingSDialog(this,"updateBasicSettingsVal",t,this.dataGroupInfo)},n.prototype.updateBasicSettingsVal=function(n,t){var r=this.getColorSettings(),i;this.isColorSupportForText&&(i=r.filter(function(n){return n.SelectedColumn.UniqueColumnName===t.UniqueColumnName})[0],ej.isNullOrUndefined(i)||(i.DefaultSettings=n))},n.prototype.updateAdvanceSettingsVal=function(n,t){var i=this.getColorSettings(),r;this.isColorSupportForText?(r=i.filter(function(n){return n.SelectedColumn.UniqueColumnName===t.UniqueColumnName})[0],ej.isNullOrUndefined(r)||(r.AdvancedColorSettings=n)):i[this.selectedColumnIndex].AdvancedColorSettings=n;!ej.isNullOrUndefined(n)&&n.Ranges.length>0?this.setTextForButton(!0):this.setTextForButton(!1);this.updateWidgetInfo(i)},n.prototype.setTextForButton=function(n){var t=this.colorContainer.find(".e-custom-color-formatting-button");t.length>0&&!ej.isNullOrUndefined(t.ejButton())&&t.ejButton().text(n?this.dashboardDesigner.locale.colorCustomBasicLocale.modifyConditions:this.dashboardDesigner.locale.colorCustomBasicLocale.addConditions)},n.prototype.updateWidgetInfo=function(n){var t=ej.DashboardUtil.getWidgetInstance(ejDashboardDesigner.getInstance("DesignPanel").selectedReportItems[0]);ej.DashboardUtil.invokeMethod(t,"updatePropertyChange",["ColorSet",null,n])},n}();window.ej.createObject("ej.DashboardDesignerUtility.ColorCustomization",InternalColorCustomization,window);InternalColorCustomizationAdvanceSettings=function(){function n(){this.dashboardDesigner=null;this.colorFields=[];this.isMeasure=!0;this.measureFields=[];this.dimensionFields=[];this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id+"_color_customization_advance_settings";this.renderAdvanceSettingWidnow();this.wireEvents();this.multiSelectionComboBox=ejDashboardDesigner.getInstance("ColorCustomizationInclusionSelection");this.dataSet=ejDashboardDesigner.getInstance("DataSet")}return Object.defineProperty(n,"ColorCustomizationAdvanceSettings",{get:function(){return(this.colorCustomizationAdvanceSettings===null||this.colorCustomizationAdvanceSettings===undefined)&&(this.colorCustomizationAdvanceSettings=new ej.DashboardDesignerUtility.ColorCustomizationAdvanceSettings),this.colorCustomizationAdvanceSettings},enumerable:!0,configurable:!0}),n.prototype.renderAdvanceSettingWidnow=function(){var n,t,i,r,u,f;this.dialogDiv=ej.buildTag("div.e-userselect","",{},{id:this.id});n=ej.buildTag("div.e-userselect e-color-custom-advance-container e-dbrd-control","",{},{id:this.id+"_advance_settings_container"});this.contentDiv=ej.buildTag("div.e-color-custom-advance-content","",{},{id:this.id+"_advance_settings_content"});this.headerRow=ej.buildTag("div.e-color-custom-header-field","",{display:"none"},{});this.conditionContainer=ej.buildTag("div.e-advance-condition-container","",{},{});this.contentDiv.append(this.headerRow,this.conditionContainer);n.append(this.contentDiv);this.dialogDiv.append(n);this.dialogObj=this.dialogDiv.ejDialog({title:this.dashboardDesigner.locale.colorCustomBasicLocale.advanceText,width:830,height:"auto",minWidth:830,minHeight:530,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,enableAnimation:!1,containment:this.dashboardDesigner._id,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",close:$.proxy(this.closeDialog,this)}).data("ejDialog");this.footerTag=$("#"+this.id+"_foot");t=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_advance_settings_cancel"});i=ej.buildTag("button.e-dbrd-hand-cursor","",{float:"right"},{id:this.id+"_advance_settings_save"});this.footerTag.append(t,i);r=this.dashboardDesigner.locale.dialogOptions;i.ejButton({text:r.saveButtonText,showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.saveBtnClick,this)});t.ejButton({text:r.cancelButtonText,showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.dialogClose,this)});u=[{text:SummaryType.SUM},{text:SummaryType.AVG},{text:SummaryType.COUNT},{text:SummaryType.MIN},{text:SummaryType.MAX},{text:SummaryType.COUNTD},{text:SummaryType.VAR}];f=[{text:"Value"},{text:"Percent"}];this.renderDrpDwn(this.headerRow.find(".e-adance-basedon-drpdwn"),null);this.renderDrpDwn(this.headerRow.find(".e-adance-aggregation-drpdwn"),u);this.renderDrpDwn(this.headerRow.find(".e-adance-format-drpdwn"),f);this.ejWaitingIndicator=n.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-designer-loader"}).data("ejWaitingPopup");n.ejScroller({height:"493px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});this.scrollerObj=n.data("ejScroller");ej.isNullOrUndefined(this.dialogObj)||this.dialogObj.open();ej.isNullOrUndefined(this.scrollerObj)||this.scrollerObj.refresh()},n.prototype.renderBasedOnTemplate=function(){return"<div class='e-header-field-wrap e-header-basedon-div'><label class ='e-custom-color-basedon-label e-header-row-element'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.basedOn+"<\/label><div class='e-adance-basedon-drpdwn-wrap e-header-row-element'><input id="+this.id+"_advance_dlg_basedon-drpdwn type='text' class ='e-adance-basedon-drpdwn'/><\/div><\/div>"},n.prototype.renderAggregationTemplate=function(){return"<div class='e-header-field-wrap e-header-aggregation-div'><label class ='e-custom-color-aggregation-label e-header-row-element'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.aggregation+"<\/label><div class='e-adance-aggregation-drpdwn-wrap e-header-row-element'><input id="+this.id+"_advance_dlg_aggregation-drpdwn type='text' class ='e-adance-aggregation-drpdwn'/><\/div><\/div>"},n.prototype.renderFormatTemplate=function(){return"<div class='e-header-field-wrap e-header-format-div'><label class ='e-custom-color-format-label e-header-row-element'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.formatText+"<\/label><div class='e-adance-format-drpdwn-wrap e-header-row-element'><input id="+this.id+"_advance_dlg_format-drpdwn type='text' class ='e-adance-format-drpdwn'/><\/div><\/div>"},n.prototype.renderNumberFormattingTemplate=function(){return"<div class='e-header-field-wrap e-header-number-formating-div'><div class ='e-custom-color-numberformat-icon e-reportdesigner-number-format-settings e-header-row-element'><\/div><div class='e-adance-numberformat-wrap e-header-row-element'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.numberFormating+"<\/div><\/div>"},n.prototype.renderDrpDwn=function(n,t){n.ejDropDownList({fields:{text:"text",value:"text"},dataSource:t,selectedIndex:0,width:"120px",height:"28px",change:$.proxy(this.onDropDownChange,this),cssClass:"e-designer-ejwidgets e-dbrd-control"})},n.prototype.onDropDownChange=function(){var n,r,t,i,f;if(!this.isMeasure){n=this.dialogDiv.find(".e-condition-inclusion-value-dimension");r=this.dialogDiv.find("#"+n.attr("id")+"_multi_select_dropDown_text");r.html(this.dashboardDesigner.locale.colorCustomAdvanceLocale.selectAny);var u=this.dialogDiv.find(".e-adance-basedon-drpdwn").data("ejDropDownList"),e=u.getSelectedValue(),o=u.getSelectedItem(),s=$(o).text();for(t=0;t<n.length;t++)i=$(n[t]).attr("id"),f=this.multiSelectionComboBox.getMultiSelectionComboBox(i),this.multiSelectionComboBox.resetMultiSelectionComboInfo(i),f.attr({"data-fieldValue":e,"data-fieldText":s})}},n.prototype.openFormatDialog=function(){var t=this,n=[];n.formatProperties=$.isEmptyObject(this.internalAdvanceModeObj)?new MeasureFormatting:this.internalAdvanceModeObj.MeasureFormatSettings;ejDashboardDesigner.getInstance("FormatDialog").openFormatDialog(n,function(n){t.measureFormating={Culture:n.formatProperties.Culture,DecimalPoints:n.formatProperties.DecimalPoints,FormatType:n.formatProperties.FormatType,Unit:n.formatProperties.Unit,Suffix:n.formatProperties.Suffix,Prefix:n.formatProperties.Prefix}})},n.prototype.renderConditiondiv=function(n,t,i){var u=ej.buildTag("div.e-advanc-condition-wrap","",{},{"data-conditionId":this.dsId+"_condition_"+t,"data-condition-num":t}),r=ej.buildTag("div.e-advanc-condition-content",this.getConditionField(t,i),{},{}),f=ej.buildTag("div.e-advanc-color-field-content",this.getColorField(t,i),{},{});u.append(r,f);n.append(u);this.renderConditionTypeDropDwn(r.find(".e-condition-type-drpdwn"),t,i);this.renderColorFieldContents(f,i);this.conditionNumbers.push(t);this.renderCasesensitiveCheckbox(r.find(".e-condition-casesensitive-chck"),i);this.isMeasure||this.renderMultiSelectionCombobox(r.find(".e-condition-inclusion-value-dimension"),this.id+"_inclusion_"+t,this.datasetId,i);this.isMeasure?(r.find(".e-condition-value-start").css({display:"inline-block"}),ej.isNullOrUndefined(i)||i.MeasureCondition!==CMeasureConditionType.CBetween&&i.MeasureCondition!==CMeasureConditionType.CNotBetween||r.find(".e-condition-value-end").css({display:"inline-block"}),r.find(".e-condition-value-dimension").css({display:"none"}),r.find(".e-condition-inclusion-value-dimension").css({display:"none"}),this.dialogDiv.find("#ej"+this.id+"_casesensitive_checkbox_"+t).css({display:"none"})):(r.find(".e-condition-value-start").css({display:"none"}),r.find(".e-condition-value-end").css({display:"none"}),this.dialogDiv.find("#ej"+this.id+"_casesensitive_checkbox_"+t).css({display:"inline-block"}),ej.isNullOrUndefined(i)||i.DimensionCondition!==CDimensionConditionType.Inclusion?(r.find(".e-condition-inclusion-value-dimension").css({display:"none"}),r.find(".e-condition-value-dimension").css({display:"inline-block"}),r.find("#ej"+this.id+"_casesensitive_checkbox_"+t).css({display:"inline-block"})):(r.find(".e-condition-inclusion-value-dimension").css({display:"inline-block"}),r.find(".e-condition-value-dimension").css({display:"none"}),r.find("#ej"+this.id+"_casesensitive_checkbox_"+t).css({display:"none"})))},n.prototype.renderMultiSelectionCombobox=function(n,t,i,r){var u,f;this.multiSelectionComboBox.renderMultiSelectionComboBox(n,t,this.datasetId);u=this.multiSelectionComboBox.getMultiSelectionComboBox(t);ej.isNullOrUndefined(r)||(f=this.dialogDiv.find("#"+n.attr("id")+"_multi_select_dropDown_text"),f.html(r.DimensionConditionalValue.join()),this.multiSelectionComboBox.setListboxFilters(t,r.DimensionConditionalValue));var e=this.dialogDiv.find(".e-adance-basedon-drpdwn").data("ejDropDownList"),o=e.getSelectedValue(),s=e.getSelectedItem(),h=$(s).text();u.attr({"data-fieldValue":o,"data-fieldText":h})},n.prototype.getConditionField=function(n,t){return"<div class= 'e-color-custom-condition-field-wrap'><label class = 'e-color-custom-condition-name-label'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.conditionNameLabel+"<\/label><input type='text' class='e-textbox e-condition-name-textbox' value='"+this.getConditionLabelName(n,t)+"'/><\/div><div class= 'e-color-custom-condition-field-wrap'><label class = 'e-color-custom-condition-type-label'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.conditionTypeLabel+"<\/label><div class='e-condition-type-drpdwn-wrap'><input id="+this.id+"_condition_type_drpdwn_"+n+" data-condition-number="+n+" type ='text' class= 'e-condition-type-drpdwn'/><\/div><\/div><div class= 'e-color-custom-condition-field-wrap'><label class = 'e-color-custom-condition-value-label'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.conditionValueLabel+"<\/label><input type='number' class='e-textbox e-condition-value-textbox e-condition-value-start' value ="+this.getStartRangeValue(t)+" placeholder ='Value here'/><input class='e-textbox e-condition-value-textbox e-condition-value-dimension' value ="+this.getDimensionValue(t)+" placeholder ='Name here'/><div id="+this.id+"_inclusion_"+n+" class='e-condition-inclusion-value-dimension' style='width:130px;'><\/div><\/div><div class= 'e-color-custom-condition-field-wrap'><div class = 'e-color-custom-condition-close'><\/div><input type='number' class='e-textbox e-condition-value-textbox e-condition-value-end' value ="+this.getEndRangeValue(t)+" placeholder ='To'/><div class ='e-color-select-warning' title ='"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.colorSelectErrMsg+"'><\/div><input type='checkbox' id="+this.id+"_casesensitive_checkbox_"+n+" class='e-textbox e-condition-casesensitive-chck'/><\/div>"},n.prototype.getConditionLabelName=function(n,t){return ej.isNullOrUndefined(t)?this.dashboardDesigner.locale.colorCustomAdvanceLocale.conditionText+n:t.RangeLabel},n.prototype.getStartRangeValue=function(n){return ej.isNullOrUndefined(n)?"''":n.StartRange},n.prototype.getEndRangeValue=function(n){return ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.EndRange)?"''":n.EndRange},n.prototype.getDimensionValue=function(n){return ej.isNullOrUndefined(n)||ej.isNullOrUndefined(n.DimensionConditionalValue)||n.DimensionConditionalValue.length===0?"''":n.DimensionConditionalValue[0]},n.prototype.renderConditionTypeDropDwn=function(n,t,i){if(n.ejDropDownList({fields:{text:"text",value:"value"},dataSource:this.isMeasure?this.getMeasureFiledTypeDS():this.getDimensionFiledTypeDS(),selectedIndex:ej.isNullOrUndefined(i)?0:this.isMeasure?i.MeasureCondition:i.DimensionCondition,cssClass:"e-designer-ejwidgets e-dbrd-control",width:"150px",height:"28px",change:$.proxy(this.conditionDrpDwnChange,this,t,i),enabled:!0,showRoundedCorner:!0}),this.isMeasure&&!ej.isNullOrUndefined(i)&&(i.MeasureCondition===CMeasureConditionType.CBetween||i.MeasureConditon===CMeasureConditionType.CNotBetween)){var r=n.parents(".e-advanc-condition-content").find(".e-condition-value-end");r.css("display","block")}},n.prototype.conditionDrpDwnChange=function(n,t,i){this.isMeasure?this.measureConditionDrpDwnChange(n,i):this.DimensionConditionDrpDwnChange(n,t,i)},n.prototype.DimensionConditionDrpDwnChange=function(n,t,i){if(!ej.isNullOrUndefined(i)){var r=this.conditionContainer.find(".e-condition-type-drpdwn[data-condition-number ="+n+"]"),e=r.parents(".e-advanc-condition-content").find(".e-condition-value-start"),o=r.parents(".e-advanc-condition-content").find(".e-condition-value-end"),u=r.parents(".e-advanc-condition-content").find(".e-condition-value-dimension"),f=r.parents(".e-advanc-condition-content").find(".e-condition-inclusion-value-dimension"),s=r.parents(".e-advanc-condition-content").find("#ej"+this.id+"_casesensitive_checkbox_"+n);e.css("display","none");o.css("display","none");i.text===CDimensionConditionType[CDimensionConditionType.Inclusion]?(u.css("display","none"),f.css("display","block"),s.css("display","none")):(u.css("display","block"),f.css("display","none"),s.css("display","block"),u.attr("placeholder",this.dashboardDesigner.locale.colorCustomAdvanceLocale.nameHere));e.val("");o.val("");u.val("");f.val("")}},n.prototype.measureConditionDrpDwnChange=function(n,t){if(!ej.isNullOrUndefined(t)){var i=this.conditionContainer.find(".e-condition-type-drpdwn[data-condition-number ="+n+"]"),u=i.parents(".e-advanc-condition-content").find(".e-condition-value-start"),r=i.parents(".e-advanc-condition-content").find(".e-condition-value-end"),f=i.parents(".e-advanc-condition-content").find(".e-condition-value-dimension"),e=i.parents(".e-advanc-condition-content").find(".e-condition-inclusion-value-dimension");f.css("display","none");e.css("display","none");f.val("");e.val("");t.selectedValue===ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)||t.selectedValue===ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotBetween)?(u.attr("placeholder",this.dashboardDesigner.locale.colorCustomAdvanceLocale.from),r.css("display","block")):(u.attr("placeholder",this.dashboardDesigner.locale.colorCustomAdvanceLocale.valueHere),r.css("display","none"),r.val(""))}},n.prototype.getMeasureFiledTypeDS=function(){return[{text:"Greater than",value:ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CGreaterThan)},{text:"Greater than or Equal to",value:ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CGreaterThanOrEqualTo)},{text:"Less than",value:ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CLessThan)},{text:"Less than or Equal to",value:ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CLessThanOrEqalTo)},{text:"Equal to",value:ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CEquals)},{text:"Not equal to",value:ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotEquals)},{text:"Between",value:ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)},{text:"Not between",value:ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotBetween)},]},n.prototype.getDimensionFiledTypeDS=function(){return[{text:"Starts With",value:ej.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Startswith)},{text:"Ends With",value:ej.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Endswith)},{text:"Contains",value:ej.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Contains)},{text:"Equals",value:ej.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Equals)},{text:"Not Equals",value:ej.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.NotEquals)},{text:"Inclusion",value:ej.DashboardDesignerUtility.Serialization.enumToString(CDimensionConditionType,CDimensionConditionType.Inclusion)}]},n.prototype.renderCasesensitiveCheckbox=function(n,t){n.ejCheckBox({text:this.dashboardDesigner.locale.colorCustomAdvanceLocale.casesensitive,checked:ej.isNullOrUndefined(t)?!0:t.IsCaseSensitive})},n.prototype.getColorField=function(n){var t,i;for(this.colorFields=!ej.isNullOrUndefined(this.colorFields)&&this.colorFields.length>0?this.colorFields:this.getDefaultColorFields(),t=null,i=0;i<this.colorFields.length;i++)t=ej.isNullOrUndefined(t)?this.rendercolorFields(this.colorFields[i],n):t+this.rendercolorFields(this.colorFields[i],n);return t},n.prototype.getDefaultColorFields=function(){return[{Name:WidgetProperty.BackgroundColor,DisplayName:"Background",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.BorderColor,DisplayName:"Border",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.TitleColor,DisplayName:"Title",ColorPicker:ColorSetColorPickers.NormalColorPicker},{Name:WidgetProperty.FillColor,DisplayName:"Range",ColorPicker:ColorSetColorPickers.GradientColorPicker},{Name:WidgetProperty.Icon,DisplayName:"Icon",ColorPicker:ColorSetColorPickers.IconColorPicker}]},n.prototype.rendercolorFields=function(n,t){var i=n.Name===WidgetProperty.Icon?this.getIcon(n.Name,t):"<div><\/div>";return"<div class='e-color-custom-color-field-wrap'>"+this.getCheckBox(n.Name,n.DisplayName,n.ColorPicker,t)+i+this.getColorPicker(n.Name,t,n.ColorPicker)+"<\/div>"},n.prototype.getCheckBox=function(n,t,i,r){var u=ej.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,n),f=ej.DashboardDesignerUtility.Serialization.enumToString(ColorSetColorPickers,i);return"<div class= 'e-color-custom-color-field-chck-wrap'><input type='chekbox' id="+this.id+"_"+n+"_chkbox_"+r+" class='e-custom-color-checkbox' data-name='"+u+"'data-displayname='"+t+"'data-colorpicker='"+f+"'/><\/div>"},n.prototype.getIcon=function(n,t){return"<div class= 'e-color-custom-color-field-chck-wrap e-icon-custom-color-field'><input type='text' id="+ +this.id+"_"+n+"_drpdwn_"+t+" class='e-condition-icon-dropdown'/><\/div>"},n.prototype.getColorPicker=function(n,t,i){var r=n===WidgetProperty.Icon?"e-color-custom-color-field-colorpicker-wrap e-condition-icon-colorpicker-wrap":"e-color-custom-color-field-colorpicker-wrap",u="<div id="+this.id+"_range_colorpicker_"+t+" class='e-condition-range-colorpicker e-custom-colorpicker'><\/div>",f="<input type='text' id="+this.id+"_"+n+"_colorpicker_"+t+" class='e-custom-colorpicker'/>",e=ColorSetColorPickers.GradientColorPicker===i?u:f;return"<div class= '"+r+"'>"+e+"<\/div>"},n.prototype.renderColorFieldContents=function(n,t){for(var h,c="",u="",o=n.find(".e-custom-color-checkbox"),i={},s=0;s<o.length;s++){var r=$(o[s]),f=r.parents(".e-color-custom-color-field-wrap").find(".e-custom-colorpicker"),e=ej.DashboardDesignerUtility.Serialization.stringtoEnum(ColorSetColorPickers,r.attr("data-colorpicker")),l=ej.DashboardDesignerUtility.Serialization.stringtoEnum(WidgetProperty,r.attr("data-name"));u=r.attr("data-name");c=r.attr("data-displayname");i=this.getCheckboxSelectionVal(t,l);o.length===1&&(i.isChecked=!0);r.ejCheckBox({name:u,text:c,checked:i.isChecked,change:$.proxy(e===ColorSetColorPickers.GradientColorPicker?this.rangeCheckBoxChange:this.checkBoxChange,this)});e===ColorSetColorPickers.NormalColorPicker?this.renderColorPicker(f,i,r,u):e===ColorSetColorPickers.GradientColorPicker?this.renderRangePalette(f,i):e===ColorSetColorPickers.IconColorPicker&&(this.renderColorPicker(f,i,r,u),this.renderIconFieldDropDownContent(n.find(".e-condition-icon-dropdown"),i));i.isChecked||(h=f.data("ejColorPicker"),ej.isNullOrUndefined(h)||h.disable())}},n.prototype.colorChange=function(n,t,i){t===ej.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,WidgetProperty.Icon)&&n.find(".e-icon-custom-color-field .e-selected-drpdwn-icon .e-icon-collection").css("color",i.value)},n.prototype.renderColorPicker=function(n,t,i,r){n.ejColorPicker({value:t.startColorValue,cssClass:"e-designer-ejwidgets-colorpicker e-designer-content-label e-color-custom-colorpicker",select:$.proxy(this.colorChange,this,i.parents(".e-color-custom-color-field-wrap"),r),modelType:"palette",palette:"basicpalette"})},n.prototype.renderRangePalette=function(n,t){var i=n.attr("id"),f,o,s,e,u,r;for(t.isGradient?$(n).attr({"data-type":"Gradient","data-startcolor":t.startColorValue,"data-endcolor":t.endColorValue}):$(n).attr({"data-type":"Flat","data-startcolor":t.startColorValue,"data-endcolor":""}),f="",$(n).attr("data-type")==="Flat"&&(f=$(n).attr("data-startcolor")),$(n).attr("data-type")==="Gradient"&&(f="linear-gradient("+$(n).attr("data-startcolor")+","+$(n).attr("data-endcolor")+")"),n.css({height:"28px",width:"70px",border:"1px solid #B3B3B3","border-radius":"3px",display:"inline-block","box-sizing":"border-box"}),o="<div id="+i+"_rangeColor class='e-range-color' data-id="+i+" style='height:17px;width:17px;background: "+f+";float:left;border-radius:3px;top:4px;left:4px;position:relative;'><\/div><div id="+i+"_rangeArrow class='e-range-icon e-icon e-down-arrow' data-id="+i+" style ='height:14px;width:14px;float:right;margin: 7px 4px 0px 0px;border-radius: 4px;'><\/div>",s="<div id="+i+"_colorPicker class='e-color-picker' style='height:304px;width:246px;position:absolute;border:1px solid #FFFFFF;box-shadow: 0 4px 6px 0 rgba(0,0,0,0.16);display:none;background:#FFFFFF;'><div id="+i+"_colorType style='height:26.1px;width:230px;border:1px solid #CCCCCC;border-radius:3px;margin:10px 0px 15px 7px;'><div id="+i+"_flatType class='e-flat-type' data-id="+i+" style='height:26.1px;width:115px;line-height: 26.1px;border-radius:2px 1px 1px 2px;background-color:#EEEEEE;font-size: 12px;text-align:center;float: left;font-family: Roboto,Segoe UI,Noto Sans,Ubuntu,Droid Sans,Helvetica Neue,Arial;'>Flat<\/div><div id="+i+"_gradientType class='e-gradient-type' data-id="+i+" style='height:26.1px;width:115px;line-height: 26.1px;font-size: 12px;text-align:center;float: right;font-family: Roboto,Segoe UI,Noto Sans,Ubuntu,Droid Sans,Helvetica Neue,Arial;'>Gradient<\/div><\/div><div id="+i+"_flatColorPalette data-id="+i+" style='height:206px;width:154px;margin-left: 7px;display:block'><\/div><div id="+i+"_gradientColorPalette style='height:240px;width:230px;margin-left: 7px;display:none'><\/div><\/div>",$(n).append(o),$("body").append(s),e=[{code:"linear-gradient(#FFB199 , #FF0844)",startValue:"#FFB199",endValue:"#FF0844"},{code:"linear-gradient(#00F2FE, #4FACFE)",startValue:"#00F2FE",endValue:"#4FACFE"},{code:"linear-gradient(#009EFD, #2AF598)",startValue:"#009EFD",endValue:"#2AF598"},{code:"linear-gradient(#AC32E4, #4801FF)",startValue:"#AC32E4",endValue:"#4801FF"},{code:"linear-gradient(#FBAB7E, #F7CE68)",startValue:"#FBAB7E",endValue:"#F7CE68"},{code:"linear-gradient(#424242, #7B7B7B)",startValue:"#424242",endValue:"#7B7B7B"},{code:"linear-gradient(#FEAFA8, #F5EFEF)",startValue:"#FEAFA8",endValue:"#F5EFEF"},{code:"linear-gradient(#C2E9FB, #A1C4FD)",startValue:"#C2E9FB",endValue:"#A1C4FD"},{code:"linear-gradient(#96E6A1, #D4FC79)",startValue:"#96E6A1",endValue:"#D4FC79"},{code:"linear-gradient(#FBC2EB, #A18CD1)",startValue:"#FBC2EB",endValue:"#A18CD1"},{code:"linear-gradient(#FBD397, #FFECD2)",startValue:"#FBD397",endValue:"#FFECD2"},{code:"linear-gradient(#F9F9F9, #D0CECE)",startValue:"#F9F9F9",endValue:"#D0CECE"},{code:"linear-gradient(#FE9A8B, #F78CA0)",startValue:"#FE9A8B",endValue:"#F78CA0"},{code:"linear-gradient(#9EFBD3, #45D4FB)",startValue:"#9EFBD3",endValue:"#45D4FB"},{code:"linear-gradient(#8DDAD5, #00CDAC)",startValue:"#8DDAD5",endValue:"#00CDAC"},{code:"linear-gradient(#7028E4, #E5B2CA)",startValue:"#7028E4",endValue:"#E5B2CA"},{code:"linear-gradient(#FFB199, #E78208)",startValue:"#FFB199",endValue:"#E78208"},{code:"linear-gradient(#C9CCD3, #E3E5E8)",startValue:"#C9CCD3",endValue:"#E3E5E8"},{code:"linear-gradient(#A445B2, #FF0066)",startValue:"#A445B2",endValue:"#FF0066"},{code:"linear-gradient(#00C6FB, #005BEA)",startValue:"#00C6FB",endValue:"#005BEA"},{code:"linear-gradient(#0BA360, #3CBA92)",startValue:"#0BA360",endValue:"#3CBA92"},{code:"linear-gradient(#764BA2, #667EEA)",startValue:"#764BA2",endValue:"#667EEA"},{code:"linear-gradient(#F09819, #FF5858)",startValue:"#F09819",endValue:"#FF5858"},{code:"linear-gradient(#596164, #868F96)",startValue:"#596164",endValue:"#868F96"},{code:"linear-gradient(#C43A30, #562E69)",startValue:"#C43A30",endValue:"#562E69"},{code:"linear-gradient(#0C3483, #6B8CCE)",startValue:"#0C3483",endValue:"#6B8CCE"},{code:"linear-gradient(#53957A, #013929)",startValue:"#53957A",endValue:"#013929"},{code:"linear-gradient(#2E0784, #7039E5)",startValue:"#2E0784",endValue:"#7039E5"},{code:"linear-gradient(#B12A5B, #5D1510)",startValue:"#B12A5B",endValue:"#5D1510"},{code:"linear-gradient(#485563, #29323C)",startValue:"#485563",endValue:"#29323C"}],r=0;r<30;r++)$("#"+i+"_gradientColorPalette").append("<div class='e-gradient-color' data-id="+i+" style='width:24px;height:24px;border-radius:2px;float:left;margin: 5px 3px 17px 10px;background-image:"+e[r].code+";' data-startcolor="+e[r].startValue+" data-endcolor="+e[r].endValue+">");if(u=$(n).children(),!ej.isNullOrUndefined(n))if(t.isChecked){for($(n).prop("disabled",!1),r=0;r<u.length;r++)$(u[r]).prop("disabled",!1);$(n).removeClass("e-range-disable")}else{for($(n).prop("disabled",!0),r=0;r<u.length;r++)$(u[r]).prop("disabled",!0);$(n).addClass("e-range-disable")}$("#"+i+"_flatColorPalette").ejColorPicker({value:t.startColorValue,displayInline:!0,modelType:"picker",change:$.proxy(this.onColorChange,this,n)});t.isGradient&&($("#"+i+"_flatColorPalette").css("display","none"),$("#"+i+"_flatType").css("background-color","#FFFFFF"),$("#"+i+"_gradientColorPalette").css("display","block"),$("#"+i+"_gradientType").css("background-color","#EEEEEE"))},n.prototype.onColorChange=function(n,t){$(n).attr({"data-startcolor":t.value,"data-type":"Flat"})},n.prototype.onRangeColorOpen=function(n){var t=$(n.target).attr("data-id")||$(n.target).attr("id");$("#"+t+"_colorPicker").css("display")==="none"?$("#"+t+"_colorPicker").css("display","block"):$("#"+t+"_colorPicker").css("display","none");this.setColorPalettePosition(t);n.stopPropagation();$(document).on("click","body",$.proxy(this.onRangeColorClose,this,t))},n.prototype.setColorPalettePosition=function(n){var t=$("#"+n),i=$("#"+n+"_colorPicker"),r=t.offset(),h=$(document).scrollTop()+$(window).height()-(r.top+$(t).outerHeight()),c=r.top-$(document).scrollTop(),f=i.outerHeight(),e=i.outerWidth(),u=r.left,o=t.outerHeight(),l=(o-t.height())/2,s=3,a=this.getZindexPartial(t,i),v=(f<h||f>c?r.top+o+s:r.top-f-s)-l,y=$(document).scrollLeft()+$(window).width()-u;e>y&&e<u+t.outerWidth()&&(u-=i.outerWidth()-t.outerWidth());i.css({left:u+"px",top:v+"px","z-index":a})},n.prototype.getZindexPartial=function(n,t){var i,u,r;if(!ej.isNullOrUndefined(n)&&n.length>0)return u=n.parents(),r=$("body").children(),!ej.isNullOrUndefined(n)&&n.length>0&&r.splice(r.index(t),1),$(r).each(function(n,t){u.push(t)}),i=Math.max.apply(i,$.map(u,function(n){if($(n).css("position")!=="static")return parseInt($(n).css("z-index"))||1})),!i||i<1e4?i=1e4:i+=1,i},n.prototype.onRangeColorClose=function(n,t){var i=$("#"+n),r;($(t.target).parents(".e-color-picker").length===0||$(t.target).hasClass("e-gradient-selected"))&&($("#"+n+"_colorPicker").css("display","none"),r="",$(i).attr("data-type")==="Flat"&&(r=$(i).attr("data-startcolor"),$("#"+n+"_rangeColor").css("background",r)),$(i).attr("data-type")==="Gradient"&&(r="linear-gradient("+$(i).attr("data-startcolor")+","+$(i).attr("data-endcolor")+")",$("#"+n+"_rangeColor").css("background-image",r)))},n.prototype.onGradientColor=function(n){var t="#"+$(n.target).attr("data-id");$(n.target).addClass("e-gradient-selected");$(t).attr({"data-startcolor":$(n.target).attr("data-startcolor"),"data-endcolor":$(n.target).attr("data-endcolor"),"data-type":"Gradient"})},n.prototype.onGradientChange=function(n){var t=$(n.target).attr("data-id");$("#"+t+"_gradientColorPalette").css("display","block");$("#"+t+"_gradientType").css("background-color","#EEEEEE");$("#"+t+"_flatColorPalette").css("display","none");$("#"+t+"_flatType").css("background-color","#FFFFFF")},n.prototype.onFlatChange=function(n){var t=$(n.target).attr("data-id");$("#"+t+"_flatColorPalette").css("display","block");$("#"+t+"_flatType").css("background-color","#EEEEEE");$("#"+t+"_gradientColorPalette").css("display","none");$("#"+t+"_gradientType").css("background-color","#FFFFFF")},n.prototype.closeDialog=function(){$(".e-color-picker").remove();!ej.isNullOrUndefined(this.ejWaitingIndicator)&&this.ejWaitingIndicator.model.showOnInit&&this.hideLoadingIndicator()},n.prototype.rangeCheckBoxChange=function(n){var u=this.dialogDiv.find("#"+n.model.id),i=u.parents(".e-color-custom-color-field-wrap").find(".e-custom-colorpicker"),r=$(i).children(),t;if(!ej.isNullOrUndefined(i))if(n.isChecked){for($(i).prop("disabled",!1),t=0;t<r.length;t++)$(r[t]).prop("disabled",!1);$(i).removeClass("e-range-disable")}else{for($(i).prop("disabled",!0),t=0;t<r.length;t++)$(r[t]).prop("disabled",!0);$(i).addClass("e-range-disable")}},n.prototype.getCheckboxSelectionVal=function(n,t){var e=!1,r="#0162FF",o="",s=!1,h=this.dashboardDesigner.locale.colorCustomAdvanceLocale.downText,c,f,u,i;if(!ej.isNullOrUndefined(n)&&!ej.isNullOrUndefined(n.PropertyColorPair))for(f=n.PropertyColorPair,u=0;u<f.length;u++)i=f[u],i.WidgetProperties===t&&(e=!0,i.WidgetProperties===WidgetProperty.Icon?(r=i.Image.ImageColor,h=i.Image.ImageURL,c=i.Image.ImageType):i.WidgetProperties===WidgetProperty.FillColor?(r=i.RangeColor.StartColor,o=i.RangeColor.EndColor,s=i.RangeColor.IsGradient):r=i.RangeColor.StartColor);return{isChecked:e,startColorValue:r,endColorValue:o,isGradient:s,selectedIcon:h,iconType:c}},n.prototype.checkBoxChange=function(n){var r=this.dialogDiv.find("#"+n.model.id),u=r.parents(".e-advanc-condition-wrap"),i=r.parents(".e-color-custom-color-field-wrap").find(".e-custom-colorpicker").data("ejColorPicker"),t;ej.isNullOrUndefined(i)||(n.isChecked?(i.enable(),u.removeClass("e-color-select-err")):i.disable());n.model.name===ej.DashboardDesignerUtility.Serialization.enumToString(WidgetProperty,WidgetProperty.Icon)&&(t=r.parents(".e-color-custom-color-field-wrap").find(".e-condition-icon-dropdown").data("ejDropDownList"),ej.isNullOrUndefined(t)||(n.isChecked?(i.disable(),t.enable(),u.removeClass("e-color-select-err"),t.selectItemByIndex(0)):t.disable()))},n.prototype.saveBtnClick=function(){for(var u,i,f,e,r=[],n=this.dialogDiv.find(".e-advanc-condition-wrap"),t=0;t<n.length;t++){if(u=$(n[t]),i=this.colorRangeSettingsInfo(u),ej.isNullOrUndefined(i))return;r.push(i)}f=this.getAggregationVal();e=this.getBasedOnDrpDwnVal(f);this.internalAdvanceModeObj=n.length>0?{IsPercent:this.getFormatDrpdwnVal(n),BasedOn:e,Ranges:r,MeasureFormatSettings:this.measureFormating}:null;this.dialogClose();ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.internalAdvanceModeObj,this.selectedColumn])},n.prototype.getAggregationVal=function(){var n=this.dialogDiv.find(".e-adance-aggregation-drpdwn").data("ejDropDownList");if(!ej.isNullOrUndefined(n))return ej.DashboardDesignerUtility.Serialization.stringtoEnum(SummaryType,n.getSelectedValue())},n.prototype.getBasedOnDrpDwnVal=function(n){var i=this.dialogDiv.find(".e-adance-basedon-drpdwn").data("ejDropDownList"),t;return ej.isNullOrUndefined(i)||(t=i.getSelectedValue()),{UniqueColumnName:t,Key:t,SummaryType:n,SelectedColumnType:this.isMeasure?ColorColumnType.Measure:ColorColumnType.Dimension}},n.prototype.getFormatDrpdwnVal=function(){return!1},n.prototype.colorRangeSettingsInfo=function(n){var t=this.getPropertyColorPairValues(n);if(this.isColorFieldErr(t,n))return null;if(this.isMeasure){var i=this.getMeasureConditionTypeVal(n),o=this.validateRange(!0,n),e=0;return((i===CMeasureConditionType.CBetween||i===CMeasureConditionType.CNotBetween)&&(e=this.validateRange(!1,n)),n.find(".e-range-err").length>0)?null:{StartRange:o,EndRange:e,RangeLabel:this.validateConditionName(n),MeasureCondition:i,PropertyColorPair:t}}var r=this.getDimensionConditionTypeVal(n),u=this.validateText(n,r),s=n.find(".e-condition-casesensitive-chck").data("ejCheckBox"),f=[];return(u!==""&&(r===CDimensionConditionType.Inclusion?f=u.split(","):f.push(u)),n.find(".e-inclusion-err").length>0)?null:{RangeLabel:this.validateConditionName(n),PropertyColorPair:t,DimensionCondition:r,DimensionConditionalValue:f,IsCaseSensitive:s.isChecked()}},n.prototype.validateConditionName=function(n){var t=n.find(".e-condition-name-textbox");return t.val()},n.prototype.isColorFieldErr=function(n,t){return n.length===0?(t.addClass("e-color-select-err"),!0):(t.removeClass("e-color-select-err"),!1)},n.prototype.validateRange=function(n,t){var r=0,i=t.find(n?".e-condition-value-start":".e-condition-value-end");return i.val().trim()===""||n&&parseFloat(i.val())>parseFloat(i.attr("max"))||!n&&parseFloat(i.val())<parseFloat(i.attr("min"))?i.addClass("e-range-err"):(i.removeClass("e-range-err"),r=parseFloat(i.val().trim())),r},n.prototype.validateText=function(n,t){var r="",i;return t===CDimensionConditionType.Inclusion?(i=n.find("#"+n.find(".e-condition-inclusion-value-dimension").attr("id")+"_multi_select_dropDown_text"),i.html()===""||i.html()===this.dashboardDesigner.locale.colorCustomAdvanceLocale.selectAny?n.find(".e-multiselect-dropdown-item").addClass("e-inclusion-err"):(n.find(".e-multiselect-dropdown-item").removeClass("e-inclusion-err"),r=i.html())):(i=n.find(".e-condition-value-dimension"),i.val()===""?i.addClass("e-range-err"):(i.removeClass("e-range-err"),r=i.val())),r},n.prototype.getMeasureConditionTypeVal=function(n){var t=n.find(".e-condition-type-drpdwn").data("ejDropDownList");return ej.DashboardDesignerUtility.Serialization.stringtoEnum(CMeasureConditionType,t.getSelectedValue())},n.prototype.getDimensionConditionTypeVal=function(n){var t=n.find(".e-condition-type-drpdwn").data("ejDropDownList");return ej.DashboardDesignerUtility.Serialization.stringtoEnum(CDimensionConditionType,t.getSelectedValue())},n.prototype.getPropertyColorPairValues=function(n){for(var r=[],u=n.find(".e-color-custom-color-field-wrap"),f=function(i){var c=$(u[i]),l=c.find(".e-custom-color-checkbox").data("ejCheckBox"),f,o,s,h,e;!ej.isNullOrUndefined(l)&&l.isChecked()&&(f=new PropertyColorPair,f.WidgetProperties=ej.DashboardDesignerUtility.Serialization.stringtoEnum(WidgetProperty,l.model.name),o=c.find(".e-custom-colorpicker").data("ejColorPicker"),s=t.colorFields.filter(function(n){return n.Name===f.WidgetProperties})[0],s.ColorPicker===ColorSetColorPickers.GradientColorPicker?(h=c.find(".e-custom-colorpicker"),e=new RangeColor,e.StartColor=$(h).attr("data-startcolor"),e.EndColor=$(h).attr("data-endcolor"),e.IsGradient=$(h).attr("data-type")==="Gradient"?!0:!1,f.RangeColor=e):s.ColorPicker===ColorSetColorPickers.NormalColorPicker?ej.isNullOrUndefined(o)||(f.RangeColor=t.getRangeColor(o)):s.ColorPicker===ColorSetColorPickers.IconColorPicker&&(f.Image=t.getImageSettings(o,n,t.getIconDrpdownVal(n))),r.push(f))},t=this,i=0;i<u.length;i++)f(i);return r},n.prototype.getIconDrpdownVal=function(n){var r=n.find(".e-condition-icon-dropdown"),t,i;return!ej.isNullOrUndefined(r)&&(t=r.attr("icon-type"),!ej.isNullOrUndefined(t))?t:(i=n.find(".e-condition-icon-dropdown").data("ejDropDownList"),!ej.isNullOrUndefined(i))?$(i.getSelectedItem()).attr("data-icon-id"):""},n.prototype.getRangeColor=function(n){var t=new RangeColor;return t.StartColor=n.getValue(),t},n.prototype.getImageSettings=function(n,t,i){var r=new ImageSettings,u;return ej.isNullOrUndefined(n)||(r.ImageColor=n.getValue(),r.ImageURL=i,i==="custom"&&(u=t.find(".e-condition-icon-dropdown"),r.ImageType=ImageType[u.attr("data-type")],r.ImageURL=u.attr("data-value"))),r},n.prototype.dialogClose=function(){this.dialogObj.close()},n.prototype.renderAddConditionDiv=function(){return"<div class='e-color-custom-add-condition-wrap'><div class='e-color-custom-add-condition'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.addConditionText+"<\/div><\/div>"},n.prototype.removeCondition=function(n){var t=$(n.currentTarget).parents(".e-advanc-condition-wrap"),i=parseInt(t.attr("data-condition-num"),10);this.conditionNumbers.indexOf(i)>-1&&this.conditionNumbers.splice(this.conditionNumbers.indexOf(i),1);$(n.currentTarget).parents(".e-advanc-condition-wrap").remove();this.removeImage(t);this.scrollerObj.refresh()},n.prototype.removeImage=function(n){var i=n.find(".e-icon-custom-color-field"),t;i.length>0&&(t=i.find("input.e-condition-icon-dropdown"),ej.isNullOrUndefined(t)||t.attr("data-type")===ImageType[ImageType.Embedded]&&Object.keys(this.dashboardDesigner.colorCustomIconStore).length>0&&delete this.dashboardDesigner.colorCustomIconStore[t.attr("data-value")])},n.prototype.addCondition=function(){var n=0;do n++;while(this.conditionNumbers.indexOf(n)>-1);this.renderConditiondiv(this.conditionContainer,n);ej.isNullOrUndefined(this.scrollerObj)||this.scrollerObj.refresh()},n.prototype.destroy=function(){ej.DashboardUtil.destroyEjObjects($("#"+this.id+"_legend_settings"));$("#"+this.id+"_legend_settings").length>0&&$("#"+this.id+"_legend_settings").remove()},n.prototype.openAdvanceModeDlg=function(n,t,i){this.isMeasure=!0;this.resetFields();this.targetInstance=n;this.targetMethod=t;this.selectedColumn=i.selectedColumn;this.colorFields=i.colorFields;this.dsId=i.selectedColumn.Key;this.datasetId=i.dataSetId;this.getMeasureFields();this.getDimensionFields();this.internalAdvanceModeObj=$.extend(!0,{},i.advancedColorSettings);this.conditionContainer.empty();this.dialogObj.open();this.populateInfo()},n.prototype.showLoadingIndicator=function(){$("#"+this.id+"_advance_settings_container").data("ejWaitingPopup").show()},n.prototype.hideLoadingIndicator=function(){$("#"+this.id+"_advance_settings_container").data("ejWaitingPopup").hide()},n.prototype.updateHeaderProperties=function(){var n,t,i,r;this.isMeasure?(this.dialogDiv.find(".e-header-format-div").css({display:"inline-block"}),this.dialogDiv.find(".e-header-aggregation-div").css({display:"inline-block"}),this.dialogDiv.find(".e-header-number-formating-div").css({display:"none"})):(this.dialogDiv.find(".e-header-format-div").css({display:"none"}),this.dialogDiv.find(".e-header-aggregation-div").css({display:"none"}),this.dialogDiv.find(".e-header-number-formating-div").css({display:"none"}));n=this.dialogDiv.find(".e-adance-basedon-drpdwn").data("ejDropDownList");ej.isNullOrUndefined(n)||(n.setModel({dataSource:this.isMeasure?this.measureFields:this.dimensionFields,fields:{text:"text",value:"value"},selectedIndex:"0"}),$.isEmptyObject(this.internalAdvanceModeObj)?n.selectItemByIndex(0):n.selectItemByValue(this.internalAdvanceModeObj.BasedOn.Key));t=this.dialogDiv.find(".e-adance-aggregation-drpdwn").data("ejDropDownList");ej.isNullOrUndefined(t)||($.isEmptyObject(this.internalAdvanceModeObj)?t.selectItemByIndex(0):t.selectItemByValue(ej.DashboardDesignerUtility.Serialization.enumToString(SummaryType,this.internalAdvanceModeObj.BasedOn.SummaryType)));i=this.dialogDiv.find(".e-adance-format-drpdwn").data("ejDropDownList");ej.isNullOrUndefined(i)||(r=this.internalAdvanceModeObj.IsPercent?ej.DashboardDesignerUtility.Serialization.enumToString(Format,Format.Percent):ej.DashboardDesignerUtility.Serialization.enumToString(Format,Format.Value),i.selectItemByValue(r))},n.prototype.getMeasureFields=function(){for(var t,i=[],n=0;n<this.dataSet.datasets.length;n++)if(this.dataSet.datasets[n].Id===this.datasetId)for(t=0;t<this.dataSet.datasets[n].Fields.length;t++)this.dataSet.datasets[n].Fields[t].TypeName==="Real"&&i.push({text:this.dataSet.datasets[n].Fields[t].DataField,value:this.dataSet.datasets[n].Fields[t].Id});this.measureFields=i},n.prototype.getDimensionFields=function(){for(var t,i=[],n=0;n<this.dataSet.datasets.length;n++)if(this.dataSet.datasets[n].Id===this.datasetId)for(t=0;t<this.dataSet.datasets[n].Fields.length;t++)this.dataSet.datasets[n].Fields[t].TypeName==="String"&&i.push({text:this.dataSet.datasets[n].Fields[t].DataField,value:this.dataSet.datasets[n].Fields[t].Id});this.dimensionFields=i},n.prototype.populateInfo=function(){this.showLoadingIndicator();var n=this;setTimeout(function(){if(n.updateHeaderProperties(),!ej.isNullOrUndefined(n.internalAdvanceModeObj.Ranges)&&n.internalAdvanceModeObj.Ranges.length>0)for(var t=1;t<=n.internalAdvanceModeObj.Ranges.length;t++)n.renderConditiondiv(n.conditionContainer,t,n.internalAdvanceModeObj.Ranges[t-1]);else n.renderConditiondiv(n.conditionContainer,1,null);n.contentDiv.find(".e-color-custom-add-condition-wrap").length===0&&n.contentDiv.append(n.renderAddConditionDiv());n.hideLoadingIndicator()},100)},n.prototype.resetFields=function(){this.internalAdvanceModeObj=new AdvancedSettings;this.conditionNumbers=[];this.targetInstance=null;this.targetMethod=null;ej.isNullOrUndefined(this.contentDiv.find(".e-color-custom-add-condition-wrap"))||this.contentDiv.find(".e-color-custom-add-condition-wrap").remove()},n.prototype.setMinValue=function(n){var i=$(n.currentTarget),r=i.parents(".e-advanc-condition-wrap"),t=r.find(".e-condition-type-drpdwn").data("ejDropDownList"),u;ej.isNullOrUndefined(t)||(t.getSelectedValue()===ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)||t.getSelectedValue()===ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotBetween))&&(u=r.find(".e-condition-value-end"),u.attr("min",i.val()))},n.prototype.setMaxValue=function(n){var t=$(n.currentTarget),u=t.parents(".e-advanc-condition-wrap"),i=u.find(".e-condition-type-drpdwn").data("ejDropDownList"),r;ej.isNullOrUndefined(i)||(i.getSelectedValue()===ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CBetween)||i.getSelectedValue()===ej.DashboardDesignerUtility.Serialization.enumToString(CMeasureConditionType,CMeasureConditionType.CNotBetween))&&(r=t.parents(".e-advanc-condition-content").find(".e-condition-value-start"),r.attr("max",t.val()))},n.prototype.wireEvents=function(){this.dialogDiv.on("click",".e-color-custom-advance-content .e-advanc-condition-content .e-color-custom-condition-close",$.proxy(this.removeCondition,this));this.dialogDiv.on("click",".e-color-custom-advance-content .e-color-custom-add-condition-wrap",$.proxy(this.addCondition,this));this.dialogDiv.on("focusout",".e-color-custom-advance-content .e-advanc-condition-content .e-condition-value-start",$.proxy(this.setMinValue,this));this.dialogDiv.on("focusout",".e-color-custom-advance-content .e-advanc-condition-content .e-condition-value-end",$.proxy(this.setMaxValue,this));this.dialogDiv.on("click",".e-condition-range-colorpicker, .e-range-color, .e-range-icon",$.proxy(this.onRangeColorOpen,this));$("body").on("click",".e-gradient-color",$.proxy(this.onGradientColor,this));$("body").on("click",".e-gradient-type",$.proxy(this.onGradientChange,this));$("body").on("click",".e-flat-type",$.proxy(this.onFlatChange,this));this.dialogDiv.on("click",".e-custom-color-numberformat-icon",$.proxy(this.openFormatDialog,this))},n.prototype.unwireEvents=function(){this.dialogDiv.on("click",".e-color-custom-advance-content .e-advanc-condition-content .e-color-custom-condition-close",$.proxy(this.removeCondition,this));this.dialogDiv.off("click",".e-color-custom-advance-content .e-color-custom-add-condition-wrap",$.proxy(this.addCondition,this));this.dialogDiv.off("focusout",".e-color-custom-advance-content .e-advanc-condition-content .e-condition-value-start",$.proxy(this.setMinValue,this));this.dialogDiv.off("focusout",".e-color-custom-advance-content .e-advanc-condition-content .e-condition-value-end",$.proxy(this.setMaxValue,this));this.dialogDiv.off("click",".e-condition-range-colorpicker, .e-range-color, .e-range-icon",$.proxy(this.onRangeColorOpen,this));$("body").off("click",".e-gradient-color",$.proxy(this.onGradientColor,this));$("body").off("click",".e-gradient-type",$.proxy(this.onGradientChange,this));$("body").off("click",".e-flat-type",$.proxy(this.onFlatChange,this));this.dialogDiv.off("click",".e-custom-color-numberformat-icon",$.proxy(this.openFormatDialog,this))},n.prototype.getDropdownContent=function(){return"<ul class=\"e-icon-color-list\"><li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.upText+"><div class=\"e-icon-collection e-icon-arrow2_up\" > <\/div><\/li > <li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.rightText+"><div class=\"e-icon-collection e-icon-arrow2_right\"> <\/div><\/li><li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.downText+"><div class=\"e-icon-collection e-icon-arrow2_down\"> <\/div><\/li><li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.pointerUpText+"><div class=\"e-icon-collection e-icon-arrow2_pointer_up\" > <\/div><\/li > <li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.pointerDownText+"><div class=\"e-icon-collection e-icon-arrow2_pointer_down\"> <\/div><\/li><li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.miunsText+"><div class=\"e-icon-collection e-icon-arrow2_minus\" > <\/div><\/li > <li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.round+"><div class=\"e-icon-collection e-icon-arrow2_round\"> <\/div><\/li><li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.star+"><div class=\"e-icon-collection e-icon-arrow2_star\" > <\/div><\/li > <li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.polygon+"><div class=\"e-icon-collection e-icon-arrow2_polygon\"> <\/div><\/li><li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.tickText+"><div class=\"e-icon-collection e-icon-arrow2_tick\"> <\/div><\/li><li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.warning+"><div class=\"e-icon-collection e-icon-arrow2_warning\"> <\/div><\/li><li class='e-icon-color-list-item' data-icon-id="+this.dashboardDesigner.locale.colorCustomAdvanceLocale.closeText+"><div class=\"e-icon-collection e-icon-arrow2_close\"> <\/div><\/li><input type='button' id = 'customButton' class='e-custom-icon-button' data-icon-id='custom' value = '"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.customBtnText+"'/><\/ul>"},n.prototype.renderIconFieldDropDownContent=function(n,t){var r,s,i,u,f,e,o,h,c,l;n.find("#"+n.attr("id")+"_icon_list").length===0?(r=ej.buildTag("div","",{},{id:n.attr("id")+"_icon_list"}),n.append(r)):r=n.find("#"+n.attr("id")+"_icon_list");r.append(this.getDropdownContent());this.renderCustomIconButton(r.find(".e-custom-icon-button"),n);s=r.find(".e-custom-icon-button").length>0&&r.find(".e-custom-icon-button").css("display")!=="none"?190:160;n.ejDropDownList({targetID:n.attr("id")+"_icon_list",watermarkText:this.dashboardDesigner.locale.colorCustomAdvanceLocale.selectFileds,cssClass:"e-dbrd-control e-dbrd-designer-icon-drpdwn e-dbrd-designer-icon-drpdwn-popup",popupWidth:120,popupHeight:s,width:"70px",height:"28px",select:$.proxy(this.selectionChanged,n,this)});i=n.data("ejDropDownList");u=$(n[0]).parents(".e-color-custom-color-field-wrap").find(".e-custom-colorpicker");!ej.isNullOrUndefined(i)&&t.isChecked?t.iconType!==ImageType.Default?(i.enable(),i.selectItemByIndex(-1),n.attr("icon-type","custom"),n.attr("data-type",ImageType[t.iconType]),n.attr("data-value",t.selectedIcon),this.storeImageDetails(n),$(n[0].parentElement).find("#"+n[0].parentElement.id+"_selectedIcon").length>0&&$(n[0].parentElement).find("#"+n[0].parentElement.id+"_selectedIcon").remove(),u.length>0&&(f=u.data("ejColorPicker"),ej.isNullOrUndefined(f)||(e=n.data("ejDropDownList"),ej.isNullOrUndefined(e)||e.option("width","120px"),f.disable(),u.parents(".e-condition-icon-colorpicker-wrap").css("display","none"))),$(n).css({display:"none"}),o=ej.buildTag("span","",{},{id:n[0].parentElement.id+"_selectedIcon"}),h=ej.buildTag("div",this.dashboardDesigner.locale.colorCustomAdvanceLocale.customBtnText,{"text-align":"left","padding-left":"0.857em"},{"class":"e-input e-selectedIcon"}),o.append(h),$(o).insertBefore(n)):(c=i.items.parents("ul").find("li[data-icon-id="+t.selectedIcon+"]"),l=$(i.items).index(c),i.selectItemByIndex(l),i.enable()):i.disable()},n.prototype.storeImageDetails=function(n){if(n.attr("data-type")===ImageType[ImageType.Embedded]){var t=n.attr("data-value");if(Object.keys(this.dashboardDesigner.colorCustomIconStore).length>0&&!ej.isNullOrUndefined(this.dashboardDesigner.colorCustomIconStore[t]))return;this.dashboardDesigner.colorCustomIconStore[t]={base64String:"",imageName:t}}},n.prototype.renderCustomIconButton=function(n,t){!ej.isNullOrUndefined(n)&&n.length>0&&n.ejButton({showRoundedCorner:!0,click:$.proxy(this.customIconClicked,this,t)})},n.prototype.selectionChanged=function(n,t){var r,f;if(!ej.isNullOrUndefined(t.model)){var s=t.model.targetID,e=$("#"+s),o="",i=$(e[0].parentElement),u=e.parents(".e-color-custom-color-field-wrap").find(".e-custom-colorpicker");u.length>0&&(r=u.data("ejColorPicker"),ej.isNullOrUndefined(r)||(f=i.data("ejDropDownList"),ej.isNullOrUndefined(f)||f.option("width","70px"),u.parents(".e-condition-icon-colorpicker-wrap").css("display","block"),r.enable(),o=r.getValue()));i.removeAttr("icon-type");i.removeAttr("data-type");i.removeAttr("data-value");t.model.showCheckbox||t.model.multiSelectMode!=="none"||n.setIconForDropDown(i,t,o)}},n.prototype.setIconForDropDown=function(n,t,i){$(n[0].parentElement).find("#"+n[0].parentElement.id+"_selectedIcon").length>0&&$(n[0].parentElement).find("#"+n[0].parentElement.id+"_selectedIcon").remove();$(n).css({display:"none"});var r=ej.buildTag("span.e-selected-drpdwn-icon","",{},{id:n[0].parentElement.id+"_selectedIcon"}),f=this.getClassNameOfIcon(t.itemId),u=ej.buildTag("div","",{},{"class":"e-icon-collection"});r.append(u);u.addClass(f);$(r).insertBefore(n);ej.isNullOrUndefined(i)||i===""||r.find(".e-icon-collection").css("color",i)},n.prototype.getClassNameOfIcon=function(n){var t="";switch(n){case 0:t="e-icon-arrow2_up";break;case 1:t="e-icon-arrow2_right";break;case 2:t="e-icon-arrow2_down";break;case 3:t="e-icon-arrow2_pointer_up";break;case 4:t="e-icon-arrow2_pointer_down";break;case 5:t="e-icon-arrow2_minus";break;case 6:t="e-icon-arrow2_round";break;case 7:t="e-icon-arrow2_star";break;case 8:t="e-icon-arrow2_polygon";break;case 9:t="e-icon-arrow2_tick";break;case 10:t="e-icon-arrow2_warning";break;case 11:t="e-icon-arrow2_close"}return t},n.prototype.customIconClicked=function(n){ejDashboardDesigner.getInstance("ColorCustomizationCustomDialog").openCustomDialogWindow(n)},n}();window.ej.createObject("ej.DashboardDesignerUtility.ColorCustomizationAdvanceSettings",InternalColorCustomizationAdvanceSettings,window);InternalColorCustomizationCustomDialog=function(){function n(){this.dashboardDesigner=null;this.ejCustomDialog=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id+"_color_customization_icon_dlg";this.renderCustomDialogWindow()}return Object.defineProperty(n,"ColorCustomizationCustomDialog",{get:function(){return(this.colorCustomizationCustomDialog===null||this.colorCustomizationCustomDialog===undefined)&&(this.colorCustomizationCustomDialog=new ej.DashboardDesignerUtility.ColorCustomizationCustomDialog),this.colorCustomizationCustomDialog},enumerable:!0,configurable:!0}),n.prototype.renderCustomDialogWindow=function(){var r=this.customDialogContainer=ej.buildTag("div.e-userselect.e-color-customization-icon-dlg","",{},{id:this.id+"_custom_dialog"}),u=ej.buildTag("div.e-userselect e-dbrd-control","",{width:"100%"},{id:this.id+"_custom_dialog_container"}),f=ej.buildTag("div","",{width:"100%",height:"100%"},{id:this.id+"_custom_dialog_content"}),n,t,i;u.append(f);r.append(u);this.ejCustomDialog=r.ejDialog({title:this.dashboardDesigner.locale.colorCustomAdvanceLocale.customIconDlgTitle,width:"auto",height:"auto",minHeight:240,minWidth:450,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,containment:this.dashboardDesigner._id,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner e-dashboarddesigner-custom-icon-dlg",close:$.proxy(ej.DashboardUtil.closeDialog,this)}).data("ejDialog");this.footerTag=$("#"+this.id+"_custom_dialog_foot");n=ej.buildTag("button.e-dbrd-hand-cursor e-custom-dlg-cancel-btn","",{float:"right"},{id:this.id+"_custom_dialog_cancel"});t=ej.buildTag("button.e-dbrd-hand-cursor e-custom-dlg-save-btn","",{float:"right"},{id:this.id+"_custom_dialog_save"});this.footerTag.append(n,t);i=this.dashboardDesigner.locale.dialogOptions;t.ejButton({text:i.addButtonText,showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.saveBtnClick,this)});n.ejButton({text:i.cancelButtonText,showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.cancelBtnClick,this)});this.addBtnEnableDisable(!1)},n.prototype.openCustomDialogWindow=function(n){this.resetFields();this.parentDrpDwn=n;this.renderTab(this.customDialogContainer.find("#"+this.id+"_custom_dialog_content"));this.ejCustomDialog.open()},n.prototype.resetFields=function(){this.fileOrURLPath=null;this.selectedImageType=ImageType[ImageType.Embedded]},n.prototype.renderTab=function(n){var i,r,u,t;n.children().length===0?(i=ej.buildTag("div.e-custom-icon-dialog-content-wrap","",{},{id:this.id+"_custom_dialog_content_wrap"}),n.append(i),t=ej.buildTag("div.e-custom-icon-dialog-tab","",{},{id:this.id+"_custom_dialog_tab"}),this.getTabHeader(t),r=ej.buildTag("table.e-designer-dsconfig-table e-custom-upload-table e-custom-dlg-content-table","",{width:"100%",height:"100%"},{unselectable:"on",id:this.id+"_custom_icon_selectedType"}),u=ej.buildTag("table.e-designer-dsconfig-table e-custom-url-table e-custom-dlg-content-table","",{width:"100%",height:"100%"},{unselectable:"on",id:this.id+"_custom_icon_selectedType"}),t.find(".e-custom-icon-dialog-browse").append(r),t.find(".e-custom-icon-dialog-url").append(u),this.renderBrowseDialog(this.id+"_custom_icon_browse_type_dialog",r),this.renderUrlTextBox(this.id+"_custom_icon_url_textbox",u),i.append(t),t.ejTab({width:"450px",height:"160px",selectedItemIndex:0,itemActive:$.proxy(this.afterTabActive,this)}),this.selectedImageType===ImageType[ImageType.Embedded]&&(this.fileOrURLPath=this.parentDrpDwn.attr("data-value"),this.updateBrowseImage())):(ej.isNullOrUndefined(this.parentDrpDwn)||(this.selectedImageType=this.parentDrpDwn.attr("data-type"),this.fileOrURLPath=this.parentDrpDwn.attr("data-value")),ej.isNullOrUndefined(this.selectedImageType)&&(this.selectedImageType=ImageType[ImageType.Embedded]),t=this.customDialogContainer.find(".e-custom-icon-dialog-tab").data("ejTab"),ej.isNullOrUndefined(t)||(this.selectedImageType!==ImageType[ImageType.URL]?(t.option("selectedItemIndex",0),this.filePath.val(""),this.updateBrowseImage()):(t.option("selectedItemIndex",1),this.urlTextBox.val(this.fileOrURLPath),this.urlTextFocusOut(),this.addBtnEnableDisable(this.urlTextBox.val().trim()!==""?!0:!1))))},n.prototype.updateBrowseImage=function(){if(Object.keys(this.dashboardDesigner.colorCustomIconStore).length>0){var n=this.dashboardDesigner.colorCustomIconStore[this.fileOrURLPath];ej.isNullOrUndefined(n)||n.base64String===""?ej.isNullOrUndefined(this.fileOrURLPath)?this.resetBrowseFields():this.fetchImage():(this.browseDialog.find(".e-browse-input-box").val(n.imageName),this.browseDialog.find(".e-custom-image").attr("src",n.base64String),this.browseDialog.find(".e-default-image").hide(),this.browseDialog.find(".e-custom-image").show(),this.addBtnEnableDisable(!0))}},n.prototype.fetchImage=function(){this.ejCustomDialog.open();this.showLoadingIndicator();ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/assignimage",{data:JSON.stringify({fileName:this.fileOrURLPath})},{fnction:$.proxy(this.updateImageInfo,this)})},n.prototype.updateImageInfo=function(n){this.fileExt=n.ext;this.fileOrURLPath=n.fileName;this.fileId=n.fileId;this.updateImageMode(n);this.storeImageDetails()},n.prototype.storeImageDetails=function(){this.dashboardDesigner.colorCustomIconStore[this.fileOrURLPath]={base64String:this.browseDialog.find(".e-custom-image").attr("src"),imageName:this.browseDialog.find(".e-browse-input-box").val()}},n.prototype.getTabHeader=function(n){var t="<ul><li><a href='#"+this.id+"_Upload'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.uploadText+"<\/a><\/li><li><a href='#"+this.id+"_Url'>"+this.dashboardDesigner.locale.colorCustomAdvanceLocale.urlText+"<\/a><\/li><\/ul>",i=ej.buildTag("div.e-custom-icon-dialog-browse e-custom-icon-dialog-tab-content","",{},{id:this.id+"_Upload"}),r=ej.buildTag("div.e-custom-icon-dialog-url e-custom-icon-dialog-tab-content","",{},{id:this.id+"_Url"});n.append(t,i,r)},n.prototype.afterTabActive=function(n){if(!ej.isNullOrUndefined(n)){var t=$(n.activeHeader).find(".e-link").text();this.selectedImageType=t===this.dashboardDesigner.locale.colorCustomAdvanceLocale.urlText?ImageType[ImageType.URL]:this.selectedImageType=ImageType[ImageType.Embedded];this.selectedImageType===ImageType[ImageType.URL]?this.addBtnEnableDisable(this.urlTextBox.val().trim()!==""?!0:!1):this.addBtnEnableDisable(!ej.isNullOrUndefined(this.filePath)&&this.filePath.val().trim()!==""?!0:!1)}},n.prototype.renderUrlTextBox=function(n,t){var i=this.urlTextRow=$("<tr id="+n+"_tr/>"),r=ej.buildTag("div.e-custom-icon-inner-content","",{height:"100px",width:"320px"},{}),u=this.urlTextBox=ej.buildTag("input.e-textbox e-designer-content-label e-url-textbox","",{},{id:n,type:"text",spellcheck:"false"});u.bind("focusout",$.proxy(this.urlTextFocusOut,this));r.append(u);i.append(r);this.renderImageDiv(this.id+"_custom_icon_Image_div_url",i);t.append(i)},n.prototype.urlTextFocusOut=function(){if(this.fileOrURLPath=this.urlTextRow.find("#"+this.id+"_custom_icon_url_textbox").val(),this.urlTextRow.find(".e-custom-image").length!==0&&this.fileOrURLPath.length>0){var n=this.urlTextRow.find(".e-custom-image");n.attr("src",this.fileOrURLPath);n.show();this.urlTextRow.find(".e-default-image").hide();this.addBtnEnableDisable(!0)}},n.prototype.addBtnEnableDisable=function(n){var t=this.footerTag.find(".e-custom-dlg-save-btn").data("ejButton");ej.isNullOrUndefined(t)||(n?t.enable():t.disable())},n.prototype.renderBrowseDialog=function(n,t){var u=this.browseDialog=$("<tr id="+n+"_tr/>"),i=ej.buildTag("div.e-custom-icon-inner-content","",{},{}),r;this.filePath=ej.buildTag("input.e-textbox e-designer-content-label e-browse-input-box","",{},{id:this.id+"_image_path",type:"text",readonly:"readonly"});r=ej.buildTag("div.e-designer-content-label e-dbrd-hand-cursor e-browse-btn",this.dashboardDesigner.locale.colorCustomAdvanceLocale.browseText,{},{id:this.id+"_image_file_browse"});r.ejButton({showRoundedCorner:!1,click:$.proxy(this.onBrowseClick,this)});i.append(this.filePath);i.append(r);u.append(i);this.renderImageDiv(this.id+"_custom_icon_Image_div_browse",this.browseDialog);t.append(u);this.renderUploadBox()},n.prototype.renderImageDiv=function(n,t){var u=$("<td class=\"e-custom-icon-inner-content e-custom-image-td\" unselectable='on'/>"),i=ej.buildTag("div.e-custom-image-wrap","",{},{id:this.id+"_"+n+"_image_file_Div"}),r,f;u.append(i);t.append(u);r=ej.buildTag("img.e-custom-image","",{},{id:this.id+"_"+n+"_image_file"});f=ej.buildTag("div.e-default-image","",{},{id:this.id+"_"+n+"_default_image_file_Div"});i.append(r,f);r.hide();i.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-designer-loader"}).data("ejWaitingPopup")},n.prototype.onBrowseClick=function(){$("#"+this.id+"_image_upload .e-uploadinput").click()},n.prototype.renderUploadBox=function(){var n=this,t=ej.buildTag("div","",{height:"0px"},{id:this.id+"_image_upload"});this.dashboardDesigner.element.append(t);this.ejUploadBox=t.ejUploadbox({width:"0px",height:"0px",uploadName:"image",extensionsAllow:".jpg,.png,.gif,.jpeg,.bmp,.emf,.jfif,.jpe,.rle,.tif,.tiff,.wmf,.dib,.ico",autoUpload:!0,showFileDetails:!1,dialogAction:{content:this.dashboardDesigner.element},fileSize:78643200,saveUrl:this.dashboardDesigner.model.serviceUrl+"/uploadimage",fileSelect:$.proxy(this.onfileSelect,this),error:$.proxy(this.onuploadError,this),success:$.proxy(this.onuploadSuccess,this),beforeSend:$.proxy(function(t){ej.DashboardUtil.clientId!==""&&t.xhr.setRequestHeader("ClientID",ej.DashboardUtil.clientId);ej.isNullOrUndefined(n.dashboardDesigner.model.serviceAuthorizationToken)||t.xhr.setRequestHeader("Authorization",n.dashboardDesigner.model.serviceAuthorizationToken)},this)}).data("ejUploadbox");$(this.id+"_img_upload_SelectButton").hide()},n.prototype.onfileSelect=function(n){n.files.length!==0&&(this.showLoadingIndicator(),n.files[0].size>n.model.fileSize?n.cancel=!0:(this.fileOrURLPath=this.fileExt=null,this.filePath.val(n.files[0].name)));this.ejUploadBox._uploadFileListDelete()},n.prototype.showLoadingIndicator=function(){this.browseDialog.find(".e-default-image").hide();this.browseDialog.find(".e-custom-image").hide();var n=this.browseDialog.find(".e-custom-image-wrap").data("ejWaitingPopup");ej.isNullOrUndefined(n)||n.show()},n.prototype.hideLoadingIndicator=function(){var n=this.browseDialog.find(".e-custom-image-wrap").data("ejWaitingPopup");ej.isNullOrUndefined(n)||n.hide()},n.prototype.onuploadError=function(){this.hideLoadingIndicator();this.browseDialog.find(".e-default-image").show();window.alert("Upload Failed")},n.prototype.onuploadSuccess=function(n){var t=JSON.parse(n.responseText);t&&t.Status?(this.fileExt=t.Data.ext,this.fileOrURLPath=t.Data.fileId+t.Data.ext,this.fileId=t.Data.fileId,this.updateImageMode(t.Data)):ej.DashboardUtil.getInstance().alertDialog(this.dashboardDesigner.locale.alertDialogTitle.upload,this.dashboardDesigner.locale.errorMessage.failedToUploadFile,IconType.errors,AlertType.Alert,!1,t?t.Message:null)},n.prototype.updateImageMode=function(n){var t=this.browseDialog.find(".e-custom-image");t.length!==0&&(t.attr("src","data:image/"+n.ext+";base64,"+n.source+""),this.hideLoadingIndicator(),t.show(),this.browseDialog.find(".e-browse-input-box").val().trim()===""&&this.browseDialog.find(".e-browse-input-box").val(this.fileOrURLPath),this.addBtnEnableDisable(!0))},n.prototype.cancelBtnClick=function(){this.ejCustomDialog.close();this.resetBrowseFields();this.resetUrlFields()},n.prototype.resetBrowseFields=function(){this.filePath.val("");this.browseDialog.find(".e-custom-image").hide();this.browseDialog.find(".e-default-image").show()},n.prototype.resetUrlFields=function(){this.urlTextBox.val("");this.urlTextRow.find(".e-custom-image").hide();this.urlTextRow.find(".e-default-image").show()},n.prototype.saveBtnClick=function(){var n,u,t,i,r;this.parentDrpDwn.data("ejDropDownList").selectItemByIndex(-1);this.parentDrpDwn.attr("icon-type","custom");this.parentDrpDwn.attr("data-type",this.selectedImageType);this.parentDrpDwn.attr("data-value",this.fileOrURLPath);this.selectedImageType===ImageType[ImageType.URL]?this.resetBrowseFields():this.resetUrlFields();$(this.parentDrpDwn[0].parentElement).find("#"+this.parentDrpDwn[0].parentElement.id+"_selectedIcon").length>0&&$(this.parentDrpDwn[0].parentElement).find("#"+this.parentDrpDwn[0].parentElement.id+"_selectedIcon").remove();$(this.parentDrpDwn).css({display:"none"});n=ej.buildTag("span","",{},{id:this.parentDrpDwn[0].parentElement.id+"_selectedIcon"});u=ej.buildTag("div",this.dashboardDesigner.locale.colorCustomAdvanceLocale.customBtnText,{"text-align":"left","padding-left":"0.857em"},{"class":"e-input e-selectedIcon"});n.append(u);$(n).insertBefore(this.parentDrpDwn);t=$(this.parentDrpDwn[0]).parents(".e-color-custom-color-field-wrap").find(".e-custom-colorpicker");i=t.data("ejColorPicker");ej.isNullOrUndefined(i)||(i.disable(),t.parents(".e-condition-icon-colorpicker-wrap").css("display","none"),r=this.parentDrpDwn.data("ejDropDownList"),ej.isNullOrUndefined(r)||r.option("width","120px"));this.selectedImageType===ImageType[ImageType.Embedded]&&this.storeImageDetails();this.ejCustomDialog.close()},n}();window.ej.createObject("ej.DashboardDesignerUtility.ColorCustomizationCustomDialog",InternalColorCustomizationCustomDialog,window);InternalColorPicker=function(){function n(){this.dashboardDesigner=null;this.callMethod="";this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.wireEvents()}return Object.defineProperty(n,"ColorPicker",{get:function(){return(this.colorPicker===null||this.colorPicker===undefined)&&(this.colorPicker=new ej.DashboardDesignerUtility.ColorPicker),this.colorPicker},enumerable:!0,configurable:!0}),n.prototype.wireEvents=function(){$("body").on("click",".e-range-color",$.proxy(this.onColorPickerOpen,this));$("body").on("focusout",".e-color-textbox",$.proxy(this.onColorTextFocus,this))},n.prototype.unwireEvents=function(){$("body").off("click",".e-range-color",$.proxy(this.onColorPickerOpen,this));$("body").off("focusout",".e-color-textbox",$.proxy(this.onColorTextFocus,this))},n.prototype.renderColorPicker=function(n,t,i){var r,u,f,e,o;this.callInstance=t;this.callMethod=i;r=n.attr("id");u=n.attr("data-color");ej.isNullOrUndefined(u)||u===""?$(n).attr("data-color","#278787"):$(n).attr("data-color",u);f="";f=$(n).attr("data-color");n.css({height:"24px",width:"104px",border:"1px solid #B3B3B3","border-radius":"4px",display:"inline-block"});e="<input id="+r+"_colorTextBox class='e-color-textbox' data-id="+r+" style='height:14px;width:70px;float:left;margin:4px;border: 0px;background:transparent;outline:unset;' value="+f+"><\/input><div id="+r+"_color class='e-range-color' data-id="+r+" style='height:14px;width:14px;background: "+f+";float:right;margin: 4px;border-radius: 4px;'><\/div>";o="<div id="+r+"_colorPicker class='e-color-picker' style='height:254px;width:246px;position:absolute;border:1px solid #FFFFFF;box-shadow: 0 4px 6px 0 rgba(0,0,0,0.16);display:none;background:#FFFFFF;'><div id="+r+"_colorPalette data-id="+r+" style='height:256px;width:154px;margin-left: 7px;display:block'><\/div><\/div>";$(n).append(e);$("body").append(o);$("#"+r+"_colorPalette").ejColorPicker({value:$(n).attr("data-color"),displayInline:!0,modelType:"picker",change:$.proxy(this.onColorChange,this,n)})},n.prototype.onColorChange=function(n,t){var r=$(n).find(".e-color-textbox").val(),i=t.value;ej.isNullOrUndefined(i)||(i=i.toLocaleUpperCase());$(n).attr({"data-color":i,"data-type":"Flat"});ej.isNullOrUndefined(this.callInstance)||ej.isNullOrUndefined(this.callMethod)||(r!==i?$(n).parent().attr({"data-modified":!0}):ej.isNullOrUndefined($(n).parent().attr("data-modified"))||$(n).parent().removeAttr("data-modified"),ej.DashboardUtil.invokeMethod(this.callInstance,this.callMethod))},n.prototype.onColorPickerOpen=function(n){var t=$(n.target).attr("data-id")||$(n.target).attr("id");$("#"+t+"_colorPicker").css("display")==="none"?$("#"+t+"_colorPicker").css("display","block"):$("#"+t+"_colorPicker").css("display","none");this.setColorPalettePosition(t);n.stopPropagation();$(document).on("click","body",$.proxy(this.onColorPickerClose,this,t))},n.prototype.setColorPalettePosition=function(n){var t=$("#"+n),i=$("#"+n+"_colorPicker"),r=t.offset(),h=$(document).scrollTop()+$(window).height()-(r.top+$(t).outerHeight()),c=r.top-$(document).scrollTop(),f=i.outerHeight(),e=i.outerWidth(),u=r.left,o=t.outerHeight(),l=(o-t.height())/2,s=3,a=this.getZindexPartial(t,i),v=(f<h||f>c?r.top+o+s:r.top-f-s)-l,y=$(document).scrollLeft()+$(window).width()-u;e>y&&e<u+t.outerWidth()&&(u-=i.outerWidth()-t.outerWidth());i.css({left:u+"px",top:v+"px","z-index":a})},n.prototype.getZindexPartial=function(n,t){var i,u,r;if(!ej.isNullOrUndefined(n)&&n.length>0)return u=n.parents(),r=$("body").children(),!ej.isNullOrUndefined(n)&&n.length>0&&r.splice(r.index(t),1),$(r).each(function(n,t){u.push(t)}),i=Math.max.apply(i,$.map(u,function(n){if($(n).css("position")!=="static")return parseInt($(n).css("z-index"))||1})),!i||i<1e4?i=1e4:i+=1,i},n.prototype.onColorPickerClose=function(n,t){var r=$("#"+n),i;$(t.target).parents(".e-color-picker").length===0&&($("#"+n+"_colorPicker").css("display","none"),i="",i=$(r).attr("data-color"),$("#"+n+"_color").css("background",i),ej.isNullOrUndefined(i)?$(r).find(".e-color-textbox").val(i):$(r).find(".e-color-textbox").val(i.toLocaleUpperCase()),r.css("border","1px solid #B3B3B3"))},n.prototype.onColorTextFocus=function(n){var t=$("#"+$(n.target).attr("data-id")),i=$("#"+$(n.target).attr("data-id")+"_colorPalette").data("ejColorPicker"),r=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test($(n.target).val());r?(t.css("border","1px solid #B3B3B3"),t.find(".e-range-color").css("background",$(n.target).val()),i.setModel({value:$(n.target).val()})):t.css("border","1px solid #FF0000")},n}();window.ej.createObject("ej.DashboardDesignerUtility.ColorPicker",InternalColorPicker,window);InternalColorCustomizationInclusionSelection=function(){function n(){this.waterMarkText="Search";this.listFieldName="text";this.ajaxRequestCollection=[];this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.id=this.dashboardDesigner._id}return Object.defineProperty(n,"ColorCustomizationInclusionSelection",{get:function(){return(this.colorCustomizationInclusionSelection===null||this.colorCustomizationInclusionSelection===undefined)&&(this.colorCustomizationInclusionSelection=new ej.DashboardDesignerUtility.ColorCustomizationInclusionSelection),this.colorCustomizationInclusionSelection},enumerable:!0,configurable:!0}),n.prototype.resetMultiSelection=function(n){$("#"+n+"_popup_container").remove();$("#"+n+"_multi_select_dropDown_text").empty()},n.prototype.renderMultiSelectionComboBox=function(n,t,i){this.resetMultiSelection(t);var r=ej.buildTag("div.e-multiselect-dropdown-item","",{width:n.width(),height:"28px",cursor:"pointer","background-color":"white",display:"block",border:"1px solid #B3B3B3","border-radius":"4px","box-sizing":"border-box","box-shadow":"rgba(0, 0, 0, 0.0745098) 0px 1px 1px inset"},{id:t+"_multi_select_dropDown"}),f=this.dashboardDesigner.locale.colorCustomAdvanceLocale.selectAny,e=ej.buildTag("div",f,{"border-style":"none",width:n.width()-46,height:"100%","line-height":"24px",float:"left","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden","font-size":"12px","padding-left":".857em"},{id:t+"_multi_select_dropDown_text"}),u=ej.buildTag("div","",{display:"inline-block",width:"33px",height:"100%"},{}),o=ej.buildTag("span.e-designer-ejwidgets-updown e-icon e-arrow-sans-down","",{color:"#666666",padding:"8px 10px"});u.append(o);r.append(e).append(u);r.bind("click",$.proxy(this.showPopupContainer,this,n,t,i));n.append(r);this.renderPopupContainer(t)},n.prototype.renderPopupContainer=function(n){var u=ej.buildTag("div.e-multiselect-popup-container e-dashboarddesigner","",{"min-width":"245px",height:"270px",position:"absolute",border:"1px solid #dddddd","background-color":"white","border-radius":"3px",display:"none","z-index":"10100"},{id:n+"_popup_container"}),f=ej.buildTag("div","",{},{}),t,i,r;this.renderSearchPanel(f,n);t=ej.buildTag("div.e-multiselect-waiting-popup","",{height:"188px","background-color":"white","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box","z-index":"1010",padding:"5px 10px"},{id:n+"_popup_container_list_Box_div"});i=ej.buildTag("ul","",{},{id:n+"_popup_container_list_Box"});t.append(i);var e=ej.buildTag("div.e-footerbar.e-dialog.e-js","",{width:"100%",height:"45px","box-sizing":"border-box","-moz-box-sizing":"border-box","-webkit-box-sizing":"border-box",padding:"10px 5px"},{}),o=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:n+"_popup_container_ok_btn"}),s=ej.buildTag("input.e-dbrd-hand-cursor","",{float:"right"},{id:n+"_popup_container_cancel_btn"});e.append(s).append(o);u.append(f).append(t).append(e);$(document.body).append(u);r=this.dashboardDesigner.locale.dialogOptions;o.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-okbtn",text:r.applyButtonText,click:$.proxy(this.updatePopupContainerInformation,this,n)});s.ejButton({showRoundedCorner:!1,size:"mini",cssClass:"e-designer-cancelbtn",text:r.cancelButtonText,click:$.proxy(this.closePopupContainer,this,n)});i.ejListBox({dataSource:[{text:""}],fields:{value:this.listFieldName},showCheckbox:!0,width:"100%",height:"100%",cssClass:"e-dbrd-control"});t.ejWaitingPopup({showOnInit:!1,cssClass:this.id+"_designer_waiting_popup e-designer-loader"})},n.prototype.renderSearchPanel=function(n,t){var i=ej.buildTag("div","",{width:"225px",height:"16px",padding:"10px"},{id:t+"_popup_container_searchPanel"}),r=ej.buildTag("input.e-reportdesigner-designer-search-dataassign","",{"border-radius":"5px","padding-left":"5px",color:"lightgrey","font-size":"11px",float:"left",width:"218px",height:"15px",border:"1px solid lightGray","font-style":"italic"},{id:t+"_popup_container_searchBox"}),u;r.val(this.waterMarkText);u=ej.buildTag("div","",{width:"24px",height:"15px","margin-top":"-16px",float:"right",color:"lightgray",cursor:"pointer"},{id:t+"_popup_container_searchIcon","class":"e-icon e-search"});i.append(r);i.append(u);n.append(i);r.bind("focus",$.proxy(this.onSearchFocus,this,t))},n.prototype.showPopupContainer=function(n,t,i){var o=this.getMultiSelectionComboBox(t),c=o.attr("data-fieldValue"),u=o.attr("data-fieldText"),r=this.getPopupContainer(t),l=this.getPopupListBox(t),a=l.data("ejListBox"),v=r.css("display")==="block",f=n.offset(),s=f.left+parseFloat(n.css("padding-left")),e,h;n.width()<245&&(s=f.left+parseFloat(n.css("padding-left"))-(246-n.width()));r.css({left:s,top:f.top+n.height()+2,display:v?"none":"block","z-index":ej.getMaxZindex()});this.updateDropDownIcon(r,t);e=this.getPopupListBoxDiv(t);r.css("display")==="block"?(ej.isNullOrUndefined(e.attr("data-fieldText"))||e.attr("data-fieldText")!==u?(h=[{Id:c,Name:u,SummaryType:"None",FieldType:"Dimensions"}],this.ajaxRequestCollection.push(ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.getData,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getData,fieldInfo:h,dataset:i,filterType:"InitialFilter"})},{fnction:$.proxy(this.setFieldInformation,this,t,u),indicator:[$.proxy(this.showLoadingIndicator,this,t),$.proxy(this.hideLoadingIndicator,this,t)]}))):this.setPopupValues(t),$(".e-multiselect-popup-container-visible").length>0&&this.updatePopupContainerVisibility($(".e-multiselect-popup-container-visible")),r.addClass("e-multiselect-popup-container-visible")):(r.removeClass("e-multiselect-popup-container-visible"),this.hideLoadingIndicator(t));a._refreshScroller()},n.prototype.getDataSource=function(n){for(var i=function(t){n[t][Object.keys(n[t])]=Object.keys(n[t].valueOf()).map(function(i){return n[t].valueOf()[i].toString()})},t=0;t<n.length;t++)i(t);return n},n.prototype.setFieldInformation=function(n,t,i){var r=JSON.parse(i.data),u,f,e;if(!ej.isNullOrUndefined(r)&&r.length>0){u=this.getPopupListBox(n).data("ejListBox");for(f in r[0])this.listFieldName=f;r=this.getDataSource(r);u.setModel({dataSource:r,fields:{value:this.listFieldName}});e=this.getPopupListBoxDiv(n);e.attr("data-fieldText",t);this.setPopupValues(n)}},n.prototype.setPopupValues=function(n){var i=this.getPopupListBox(n),t=i.data("ejListBox");!ej.isNullOrUndefined(i.data("Filters"))&&t.listitems.length>i.data("Filters").length?(t.checkItemsByIndices(this.getCheckedItemIndices(t.listitems,i.data("Filters"))),this.setItemEnable(n,!0)):(this.setItemEnable(n,!1),t.unCheckAll(),t.setModel({checkChange:$.proxy(this.updateListItemCheckChange,this,n)}))},n.prototype.getCheckedItemIndices=function(n,t){for(var r=[],i=0;i<n.length;i++)t.indexOf(n[i][this.listFieldName].toString())!==-1&&r.push(i);return r},n.prototype.showLoadingIndicator=function(n){this.getPopupListBoxDiv(n).ejWaitingPopup("show");this.setItemEnable(n,!1);this.getPopupSearchPanel(n).children().prop("disabled",!0)},n.prototype.hideLoadingIndicator=function(n){this.getPopupListBoxDiv(n).ejWaitingPopup("hide");this.setItemEnable(n,!0);this.getPopupSearchPanel(n).children().prop("disabled",!1)},n.prototype.onSearchFocus=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n);t.addClass("e-focus");t.val()===this.waterMarkText&&t.val("");t.css("color","grey");t.bind("keyup",$.proxy(this.onSearchText,this,n));t.bind("blur",$.proxy(this.onSearchBlur,this,n));this.getSearchIcon(i,n).bind("click",$.proxy(this.onSearchCloseClick,this,n))},n.prototype.onSearchText=function(n,t){var r=this.getPopupSearchPanel(n),f;if(t.keyCode!==13){var e=this.getSearchTextBox(r,n),u=e.val(),i=this.getPopupListBox(n);u.length>0?(this.getSearchIcon(r,n).addClass("e-close_01").removeClass("e-search"),f=this.filterItems(i.data("ejListBox").model.dataSource,u,n),i.ejListBox("hideAllItems"),i.ejListBox("showItemsByIndices",f)):i.ejListBox("showAllItems")}},n.prototype.onSearchBlur=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n),r=t.val();t.removeClass("e-focus");r.length===0&&this.clearSearchText(i,n,t)},n.prototype.clearSearchText=function(n,t,i){this.getSearchIcon(n,t).addClass("e-search").removeClass("e-close_01");i.val(this.waterMarkText);this.getPopupListBox(t).ejListBox("showAllItems");i.css("color","lightgrey")},n.prototype.onSearchCloseClick=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n),r=this.getSearchIcon(i,n);t.removeClass("e-focus");t.val(this.waterMarkText);t.css("color","lightgrey");this.getPopupListBox(n).ejListBox("showAllItems");r.addClass("e-search").removeClass("e-close_01");t.unbind("keyup",$.proxy(this.onSearchText,this));r.unbind("click",$.proxy(this.onSearchCloseClick,this));t.unbind("blur",$.proxy(this.onSearchBlur,this))},n.prototype.filterItems=function(n,t){for(var r=[],i=0;i<n.length;i++)(t===""||n[i][this.listFieldName][0].toLowerCase().startsWith(t.toLowerCase()))&&r.push(i);return r},n.prototype.updateListItemCheckChange=function(n,t){if(t.isInteraction){var i=this.getPopupListBox(n).data("ejListBox");i.getCheckedItems().length<1?this.setItemEnable(n,!1):this.setItemEnable(n,!0)}},n.prototype.setItemEnable=function(n,t){var i=this.getPopupOkButton(n);ej.DashboardUtil.buttonEnable(i,t)},n.prototype.updatePopupContainerInformation=function(n){var i;this.clearSearchList(n);var t=this.getPopupContainer(n),u=this.getComboBoxTextField(n),r=this.getPopupListBox(n),f=r.data("ejListBox");t.css("display","none");this.updateDropDownIcon(t,n);i=this.getListBoxCheckedItems(n);u.text(i.toString());r.data("Filters",i);$("#"+n).find(".e-error-tip").css("display","none");t.removeClass("e-multiselect-popup-container-visible")},n.prototype.clearSearchList=function(n){var i=this.getPopupSearchPanel(n),t=this.getSearchTextBox(i,n),r=t.val();r.length!==0&&r!==this.waterMarkText&&(t.removeClass("e-focus"),this.clearSearchText(i,n,t))},n.prototype.closePopupContainer=function(n){var t,i;this.clearSearchList(n);t=this.getPopupContainer(n);t.css("display","none");t.removeClass("e-multiselect-popup-container-visible");this.updateDropDownIcon(t,n);i=this.getPopupListBoxDiv(n).data("ejWaitingPopup");i.model.showOnInit&&this.killPendingRequest()},n.prototype.killPendingRequest=function(){if(this.ajaxRequestCollection.length>0)for(var n=0;n<this.ajaxRequestCollection.length;n++)this.ajaxRequestCollection[n].readyState<4&&this.ajaxRequestCollection[n].abort();this.ajaxRequestCollection=[]},n.prototype.getListBoxCheckedItems=function(n){for(var i=[],r=this.getPopupListBox(n).data("ejListBox").getCheckedItems(),t=0;t<r.length;t++)i.push(r[t].text);return i},n.prototype.updatePopupContainerVisibility=function(n){if(!ej.isNullOrUndefined(n)&&n.length>0){n.css("display","none");var t=n.attr("id").replace(/_popup_container/g,"");this.updateDropDownIcon(n,t)}},n.prototype.updateDropDownIcon=function(n,t){var i=this.getMultiSelectionComboBox(t);n.css("display")==="block"?i.find(".e-designer-ejwidgets-updown").removeClass("e-arrow-sans-down").addClass("e-arrow-sans-up"):i.find(".e-designer-ejwidgets-updown").removeClass("e-arrow-sans-up").addClass("e-arrow-sans-down")},n.prototype.getMultiSelectionComboBox=function(n){return $("#"+n+"_multi_select_dropDown")},n.prototype.getComboBoxTextField=function(n){return $("#"+n+"_multi_select_dropDown_text")},n.prototype.getPopupContainer=function(n){return $("#"+n+"_popup_container")},n.prototype.getPopupListBoxDiv=function(n){return $("#"+n+"_popup_container_list_Box_div")},n.prototype.getPopupSearchPanel=function(n){return $("#"+n+"_popup_container_searchPanel")},n.prototype.getSearchTextBox=function(n,t){return n.find("#"+t+"_popup_container_searchBox")},n.prototype.getSearchIcon=function(n,t){return n.find("#"+t+"_popup_container_searchIcon")},n.prototype.getPopupListBox=function(n){return $("#"+n+"_popup_container_list_Box")},n.prototype.getPopupOkButton=function(n){return $("#"+n+"_popup_container_ok_btn")},n.prototype.getPopupCancelButton=function(n){return $("#"+n+"_popup_container_cancel_btn")},n.prototype.resetMultiSelectionComboInfo=function(n){var t=this.getComboBoxTextField(n),i=this.getPopupListBox(n);t.text(this.dashboardDesigner.locale.colorCustomAdvanceLocale.selectAny);i.data("Filters",null)},n.prototype.setListboxFilters=function(n,t){var i=this.getPopupListBox(n);i.data("Filters",t)},n}();window.ej.createObject("ej.DashboardDesignerUtility.ColorCustomizationInclusionSelection",InternalColorCustomizationInclusionSelection,window);InternalColorCustomizationBasicSettings=function(){function n(){this.dashboardDesigner=null;this.footerTag=null;this.basicSettingsDialog=null;this.basicSettingsContainer=null;this.basicSettingsScrollElement=null;this.basicSettingsValuesWrapper=null;this.dataGroupInfo=null;this.selectedColumnName="";this.resetButton=null;this.defaultColorPalette=["#77A7FB","#E57368","#FBCB43","#34B67A","#F1AB68","#6CC2D9","#195962","#E18878","#1AA27D","#BFAAC7","#89695e","#a5c77f","#f48fb1","#90caf9","#cc4452"];this.okButton=null;this.dashboardDesigner=ejDashboardDesigner.getInstance("DashboardDesigner");this.propertyPanel=ejDashboardDesigner.getInstance("PropertyPanel");this.colorPicker=ejDashboardDesigner.getInstance("ColorPicker");this.id=this.dashboardDesigner._id;this.renderBasicSettingsWindow()}return Object.defineProperty(n,"getBasicSettings",{get:function(){return(this.colorCustomizationBasicSettings===null||this.colorCustomizationBasicSettings===undefined)&&(this.colorCustomizationBasicSettings=new ej.DashboardDesignerUtility.ColorCustomizationBasicSettings),this.colorCustomizationBasicSettings},enumerable:!0,configurable:!0}),n.prototype.renderBasicSettingsWindow=function(){var i=ej.buildTag("div.e-userselect","",{},{id:this.id+"_legend_settings"}),n=this.basicSettingsContainer=ej.buildTag("div.e-basic-settings-dialog-container e-userselect e-dbrd-designer-scroller e-dbrd-control","",{},{id:this.id+"_basic_settings_container"}),u=this.basicSettingsValuesWrapper=ej.buildTag("div","",{},{id:this.id+"_basicSettings_Columns_Div"}),o=this.basicSettingsScrollElement=ej.buildTag("div.e-basic-settings-colorElements","",{},{id:this.id+"_basic_settings_colorValue_elements"});u.append(o);n.append(u);var f=ej.buildTag("button.e-basic-settings-button e-dbrd-hand-cursor","",{},{id:this.id+"_basic_settings_cancel"}),e=this.okButton=ej.buildTag("button.e-basic-settings-button e-dbrd-hand-cursor","",{},{id:this.id+"_basic_settings_ok"}),r=this.resetButton=ej.buildTag("button.e-basic-settings-reset-button disabled e-dbrd-hand-cursor","",{},{id:this.id+"_basic_color_settings_reset"}),t=this.dashboardDesigner.locale.dialogOptions;r.attr("title",t.resetButtonTooltip);i.append(n);$(document.body).append(i);this.basicSettingsDialog=i.ejDialog({title:"Column: "+this.selectedColumnName,width:"auto",height:"auto",minWidth:450,minHeight:420,enableAnimation:!1,enableResize:!1,showOnInit:!1,enableModal:!0,showFooter:!0,containment:this.dashboardDesigner._id,cssClass:"e-designer-dialog e-flat-mode e-dashboarddesigner",close:$.proxy(this.cancelBtnClick,this)}).data("ejDialog");this.footerTag=$("#"+this.id+"_legend_settings_foot");this.footerTag.append(r).append(f).append(e);e.ejButton({text:t.applyButtonText,showRoundedCorner:!0,cssClass:"e-designer-okbtn",size:"mini",click:$.proxy(this.saveBasicSettings,this)});f.ejButton({text:t.cancelButtonText,showRoundedCorner:!0,cssClass:"e-designer-cancelbtn",size:"mini",click:$.proxy(this.closeBasicSettingsDialog,this)});r.ejButton({text:t.resetButtonText,showRoundedCorner:!0,cssClass:"e-dashboarddesigner-reset-btn",size:"mini",click:$.proxy(this.resetBasicSettings,this)});this.ejWaitingIndicator=n.ejWaitingPopup({showOnInit:!1,cssClass:"e-designer-waitingpopup e-designer-loader"}).data("ejWaitingPopup");n.ejScroller({height:"380px",scrollerSize:9,enableTouchScroll:!0,autoHide:!0,buttonSize:14});this.scrollerObj=n.data("ejScroller");ej.isNullOrUndefined(this.scrollerObj)||this.scrollerObj.refresh();ej.DashboardUtil.buttonEnable(this.okButton,!1);ej.DashboardUtil.buttonEnable(this.resetButton,!1)},n.prototype.saveBasicSettings=function(){var r=$(this.basicSettingsScrollElement).children(),n=null,i,t;if(!ej.isNullOrUndefined(r)&&(n=r.filter("[data-modified]"),!ej.isNullOrUndefined(n))){for(i=[],t=0;t<n.length;t++){var u=$(n[t]).find(".e-basic-settings-column-name"),f=$(n[t]).find(".e-basic-settings-column-value"),e=ej.isNullOrUndefined(u)?"":u.text(),o=ej.isNullOrUndefined(f)?"":f.attr("data-color");i.push({Name:e,Color:o.toLocaleUpperCase(),IsEdited:!0})}this.internalDefaultModeObj.DefaultColors=i}this.cancelBtnClick()},n.prototype.closeBasicSettingsDialog=function(){this.basicSettingsDialog.close();ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.internalDefaultModeObj,this.selectedColumn]);!ej.isNullOrUndefined(this.ejWaitingIndicator)&&this.ejWaitingIndicator.model.showOnInit&&this.hideLoadingIndicator()},n.prototype.resetBasicSettings=function(){var n=this;this.resetValues();this.showLoadingIndicator();setTimeout(function(){try{n.getColumnValues(n.selectedColumn,!0)}catch(t){n.hideLoadingIndicator()}},100)},n.prototype.getSelectedColumnName=function(){var f=this,i=this.dataGroupInfo,t,n,r,e,u;if(!ej.isNullOrUndefined(i.Values)&&i.Values.length>0)for(t=i.Values,n=0;n<t.length;n++)for(r=0;r<t[n].Values.length;r++)e=t[n].Values,u=e.filter(function(n){return n.DataId===f.selectedColumn.Key&&n.UniqueColumnName===f.selectedColumn.UniqueColumnName})[0],ej.isNullOrUndefined(u)||(this.selectedColumnName=u.Field,this.basicSettingsDialog.setTitle("Column: "+this.selectedColumnName))},n.prototype.renderRowElement=function(n,t,i){var e=$("#"+this.id+"_basic_settings_container").width(),u=ej.buildTag("div.e-basic-settings-column-row-element","",{},{id:this.id+"_basic_settings_column_Label"+i}),o=ej.buildTag("div.e-basic-settings-column-name-element","",{width:(e-30)*62/100+"px"}),r=ej.buildTag("div.e-basic-settings-column-name e-designer-fontfamily","",{"max-width":(e-30)*62/100-15+"px"},{id:this.id+"_basic_settings_column_Label_Name"+i}),f;r.text(t.Name);o.append(r);u.append(o);r.addClass(ej.DashboardUtil.isExistTextWidth(r,!0)?"e-title-tip":"");r.hasClass("e-title-tip")&&r.attr("title",t.Name);f=ej.buildTag("div.e-basic-settings-column-value","",{},{id:this.id+"_basic_settings_column_Label_Value"+i});f.attr("data-color",t.Color);this.colorPicker.renderColorPicker(f,this,"enableSaveButton");u.append(f);!ej.isNullOrUndefined(t.IsEdited)&&t.IsEdited&&$(u).attr({"data-modified":!0});n.append(u)},n.prototype.populateColumns=function(n,t){for(var r,u=[],f=JSON.parse(t),i=0;i<f.length;i++)r=!ej.isNullOrUndefined(this.internalDefaultModeObj)&&this.internalDefaultModeObj.DefaultColors.length>0&&!ej.isNullOrUndefined(this.internalDefaultModeObj.DefaultColors[i])?this.internalDefaultModeObj.DefaultColors[i].Name===f[i][this.selectedColumn.UniqueColumnName]?this.internalDefaultModeObj.DefaultColors[i]:null:null,u.push({Name:!n&&!ej.isNullOrUndefined(r)?r.Name:f[i][this.selectedColumn.UniqueColumnName],IsEdited:!n&&!ej.isNullOrUndefined(r)?r.IsEdited:!1,Color:!n&&!ej.isNullOrUndefined(r)?r.Color:this.defaultColorPalette[i%this.defaultColorPalette.length]});for(i=0;i<u.length;i++)this.renderRowElement(this.basicSettingsScrollElement,u[i],i);this.basicSettingsValuesWrapper.append(this.basicSettingsScrollElement);this.basicSettingsContainer.append(this.basicSettingsValuesWrapper);ej.DashboardUtil.buttonEnable(this.resetButton,!0);ej.isNullOrUndefined(this.scrollerObj)||this.scrollerObj.refresh();this.hideLoadingIndicator()},n.prototype.enableSaveButton=function(){var n=$(this.basicSettingsScrollElement).children(),t=null;ej.isNullOrUndefined(n)?ej.DashboardUtil.buttonEnable(this.okButton,!1):(t=n.filter("[data-modified]"),ej.isNullOrUndefined(t)?ej.DashboardUtil.buttonEnable(this.okButton,!1):ej.DashboardUtil.buttonEnable(this.okButton,!0))},n.prototype.cancelBtnClick=function(){this.basicSettingsDialog.close();ej.DashboardUtil.invokeMethod(this.targetInstance,this.targetMethod,[this.internalDefaultModeObj,this.selectedColumn]);!ej.isNullOrUndefined(this.ejWaitingIndicator)&&this.ejWaitingIndicator.model.showOnInit&&this.hideLoadingIndicator();$(".e-color-picker").remove()},n.prototype.getColumnValues=function(n,t){var u,f,e,r,o,s,i;if(ej.DashboardUtil.buttonEnable(this.okButton,!1),ej.DashboardUtil.buttonEnable(this.resetButton,!1),u=[],f=this.dataGroupInfo,!ej.isNullOrUndefined(f.Values)&&f.Values.length>0)for(e=f.Values,r=0;r<e.length;r++)for(o=0;o<e[r].Values.length;o++)if(s=e[r].Values,i=s.filter(function(t){return t.DataId===n.Key&&t.UniqueColumnName===n.UniqueColumnName})[0],!ej.isNullOrUndefined(i)){u.push({Id:i.DataId,Name:i.Field,SummaryType:i.SummaryType,Sorting:i.Sorting,CustomSorting:i.CustomSorting,FieldType:i.FieldType,MeasureFormatting:i.MeasureFormatting,DateTimeFormat:i.DateTimeFormat,FilterInfo:i.FilterInfo,UniqueColumnName:i.UniqueColumnName,IsKPIColumn:i.IsKPIColumn,KPIColumnInfo:i.KPIColumnInfo,IsExpression:i.IsExpression,IsAggregatedExpression:i.IsAggregatedExpression});break}this.selectedColumnName=u[0].Name;ej.DashboardUtil.getInstance().doAjaxPost("POST",this.dashboardDesigner.model.serviceUrl+"/PostDesignerAction/",{action:ej.DashboardUtil.DesignerAction.executeQuery,data:JSON.stringify({designerAction:ej.DashboardUtil.DesignerAction.getColumnValues,dataset:this.dataGroupInfo.DatasetId,fieldInfo:u})},{fnction:$.proxy(this.populateColumns,this,t)},!0)},n.prototype.showLoadingIndicator=function(){this.ejWaitingIndicator&&this.ejWaitingIndicator.show()},n.prototype.hideLoadingIndicator=function(){this.ejWaitingIndicator&&this.ejWaitingIndicator.hide()},n.prototype.openBasicSettingSDialog=function(n,t,i,r){var u=this;this.resetValues();this.targetInstance=n;this.targetMethod=t;this.selectedColumn=i.selectedColumn;this.colorFields=i.colorFields;this.dsId=i.selectedColumn.Key;this.dataGroupInfo=r;this.internalDefaultModeObj=$.extend(!0,{},i.defaultColorSettings);this.basicSettingsDialog.open();this.getSelectedColumnName();this.showLoadingIndicator();setTimeout(function(){try{u.getColumnValues(u.selectedColumn,!1)}catch(n){u.hideLoadingIndicator()}},100)},n.prototype.resetValues=function(){this.basicSettingsContainer.empty();this.basicSettingsScrollElement.empty()},n}();window.ej.createObject("ej.DashboardDesignerUtility.ColorCustomizationBasicSettings",InternalColorCustomizationBasicSettings,window);
